<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|65db389206be45a8b09b8f44df711ab68801f2cc|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"c20c226d07e7bf\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-5120"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-5120] Row from SYSDEPENDS gets deleted when a table has update triggers defined on it and an upate is made to the table - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-5120] Row from SYSDEPENDS gets deleted when a table has update triggers defined on it and an upate is made to the table - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-5120">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-5120" href="/jira/browse/DERBY-5120" id="key-val" rel="12500942">DERBY-5120</a></li>
                </ol>
                <h1 id="summary-val">Row from SYSDEPENDS gets deleted when a table has update triggers defined on it and an upate is made to the table</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-5120"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-5120/DERBY-5120.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-5120/DERBY-5120.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-5120/DERBY-5120.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-5120/DERBY-5120.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.2.2.0 ">10.2.2.0</span>, <span title="10.8.1.2 First release on the 10.8 branch">10.8.1.2</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.8.2.2" title="10.8.2.2 second release on the 10.8 branch">10.8.2.2</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.9.1.0" title="10.9.1.0 First release on the 10.9 branch">10.9.1.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12500942-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>I have an ij script below which shows that the number of rows in SYSDEPENDS go down by 1 for the following test case after an update is made to a table with update triggers defined on it. Am not sure what kind of problems the missing dependnecy might cause.</p> 
                  <p>connect 'jdbc:derby:c:/dellater/db1;create=true';<br> CREATE TABLE ATDC_13_TAB1(c11 int, c12 int);<br> insert into ATDC_13_TAB1 values (1,11);</p> 
                  <p>create table ATDC_13_TAB2(c21 int, c22 int);<br> insert into ATDC_13_TAB2 values (1,11);</p> 
                  <p>create table ATDC_13_TAB3(c31 int, c32 int);<br> insert into ATDC_13_TAB3 values (1,11);</p> 
                  <p>create table ATDC_13_TAB1_backup(c11 int, c12 int);<br> insert into ATDC_13_TAB1_backup values (1,11);</p> 
                  <p> create trigger ATDC_13_TAB1_trigger_1 after update <br> on ATDC_13_TAB1 for each row mode db2sql <br> INSERT INTO ATDC_13_TAB1_BACKUP(C11) <br> SELECT C21 from ATDC_13_TAB2;</p> 
                  <p> create trigger ATDC_13_TAB1_trigger_2 after update <br> on ATDC_13_TAB1 for each row mode db2sql <br> INSERT INTO ATDC_13_TAB1_BACKUP <br> SELECT C31, C32 from ATDC_13_TAB3;</p> 
                  <p>– following shows 14 rows<br> select * from sys.sysdepends;<br> update ATDC_13_TAB1 set c12=11;<br> – following shows only 13 rows</p> 
                  <p>I tried this on 10.2 and 10.8 and saw the same behavior on both. It seems like the dependency that gets dropped is between the stored prepared statement and a table. Have not spent enough time to find out more details but I thought it is worth pointing out the behavior<br> select * from sys.sysdepends;</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-5120?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-5120?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-5120?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-5120?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486120" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486120/DERBY5120_patch1_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch1_diff.txt:https://issues.apache.org/jira/secure/attachment/12486120/DERBY5120_patch1_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486120/DERBY5120_patch1_diff.txt" title="Latest  11/Jul/11 23:34 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch1_diff.txt:https://issues.apache.org/jira/secure/attachment/12486120/DERBY5120_patch1_diff.txt">DERBY5120_patch1_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-11T23:34:05.026Z">11/Jul/11 23:34</time>
                   </dd>
                   <dd class="attachment-size">
                    1 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486121" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486121/DERBY5120_patch1_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch1_stat.txt:https://issues.apache.org/jira/secure/attachment/12486121/DERBY5120_patch1_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486121/DERBY5120_patch1_stat.txt" title="Latest  11/Jul/11 23:34 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch1_stat.txt:https://issues.apache.org/jira/secure/attachment/12486121/DERBY5120_patch1_stat.txt">DERBY5120_patch1_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-11T23:34:05.035Z">11/Jul/11 23:34</time>
                   </dd>
                   <dd class="attachment-size">
                    0.2 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486205" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486205/DERBY5120_patch2_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch2_diff.txt:https://issues.apache.org/jira/secure/attachment/12486205/DERBY5120_patch2_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486205/DERBY5120_patch2_diff.txt" title="Latest  12/Jul/11 17:08 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch2_diff.txt:https://issues.apache.org/jira/secure/attachment/12486205/DERBY5120_patch2_diff.txt">DERBY5120_patch2_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-12T17:08:48.987Z">12/Jul/11 17:08</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486206" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486206/DERBY5120_patch2_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch2_stat.txt:https://issues.apache.org/jira/secure/attachment/12486206/DERBY5120_patch2_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486206/DERBY5120_patch2_stat.txt" title="Latest  12/Jul/11 17:08 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch2_stat.txt:https://issues.apache.org/jira/secure/attachment/12486206/DERBY5120_patch2_stat.txt">DERBY5120_patch2_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-12T17:08:48.995Z">12/Jul/11 17:08</time>
                   </dd>
                   <dd class="attachment-size">
                    0.3 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486258" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486258/DERBY5120_patch3_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch3_diff.txt:https://issues.apache.org/jira/secure/attachment/12486258/DERBY5120_patch3_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486258/DERBY5120_patch3_diff.txt" title="Latest  13/Jul/11 02:25 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch3_diff.txt:https://issues.apache.org/jira/secure/attachment/12486258/DERBY5120_patch3_diff.txt">DERBY5120_patch3_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-13T02:25:32.049Z">13/Jul/11 02:25</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486259" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486259/DERBY5120_patch3_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch3_stat.txt:https://issues.apache.org/jira/secure/attachment/12486259/DERBY5120_patch3_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486259/DERBY5120_patch3_stat.txt" title="Latest  13/Jul/11 02:25 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch3_stat.txt:https://issues.apache.org/jira/secure/attachment/12486259/DERBY5120_patch3_stat.txt">DERBY5120_patch3_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-13T02:25:32.057Z">13/Jul/11 02:25</time>
                   </dd>
                   <dd class="attachment-size">
                    0.4 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486345" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486345/DERBY5120_patch4_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch4_diff.txt:https://issues.apache.org/jira/secure/attachment/12486345/DERBY5120_patch4_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486345/DERBY5120_patch4_diff.txt" title="Latest  13/Jul/11 18:45 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch4_diff.txt:https://issues.apache.org/jira/secure/attachment/12486345/DERBY5120_patch4_diff.txt">DERBY5120_patch4_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-13T18:45:00.134Z">13/Jul/11 18:45</time>
                   </dd>
                   <dd class="attachment-size">
                    14 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486346" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486346/DERBY5120_patch4_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch4_stat.txt:https://issues.apache.org/jira/secure/attachment/12486346/DERBY5120_patch4_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486346/DERBY5120_patch4_stat.txt" title="Latest  13/Jul/11 18:45 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch4_stat.txt:https://issues.apache.org/jira/secure/attachment/12486346/DERBY5120_patch4_stat.txt">DERBY5120_patch4_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-13T18:45:00.195Z">13/Jul/11 18:45</time>
                   </dd>
                   <dd class="attachment-size">
                    0.5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486462" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486462/DERBY5120_patch5_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch5_diff.txt:https://issues.apache.org/jira/secure/attachment/12486462/DERBY5120_patch5_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486462/DERBY5120_patch5_diff.txt" title="Latest  14/Jul/11 16:06 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch5_diff.txt:https://issues.apache.org/jira/secure/attachment/12486462/DERBY5120_patch5_diff.txt">DERBY5120_patch5_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-14T16:06:31.845Z">14/Jul/11 16:06</time>
                   </dd>
                   <dd class="attachment-size">
                    15 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12486463" data-issue-id="12500942" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12486463/DERBY5120_patch5_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY5120_patch5_stat.txt:https://issues.apache.org/jira/secure/attachment/12486463/DERBY5120_patch5_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12486463/DERBY5120_patch5_stat.txt" title="Latest  14/Jul/11 16:06 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY5120_patch5_stat.txt:https://issues.apache.org/jira/secure/attachment/12486463/DERBY5120_patch5_stat.txt">DERBY5120_patch5_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-07-14T16:06:31.856Z">14/Jul/11 16:06</time>
                   </dd>
                   <dd class="attachment-size">
                    0.5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12731721_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-6684: Failure in testDERBY5120NumRowsInSydependsForTrigger when upgrading from 10.11.1.0 to trunk"> <a href="/jira/browse/DERBY-6684" data-issue-key="DERBY-6684" class="issue-link link-title resolution">DERBY-6684</a> <span class="link-summary">Failure in testDERBY5120NumRowsInSydependsForTrigger when upgrading from 10.11.1.0 to trunk</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12513295_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-5323: SYSDEPENDS may be keeping redundant dependency info. Specific information for trigger case in this jira but there might be other cases as well"> <a href="/jira/browse/DERBY-5323" data-issue-key="DERBY-5323" class="issue-link link-title">DERBY-5323</a> <span class="link-summary">SYSDEPENDS may be keeping redundant dependency info. Specific information for trigger case in this jira but there might be other cases as well</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mamtas" rel="mamtas" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mamta A. Satoor&quot;,&quot;emailAddress&quot;:&quot;msatoor@gmail.com&quot;,&quot;username&quot;:&quot;mamtas&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mamtas"></span></span> Mamta A. Satoor </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_mamtas" rel="mamtas" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mamta A. Satoor&quot;,&quot;emailAddress&quot;:&quot;msatoor@gmail.com&quot;,&quot;username&quot;:&quot;mamtas&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mamtas"></span></span> Mamta A. Satoor </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">1</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="09/Mar/11 20:41"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2011-03-09T20:41:02+0000">09/Mar/11 20:41</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="06/Aug/14 00:21"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2014-08-06T00:21:29+0000">06/Aug/14 00:21</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="02/Aug/11 19:20"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2011-08-02T19:20:06+0000">02/Aug/11 19:20</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-5120?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-5120?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-13058688\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13058688&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13058688\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13058688_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13058688_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jul\\/11 18:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-01T18:17:55+0000\'\u003e01\\/Jul\\/11 18:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI much simpler test case for this jira is as follows\u003c\\/p\u003e\\n\\n\u003cp\u003econnect \'jdbc:derby:db1_2;create=true\'; \u003cbr\\/\u003e\\nCREATE TABLE ATDC_13_TAB1(c11 int, c12 int); \u003cbr\\/\u003e\\ninsert into ATDC_13_TAB1 values (1,11); \u003c\\/p\u003e\\n\\n\u003cp\u003ecreate trigger ATDC_13_TAB1_trigger_1 after update \u003cbr\\/\u003e\\n         on ATDC_13_TAB1 for each row mode db2sql \u003cbr\\/\u003e\\n          values(1);\u003c\\/p\u003e\\n\\n\u003cp\u003ecreate trigger ATDC_13_TAB1_trigger_2 after update \u003cbr\\/\u003e\\n         on ATDC_13_TAB1 for each row mode db2sql \u003cbr\\/\u003e\\n         values(1,2);\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; following shows 6 rows \u003cbr\\/\u003e\\nselect * from sys.sysdepends; \u003cbr\\/\u003e\\nupdate ATDC_13_TAB1 set c12=11; \u003cbr\\/\u003e\\n&#8211; following shows only 5 rows \u003cbr\\/\u003e\\nselect * from sys.sysdepends; \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13058688_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13058688_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jul\\/11 18:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-01T18:17:55+0000\'\u003e01\\/Jul\\/11 18:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I much simpler test case for this jira is as follows \\n\\n connect \'jdbc:derby:db1_2;create=true\';  \\nCREATE TABLE ATDC_13_TAB1(c11 int, c12 int);  \\ninsert into ATDC_13_TAB1 values (1,11);  \\n\\n create trigger ATDC_13_TAB1_trigger_1 after update  \\n         on ATDC_13_TAB1 for each row mode db2sql  \\n          values(1); \\n\\n create trigger ATDC_13_TAB1_trigger_2 after update  \\n         on ATDC_13_TAB1 for each row mode db2sql  \\n         values(1,2); \\n\\n &#8211; following shows 6 rows  \\nselect * from sys.sysdepends;  \\nupdate ATDC_13_TAB1 set c12=11;  \\n&#8211; following shows only 5 rows  \\nselect * from sys.sysdepends;               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13059308\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13059308&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13059308\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13059308_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13059308_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jul\\/11 01:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-04T01:26:27+0000\'\u003e04\\/Jul\\/11 01:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA typical CREATE TRIGGER goes through following steps as far as adding\\/deleting rows from SYSDEPENDS tale\u003cbr\\/\u003e\\n1)Any time a trigger is created, CreateTriggerConstantAction.executeConstantAction() sends CREATE_TRIGGER invalidation to the trigger table as shown below(The list of objects getting invalidated will include existing triggers defined on the trigger table).\u003cbr\\/\u003e\\n\\t\\t\\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eSend an invalidate on the table from which\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ethe triggering event emanates.  This it\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eto make sure that DML statements on this table\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ewill be recompiled.  Do this before we create\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eour trigger spses lest we invalidate them just\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eafter creating them.\u003cbr\\/\u003e\\n\\t\\t*\\/\u003cbr\\/\u003e\\n\\t\\tdm.invalidateFor(triggerTable, DependencyManager.CREATE_TRIGGER, lcc);\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e2)Next, CreateTriggerConstantAction.executeConstantAction() does the trigger action sps generation\u003cbr\\/\u003e\\n\\t\\t\\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eCreate the trigger action\u003cbr\\/\u003e\\n\\t\\t*\\/\u003cbr\\/\u003e\\n\\t\\tactionspsd = createSPS(lcc, ddg, dd, tc, tmpTriggerId, triggerSd,\u003cbr\\/\u003e\\n\\t\\t\\t\\t\\t\\tactionSPSId, spsCompSchemaId, actionText, false, triggerTable);\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e3) During trigger action sps generation, SPSDescriptor.compileStatement removes the existing dependencies of trigger action sps in sysdepends as shown below\u003cbr\\/\u003e\\n(for a trigger getting created the first time, there will be no SPS dependencies for the trigger action SPS. The same code is called when a trigger is found invalid, in that case, there will be existing trigger action SPS dependencies which will get dropped here) \\t\u003cbr\\/\u003e\\n\\t\\t\\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eClear out all the dependencies that exist\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ebefore we recreate them so we don\'t grow\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eSYS.SYSDEPENDS forever.\u003cbr\\/\u003e\\n\\t\\t*\\/\u003cbr\\/\u003e\\n\\t\\tdm.clearDependencies(lcc, this, tc);\u003cbr\\/\u003e\\n4)After clearing out existing dependencies, it adds the dependencies that it finds during this compile SPSDescriptor.compileStatement()\u003cbr\\/\u003e\\n\\t\\t\\t\\/*\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eCopy over all the dependencies to me\u003cbr\\/\u003e\\n\\t\\t\\t*\\/\u003cbr\\/\u003e\\n\\t\\t\\tdm.copyDependencies(preparedStatement, \\t\\/\\/ from\u003cbr\\/\u003e\\n\\t\\t\\t\\t\\tthis, \\t\\/\\/ to\u003cbr\\/\u003e\\n\\t\\t\\t\\t\\tfalse,\\t\\/\\/ persistent only\u003cbr\\/\u003e\\n\\t\\t\\t\\t\\tcm,\u003cbr\\/\u003e\\n\\t\\t\\t\\t\\ttc);\u003cbr\\/\u003e\\n5)After finishing with trigger action SPS generation, CreateTriggerConstantAction.executeConstantAction adds the depdencies for the trigger descriptor on trigger action sps and on trigger table. Additionally, it adds depedency on trigger action sps on trigger table(this is the dependency which later gets dropped when a compile of trigger action sps had cleared existing trigger action sps dependencies before regenerating the trigger action sps. The trigger action sps regeneration\u003cbr\\/\u003e\\ndoes not add the dependency between trigger action sps and trigger table\u003cbr\\/\u003e\\n\\t\\tdm.addDependency(triggerd, actionspsd, lcc.getContextManager());\u003cbr\\/\u003e\\n\\t\\tdm.addDependency(triggerd, triggerTable, lcc.getContextManager());\u003cbr\\/\u003e\\n\\t\\tdm.addDependency(actionspsd, triggerTable, lcc.getContextManager());\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eFollowing the steps above (to find what rows get added into SYSDEPENDS)for the first trigger in the simpler example that I posted on 01\\/Jul\\/11\u003cbr\\/\u003e\\ncreate trigger ATDC_13_TAB1_trigger_1 after update \u003cbr\\/\u003e\\n         on ATDC_13_TAB1 for each row mode db2sql \u003cbr\\/\u003e\\n          values(1); \u003cbr\\/\u003e\\nStep 4) will not find any dependencies for trigger action values(1); \u003cbr\\/\u003e\\nStep 5) will add three rows into SYSDEPENDS, namely \u003cbr\\/\u003e\\na)dependency between triiger descriptor for ATDC_13_TAB1_trigger_1 and triiger action SPS \u003cbr\\/\u003e\\nb)dependency between trigger descriptor for ATDC_13_TAB1_trigger_1 and triiger table ATDC_13_TAB1 \u003cbr\\/\u003e\\n3)dependency between triiger action SPS and triiger table ATDC_13_TAB1 \u003c\\/p\u003e\\n\\n\u003cp\u003eThis is how, we end up with three rows for the first trigger ATDC_13_TAB1_trigger_1 \u003c\\/p\u003e\\n\\n\u003cp\u003eWhen the 2nd trigger(ATDC_13_TAB1_trigger_2) is created, it also results into adding 3 rows into SYSDEPENDS but additionally in step 1), it invalidates the existing trigger ATDC_13_TAB1_trigger_1\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13059308_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13059308_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jul\\/11 01:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-04T01:26:27+0000\'\u003e04\\/Jul\\/11 01:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    A typical CREATE TRIGGER goes through following steps as far as adding\\/deleting rows from SYSDEPENDS tale \\n1)Any time a trigger is created, CreateTriggerConstantAction.executeConstantAction() sends CREATE_TRIGGER invalidation to the trigger table as shown below(The list of objects getting invalidated will include existing triggers defined on the trigger table). \\n\\t\\t\\/* \\n \\n\\t \\n\\t \\n\\t\\t Send an invalidate on the table from which \\n\\t\\t the triggering event emanates.  This it \\n\\t\\t to make sure that DML statements on this table \\n\\t\\t will be recompiled.  Do this before we create \\n\\t\\t our trigger spses lest we invalidate them just \\n\\t\\t after creating them. \\n\\t\\t*\\/ \\n\\t\\tdm.invalidateFor(triggerTable, DependencyManager.CREATE_TRIGGER, lcc); \\n\\t \\n\\t \\n \\n\\n\\n 2)Next, CreateTriggerConstantAction.executeConstantAction() does the trigger action sps generation \\n\\t\\t\\/* \\n \\n\\t \\n\\t \\n\\t\\t Create the trigger action \\n\\t\\t*\\/ \\n\\t\\tactionspsd = createSPS(lcc, ddg, dd, tc, tmpTriggerId, triggerSd, \\n\\t\\t\\t\\t\\t\\tactionSPSId, spsCompSchemaId, actionText, false, triggerTable); \\n\\t \\n\\t \\n \\n\\n\\n 3) During trigger action sps generation, SPSDescriptor.compileStatement removes the existing dependencies of trigger action sps in sysdepends as shown below \\n(for a trigger getting created the first time, there will be no SPS dependencies for the trigger action SPS. The same code is called when a trigger is found invalid, in that case, there will be existing trigger action SPS dependencies which will get dropped here) \\t \\n\\t\\t\\/* \\n \\n\\t \\n\\t \\n\\t\\t Clear out all the dependencies that exist \\n\\t\\t before we recreate them so we don\'t grow \\n\\t\\t SYS.SYSDEPENDS forever. \\n\\t\\t*\\/ \\n\\t\\tdm.clearDependencies(lcc, this, tc); \\n4)After clearing out existing dependencies, it adds the dependencies that it finds during this compile SPSDescriptor.compileStatement() \\n\\t\\t\\t\\/* \\n\\t\\t Copy over all the dependencies to me \\n\\t\\t\\t*\\/ \\n\\t\\t\\tdm.copyDependencies(preparedStatement, \\t\\/\\/ from \\n\\t\\t\\t\\t\\tthis, \\t\\/\\/ to \\n\\t\\t\\t\\t\\tfalse,\\t\\/\\/ persistent only \\n\\t\\t\\t\\t\\tcm, \\n\\t\\t\\t\\t\\ttc); \\n5)After finishing with trigger action SPS generation, CreateTriggerConstantAction.executeConstantAction adds the depdencies for the trigger descriptor on trigger action sps and on trigger table. Additionally, it adds depedency on trigger action sps on trigger table(this is the dependency which later gets dropped when a compile of trigger action sps had cleared existing trigger action sps dependencies before regenerating the trigger action sps. The trigger action sps regeneration \\ndoes not add the dependency between trigger action sps and trigger table \\n\\t\\tdm.addDependency(triggerd, actionspsd, lcc.getContextManager()); \\n\\t\\tdm.addDependency(triggerd, triggerTable, lcc.getContextManager()); \\n\\t\\tdm.addDependency(actionspsd, triggerTable, lcc.getContextManager()); \\n\\t \\n\\t \\n \\n\\n\\n Following the steps above (to find what rows get added into SYSDEPENDS)for the first trigger in the simpler example that I posted on 01\\/Jul\\/11 \\ncreate trigger ATDC_13_TAB1_trigger_1 after update  \\n         on ATDC_13_TAB1 for each row mode db2sql  \\n          values(1);  \\nStep 4) will not find any dependencies for trigger action values(1);  \\nStep 5) will add three rows into SYSDEPENDS, namely  \\na)dependency between triiger descriptor for ATDC_13_TAB1_trigger_1 and triiger action SPS  \\nb)dependency between trigger descriptor for ATDC_13_TAB1_trigger_1 and triiger table ATDC_13_TAB1  \\n3)dependency between triiger action SPS and triiger table ATDC_13_TAB1  \\n\\n This is how, we end up with three rows for the first trigger ATDC_13_TAB1_trigger_1  \\n\\n When the 2nd trigger(ATDC_13_TAB1_trigger_2) is created, it also results into adding 3 rows into SYSDEPENDS but additionally in step 1), it invalidates the existing trigger ATDC_13_TAB1_trigger_1              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13060566\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13060566&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13060566\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13060566_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060566_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 13:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T13:21:06+0000\'\u003e06\\/Jul\\/11 13:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mamta, I am confused by this code to be honest. For example, the\u003cbr\\/\u003e\\nfollowing fragment:\u003c\\/p\u003e\\n\\n\u003cp\u003e\\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eMake underlying spses dependent on the trigger.\u003cbr\\/\u003e\\n *\\/\u003cbr\\/\u003e\\nif (whenspsd != null)\u003cbr\\/\u003e\\n{\u003cbr\\/\u003e\\n    dm.addDependency(triggerd, whenspsd, lcc.getContextManager());\u003cbr\\/\u003e\\n}\u003cbr\\/\u003e\\ndm.addDependency(triggerd, actionspsd, lcc.getContextManager());\u003cbr\\/\u003e\\ndm.addDependency(triggerd, triggerTable, lcc.getContextManager());\u003cbr\\/\u003e\\ndm.addDependency(actionspsd, triggerTable, lcc.getContextManager());\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eAs far as I understand, the first addDependency makes \\\"triggerd\\\"\u003cbr\\/\u003e\\ndependent on \\\"whenspsd\\\", but the comment says its the other way\u003cbr\\/\u003e\\naround.\u003c\\/p\u003e\\n\\n\u003cp\u003eSimilarly, the second add makes \\\"triggerd\\\" dependent on\u003cbr\\/\u003e\\n\\\"actionspsd\\\". I would have throught it should be the other way around?\u003cbr\\/\u003e\\nThat the stored sps should dependent on the trigger definition as as\u003cbr\\/\u003e\\nto get recompiled when the trigger definition changed.. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe third and the fourth adds make sense to me: when the table\u003cbr\\/\u003e\\nchanges, the trigger definition would need recompilation and when the\u003cbr\\/\u003e\\ntriggerTable changed the actionspsd would need recompilation.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut I may be missing something here... \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13060566_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060566_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 13:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T13:21:06+0000\'\u003e06\\/Jul\\/11 13:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mamta, I am confused by this code to be honest. For example, the \\nfollowing fragment: \\n\\n \\/* \\n \\n\\t \\n\\t \\n\\t\\t Make underlying spses dependent on the trigger. \\n *\\/ \\nif (whenspsd != null) \\n{ \\n    dm.addDependency(triggerd, whenspsd, lcc.getContextManager()); \\n} \\ndm.addDependency(triggerd, actionspsd, lcc.getContextManager()); \\ndm.addDependency(triggerd, triggerTable, lcc.getContextManager()); \\ndm.addDependency(actionspsd, triggerTable, lcc.getContextManager()); \\n\\t \\n\\t \\n \\n\\n\\n As far as I understand, the first addDependency makes \\\"triggerd\\\" \\ndependent on \\\"whenspsd\\\", but the comment says its the other way \\naround. \\n\\n Similarly, the second add makes \\\"triggerd\\\" dependent on \\n\\\"actionspsd\\\". I would have throught it should be the other way around? \\nThat the stored sps should dependent on the trigger definition as as \\nto get recompiled when the trigger definition changed..  \\n\\n The third and the fourth adds make sense to me: when the table \\nchanges, the trigger definition would need recompilation and when the \\ntriggerTable changed the actionspsd would need recompilation. \\n\\n But I may be missing something here...               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13060723\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13060723&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13060723\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13060723_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060723_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 17:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T17:57:54+0000\'\u003e06\\/Jul\\/11 17:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDag, I tend to agree with your comments. The cooment in the code does not seem to agree with the kinds of dependencies added by first 2 addDepency statements. I tried looking through the history of this code and it appears that we have this code from the very beginning.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut, I debugged further to find out why one of the rows added during CREATE TRIGGER time gets dropped later on. The issue seems to be around trigger action sps getting invalidated and later getting recompiled when it gets fired next time around. Going back to the example test case provided earlier\u003c\\/p\u003e\\n\\n\u003cp\u003econnect \'jdbc:derby:db1_2;create=true\'; \u003cbr\\/\u003e\\nCREATE TABLE ATDC_13_TAB1(c11 int, c12 int); \u003cbr\\/\u003e\\ninsert into ATDC_13_TAB1 values (1,11); \u003c\\/p\u003e\\n\\n\u003cp\u003ecreate trigger ATDC_13_TAB1_trigger_1 after update \u003cbr\\/\u003e\\n         on ATDC_13_TAB1 for each row mode db2sql \u003cbr\\/\u003e\\n          values(1); \u003c\\/p\u003e\\n\\n\u003cp\u003ecreate trigger ATDC_13_TAB1_trigger_2 after update \u003cbr\\/\u003e\\n         on ATDC_13_TAB1 for each row mode db2sql \u003cbr\\/\u003e\\n         values(1,2); \u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; following shows 6 rows \u003cbr\\/\u003e\\nselect * from sys.sysdepends; \u003cbr\\/\u003e\\nupdate ATDC_13_TAB1 set c12=11; \u003cbr\\/\u003e\\n&#8211; following shows only 5 rows \u003cbr\\/\u003e\\nselect * from sys.sysdepends; \u003c\\/p\u003e\\n\\n\u003cp\u003eWhen the 2nd trigger(ATDC_13_TAB1_trigger_2) gets created, CreateTriggerConstantAction sends CREATE_TRIGGER invalidation to the trigger table as shown below(This sends invalidation code to the first trigger ATDC_13_TAB1_trigger_1)\u003cbr\\/\u003e\\n\\t\\t\\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eSend an invalidate on the table from which\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ethe triggering event emanates.  This it\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eto make sure that DML statements on this table\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ewill be recompiled.  Do this before we create\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eour trigger spses lest we invalidate them just\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eafter creating them.\u003cbr\\/\u003e\\n\\t\\t*\\/\u003cbr\\/\u003e\\n\\t\\tdm.invalidateFor(triggerTable, DependencyManager.CREATE_TRIGGER, lcc);\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eLater when, \\\"update ATDC_13_TAB1 set c12=11\\\" statement is executed, it fires both the triggers. The first trigger\u003cbr\\/\u003e\\n(ATDC_13_TAB1_trigger_1) during it\'s execution finds that it is invalid. During recompilation, SPSDescriptor.compileStatement \u003cbr\\/\u003e\\nremoves the existing dependencies recorded in SYSDEPENDS table for the trigger action sps as shown below.This step ends up\u003cbr\\/\u003e\\nremoving the dependency recorded between the trigger action sps and trigger table(added by CreateTriggerConstantAction at the time trigger creation) and that is where we can one row short.\u003cbr\\/\u003e\\n\\t\\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eClear out all the dependencies that exist\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ebefore we recreate them so we don\'t grow\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eSYS.SYSDEPENDS forever.\u003cbr\\/\u003e\\n\\t*\\/\u003cbr\\/\u003e\\n\\tdm.clearDependencies(lcc, this, tc);\u003cbr\\/\u003e\\nAfter clearing out existing dependencies for invalid trigger action sps, the trigger action sps regeneration process adds the dependencies that it finds during this recompile SPSDescriptor.compileStatement()\u003cbr\\/\u003e\\n\\t\\/*\u003c\\/li\u003e\\n\\t\\t\u003cli\u003eCopy over all the dependencies to me\u003cbr\\/\u003e\\n\\t*\\/\u003cbr\\/\u003e\\n\\tdm.copyDependencies(preparedStatement, \\t\\/\\/ from\u003cbr\\/\u003e\\n\\t\\tthis, \\t\\/\\/ to\u003cbr\\/\u003e\\n\\t\\tfalse,\\t\\/\\/ persistent only\u003cbr\\/\u003e\\n\\t\\tcm,\u003cbr\\/\u003e\\n\\t\\ttc);\u003cbr\\/\u003e\\nBut the dependency between trigger action SPSD and trigger table never gets added back during the recompilation and that is where we loose a row from SYSDEPENDS.\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13060723_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060723_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 17:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T17:57:54+0000\'\u003e06\\/Jul\\/11 17:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dag, I tend to agree with your comments. The cooment in the code does not seem to agree with the kinds of dependencies added by first 2 addDepency statements. I tried looking through the history of this code and it appears that we have this code from the very beginning. \\n\\n But, I debugged further to find out why one of the rows added during CREATE TRIGGER time gets dropped later on. The issue seems to be around trigger action sps getting invalidated and later getting recompiled when it gets fired next time around. Going back to the example test case provided earlier \\n\\n connect \'jdbc:derby:db1_2;create=true\';  \\nCREATE TABLE ATDC_13_TAB1(c11 int, c12 int);  \\ninsert into ATDC_13_TAB1 values (1,11);  \\n\\n create trigger ATDC_13_TAB1_trigger_1 after update  \\n         on ATDC_13_TAB1 for each row mode db2sql  \\n          values(1);  \\n\\n create trigger ATDC_13_TAB1_trigger_2 after update  \\n         on ATDC_13_TAB1 for each row mode db2sql  \\n         values(1,2);  \\n\\n &#8211; following shows 6 rows  \\nselect * from sys.sysdepends;  \\nupdate ATDC_13_TAB1 set c12=11;  \\n&#8211; following shows only 5 rows  \\nselect * from sys.sysdepends;  \\n\\n When the 2nd trigger(ATDC_13_TAB1_trigger_2) gets created, CreateTriggerConstantAction sends CREATE_TRIGGER invalidation to the trigger table as shown below(This sends invalidation code to the first trigger ATDC_13_TAB1_trigger_1) \\n\\t\\t\\/* \\n \\n\\t \\n\\t \\n\\t\\t Send an invalidate on the table from which \\n\\t\\t the triggering event emanates.  This it \\n\\t\\t to make sure that DML statements on this table \\n\\t\\t will be recompiled.  Do this before we create \\n\\t\\t our trigger spses lest we invalidate them just \\n\\t\\t after creating them. \\n\\t\\t*\\/ \\n\\t\\tdm.invalidateFor(triggerTable, DependencyManager.CREATE_TRIGGER, lcc); \\n\\t \\n\\t \\n \\n\\n\\n Later when, \\\"update ATDC_13_TAB1 set c12=11\\\" statement is executed, it fires both the triggers. The first trigger \\n(ATDC_13_TAB1_trigger_1) during it\'s execution finds that it is invalid. During recompilation, SPSDescriptor.compileStatement  \\nremoves the existing dependencies recorded in SYSDEPENDS table for the trigger action sps as shown below.This step ends up \\nremoving the dependency recorded between the trigger action sps and trigger table(added by CreateTriggerConstantAction at the time trigger creation) and that is where we can one row short. \\n\\t\\/* \\n \\n\\t \\n\\t \\n\\t\\t Clear out all the dependencies that exist \\n\\t\\t before we recreate them so we don\'t grow \\n\\t\\t SYS.SYSDEPENDS forever. \\n\\t*\\/ \\n\\tdm.clearDependencies(lcc, this, tc); \\nAfter clearing out existing dependencies for invalid trigger action sps, the trigger action sps regeneration process adds the dependencies that it finds during this recompile SPSDescriptor.compileStatement() \\n\\t\\/* \\n\\t\\t Copy over all the dependencies to me \\n\\t*\\/ \\n\\tdm.copyDependencies(preparedStatement, \\t\\/\\/ from \\n\\t\\tthis, \\t\\/\\/ to \\n\\t\\tfalse,\\t\\/\\/ persistent only \\n\\t\\tcm, \\n\\t\\ttc); \\nBut the dependency between trigger action SPSD and trigger table never gets added back during the recompilation and that is where we loose a row from SYSDEPENDS. \\n\\t \\n\\t \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13060783\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13060783&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13060783\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13060783_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060783_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 19:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T19:31:50+0000\'\u003e06\\/Jul\\/11 19:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI guess the trigger action statement here (\\\"values(1)\\\") isn\'t really dependent on either the table or the trigger definition for that matter? So maybe it doesn\'t matter. Maybe it was gratuitous in the first place? Maybe the table dependency should always (only) be added by the compilation step of the SPS..? The comment (\\\"SIDE EFFECTS\\\") in SPSDescriptor#prepareAndRelease seems to indicate it would happen there..\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems weird that adding a second trigger should invalidate the first trigger\'s SPS, though, but as far as I can see it\'s a side effect of forcing DML statements to be recompiled when adding the second trigger. It would seems this could set of a ping-pong of invalidation between triggers, but I guess it doesn\'t, since on invalidation of the first trigger\'s SPS we just recompile and do not re-execute the code in CreateTriggerConstantAction (which would otherwise set off the CREATE_TRIGGER invalidation on the trigger table and hence recompile of the second etc)...\u003c\\/p\u003e\\n\\n\u003cp\u003eThe whole idea of invalidation is to keep things up to date, maybe we should revisit what dependencies are really needed for triggers, right now it\'s not clear to me..\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13060783_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13060783_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/11 19:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-06T19:31:50+0000\'\u003e06\\/Jul\\/11 19:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I guess the trigger action statement here (\\\"values(1)\\\") isn\'t really dependent on either the table or the trigger definition for that matter? So maybe it doesn\'t matter. Maybe it was gratuitous in the first place? Maybe the table dependency should always (only) be added by the compilation step of the SPS..? The comment (\\\"SIDE EFFECTS\\\") in SPSDescriptor#prepareAndRelease seems to indicate it would happen there.. \\n\\n It seems weird that adding a second trigger should invalidate the first trigger\'s SPS, though, but as far as I can see it\'s a side effect of forcing DML statements to be recompiled when adding the second trigger. It would seems this could set of a ping-pong of invalidation between triggers, but I guess it doesn\'t, since on invalidation of the first trigger\'s SPS we just recompile and do not re-execute the code in CreateTriggerConstantAction (which would otherwise set off the CREATE_TRIGGER invalidation on the trigger table and hence recompile of the second etc)... \\n\\n The whole idea of invalidation is to keep things up to date, maybe we should revisit what dependencies are really needed for triggers, right now it\'s not clear to me..              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061458\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13061458&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061458\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13061458_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061458_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 17:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T17:45:17+0000\'\u003e07\\/Jul\\/11 17:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have a test case(with comments in the script below) that shows how missing row in SYSDEPENDS does not catch a trigger getting invalid.\u003c\\/p\u003e\\n\\n\u003cp\u003econnect \'jdbc:derby:db1;create=true\';\u003cbr\\/\u003e\\ncreate table t1(c11 int, c12 int);\u003cbr\\/\u003e\\ninsert into t1 values(1,1);\u003cbr\\/\u003e\\ncreate table t1_bkup1(c111 int, c112 int);\u003cbr\\/\u003e\\ncreate table t1_bkup2(c211 int, c212 int);\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; for following trigger, 5 rows will be added to sysdepends\u003cbr\\/\u003e\\ncreate trigger tr1 after update of c11 on t1 referencing\u003cbr\\/\u003e\\n old_table as old for each statement insert into\u003cbr\\/\u003e\\n t1_bkup1 select * from old;\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; for following trigger, 5 rows will be added to sysdepends\u003cbr\\/\u003e\\n&#8211; This trigger creation will also invalidate the trigger tr1 \u003cbr\\/\u003e\\ncreate trigger tr2 after update of c11 on t1 referencing\u003cbr\\/\u003e\\n old as oldrow for each row insert into\u003cbr\\/\u003e\\n t1_bkup2(c211) values (oldrow.c11);\u003cbr\\/\u003e\\nselect count\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e from sys.sysdepends;\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; following update will cause tr1 to recompile because it has been marked invalid\u003cbr\\/\u003e\\n&#8211; But as part of recompile, trigger action sps\'s dependency on trigger table will\u003cbr\\/\u003e\\n&#8211;  be lost bringing down the total number of rows in sysdepends from 10 to 9\u003cbr\\/\u003e\\nupdate t1 set c11=2;\u003cbr\\/\u003e\\nselect count\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/star_yellow.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e from sys.sysdepends;\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; Because the dependency between trigger tr1\'s trigger action sps and trigger table\u003cbr\\/\u003e\\n&#8211;   is lost, following alter table on trigger table will not be noticed by tr1\u003cbr\\/\u003e\\nalter table t1 add column c113 int;\u003cbr\\/\u003e\\n&#8211; following update will not fail for trigger tr1 even though it is not correct anymore(tr1\u003cbr\\/\u003e\\n&#8211;  is inserting into t1_bkup1 but after the alter table the number of columns in \u003cbr\\/\u003e\\n&#8211;  trigger table do not match the number of columns in t1_bkup1 but this is never \u003cbr\\/\u003e\\n&#8211;  caught because of the missing dependency.)\u003cbr\\/\u003e\\nupdate t1 set c11=3;\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; We can prove that trigger tr1 is incorrect after alter table because if we tried \u003cbr\\/\u003e\\n&#8211;  creating another trigger with same definition as tr1, it will fail\u003cbr\\/\u003e\\ncreate trigger tr3 after update of c11 on t1 referencing\u003cbr\\/\u003e\\n old_table as old for each statement insert into\u003cbr\\/\u003e\\n t1_bkup1 select * from old;\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13061458_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061458_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 17:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T17:45:17+0000\'\u003e07\\/Jul\\/11 17:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have a test case(with comments in the script below) that shows how missing row in SYSDEPENDS does not catch a trigger getting invalid. \\n\\n connect \'jdbc:derby:db1;create=true\'; \\ncreate table t1(c11 int, c12 int); \\ninsert into t1 values(1,1); \\ncreate table t1_bkup1(c111 int, c112 int); \\ncreate table t1_bkup2(c211 int, c212 int); \\n\\n &#8211; for following trigger, 5 rows will be added to sysdepends \\ncreate trigger tr1 after update of c11 on t1 referencing \\n old_table as old for each statement insert into \\n t1_bkup1 select * from old; \\n\\n &#8211; for following trigger, 5 rows will be added to sysdepends \\n&#8211; This trigger creation will also invalidate the trigger tr1  \\ncreate trigger tr2 after update of c11 on t1 referencing \\n old as oldrow for each row insert into \\n t1_bkup2(c211) values (oldrow.c11); \\nselect count  from sys.sysdepends; \\n\\n &#8211; following update will cause tr1 to recompile because it has been marked invalid \\n&#8211; But as part of recompile, trigger action sps\'s dependency on trigger table will \\n&#8211;  be lost bringing down the total number of rows in sysdepends from 10 to 9 \\nupdate t1 set c11=2; \\nselect count  from sys.sysdepends; \\n\\n &#8211; Because the dependency between trigger tr1\'s trigger action sps and trigger table \\n&#8211;   is lost, following alter table on trigger table will not be noticed by tr1 \\nalter table t1 add column c113 int; \\n&#8211; following update will not fail for trigger tr1 even though it is not correct anymore(tr1 \\n&#8211;  is inserting into t1_bkup1 but after the alter table the number of columns in  \\n&#8211;  trigger table do not match the number of columns in t1_bkup1 but this is never  \\n&#8211;  caught because of the missing dependency.) \\nupdate t1 set c11=3; \\n\\n &#8211; We can prove that trigger tr1 is incorrect after alter table because if we tried  \\n&#8211;  creating another trigger with same definition as tr1, it will fail \\ncreate trigger tr3 after update of c11 on t1 referencing \\n old_table as old for each statement insert into \\n t1_bkup1 select * from old;              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061488\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13061488&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061488\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13061488_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061488_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 18:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T18:56:33+0000\'\u003e07\\/Jul\\/11 18:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eInteresting. Why isn\'t the dependency on the trigger table (bound as old, oldrow) added during (re)prepare of the action statement I wonder? If it were, the dependency would be added back\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/help_16.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13061488_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061488_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 18:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T18:56:33+0000\'\u003e07\\/Jul\\/11 18:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Interesting. Why isn\'t the dependency on the trigger table (bound as old, oldrow) added during (re)prepare of the action statement I wonder? If it were, the dependency would be added back               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061500\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13061500&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061500\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13061500_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061500_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T19:03:08+0000\'\u003e07\\/Jul\\/11 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhat would be the correct behavior here? Obviously, tr1 is no longer valid after the alter table: should tr1 be silently dropped or should the alter table fail? We don\'t have a CASCADE\\/RESTRICT specification for ADD COLUMN, perhaps this proves we need it?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13061500_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061500_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T19:03:08+0000\'\u003e07\\/Jul\\/11 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    What would be the correct behavior here? Obviously, tr1 is no longer valid after the alter table: should tr1 be silently dropped or should the alter table fail? We don\'t have a CASCADE\\/RESTRICT specification for ADD COLUMN, perhaps this proves we need it?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061524\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13061524&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061524\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13061524_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061524_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 19:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T19:32:11+0000\'\u003e07\\/Jul\\/11 19:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIf the dependency between trigger action sps and trigger table wasn\'t dropped, I think then update sql would fail because of trigger tr1 finding out during recompile that the it is not valid anymore.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs for ALTER TABLE drop column catching the dependency, there are couple jiras open for catching cases like this I think.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am looking at how the dependency between trigger action sps and trigger table can be maintained during the recompile of trigger action.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13061524_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061524_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 19:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T19:32:11+0000\'\u003e07\\/Jul\\/11 19:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    If the dependency between trigger action sps and trigger table wasn\'t dropped, I think then update sql would fail because of trigger tr1 finding out during recompile that the it is not valid anymore. \\n\\n As for ALTER TABLE drop column catching the dependency, there are couple jiras open for catching cases like this I think. \\n\\n I am looking at how the dependency between trigger action sps and trigger table can be maintained during the recompile of trigger action.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061570\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13061570&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061570\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13061570_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061570_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 20:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T20:26:49+0000\'\u003e07\\/Jul\\/11 20:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe following theory and example may help people reason about how to fix the problem described by this JIRA.\u003c\\/p\u003e\\n\\n\u003cp\u003e-------------- THEORY ---------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eThe following discussion relies on these definitions and assumptions:\u003c\\/p\u003e\\n\\n\u003cp\u003ei) Invaliding events - These include \\\"object dropped\\\" and \\\"object modified\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eii)  \\\"A -&gt; B\\\" -  This is a dependency arc. It is shorthand for \\\"A  depends on B\\\". Invalidating events travel backward along the  dependency arcs, allowing each object to decide how to respond to the event. Possible responses include: \\\"raise an exception because RESTRICT semantics are violated\\\" and \\\"recompile me\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eiii) Dependency Graph - This is a graph of all dependency arcs needed by Derby. The nodes in this graph are the persistent objects plus PreparedStatements. There is an arrow from A to B iff \\\"A -&gt; B\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eiv) Transitivity - The Dependency Graph obeys the following rule:\u003c\\/p\u003e\\n\\n\u003cp\u003e  if \\\"A -&gt; B\\\" and \\\"B -&gt; C\\\", then \\\"A -&gt; C\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003ev) SYSDEPENDS contains dependency arcs between persistent objects.\u003c\\/p\u003e\\n\\n\u003cp\u003evi) Sufficient - SYSDEPENDS is said to be sufficient if it contains enough dependency arcs to reconstruct the entire Dependency Graph. Note that SYSDEPENDS is not the only input to constructing the Dependency Graph. Some arcs are implicitly described by other catalogs. Transitivity can be used to construct further arcs.\u003c\\/p\u003e\\n\\n\u003cp\u003evii) Minimal - SYSDEPENDS is said to be minimal if it contains the smallest number of arcs needed to reconstruct the entire Dependency Graph. For instance, if SYSDEPENDS contains the arcs \\\"A -&gt; B\\\" and \\\"B -&gt; C\\\" then SYSDEPENDS does not need to contain the \\\"A -&gt; C\\\" arc because Derby can reconstruct that arc from the Transitivity rule.\u003c\\/p\u003e\\n\\n\u003cp\u003eviii) Fuzzy - SYSDEPENDS is said to be fuzzy if it contains arcs that are not in the Dependency Graph.\u003c\\/p\u003e\\n\\n\u003cp\u003eI would venture the following:\u003c\\/p\u003e\\n\\n\u003cp\u003eI) SYSDEPENDS should be Sufficient and not Fuzzy.\u003c\\/p\u003e\\n\\n\u003cp\u003eII) Even if SYSDEPENDS is Sufficient, Derby may have a bug which prevents it from constructing the complete Dependency Graph. For instance, Derby may be ignoring relevant information in other catalogs.\u003c\\/p\u003e\\n\\n\u003cp\u003eIII) I do not believe that SYSDEPENDS is Minimal. When DDL creates new arcs in the Dependency Graph, Derby does not recompute the contents of SYSDEPENDS just to guarantee a Minimal representation.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e------------- EXAMPLE ------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eLet\'s apply this to a trigger example.\u003c\\/p\u003e\\n\\n\u003cp\u003e  INSERTs into table T1 fire a trigger which INSERTs into table T2\u003c\\/p\u003e\\n\\n\u003cp\u003eThis example gives rise to the following persistent objects:\u003c\\/p\u003e\\n\\n\u003cp\u003e  Tables T1 and T2\u003cbr\\/\u003e\\n  Corresponding conglomerates C1 and C2\u003cbr\\/\u003e\\n  Trigger TR\u003cbr\\/\u003e\\n  Action statement A\u003c\\/p\u003e\\n\\n\u003cp\u003eThe following would be a Minimal representation in SYSDEPENDS:\u003c\\/p\u003e\\n\\n\u003cp\u003e  TR -&gt; T1\u003cbr\\/\u003e\\n  A -&gt; T2\u003c\\/p\u003e\\n\\n\u003cp\u003eNote that the following additional arcs do not need to be modelled in SYSDEPENDS, but can be constructed by Derby from information in other catalogs:\u003c\\/p\u003e\\n\\n\u003cp\u003e  T1 -&gt; C1\u003cbr\\/\u003e\\n  C1 -&gt; T1\u003cbr\\/\u003e\\n  T2 -&gt; C2\u003cbr\\/\u003e\\n  C2 -&gt; T2\u003cbr\\/\u003e\\n  TR -&gt; A\u003cbr\\/\u003e\\n  A -&gt; TR\u003c\\/p\u003e\\n\\n\u003cp\u003eOther arcs arise via the Transitive rule.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat we actually see in SYSDEPENDS is the following Sufficient, non-Minimal representation:\u003c\\/p\u003e\\n\\n\u003cp\u003e  TR -&gt; T1\u003cbr\\/\u003e\\n  TR -&gt; A (non-Minimal, could be constructed from SYSTRIGGERS)\u003cbr\\/\u003e\\n  A -&gt; T1 (non-Minimal, could be constructed by Transitivity)\u003cbr\\/\u003e\\n  A -&gt; T2\u003cbr\\/\u003e\\n  A -&gt; C2  (non-Minimal, could be constructed by Transitivity)\u003c\\/p\u003e\\n\\n\u003cp\u003eHere is a script which shows this example:\u003c\\/p\u003e\\n\\n\u003cp\u003econnect \'jdbc:derby:memory:db;create=true\'; \u003c\\/p\u003e\\n\\n\u003cp\u003ecreate table t1( a int );\u003cbr\\/\u003e\\ncreate table t2( a int );\u003cbr\\/\u003e\\ncreate trigger trig after insert on t1 for each statement insert into t2( a ) values( 1 );\u003c\\/p\u003e\\n\\n\u003cp\u003eselect * from sys.sysdepends order by dependentid, providerid;\u003cbr\\/\u003e\\nselect tablename, tableid from sys.systables where tablename like \'T%\';\u003cbr\\/\u003e\\nselect t.tablename, c.conglomerateid\u003cbr\\/\u003e\\nfrom sys.systables t, sys.sysconglomerates c\u003cbr\\/\u003e\\nwhere tablename like \'T%\'\u003cbr\\/\u003e\\nand t.tableid = c.tableid;\u003cbr\\/\u003e\\nselect triggerid from sys.systriggers;\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13061570_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061570_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 20:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T20:26:49+0000\'\u003e07\\/Jul\\/11 20:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The following theory and example may help people reason about how to fix the problem described by this JIRA. \\n\\n -------------- THEORY --------------------- \\n\\n The following discussion relies on these definitions and assumptions: \\n\\n i) Invaliding events - These include \\\"object dropped\\\" and \\\"object modified\\\". \\n\\n ii)  \\\"A -&gt; B\\\" -  This is a dependency arc. It is shorthand for \\\"A  depends on B\\\". Invalidating events travel backward along the  dependency arcs, allowing each object to decide how to respond to the event. Possible responses include: \\\"raise an exception because RESTRICT semantics are violated\\\" and \\\"recompile me\\\". \\n\\n iii) Dependency Graph - This is a graph of all dependency arcs needed by Derby. The nodes in this graph are the persistent objects plus PreparedStatements. There is an arrow from A to B iff \\\"A -&gt; B\\\". \\n\\n iv) Transitivity - The Dependency Graph obeys the following rule: \\n\\n   if \\\"A -&gt; B\\\" and \\\"B -&gt; C\\\", then \\\"A -&gt; C\\\" \\n\\n v) SYSDEPENDS contains dependency arcs between persistent objects. \\n\\n vi) Sufficient - SYSDEPENDS is said to be sufficient if it contains enough dependency arcs to reconstruct the entire Dependency Graph. Note that SYSDEPENDS is not the only input to constructing the Dependency Graph. Some arcs are implicitly described by other catalogs. Transitivity can be used to construct further arcs. \\n\\n vii) Minimal - SYSDEPENDS is said to be minimal if it contains the smallest number of arcs needed to reconstruct the entire Dependency Graph. For instance, if SYSDEPENDS contains the arcs \\\"A -&gt; B\\\" and \\\"B -&gt; C\\\" then SYSDEPENDS does not need to contain the \\\"A -&gt; C\\\" arc because Derby can reconstruct that arc from the Transitivity rule. \\n\\n viii) Fuzzy - SYSDEPENDS is said to be fuzzy if it contains arcs that are not in the Dependency Graph. \\n\\n I would venture the following: \\n\\n I) SYSDEPENDS should be Sufficient and not Fuzzy. \\n\\n II) Even if SYSDEPENDS is Sufficient, Derby may have a bug which prevents it from constructing the complete Dependency Graph. For instance, Derby may be ignoring relevant information in other catalogs. \\n\\n III) I do not believe that SYSDEPENDS is Minimal. When DDL creates new arcs in the Dependency Graph, Derby does not recompute the contents of SYSDEPENDS just to guarantee a Minimal representation. \\n\\n\\n ------------- EXAMPLE ------------------ \\n\\n Let\'s apply this to a trigger example. \\n\\n   INSERTs into table T1 fire a trigger which INSERTs into table T2 \\n\\n This example gives rise to the following persistent objects: \\n\\n   Tables T1 and T2 \\n  Corresponding conglomerates C1 and C2 \\n  Trigger TR \\n  Action statement A \\n\\n The following would be a Minimal representation in SYSDEPENDS: \\n\\n   TR -&gt; T1 \\n  A -&gt; T2 \\n\\n Note that the following additional arcs do not need to be modelled in SYSDEPENDS, but can be constructed by Derby from information in other catalogs: \\n\\n   T1 -&gt; C1 \\n  C1 -&gt; T1 \\n  T2 -&gt; C2 \\n  C2 -&gt; T2 \\n  TR -&gt; A \\n  A -&gt; TR \\n\\n Other arcs arise via the Transitive rule. \\n\\n What we actually see in SYSDEPENDS is the following Sufficient, non-Minimal representation: \\n\\n   TR -&gt; T1 \\n  TR -&gt; A (non-Minimal, could be constructed from SYSTRIGGERS) \\n  A -&gt; T1 (non-Minimal, could be constructed by Transitivity) \\n  A -&gt; T2 \\n  A -&gt; C2  (non-Minimal, could be constructed by Transitivity) \\n\\n Here is a script which shows this example: \\n\\n connect \'jdbc:derby:memory:db;create=true\';  \\n\\n create table t1( a int ); \\ncreate table t2( a int ); \\ncreate trigger trig after insert on t1 for each statement insert into t2( a ) values( 1 ); \\n\\n select * from sys.sysdepends order by dependentid, providerid; \\nselect tablename, tableid from sys.systables where tablename like \'T%\'; \\nselect t.tablename, c.conglomerateid \\nfrom sys.systables t, sys.sysconglomerates c \\nwhere tablename like \'T%\' \\nand t.tableid = c.tableid; \\nselect triggerid from sys.systriggers;              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061645\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13061645&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061645\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13061645_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061645_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 22:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T22:55:53+0000\'\u003e07\\/Jul\\/11 22:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Rick and Dag on all the time you have put in this jira. I really appreciate that. \u003c\\/p\u003e\\n\\n\u003cp\u003eAs part of this jira though, I will like to focus on how to keep the dependency between trigger action sps and trigger table intact during recompile(which currently gets dropped during the recompile phase). As for the bigger picture of having only the necessary dependencies for triggers and checking if Derby is keeping only the required depdendencies, I will create a new jira for that. I will put Dag\'s and Rick\'s comments in this jira and will also link that new jira to the current jira. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13061645_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061645_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/11 22:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-07T22:55:53+0000\'\u003e07\\/Jul\\/11 22:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Rick and Dag on all the time you have put in this jira. I really appreciate that.  \\n\\n As part of this jira though, I will like to focus on how to keep the dependency between trigger action sps and trigger table intact during recompile(which currently gets dropped during the recompile phase). As for the bigger picture of having only the necessary dependencies for triggers and checking if Derby is keeping only the required depdendencies, I will create a new jira for that. I will put Dag\'s and Rick\'s comments in this jira and will also link that new jira to the current jira.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061713\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13061713&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061713\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13061713_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061713_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 01:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T01:38:08+0000\'\u003e08\\/Jul\\/11 01:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYes Mamta, I can see that the update statement would be the one failing with the current implementation (if the dependency of the action on the trigger table had not been dropped, as you point out). I think the behavior may be wrong, though, the time to fail or drop the trigger should probably at ALTER TABLE time. But that\'s another issue as you say. Meanwhile, I\'m still curious why the dependency wouldn\'t\\/coudln\'t be added back when we reprepare, though, since the trigger action does contain reference to the trigger table, albeit in the form of the \\\"old\\\"\\/\\\"oldrow\\\" aliases (in your second example repro).\u003c\\/p\u003e\\n\\n\u003cp\u003eRick, in your explanation of extended (data) dependencies, some dependencies are bi-directional, mirroring a one-to-one relationhip. When would such bidirectional dependencies ever be required in SYSDEPENDS? I think in some cases we only register unidirectional ones? Is this \\\"pragmatic\\\", in the sense that we register deps in SYSDEPENDS (or in memory only) only in the (inverse) direction we want to invalidate?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_13061713_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061713_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 01:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T01:38:08+0000\'\u003e08\\/Jul\\/11 01:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yes Mamta, I can see that the update statement would be the one failing with the current implementation (if the dependency of the action on the trigger table had not been dropped, as you point out). I think the behavior may be wrong, though, the time to fail or drop the trigger should probably at ALTER TABLE time. But that\'s another issue as you say. Meanwhile, I\'m still curious why the dependency wouldn\'t\\/coudln\'t be added back when we reprepare, though, since the trigger action does contain reference to the trigger table, albeit in the form of the \\\"old\\\"\\/\\\"oldrow\\\" aliases (in your second example repro). \\n\\n Rick, in your explanation of extended (data) dependencies, some dependencies are bi-directional, mirroring a one-to-one relationhip. When would such bidirectional dependencies ever be required in SYSDEPENDS? I think in some cases we only register unidirectional ones? Is this \\\"pragmatic\\\", in the sense that we register deps in SYSDEPENDS (or in memory only) only in the (inverse) direction we want to invalidate?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13061940\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13061940&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13061940\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13061940_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061940_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 13:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T13:00:09+0000\'\u003e08\\/Jul\\/11 13:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Dag,\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that SYSDEPENDS exists in order to make it fast to reconstruct the Dependency Graph. It doesn\'t need to contain arcs representing the relationship between tables and conglomerates because those can be figured out quickly by looking at other catalogs. But the arc backward from a triggering table to its trigger is hard to reconstruct, so that arc is put into SYSDEPENDS.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe issue of bidirectional arcs (cycles) is interesting. I don\'t know if there are any examples of this in SYSDEPENDS. However, the cycles should exist in the Dependency Graph I think. The example of tables and conglomerates comes to mind:\u003c\\/p\u003e\\n\\n\u003cp\u003e  T1 -&gt; C1 models the fact that dropping the conglomerate (e.g. by bulk import) should invalidate the table.\u003c\\/p\u003e\\n\\n\u003cp\u003e  C1 -&gt; T1 models the fact that dropping the table should also drop the conglomerate.\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t think that Derby systematically implements the Dependency Graph I have described. My impression is that dependency management is a hodge-podge today. Some of the relationships are managed by the dependency subsystem. Other relationships are managed by little winks and nods in other parts of the SQL interpreter. In my opinion this hodge-podge makes dependency management brittle and hard to reason about.\u003c\\/p\u003e\\n\\n\u003cp\u003eHi Mamta,\u003c\\/p\u003e\\n\\n\u003cp\u003eI may not be following your analysis. But it sounds to me as though the following arc has vanished from SYSDEPENDS:\u003c\\/p\u003e\\n\\n\u003cp\u003e  A -&gt; triggeringTable\u003c\\/p\u003e\\n\\n\u003cp\u003eI am suggesting that this is a non-Minimal arc and doesn\'t need to be in SYSDEPENDS. Derby should be able to construct this arc on the fly via Transitivity from the following arcs:\u003c\\/p\u003e\\n\\n\u003cp\u003e A -&gt; TR (this is known from SYSTRIGGERS)\u003cbr\\/\u003e\\n TR -&gt; triggeringTable (this is still in SYSDEPENDS if I understand correctly)\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks,\u003cbr\\/\u003e\\n-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13061940_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13061940_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 13:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T13:00:09+0000\'\u003e08\\/Jul\\/11 13:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Dag, \\n\\n I think that SYSDEPENDS exists in order to make it fast to reconstruct the Dependency Graph. It doesn\'t need to contain arcs representing the relationship between tables and conglomerates because those can be figured out quickly by looking at other catalogs. But the arc backward from a triggering table to its trigger is hard to reconstruct, so that arc is put into SYSDEPENDS. \\n\\n The issue of bidirectional arcs (cycles) is interesting. I don\'t know if there are any examples of this in SYSDEPENDS. However, the cycles should exist in the Dependency Graph I think. The example of tables and conglomerates comes to mind: \\n\\n   T1 -&gt; C1 models the fact that dropping the conglomerate (e.g. by bulk import) should invalidate the table. \\n\\n   C1 -&gt; T1 models the fact that dropping the table should also drop the conglomerate. \\n\\n I don\'t think that Derby systematically implements the Dependency Graph I have described. My impression is that dependency management is a hodge-podge today. Some of the relationships are managed by the dependency subsystem. Other relationships are managed by little winks and nods in other parts of the SQL interpreter. In my opinion this hodge-podge makes dependency management brittle and hard to reason about. \\n\\n Hi Mamta, \\n\\n I may not be following your analysis. But it sounds to me as though the following arc has vanished from SYSDEPENDS: \\n\\n   A -&gt; triggeringTable \\n\\n I am suggesting that this is a non-Minimal arc and doesn\'t need to be in SYSDEPENDS. Derby should be able to construct this arc on the fly via Transitivity from the following arcs: \\n\\n  A -&gt; TR (this is known from SYSTRIGGERS) \\n TR -&gt; triggeringTable (this is still in SYSDEPENDS if I understand correctly) \\n\\n Thanks, \\n-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13062102\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13062102&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13062102\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13062102_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062102_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T18:34:06+0000\'\u003e08\\/Jul\\/11 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated a new jira to see if dependency info in SYSDEPENDS can be cleaned up a little with all the great info provided by Rick. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe new jira number is \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-5323\\\" title=\\\"SYSDEPENDS may be keeping redundant dependency info. Specific information for trigger case in this jira but there might be other cases as well\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-5323\\\"\u003eDERBY-5323\u003c\\/a\u003e SYSDEPENDS may be keeping redundant dependency info. Specific informatio\\u200Bn for trigger case in this jira but there might be other cases as well.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have connected the 2 jiras.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13062102_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062102_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 18:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T18:34:06+0000\'\u003e08\\/Jul\\/11 18:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created a new jira to see if dependency info in SYSDEPENDS can be cleaned up a little with all the great info provided by Rick.  \\n\\n The new jira number is  DERBY-5323  SYSDEPENDS may be keeping redundant dependency info. Specific informatio\\u200Bn for trigger case in this jira but there might be other cases as well. \\n\\n I have connected the 2 jiras.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13062104\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13062104&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13062104\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13062104_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062104_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T18:40:06+0000\'\u003e08\\/Jul\\/11 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRick, I was planning to keep my focus on just maintaining the dependency that was originally intended for trigger. At the create trigger time, we add the dependency between trigger action and trigger table. We loose that during trigger recompile. I think this fix will be real easy by having SPSDescriptor add this dependency info rather than create trigger do it. This will take care of both create trigger and trigger action recompile because of invalidity. Let me know if you, Dag or anyone else have any feedback on moving the trigger action -&gt; trigger table dependency to SPSDescriptor from Create Trigger. Thanks\u003c\\/p\u003e\\n\\n\u003cp\u003eI agree that some of these dependencies can probably be established programmatically rather than SYSDEPENDS having to carry it. But I will like that work to go as part of the new jira \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-5323\\\" title=\\\"SYSDEPENDS may be keeping redundant dependency info. Specific information for trigger case in this jira but there might be other cases as well\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-5323\\\"\u003eDERBY-5323\u003c\\/a\u003e.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13062104_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062104_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T18:40:06+0000\'\u003e08\\/Jul\\/11 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Rick, I was planning to keep my focus on just maintaining the dependency that was originally intended for trigger. At the create trigger time, we add the dependency between trigger action and trigger table. We loose that during trigger recompile. I think this fix will be real easy by having SPSDescriptor add this dependency info rather than create trigger do it. This will take care of both create trigger and trigger action recompile because of invalidity. Let me know if you, Dag or anyone else have any feedback on moving the trigger action -&gt; trigger table dependency to SPSDescriptor from Create Trigger. Thanks \\n\\n I agree that some of these dependencies can probably be established programmatically rather than SYSDEPENDS having to carry it. But I will like that work to go as part of the new jira  DERBY-5323 .              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13062118\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13062118&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13062118\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13062118_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062118_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 19:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T19:11:13+0000\'\u003e08\\/Jul\\/11 19:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mamta,\u003c\\/p\u003e\\n\\n\u003cp\u003eYour plan sounds good to me. Thanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_13062118_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13062118_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/11 19:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-08T19:11:13+0000\'\u003e08\\/Jul\\/11 19:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mamta, \\n\\n Your plan sounds good to me. Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13063608\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13063608&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13063608\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13063608_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13063608_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/11 23:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-11T23:34:05+0000\'\u003e11\\/Jul\\/11 23:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am attaching a patch which moves recording to trigger action sps\'s dependency on trigger table from create trigger constant action to SPSDescriptor. This should take care of both create trigger time and sps regeneration time. I am seeing couple failures with this patch. I hope to have those tests fixed by tomorrow. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13063608_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13063608_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/11 23:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-11T23:34:05+0000\'\u003e11\\/Jul\\/11 23:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am attaching a patch which moves recording to trigger action sps\'s dependency on trigger table from create trigger constant action to SPSDescriptor. This should take care of both create trigger time and sps regeneration time. I am seeing couple failures with this patch. I hope to have those tests fixed by tomorrow.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13064007\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13064007&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13064007\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13064007_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13064007_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/11 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-12T17:08:49+0000\'\u003e12\\/Jul\\/11 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am attaching another patch which has two test problems resolved which I saw seeing with the earlier patch. The two tests that were failing with patch 1 were 1)AlterTableTest,testDropColumn This was failing because  the number of rows in sysdepends were not as expected by the test. I found the problem was that AlterTableConstantAction does a drop and recreate trigger and it was adding the dependency between trigger action sps and trigger table. It does not need to add that dependency anymore because it is taken care of by SPSDescriptor. Removing the dependency add code from AlterTableConstantAction resolved the problem.\u003cbr\\/\u003e\\n2)triggerGeneral.sql was failing because a trigger action was using select * from trigger table to insert into another table. Later an alter table was performed to add one more column to the trigger table. With missing dependency before, trigger action was not getting regenerated and hence trigger didn\'t detect that it is not valid anymore. After I have made the changes for the dependency, trigger action gets invalidated when a new column is added to trigger table and this will cause the trigger to fail.I have fixed the test to not do select * in trigger action so add column will not impact it. The test in triggerGeneral has been written for a specific purpose and that is why I didn\'t want the test to fail with select *. I will add another test which will catch a case like insert into select * in trigger action and it getting invalid with add column.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe only tasks left on this jira is to add the test I mentioned. Additionally, I plan to add an upgrade test.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf anyone has any feedback, please let me know.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13064007_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13064007_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/11 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-12T17:08:49+0000\'\u003e12\\/Jul\\/11 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am attaching another patch which has two test problems resolved which I saw seeing with the earlier patch. The two tests that were failing with patch 1 were 1)AlterTableTest,testDropColumn This was failing because  the number of rows in sysdepends were not as expected by the test. I found the problem was that AlterTableConstantAction does a drop and recreate trigger and it was adding the dependency between trigger action sps and trigger table. It does not need to add that dependency anymore because it is taken care of by SPSDescriptor. Removing the dependency add code from AlterTableConstantAction resolved the problem. \\n2)triggerGeneral.sql was failing because a trigger action was using select * from trigger table to insert into another table. Later an alter table was performed to add one more column to the trigger table. With missing dependency before, trigger action was not getting regenerated and hence trigger didn\'t detect that it is not valid anymore. After I have made the changes for the dependency, trigger action gets invalidated when a new column is added to trigger table and this will cause the trigger to fail.I have fixed the test to not do select * in trigger action so add column will not impact it. The test in triggerGeneral has been written for a specific purpose and that is why I didn\'t want the test to fail with select *. I will add another test which will catch a case like insert into select * in trigger action and it getting invalid with add column. \\n\\n The only tasks left on this jira is to add the test I mentioned. Additionally, I plan to add an upgrade test. \\n\\n If anyone has any feedback, please let me know.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13064297\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13064297&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13064297\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13064297_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13064297_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/11 02:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-13T02:25:32+0000\'\u003e13\\/Jul\\/11 02:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAdding a new patch which now has a test for the changes.Next,will work on an upgrade test\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13064297_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13064297_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/11 02:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-13T02:25:32+0000\'\u003e13\\/Jul\\/11 02:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Adding a new patch which now has a test for the changes.Next,will work on an upgrade test              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13064760\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13064760&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13064760\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13064760_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13064760_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/11 18:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-13T18:45:00+0000\'\u003e13\\/Jul\\/11 18:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching patch DERBY5120_patch4_diff.txt which now also has an upgrade test. The upgrade test\'s intention is to verify that sysdepedns row that may have been dropped of in earlier releases will be restored during the various phases of upgrade. In other words, when a pre-10.9 db is soft\\/hard upgraded to trunk, the missing row will be added back into sysdepends. But after the soft-upgrade, if the db is taken back to it\'s original release, the row will be lost again.I am verifying this by looking at the count of number of rows in sysdepends. \u003c\\/p\u003e\\n\\n\u003cp\u003eI am running into one issue with this test though. There are few releases where the rows in sysdepends do not match with what the test expects them to. I am doing more debugging to find what might be the issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13064760_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13064760_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/11 18:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-13T18:45:00+0000\'\u003e13\\/Jul\\/11 18:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching patch DERBY5120_patch4_diff.txt which now also has an upgrade test. The upgrade test\'s intention is to verify that sysdepedns row that may have been dropped of in earlier releases will be restored during the various phases of upgrade. In other words, when a pre-10.9 db is soft\\/hard upgraded to trunk, the missing row will be added back into sysdepends. But after the soft-upgrade, if the db is taken back to it\'s original release, the row will be lost again.I am verifying this by looking at the count of number of rows in sysdepends.  \\n\\n I am running into one issue with this test though. There are few releases where the rows in sysdepends do not match with what the test expects them to. I am doing more debugging to find what might be the issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13064903\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13064903&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13064903\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13064903_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13064903_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/11 22:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-13T22:01:32+0000\'\u003e13\\/Jul\\/11 22:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 13\\/Jul\\/11 22:03\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have found that the new upgrade test added in patch 4 fails for 10.5.1.1, 10.5.3.0, 10.6.1.0 and 10.6.2.1 releases. I do not believe the problem is with my changes, I am debugging further to find out why the test fails only with these 4 releases. The test is failing for those 4 releases because the number of rows expected by the test do not match with what\'s actually found in the database.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13064903_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13064903_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/11 22:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-13T22:01:32+0000\'\u003e13\\/Jul\\/11 22:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 13\\/Jul\\/11 22:03\\\"\u003eedited\u003c\\/span\u003e                   I have found that the new upgrade test added in patch 4 fails for 10.5.1.1, 10.5.3.0, 10.6.1.0 and 10.6.2.1 releases. I do not believe the problem is with my changes, I am debugging further to find out why the test fails only with these 4 releases. The test is failing for those 4 releases because the number of rows expected by the test do not match with what\'s actually found in the database.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13065353\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13065353&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13065353\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13065353_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13065353_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/11 16:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-14T16:06:31+0000\'\u003e14\\/Jul\\/11 16:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching final patch which is ready for commit. The reason newly added upgrade test(from patch 4) is failing with 10.5.1.1, 10.5.3.0, 10.6.1.0 and 10.6.2.1 releases is that those releases have \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4835\\\" title=\\\"Trigger plan does not recompile with upgrade from 10.5.3.0 to 10.6.1.0 causing  java.lang.NoSuchMethodError\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4835\\\"\u003e\u003cdel\u003eDERBY-4835\u003c\\/del\u003e\u003c\\/a\u003e fix missing from them.\u003c\\/p\u003e\\n\\n\u003cp\u003e        During the upgrade time, the clearing of stored statements(including trigger action spses) happened conditionally before \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4835\\\" title=\\\"Trigger plan does not recompile with upgrade from 10.5.3.0 to 10.6.1.0 causing  java.lang.NoSuchMethodError\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4835\\\"\u003e\u003cdel\u003eDERBY-4835\u003c\\/del\u003e\u003c\\/a\u003e was fixed. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4835\\\" title=\\\"Trigger plan does not recompile with upgrade from 10.5.3.0 to 10.6.1.0 causing  java.lang.NoSuchMethodError\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4835\\\"\u003e\u003cdel\u003eDERBY-4835\u003c\\/del\u003e\u003c\\/a\u003e made changes so that the stored statements get marked invalid unconditionally during the upgrade phase. But these changes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4835\\\" title=\\\"Trigger plan does not recompile with upgrade from 10.5.3.0 to 10.6.1.0 causing  java.lang.NoSuchMethodError\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4835\\\"\u003e\u003cdel\u003eDERBY-4835\u003c\\/del\u003e\u003c\\/a\u003e did not make into 10.5.1.1, 10.5.3.0, 10.6.1.0 and 10.6.2.1. Because of this missing fix, trigger action spses do not get marked invalid when the database is taken after soft upgrade back to the original db release(if the original db release is one of the releases mentioned above). The newly added upgrade test relies on trigger action spses getting invalid during upgrade phase and getting recompiled when they are fired next time around thus altering the number of rows in sysdepends. Because of this, I have disabled the upgrade test for those 4 releases.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will go ahead and commit this patch\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13065353_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13065353_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/11 16:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-14T16:06:31+0000\'\u003e14\\/Jul\\/11 16:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching final patch which is ready for commit. The reason newly added upgrade test(from patch 4) is failing with 10.5.1.1, 10.5.3.0, 10.6.1.0 and 10.6.2.1 releases is that those releases have   DERBY-4835   fix missing from them. \\n\\n         During the upgrade time, the clearing of stored statements(including trigger action spses) happened conditionally before   DERBY-4835   was fixed.   DERBY-4835   made changes so that the stored statements get marked invalid unconditionally during the upgrade phase. But these changes for   DERBY-4835   did not make into 10.5.1.1, 10.5.3.0, 10.6.1.0 and 10.6.2.1. Because of this missing fix, trigger action spses do not get marked invalid when the database is taken after soft upgrade back to the original db release(if the original db release is one of the releases mentioned above). The newly added upgrade test relies on trigger action spses getting invalid during upgrade phase and getting recompiled when they are fired next time around thus altering the number of rows in sysdepends. Because of this, I have disabled the upgrade test for those 4 releases. \\n\\n I will go ahead and commit this patch              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13065354\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13065354&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13065354\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13065354_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13065354_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/11 16:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-14T16:08:19+0000\'\u003e14\\/Jul\\/11 16:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBTW, when I run the junite suite with patch number 5, I see only known intermittent failures as shown below. derbyall ran fine with no errors.\u003cbr\\/\u003e\\n1) testBootLock(org.apache.derbyTesting.functionTests.tests.store.BootLockTest)java.lang.InterruptedException\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.store.BootLockTest.testBootLock(BootLockTest.java:158)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\n2) ManagementMBeanTest:clientjava.lang.InterruptedException\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.SpawnedProcess.complete(SpawnedProcess.java:182)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.tearDown(NetworkServerTestSetup.java:394)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:20)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:51)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\nThere were 3 failures:\u003cbr\\/\u003e\\n1) testPingWithWrongHost(org.apache.derbyTesting.functionTests.tests.derbynet.NetworkServerControlClientCommandTest)junit.framework.AssertionFailedError: Could not find expectedString:Unable to find host in output:Wed Jul 13 19:37:36 PDT 2011 : Could not connect to Derby Network Server on host nothere, port 1527: Connection timed out: connect\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derbyTesting.junit.BaseTestCase.assertExecJavaCmdAsExpected(BaseTestCase.java:516)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.derbynet.NetworkServerControlClientCommandTest.assertFailedPing(NetworkServerControlClientCommandTest.java:147)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.derbynet.NetworkServerControlClientCommandTest.testPingWithWrongHost(NetworkServerControlClientCommandTest.java:112)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n2) testInvalidLDAPServerConnectionError(org.apache.derbyTesting.functionTests.tests.jdbcapi.InvalidLDAPServerAuthenticationTest)junit.framework.AssertionFailedError\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.InvalidLDAPServerAuthenticationTest.testInvalidLDAPServerConnectionError(InvalidLDAPServerAuthenticationTest.java:122)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\n3) testInvalidLDAPServerConnectionErrorjunit.framework.AssertionFailedError: Failed to delete 8 files (root=C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48: C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\db.lck (isDir=false, canRead=true, canWrite=true, size=38), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\log\\\\log1.dat (isDir=false, canRead=true, canWrite=true, size=1048576), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\log (isDir=true, canRead=true, canWrite=true, size=0), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\seg0\\\\c10.dat (isDir=false, canRead=true, canWrite=true, size=8192), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\seg0\\\\cc0.dat (isDir=false, canRead=true, canWrite=true, size=8192), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\seg0\\\\cd1.dat (isDir=false, canRead=true, canWrite=true, size=8192), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\seg0 (isDir=true, canRead=true, canWrite=true, size=0), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48 (isDir=true, canRead=true, canWrite=true, size=0)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.assertDirectoryDeleted(BaseJDBCTestCase.java:1526)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.removeDir(DropDatabaseSetup.java:119)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.access$000(DropDatabaseSetup.java:35)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup$1.run(DropDatabaseSetup.java:105)\u003cbr\\/\u003e\\n\\tat java.security.AccessController.doPrivileged(AccessController.java:202)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.removeDirectory(DropDatabaseSetup.java:102)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.removeDirectory(DropDatabaseSetup.java:98)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.removeDatabase(DropDatabaseSetup.java:91)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.TestConfiguration$4.tearDown(TestConfiguration.java:747)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:20)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13065354_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13065354_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/11 16:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-14T16:08:19+0000\'\u003e14\\/Jul\\/11 16:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    BTW, when I run the junite suite with patch number 5, I see only known intermittent failures as shown below. derbyall ran fine with no errors. \\n1) testBootLock(org.apache.derbyTesting.functionTests.tests.store.BootLockTest)java.lang.InterruptedException \\n\\tat org.apache.derbyTesting.functionTests.tests.store.BootLockTest.testBootLock(BootLockTest.java:158) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) \\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\n2) ManagementMBeanTest:clientjava.lang.InterruptedException \\n\\tat org.apache.derbyTesting.junit.SpawnedProcess.complete(SpawnedProcess.java:182) \\n\\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.tearDown(NetworkServerTestSetup.java:394) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:20) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:51) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\nThere were 3 failures: \\n1) testPingWithWrongHost(org.apache.derbyTesting.functionTests.tests.derbynet.NetworkServerControlClientCommandTest)junit.framework.AssertionFailedError: Could not find expectedString:Unable to find host in output:Wed Jul 13 19:37:36 PDT 2011 : Could not connect to Derby Network Server on host nothere, port 1527: Connection timed out: connect \\n\\n \\tat org.apache.derbyTesting.junit.BaseTestCase.assertExecJavaCmdAsExpected(BaseTestCase.java:516) \\n\\tat org.apache.derbyTesting.functionTests.tests.derbynet.NetworkServerControlClientCommandTest.assertFailedPing(NetworkServerControlClientCommandTest.java:147) \\n\\tat org.apache.derbyTesting.functionTests.tests.derbynet.NetworkServerControlClientCommandTest.testPingWithWrongHost(NetworkServerControlClientCommandTest.java:112) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) \\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n2) testInvalidLDAPServerConnectionError(org.apache.derbyTesting.functionTests.tests.jdbcapi.InvalidLDAPServerAuthenticationTest)junit.framework.AssertionFailedError \\n\\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.InvalidLDAPServerAuthenticationTest.testInvalidLDAPServerConnectionError(InvalidLDAPServerAuthenticationTest.java:122) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) \\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\n3) testInvalidLDAPServerConnectionErrorjunit.framework.AssertionFailedError: Failed to delete 8 files (root=C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48: C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\db.lck (isDir=false, canRead=true, canWrite=true, size=38), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\log\\\\log1.dat (isDir=false, canRead=true, canWrite=true, size=1048576), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\log (isDir=true, canRead=true, canWrite=true, size=0), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\seg0\\\\c10.dat (isDir=false, canRead=true, canWrite=true, size=8192), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\seg0\\\\cc0.dat (isDir=false, canRead=true, canWrite=true, size=8192), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\seg0\\\\cd1.dat (isDir=false, canRead=true, canWrite=true, size=8192), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48\\\\seg0 (isDir=true, canRead=true, canWrite=true, size=0), C:\\\\p4clients\\\\svnmain\\\\client7\\\\trunk\\\\systest\\\\dellater\\\\system\\\\singleUse\\\\oneuse48 (isDir=true, canRead=true, canWrite=true, size=0) \\n\\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.assertDirectoryDeleted(BaseJDBCTestCase.java:1526) \\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.removeDir(DropDatabaseSetup.java:119) \\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.access$000(DropDatabaseSetup.java:35) \\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup$1.run(DropDatabaseSetup.java:105) \\n\\tat java.security.AccessController.doPrivileged(AccessController.java:202) \\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.removeDirectory(DropDatabaseSetup.java:102) \\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.removeDirectory(DropDatabaseSetup.java:98) \\n\\tat org.apache.derbyTesting.junit.DropDatabaseSetup.removeDatabase(DropDatabaseSetup.java:91) \\n\\tat org.apache.derbyTesting.junit.TestConfiguration$4.tearDown(TestConfiguration.java:747) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:20) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:16)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13065596\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13065596&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13065596\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13065596_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13065596_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/11 22:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-14T22:59:33+0000\'\u003e14\\/Jul\\/11 22:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI haved committed changes for this jira as revision 1146915. The changes committed look like patch 5 except that I have changed the upgrade test to not rely on number of rows in sysdepends. Instead the upgrade test does the testing of this jira by issuing the UPDATE sql after a sql which should cause trigger invalidation and showing how UPDATE does not fail in pre-10.9 releases but it does fail correctly after soft\\/hard upgrade to 10.9\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13065596_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13065596_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/11 22:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-07-14T22:59:33+0000\'\u003e14\\/Jul\\/11 22:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I haved committed changes for this jira as revision 1146915. The changes committed look like patch 5 except that I have changed the upgrade test to not rely on number of rows in sysdepends. Instead the upgrade test does the testing of this jira by issuing the UPDATE sql after a sql which should cause trigger invalidation and showing how UPDATE does not fail in pre-10.9 releases but it does fail correctly after soft\\/hard upgrade to 10.9              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13685375\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-5120?focusedCommentId=13685375&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13685375\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13685375_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13685375_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/13 09:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-06-17T09:19:51+0000\'\u003e17\\/Jun\\/13 09:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;bulk update&#93;\u003c\\/span\u003e Close all resolved issues that haven\'t been updated for more than one year.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13685375_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13685375_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/13 09:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-06-17T09:19:51+0000\'\u003e17\\/Jun\\/13 09:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;bulk update&#93;  Close all resolved issues that haven\'t been updated for more than one year.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520240178710"> 
    <input type="hidden" title="jira.request.server.time" value="209"> 
    <input type="hidden" title="jira.request.id" value="536x94415961x4"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="5"> 
    <input type="hidden" title="db.reads.time.in.ms" value="37"> 
    <input type="hidden" title="db.conns.time.in.ms" value="43"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 536x94415961x4
	          REQUEST TIMESTAMP : [05/Mar/2018:08:56:18 +0000]
	               REQUEST TIME : 0.2090
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 5

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=23, elapsedTotal=37559836, elapsedMin=586735, elapsedMax=10466504, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=27, elapsedTotal=43413169, elapsedMin=633914, elapsedMax=10487087, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>