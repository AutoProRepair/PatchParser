<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|87e611170b8b70f70c575861ba04da7c7aae7434|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"ff83f8dd834fa9\"";
WRM._unparsedData["project-id"]="12310230";
WRM._unparsedData["project-key"]="\"SOLR\"";
WRM._unparsedData["project-name"]="\"Solr\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310230";
WRM._unparsedData["projectKey"]="\"SOLR\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="SOLR-6314"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[SOLR-6314] Facet counts duplicated in the response if specified more than once on the request. - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[SOLR-6314] Facet counts duplicated in the response if specified more than once on the request. - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/SOLR" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-6314">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310230" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Solr'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310230&amp;avatarId=22151"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/SOLR">Solr</a></li>
                 <li><a class="issue-link" data-issue-key="SOLR-6314" href="/jira/browse/SOLR-6314" id="key-val" rel="12731467">SOLR-6314</a></li>
                </ol>
                <h1 id="summary-val">Facet counts duplicated in the response if specified more than once on the request.</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-6314"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/SOLR-6314/SOLR-6314.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/SOLR-6314/SOLR-6314.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/SOLR-6314/SOLR-6314.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/SOLR-6314/SOLR-6314.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/minor.svg" title="Minor - Minor loss of function, or other problem where easy workaround is present." width="16"> Minor </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="6.0 First 6.x release, Major release after 5.5">6.0</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+4.10" title="4.10 Major release after 4.9">4.10</a>, <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+6.0" title="6.0 First 6.x release, Major release after 5.5">6.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+component+%3D+%22SearchComponents+-+other%22" title="SearchComponents - other Issues related to Search Components that aren't specifically called out elsewhere: TermsComponent, TermVector, etc.">SearchComponents - other</a>, <a href="/jira/issues/?jql=project+%3D+SOLR+AND+component+%3D+SolrCloud" title="SolrCloud ">SolrCloud</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12731467-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>I am trying to work with multi-threaded faceting on SolrCloud and in the process i was hit by some issues.</p> 
                  <p>I am currently running the below upstream test on different SolrCloud configurations and i am getting a different result set per configuration.<br> <a href="https://github.com/apache/lucene-solr/blob/trunk/solr/core/src/test/org/apache/solr/request/TestFaceting.java#L654" class="external-link" rel="nofollow">https://github.com/apache/lucene-solr/blob/trunk/solr/core/src/test/org/apache/solr/request/TestFaceting.java#L654</a></p> 
                  <p>Setup:</p> 
                  <ul class="alternate" type="square"> 
                   <li><b>Indexed 50 docs into SolrCloud.</b></li> 
                  </ul> 
                  <ul class="alternate" type="square"> 
                   <li><b>If the SolrCloud has only 1 shard, the facet field query has the below output (which matches with the expected upstream test output - # facet fields ~ 50).</b></li> 
                  </ul> 
                  <div class="code panel" style="border-width: 1px;">
                   <div class="codeContent panelContent"> 
                    <pre class="code-java">$ curl  <span class="code-quote">"http:<span class="code-comment">//localhost:8983/solr/collection1/select?facet=<span class="code-keyword">true</span>&amp;fl=id&amp;indent=<span class="code-keyword">true</span>&amp;q=id%3A*&amp;facet.limit=-1&amp;facet.threads=1000&amp;facet.field=f0_ws&amp;facet.field=f0_ws&amp;facet.field=f0_ws&amp;facet.field=f0_ws&amp;facet.field=f0_ws&amp;facet.field=f1_ws&amp;facet.field=f1_ws&amp;facet.field=f1_ws&amp;facet.field=f1_ws&amp;facet.field=f1_ws&amp;facet.field=f2_ws&amp;facet.field=f2_ws&amp;facet.field=f2_ws&amp;facet.field=f2_ws&amp;facet.field=f2_ws&amp;facet.field=f3_ws&amp;facet.field=f3_ws&amp;facet.field=f3_ws&amp;facet.field=f3_ws&amp;facet.field=f3_ws&amp;facet.field=f4_ws&amp;facet.field=f4_ws&amp;facet.field=f4_ws&amp;facet.field=f4_ws&amp;facet.field=f4_ws&amp;facet.field=f5_ws&amp;facet.field=f5_ws&amp;facet.field=f5_ws&amp;facet.field=f5_ws&amp;facet.field=f5_ws&amp;facet.field=f6_ws&amp;facet.field=f6_ws&amp;facet.field=f6_ws&amp;facet.field=f6_ws&amp;facet.field=f6_ws&amp;facet.field=f7_ws&amp;facet.field=f7_ws&amp;facet.field=f7_ws&amp;facet.field=f7_ws&amp;facet.field=f7_ws&amp;facet.field=f8_ws&amp;facet.field=f8_ws&amp;facet.field=f8_ws&amp;facet.field=f8_ws&amp;facet.field=f8_ws&amp;facet.field=f9_ws&amp;facet.field=f9_ws&amp;facet.field=f9_ws&amp;facet.field=f9_ws&amp;facet.field=f9_ws&amp;rows=1&amp;wt=xml"</span>
</span>
&lt;?xml version=<span class="code-quote">"1.0"</span> encoding=<span class="code-quote">"UTF-8"</span>?&gt;
&lt;response&gt;
&lt;lst name=<span class="code-quote">"responseHeader"</span>&gt;
  &lt;<span class="code-object">int</span> name=<span class="code-quote">"status"</span>&gt;0&lt;/<span class="code-object">int</span>&gt;
  &lt;<span class="code-object">int</span> name=<span class="code-quote">"QTime"</span>&gt;21&lt;/<span class="code-object">int</span>&gt;
  &lt;lst name=<span class="code-quote">"params"</span>&gt;
    &lt;str name=<span class="code-quote">"facet"</span>&gt;<span class="code-keyword">true</span>&lt;/str&gt;
    &lt;str name=<span class="code-quote">"fl"</span>&gt;id&lt;/str&gt;
    &lt;str name=<span class="code-quote">"indent"</span>&gt;<span class="code-keyword">true</span>&lt;/str&gt;
    &lt;str name=<span class="code-quote">"q"</span>&gt;id:*&lt;/str&gt;
    &lt;str name=<span class="code-quote">"facet.limit"</span>&gt;-1&lt;/str&gt;
    &lt;str name=<span class="code-quote">"facet.threads"</span>&gt;1000&lt;/str&gt;
    &lt;arr name=<span class="code-quote">"facet.field"</span>&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
    &lt;/arr&gt;
    &lt;str name=<span class="code-quote">"wt"</span>&gt;xml&lt;/str&gt;
    &lt;str name=<span class="code-quote">"rows"</span>&gt;1&lt;/str&gt;
  &lt;/lst&gt;
&lt;/lst&gt;
&lt;result name=<span class="code-quote">"response"</span> numFound=<span class="code-quote">"50"</span> start=<span class="code-quote">"0"</span>&gt;
  &lt;doc&gt;
    &lt;<span class="code-object">float</span> name=<span class="code-quote">"id"</span>&gt;0.0&lt;/<span class="code-object">float</span>&gt;&lt;/doc&gt;
&lt;/result&gt;
&lt;lst name=<span class="code-quote">"facet_counts"</span>&gt;
  &lt;lst name=<span class="code-quote">"facet_queries"</span>/&gt;
  &lt;lst name=<span class="code-quote">"facet_fields"</span>&gt;
    &lt;lst name=<span class="code-quote">"f0_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_1"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_2"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f0_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_1"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_2"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f0_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_1"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_2"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f0_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_1"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_2"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f0_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_1"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_2"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f1_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_1"</span>&gt;33&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_3"</span>&gt;17&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f1_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_1"</span>&gt;33&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_3"</span>&gt;17&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f1_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_1"</span>&gt;33&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_3"</span>&gt;17&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f1_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_1"</span>&gt;33&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_3"</span>&gt;17&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f1_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_1"</span>&gt;33&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_3"</span>&gt;17&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f2_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_1"</span>&gt;37&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_4"</span>&gt;13&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f2_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_1"</span>&gt;37&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_4"</span>&gt;13&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f2_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_1"</span>&gt;37&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_4"</span>&gt;13&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f2_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_1"</span>&gt;37&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_4"</span>&gt;13&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f2_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_1"</span>&gt;37&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_4"</span>&gt;13&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f3_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_1"</span>&gt;40&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_5"</span>&gt;10&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;

    &lt;lst name=<span class="code-quote">"f3_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_1"</span>&gt;40&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_5"</span>&gt;10&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f3_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_1"</span>&gt;40&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_5"</span>&gt;10&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f3_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_1"</span>&gt;40&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_5"</span>&gt;10&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f3_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_1"</span>&gt;40&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_5"</span>&gt;10&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f4_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_1"</span>&gt;41&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_6"</span>&gt;9&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f4_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_1"</span>&gt;41&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_6"</span>&gt;9&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f4_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_1"</span>&gt;41&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_6"</span>&gt;9&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f4_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_1"</span>&gt;41&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_6"</span>&gt;9&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f4_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_1"</span>&gt;41&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_6"</span>&gt;9&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f5_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_1"</span>&gt;42&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_7"</span>&gt;8&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f5_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_1"</span>&gt;42&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_7"</span>&gt;8&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f5_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_1"</span>&gt;42&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_7"</span>&gt;8&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f5_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_1"</span>&gt;42&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_7"</span>&gt;8&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f5_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_1"</span>&gt;42&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_7"</span>&gt;8&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f6_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_1"</span>&gt;43&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_8"</span>&gt;7&lt;/<span class="code-object">int</span>&gt;

    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f6_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_1"</span>&gt;43&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_8"</span>&gt;7&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f6_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_1"</span>&gt;43&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_8"</span>&gt;7&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f6_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_1"</span>&gt;43&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_8"</span>&gt;7&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f6_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_1"</span>&gt;43&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_8"</span>&gt;7&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f7_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_1"</span>&gt;44&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_9"</span>&gt;6&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f7_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_1"</span>&gt;44&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_9"</span>&gt;6&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f7_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_1"</span>&gt;44&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_9"</span>&gt;6&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f7_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_1"</span>&gt;44&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_9"</span>&gt;6&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f7_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_1"</span>&gt;44&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_9"</span>&gt;6&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f8_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_10"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f8_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_10"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f8_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_10"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f8_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_10"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f8_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_10"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f9_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_11"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f9_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_11"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;

    &lt;lst name=<span class="code-quote">"f9_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_11"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f9_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_11"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f9_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_11"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
  &lt;/lst&gt;
  &lt;lst name=<span class="code-quote">"facet_dates"</span>/&gt;
  &lt;lst name=<span class="code-quote">"facet_ranges"</span>/&gt;
&lt;/lst&gt;
&lt;/response&gt; 
</pre> 
                   </div>
                  </div> 
                  <ul class="alternate" type="square"> 
                   <li><b>Now, if a create a new collection with 2 shards (&gt;1 shard SolrCloud), the same above query results in a different output. (# facet fields ~ 10 ; Expected 50)</b></li> 
                  </ul> 
                  <div class="code panel" style="border-width: 1px;">
                   <div class="codeContent panelContent"> 
                    <pre class="code-java">$ curl  <span class="code-quote">"http:<span class="code-comment">//localhost:8983/solr/collection1/select?facet=<span class="code-keyword">true</span>&amp;fl=id&amp;indent=<span class="code-keyword">true</span>&amp;q=id%3A*&amp;facet.limit=-1&amp;facet.threads=1000&amp;facet.field=f0_ws&amp;facet.field=f0_ws&amp;facet.field=f0_ws&amp;facet.field=f0_ws&amp;facet.field=f0_ws&amp;facet.field=f1_ws&amp;facet.field=f1_ws&amp;facet.field=f1_ws&amp;facet.field=f1_ws&amp;facet.field=f1_ws&amp;facet.field=f2_ws&amp;facet.field=f2_ws&amp;facet.field=f2_ws&amp;facet.field=f2_ws&amp;facet.field=f2_ws&amp;facet.field=f3_ws&amp;facet.field=f3_ws&amp;facet.field=f3_ws&amp;facet.field=f3_ws&amp;facet.field=f3_ws&amp;facet.field=f4_ws&amp;facet.field=f4_ws&amp;facet.field=f4_ws&amp;facet.field=f4_ws&amp;facet.field=f4_ws&amp;facet.field=f5_ws&amp;facet.field=f5_ws&amp;facet.field=f5_ws&amp;facet.field=f5_ws&amp;facet.field=f5_ws&amp;facet.field=f6_ws&amp;facet.field=f6_ws&amp;facet.field=f6_ws&amp;facet.field=f6_ws&amp;facet.field=f6_ws&amp;facet.field=f7_ws&amp;facet.field=f7_ws&amp;facet.field=f7_ws&amp;facet.field=f7_ws&amp;facet.field=f7_ws&amp;facet.field=f8_ws&amp;facet.field=f8_ws&amp;facet.field=f8_ws&amp;facet.field=f8_ws&amp;facet.field=f8_ws&amp;facet.field=f9_ws&amp;facet.field=f9_ws&amp;facet.field=f9_ws&amp;facet.field=f9_ws&amp;facet.field=f9_ws&amp;rows=1&amp;wt=xml"</span>
</span> 
&lt;?xml version=<span class="code-quote">"1.0"</span> encoding=<span class="code-quote">"UTF-8"</span>?&gt;
&lt;response&gt;
&lt;lst name=<span class="code-quote">"responseHeader"</span>&gt;
  &lt;<span class="code-object">int</span> name=<span class="code-quote">"status"</span>&gt;0&lt;/<span class="code-object">int</span>&gt;
  &lt;<span class="code-object">int</span> name=<span class="code-quote">"QTime"</span>&gt;31&lt;/<span class="code-object">int</span>&gt;
  &lt;lst name=<span class="code-quote">"params"</span>&gt;
    &lt;str name=<span class="code-quote">"facet"</span>&gt;<span class="code-keyword">true</span>&lt;/str&gt;
    &lt;str name=<span class="code-quote">"fl"</span>&gt;id&lt;/str&gt;
    &lt;str name=<span class="code-quote">"indent"</span>&gt;<span class="code-keyword">true</span>&lt;/str&gt;
    &lt;str name=<span class="code-quote">"q"</span>&gt;id:*&lt;/str&gt;
    &lt;str name=<span class="code-quote">"facet.limit"</span>&gt;-1&lt;/str&gt;
    &lt;str name=<span class="code-quote">"facet.threads"</span>&gt;1000&lt;/str&gt;
    &lt;arr name=<span class="code-quote">"facet.field"</span>&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f0_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f1_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f2_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f3_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f4_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f5_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f6_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f7_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f8_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
      &lt;str&gt;f9_ws&lt;/str&gt;
    &lt;/arr&gt;
    &lt;str name=<span class="code-quote">"wt"</span>&gt;xml&lt;/str&gt;
    &lt;str name=<span class="code-quote">"rows"</span>&gt;1&lt;/str&gt;
  &lt;/lst&gt;
&lt;/lst&gt;
&lt;result name=<span class="code-quote">"response"</span> numFound=<span class="code-quote">"50"</span> start=<span class="code-quote">"0"</span> maxScore=<span class="code-quote">"1.0"</span>&gt;
  &lt;doc&gt;
    &lt;<span class="code-object">float</span> name=<span class="code-quote">"id"</span>&gt;2.0&lt;/<span class="code-object">float</span>&gt;&lt;/doc&gt;
&lt;/result&gt;
&lt;lst name=<span class="code-quote">"facet_counts"</span>&gt;
  &lt;lst name=<span class="code-quote">"facet_queries"</span>/&gt;
  &lt;lst name=<span class="code-quote">"facet_fields"</span>&gt;
    &lt;lst name=<span class="code-quote">"f0_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_1"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"zero_2"</span>&gt;25&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f1_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_1"</span>&gt;33&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"one_3"</span>&gt;17&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f2_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_1"</span>&gt;37&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"two_4"</span>&gt;13&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f3_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_1"</span>&gt;40&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"three_5"</span>&gt;10&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f4_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_1"</span>&gt;41&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"four_6"</span>&gt;9&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f5_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_1"</span>&gt;42&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"five_7"</span>&gt;8&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f6_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_1"</span>&gt;43&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"six_8"</span>&gt;7&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f7_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_1"</span>&gt;44&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"seven_9"</span>&gt;6&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f8_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"eight_10"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
    &lt;lst name=<span class="code-quote">"f9_ws"</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_1"</span>&gt;45&lt;/<span class="code-object">int</span>&gt;
      &lt;<span class="code-object">int</span> name=<span class="code-quote">"nine_11"</span>&gt;5&lt;/<span class="code-object">int</span>&gt;
    &lt;/lst&gt;
  &lt;/lst&gt;
  &lt;lst name=<span class="code-quote">"facet_dates"</span>/&gt;
  &lt;lst name=<span class="code-quote">"facet_ranges"</span>/&gt;
&lt;/lst&gt;
&lt;/response&gt;
</pre> 
                   </div>
                  </div> 
                  <p>This behavior is quite strange as it is being dependent on the number of shards in SolrCloud. It would be great if someone can shed some light on this?</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/SOLR-6314?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/SOLR-6314?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/SOLR-6314?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/SOLR-6314?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12662558" data-issue-id="12731467" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12662558/SOLR-6314.patch" draggable="true" data-downloadurl="text/plain:SOLR-6314.patch:https://issues.apache.org/jira/secure/attachment/12662558/SOLR-6314.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12662558/SOLR-6314.patch" title="Latest  18/Aug/14 20:11 - Erick Erickson" draggable="true" data-downloadurl="text/plain:SOLR-6314.patch:https://issues.apache.org/jira/secure/attachment/12662558/SOLR-6314.patch">SOLR-6314.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-08-18T20:11:19.319Z">18/Aug/14 20:11</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Erick Erickson
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12662000" data-issue-id="12731467" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12662000/SOLR-6314.patch" draggable="true" data-downloadurl="text/plain:SOLR-6314.patch:https://issues.apache.org/jira/secure/attachment/12662000/SOLR-6314.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12662000/SOLR-6314.patch" title=" 15/Aug/14 05:06 - Erick Erickson" draggable="true" data-downloadurl="text/plain:SOLR-6314.patch:https://issues.apache.org/jira/secure/attachment/12662000/SOLR-6314.patch">SOLR-6314.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-08-15T05:06:07.123Z">15/Aug/14 05:06</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Erick Erickson
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12660550" data-issue-id="12731467" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12660550/SOLR-6314.patch" draggable="true" data-downloadurl="text/plain:SOLR-6314.patch:https://issues.apache.org/jira/secure/attachment/12660550/SOLR-6314.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12660550/SOLR-6314.patch" title=" 08/Aug/14 04:42 - Erick Erickson" draggable="true" data-downloadurl="text/plain:SOLR-6314.patch:https://issues.apache.org/jira/secure/attachment/12660550/SOLR-6314.patch">SOLR-6314.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2014-08-08T04:42:55.580Z">08/Aug/14 04:42</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Erick Erickson
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12734654_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="SOLR-6386: make secondary ordering of facet.field values (and facet.pivot?) consistently deterministic"> <a href="/jira/browse/SOLR-6386" data-issue-key="SOLR-6386" class="issue-link link-title">SOLR-6386</a> <span class="link-summary">make secondary ordering of facet.field values (and facet.pivot?) consistently deterministic</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_erickerickson" rel="erickerickson" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Erick Erickson&quot;,&quot;emailAddress&quot;:&quot;erickerickson@gmail.com&quot;,&quot;username&quot;:&quot;erickerickson&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="erickerickson"></span></span> Erick Erickson </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_vamsee" rel="vamsee" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Vamsee Yarlagadda&quot;,&quot;emailAddress&quot;:&quot;vamsee@cloudera.com&quot;,&quot;username&quot;:&quot;vamsee&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="vamsee"></span></span> Vamsee Yarlagadda </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">9</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="02/Aug/14 00:13"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2014-08-02T00:13:27+0000">02/Aug/14 00:13</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="09/May/16 18:47"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2016-05-09T18:47:38+0000">09/May/16 18:47</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="18/Aug/14 21:02"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2014-08-18T21:02:25+0000">18/Aug/14 21:02</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-6314?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/SOLR-6314?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-14083620\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14083620&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14083620\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14083620_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14083620_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/14 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-02T16:35:04+0000\'\u003e02\\/Aug\\/14 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI know something about that code so I\'ll try to take a look.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m not entirely sure when I\'ll get to it though, I\'m slammed. So\u003cbr\\/\u003e\\nif someone wants to look at it instead, please feel free.\u003c\\/p\u003e\\n\\n\u003cp\u003eVamsee:\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat version of Solr are you seeing this on?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14083620_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14083620_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/14 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-02T16:35:04+0000\'\u003e02\\/Aug\\/14 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I know something about that code so I\'ll try to take a look. \\n\\n I\'m not entirely sure when I\'ll get to it though, I\'m slammed. So \\nif someone wants to look at it instead, please feel free. \\n\\n Vamsee: \\n\\n What version of Solr are you seeing this on?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14083726\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14083726&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14083726\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vamsee\\\" id=\\\"commentauthor_14083726_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vamsee\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vamsee\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vamsee Yarlagadda\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14083726_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/14 20:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-02T20:59:56+0000\'\u003e02\\/Aug\\/14 20:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks @Erick. I was able to replicate the issue on Solr trunk (5.0)\u003cbr\\/\u003e\\nLet me know if there is anything I can do to help in the process. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vamsee\\\" id=\\\"commentauthor_14083726_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vamsee\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vamsee\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vamsee Yarlagadda\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14083726_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/14 20:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-02T20:59:56+0000\'\u003e02\\/Aug\\/14 20:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks @Erick. I was able to replicate the issue on Solr trunk (5.0) \\nLet me know if there is anything I can do to help in the process.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14088820\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14088820&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14088820\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14088820_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14088820_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/14 04:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-07T04:29:28+0000\'\u003e07\\/Aug\\/14 04:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK, taking a closer look at this and I wonder what the right behavior is. The totals\u003cbr\\/\u003e\\nare correct, it\'s just that they repeated in one case and not in  another. \u003c\\/p\u003e\\n\\n\u003cp\u003eIt \u003cem\u003elooks\u003c\\/em\u003e like I can restate the problem like this:\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen a facet field is requested more than one time in non-sharded cluster, then the field\u003cbr\\/\u003e\\nis repeated in the result set. \u003c\\/p\u003e\\n\\n\u003cp\u003eWhen a facet field is requested more than once in a sharded cluster, then the field is only\u003cbr\\/\u003e\\nreturned once in the result set.\u003c\\/p\u003e\\n\\n\u003cp\u003eIOW, specifying the same facet.field twice: &amp;facet.field=f1&amp;facet.field=f1\u003cbr\\/\u003e\\nresults in two (identical) sections in the response in a non-sharded case\u003cbr\\/\u003e\\nand one in the sharded case.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll look at the code tomorrow to see where the difference happens, I suspect in the\u003cbr\\/\u003e\\naggregating code in the distributed case but that\'s just a guess.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo the question is what the right behavior really is. I can argue that specifying the\u003cbr\\/\u003e\\nexact same facet parameter (either query or field) more than once is a waste, and the\u003cbr\\/\u003e\\nfacet information should be cleaned up on the way in by removing duplicates. That would give\u003cbr\\/\u003e\\nthe same response in both cases and return just one entry per unique facet criteria. This is \u003cbr\\/\u003e\\narguably avoiding useless work (what\'s the value of specifying the same facet parameter\u003cbr\\/\u003e\\ntwice?) That would change current behavior in the single-shard case however.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf we tried to return multiple entries in the sharded case, it seems quite fragile to try to sum the\u003cbr\\/\u003e\\nfacet sub-counts separately. By that I mean say shard 1 returns\u003cbr\\/\u003e\\nf1:33\u003cbr\\/\u003e\\nf1:33\u003c\\/p\u003e\\n\\n\u003cp\u003eshard two returns\u003cbr\\/\u003e\\nf1:78\u003cbr\\/\u003e\\nf1:78 \u003c\\/p\u003e\\n\\n\u003cp\u003eYou\'d like the final result to be\u003cbr\\/\u003e\\nf1:111\u003cbr\\/\u003e\\nf1:111\u003c\\/p\u003e\\n\\n\u003cp\u003eOn the surface, some rule like \\\"add facets by\u003cbr\\/\u003e\\nposition when the key is identical and return multiple\u003cbr\\/\u003e\\ncounts\\\" seems like it would work, but it also seems\u003cbr\\/\u003e\\nrife for errors to creep in with arguably no added value. What happens,\u003cbr\\/\u003e\\nfor instance, if there are three values for \\\"f1\\\" from one shard\u003cbr\\/\u003e\\nand only two from another? I don\'t see how that would really happen,\u003cbr\\/\u003e\\nbut....\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, my question for you (and anyone who wants to chime in)\u003cbr\\/\u003e\\nis: \\\"Do you agree that pruning multiple identical facet criteria\u003cbr\\/\u003e\\nis a Good Thing?\\\". If not, what use case does returning multiple\u003cbr\\/\u003e\\nidentical facet counts support and is that use case worth the\u003cbr\\/\u003e\\neffort? My gut feeling is no.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for bringing this up it\'s certainly something\u003cbr\\/\u003e\\nthat\'s confusing. I suspect it\'s just something that hasn\'t been\u003cbr\\/\u003e\\nthought of in the past....\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14088820_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14088820_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/14 04:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-07T04:29:28+0000\'\u003e07\\/Aug\\/14 04:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK, taking a closer look at this and I wonder what the right behavior is. The totals \\nare correct, it\'s just that they repeated in one case and not in  another.  \\n\\n It  looks  like I can restate the problem like this: \\n\\n When a facet field is requested more than one time in non-sharded cluster, then the field \\nis repeated in the result set.  \\n\\n When a facet field is requested more than once in a sharded cluster, then the field is only \\nreturned once in the result set. \\n\\n IOW, specifying the same facet.field twice: &amp;facet.field=f1&amp;facet.field=f1 \\nresults in two (identical) sections in the response in a non-sharded case \\nand one in the sharded case. \\n\\n I\'ll look at the code tomorrow to see where the difference happens, I suspect in the \\naggregating code in the distributed case but that\'s just a guess. \\n\\n So the question is what the right behavior really is. I can argue that specifying the \\nexact same facet parameter (either query or field) more than once is a waste, and the \\nfacet information should be cleaned up on the way in by removing duplicates. That would give \\nthe same response in both cases and return just one entry per unique facet criteria. This is  \\narguably avoiding useless work (what\'s the value of specifying the same facet parameter \\ntwice?) That would change current behavior in the single-shard case however. \\n\\n If we tried to return multiple entries in the sharded case, it seems quite fragile to try to sum the \\nfacet sub-counts separately. By that I mean say shard 1 returns \\nf1:33 \\nf1:33 \\n\\n shard two returns \\nf1:78 \\nf1:78  \\n\\n You\'d like the final result to be \\nf1:111 \\nf1:111 \\n\\n On the surface, some rule like \\\"add facets by \\nposition when the key is identical and return multiple \\ncounts\\\" seems like it would work, but it also seems \\nrife for errors to creep in with arguably no added value. What happens, \\nfor instance, if there are three values for \\\"f1\\\" from one shard \\nand only two from another? I don\'t see how that would really happen, \\nbut.... \\n\\n So, my question for you (and anyone who wants to chime in) \\nis: \\\"Do you agree that pruning multiple identical facet criteria \\nis a Good Thing?\\\". If not, what use case does returning multiple \\nidentical facet counts support and is that use case worth the \\neffort? My gut feeling is no. \\n\\n Thanks for bringing this up it\'s certainly something \\nthat\'s confusing. I suspect it\'s just something that hasn\'t been \\nthought of in the past....              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14088833\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14088833&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14088833\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vamsee\\\" id=\\\"commentauthor_14088833_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vamsee\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vamsee\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vamsee Yarlagadda\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14088833_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/14 05:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-07T05:01:23+0000\'\u003e07\\/Aug\\/14 05:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\" class=\\\"user-hover\\\" rel=\\\"erickerickson\\\"\u003eErick Erickson\u003c\\/a\u003e for looking into this.\u003c\\/p\u003e\\n\\n\u003cp\u003eYes, you are right. It makes perfect sense to return a count for every unique facet request rather than repeating the facets over and over. It might be the case that the facet result that\'s returned in the case of multi-shard (by going through the aggregating code) is the right thing to do. Perhaps, we may want to fix the behavior for single shard system and make changes to the unit tests to reflect the same.\u003c\\/p\u003e\\n\\n\u003cp\u003eI can\'t think of any particular reason why the initial implementation of multithreaded faceting created a test that will check for duplicate facet counts. It might be a test bug too?\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/solr\\/core\\/src\\/test\\/org\\/apache\\/solr\\/request\\/TestFaceting.java#L654\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/solr\\/core\\/src\\/test\\/org\\/apache\\/solr\\/request\\/TestFaceting.java#L654\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThoughts?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vamsee\\\" id=\\\"commentauthor_14088833_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vamsee\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vamsee\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vamsee Yarlagadda\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14088833_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/14 05:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-07T05:01:23+0000\'\u003e07\\/Aug\\/14 05:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks  Erick Erickson  for looking into this. \\n\\n Yes, you are right. It makes perfect sense to return a count for every unique facet request rather than repeating the facets over and over. It might be the case that the facet result that\'s returned in the case of multi-shard (by going through the aggregating code) is the right thing to do. Perhaps, we may want to fix the behavior for single shard system and make changes to the unit tests to reflect the same. \\n\\n I can\'t think of any particular reason why the initial implementation of multithreaded faceting created a test that will check for duplicate facet counts. It might be a test bug too? \\n https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/solr\\/core\\/src\\/test\\/org\\/apache\\/solr\\/request\\/TestFaceting.java#L654  \\n\\n Thoughts?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14089341\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14089341&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14089341\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_14089341_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14089341_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/14 15:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-07T15:27:23+0000\'\u003e07\\/Aug\\/14 15:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 07\\/Aug\\/14 15:28\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI can\'t imagine any situations where having the f1 key in the results twice (with the same info) is useful, so I would argue that the non-distributed query should behave like the distributed query and only return it once.  If someone has a reasonable use case for the current behavior, then you can forget what I said and make distributed work like non-distributed ... but hopefully with an optimization in both instances so that it only calculates the results once.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne thing that a user might do is include two \u003cb\u003enearly\u003c\\/b\u003e identical keys like this, either for migration purposes, or to work around web developers who are completely clueless:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003efacet.field=f1&amp;facet.field={!key=foo}f1\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThis \u003cb\u003edoes\u003c\\/b\u003e work properly in Solr 4.9 with a distributed facet &#8211; the original and re-keyed facets are both returned, with identical info.  I don\'t know if it runs the facet twice or re-uses the info that is already calculated.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"elyograg\\\" id=\\\"commentauthor_14089341_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=elyograg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"elyograg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shawn Heisey\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14089341_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/14 15:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-07T15:27:23+0000\'\u003e07\\/Aug\\/14 15:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shawn Heisey - 07\\/Aug\\/14 15:28\\\"\u003eedited\u003c\\/span\u003e                   I can\'t imagine any situations where having the f1 key in the results twice (with the same info) is useful, so I would argue that the non-distributed query should behave like the distributed query and only return it once.  If someone has a reasonable use case for the current behavior, then you can forget what I said and make distributed work like non-distributed ... but hopefully with an optimization in both instances so that it only calculates the results once. \\n\\n One thing that a user might do is include two  nearly  identical keys like this, either for migration purposes, or to work around web developers who are completely clueless: \\n\\n  \\n facet.field=f1&amp;facet.field={!key=foo}f1\\n \\n  \\n\\n This  does  work properly in Solr 4.9 with a distributed facet &#8211; the original and re-keyed facets are both returned, with identical info.  I don\'t know if it runs the facet twice or re-uses the info that is already calculated.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14090297\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14090297&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14090297\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14090297_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14090297_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/14 04:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-08T04:42:55+0000\'\u003e08\\/Aug\\/14 04:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK, here\'s a patch. The only real code changes are in MultimapSolrParams. There\'s \u003cem\u003egot\u003c\\/em\u003e to be a more efficient way to check to see if there\'s a duplicate, but this is enough to see if this approach works.\u003c\\/p\u003e\\n\\n\u003cp\u003eAll tests pass, although you\'ll note a couple were written to expect multiple duplicate return fields that I had to change. IMO they were testing the wrong behavior.\u003c\\/p\u003e\\n\\n\u003cp\u003eNow, the thing that worries me here is that this code will be executed for all the requests coming in. Any code that counts on multiple identical parameters making it through is toast. Personally I don\'t see why that\'s a problem, but here\'s a chance to object.\u003c\\/p\u003e\\n\\n\u003cp\u003eI mean fq clauses go through here. As does most anything else in the world. It\'s still the case that different \u003cem\u003evalues\u003c\\/em\u003e get multiple entries, for instance specifying\u003cbr\\/\u003e\\n&amp;f.manu.facet.mincount=3&amp;f.manu.facet.mincount=2\u003cbr\\/\u003e\\nresults in two entries in the f.manu.facet.mincount array. That\'s correct behavior though.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnyway, I\'ll look for a more efficient way to test other than looping through the array, mostly this is a chance for people to see if this makes sense.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14090297_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14090297_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/14 04:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-08T04:42:55+0000\'\u003e08\\/Aug\\/14 04:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK, here\'s a patch. The only real code changes are in MultimapSolrParams. There\'s  got  to be a more efficient way to check to see if there\'s a duplicate, but this is enough to see if this approach works. \\n\\n All tests pass, although you\'ll note a couple were written to expect multiple duplicate return fields that I had to change. IMO they were testing the wrong behavior. \\n\\n Now, the thing that worries me here is that this code will be executed for all the requests coming in. Any code that counts on multiple identical parameters making it through is toast. Personally I don\'t see why that\'s a problem, but here\'s a chance to object. \\n\\n I mean fq clauses go through here. As does most anything else in the world. It\'s still the case that different  values  get multiple entries, for instance specifying \\n&amp;f.manu.facet.mincount=3&amp;f.manu.facet.mincount=2 \\nresults in two entries in the f.manu.facet.mincount array. That\'s correct behavior though. \\n\\n Anyway, I\'ll look for a more efficient way to test other than looping through the array, mostly this is a chance for people to see if this makes sense.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14090870\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14090870&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14090870\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14090870_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14090870_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/14 15:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-08T15:26:14+0000\'\u003e08\\/Aug\\/14 15:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eThe only real code changes are in MultimapSolrParams.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI\'m not sure it makes sense to \\\"dedup\\\" at that level.  That implies that repeated parameters never make sense in any context... and I don\'t think we can\\/should try to do that.  If you want to dedup facet parameters for some reason, then it should probably be done in the faceting code.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14090870_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14090870_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/14 15:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-08T15:26:14+0000\'\u003e08\\/Aug\\/14 15:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     The only real code changes are in MultimapSolrParams.  \\n\\n I\'m not sure it makes sense to \\\"dedup\\\" at that level.  That implies that repeated parameters never make sense in any context... and I don\'t think we can\\/should try to do that.  If you want to dedup facet parameters for some reason, then it should probably be done in the faceting code.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14090909\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14090909&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14090909\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14090909_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14090909_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/14 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-08T16:02:03+0000\'\u003e08\\/Aug\\/14 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ebq: If you want to dedup facet parameters for some reason, then it should probably be \u003cbr\\/\u003e\\ndone in the faceting code.\u003c\\/p\u003e\\n\\n\u003cp\u003eYeah, that\'s exactly what\'s making me uncomfortable about the patch, it\'s at such a low level and it\u003cbr\\/\u003e\\naffects \u003cem\u003eeverything\u003c\\/em\u003e. Unintended consequences and all that.\u003c\\/p\u003e\\n\\n\u003cp\u003eOTOH, what\'s the case for allowing dups? Do you have specific cases where that\'s\u003cbr\\/\u003e\\ngood or is your comment more of a statement that we shouldn\'t restrict future possibilities\u003cbr\\/\u003e\\njust because I\'m not sufficiently imaginative \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e ?\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m really having a tough time imagining scenarios where allowing dups is useful, and I can\u003cbr\\/\u003e\\ncome up with scenarios where allowing dups is harmful (imagine multiple, expensive, identical\u003cbr\\/\u003e\\nfq clause with cache=false for instance) that would be caught here. Hmmm, a WARN-level \u003cbr\\/\u003e\\nlog message is indicated for dups no matter what I think.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe counter-argument is that the user should be free to shoot themselves in the foot as\u003cbr\\/\u003e\\nthey want to.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe counter-counter argument is that when we identify potential traps we\u003cbr\\/\u003e\\nshould do something about them if we can.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat do you think about this alternative? (note, I\'m not proposing it as much as throwing it out\u003cbr\\/\u003e\\nfor discussion). Leave the dup-detection where it is and log a WARN level message when dups\u003cbr\\/\u003e\\nare detected, and move the actual de-duping out to the faceting code. Then de-dupe on a case-\u003cbr\\/\u003e\\nby-case basis as situations arise.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhere this started was that the exact same query over the exact same data set returns different\u003cbr\\/\u003e\\nresults in sharded and non-sharded situations. The results have the same information, just \u003cbr\\/\u003e\\nrepeated in the single shard case. Which means that somehow the sharded code manages to \u003cbr\\/\u003e\\nignore the extra entries. I\'ll look at how in a bit. At any rate, the \u003cbr\\/\u003e\\nsharded case manages to avoid returning the data multiple times so either there\'s code in there \u003cbr\\/\u003e\\nspecifically to deal with this or it\'s happening by chance, which is its own gotcha.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve seen some very large queries out in the wild and it\'s hard in many cases to see things\u003cbr\\/\u003e\\nlike this so logging a message would help the users figure out their (perhaps\u003cbr\\/\u003e\\nmachine-generated) code was doing things  they \u003cem\u003eprobably\u003c\\/em\u003e don\'t want.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo this is a long winded way of saying \\\"Hell, I don\'t know\\\". My \u003cem\u003eslight\u003c\\/em\u003e preference here\u003cbr\\/\u003e\\nwould be to dedupe as it\'s being done in this patch (and log warnings when doing so). It\u003cbr\\/\u003e\\njust feels \\\"more correct\\\" and may prevent weird behavior in the future. But I\'m not \u003cbr\\/\u003e\\nadamant about that, if the general consensus is that doing this on a case-by-case basis\u003cbr\\/\u003e\\nis a better idea I can make it so for the facet case.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14090909_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14090909_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/14 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-08T16:02:03+0000\'\u003e08\\/Aug\\/14 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    bq: If you want to dedup facet parameters for some reason, then it should probably be  \\ndone in the faceting code. \\n\\n Yeah, that\'s exactly what\'s making me uncomfortable about the patch, it\'s at such a low level and it \\naffects  everything . Unintended consequences and all that. \\n\\n OTOH, what\'s the case for allowing dups? Do you have specific cases where that\'s \\ngood or is your comment more of a statement that we shouldn\'t restrict future possibilities \\njust because I\'m not sufficiently imaginative   ? \\n\\n I\'m really having a tough time imagining scenarios where allowing dups is useful, and I can \\ncome up with scenarios where allowing dups is harmful (imagine multiple, expensive, identical \\nfq clause with cache=false for instance) that would be caught here. Hmmm, a WARN-level  \\nlog message is indicated for dups no matter what I think. \\n\\n The counter-argument is that the user should be free to shoot themselves in the foot as \\nthey want to. \\n\\n The counter-counter argument is that when we identify potential traps we \\nshould do something about them if we can. \\n\\n What do you think about this alternative? (note, I\'m not proposing it as much as throwing it out \\nfor discussion). Leave the dup-detection where it is and log a WARN level message when dups \\nare detected, and move the actual de-duping out to the faceting code. Then de-dupe on a case- \\nby-case basis as situations arise. \\n\\n Where this started was that the exact same query over the exact same data set returns different \\nresults in sharded and non-sharded situations. The results have the same information, just  \\nrepeated in the single shard case. Which means that somehow the sharded code manages to  \\nignore the extra entries. I\'ll look at how in a bit. At any rate, the  \\nsharded case manages to avoid returning the data multiple times so either there\'s code in there  \\nspecifically to deal with this or it\'s happening by chance, which is its own gotcha. \\n\\n I\'ve seen some very large queries out in the wild and it\'s hard in many cases to see things \\nlike this so logging a message would help the users figure out their (perhaps \\nmachine-generated) code was doing things  they  probably  don\'t want. \\n\\n So this is a long winded way of saying \\\"Hell, I don\'t know\\\". My  slight  preference here \\nwould be to dedupe as it\'s being done in this patch (and log warnings when doing so). It \\njust feels \\\"more correct\\\" and may prevent weird behavior in the future. But I\'m not  \\nadamant about that, if the general consensus is that doing this on a case-by-case basis \\nis a better idea I can make it so for the facet case.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14098119\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14098119&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14098119\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14098119_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14098119_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/14 04:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-15T04:18:26+0000\'\u003e15\\/Aug\\/14 04:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhile arguably the behavior I started looking at is benign-but-annoying (if inefficient), there is bona-fide badness here. If you specify facet.query=blah twice in distributed mode, the result is twice the count it should be.\u003c\\/p\u003e\\n\\n\u003cp\u003eTry this: URL on the test docs, simple 2-shard setup:\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/localhost:8983\\/solr\\/collection1\\/query?q=*:*&amp;facet=true&amp;facet.range.mincount=1&amp;facet.range=manufacturedate_dt&amp;facet.range.start=NOW-100YEARS&amp;facet.range.end=NOW&amp;facet.range.gap=%2B10YEAR\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/localhost:8983\\/solr\\/collection1\\/query?q=*:*&amp;facet=true&amp;facet.range.mincount=1&amp;facet.range=manufacturedate_dt&amp;facet.range.start=NOW-100YEARS&amp;facet.range.end=NOW&amp;facet.range.gap=%2B10YEAR\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThe only non-zero entry is\u003cbr\\/\u003e\\n\\\"2004-08-14T22:53:07.852Z\\\",\u003cbr\\/\u003e\\n11\u003c\\/p\u003e\\n\\n\u003cp\u003eNow duplicate the field by adding another copy of:\u003cbr\\/\u003e\\n&amp;facet.range=manufacturedate_dt\u003cbr\\/\u003e\\nthe count goes to 22\u003cbr\\/\u003e\\noops.\u003c\\/p\u003e\\n\\n\u003cp\u003eAdmittedly this is pilot error, but still it\'s incorrect.\u003c\\/p\u003e\\n\\n\u003cp\u003eI looked at de-duping in the facet component only, but that ran into weird null pointer exceptions. Given that I slightly favored deduping at a high level anyway, I\'m not willing to pursue that avenue unless there\'s a really good counter-argument.\u003c\\/p\u003e\\n\\n\u003cp\u003eLong version:\u003c\\/p\u003e\\n\\n\u003cp\u003eThe behavior is different because the distributed case is, of course, a separate code path. Part of that path is FacetComponent.parse (roughly line 1000 in trunk). That method collects the facet.field parameters into a LinkedHashMap, so multiple entries are weeded out. In the case where we specify the field twice, the params are still \u003cem\u003epassed to the shards and calculated twice\u003c\\/em\u003e. And returned twice. It just happens that the facets member var (which collected the names of the fields) only has one entry for the multiply-specified field since it\'s a HashMap. So it only asks for the facet counts from the response packet once for each shard. Since they\'re identical, it\'s OK.\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, take rangeFacets, roughly line 981 in FacetComponent is defined as a SimpleOrderedMap. Which checks to see if there is already an entry for the field in question... and if there is adds to it. \u003c\\/p\u003e\\n\\n\u003cp\u003eI think that this adds weight to the somewhat invasive change I first tried. I don\'t know how many of these are hanging around. Based on them being SimpleOrderedMaps, I\'m guessing at least date facets, pivot facets and interval facets at least have problems.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo rather than find them one-by-one I\'m inclined to do the deduping at a higher level.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is easy to demonstrate in the distributed tests, just hack TestDistributedSearch to duplicate one of the facet.range (or other facet types that use SimpleOrderedMaps) in the queries . Tests start failing.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll probably attach a new version of the patch tonight (running tests now). It\'s just like the old one except it adds duplicated fields to the distributed facets test (which will fail without the patch).\u003c\\/p\u003e\\n\\n\u003cp\u003eI spent some time trying to move the dedupe code to FacetComponent, but it\'s more tangled than I think is worth the effort. It\'s not difficult\u003cbr\\/\u003e\\nto dedupe the parameters, but they\'re passed through in a SolrParams object. So far so good. But somehow that generates a null pointer exception down the road. I \u003cem\u003ethink\u003c\\/em\u003e that the problem here is that there are some assumptions about how many entries should be there based on the original parameters in the request. Or something like that. Deduping on the highest level seems to avoid this altogether and I\'m very afraid it\'s an N+1 problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eLet me know if anyone disagrees violently. Otherwise I\'ll commit sometime this weekend assuming tests pass.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14098119_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14098119_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/14 04:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-15T04:18:26+0000\'\u003e15\\/Aug\\/14 04:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    While arguably the behavior I started looking at is benign-but-annoying (if inefficient), there is bona-fide badness here. If you specify facet.query=blah twice in distributed mode, the result is twice the count it should be. \\n\\n Try this: URL on the test docs, simple 2-shard setup: \\n http:\\/\\/localhost:8983\\/solr\\/collection1\\/query?q=*:*&amp;facet=true&amp;facet.range.mincount=1&amp;facet.range=manufacturedate_dt&amp;facet.range.start=NOW-100YEARS&amp;facet.range.end=NOW&amp;facet.range.gap=%2B10YEAR  \\n\\n The only non-zero entry is \\n\\\"2004-08-14T22:53:07.852Z\\\", \\n11 \\n\\n Now duplicate the field by adding another copy of: \\n&amp;facet.range=manufacturedate_dt \\nthe count goes to 22 \\noops. \\n\\n Admittedly this is pilot error, but still it\'s incorrect. \\n\\n I looked at de-duping in the facet component only, but that ran into weird null pointer exceptions. Given that I slightly favored deduping at a high level anyway, I\'m not willing to pursue that avenue unless there\'s a really good counter-argument. \\n\\n Long version: \\n\\n The behavior is different because the distributed case is, of course, a separate code path. Part of that path is FacetComponent.parse (roughly line 1000 in trunk). That method collects the facet.field parameters into a LinkedHashMap, so multiple entries are weeded out. In the case where we specify the field twice, the params are still  passed to the shards and calculated twice . And returned twice. It just happens that the facets member var (which collected the names of the fields) only has one entry for the multiply-specified field since it\'s a HashMap. So it only asks for the facet counts from the response packet once for each shard. Since they\'re identical, it\'s OK. \\n\\n However, take rangeFacets, roughly line 981 in FacetComponent is defined as a SimpleOrderedMap. Which checks to see if there is already an entry for the field in question... and if there is adds to it.  \\n\\n I think that this adds weight to the somewhat invasive change I first tried. I don\'t know how many of these are hanging around. Based on them being SimpleOrderedMaps, I\'m guessing at least date facets, pivot facets and interval facets at least have problems. \\n\\n So rather than find them one-by-one I\'m inclined to do the deduping at a higher level. \\n\\n This is easy to demonstrate in the distributed tests, just hack TestDistributedSearch to duplicate one of the facet.range (or other facet types that use SimpleOrderedMaps) in the queries . Tests start failing. \\n\\n I\'ll probably attach a new version of the patch tonight (running tests now). It\'s just like the old one except it adds duplicated fields to the distributed facets test (which will fail without the patch). \\n\\n I spent some time trying to move the dedupe code to FacetComponent, but it\'s more tangled than I think is worth the effort. It\'s not difficult \\nto dedupe the parameters, but they\'re passed through in a SolrParams object. So far so good. But somehow that generates a null pointer exception down the road. I  think  that the problem here is that there are some assumptions about how many entries should be there based on the original parameters in the request. Or something like that. Deduping on the highest level seems to avoid this altogether and I\'m very afraid it\'s an N+1 problem. \\n\\n Let me know if anyone disagrees violently. Otherwise I\'ll commit sometime this weekend assuming tests pass.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14098163\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14098163&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14098163\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14098163_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14098163_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/14 05:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-15T05:06:07+0000\'\u003e15\\/Aug\\/14 05:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLatest patch as promised.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14098163_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14098163_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/14 05:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-15T05:06:07+0000\'\u003e15\\/Aug\\/14 05:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Latest patch as promised.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14098760\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14098760&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14098760\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14098760_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14098760_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/14 17:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-15T17:01:25+0000\'\u003e15\\/Aug\\/14 17:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eOTOH, what\'s the case for allowing dups?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIt\'s a general parameter passing mechanism, so we\'re talking about all possible plugins\\/interfaces.\u003cbr\\/\u003e\\nBut here\'s one off the top of my head...  specifying field values with query parameters:\u003c\\/p\u003e\\n\\n\u003cp\u003e&amp;field.description=shoes\u003cbr\\/\u003e\\n&amp;field.color=red\u003cbr\\/\u003e\\n&amp;field.color=blue\u003cbr\\/\u003e\\n&amp;field.size=10.5\u003cbr\\/\u003e\\n&amp;field.size=10.5\u003c\\/p\u003e\\n\\n\u003cp\u003eIt still seems like there\'s no bug here.\u003cbr\\/\u003e\\nThe root cause of the incorrect facet count appears to be an incorrect facet request, right?\u003cbr\\/\u003e\\nIf that\'s the case, the simplest answer is \\\"well, that behavior is undefined\\\".\u003cbr\\/\u003e\\nOr if we want to help detect the user error sooner, simply throw an exception in the facet component?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14098760_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14098760_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/14 17:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-15T17:01:25+0000\'\u003e15\\/Aug\\/14 17:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     OTOH, what\'s the case for allowing dups?  \\n\\n It\'s a general parameter passing mechanism, so we\'re talking about all possible plugins\\/interfaces. \\nBut here\'s one off the top of my head...  specifying field values with query parameters: \\n\\n &amp;field.description=shoes \\n&amp;field.color=red \\n&amp;field.color=blue \\n&amp;field.size=10.5 \\n&amp;field.size=10.5 \\n\\n It still seems like there\'s no bug here. \\nThe root cause of the incorrect facet count appears to be an incorrect facet request, right? \\nIf that\'s the case, the simplest answer is \\\"well, that behavior is undefined\\\". \\nOr if we want to help detect the user error sooner, simply throw an exception in the facet component?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14099319\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14099319&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14099319\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14099319_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14099319_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/14 22:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-15T22:56:00+0000\'\u003e15\\/Aug\\/14 22:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAhhh, OK. If I\'m understanding the approach, then collapsing the identical params\u003cbr\\/\u003e\\nwould screw up anything that depended on relative positions (as one example). So\u003cbr\\/\u003e\\nsomething like this:\u003c\\/p\u003e\\n\\n\u003cp\u003e&amp;field.description=shoes\u003cbr\\/\u003e\\n&amp;field.color=red\u003cbr\\/\u003e\\n&amp;field.color=blue\u003cbr\\/\u003e\\n&amp;field.color=black\u003cbr\\/\u003e\\n&amp;field.size=10.5\u003cbr\\/\u003e\\n&amp;field.size=10.5\u003cbr\\/\u003e\\n&amp;field.size=11\u003c\\/p\u003e\\n\\n\u003cp\u003ewhere there\'s an positional association between the order of the\u003cbr\\/\u003e\\ncolors and the shoe size you\'re looking for. In this case it means\u003cbr\\/\u003e\\nred and blue shoes of size 10.5 \u003cbr\\/\u003e\\nblack shoes 11\u003c\\/p\u003e\\n\\n\u003cp\u003eand collapsing the two 10.5s would screw it up.\u003c\\/p\u003e\\n\\n\u003cp\u003eOk, that makes sense.\u003c\\/p\u003e\\n\\n\u003cp\u003eCertainly throwing an error in the component would be easily do-able.\u003c\\/p\u003e\\n\\n\u003cp\u003eLet me see if I can put something together that collapses the values in \u003cbr\\/\u003e\\nfacet component, an approach just occurred to me. If it works we\'ll have \u003cbr\\/\u003e\\ntwo choices. Then we can all weigh in on whether it\'s better to \u003c\\/p\u003e\\n\\n\u003cp\u003e1&gt; throw an error or (possibly breaking currently-running code BTW)\u003cbr\\/\u003e\\nor\u003cbr\\/\u003e\\n2&gt; remove the duplicates and log a warning.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14099319_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14099319_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/14 22:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-15T22:56:00+0000\'\u003e15\\/Aug\\/14 22:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ahhh, OK. If I\'m understanding the approach, then collapsing the identical params \\nwould screw up anything that depended on relative positions (as one example). So \\nsomething like this: \\n\\n &amp;field.description=shoes \\n&amp;field.color=red \\n&amp;field.color=blue \\n&amp;field.color=black \\n&amp;field.size=10.5 \\n&amp;field.size=10.5 \\n&amp;field.size=11 \\n\\n where there\'s an positional association between the order of the \\ncolors and the shoe size you\'re looking for. In this case it means \\nred and blue shoes of size 10.5  \\nblack shoes 11 \\n\\n and collapsing the two 10.5s would screw it up. \\n\\n Ok, that makes sense. \\n\\n Certainly throwing an error in the component would be easily do-able. \\n\\n Let me see if I can put something together that collapses the values in  \\nfacet component, an approach just occurred to me. If it works we\'ll have  \\ntwo choices. Then we can all weigh in on whether it\'s better to  \\n\\n 1&gt; throw an error or (possibly breaking currently-running code BTW) \\nor \\n2&gt; remove the duplicates and log a warning.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14101155\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14101155&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14101155\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14101155_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101155_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T19:45:19+0000\'\u003e18\\/Aug\\/14 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1618716 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=erickoerickson\\\" class=\\\"user-hover\\\" rel=\\\"erickoerickson\\\"\u003eErick Erickson\u003c\\/a\u003e in branch \'dev\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1618716\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1618716\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-6314\\\" title=\\\"Facet counts duplicated in the response if specified more than once on the request.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-6314\\\"\u003e\u003cdel\u003eSOLR-6314\u003c\\/del\u003e\u003c\\/a\u003e: Multi-threaded facet counts differ when SolrCloud has &gt;1 shard\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14101155_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101155_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T19:45:19+0000\'\u003e18\\/Aug\\/14 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1618716 from  Erick Erickson  in branch \'dev\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1618716  ] \\n\\n   SOLR-6314  : Multi-threaded facet counts differ when SolrCloud has &gt;1 shard              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14101199\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14101199&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14101199\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14101199_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101199_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 20:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T20:11:19+0000\'\u003e18\\/Aug\\/14 20:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFinal version of patch, it\'s my day to forget to put them up first.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14101199_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101199_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 20:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T20:11:19+0000\'\u003e18\\/Aug\\/14 20:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Final version of patch, it\'s my day to forget to put them up first.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14101287\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14101287&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14101287\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14101287_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101287_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 21:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T21:01:57+0000\'\u003e18\\/Aug\\/14 21:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1618734 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=erickoerickson\\\" class=\\\"user-hover\\\" rel=\\\"erickoerickson\\\"\u003eErick Erickson\u003c\\/a\u003e in branch \'dev\\/branches\\/branch_4x\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1618734\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1618734\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-6314\\\" title=\\\"Facet counts duplicated in the response if specified more than once on the request.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-6314\\\"\u003e\u003cdel\u003eSOLR-6314\u003c\\/del\u003e\u003c\\/a\u003e: Multi-threaded facet counts differ when SolrCloud has &gt;1 shard\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14101287_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101287_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 21:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T21:01:57+0000\'\u003e18\\/Aug\\/14 21:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1618734 from  Erick Erickson  in branch \'dev\\/branches\\/branch_4x\' \\n[  https:\\/\\/svn.apache.org\\/r1618734  ] \\n\\n   SOLR-6314  : Multi-threaded facet counts differ when SolrCloud has &gt;1 shard              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14101289\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14101289&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14101289\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14101289_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101289_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 21:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T21:02:25+0000\'\u003e18\\/Aug\\/14 21:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Vamsee!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14101289_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101289_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 21:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T21:02:25+0000\'\u003e18\\/Aug\\/14 21:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Vamsee!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14101292\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14101292&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14101292\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14101292_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101292_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T21:03:16+0000\'\u003e18\\/Aug\\/14 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBTW, the final solution was to NOT log any warnings in the general case and just remove the dups in the facet component that were facet-related.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14101292_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14101292_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/14 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-18T21:03:16+0000\'\u003e18\\/Aug\\/14 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    BTW, the final solution was to NOT log any warnings in the general case and just remove the dups in the facet component that were facet-related.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14103564\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14103564&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14103564\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vamsee\\\" id=\\\"commentauthor_14103564_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vamsee\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vamsee\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vamsee Yarlagadda\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14103564_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/14 07:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-20T07:36:10+0000\'\u003e20\\/Aug\\/14 07:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe patch looks good to me. \u003cbr\\/\u003e\\nThanks \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\" class=\\\"user-hover\\\" rel=\\\"erickerickson\\\"\u003eErick Erickson\u003c\\/a\u003e.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"vamsee\\\" id=\\\"commentauthor_14103564_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=vamsee\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"vamsee\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Vamsee Yarlagadda\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14103564_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/14 07:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-20T07:36:10+0000\'\u003e20\\/Aug\\/14 07:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The patch looks good to me.  \\nThanks  Erick Erickson .              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14105395\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14105395&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14105395\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14105395_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105395_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 14:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T14:10:41+0000\'\u003e21\\/Aug\\/14 14:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eMulti-threaded facet counts differ when SolrCloud has &gt;1 shard\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThis seems like the wrong title for the JIRA and especially the wrong title in CHANGES. Makes it sound like a severe bug rather than what I\'m reading above.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14105395_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105395_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 14:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T14:10:41+0000\'\u003e21\\/Aug\\/14 14:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Multi-threaded facet counts differ when SolrCloud has &gt;1 shard  \\n\\n This seems like the wrong title for the JIRA and especially the wrong title in CHANGES. Makes it sound like a severe bug rather than what I\'m reading above.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14105397\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14105397&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14105397\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14105397_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105397_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T14:13:47+0000\'\u003e21\\/Aug\\/14 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-6314\\\" title=\\\"Facet counts duplicated in the response if specified more than once on the request.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-6314\\\"\u003e\u003cdel\u003eSOLR-6314\u003c\\/del\u003e\u003c\\/a\u003e: Multi-threaded facet counts differ when SolrCloud has &gt;1 shard (Erick Erickson)\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAlso missing credit for Vamsee in CHANGES.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_14105397_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105397_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T14:13:47+0000\'\u003e21\\/Aug\\/14 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                       SOLR-6314  : Multi-threaded facet counts differ when SolrCloud has &gt;1 shard (Erick Erickson)  \\n\\n Also missing credit for Vamsee in CHANGES.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14105524\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14105524&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14105524\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14105524_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105524_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 16:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T16:15:02+0000\'\u003e21\\/Aug\\/14 16:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYep, you\'re right. The counts were correct, it was just repeated unnecessarily in the response under some conditions.\u003c\\/p\u003e\\n\\n\u003cp\u003eFixing up both.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14105524_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105524_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 16:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T16:15:02+0000\'\u003e21\\/Aug\\/14 16:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yep, you\'re right. The counts were correct, it was just repeated unnecessarily in the response under some conditions. \\n\\n Fixing up both.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14105526\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14105526&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14105526\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14105526_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105526_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 16:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T16:16:59+0000\'\u003e21\\/Aug\\/14 16:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1619470 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=erickoerickson\\\" class=\\\"user-hover\\\" rel=\\\"erickoerickson\\\"\u003eErick Erickson\u003c\\/a\u003e in branch \'dev\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1619470\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1619470\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-6314\\\" title=\\\"Facet counts duplicated in the response if specified more than once on the request.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-6314\\\"\u003e\u003cdel\u003eSOLR-6314\u003c\\/del\u003e\u003c\\/a\u003e: updated bug title to be more accurate and include Vamsee in credits, all in CHNAGES.txt. No code changes\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14105526_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105526_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 16:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T16:16:59+0000\'\u003e21\\/Aug\\/14 16:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1619470 from  Erick Erickson  in branch \'dev\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1619470  ] \\n\\n   SOLR-6314  : updated bug title to be more accurate and include Vamsee in credits, all in CHNAGES.txt. No code changes              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14105528\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14105528&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14105528\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14105528_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105528_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 16:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T16:17:51+0000\'\u003e21\\/Aug\\/14 16:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1619471 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=erickoerickson\\\" class=\\\"user-hover\\\" rel=\\\"erickoerickson\\\"\u003eErick Erickson\u003c\\/a\u003e in branch \'dev\\/branches\\/branch_4x\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1619471\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1619471\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-6314\\\" title=\\\"Facet counts duplicated in the response if specified more than once on the request.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-6314\\\"\u003e\u003cdel\u003eSOLR-6314\u003c\\/del\u003e\u003c\\/a\u003e: updated bug title to be more accurate and include Vamsee in credits, all in CHNAGES.txt. No code changes\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14105528_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105528_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 16:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T16:17:51+0000\'\u003e21\\/Aug\\/14 16:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1619471 from  Erick Erickson  in branch \'dev\\/branches\\/branch_4x\' \\n[  https:\\/\\/svn.apache.org\\/r1619471  ] \\n\\n   SOLR-6314  : updated bug title to be more accurate and include Vamsee in credits, all in CHNAGES.txt. No code changes              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14105542\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-6314?focusedCommentId=14105542&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14105542\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14105542_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105542_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 16:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T16:30:30+0000\'\u003e21\\/Aug\\/14 16:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1619478 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=rjernst\\\" class=\\\"user-hover\\\" rel=\\\"rjernst\\\"\u003eRyan Ernst\u003c\\/a\u003e in branch \'dev\\/branches\\/lucene_solr_4_10\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1619478\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1619478\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-6314\\\" title=\\\"Facet counts duplicated in the response if specified more than once on the request.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-6314\\\"\u003e\u003cdel\u003eSOLR-6314\u003c\\/del\u003e\u003c\\/a\u003e: updated bug title to be more accurate and include Vamsee in credits, all in CHNAGES.txt. No code changes\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_14105542_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14105542_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/14 16:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-08-21T16:30:30+0000\'\u003e21\\/Aug\\/14 16:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1619478 from  Ryan Ernst  in branch \'dev\\/branches\\/lucene_solr_4_10\' \\n[  https:\\/\\/svn.apache.org\\/r1619478  ] \\n\\n   SOLR-6314  : updated bug title to be more accurate and include Vamsee in credits, all in CHNAGES.txt. No code changes              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310230";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310230&amp;avatarId=22151\\\" alt=\\\"Solr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\"\u003eSolr\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520340841787"> 
    <input type="hidden" title="jira.request.server.time" value="235"> 
    <input type="hidden" title="jira.request.id" value="774x97459062x1"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="2"> 
    <input type="hidden" title="db.reads.time.in.ms" value="30"> 
    <input type="hidden" title="db.conns.time.in.ms" value="36"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 774x97459062x1
	          REQUEST TIMESTAMP : [06/Mar/2018:12:54:01 +0000]
	               REQUEST TIME : 0.2350
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 2

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=19, elapsedTotal=30024104, elapsedMin=624099, elapsedMax=14799739, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=23, elapsedTotal=36225867, elapsedMin=650030, elapsedMax=14825067, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>