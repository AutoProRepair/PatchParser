<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|6a735f384c3fe36e2506a87aca54cb00b686bbe4|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"70f7719ae3142e\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-3310"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-3310] ASSERT in MergeSort.checkColumnTypes() disallow legal type conversions - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-3310] ASSERT in MergeSort.checkColumnTypes() disallow legal type conversions - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3310">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-3310" href="/jira/browse/DERBY-3310" id="key-val" rel="12385890">DERBY-3310</a></li>
                </ol>
                <h1 id="summary-val">ASSERT in MergeSort.checkColumnTypes() disallow legal type conversions</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3310"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-3310/DERBY-3310.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-3310/DERBY-3310.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-3310/DERBY-3310.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-3310/DERBY-3310.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/minor.svg" title="Minor - Minor loss of function, or other problem where easy workaround is present." width="16"> Minor </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.4.1.3 ">10.4.1.3</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.1.3" title="10.4.1.3 ">10.4.1.3</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.1.1" title="10.5.1.1 build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09">10.5.1.1</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12385890-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>Patch Available</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Regression</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>The following code </p> 
                  <p>CREATE TABLE U (SNAME VARCHAR(32000), TNAME VARCHAR(32000), C1 BIGINT);<br> – This triggers an ASSERT (because 2 is INTEGER and not BIGINT)<br> INSERT INTO U(SNAME, TNAME, C1) SELECT DISTINCT SCHEMANAME, TABLENAME, 2<br> FROM SYS.SYSTABLES T JOIN SYS.SYSSCHEMAS S ON T.SCHEMAID = S.SCHEMAID;</p> 
                  <p>gives</p> 
                  <p>ERROR XJ001: Java exception: 'ASSERT FAILED col1.getClass() (class org.apache.derby.iapi.types.SQLInteger) expected to be the same as col2.getClass() (class org.apache.derby.iapi.types.SQLLongint): org.apache.derby.shared.common.sanity.AssertFailure'.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-3310?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-3310?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-3310?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-3310?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12372808" data-issue-id="12385890" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12372808/cast-repro.sql" draggable="true" data-downloadurl="text/x-sql:cast-repro.sql:https://issues.apache.org/jira/secure/attachment/12372808/cast-repro.sql"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12372808/cast-repro.sql" title="Latest  09/Jan/08 16:06 - Dyre Tjeldvoll" draggable="true" data-downloadurl="text/x-sql:cast-repro.sql:https://issues.apache.org/jira/secure/attachment/12372808/cast-repro.sql">cast-repro.sql</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-09T16:06:27.328Z">09/Jan/08 16:06</time>
                   </dd>
                   <dd class="attachment-size">
                    0.6 kB
                   </dd>
                   <dd class="attachment-author">
                    Dyre Tjeldvoll
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12377633" data-issue-id="12385890" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12377633/d3310_writeup_1.html" draggable="true" data-downloadurl="text/html:d3310_writeup_1.html:https://issues.apache.org/jira/secure/attachment/12377633/d3310_writeup_1.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12377633/d3310_writeup_1.html" title="Latest  11/Mar/08 19:07 - A B" draggable="true" data-downloadurl="text/html:d3310_writeup_1.html:https://issues.apache.org/jira/secure/attachment/12377633/d3310_writeup_1.html">d3310_writeup_1.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-11T19:07:46.796Z">11/Mar/08 19:07</time>
                   </dd>
                   <dd class="attachment-size">
                    99 kB
                   </dd>
                   <dd class="attachment-author">
                    A B
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12377721" data-issue-id="12385890" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12377721/derby-3310_diff.txt" draggable="true" data-downloadurl="text/plain:derby-3310_diff.txt:https://issues.apache.org/jira/secure/attachment/12377721/derby-3310_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12377721/derby-3310_diff.txt" title="Latest  12/Mar/08 19:04 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-3310_diff.txt:https://issues.apache.org/jira/secure/attachment/12377721/derby-3310_diff.txt">derby-3310_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-12T19:04:31.400Z">12/Mar/08 19:04</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12377720" data-issue-id="12385890" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12377720/derby-3310_diff.txt" draggable="true" data-downloadurl="text/plain:derby-3310_diff.txt:https://issues.apache.org/jira/secure/attachment/12377720/derby-3310_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12377720/derby-3310_diff.txt" title=" 12/Mar/08 18:59 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-3310_diff.txt:https://issues.apache.org/jira/secure/attachment/12377720/derby-3310_diff.txt">derby-3310_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-12T18:59:11.747Z">12/Mar/08 18:59</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12376772" data-issue-id="12385890" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12376772/derby-3310_remove_genNormalizeResultSetNode_diff.txt" draggable="true" data-downloadurl="text/plain:derby-3310_remove_genNormalizeResultSetNode_diff.txt:https://issues.apache.org/jira/secure/attachment/12376772/derby-3310_remove_genNormalizeResultSetNode_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12376772/derby-3310_remove_genNormalizeResultSetNode_diff.txt" title="Latest  28/Feb/08 22:13 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-3310_remove_genNormalizeResultSetNode_diff.txt:https://issues.apache.org/jira/secure/attachment/12376772/derby-3310_remove_genNormalizeResultSetNode_diff.txt">derby-3310_remove_genNormalizeResultSetNode_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-28T22:13:08.132Z">28/Feb/08 22:13</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12376285" data-issue-id="12385890" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12376285/derby3310_rsn_cleanup_1.txt" draggable="true" data-downloadurl="text/plain:derby3310_rsn_cleanup_1.txt:https://issues.apache.org/jira/secure/attachment/12376285/derby3310_rsn_cleanup_1.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12376285/derby3310_rsn_cleanup_1.txt" title="Latest  23/Feb/08 00:11 - Daniel John Debrunner" draggable="true" data-downloadurl="text/plain:derby3310_rsn_cleanup_1.txt:https://issues.apache.org/jira/secure/attachment/12376285/derby3310_rsn_cleanup_1.txt">derby3310_rsn_cleanup_1.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-23T00:11:02.364Z">23/Feb/08 00:11</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Daniel John Debrunner
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12376257" data-issue-id="12385890" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12376257/derby-3310_try1_diff.txt" draggable="true" data-downloadurl="text/plain:derby-3310_try1_diff.txt:https://issues.apache.org/jira/secure/attachment/12376257/derby-3310_try1_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12376257/derby-3310_try1_diff.txt" title="Latest  22/Feb/08 19:22 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-3310_try1_diff.txt:https://issues.apache.org/jira/secure/attachment/12376257/derby-3310_try1_diff.txt">derby-3310_try1_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-22T19:22:15.964Z">22/Feb/08 19:22</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12383008_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3221: &quot;java.sql.SQLException: The conglomerate (-5) requested does not exist.&quot; from Derby 10.3.1.4 embedded within Eclipse 3.3 and RAD 7.0"> <a href="/jira/browse/DERBY-3221" data-issue-key="DERBY-3221" class="issue-link link-title resolution">DERBY-3221</a> <span class="link-summary">"java.sql.SQLException: The conglomerate (-5) requested does not exist." from Derby 10.3.1.4 embedded within Eclipse 3.3 and RAD 7.0</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12388009_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3395: 'An ON clause associated with a JOIN operator is not valid.' failure with 10.3.2.1 passes with 10.2"> <a href="/jira/browse/DERBY-3395" data-issue-key="DERBY-3395" class="issue-link link-title resolution">DERBY-3395</a> <span class="link-summary">'An ON clause associated with a JOIN operator is not valid.' failure with 10.3.2.1 passes with 10.2</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12371145_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-2775: DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes."> <a href="/jira/browse/DERBY-2775" data-issue-key="DERBY-2775" class="issue-link link-title">DERBY-2775</a> <span class="link-summary">DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12390220_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-3494: Move the setup of NormalizeResultSetNode into the NormalizeResultSetNode"> <a href="/jira/browse/DERBY-3494" data-issue-key="DERBY-3494" class="issue-link link-title resolution">DERBY-3494</a> <span class="link-summary">Move the setup of NormalizeResultSetNode into the NormalizeResultSetNode</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_kmarsden" rel="kmarsden" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Kathey Marsden&quot;,&quot;emailAddress&quot;:&quot;kmarsdenderby@sbcglobal.net&quot;,&quot;username&quot;:&quot;kmarsden&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="kmarsden"></span></span> Kathey Marsden </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_dyret" rel="dyret" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Dyre Tjeldvoll&quot;,&quot;emailAddress&quot;:&quot;Dyre.Tjeldvoll@oracle.com&quot;,&quot;username&quot;:&quot;dyret&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="dyret"></span></span> Dyre Tjeldvoll </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">1</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="09/Jan/08 16:05"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-01-09T16:05:07+0000">09/Jan/08 16:05</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="21/Jan/11 17:51"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2011-01-21T17:51:16+0000">21/Jan/11 17:51</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="20/Mar/08 04:52"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-03-20T04:52:53+0000">20/Mar/08 04:52</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3310?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-3310?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12557301\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12557301&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12557301\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12557301_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557301_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jan\\/08 16:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-09T16:06:27+0000\'\u003e09\\/Jan\\/08 16:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a repro in the form of an ij-script\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12557301_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557301_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jan\\/08 16:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-09T16:06:27+0000\'\u003e09\\/Jan\\/08 16:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a repro in the form of an ij-script              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12557571\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12557571&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12557571\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12557571_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557571_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/08 09:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-10T09:05:49+0000\'\u003e10\\/Jan\\/08 09:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis issue was first seen while trying to reproduce \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3221\\\" title=\\\"&quot;java.sql.SQLException: The conglomerate (-5) requested does not exist.&quot; from Derby 10.3.1.4 embedded within Eclipse 3.3 and RAD 7.0\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3221\\\"\u003e\u003cdel\u003eDERBY-3221\u003c\\/del\u003e\u003c\\/a\u003e in sane mode.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12557571_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557571_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/08 09:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-10T09:05:49+0000\'\u003e10\\/Jan\\/08 09:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This issue was first seen while trying to reproduce   DERBY-3221   in sane mode.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12557632\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12557632&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12557632\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12557632_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557632_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/08 12:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-10T12:52:32+0000\'\u003e10\\/Jan\\/08 12:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMarking this as a regression since it worked fine in rev 540921, and possibly later.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12557632_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557632_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/08 12:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-10T12:52:32+0000\'\u003e10\\/Jan\\/08 12:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Marking this as a regression since it worked fine in rev 540921, and possibly later.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12557946\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12557946&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12557946\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12557946_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557946_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jan\\/08 09:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-11T09:34:00+0000\'\u003e11\\/Jan\\/08 09:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSeems like this was introduced by \u003cbr\\/\u003e\\n------------------------------------------------------------------------\u003cbr\\/\u003e\\nr554012 | djd | 2007-07-06 21:40:07 +0200 (Fri, 06 Jul 2007) | 4 lines\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2775\\\" title=\\\"DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2775\\\"\u003eDERBY-2775\u003c\\/a\u003e (partial) Clarify some type handling for ResultColumn and its expression by making\u003cbr\\/\u003e\\ncallers explictly get the expression\'s type from the expression, rather than having\u003cbr\\/\u003e\\na method in ResultColumn that doesn\'t do what it indicates it did.\u003cbr\\/\u003e\\nMake VirtualColumnNode\'s type just refect its source node.\u003cbr\\/\u003e\\n------------------------------------------------------------------------\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12557946_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12557946_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jan\\/08 09:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-11T09:34:00+0000\'\u003e11\\/Jan\\/08 09:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Seems like this was introduced by  \\n------------------------------------------------------------------------ \\nr554012 | djd | 2007-07-06 21:40:07 +0200 (Fri, 06 Jul 2007) | 4 lines \\n\\n  DERBY-2775  (partial) Clarify some type handling for ResultColumn and its expression by making \\ncallers explictly get the expression\'s type from the expression, rather than having \\na method in ResultColumn that doesn\'t do what it indicates it did. \\nMake VirtualColumnNode\'s type just refect its source node. \\n------------------------------------------------------------------------ \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12566679\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12566679&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12566679\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12566679_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566679_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 16:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T16:40:14+0000\'\u003e07\\/Feb\\/08 16:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI wonder if the assertion in MergeSort should just be removed or is there a better assertion that could be used to make sure the types are assignable?\u003cbr\\/\u003e\\nFrom MergeSort ...\u003cbr\\/\u003e\\n                if (col1.getClass() != col2.getClass())\u003c\\/p\u003e\\n                {\\n                    SanityManager.THROWASSERT(\\n                        \\\"col1.getClass() (\\\" + col1.getClass() +\\n                        \\\") expected to be the same as col2.getClass() (\\\" +\\n                        col2.getClass() + \\\")\\\");\\n                }\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12566679_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566679_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 16:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T16:40:14+0000\'\u003e07\\/Feb\\/08 16:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I wonder if the assertion in MergeSort should just be removed or is there a better assertion that could be used to make sure the types are assignable? \\nFrom MergeSort ... \\n                if (col1.getClass() != col2.getClass()) \\n                {\\n                    SanityManager.THROWASSERT(\\n                        \\\"col1.getClass() (\\\" + col1.getClass() +\\n                        \\\") expected to be the same as col2.getClass() (\\\" +\\n                        col2.getClass() + \\\")\\\");\\n                }\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12566686\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12566686&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12566686\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12566686_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566686_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 16:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T16:53:49+0000\'\u003e07\\/Feb\\/08 16:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBefore changing the assert it would be good to understand why the types are different. I thought that if the types were different then a cast node is required to make the types the same when assigning one value to another.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12566686_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566686_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 16:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T16:53:49+0000\'\u003e07\\/Feb\\/08 16:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Before changing the assert it would be good to understand why the types are different. I thought that if the types were different then a cast node is required to make the types the same when assigning one value to another.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12566832\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12566832&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12566832\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12566832_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566832_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 22:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T22:51:45+0000\'\u003e07\\/Feb\\/08 22:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI looked a little at the change that introduced the assertion, and narrowed it to this change in VirtualColumnNode.java, specifically the override of the setType method to set  the type of the source column.\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/VirtualColumnNode.java?p2=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;p1=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;r1=554012&amp;r2=554011&amp;view=diff&amp;pathrev=554012\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/VirtualColumnNode.java?p2=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;p1=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;r1=554012&amp;r2=554011&amp;view=diff&amp;pathrev=554012\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eBefore this change the types when passing through the assertion code were both SQLInteger, now one is SQLInteger and the other is SQLLongInt.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not clear yet whether both should be SQLInteger or SQLLongInt at this point.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12566832_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566832_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 22:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T22:51:45+0000\'\u003e07\\/Feb\\/08 22:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I looked a little at the change that introduced the assertion, and narrowed it to this change in VirtualColumnNode.java, specifically the override of the setType method to set  the type of the source column. \\n http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/VirtualColumnNode.java?p2=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;p1=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;r1=554012&amp;r2=554011&amp;view=diff&amp;pathrev=554012  \\n\\n Before this change the types when passing through the assertion code were both SQLInteger, now one is SQLInteger and the other is SQLLongInt. \\n\\n I am not clear yet whether both should be SQLInteger or SQLLongInt at this point.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12567206\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12567206&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12567206\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12567206_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12567206_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Feb\\/08 21:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-08T21:11:42+0000\'\u003e08\\/Feb\\/08 21:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSo things seem to work ok without the assert because SQLLongint.setValue()\u003cbr\\/\u003e\\ncalls getLong() on the value it is being set from so we get a compatible value.\u003c\\/p\u003e\\n\\n\u003cp\u003eprotected void setFrom(DataValueDescriptor theValue) throws StandardException \u003c\\/p\u003e\\n{\\n\\n\\t\\tsetValue(theValue.getLong());\\n\\t}\\n\\n\u003cp\u003eHere is the trace where it is called.\u003c\\/p\u003e\\n\\n\u003cp\u003eThread \u003cspan class=\\\"error\\\"\u003e&#91;main&#93;\u003c\\/span\u003e (Suspended (breakpoint at line 94 in SQLInteger))\\t\u003cbr\\/\u003e\\n\\tSQLInteger.getLong() line: 94\\t\u003cbr\\/\u003e\\n\\tSQLLongint.setFrom(DataValueDescriptor) line: 440\\t\u003cbr\\/\u003e\\n\\tSQLLongint(DataType).setValue(DataValueDescriptor) line: 490\\t\u003cbr\\/\u003e\\n\\tSQLLongint(DataType).normalize(DataTypeDescriptor, DataValueDescriptor) line: 662\\t\u003cbr\\/\u003e\\n\\tDataTypeDescriptor.normalize(DataValueDescriptor, DataValueDescriptor) line: 469\\t\u003cbr\\/\u003e\\n\\tNormalizeResultSet.normalizeRow(ExecRow) line: 330\\t\u003cbr\\/\u003e\\n\\tNormalizeResultSet.getNextRowCore() line: 189\\t\u003cbr\\/\u003e\\n\\tInsertResultSet(DMLWriteResultSet).getNextRowCore(NoPutResultSet) line: 127\\t\u003cbr\\/\u003e\\n\\tInsertResultSet.open() line: 496\\t\u003cbr\\/\u003e\\n\\tGenericPreparedStatement.execute(Activation, boolean, long) line: 370\\t\u003cbr\\/\u003e\\n\\tEmbedStatement40(EmbedStatement).executeStatement(Activation, boolean, boolean) line: 1203\\t\u003cbr\\/\u003e\\n\\tEmbedStatement40(EmbedStatement).execute(String, boolean, boolean, int, int[], String[]) line: 596\\t\u003cbr\\/\u003e\\n\\tEmbedStatement40(EmbedStatement).execute(String) line: 528\\t\u003cbr\\/\u003e\\n\\tij.executeImmediate(String) line: 330\\t\u003cbr\\/\u003e\\n\\tutilMain14(utilMain).doCatch(String) line: 522\\t\u003cbr\\/\u003e\\n\\tutilMain14(utilMain).runScriptGuts() line: 364\\t\u003cbr\\/\u003e\\n\\tutilMain14(utilMain).go(LocalizedInput[], LocalizedOutput, Properties) line: 262\\t\u003cbr\\/\u003e\\n\\tMain14(Main).go(LocalizedInput, LocalizedOutput, Properties) line: 215\\t\u003cbr\\/\u003e\\n\\tMain.mainCore(String[], Main) line: 181\\t\u003cbr\\/\u003e\\n\\tMain14.main(String[]) line: 56\\t\u003cbr\\/\u003e\\n\\tij.main(String[]) line: 71\\t\u003c\\/p\u003e\\n\\n\u003cp\u003eIs a cast still needed?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12567206_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12567206_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Feb\\/08 21:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-08T21:11:42+0000\'\u003e08\\/Feb\\/08 21:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    So things seem to work ok without the assert because SQLLongint.setValue() \\ncalls getLong() on the value it is being set from so we get a compatible value. \\n\\n protected void setFrom(DataValueDescriptor theValue) throws StandardException  \\n{\\n\\n\\t\\tsetValue(theValue.getLong());\\n\\t}\\n\\n Here is the trace where it is called. \\n\\n Thread  &#91;main&#93;  (Suspended (breakpoint at line 94 in SQLInteger))\\t \\n\\tSQLInteger.getLong() line: 94\\t \\n\\tSQLLongint.setFrom(DataValueDescriptor) line: 440\\t \\n\\tSQLLongint(DataType).setValue(DataValueDescriptor) line: 490\\t \\n\\tSQLLongint(DataType).normalize(DataTypeDescriptor, DataValueDescriptor) line: 662\\t \\n\\tDataTypeDescriptor.normalize(DataValueDescriptor, DataValueDescriptor) line: 469\\t \\n\\tNormalizeResultSet.normalizeRow(ExecRow) line: 330\\t \\n\\tNormalizeResultSet.getNextRowCore() line: 189\\t \\n\\tInsertResultSet(DMLWriteResultSet).getNextRowCore(NoPutResultSet) line: 127\\t \\n\\tInsertResultSet.open() line: 496\\t \\n\\tGenericPreparedStatement.execute(Activation, boolean, long) line: 370\\t \\n\\tEmbedStatement40(EmbedStatement).executeStatement(Activation, boolean, boolean) line: 1203\\t \\n\\tEmbedStatement40(EmbedStatement).execute(String, boolean, boolean, int, int[], String[]) line: 596\\t \\n\\tEmbedStatement40(EmbedStatement).execute(String) line: 528\\t \\n\\tij.executeImmediate(String) line: 330\\t \\n\\tutilMain14(utilMain).doCatch(String) line: 522\\t \\n\\tutilMain14(utilMain).runScriptGuts() line: 364\\t \\n\\tutilMain14(utilMain).go(LocalizedInput[], LocalizedOutput, Properties) line: 262\\t \\n\\tMain14(Main).go(LocalizedInput, LocalizedOutput, Properties) line: 215\\t \\n\\tMain.mainCore(String[], Main) line: 181\\t \\n\\tMain14.main(String[]) line: 56\\t \\n\\tij.main(String[]) line: 71\\t \\n\\n Is a cast still needed?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12567247\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12567247&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12567247\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12567247_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12567247_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Feb\\/08 23:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-08T23:56:13+0000\'\u003e08\\/Feb\\/08 23:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Daniel John Debrunner - 08\\/Feb\\/08 23:56\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIn this \u003cb\u003especific\u003c\\/b\u003e case a cast is not needed, but I\'m thinking more about the general case, so if it had been a case where conversion was needed\u003cbr\\/\u003e\\nwould the behaviour be correct?\u003c\\/p\u003e\\n\\n\u003cp\u003eSo:\u003cbr\\/\u003e\\n   is the assert wrong because the normalize node is doing the correct thing (e.g it knows INT -&gt; IBIGNT is a safe conversion, no cast node needed),\u003cbr\\/\u003e\\n   or is the assert correct and the normalize node is not putting in conversion code\u003cbr\\/\u003e\\n   or is the normalize node and assert not related (my guess)\u003c\\/p\u003e\\n\\n\u003cp\u003eWe are trying to insert a value of type A  into a column of type B, but there is the additional distinct step.\u003cbr\\/\u003e\\nso the query is doing something like:\u003c\\/p\u003e\\n\\n\u003cp\u003esort of (rows with value of type A)  ==&gt; insert into table with column of type B\u003c\\/p\u003e\\n\\n\u003cp\u003eThe assert is saying that at some point some types must match during a merge sort, which seems reasonable, but this would\u003cbr\\/\u003e\\nbe in the step before the normalize (which is the insert step). So why are the types different there?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12567247_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12567247_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Feb\\/08 23:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-08T23:56:13+0000\'\u003e08\\/Feb\\/08 23:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Daniel John Debrunner - 08\\/Feb\\/08 23:56\\\"\u003eedited\u003c\\/span\u003e                   In this  specific  case a cast is not needed, but I\'m thinking more about the general case, so if it had been a case where conversion was needed \\nwould the behaviour be correct? \\n\\n So: \\n   is the assert wrong because the normalize node is doing the correct thing (e.g it knows INT -&gt; IBIGNT is a safe conversion, no cast node needed), \\n   or is the assert correct and the normalize node is not putting in conversion code \\n   or is the normalize node and assert not related (my guess) \\n\\n We are trying to insert a value of type A  into a column of type B, but there is the additional distinct step. \\nso the query is doing something like: \\n\\n sort of (rows with value of type A)  ==&gt; insert into table with column of type B \\n\\n The assert is saying that at some point some types must match during a merge sort, which seems reasonable, but this would \\nbe in the step before the normalize (which is the insert step). So why are the types different there?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12567761\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12567761&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12567761\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12567761_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12567761_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/08 19:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-11T19:12:29+0000\'\u003e11\\/Feb\\/08 19:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSo for our specific case we have\u003cbr\\/\u003e\\nsort of (rows with value of type INTEGER) ==&gt; insert into table with column of type BIGINT\u003c\\/p\u003e\\n\\n\u003cp\u003eSo it makes sense to me that at the sort  phase, both the row and the \\\"template\\\" should be INTEGER as was the case prior to the change for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2775\\\" title=\\\"DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2775\\\"\u003eDERBY-2775\u003c\\/a\u003e. Now the template column type is BIGINT and the row column type is INTEGER.  \u003cbr\\/\u003e\\nCould you explain what the template is in this context and whether you think it should be INTEGER or BIGINT at this point in the processing?\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12567761_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12567761_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/08 19:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-11T19:12:29+0000\'\u003e11\\/Feb\\/08 19:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    So for our specific case we have \\nsort of (rows with value of type INTEGER) ==&gt; insert into table with column of type BIGINT \\n\\n So it makes sense to me that at the sort  phase, both the row and the \\\"template\\\" should be INTEGER as was the case prior to the change for  DERBY-2775 . Now the template column type is BIGINT and the row column type is INTEGER.   \\nCould you explain what the template is in this context and whether you think it should be INTEGER or BIGINT at this point in the processing? \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12567799\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12567799&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12567799\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12567799_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12567799_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/08 20:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-11T20:16:54+0000\'\u003e11\\/Feb\\/08 20:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhat do you mean by template, which field in which class?\u003c\\/p\u003e\\n\\n\u003cp\u003eA template row for the store is a row that contains the correct DataValueDescriptor objects for the desired type of the row,\u003cbr\\/\u003e\\nso what it should be depends on context.\u003c\\/p\u003e\\n\\n\u003cp\u003eE.g. \u003cb\u003eif\u003c\\/b\u003e this is true:\u003c\\/p\u003e\\n\\n\u003cp\u003esort of (rows with value of type INTEGER) ==&gt; insert into table with column of type BIGINT \u003c\\/p\u003e\\n\\n\u003cp\u003ethen the template for the sort would have a SQLInteger,  a template for the table corresponding to the insert would have an SQLLongint.\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, I don\'t know enough about the details of language to know if the sort and insert are treated as logically separate items or if they\u003cbr\\/\u003e\\nare merged in some way.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12567799_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12567799_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Feb\\/08 20:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-11T20:16:54+0000\'\u003e11\\/Feb\\/08 20:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    What do you mean by template, which field in which class? \\n\\n A template row for the store is a row that contains the correct DataValueDescriptor objects for the desired type of the row, \\nso what it should be depends on context. \\n\\n E.g.  if  this is true: \\n\\n sort of (rows with value of type INTEGER) ==&gt; insert into table with column of type BIGINT  \\n\\n then the template for the sort would have a SQLInteger,  a template for the table corresponding to the insert would have an SQLLongint. \\n\\n However, I don\'t know enough about the details of language to know if the sort and insert are treated as logically separate items or if they \\nare merged in some way.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12568250\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12568250&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12568250\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12568250_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568250_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Feb\\/08 17:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-12T17:45:31+0000\'\u003e12\\/Feb\\/08 17:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI was referring to the template field in the MergeSort class.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf  \\\"the template for the sort would have a SQLInteger,\\\" then I take it our pre \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2775\\\" title=\\\"DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2775\\\"\u003eDERBY-2775\u003c\\/a\u003e behavior was \u003cbr\\/\u003e\\ncorrect that the template was a SQLInteger and not a SQLLongInt.\u003c\\/p\u003e\\n\\n\u003cp\u003eIs the change for VirtualColumnNode getting its type from its source node flawed in some way?\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/VirtualColumnNode.java?p2=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;p1=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;r1=554012&amp;r2=554011&amp;view=diff&amp;pathrev=554012\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/VirtualColumnNode.java?p2=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;p1=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;r1=554012&amp;r2=554011&amp;view=diff&amp;pathrev=554012\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12568250_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568250_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Feb\\/08 17:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-12T17:45:31+0000\'\u003e12\\/Feb\\/08 17:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I was referring to the template field in the MergeSort class. \\n\\n If  \\\"the template for the sort would have a SQLInteger,\\\" then I take it our pre  DERBY-2775  behavior was  \\ncorrect that the template was a SQLInteger and not a SQLLongInt. \\n\\n Is the change for VirtualColumnNode getting its type from its source node flawed in some way? \\n http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/VirtualColumnNode.java?p2=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;p1=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;r1=554012&amp;r2=554011&amp;view=diff&amp;pathrev=554012               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12568659\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12568659&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12568659\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12568659_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568659_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Feb\\/08 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-13T18:35:20+0000\'\u003e13\\/Feb\\/08 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think the assert code is correctly testing for what it assumes to be true - ie. that class types of the sort template will exactly match subsequent rows fed to the sort.  It may work without the assert in this case but I am not sure that will always be true.\u003cbr\\/\u003e\\nBasically the sort interface requires a \\\"template\\\" of what rows will look like when fed into the sort.  So column\u003cspan class=\\\"error\\\"\u003e&#91;N&#93;\u003c\\/span\u003e of each row fed into the sort should be the exact same type as template\u003cspan class=\\\"error\\\"\u003e&#91;N&#93;\u003c\\/span\u003e.  \u003c\\/p\u003e\\n\\n\u003cp\u003eOne could build a sorter that compared different types in the same column but I didn\'t think Derby currently required that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12568659_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568659_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Feb\\/08 18:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-13T18:35:20+0000\'\u003e13\\/Feb\\/08 18:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think the assert code is correctly testing for what it assumes to be true - ie. that class types of the sort template will exactly match subsequent rows fed to the sort.  It may work without the assert in this case but I am not sure that will always be true. \\nBasically the sort interface requires a \\\"template\\\" of what rows will look like when fed into the sort.  So column &#91;N&#93;  of each row fed into the sort should be the exact same type as template &#91;N&#93; .   \\n\\n One could build a sorter that compared different types in the same column but I didn\'t think Derby currently required that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12568679\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12568679&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12568679\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12568679_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568679_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Feb\\/08 19:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-13T19:08:28+0000\'\u003e13\\/Feb\\/08 19:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think then we get back to my question of  whether both template and row data should be SQLInteger or both should be SQLLongint at the time of the sort.\u003c\\/p\u003e\\n\\n\u003cp\u003eBTW this is the trace from the point where we now change the type of the sourceColumn from INTEGER NOT NULL to BIGINT.\u003cbr\\/\u003e\\nI think I need to better understand the VirtualColumnNode change and why it was made.  \u003cbr\\/\u003e\\nThread \u003cspan class=\\\"error\\\"\u003e&#91;main&#93;\u003c\\/span\u003e (Suspended (breakpoint at line 284 in VirtualColumnNode))\\t\u003cbr\\/\u003e\\n\\tVirtualColumnNode.setType(DataTypeDescriptor) line: 284\\t\u003cbr\\/\u003e\\n\\tResultColumnList.copyTypesAndLengthsToSource(ResultColumnList) line: 1645\\t\u003cbr\\/\u003e\\n\\tInsertNode.bindStatement() line: 426\\t\u003cbr\\/\u003e\\n\\tGenericStatement.prepMinion(LanguageConnectionContext, boolean, Object[], SchemaDescriptor, boolean) line: 314\\t\u003cbr\\/\u003e\\n\\tGenericStatement.prepare(LanguageConnectionContext, boolean) line: 88\\t\u003cbr\\/\u003e\\n\\tGenericLanguageConnectionContext.prepareInternalStatement(SchemaDescriptor, String, boolean, boolean) line: 768\\t\u003cbr\\/\u003e\\n\\tEmbedStatement40(EmbedStatement).execute(String, boolean, boolean, int, int[], String[]) line: 607\\t\u003cbr\\/\u003e\\n\\tEmbedStatement40(EmbedStatement).execute(String) line: 556\\t\u003cbr\\/\u003e\\n\\tij.executeImmediate(String) line: 330\\t\u003cbr\\/\u003e\\n\\tutilMain.doCatch(String) line: 508\\t\u003cbr\\/\u003e\\n\\tutilMain.runScriptGuts() line: 350\\t\u003cbr\\/\u003e\\n\\tutilMain.go(LocalizedInput[], LocalizedOutput, Properties) line: 248\\t\u003cbr\\/\u003e\\n\\tMain.go(LocalizedInput, LocalizedOutput, Properties) line: 215\\t\u003cbr\\/\u003e\\n\\tMain.mainCore(String[], Main) line: 181\\t\u003cbr\\/\u003e\\n\\tMain.main(String[]) line: 73\\t\u003cbr\\/\u003e\\n\\tij.main(String[]) line: 59\\t\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12568679_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568679_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Feb\\/08 19:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-13T19:08:28+0000\'\u003e13\\/Feb\\/08 19:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think then we get back to my question of  whether both template and row data should be SQLInteger or both should be SQLLongint at the time of the sort. \\n\\n BTW this is the trace from the point where we now change the type of the sourceColumn from INTEGER NOT NULL to BIGINT. \\nI think I need to better understand the VirtualColumnNode change and why it was made.   \\nThread  &#91;main&#93;  (Suspended (breakpoint at line 284 in VirtualColumnNode))\\t \\n\\tVirtualColumnNode.setType(DataTypeDescriptor) line: 284\\t \\n\\tResultColumnList.copyTypesAndLengthsToSource(ResultColumnList) line: 1645\\t \\n\\tInsertNode.bindStatement() line: 426\\t \\n\\tGenericStatement.prepMinion(LanguageConnectionContext, boolean, Object[], SchemaDescriptor, boolean) line: 314\\t \\n\\tGenericStatement.prepare(LanguageConnectionContext, boolean) line: 88\\t \\n\\tGenericLanguageConnectionContext.prepareInternalStatement(SchemaDescriptor, String, boolean, boolean) line: 768\\t \\n\\tEmbedStatement40(EmbedStatement).execute(String, boolean, boolean, int, int[], String[]) line: 607\\t \\n\\tEmbedStatement40(EmbedStatement).execute(String) line: 556\\t \\n\\tij.executeImmediate(String) line: 330\\t \\n\\tutilMain.doCatch(String) line: 508\\t \\n\\tutilMain.runScriptGuts() line: 350\\t \\n\\tutilMain.go(LocalizedInput[], LocalizedOutput, Properties) line: 248\\t \\n\\tMain.go(LocalizedInput, LocalizedOutput, Properties) line: 215\\t \\n\\tMain.mainCore(String[], Main) line: 181\\t \\n\\tMain.main(String[]) line: 73\\t \\n\\tij.main(String[]) line: 59\\t              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570696\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12570696&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570696\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12570696_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570696_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T14:13:56+0000\'\u003e20\\/Feb\\/08 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI was hoping to pick up this issue, but must admit I am quite stuck.  I am really not sure at the time of the sort whether both template and row data should be SQLInteger or SQLLongInt.  If someone could explain which and why, I might better understand my destination and be able to make some progress on the issue.  Before the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2775\\\" title=\\\"DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2775\\\"\u003eDERBY-2775\u003c\\/a\u003e both were SQLInteger but I don\'t know that that was correct.  It may have been wrong for both values.  Any help or hints would be greatly appreciated.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks\u003cbr\\/\u003e\\nKathey\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12570696_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570696_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T14:13:56+0000\'\u003e20\\/Feb\\/08 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I was hoping to pick up this issue, but must admit I am quite stuck.  I am really not sure at the time of the sort whether both template and row data should be SQLInteger or SQLLongInt.  If someone could explain which and why, I might better understand my destination and be able to make some progress on the issue.  Before the  DERBY-2775  both were SQLInteger but I don\'t know that that was correct.  It may have been wrong for both values.  Any help or hints would be greatly appreciated. \\n\\n Thanks \\nKathey \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570713\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12570713&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570713\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12570713_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570713_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 15:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T15:15:08+0000\'\u003e20\\/Feb\\/08 15:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Kathey,\u003c\\/p\u003e\\n\\n\u003cp\u003eBeware, you\'re getting a WAG here. \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e But my opinion is that\u003cbr\\/\u003e\\nSQLInteger is the correct datatype, and SQLLongInt is incorrect.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m guessing that the overall query tree looks something like:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eInsertNode\u003c\\/li\u003e\\n\\t\u003cli\u003eNormalizeResultSetNode\u003c\\/li\u003e\\n\\t\u003cli\u003eSelectNode \\/ ProjectRestrictNode\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eIt seems to me that the data being sorted is the SELECT data,\u003cbr\\/\u003e\\nand that data uses the constant 2, and so that data should have\u003cbr\\/\u003e\\nbeen sorted as simple integers.\u003c\\/p\u003e\\n\\n\u003cp\u003eThen, the NormalizeResultSetNode should have generated\u003cbr\\/\u003e\\na CAST operation to convert the integer to a biginit when the\u003cbr\\/\u003e\\ndata is retrieved from the sorter.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd, the VirtualColumnNodes used by the InsertNode should\u003cbr\\/\u003e\\nhave pointed to the values returned by the NormalizeResultSetNode,\u003cbr\\/\u003e\\nso it seems correct that the VCN instance that the InsertNode\u003cbr\\/\u003e\\nreferences should be working with a SQLLongInt.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo I\'d suggest investigating the NormalizeResultSetNode, and\u003cbr\\/\u003e\\nwhether it is generating the proper buffering CAST operations.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12570713_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570713_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 15:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T15:15:08+0000\'\u003e20\\/Feb\\/08 15:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Kathey, \\n\\n Beware, you\'re getting a WAG here.   But my opinion is that \\nSQLInteger is the correct datatype, and SQLLongInt is incorrect. \\n\\n I\'m guessing that the overall query tree looks something like: \\n \\n\\t InsertNode \\n\\t NormalizeResultSetNode \\n\\t SelectNode \\/ ProjectRestrictNode \\n \\n\\n\\n It seems to me that the data being sorted is the SELECT data, \\nand that data uses the constant 2, and so that data should have \\nbeen sorted as simple integers. \\n\\n Then, the NormalizeResultSetNode should have generated \\na CAST operation to convert the integer to a biginit when the \\ndata is retrieved from the sorter. \\n\\n And, the VirtualColumnNodes used by the InsertNode should \\nhave pointed to the values returned by the NormalizeResultSetNode, \\nso it seems correct that the VCN instance that the InsertNode \\nreferences should be working with a SQLLongInt. \\n\\n So I\'d suggest investigating the NormalizeResultSetNode, and \\nwhether it is generating the proper buffering CAST operations.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570748\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12570748&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570748\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12570748_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570748_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 16:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T16:57:55+0000\'\u003e20\\/Feb\\/08 16:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eVirtualColumnNode has this comment\u003cbr\\/\u003e\\n\\t\\/* A VirtualColumnNode contains a pointer to the immediate child result\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003ethat is materializing the virtual column and the ResultColumn\u003c\\/li\u003e\\n\\t\u003cli\u003ethat represents that materialization.\u003cbr\\/\u003e\\n\\t *\\/\u003cbr\\/\u003e\\n\\tprivate ResultSetNode\\tsourceResultSet;\u003cbr\\/\u003e\\n\\tprivate ResultColumn\\tsourceColumn;\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003eThe \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2775\\\" title=\\\"DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2775\\\"\u003eDERBY-2775\u003c\\/a\u003e change overrode the setType from  ValueNode:\u003cbr\\/\u003e\\npublic void setType(DataTypeDescriptor dataTypeServices) throws StandardException\u003c\\/p\u003e\\n\\t{\\n\\t\\tthis.dataTypeServices = dataTypeServices;\\n\\t}\\n\\n\u003cp\u003ewith\u003c\\/p\u003e\\n\\n\u003cp\u003e  public void setType(DataTypeDescriptor dtd) throws StandardException\u003c\\/p\u003e\\n    {\\n        sourceColumn.setType(dtd);\\n    }\\n\\n\u003cp\u003eDoesn\'t this end up incorrectly end up affecting the child result, changing it from \u003cbr\\/\u003e\\nSQLInteger to SQLLongInt?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12570748_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570748_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 16:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T16:57:55+0000\'\u003e20\\/Feb\\/08 16:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    VirtualColumnNode has this comment \\n\\t\\/* A VirtualColumnNode contains a pointer to the immediate child result \\n \\n\\t that is materializing the virtual column and the ResultColumn \\n\\t that represents that materialization. \\n\\t *\\/ \\n\\tprivate ResultSetNode\\tsourceResultSet; \\n\\tprivate ResultColumn\\tsourceColumn; \\n \\n\\n\\n\\n The  DERBY-2775  change overrode the setType from  ValueNode: \\npublic void setType(DataTypeDescriptor dataTypeServices) throws StandardException \\n\\t{\\n\\t\\tthis.dataTypeServices = dataTypeServices;\\n\\t}\\n\\n with \\n\\n   public void setType(DataTypeDescriptor dtd) throws StandardException \\n    {\\n        sourceColumn.setType(dtd);\\n    }\\n\\n Doesn\'t this end up incorrectly end up affecting the child result, changing it from  \\nSQLInteger to SQLLongInt? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570761\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12570761&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570761\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12570761_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570761_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 17:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T17:17:12+0000\'\u003e20\\/Feb\\/08 17:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIf the \\\"immediate child result\\\" of the InsertNode is a Normalize node,\u003cbr\\/\u003e\\nthen I think the VCN instances for the columns in the InsertNode\u003cbr\\/\u003e\\nshould have sourceResultSet pointing to a NormalizeResultSet,\u003cbr\\/\u003e\\nand sourceColumn pointing to a column in the NRS\'s ResultColumnList.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn that case, it seems correct for that sourceColumn to be of type longint,\u003cbr\\/\u003e\\nbecause it represents the \u003cb\u003eresult\u003c\\/b\u003e of the normalization.\u003c\\/p\u003e\\n\\n\u003cp\u003eThat is:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ethe PRN should sort values with integer type, and feed them up to the NRSN\u003c\\/li\u003e\\n\\t\u003cli\u003ethe NRS should invoke normalizeRow() to convert the int to a long\u003c\\/li\u003e\\n\\t\u003cli\u003ethe InsertNode should pull long values from the NRS and insert them\u003cbr\\/\u003e\\n   into the target table.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eHowever, it looks like maybe this was the intent of the design, but\u003cbr\\/\u003e\\nnever completed? Here\'s a snip from a comment in NormalizeResultSet.java:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eNormalize a row.  For now, this means calling constructors through\u003c\\/li\u003e\\n\\t\u003cli\u003ethe type services to normalize a type to itself.  For example,\u003c\\/li\u003e\\n\\t\u003cli\u003eif you\'re putting a char(30) value into a char(15) column, it\u003c\\/li\u003e\\n\\t\u003cli\u003ecalls a SQLChar constructor with the char(30) value, and the\u003c\\/li\u003e\\n\\t\u003cli\u003econstructor truncates the value and makes sure that no non-blank\u003c\\/li\u003e\\n\\t\u003cli\u003echaracters are truncated.\u003cbr\\/\u003e\\n        *\u003c\\/li\u003e\\n\\t\u003cli\u003eIn the future, this mechanism will be extended to do type conversions\u003c\\/li\u003e\\n\\t\u003cli\u003eas well.  I didn\'t implement type conversions yet because it looks\u003c\\/li\u003e\\n\\t\u003cli\u003elike a lot of work, and we needed char and varchar right away.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eAs I said before, though, I\'m just guessing. It would be good to have some more\u003cbr\\/\u003e\\neyes and thoughts on how this is supposed to behave.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12570761_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570761_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 17:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T17:17:12+0000\'\u003e20\\/Feb\\/08 17:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    If the \\\"immediate child result\\\" of the InsertNode is a Normalize node, \\nthen I think the VCN instances for the columns in the InsertNode \\nshould have sourceResultSet pointing to a NormalizeResultSet, \\nand sourceColumn pointing to a column in the NRS\'s ResultColumnList. \\n\\n In that case, it seems correct for that sourceColumn to be of type longint, \\nbecause it represents the  result  of the normalization. \\n\\n That is: \\n \\n\\t the PRN should sort values with integer type, and feed them up to the NRSN \\n\\t the NRS should invoke normalizeRow() to convert the int to a long \\n\\t the InsertNode should pull long values from the NRS and insert them \\n   into the target table. \\n \\n\\n\\n However, it looks like maybe this was the intent of the design, but \\nnever completed? Here\'s a snip from a comment in NormalizeResultSet.java: \\n\\n \\n\\t Normalize a row.  For now, this means calling constructors through \\n\\t the type services to normalize a type to itself.  For example, \\n\\t if you\'re putting a char(30) value into a char(15) column, it \\n\\t calls a SQLChar constructor with the char(30) value, and the \\n\\t constructor truncates the value and makes sure that no non-blank \\n\\t characters are truncated. \\n        * \\n\\t In the future, this mechanism will be extended to do type conversions \\n\\t as well.  I didn\'t implement type conversions yet because it looks \\n\\t like a lot of work, and we needed char and varchar right away. \\n \\n\\n\\n As I said before, though, I\'m just guessing. It would be good to have some more \\neyes and thoughts on how this is supposed to behave.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570848\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12570848&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570848\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12570848_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570848_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T22:02:07+0000\'\u003e20\\/Feb\\/08 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you so much Bryan for your help with this issue.\u003cbr\\/\u003e\\nI am a bit of a novice in this area so forgive if my questions\u003cbr\\/\u003e\\nare basic.  You said:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ethe PRN should sort values with integer type, and feed them up to the NRSN\u003c\\/li\u003e\\n\\t\u003cli\u003ethe NRS should invoke normalizeRow() to convert the int to a long\u003c\\/li\u003e\\n\\t\u003cli\u003ethe InsertNode should pull long values from the NRS and insert them\u003cbr\\/\u003e\\n   into the target table. \u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eand also said in an earlier comment.\u003cbr\\/\u003e\\n&gt;So I\'d suggest investigating the NormalizeResultSetNode, and\u003cbr\\/\u003e\\nwhether it is generating the proper buffering CAST operations. \u003c\\/p\u003e\\n\\n\u003cp\u003eIf the sort happens before normalization, how could CAST operations in \u003cbr\\/\u003e\\nNormalizeResultSetNode  have an effect on the sort?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12570848_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570848_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T22:02:07+0000\'\u003e20\\/Feb\\/08 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you so much Bryan for your help with this issue. \\nI am a bit of a novice in this area so forgive if my questions \\nare basic.  You said: \\n \\n\\t the PRN should sort values with integer type, and feed them up to the NRSN \\n\\t the NRS should invoke normalizeRow() to convert the int to a long \\n\\t the InsertNode should pull long values from the NRS and insert them \\n   into the target table.  \\n \\n\\n\\n and also said in an earlier comment. \\n&gt;So I\'d suggest investigating the NormalizeResultSetNode, and \\nwhether it is generating the proper buffering CAST operations.  \\n\\n If the sort happens before normalization, how could CAST operations in  \\nNormalizeResultSetNode  have an effect on the sort?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570893\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12570893&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570893\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12570893_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570893_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 23:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T23:57:14+0000\'\u003e20\\/Feb\\/08 23:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBy itself, CAST operations in NormalizeResultSet would not fix\u003cbr\\/\u003e\\nthe sort problem you are seeing, I agree. \u003c\\/p\u003e\\n\\n\u003cp\u003eMy comments are with respect to your earlier question:\u003cbr\\/\u003e\\n&gt; I am really not sure at the time of the sort whether both template and row data \u003cbr\\/\u003e\\n&gt; should be SQLInteger or SQLLongInt. If someone could explain which and why\u003c\\/p\u003e\\n\\n\u003cp\u003eI think I am trying to propose a two-part theory:\u003cbr\\/\u003e\\n1) at the time of the sort, both template and row data should be SQLInteger.\u003cbr\\/\u003e\\n2) Since the Insert requires a SQLLongInteger, I think the conversion from\u003cbr\\/\u003e\\nInt to LongInt should occur in NormalizeResultSet, rather than in the sort.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo working on NormalizeResultSet by itself would be only part of the solution,\u003cbr\\/\u003e\\nit still would also be necessary to change things so that the sort doesn\'t see\u003cbr\\/\u003e\\nthe type mismatch.\u003c\\/p\u003e\\n\\n\u003cp\u003eDoes that make more sense?\u003c\\/p\u003e\\n\\n\u003cp\u003ethanks,\u003c\\/p\u003e\\n\\n\u003cp\u003ebryan\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12570893_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570893_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Feb\\/08 23:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-20T23:57:14+0000\'\u003e20\\/Feb\\/08 23:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    By itself, CAST operations in NormalizeResultSet would not fix \\nthe sort problem you are seeing, I agree.  \\n\\n My comments are with respect to your earlier question: \\n&gt; I am really not sure at the time of the sort whether both template and row data  \\n&gt; should be SQLInteger or SQLLongInt. If someone could explain which and why \\n\\n I think I am trying to propose a two-part theory: \\n1) at the time of the sort, both template and row data should be SQLInteger. \\n2) Since the Insert requires a SQLLongInteger, I think the conversion from \\nInt to LongInt should occur in NormalizeResultSet, rather than in the sort. \\n\\n So working on NormalizeResultSet by itself would be only part of the solution, \\nit still would also be necessary to change things so that the sort doesn\'t see \\nthe type mismatch. \\n\\n Does that make more sense? \\n\\n thanks, \\n\\n bryan              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570901\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12570901&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570901\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12570901_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570901_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 00:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T00:14:18+0000\'\u003e21\\/Feb\\/08 00:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Bryan, that makes sense to me.  My primary focus \u003cbr\\/\u003e\\nis to change the sort so it doesn\'t see the type mismatch.\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom what you say, the change to VirtualColumnNode \u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/VirtualColumnNode.java?p2=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;p1=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;r1=554012&amp;r2=554011&amp;view=diff&amp;pathrev=554012\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/VirtualColumnNode.java?p2=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;p1=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;r1=554012&amp;r2=554011&amp;view=diff&amp;pathrev=554012\u003c\\/a\u003e\u003cbr\\/\u003e\\nshould not have affected the sort phase, but clearly it did.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think it would help a lot to understand why this change was made.  Dan could you elaborate?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12570901_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570901_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 00:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T00:14:18+0000\'\u003e21\\/Feb\\/08 00:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Bryan, that makes sense to me.  My primary focus  \\nis to change the sort so it doesn\'t see the type mismatch. \\n\\n From what you say, the change to VirtualColumnNode  \\n http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/VirtualColumnNode.java?p2=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;p1=%2Fdb%2Fderby%2Fcode%2Ftrunk%2Fjava%2Fengine%2Forg%2Fapache%2Fderby%2Fimpl%2Fsql%2Fcompile%2FVirtualColumnNode.java&amp;r1=554012&amp;r2=554011&amp;view=diff&amp;pathrev=554012  \\nshould not have affected the sort phase, but clearly it did. \\n\\n I think it would help a lot to understand why this change was made.  Dan could you elaborate?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571003\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571003&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571003\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12571003_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571003_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T10:41:05+0000\'\u003e21\\/Feb\\/08 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePerhaps this modified repro better illustrates that the sort should\u003cbr\\/\u003e\\nuse SQLInteger and not SQLLongint in the original repro:\u003c\\/p\u003e\\n\\n\u003cp\u003eij&gt; create table d3310 (x bigint);\u003cbr\\/\u003e\\n0 rows inserted\\/updated\\/deleted\u003cbr\\/\u003e\\nij&gt; insert into d3310 select distinct * from (values 2.0, 2.1, 2.2) v;\u003cbr\\/\u003e\\nERROR XJ001: Java exception: \'ASSERT FAILED col1.getClass() (class org.apache.derby.iapi.types.SQLDecimal) expected to be the same as col2.getClass() (class org.apache.derby.iapi.types.SQLLongint): org.apache.derby.shared.common.sanity.AssertFailure\'.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf the cast to BIGINT happened in or before the sort, the above insert\u003cbr\\/\u003e\\nstatement might end up inserting a single row instead of three rows,\u003cbr\\/\u003e\\nsince the values would no longer be distinct.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12571003_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571003_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T10:41:05+0000\'\u003e21\\/Feb\\/08 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Perhaps this modified repro better illustrates that the sort should \\nuse SQLInteger and not SQLLongint in the original repro: \\n\\n ij&gt; create table d3310 (x bigint); \\n0 rows inserted\\/updated\\/deleted \\nij&gt; insert into d3310 select distinct * from (values 2.0, 2.1, 2.2) v; \\nERROR XJ001: Java exception: \'ASSERT FAILED col1.getClass() (class org.apache.derby.iapi.types.SQLDecimal) expected to be the same as col2.getClass() (class org.apache.derby.iapi.types.SQLLongint): org.apache.derby.shared.common.sanity.AssertFailure\'. \\n\\n If the cast to BIGINT happened in or before the sort, the above insert \\nstatement might end up inserting a single row instead of three rows, \\nsince the values would no longer be distinct.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571069\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571069&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571069\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571069_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571069_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 15:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T15:19:12+0000\'\u003e21\\/Feb\\/08 15:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFor the rationale to the change to VirtualColumnNode (554012) \u003c\\/p\u003e\\n\\n\u003cp\u003eFrom the description of VirtualColumnNode it is a representation of a base column from a view or a table in another part of a query.\u003cbr\\/\u003e\\nIf this is the case then the type of the VirtualColumnNode must be the type of the underlying column. It\'s role is not as a type\u003cbr\\/\u003e\\nchanger. If it is meant to have that role as well, which would seem to overload its purpose, then that should be clearly documented in the class.\u003cbr\\/\u003e\\nI think keeping the roles of the various nodes to be clear and simple is the best approach.\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571069_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571069_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 15:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T15:19:12+0000\'\u003e21\\/Feb\\/08 15:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    For the rationale to the change to VirtualColumnNode (554012)  \\n\\n From the description of VirtualColumnNode it is a representation of a base column from a view or a table in another part of a query. \\nIf this is the case then the type of the VirtualColumnNode must be the type of the underlying column. It\'s role is not as a type \\nchanger. If it is meant to have that role as well, which would seem to overload its purpose, then that should be clearly documented in the class. \\nI think keeping the roles of the various nodes to be clear and simple is the best approach. \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571209\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571209&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571209\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12571209_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571209_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 22:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T22:16:58+0000\'\u003e21\\/Feb\\/08 22:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks again everyone for the help.  \u003cbr\\/\u003e\\nIn InsertNode.bindStatement we have:\u003cbr\\/\u003e\\n\\t\\t\\tresultSet = resultSet.genNormalizeResultSetNode(resultSet, false);\u003cbr\\/\u003e\\n\\t\\t\\tresultColumnList.copyTypesAndLengthsToSource(resultSet.getResultColumns());\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eResultSetNode.genNormalizeResultSetNode makes a shallow copy of the resultColumnList and\u003cbr\\/\u003e\\n replaces the expressions with VirtualColumnNodes which still point at the source column:\u003cbr\\/\u003e\\nSo ultimately we hit this line in ResultColumnList.copyTypesAndLengthsToSource \u003c\\/p\u003e\\n\\n\u003cp\u003e\\tsourceRC.getExpression().setType(resultColumn.getTypeServices());\u003c\\/p\u003e\\n\\n\u003cp\u003ewhich ends up changing the underlying source column type with the new setType method.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs an experiment, I tried commenting that  line in copyTypesAndLengthsToSource \u003cbr\\/\u003e\\nout, to find out why it is needed and I found that suites.All and derbyall  passed with the line \u003cbr\\/\u003e\\ncommented out as did the repro for this issue.  I wonder if\\/why it is needed.\u003c\\/p\u003e\\n\\n\u003cp\u003eBelow is the experimental patch:\u003cbr\\/\u003e\\nIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java\u003cbr\\/\u003e\\n===================================================================\u003cbr\\/\u003e\\n&#8212; java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java (revision 629575)\u003cbr\\/\u003e\\n+++ java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java (working copy)\u003cbr\\/\u003e\\n@@ -1642,7 +1642,7 @@\u003cbr\\/\u003e\\n                        ResultColumn sourceRC = (ResultColumn) sourceRCL.elementAt(index);\u003cbr\\/\u003e\\n                        ResultColumn resultColumn = (ResultColumn) elementAt(index);\u003cbr\\/\u003e\\n                        sourceRC.setType(resultColumn.getTypeServices());\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003esourceRC.getExpression().setType(resultColumn.getTypeServices());\u003cbr\\/\u003e\\n+                       \\/\\/sourceRC.getExpression().setType(resultColumn.getTypeServices());\u003cbr\\/\u003e\\n                }\u003cbr\\/\u003e\\n        }\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12571209_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571209_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 22:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T22:16:58+0000\'\u003e21\\/Feb\\/08 22:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks again everyone for the help.   \\nIn InsertNode.bindStatement we have: \\n\\t\\t\\tresultSet = resultSet.genNormalizeResultSetNode(resultSet, false); \\n\\t\\t\\tresultColumnList.copyTypesAndLengthsToSource(resultSet.getResultColumns()); \\n\\n\\n ResultSetNode.genNormalizeResultSetNode makes a shallow copy of the resultColumnList and \\n replaces the expressions with VirtualColumnNodes which still point at the source column: \\nSo ultimately we hit this line in ResultColumnList.copyTypesAndLengthsToSource  \\n\\n \\tsourceRC.getExpression().setType(resultColumn.getTypeServices()); \\n\\n which ends up changing the underlying source column type with the new setType method. \\n\\n As an experiment, I tried commenting that  line in copyTypesAndLengthsToSource  \\nout, to find out why it is needed and I found that suites.All and derbyall  passed with the line  \\ncommented out as did the repro for this issue.  I wonder if\\/why it is needed. \\n\\n Below is the experimental patch: \\nIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java \\n=================================================================== \\n&#8212; java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java (revision 629575) \\n+++ java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/ResultColumnList.java (working copy) \\n@@ -1642,7 +1642,7 @@ \\n                        ResultColumn sourceRC = (ResultColumn) sourceRCL.elementAt(index); \\n                        ResultColumn resultColumn = (ResultColumn) elementAt(index); \\n                        sourceRC.setType(resultColumn.getTypeServices()); \\n \\n\\t sourceRC.getExpression().setType(resultColumn.getTypeServices()); \\n+                       \\/\\/sourceRC.getExpression().setType(resultColumn.getTypeServices()); \\n                } \\n        } \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571543\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571543&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571543\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12571543_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571543_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 19:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T19:22:16+0000\'\u003e22\\/Feb\\/08 19:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached is my initial attempt at fixing this issue.  I am not quite sure this is the right approach.  The fix removes the line call setType on the underlying expressions from  copyTypesAndLengthsToSource, to avoid changing the type of the source column of VirtualColumnNodes.\u003c\\/p\u003e\\n\\n\u003cp\u003eI haven\'t been able to find any cases that this change affects adversely, but perhaps this is not the right approach.  Maybe the problem is that genNormalizeResultSetNode puts the VirtualColumnNodes in the normalized resultset in the first place.  Perhaps they should be CastNodes? \u003cbr\\/\u003e\\nThen perhaps copyTypesAndLengthsToSource wouldn\'t be necessary.\u003cbr\\/\u003e\\nAnyway I would appreciate comments on the patch and possible alternatives.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eJust for some historical background, I traced copyLengthsAndTypesToSource back to its origin.\u003cbr\\/\u003e\\nIt was put in to address a case that is no longer valid with Derby, but I\'ll put it here just in case it helps:\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; the following gets an exception trying to convert \'11.4\' to \u003cbr\\/\u003e\\nan integer\u003cbr\\/\u003e\\ncreate table trash(c1 real check(c1 &gt; 2));\u003cbr\\/\u003e\\ninsert into trash values \'11.4\';\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThanks \u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12571543_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571543_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 19:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T19:22:16+0000\'\u003e22\\/Feb\\/08 19:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached is my initial attempt at fixing this issue.  I am not quite sure this is the right approach.  The fix removes the line call setType on the underlying expressions from  copyTypesAndLengthsToSource, to avoid changing the type of the source column of VirtualColumnNodes. \\n\\n I haven\'t been able to find any cases that this change affects adversely, but perhaps this is not the right approach.  Maybe the problem is that genNormalizeResultSetNode puts the VirtualColumnNodes in the normalized resultset in the first place.  Perhaps they should be CastNodes?  \\nThen perhaps copyTypesAndLengthsToSource wouldn\'t be necessary. \\nAnyway I would appreciate comments on the patch and possible alternatives. \\n\\n\\n Just for some historical background, I traced copyLengthsAndTypesToSource back to its origin. \\nIt was put in to address a case that is no longer valid with Derby, but I\'ll put it here just in case it helps: \\n\\n &#8211; the following gets an exception trying to convert \'11.4\' to  \\nan integer \\ncreate table trash(c1 real check(c1 &gt; 2)); \\ninsert into trash values \'11.4\'; \\n\\n\\n Thanks  \\n\\n Kathey \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571557\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571557&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571557\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571557_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571557_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 19:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T19:42:39+0000\'\u003e22\\/Feb\\/08 19:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNice find.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo me the whole method seems very strange, why does the type of the source node need to be changed?\u003cbr\\/\u003e\\nI wonder if the whole method should be removed, as you say a CAST node might be better.\u003cbr\\/\u003e\\nChanging the type of the source node could be a potential for a huge source of bugs, if the implementation\u003cbr\\/\u003e\\nof the node is expecting its type to match its contents.\u003c\\/p\u003e\\n\\n\u003cp\u003eOf course the existing comment in the javadoc for the method is one of those useless comments:\u003c\\/p\u003e\\n\\n\u003cp\u003e   &gt;&gt;&gt; This is useful when adding a NormalizeResultSetNode.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe missing part is \u003cb\u003ewhy\u003c\\/b\u003e is it useful. An example of why I try to request good comments during code reviews,\u003cbr\\/\u003e\\nwhy is the most important part of any comment.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571557_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571557_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 19:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T19:42:39+0000\'\u003e22\\/Feb\\/08 19:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Nice find. \\n\\n To me the whole method seems very strange, why does the type of the source node need to be changed? \\nI wonder if the whole method should be removed, as you say a CAST node might be better. \\nChanging the type of the source node could be a potential for a huge source of bugs, if the implementation \\nof the node is expecting its type to match its contents. \\n\\n Of course the existing comment in the javadoc for the method is one of those useless comments: \\n\\n    &gt;&gt;&gt; This is useful when adding a NormalizeResultSetNode. \\n\\n The missing part is  why  is it useful. An example of why I try to request good comments during code reviews, \\nwhy is the most important part of any comment.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571618\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571618&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571618\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12571618_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571618_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 22:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T22:19:50+0000\'\u003e22\\/Feb\\/08 22:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Dan for looking at the patch.  Do you think this is a \u003cbr\\/\u003e\\nsufficient incremental improvement to resolve the regression? \u003cbr\\/\u003e\\nthen I can file a separate issue to investgate the wisdom and future\u003cbr\\/\u003e\\nof copyLengthsAndTypesToSource.\u003c\\/p\u003e\\n\\n\u003cp\u003eSimply  removing it lead to all sorts of unpleasantness, such as\u003cbr\\/\u003e\\nij&gt; insert into d3310 select distinct * from (values 2.0, 2.1, 2.2) v;\u003cbr\\/\u003e\\n3 rows inserted\\/updated\\/deleted\u003cbr\\/\u003e\\nij&gt; select * from d3310;\u003cbr\\/\u003e\\nX\u003cbr\\/\u003e\\n--------------------\u003cbr\\/\u003e\\nERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stor\u003cbr\\/\u003e\\ned\u003cbr\\/\u003e\\nERROR XJ001: Java exception: \': java.io.EOFException\'.\u003cbr\\/\u003e\\nij&gt; exit;\u003c\\/p\u003e\\n\\n\u003cp\u003eI am going to attach a diff file of the original change that inserted the method.\u003cbr\\/\u003e\\nI am not sure I understand all the code that was there before but I think\u003cbr\\/\u003e\\nit was perhaps superior to the fix.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12571618_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571618_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 22:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T22:19:50+0000\'\u003e22\\/Feb\\/08 22:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Dan for looking at the patch.  Do you think this is a  \\nsufficient incremental improvement to resolve the regression?  \\nthen I can file a separate issue to investgate the wisdom and future \\nof copyLengthsAndTypesToSource. \\n\\n Simply  removing it lead to all sorts of unpleasantness, such as \\nij&gt; insert into d3310 select distinct * from (values 2.0, 2.1, 2.2) v; \\n3 rows inserted\\/updated\\/deleted \\nij&gt; select * from d3310; \\nX \\n-------------------- \\nERROR XSDA7: Restore of a serializable or SQLData object of class , attempted to read more data than was originally stor \\ned \\nERROR XJ001: Java exception: \': java.io.EOFException\'. \\nij&gt; exit; \\n\\n I am going to attach a diff file of the original change that inserted the method. \\nI am not sure I understand all the code that was there before but I think \\nit was perhaps superior to the fix.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571624\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571624&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571624\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571624_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571624_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 22:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T22:41:46+0000\'\u003e22\\/Feb\\/08 22:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Do you think this is a sufficient incremental improvement to resolve the regression? \u003c\\/p\u003e\\n\\n\u003cp\u003eIn my opinion not at the moment, I\'m uncomfortable with fixes that can\'t be explained. At the moment it\'s a case\u003cbr\\/\u003e\\nof :\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eif I do this then it appears to work but I don\'t know why.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eIt\'s good that you\'ve found the likely source of the problem, but it\'s just a starting point.\u003cbr\\/\u003e\\nI\'ll spend some time trying to understand what that method is trying to do, it probably has to\u003cbr\\/\u003e\\ndo with some comments in ResultSetNode.genNormalizeResultSetNode:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003ePut a NormalizeResultSetNode on top of the specified ResultSetNode.\u003c\\/li\u003e\\n\\t\u003cli\u003eColumnReferences must continue to point to the same ResultColumn, so\u003c\\/li\u003e\\n\\t\u003cli\u003ethat ResultColumn must percolate up to the new PRN.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eNot sure what that means exactly, but it seems related.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571624_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571624_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 22:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T22:41:46+0000\'\u003e22\\/Feb\\/08 22:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Do you think this is a sufficient incremental improvement to resolve the regression?  \\n\\n In my opinion not at the moment, I\'m uncomfortable with fixes that can\'t be explained. At the moment it\'s a case \\nof : \\n \\n\\t if I do this then it appears to work but I don\'t know why. \\n \\n\\n\\n It\'s good that you\'ve found the likely source of the problem, but it\'s just a starting point. \\nI\'ll spend some time trying to understand what that method is trying to do, it probably has to \\ndo with some comments in ResultSetNode.genNormalizeResultSetNode: \\n\\n \\n\\t Put a NormalizeResultSetNode on top of the specified ResultSetNode. \\n\\t ColumnReferences must continue to point to the same ResultColumn, so \\n\\t that ResultColumn must percolate up to the new PRN. \\n \\n\\n\\n Not sure what that means exactly, but it seems related. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571629\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571629&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571629\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571629_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571629_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T22:57:28+0000\'\u003e22\\/Feb\\/08 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eResultSetNode.genNormalizeResultSetNode() is a little strange:\u003c\\/p\u003e\\n\\n\u003cp\u003eIts purpose is to push a normalize result set node on-top of a ResultSetNode.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe passed in child node is always the node is actually invoked on, so it\'s always operating on this.\u003cbr\\/\u003e\\n(I\'ll attach a simple patch for that, it simplifies the code a little, otherwise it appears the method is operating on\u003cbr\\/\u003e\\ntwo result set nodes instead of just itself.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat\'s strange to me is that even though it is wrapping itself with a normalize node, the code ends up modifying\u003cbr\\/\u003e\\nits own resultColumns. A normal, expected pattern for such a situation is that the node to be wrapped would\u003cbr\\/\u003e\\nbe unmodified by pushing a normalize node on top of it. This could be related to this issue, the source nodes and\u003cbr\\/\u003e\\ntarget nodes might be being mixed up.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;sorry if this appears unclear, it&#39;s just something I noticed and wanted to quickly throw out there&#93;\u003c\\/span\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571629_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571629_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T22:57:28+0000\'\u003e22\\/Feb\\/08 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    ResultSetNode.genNormalizeResultSetNode() is a little strange: \\n\\n Its purpose is to push a normalize result set node on-top of a ResultSetNode. \\n\\n The passed in child node is always the node is actually invoked on, so it\'s always operating on this. \\n(I\'ll attach a simple patch for that, it simplifies the code a little, otherwise it appears the method is operating on \\ntwo result set nodes instead of just itself. \\n\\n What\'s strange to me is that even though it is wrapping itself with a normalize node, the code ends up modifying \\nits own resultColumns. A normal, expected pattern for such a situation is that the node to be wrapped would \\nbe unmodified by pushing a normalize node on top of it. This could be related to this issue, the source nodes and \\ntarget nodes might be being mixed up. \\n\\n  &#91;sorry if this appears unclear, it&#39;s just something I noticed and wanted to quickly throw out there&#93;               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571637\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571637&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571637\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571637_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571637_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 23:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T23:17:20+0000\'\u003e22\\/Feb\\/08 23:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;more rambling&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\nThe pattern of modifying the node being wrapped when wrapping it seems a common theme in ResultSetNode:\u003c\\/p\u003e\\n\\n\u003cp\u003e  genProjectRestrictForReordering &amp; genProjectRestrict also do it.\u003c\\/p\u003e\\n\\n\u003cp\u003eHave to say it\'s a very counter-intuitive coding style and likely to lead to bugs.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571637_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571637_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 23:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T23:17:20+0000\'\u003e22\\/Feb\\/08 23:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;more rambling&#93;  \\nThe pattern of modifying the node being wrapped when wrapping it seems a common theme in ResultSetNode: \\n\\n   genProjectRestrictForReordering &amp; genProjectRestrict also do it. \\n\\n Have to say it\'s a very counter-intuitive coding style and likely to lead to bugs.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571647\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571647&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571647\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571647_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571647_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 23:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T23:59:18+0000\'\u003e22\\/Feb\\/08 23:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Daniel John Debrunner - 23\\/Feb\\/08 00:06\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooking at NormalizeResultSet I now see that cast nodes are not needed. NormalizeResultSet performs type\u003cbr\\/\u003e\\nconversions itself without any need for cast nodes.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt needs a set of DataTypeDescriptors that represent the intended types. SO I\'m guessing the layout should be\u003cbr\\/\u003e\\nsomething like to say convert our INT into a  BIGINT\u003c\\/p\u003e\\n\\n\u003cp\u003eNormalizeNode\u003cbr\\/\u003e\\n    ResultColumn(BIGINT) -&gt; VirtualColumnNode (??) -&gt; A (below)\u003c\\/p\u003e\\n\\n\u003cp\u003e    source result set node\u003cbr\\/\u003e\\n         A - ResultColumn (INT) -&gt; constant (INT)\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThat\'s a rough guess, but I think it\'s beginning to show why the fix works. I think without the change\u003cbr\\/\u003e\\nthe type of A would be set to BIGINT and with the change it would remain at INT.\u003c\\/p\u003e\\n\\n\u003cp\u003eNot saying I fully understand it yet, but just throwing more info out there from looking at the code.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;edit to have conversion (INT TO BIGINT) correct&#93;\u003c\\/span\u003e\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571647_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571647_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 23:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T23:59:18+0000\'\u003e22\\/Feb\\/08 23:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Daniel John Debrunner - 23\\/Feb\\/08 00:06\\\"\u003eedited\u003c\\/span\u003e                   Looking at NormalizeResultSet I now see that cast nodes are not needed. NormalizeResultSet performs type \\nconversions itself without any need for cast nodes. \\n\\n It needs a set of DataTypeDescriptors that represent the intended types. SO I\'m guessing the layout should be \\nsomething like to say convert our INT into a  BIGINT \\n\\n NormalizeNode \\n    ResultColumn(BIGINT) -&gt; VirtualColumnNode (??) -&gt; A (below) \\n\\n     source result set node \\n         A - ResultColumn (INT) -&gt; constant (INT) \\n\\n\\n That\'s a rough guess, but I think it\'s beginning to show why the fix works. I think without the change \\nthe type of A would be set to BIGINT and with the change it would remain at INT. \\n\\n Not saying I fully understand it yet, but just throwing more info out there from looking at the code. \\n\\n  &#91;edit to have conversion (INT TO BIGINT) correct&#93;  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571652\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571652&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571652\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571652_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571652_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/08 00:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-23T00:11:02+0000\'\u003e23\\/Feb\\/08 00:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCleanup of ResultSetNode.genNormalizeResultSetNode() so that it always operates in itself (ie. it returns a NormalizeResultSetNode that wraps itself. This was the usage of the method in every case, thus make it the only possible behaviour to make the code clearer.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571652_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571652_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/08 00:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-23T00:11:02+0000\'\u003e23\\/Feb\\/08 00:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Cleanup of ResultSetNode.genNormalizeResultSetNode() so that it always operates in itself (ie. it returns a NormalizeResultSetNode that wraps itself. This was the usage of the method in every case, thus make it the only possible behaviour to make the code clearer.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571929\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12571929&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571929\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571929_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571929_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Feb\\/08 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-24T19:06:10+0000\'\u003e24\\/Feb\\/08 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;yet more rambling&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\nA ResultSetNode has a set of ResultColumns and each ResultColumn has an expression under it.\u003c\\/p\u003e\\n\\n\u003cp\u003eA NormalizeResultSetNode is added above a ResultSetNode (wraps it) when the type of at least one of its\u003cbr\\/\u003e\\nResultColumn does not match the type of its expression,\u003cbr\\/\u003e\\nResultColumn indicates this can be the case &amp; I added some more comments to that.\u003c\\/p\u003e\\n\\n\u003cp\u003eOnce the decision is made to add a NormalizeResultSetNode  there is some processing of ResultColumns and ResultColumnLists\u003cbr\\/\u003e\\nthat I haven\'t understood yet, this includes the call copyLengthsAndTypesToSource() that Kathey modified.\u003c\\/p\u003e\\n\\n\u003cp\u003eSetting up a NormalizeResultSetNode  is spread over three locations, the class itself (very little, it\'s almost acting like a C struct),\u003cbr\\/\u003e\\nthe genNormalizeResultSetNode method and then copyLengthsAndTypesToSource. A good O-O implementation would have\u003cbr\\/\u003e\\nthe logic to create a NormalizeResultSetNode  self-contained in NormalizeResultSetNode.\u003c\\/p\u003e\\n\\n\u003cp\u003eSince the ResultColumnList of the original ResultSetNode correctly describes the desired outcome, it\'s not clear to\u003cbr\\/\u003e\\nme why NormalizeResultSetNode  can\'t just refer to the same list and use it for its processing. They may be some chance\u003cbr\\/\u003e\\nthat this would cause recursion at some point, where a NormalizeResultSetNode  would think it needed to be wrapped\u003cbr\\/\u003e\\nin a NormalizeResultSetNode  since the types of its columns and expression don\'t match (i.e. when it is handled as a regular ResultSetNode).\u003c\\/p\u003e\\n\\n\u003cp\u003eI think moving the setup of a NormalizeResultSetNode  into the class itself, so that its inputs are just the ResultSetNode to wrap\u003cbr\\/\u003e\\nwould help clear up the code, especially if comments were added indicating why certain actions were being taken.\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12571929_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571929_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Feb\\/08 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-24T19:06:10+0000\'\u003e24\\/Feb\\/08 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;yet more rambling&#93;  \\nA ResultSetNode has a set of ResultColumns and each ResultColumn has an expression under it. \\n\\n A NormalizeResultSetNode is added above a ResultSetNode (wraps it) when the type of at least one of its \\nResultColumn does not match the type of its expression, \\nResultColumn indicates this can be the case &amp; I added some more comments to that. \\n\\n Once the decision is made to add a NormalizeResultSetNode  there is some processing of ResultColumns and ResultColumnLists \\nthat I haven\'t understood yet, this includes the call copyLengthsAndTypesToSource() that Kathey modified. \\n\\n Setting up a NormalizeResultSetNode  is spread over three locations, the class itself (very little, it\'s almost acting like a C struct), \\nthe genNormalizeResultSetNode method and then copyLengthsAndTypesToSource. A good O-O implementation would have \\nthe logic to create a NormalizeResultSetNode  self-contained in NormalizeResultSetNode. \\n\\n Since the ResultColumnList of the original ResultSetNode correctly describes the desired outcome, it\'s not clear to \\nme why NormalizeResultSetNode  can\'t just refer to the same list and use it for its processing. They may be some chance \\nthat this would cause recursion at some point, where a NormalizeResultSetNode  would think it needed to be wrapped \\nin a NormalizeResultSetNode  since the types of its columns and expression don\'t match (i.e. when it is handled as a regular ResultSetNode). \\n\\n I think moving the setup of a NormalizeResultSetNode  into the class itself, so that its inputs are just the ResultSetNode to wrap \\nwould help clear up the code, especially if comments were added indicating why certain actions were being taken. \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12573487\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12573487&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12573487\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12573487_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12573487_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Feb\\/08 22:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-28T22:13:08+0000\'\u003e28\\/Feb\\/08 22:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe attached patch derby-3310_remove_genNormalizeResultSetNode_diff.txt moves the contents of ResultSetNode.genNormalizeResultSetNode into NormalizeResultSetNode.init() method.  The method still copies the ResultColumnList as before.\u003c\\/p\u003e\\n\\n\u003cp\u003eI had a harder time with getting rid of copyTypesAndLengthsToSource, so decided to wait for a second patch for removing that method. I\'ll post some questions about that after this patch gets committed.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12573487_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12573487_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Feb\\/08 22:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-28T22:13:08+0000\'\u003e28\\/Feb\\/08 22:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The attached patch derby-3310_remove_genNormalizeResultSetNode_diff.txt moves the contents of ResultSetNode.genNormalizeResultSetNode into NormalizeResultSetNode.init() method.  The method still copies the ResultColumnList as before. \\n\\n I had a harder time with getting rid of copyTypesAndLengthsToSource, so decided to wait for a second patch for removing that method. I\'ll post some questions about that after this patch gets committed. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12573800\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12573800&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12573800\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12573800_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12573800_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Feb\\/08 15:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-29T15:56:49+0000\'\u003e29\\/Feb\\/08 15:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI should probably mention that I am not convinced that moving the \u003cbr\\/\u003e\\ngenNormalizeResultSetNode code into the NormalizeResultSetNode init method\u003cbr\\/\u003e\\nmakes things much clearer.  It seems to bury the modification of the ResultSetNode\u003cbr\\/\u003e\\ndeeper IMHO.  Anyway I would appreciate a second opinion on this and review of \u003cbr\\/\u003e\\nthe patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks \u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12573800_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12573800_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Feb\\/08 15:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-29T15:56:49+0000\'\u003e29\\/Feb\\/08 15:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I should probably mention that I am not convinced that moving the  \\ngenNormalizeResultSetNode code into the NormalizeResultSetNode init method \\nmakes things much clearer.  It seems to bury the modification of the ResultSetNode \\ndeeper IMHO.  Anyway I would appreciate a second opinion on this and review of  \\nthe patch. \\n\\n Thanks  \\n\\n Kathey \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12573805\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12573805&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12573805\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12573805_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12573805_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Feb\\/08 16:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-29T16:04:04+0000\'\u003e29\\/Feb\\/08 16:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI haven\'t looked at the patch yet, but I agree modifying the ResultSetNode (R) to be wrapped inside NormalizeResultSetNode (NR) would be really unclear,\u003cbr\\/\u003e\\nbut I don\'t think the ResultSetNode R should be modified. It\'s a very unnatural coding style, subject to bugs, e.g. with the code as-is any other node that thinks\u003cbr\\/\u003e\\n it is pointing to R\'s ResultColumns silently gets changed to be pointing to NR\'s ResultColumns.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12573805_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12573805_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Feb\\/08 16:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-29T16:04:04+0000\'\u003e29\\/Feb\\/08 16:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I haven\'t looked at the patch yet, but I agree modifying the ResultSetNode (R) to be wrapped inside NormalizeResultSetNode (NR) would be really unclear, \\nbut I don\'t think the ResultSetNode R should be modified. It\'s a very unnatural coding style, subject to bugs, e.g. with the code as-is any other node that thinks \\n it is pointing to R\'s ResultColumns silently gets changed to be pointing to NR\'s ResultColumns.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12573813\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12573813&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12573813\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12573813_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12573813_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Feb\\/08 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-29T16:18:15+0000\'\u003e29\\/Feb\\/08 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think then I misinterpreted your suggestion:\u003cbr\\/\u003e\\n&gt;Setting up a NormalizeResultSetNode is spread over three locations, the class itself (very little, it\'s almost acting like a C struct),\u003cbr\\/\u003e\\n&gt;the genNormalizeResultSetNode method and then copyLengthsAndTypesToSource. A good O-O implementation would have\u003cbr\\/\u003e\\n&gt;the logic to create a NormalizeResultSetNode self-contained in NormalizeResultSetNode.\u003c\\/p\u003e\\n\\n\u003cp\u003eI was endeavoring to move the existing logic into NormalizeResultSetNode.  Perhaps some \u003cbr\\/\u003e\\nother first steps are more appropriate.  Any advice is appreciated.  I do feel however that\u003cbr\\/\u003e\\nI am getting further away, not closer to resolving \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3310\\\" title=\\\"ASSERT in MergeSort.checkColumnTypes() disallow legal type conversions\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3310\\\"\u003e\u003cdel\u003eDERBY-3310\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12573813_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12573813_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Feb\\/08 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-29T16:18:15+0000\'\u003e29\\/Feb\\/08 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think then I misinterpreted your suggestion: \\n&gt;Setting up a NormalizeResultSetNode is spread over three locations, the class itself (very little, it\'s almost acting like a C struct), \\n&gt;the genNormalizeResultSetNode method and then copyLengthsAndTypesToSource. A good O-O implementation would have \\n&gt;the logic to create a NormalizeResultSetNode self-contained in NormalizeResultSetNode. \\n\\n I was endeavoring to move the existing logic into NormalizeResultSetNode.  Perhaps some  \\nother first steps are more appropriate.  Any advice is appreciated.  I do feel however that \\nI am getting further away, not closer to resolving   DERBY-3310  .              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12574618\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12574618&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12574618\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12574618_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12574618_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Mar\\/08 17:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-03T17:33:32+0000\'\u003e03\\/Mar\\/08 17:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUnmarking patch available. It seems that it does not make sense to move the logic into NormalizeResultSetNode until we can avoid changing the underlying ResultSetNode. Dan suggested I try to make a write up of the current behaviour and what is being modified.  I will try to do that.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12574618_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12574618_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Mar\\/08 17:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-03T17:33:32+0000\'\u003e03\\/Mar\\/08 17:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Unmarking patch available. It seems that it does not make sense to move the logic into NormalizeResultSetNode until we can avoid changing the underlying ResultSetNode. Dan suggested I try to make a write up of the current behaviour and what is being modified.  I will try to do that. \\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12575071\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12575071&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12575071\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12575071_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12575071_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Mar\\/08 17:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-04T17:47:42+0000\'\u003e04\\/Mar\\/08 17:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003egenNormalizeResultSetNode() has this code:\u003cbr\\/\u003e\\n\\t\\t\\/* We get a shallow copy of the ResultColumnList and its \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eResultColumns.  (Copy maintains ResultColumn.expression for now.)\u003cbr\\/\u003e\\n\\t\\t *\\/\u003cbr\\/\u003e\\n                ResultColumnList prRCList = resultColumns;\u003cbr\\/\u003e\\n\\t\\tresultColumns = resultColumns.copyListAndObjects();\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e               ... \u003cbr\\/\u003e\\n\\t      Change prRCList to remove generatedGroupingColumns and add \u003cbr\\/\u003e\\n\\t      VirtualColumnNodes, get NormalizeResultSetNode \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eI wanted to understand the difference between doing this and just leaving \u003cbr\\/\u003e\\nresultColumns alone and working on the copy for prRCList  so I changed it to just\u003cbr\\/\u003e\\n                ResultColumnList prRCList = resultColumns.copyListAndObjects();\u003cbr\\/\u003e\\n       ... \u003cbr\\/\u003e\\n\\t      Change prRCList to remove generatedGroupingColumns and add \u003cbr\\/\u003e\\n\\t      VirtualColumnNodes, get NormalizeResultSetNode \u003c\\/p\u003e\\n\\n\u003cp\u003eThis led to a NullPointerException in the generated code for views.sql doing a select \u003cbr\\/\u003e\\nfrom a view.\u003cbr\\/\u003e\\nCaused by: java.lang.NullPointerException\u003cbr\\/\u003e\\n        at org.apache.derby.exe.acaa7ac093x0118x781cx2bb1xffffc28339b210.e3(Unkn\u003cbr\\/\u003e\\nown Source)\u003cbr\\/\u003e\\n        at org.apache.derby.impl.services.reflect.DirectCall.invoke(ReflectGener\u003cbr\\/\u003e\\natedClass.java:145)\u003cbr\\/\u003e\\n        ... 17 more\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not sure I understand the difference in my new code and the old and why the \u003cbr\\/\u003e\\nnew doesn\'t work.  If anyone has an immediate ideas that would be most helpful. \u003cbr\\/\u003e\\n I\'ll try to debug the NPE to see if that sheds any light.  \u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12575071_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12575071_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Mar\\/08 17:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-04T17:47:42+0000\'\u003e04\\/Mar\\/08 17:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    genNormalizeResultSetNode() has this code: \\n\\t\\t\\/* We get a shallow copy of the ResultColumnList and its  \\n \\n\\t ResultColumns.  (Copy maintains ResultColumn.expression for now.) \\n\\t\\t *\\/ \\n                ResultColumnList prRCList = resultColumns; \\n\\t\\tresultColumns = resultColumns.copyListAndObjects(); \\n \\n\\n\\n                ...  \\n\\t      Change prRCList to remove generatedGroupingColumns and add  \\n\\t      VirtualColumnNodes, get NormalizeResultSetNode  \\n\\n\\n I wanted to understand the difference between doing this and just leaving  \\nresultColumns alone and working on the copy for prRCList  so I changed it to just \\n                ResultColumnList prRCList = resultColumns.copyListAndObjects(); \\n       ...  \\n\\t      Change prRCList to remove generatedGroupingColumns and add  \\n\\t      VirtualColumnNodes, get NormalizeResultSetNode  \\n\\n This led to a NullPointerException in the generated code for views.sql doing a select  \\nfrom a view. \\nCaused by: java.lang.NullPointerException \\n        at org.apache.derby.exe.acaa7ac093x0118x781cx2bb1xffffc28339b210.e3(Unkn \\nown Source) \\n        at org.apache.derby.impl.services.reflect.DirectCall.invoke(ReflectGener \\natedClass.java:145) \\n        ... 17 more \\n\\n I am not sure I understand the difference in my new code and the old and why the  \\nnew doesn\'t work.  If anyone has an immediate ideas that would be most helpful.  \\n I\'ll try to debug the NPE to see if that sheds any light.   \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12575453\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12575453&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12575453\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12575453_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12575453_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Mar\\/08 18:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-05T18:43:53+0000\'\u003e05\\/Mar\\/08 18:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUnassigning myself from this issue for now while I focus on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3494\\\" title=\\\"Move the setup of NormalizeResultSetNode into the NormalizeResultSetNode\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3494\\\"\u003e\u003cdel\u003eDERBY-3494\u003c\\/del\u003e\u003c\\/a\u003e to reorganize the code. I am not sure that that is necessary to resolve this issue.  Perhaps someone has a more straight forward solution and can get this regression fixed for 10.4.\u003c\\/p\u003e\\n\\n\u003cp\u003eStatus of the issue as I leave it is:\u003c\\/p\u003e\\n\\n\u003cp\u003eI submitted a patch derby-3310_try1_diff.txt that resolves the issue and passes regression tests. That patch removes the change of the underlying expression of the NormalizeResultSetNode, so that it does not affect the sort.  ResultSetNode  expects the type of the column to be different from the expression in this case, so the patch seems to resolve the issue.  Dan had some concerns with the patch however, since the Normalization code is not clear, we are not sure if it is ok to remove the change of the expresion type.\u003c\\/p\u003e\\n\\n\u003cp\u003eDan thought reorganizing the normalization code to avoid changing the underlying result set would make things clearer (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3494\\\" title=\\\"Move the setup of NormalizeResultSetNode into the NormalizeResultSetNode\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3494\\\"\u003e\u003cdel\u003eDERBY-3494\u003c\\/del\u003e\u003c\\/a\u003e), so I am looking at that now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12575453_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12575453_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Mar\\/08 18:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-05T18:43:53+0000\'\u003e05\\/Mar\\/08 18:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Unassigning myself from this issue for now while I focus on   DERBY-3494   to reorganize the code. I am not sure that that is necessary to resolve this issue.  Perhaps someone has a more straight forward solution and can get this regression fixed for 10.4. \\n\\n Status of the issue as I leave it is: \\n\\n I submitted a patch derby-3310_try1_diff.txt that resolves the issue and passes regression tests. That patch removes the change of the underlying expression of the NormalizeResultSetNode, so that it does not affect the sort.  ResultSetNode  expects the type of the column to be different from the expression in this case, so the patch seems to resolve the issue.  Dan had some concerns with the patch however, since the Normalization code is not clear, we are not sure if it is ok to remove the change of the expresion type. \\n\\n Dan thought reorganizing the normalization code to avoid changing the underlying result set would make things clearer (  DERBY-3494  ), so I am looking at that now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12576453\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12576453&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12576453\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12576453_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12576453_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Mar\\/08 00:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-08T00:15:08+0000\'\u003e08\\/Mar\\/08 00:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDan&gt; I don\'t think the ResultSetNode R should be modified. It\'s a very unnatural coding style,\u003cbr\\/\u003e\\nDan&gt; subject to bugs, e.g. with the code as-is any other node that thinks it is pointing to R\'s\u003cbr\\/\u003e\\nDan&gt; ResultColumns silently gets changed to be pointing to NR\'s ResultColumns.\u003c\\/p\u003e\\n\\n\u003cp\u003eAfter doing a bit of investigation for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3494\\\" title=\\\"Move the setup of NormalizeResultSetNode into the NormalizeResultSetNode\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3494\\\"\u003e\u003cdel\u003eDERBY-3494\u003c\\/del\u003e\u003c\\/a\u003e, I think this \\\"silent update\\\" effect is precisely\u003cbr\\/\u003e\\n\u003cb\u003ewhy\u003c\\/b\u003e ResultSetNode R is being modified.  That is, if there is some column reference pointing\u003cbr\\/\u003e\\nto R\'s ResultColumns and then additional nodes are generated on top of R, it appears that\u003cbr\\/\u003e\\nthose column references \u003cb\u003emust\u003c\\/b\u003e point to the \\\"top\\\" of the newly-generated nodes instead of\u003cbr\\/\u003e\\nto R.  At least, that appears to be what execution-time logic expects (see \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3494\\\" title=\\\"Move the setup of NormalizeResultSetNode into the NormalizeResultSetNode\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3494\\\"\u003e\u003cdel\u003eDERBY-3494\u003c\\/del\u003e\u003c\\/a\u003e).\u003c\\/p\u003e\\n\\n\u003cp\u003eSo the execution code \u003cem\u003eexpects\u003c\\/em\u003e that any ColumnReference node which thinks it is pointing\u003cbr\\/\u003e\\nto R\'s ResultColumns \u003cem\u003eis\u003c\\/em\u003e silently changed to point to the NR\'s result columns.  It may be\u003cbr\\/\u003e\\n\\\"unnatural\\\" and \\\"subject to bugs\\\", but this particular \\\"side effect\\\" looks to be intentional.  Not\u003cbr\\/\u003e\\ngood, necessarily, but intentional...\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m not saying anything else about this particular issue (I still need to catch up on the discussion),\u003cbr\\/\u003e\\nbut I thought I\'d throw that out there.  Apologies if it\'s irrelevant.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12576453_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12576453_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Mar\\/08 00:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-08T00:15:08+0000\'\u003e08\\/Mar\\/08 00:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dan&gt; I don\'t think the ResultSetNode R should be modified. It\'s a very unnatural coding style, \\nDan&gt; subject to bugs, e.g. with the code as-is any other node that thinks it is pointing to R\'s \\nDan&gt; ResultColumns silently gets changed to be pointing to NR\'s ResultColumns. \\n\\n After doing a bit of investigation for   DERBY-3494  , I think this \\\"silent update\\\" effect is precisely \\n why  ResultSetNode R is being modified.  That is, if there is some column reference pointing \\nto R\'s ResultColumns and then additional nodes are generated on top of R, it appears that \\nthose column references  must  point to the \\\"top\\\" of the newly-generated nodes instead of \\nto R.  At least, that appears to be what execution-time logic expects (see   DERBY-3494  ). \\n\\n So the execution code  expects  that any ColumnReference node which thinks it is pointing \\nto R\'s ResultColumns  is  silently changed to point to the NR\'s result columns.  It may be \\n\\\"unnatural\\\" and \\\"subject to bugs\\\", but this particular \\\"side effect\\\" looks to be intentional.  Not \\ngood, necessarily, but intentional... \\n\\n I\'m not saying anything else about this particular issue (I still need to catch up on the discussion), \\nbut I thought I\'d throw that out there.  Apologies if it\'s irrelevant.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12577562\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12577562&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12577562\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12577562_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12577562_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/08 19:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-11T19:07:46+0000\'\u003e11\\/Mar\\/08 19:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI did some tracing through the various compilation stages for the short reproduction provided by\u003cbr\\/\u003e\\nKnut Anders in his February 21st comment.  Attached is d3310_writeup_1.html, which is an attempt\u003cbr\\/\u003e\\nto describe my findings.  Hopefully this is helpful...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12577562_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12577562_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/08 19:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-11T19:07:46+0000\'\u003e11\\/Mar\\/08 19:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I did some tracing through the various compilation stages for the short reproduction provided by \\nKnut Anders in his February 21st comment.  Attached is d3310_writeup_1.html, which is an attempt \\nto describe my findings.  Hopefully this is helpful...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12577604\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12577604&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12577604\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12577604_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12577604_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/08 21:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-11T21:13:05+0000\'\u003e11\\/Mar\\/08 21:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you Army for your detailed write up and articulating what\u003cbr\\/\u003e\\nI could not for the proposed change for this issue.  Dan given \u003cbr\\/\u003e\\nArmy\'s analysis, do you think there is now sufficient reasoning for\u003cbr\\/\u003e\\nthe derby-3310_try1_diff.txt change.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12577604_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12577604_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Mar\\/08 21:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-11T21:13:05+0000\'\u003e11\\/Mar\\/08 21:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you Army for your detailed write up and articulating what \\nI could not for the proposed change for this issue.  Dan given  \\nArmy\'s analysis, do you think there is now sufficient reasoning for \\nthe derby-3310_try1_diff.txt change.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12577980\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12577980&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12577980\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12577980_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12577980_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/08 18:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-12T18:59:11+0000\'\u003e12\\/Mar\\/08 18:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached is a revision of the try1 patch (derby-3310_diff.txt) that adds some comments to the changed method.  Since Army confirmed that this change the right thing to do, I would like to commit this patch to get rid of this regression for 10.4.  I welcome comments on the comments and the patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eUltimately with \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3494\\\" title=\\\"Move the setup of NormalizeResultSetNode into the NormalizeResultSetNode\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3494\\\"\u003e\u003cdel\u003eDERBY-3494\u003c\\/del\u003e\u003c\\/a\u003e I would like to try to roll this method into NormalizeResultSetNode, but for this fix I think it best not to combine it with code reorg.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12577980_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12577980_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/08 18:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-12T18:59:11+0000\'\u003e12\\/Mar\\/08 18:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached is a revision of the try1 patch (derby-3310_diff.txt) that adds some comments to the changed method.  Since Army confirmed that this change the right thing to do, I would like to commit this patch to get rid of this regression for 10.4.  I welcome comments on the comments and the patch. \\n\\n Ultimately with   DERBY-3494   I would like to try to roll this method into NormalizeResultSetNode, but for this fix I think it best not to combine it with code reorg. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12577981\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12577981&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12577981\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12577981_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12577981_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/08 19:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-12T19:04:31+0000\'\u003e12\\/Mar\\/08 19:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ehad an extraneous file in the diff\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12577981_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12577981_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Mar\\/08 19:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-12T19:04:31+0000\'\u003e12\\/Mar\\/08 19:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    had an extraneous file in the diff              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12578442\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12578442&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12578442\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12578442_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578442_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 18:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T18:49:14+0000\'\u003e13\\/Mar\\/08 18:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI plan to commit \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3310\\\" title=\\\"ASSERT in MergeSort.checkColumnTypes() disallow legal type conversions\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3310\\\"\u003e\u003cdel\u003eDERBY-3310\u003c\\/del\u003e\u003c\\/a\u003e_diff.txt this afternoon.\u003cbr\\/\u003e\\nPlease let me know if you have any concerns.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12578442_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578442_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 18:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T18:49:14+0000\'\u003e13\\/Mar\\/08 18:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I plan to commit   DERBY-3310  _diff.txt this afternoon. \\nPlease let me know if you have any concerns. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12578482\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12578482&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12578482\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12578482_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578482_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 20:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T20:38:55+0000\'\u003e13\\/Mar\\/08 20:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt would be good to get the contents of Army\'s analysis into the code, rather than just hanging off a jira issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12578482_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578482_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 20:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T20:38:55+0000\'\u003e13\\/Mar\\/08 20:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It would be good to get the contents of Army\'s analysis into the code, rather than just hanging off a jira issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12578496\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12578496&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12578496\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12578496_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578496_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 21:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T21:18:36+0000\'\u003e13\\/Mar\\/08 21:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI wasn\'t so sure where to hang it in the code where it would make sense, especially after\u003cbr\\/\u003e\\nthe change was made,  so I added a short summary to copyTypesAndLengthsToSource \u003cbr\\/\u003e\\nand referenced the full document.  Where in the code would be a good place to put it?  I could add it as \u003cbr\\/\u003e\\npart of the commit log or ...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12578496_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578496_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 21:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T21:18:36+0000\'\u003e13\\/Mar\\/08 21:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I wasn\'t so sure where to hang it in the code where it would make sense, especially after \\nthe change was made,  so I added a short summary to copyTypesAndLengthsToSource  \\nand referenced the full document.  Where in the code would be a good place to put it?  I could add it as  \\npart of the commit log or ...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12578498\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12578498&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12578498\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12578498_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578498_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 21:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T21:31:27+0000\'\u003e13\\/Mar\\/08 21:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe commit log is not the correct place.\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t know where the correct place is, but it seems to be explaining how various nodes work together etc.,\u003cbr\\/\u003e\\nso appropriate comments in the javadoc for nodes and\\/or their methods seems the best. I\'m sure it\'s not just\u003cbr\\/\u003e\\na matter of taking the text and placing it in one location. It just seems a shame for the information Army worked hard\u003cbr\\/\u003e\\nto produce not to be in the most useful place.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf anyone gains understanding of any piece of code during development or bug-fixing then it\'s best for the community\u003cbr\\/\u003e\\nif that knowledge is kept, typically by adding comments to the code.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnother option is the language how-it-works section on the wiki, there it probably could be as a single document.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12578498_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578498_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 21:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T21:31:27+0000\'\u003e13\\/Mar\\/08 21:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The commit log is not the correct place. \\n\\n I don\'t know where the correct place is, but it seems to be explaining how various nodes work together etc., \\nso appropriate comments in the javadoc for nodes and\\/or their methods seems the best. I\'m sure it\'s not just \\na matter of taking the text and placing it in one location. It just seems a shame for the information Army worked hard \\nto produce not to be in the most useful place. \\n\\n If anyone gains understanding of any piece of code during development or bug-fixing then it\'s best for the community \\nif that knowledge is kept, typically by adding comments to the code. \\n\\n Another option is the language how-it-works section on the wiki, there it probably could be as a single document.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580660\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12580660&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580660\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12580660_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580660_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Mar\\/08 04:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-20T04:52:53+0000\'\u003e20\\/Mar\\/08 04:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eResolving for 10.5 and 10.4. Thanks so much Army for your  help with this issue.  I still plan to post some form of Army\'s document on the Wiki.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12580660_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580660_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Mar\\/08 04:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-20T04:52:53+0000\'\u003e20\\/Mar\\/08 04:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Resolving for 10.5 and 10.4. Thanks so much Army for your  help with this issue.  I still plan to post some form of Army\'s document on the Wiki. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583229\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3310?focusedCommentId=12583229&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583229\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12583229_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583229_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 23:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T23:06:12+0000\'\u003e28\\/Mar\\/08 23:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA little late on this, but I finally got around to having a close read\u003cbr\\/\u003e\\nof Army\'s writeup and it seems 100% accurate to me. It\'s a\u003cbr\\/\u003e\\nwonderful document, and it really helped me understand how \u003cbr\\/\u003e\\nthe Normalize node works, as well as the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2775\\\" title=\\\"DataTypeDescriptor should be immutable so that multiple ValueNode referring to the same DTD do not have unexpected state changes.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2775\\\"\u003eDERBY-2775\u003c\\/a\u003e changes interacted\u003cbr\\/\u003e\\nto exhibit this behavior.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that the document would be quite valuable in the\u003cbr\\/\u003e\\nclass-level javadoc for NormalizeResultSetNode.java, as it\u003cbr\\/\u003e\\nreally does an excellent job of explaining how NRSN is intended to work.\u003cbr\\/\u003e\\nIt\'s a clear example, and quite carefully worded and thorough.\u003c\\/p\u003e\\n\\n\u003cp\u003eI also think that the document would be quite useful in the wiki, \u003cbr\\/\u003e\\nif that proves to be easier.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12583229_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583229_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 23:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T23:06:12+0000\'\u003e28\\/Mar\\/08 23:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    A little late on this, but I finally got around to having a close read \\nof Army\'s writeup and it seems 100% accurate to me. It\'s a \\nwonderful document, and it really helped me understand how  \\nthe Normalize node works, as well as the  DERBY-2775  changes interacted \\nto exhibit this behavior. \\n\\n I think that the document would be quite valuable in the \\nclass-level javadoc for NormalizeResultSetNode.java, as it \\nreally does an excellent job of explaining how NRSN is intended to work. \\nIt\'s a clear example, and quite carefully worded and thorough. \\n\\n I also think that the document would be quite useful in the wiki,  \\nif that proves to be easier. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239272138"> 
    <input type="hidden" title="jira.request.server.time" value="260"> 
    <input type="hidden" title="jira.request.id" value="521x94384803x5"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="2"> 
    <input type="hidden" title="db.reads.time.in.ms" value="50"> 
    <input type="hidden" title="db.conns.time.in.ms" value="56"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 521x94384803x5
	          REQUEST TIMESTAMP : [05/Mar/2018:08:41:12 +0000]
	               REQUEST TIME : 0.2600
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 2

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=25, elapsedTotal=50421703, elapsedMin=518483, elapsedMax=14647789, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=29, elapsedTotal=56675618, elapsedMin=548155, elapsedMax=14683604, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>