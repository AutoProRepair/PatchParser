<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|08e2ab1206d9c295b01d42ce8cde05af409836af|lout"> 
  <link rel="shortcut icon" href="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"sd.customer.profile.multi.languages\":true,\"sd.customer.portal.transitions\":true,\"sd.customer.portal.transitions.config\":true,\"sd.custom.email.stripping.rules\":false,\"sd.sla.lucene.issue.id.callback.performance\":true,\"sd.new.settings.sidebar.location\":true,\"sd.workload.report.paginator\":true,\"sd.experimental.portal.search.algorithm.default.1\":false,\"sd.customer.portal.help.center.agent.announcement\":true,\"sd.sla.improved.rendering\":false,\"sd.experimental.portal.search.algorithm.default.2\":false,\"sd.customer.feedback.validate.reporter.on.token\":true,\"sd.custom.email.notifications.utf8.csat.star\":true,\"sd.who.create.customers.by.email.setting\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.renderer.consider.variable.format\":true,\"sd.stats.event.tracking\":true,\"sd.password.helper.dialog\":true,\"sd.canned.responses\":false,\"sd.portal.help.center.customer.signup.secondary.email\":true,\"sd.custom.email.notifications.manage.language\":true,\"sd.use.search.by.permissions\":true,\"sd.slavalue.record.updated.date\":false,\"sd.report.custom.date.range\":false,\"sd.kb.article.helpfulness.report\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"sd.custom.email.notifications.styling\":true,\"sd.workinghours.new.page.bulldog.1\":false,\"sd.customer.portal.two.step.login\":false,\"sd.automation.psmq.async.executor\":true,\"sd.customer.org.list.page.lazy.search\":true,\"sd.approval.requested.when.handler\":true,\"sd.request.type.field.rest.api.filtering.bugfix\":true,\"sd.automation.then.action.auto.answer.approval\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"sla.will.only.be.paused.if.they.are.already.started\":true,\"sd.kb.comment.share.stats.collection\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"sd.customer.orgs.group.participants\":true,\"sd.portal.help.center.customer.signup\":true,\"sd.sla.agent.jql.security.restricted\":true,\"sd.test.feature.flag.x\":true,\"sd.test.feature.flag.y\":false,\"sd.cluster.safe.mail.channel.shutdown\":true,\"sd.email.channel.folders\":false,\"sd.email.analytics.open\":false,\"sd.kb.project.creation.create.link.space\":true,\"sd.workinghours.new.page\":false,\"sd.confluence.anonymous.permission.fix\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"sd.customer.portal.project.agent.announcement\":true,\"sd.automation.audit.log\":true,\"jira.jql.suggestrecentfields\":false,\"sd.canned.responses.check.index.startup\":false,\"sd.new.project.templates\":true,\"sd.custom.email.notifications.custom.rules.simple.ui\":false,\"sd.custom.email.notifications.cut.over\":true,\"sd.dismiss.all.misconfiguration.warnings.setting\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"sd.sla.configurations.export\":true,\"sd.canned.responses.variable.substitution\":true,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"sd.customer.portal.prioties.per.project.fix\":true,\"jira.instrumentation.laas\":false,\"sd.kb.self.service.report\":false,\"sla.improved.request.handling\":true,\"sd.no.schedule.async.upgrade.tasks\":true,\"sd.kb.primary.nav\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"sd.kb.issueview.panel.phase2\":true,\"sd.email.outsider.comments\":true,\"jira.create.linked.issue\":true,\"sd.kb.issueview.panel\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"sd.approvals.light.weight\":false,\"sd.automation.then.webhook\":true,\"sd.respect.inline.edit.issue.off\":true,\"jira.jql.smartautoselectfirst\":false,\"sd.global.portal.search.atlassian.only.tracking\":false,\"sd.automation.if.condition.comment.primary.action\":true,\"jira.priorities.per.project\":true,\"sd.inline.noformat.renderer\":true,\"sd.customer.request.type.create.edit.screens\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.servicedesk.servicedesk-canned-responses-plugin:canned-responses-data-provider.data"]="{\"substitutionVariables\":{\"issue.summary\":\"Issue summary\",\"issue.description\":\"Issue description\",\"issue.key\":\"Issue key\",\"issue.reporter.name\":\"Issue reporter\",\"issue.resolution\":\"Issue resolution\",\"request.url\":\"Request URL\",\"request.status\":\"Request status\"}}";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-help-links.help-links"]="{\"help\":{\"email.settings\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"managing.queues\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+queues+for+your+team\",\"email.setup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"request.settings.help.bubble\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\",\"email.settings.suitablerequest\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email#Receivingrequestsbyemail-suitablerequest\",\"sla.import.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Importing+SLAs\",\"documentation.home\":\"https://docs.atlassian.com/jira/jsd-docs-039/JIRA+Service+Desk+Documentation\",\"default\":\"https://docs.atlassian.com/jira/jsd-docs-039/\",\"create.space.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base#serving-customers-with-a-knowledge-base-createpermission\",\"email.settings.troubleshooting\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+the+email+channel\",\"admin.notifications.config\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+service+desk+notifications\",\"troubleshoot.requesttype\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+request+types\",\"approvals.configuration\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+JIRA+Service+Desk+approvals\",\"setting.up.reports\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+service+desk+reports\",\"public.signup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+public+signup\",\"knowledge.base\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base\",\"resolve.permission.scheme.errors\":\"https://docs.atlassian.com/jira/jsd-docs-039/Resolving+permission+scheme+errors\",\"getting.started\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+with+JIRA+Service+Desk\",\"getting.started.agent\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+for+service+desk+agents\",\"invite.customers\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\"},\"kb\":{\"default\":\"https://confluence.atlassian.com/display/SDKB/\",\"troubleshooting.user.management.issues\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\",\"legacytransition\":\"https://confluence.atlassian.com/display/SDKB/Replacing+legacy+automatic+transitions+with+automation+rules\",\"umtroubleshoot\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\"}}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-base-url.base-url"]="\"https://issues.apache.org/jira\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"dc9818f7111ec3\"";
WRM._unparsedData["project-id"]="12310110";
WRM._unparsedData["project-key"]="\"LUCENE\"";
WRM._unparsedData["project-name"]="\"Lucene - Core\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310110";
WRM._unparsedData["projectKey"]="\"LUCENE\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/1a6b21131945f6f49ff48336b49ca3fe-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/d8484c9183f546511a8e336a8779bcd9-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d3b35d835f8f46fc3b53bb4db7f85158-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/71d42e74136d842a3ef4d5d136484843-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/944bb39eced1b35cfc7194aa02eb5a5a/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/5a8f0f8b8aa8f96a4f0f7e9e248d62f3-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="LUCENE-3892"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[LUCENE-3892] Add a useful intblock postings format (eg, FOR, PFOR, PFORDelta, Simple9/16/64, etc.) - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[LUCENE-3892] Add a useful intblock postings format (eg, FOR, PFOR, PFORDelta, Simple9/16/64, etc.) - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/LUCENE" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-3892">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310110" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Lucene - Core'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310110&amp;avatarId=10061"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/LUCENE">Lucene - Core</a></li>
                 <li><a class="issue-link" data-issue-key="LUCENE-3892" href="/jira/browse/LUCENE-3892" id="key-val" rel="12547222">LUCENE-3892</a></li>
                </ol>
                <h1 id="summary-val">Add a useful intblock postings format (eg, FOR, PFOR, PFORDelta, Simple9/16/64, etc.)</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-3892"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/LUCENE-3892/LUCENE-3892.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/LUCENE-3892/LUCENE-3892.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/LUCENE-3892/LUCENE-3892.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/LUCENE-3892/LUCENE-3892.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+fixVersion+%3D+4.0" title="4.0 First major release of the 4.x series">4.0</a>, <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+fixVersion+%3D+6.0" title="6.0 Major release after 5.5">6.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <ul class="labels" id="labels-12547222-value"> 
                     <li><a class="lozenge" href="/jira/issues/?jql=labels+%3D+gsoc2012" title="gsoc2012"><span>gsoc2012</span></a></li> 
                     <li><a class="lozenge" href="/jira/issues/?jql=labels+%3D+lucene-gsoc-12" title="lucene-gsoc-12"><span>lucene-gsoc-12</span></a></li> 
                    </ul> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310120" class="item"> 
                     <div class="wrap"> 
                      <strong title="Lucene Fields" class="name">Lucene Fields:</strong> 
                      <div id="customfield_12310120-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310120-field"> 
                        <span>New</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>On the flex branch we explored a number of possible intblock<br> encodings, but for whatever reason never brought them to completion.<br> There are still a number of issues opened with patches in different<br> states.</p> 
                  <p>Initial results (based on prototype) were excellent (see<br> <a href="http://blog.mikemccandless.com/2010/08/lucene-performance-with-pfordelta-codec.html" class="external-link" rel="nofollow">http://blog.mikemccandless.com/2010/08/lucene-performance-with-pfordelta-codec.html</a><br> ).</p> 
                  <p>I think this would make a good GSoC project.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/LUCENE-3892?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/LUCENE-3892?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/LUCENE-3892?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/LUCENE-3892?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12532905" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12532905/LUCENE-3892_for_byte%5B%5D.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_for_byte[].patch:https://issues.apache.org/jira/secure/attachment/12532905/LUCENE-3892_for_byte%5B%5D.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12532905/LUCENE-3892_for_byte%5B%5D.patch" title="Latest  21/Jun/12 16:55 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_for_byte[].patch:https://issues.apache.org/jira/secure/attachment/12532905/LUCENE-3892_for_byte%5B%5D.patch">LUCENE-3892_for_byte[].patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-06-21T16:55:24.712Z">21/Jun/12 16:55</time>
                   </dd>
                   <dd class="attachment-size">
                    131 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12532888" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12532888/LUCENE-3892_for_int%5B%5D.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_for_int[].patch:https://issues.apache.org/jira/secure/attachment/12532888/LUCENE-3892_for_int%5B%5D.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12532888/LUCENE-3892_for_int%5B%5D.patch" title="Latest  21/Jun/12 15:48 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_for_int[].patch:https://issues.apache.org/jira/secure/attachment/12532888/LUCENE-3892_for_int%5B%5D.patch">LUCENE-3892_for_int[].patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-06-21T15:48:34.730Z">21/Jun/12 15:48</time>
                   </dd>
                   <dd class="attachment-size">
                    89 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12532691" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12532691/LUCENE-3892_for_unfold_method.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_for_unfold_method.patch:https://issues.apache.org/jira/secure/attachment/12532691/LUCENE-3892_for_unfold_method.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12532691/LUCENE-3892_for_unfold_method.patch" title="Latest  20/Jun/12 13:41 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_for_unfold_method.patch:https://issues.apache.org/jira/secure/attachment/12532691/LUCENE-3892_for_unfold_method.patch">LUCENE-3892_for_unfold_method.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-06-20T13:41:03.026Z">20/Jun/12 13:41</time>
                   </dd>
                   <dd class="attachment-size">
                    139 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12532690" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12532690/LUCENE-3892_pfor_unfold_method.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_pfor_unfold_method.patch:https://issues.apache.org/jira/secure/attachment/12532690/LUCENE-3892_pfor_unfold_method.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12532690/LUCENE-3892_pfor_unfold_method.patch" title="Latest  20/Jun/12 13:41 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_pfor_unfold_method.patch:https://issues.apache.org/jira/secure/attachment/12532690/LUCENE-3892_pfor_unfold_method.patch">LUCENE-3892_pfor_unfold_method.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-06-20T13:41:03.016Z">20/Jun/12 13:41</time>
                   </dd>
                   <dd class="attachment-size">
                    148 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12535700" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12535700/LUCENE-3892_pulsing_support.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_pulsing_support.patch:https://issues.apache.org/jira/secure/attachment/12535700/LUCENE-3892_pulsing_support.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12535700/LUCENE-3892_pulsing_support.patch" title="Latest  09/Jul/12 17:36 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_pulsing_support.patch:https://issues.apache.org/jira/secure/attachment/12535700/LUCENE-3892_pulsing_support.patch">LUCENE-3892_pulsing_support.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-09T17:36:26.015Z">09/Jul/12 17:36</time>
                   </dd>
                   <dd class="attachment-size">
                    12 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12524472" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12524472/LUCENE-3892_settings.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_settings.patch:https://issues.apache.org/jira/secure/attachment/12524472/LUCENE-3892_settings.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12524472/LUCENE-3892_settings.patch" title="Latest  26/Apr/12 18:16 - Robert Muir" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_settings.patch:https://issues.apache.org/jira/secure/attachment/12524472/LUCENE-3892_settings.patch">LUCENE-3892_settings.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-04-26T18:16:45.051Z">26/Apr/12 18:16</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Robert Muir
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12524461" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12524461/LUCENE-3892_settings.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_settings.patch:https://issues.apache.org/jira/secure/attachment/12524461/LUCENE-3892_settings.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12524461/LUCENE-3892_settings.patch" title=" 26/Apr/12 16:59 - Robert Muir" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892_settings.patch:https://issues.apache.org/jira/secure/attachment/12524461/LUCENE-3892_settings.patch">LUCENE-3892_settings.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-04-26T16:59:30.706Z">26/Apr/12 16:59</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Robert Muir
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12538373" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12538373/LUCENE-3892-blockFor%26hardcode%28base%29.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor&amp;hardcode(base).patch:https://issues.apache.org/jira/secure/attachment/12538373/LUCENE-3892-blockFor%26hardcode%28base%29.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12538373/LUCENE-3892-blockFor%26hardcode%28base%29.patch" title="Latest  30/Jul/12 17:07 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor&amp;hardcode(base).patch:https://issues.apache.org/jira/secure/attachment/12538373/LUCENE-3892-blockFor%26hardcode%28base%29.patch">LUCENE-3892-blockFor&amp;hardcode(base).patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-30T17:07:40.362Z">30/Jul/12 17:07</time>
                   </dd>
                   <dd class="attachment-size">
                    83 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12538374" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12538374/LUCENE-3892-blockFor%26packedecoder%28comp%29.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor&amp;packedecoder(comp).patch:https://issues.apache.org/jira/secure/attachment/12538374/LUCENE-3892-blockFor%26packedecoder%28comp%29.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12538374/LUCENE-3892-blockFor%26packedecoder%28comp%29.patch" title="Latest  30/Jul/12 17:07 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor&amp;packedecoder(comp).patch:https://issues.apache.org/jira/secure/attachment/12538374/LUCENE-3892-blockFor%26packedecoder%28comp%29.patch">LUCENE-3892-blockFor&amp;packedecoder(comp).patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-30T17:07:40.373Z">30/Jul/12 17:07</time>
                   </dd>
                   <dd class="attachment-size">
                    76 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12537346" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12537346/LUCENE-3892-blockFor-with-packedints.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor-with-packedints.patch:https://issues.apache.org/jira/secure/attachment/12537346/LUCENE-3892-blockFor-with-packedints.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12537346/LUCENE-3892-blockFor-with-packedints.patch" title="Latest  20/Jul/12 13:51 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor-with-packedints.patch:https://issues.apache.org/jira/secure/attachment/12537346/LUCENE-3892-blockFor-with-packedints.patch">LUCENE-3892-blockFor-with-packedints.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-20T13:51:53.055Z">20/Jul/12 13:51</time>
                   </dd>
                   <dd class="attachment-size">
                    17 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12537387" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12537387/LUCENE-3892-blockFor-with-packedints-decoder.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor-with-packedints-decoder.patch:https://issues.apache.org/jira/secure/attachment/12537387/LUCENE-3892-blockFor-with-packedints-decoder.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12537387/LUCENE-3892-blockFor-with-packedints-decoder.patch" title="Latest  20/Jul/12 18:57 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor-with-packedints-decoder.patch:https://issues.apache.org/jira/secure/attachment/12537387/LUCENE-3892-blockFor-with-packedints-decoder.patch">LUCENE-3892-blockFor-with-packedints-decoder.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-20T18:57:20.436Z">20/Jul/12 18:57</time>
                   </dd>
                   <dd class="attachment-size">
                    27 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12537371" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12537371/LUCENE-3892-blockFor-with-packedints-decoder.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor-with-packedints-decoder.patch:https://issues.apache.org/jira/secure/attachment/12537371/LUCENE-3892-blockFor-with-packedints-decoder.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12537371/LUCENE-3892-blockFor-with-packedints-decoder.patch" title=" 20/Jul/12 17:15 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockFor-with-packedints-decoder.patch:https://issues.apache.org/jira/secure/attachment/12537371/LUCENE-3892-blockFor-with-packedints-decoder.patch">LUCENE-3892-blockFor-with-packedints-decoder.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-20T17:15:04.276Z">20/Jul/12 17:15</time>
                   </dd>
                   <dd class="attachment-size">
                    27 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12540045" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12540045/LUCENE-3892-blockpfor.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockpfor.patch:https://issues.apache.org/jira/secure/attachment/12540045/LUCENE-3892-blockpfor.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12540045/LUCENE-3892-blockpfor.patch" title="Latest  09/Aug/12 15:28 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-blockpfor.patch:https://issues.apache.org/jira/secure/attachment/12540045/LUCENE-3892-blockpfor.patch">LUCENE-3892-blockpfor.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-08-09T15:28:18.310Z">09/Aug/12 15:28</time>
                   </dd>
                   <dd class="attachment-size">
                    15 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12533086" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12533086/LUCENE-3892-BlockTermScorer.patch" draggable="true" data-downloadurl="text/plain:LUCENE-3892-BlockTermScorer.patch:https://issues.apache.org/jira/secure/attachment/12533086/LUCENE-3892-BlockTermScorer.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12533086/LUCENE-3892-BlockTermScorer.patch" title="Latest  22/Jun/12 18:37 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-3892-BlockTermScorer.patch:https://issues.apache.org/jira/secure/attachment/12533086/LUCENE-3892-BlockTermScorer.patch">LUCENE-3892-BlockTermScorer.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-06-22T18:37:51.650Z">22/Jun/12 18:37</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12539881" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12539881/LUCENE-3892-bulkVInt.patch" draggable="true" data-downloadurl="text/plain:LUCENE-3892-bulkVInt.patch:https://issues.apache.org/jira/secure/attachment/12539881/LUCENE-3892-bulkVInt.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12539881/LUCENE-3892-bulkVInt.patch" title="Latest  08/Aug/12 15:51 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-3892-bulkVInt.patch:https://issues.apache.org/jira/secure/attachment/12539881/LUCENE-3892-bulkVInt.patch">LUCENE-3892-bulkVInt.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-08-08T15:51:38.577Z">08/Aug/12 15:51</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12532679" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12532679/LUCENE-3892-direct-IntBuffer.patch" draggable="true" data-downloadurl="text/plain:LUCENE-3892-direct-IntBuffer.patch:https://issues.apache.org/jira/secure/attachment/12532679/LUCENE-3892-direct-IntBuffer.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12532679/LUCENE-3892-direct-IntBuffer.patch" title="Latest  20/Jun/12 11:39 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-3892-direct-IntBuffer.patch:https://issues.apache.org/jira/secure/attachment/12532679/LUCENE-3892-direct-IntBuffer.patch">LUCENE-3892-direct-IntBuffer.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-06-20T11:39:16.082Z">20/Jun/12 11:39</time>
                   </dd>
                   <dd class="attachment-size">
                    148 kB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12536431" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12536431/LUCENE-3892-for%26pfor-with-javadoc.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-for&amp;pfor-with-javadoc.patch:https://issues.apache.org/jira/secure/attachment/12536431/LUCENE-3892-for%26pfor-with-javadoc.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12536431/LUCENE-3892-for%26pfor-with-javadoc.patch" title="Latest  13/Jul/12 18:30 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-for&amp;pfor-with-javadoc.patch:https://issues.apache.org/jira/secure/attachment/12536431/LUCENE-3892-for%26pfor-with-javadoc.patch">LUCENE-3892-for&amp;pfor-with-javadoc.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-13T18:30:35.418Z">13/Jul/12 18:30</time>
                   </dd>
                   <dd class="attachment-size">
                    29 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12535698" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12535698/LUCENE-3892-handle_open_files.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-handle_open_files.patch:https://issues.apache.org/jira/secure/attachment/12535698/LUCENE-3892-handle_open_files.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12535698/LUCENE-3892-handle_open_files.patch" title="Latest  09/Jul/12 17:25 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-handle_open_files.patch:https://issues.apache.org/jira/secure/attachment/12535698/LUCENE-3892-handle_open_files.patch">LUCENE-3892-handle_open_files.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-09T17:25:02.934Z">09/Jul/12 17:25</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12541479" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12541479/LUCENE-3892-javadocs.patch" draggable="true" data-downloadurl="text/plain:LUCENE-3892-javadocs.patch:https://issues.apache.org/jira/secure/attachment/12541479/LUCENE-3892-javadocs.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12541479/LUCENE-3892-javadocs.patch" title="Latest  18/Aug/12 12:29 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-3892-javadocs.patch:https://issues.apache.org/jira/secure/attachment/12541479/LUCENE-3892-javadocs.patch">LUCENE-3892-javadocs.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-08-18T12:29:15.043Z">18/Aug/12 12:29</time>
                   </dd>
                   <dd class="attachment-size">
                    19 kB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12542291" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12542291/LUCENE-3892-liveregs.patch" draggable="true" data-downloadurl="text/plain:LUCENE-3892-liveregs.patch:https://issues.apache.org/jira/secure/attachment/12542291/LUCENE-3892-liveregs.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12542291/LUCENE-3892-liveregs.patch" title="Latest  24/Aug/12 16:39 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-3892-liveregs.patch:https://issues.apache.org/jira/secure/attachment/12542291/LUCENE-3892-liveregs.patch">LUCENE-3892-liveregs.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-08-24T16:39:45.294Z">24/Aug/12 16:39</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12539952" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12539952/LUCENE-3892-non-specialized.patch" draggable="true" data-downloadurl="text/plain:LUCENE-3892-non-specialized.patch:https://issues.apache.org/jira/secure/attachment/12539952/LUCENE-3892-non-specialized.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12539952/LUCENE-3892-non-specialized.patch" title="Latest  08/Aug/12 23:05 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-3892-non-specialized.patch:https://issues.apache.org/jira/secure/attachment/12539952/LUCENE-3892-non-specialized.patch">LUCENE-3892-non-specialized.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-08-08T23:05:02.661Z">08/Aug/12 23:05</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12536548" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12536548/LUCENE-3892-pfor-compress-iterate-numbits.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-pfor-compress-iterate-numbits.patch:https://issues.apache.org/jira/secure/attachment/12536548/LUCENE-3892-pfor-compress-iterate-numbits.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12536548/LUCENE-3892-pfor-compress-iterate-numbits.patch" title="Latest  15/Jul/12 13:15 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-pfor-compress-iterate-numbits.patch:https://issues.apache.org/jira/secure/attachment/12536548/LUCENE-3892-pfor-compress-iterate-numbits.patch">LUCENE-3892-pfor-compress-iterate-numbits.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-15T13:15:38.661Z">15/Jul/12 13:15</time>
                   </dd>
                   <dd class="attachment-size">
                    31 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12536549" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12536549/LUCENE-3892-pfor-compress-slow-estimate.patch" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-pfor-compress-slow-estimate.patch:https://issues.apache.org/jira/secure/attachment/12536549/LUCENE-3892-pfor-compress-slow-estimate.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12536549/LUCENE-3892-pfor-compress-slow-estimate.patch" title="Latest  15/Jul/12 13:15 - Han Jiang" draggable="true" data-downloadurl="text/x-patch:LUCENE-3892-pfor-compress-slow-estimate.patch:https://issues.apache.org/jira/secure/attachment/12536549/LUCENE-3892-pfor-compress-slow-estimate.patch">LUCENE-3892-pfor-compress-slow-estimate.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-07-15T13:15:38.693Z">15/Jul/12 13:15</time>
                   </dd>
                   <dd class="attachment-size">
                    36 kB
                   </dd>
                   <dd class="attachment-author">
                    Han Jiang
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12541482" data-issue-id="12547222" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12541482/LUCENE-3892-trunk.patch" draggable="true" data-downloadurl="text/plain:LUCENE-3892-trunk.patch:https://issues.apache.org/jira/secure/attachment/12541482/LUCENE-3892-trunk.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12541482/LUCENE-3892-trunk.patch" title="Latest  18/Aug/12 15:36 - Michael McCandless" draggable="true" data-downloadurl="text/plain:LUCENE-3892-trunk.patch:https://issues.apache.org/jira/secure/attachment/12541482/LUCENE-3892-trunk.patch">LUCENE-3892-trunk.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-08-18T15:36:17.592Z">18/Aug/12 15:36</time>
                   </dd>
                   <dd class="attachment-size">
                    2.75 MB
                   </dd>
                   <dd class="attachment-author">
                    Michael McCandless
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="incorporates">
                   incorporates
                  </dt> 
                  <dd id="internal-12550986_12310010"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="LUCENE-3987: Ivy/maven config to pull from sonatype releases"> <a href="/jira/browse/LUCENE-3987" data-issue-key="LUCENE-3987" class="issue-link link-title resolution">LUCENE-3987</a> <span class="link-summary">Ivy/maven config to pull from sonatype releases</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/trivial.svg" width="16" height="16" title="Trivial - Cosmetic problem like misspelt words or misaligned text." alt="Trivial - Cosmetic problem like misspelt words or misaligned text."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12598960_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="LUCENE-4225: New FixedPostingsFormat for less overhead than SepPostingsFormat"> <a href="/jira/browse/LUCENE-4225" data-issue-key="LUCENE-4225" class="issue-link link-title resolution">LUCENE-4225</a> <span class="link-summary">New FixedPostingsFormat for less overhead than SepPostingsFormat</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12595428_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="LUCENE-4161: Make PackedInts usable by codecs"> <a href="/jira/browse/LUCENE-4161" data-issue-key="LUCENE-4161" class="issue-link link-title resolution">LUCENE-4161</a> <span class="link-summary">Make PackedInts usable by codecs</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12599554_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="LUCENE-4239: Provide access to PackedInts' low-level blocks <-> values conversion methods"> <a href="/jira/browse/LUCENE-4239" data-issue-key="LUCENE-4239" class="issue-link link-title resolution">LUCENE-4239</a> <span class="link-summary">Provide access to PackedInts' low-level blocks &lt;-&gt; values conversion methods</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12601200_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="LUCENE-4283: Support more frequent skip with Block Postings Format"> <a href="/jira/browse/LUCENE-4283" data-issue-key="LUCENE-4283" class="issue-link link-title resolution">LUCENE-4283</a> <span class="link-summary">Support more frequent skip with Block Postings Format</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10453"></span></span> Unassigned </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_mikemccand" rel="mikemccand" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Michael McCandless&quot;,&quot;emailAddress&quot;:&quot;lucene@mikemccandless.com&quot;,&quot;username&quot;:&quot;mikemccand&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mikemccand"></span></span> Michael McCandless </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">1</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">9</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="20/Mar/12 16:14"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2012-03-20T16:14:50+0000">20/Mar/12 16:14</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="09/May/16 18:32"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2016-05-09T18:32:18+0000">09/May/16 18:32</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="21/Aug/12 12:16"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2012-08-21T12:16:38+0000">21/Aug/12 12:16</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for n/a, Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-3892?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/LUCENE-3892?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-13240403\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13240403&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13240403\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13240403_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13240403_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/12 13:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-28T13:38:44+0000\'\u003e28\\/Mar\\/12 13:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 28\\/Mar\\/12 13:50\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi, \u003cbr\\/\u003e\\nI have submitted my proposal. Comments are welcome!\u003cbr\\/\u003e\\nAlso, I made it public: \u003ca href=\\\"http:\\/\\/www.google-melange.com\\/gsoc\\/proposal\\/review\\/google\\/gsoc2012\\/billybob\\/1\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.google-melange.com\\/gsoc\\/proposal\\/review\\/google\\/gsoc2012\\/billybob\\/1\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13240403_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13240403_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/12 13:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-28T13:38:44+0000\'\u003e28\\/Mar\\/12 13:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 28\\/Mar\\/12 13:50\\\"\u003eedited\u003c\\/span\u003e                   Hi,  \\nI have submitted my proposal. Comments are welcome! \\nAlso, I made it public:  http:\\/\\/www.google-melange.com\\/gsoc\\/proposal\\/review\\/google\\/gsoc2012\\/billybob\\/1               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13240527\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13240527&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13240527\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13240527_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13240527_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/12 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-28T16:46:41+0000\'\u003e28\\/Mar\\/12 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThat\'s great Han, I\'ll have a look.\u003c\\/p\u003e\\n\\n\u003cp\u003eI can be a mentor for this...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13240527_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13240527_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/12 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-28T16:46:41+0000\'\u003e28\\/Mar\\/12 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    That\'s great Han, I\'ll have a look. \\n\\n I can be a mentor for this...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13245374\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13245374&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13245374\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13245374_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13245374_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/12 14:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-03T14:55:36+0000\'\u003e03\\/Apr\\/12 14:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe proposal at\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/www.google-melange.com\\/gsoc\\/proposal\\/review\\/google\\/gsoc2012\\/billybob\\/1\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.google-melange.com\\/gsoc\\/proposal\\/review\\/google\\/gsoc2012\\/billybob\\/1\u003c\\/a\u003e\u003cbr\\/\u003e\\nlooks great!  Some initial feedback:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eThere are actually more than 2 codecs (eg we also have Lucene3x,\u003cbr\\/\u003e\\n    SimpleText, sep\\/intblock (abstract), random codecs\\/postings\u003cbr\\/\u003e\\n    formats for testing...), but our default codec now is Lucene40.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eI think you can use the existing abstract sep\\/intblock classes\u003cbr\\/\u003e\\n    (ie, they implement layers like FieldsProducer\\/Consumer...), and\u003cbr\\/\u003e\\n    then you can \\\"just\\\" implement the required methods (eg to\u003cbr\\/\u003e\\n    encode\\/decode one int[] block).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eWe may need to tune the skipper settings, based on profiling\u003cbr\\/\u003e\\n    results from skip-intensive (Phrase, And) queries... since it\'s\u003cbr\\/\u003e\\n    currently geared towards single-doc-at-once encoding.  I don\'t think\u003cbr\\/\u003e\\n    we should try to make a new skipper impl here... (there is a separate\u003cbr\\/\u003e\\n    issue for that).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eMaybe explore the combination of pulsing and PForDelta codecs;\u003cbr\\/\u003e\\n    seems like the combination of those two could be important, since\u003cbr\\/\u003e\\n    for low docFreq terms, retrieving the docs is now more\u003cbr\\/\u003e\\n    expensive...\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13245374_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13245374_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/12 14:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-03T14:55:36+0000\'\u003e03\\/Apr\\/12 14:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The proposal at \\n http:\\/\\/www.google-melange.com\\/gsoc\\/proposal\\/review\\/google\\/gsoc2012\\/billybob\\/1  \\nlooks great!  Some initial feedback: \\n\\n \\n\\t There are actually more than 2 codecs (eg we also have Lucene3x, \\n    SimpleText, sep\\/intblock (abstract), random codecs\\/postings \\n    formats for testing...), but our default codec now is Lucene40. \\n \\n\\n\\n \\n\\t I think you can use the existing abstract sep\\/intblock classes \\n    (ie, they implement layers like FieldsProducer\\/Consumer...), and \\n    then you can \\\"just\\\" implement the required methods (eg to \\n    encode\\/decode one int[] block). \\n \\n\\n\\n \\n\\t We may need to tune the skipper settings, based on profiling \\n    results from skip-intensive (Phrase, And) queries... since it\'s \\n    currently geared towards single-doc-at-once encoding.  I don\'t think \\n    we should try to make a new skipper impl here... (there is a separate \\n    issue for that). \\n \\n\\n\\n \\n\\t Maybe explore the combination of pulsing and PForDelta codecs; \\n    seems like the combination of those two could be important, since \\n    for low docFreq terms, retrieving the docs is now more \\n    expensive... \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13247175\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13247175&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13247175\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13247175_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13247175_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Apr\\/12 12:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-05T12:02:39+0000\'\u003e05\\/Apr\\/12 12:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 05\\/Apr\\/12 12:20\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mike,\u003cbr\\/\u003e\\nI have changed my proposal a bit, but here are some questions here:\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eThere are actually more than 2 codecs (eg we also have Lucene3x,\u003cbr\\/\u003e\\nSimpleText, sep\\/intblock (abstract), random codecs\\/postings\u003cbr\\/\u003e\\nformats for testing...), but our default codec now is Lucene40.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYes, but it seems that our baseline will be Lucene40 and Pulsing? Lucene3x is read-only, and other approaches are not productive.\u003cbr\\/\u003e\\nAnd, what is random codec? Does it mean to randomly pick up a codec for user?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eI think you can use the existing abstract sep\\/intblock classes\u003cbr\\/\u003e\\n(ie, they implement layers like FieldsProducer\\/Consumer...), and\u003cbr\\/\u003e\\nthen you can \\\"just\\\" implement the required methods (eg to\u003cbr\\/\u003e\\nencode\\/decode one int[] block).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAnd this was my initial thought about the PForDelta interface:\u003c\\/p\u003e\\n\\n\u003cp\u003eThe class hierarchy will be as below (quite similar to pulsing):\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003ePForDeltaPostingsFormat(extends PostingsFormat):\u003cbr\\/\u003e\\n   \\tIt will define global behaviors such as file suffix, and provide customized FieldsWriter\\/Reader\u003c\\/li\u003e\\n\\t\u003cli\u003ePForDeltaFieldsWriter(extends FieldsConsumer):\u003cbr\\/\u003e\\n    \\tIt will define how terms,docids,freq,offset are written into posting files.\u003cbr\\/\u003e\\n    \\tinner classes include: \\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003ePForDeltaTermsConsumer(extends TermsConsumer)\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ePForDeltaPostingsConsumer(extends PostingsConsumer)\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\\t\u003cli\u003ePForDeltaFieldsReader(extends FieldsProducer):\u003cbr\\/\u003e\\n    \\tIt will define how postings are read from index, and provide *Enum class to iterate docids, freqs etc.\u003cbr\\/\u003e\\n    \\tinner classes include:\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003ePForDeltaFieldsEnum(extends FieldsEnum)\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ePForDeltaTermsEnum(extends TermsEnum)\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ePForDeltaDocsEnum(extends DocsEnum)\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ePForDeltaDocsAndPositonsEnum(extends DocsAndPostionsEnum)\u003c\\/li\u003e\\n\\t\\t\u003cli\u003ePForDeltaTerms(extends Terms)\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eIt seems that \\\"BlockTermsReader\\/Writer\\\" have already implement those subclasses, and we can just pass our Postings(Writer\\/Reader)Base as an argument, like PatchedFrameOfRefCodec::fieldsConsumer() does.\u003cbr\\/\u003e\\nThen, to introduce PForDeltaCodec into trunk, we should also introduce the \\\"fixed codec\\\"? Also, why isn\'t lucene40codec implemented with this line? \u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eWe may need to tune the skipper settings, based on profiling\u003cbr\\/\u003e\\nresults from skip-intensive (Phrase, And) queries... since it\'s\u003cbr\\/\u003e\\ncurrently geared towards single-doc-at-once encoding. I don\'t think\u003cbr\\/\u003e\\nwe should try to make a new skipper impl here... (there is a separate\u003cbr\\/\u003e\\nissue for that).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIt seems that skip settings are not so related to backend codec? Do you mean the nocommit line in FixedPostingsWriterImpl.java:117 ?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eMaybe explore the combination of pulsing and PForDelta codecs;\u003cbr\\/\u003e\\nseems like the combination of those two could be important, since\u003cbr\\/\u003e\\nfor low docFreq terms, retrieving the docs is now more\u003cbr\\/\u003e\\nexpensive...\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYes, it seems that if PForDelta outperforms current approaches, a Pulsing version will work better. This feature will also come as \\\"phase 2\\\".\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13247175_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13247175_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Apr\\/12 12:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-05T12:02:39+0000\'\u003e05\\/Apr\\/12 12:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 05\\/Apr\\/12 12:20\\\"\u003eedited\u003c\\/span\u003e                   Hi Mike, \\nI have changed my proposal a bit, but here are some questions here: \\n\\n \\n \\n\\t There are actually more than 2 codecs (eg we also have Lucene3x, \\nSimpleText, sep\\/intblock (abstract), random codecs\\/postings \\nformats for testing...), but our default codec now is Lucene40. \\n \\n \\n\\n Yes, but it seems that our baseline will be Lucene40 and Pulsing? Lucene3x is read-only, and other approaches are not productive. \\nAnd, what is random codec? Does it mean to randomly pick up a codec for user? \\n\\n \\n \\n\\t I think you can use the existing abstract sep\\/intblock classes \\n(ie, they implement layers like FieldsProducer\\/Consumer...), and \\nthen you can \\\"just\\\" implement the required methods (eg to \\nencode\\/decode one int[] block). \\n \\n \\n\\n And this was my initial thought about the PForDelta interface: \\n\\n The class hierarchy will be as below (quite similar to pulsing): \\n \\n\\t PForDeltaPostingsFormat(extends PostingsFormat): \\n   \\tIt will define global behaviors such as file suffix, and provide customized FieldsWriter\\/Reader \\n\\t PForDeltaFieldsWriter(extends FieldsConsumer): \\n    \\tIt will define how terms,docids,freq,offset are written into posting files. \\n    \\tinner classes include: \\n\\t \\n\\t\\t PForDeltaTermsConsumer(extends TermsConsumer) \\n\\t\\t PForDeltaPostingsConsumer(extends PostingsConsumer) \\n\\t \\n\\t \\n\\t PForDeltaFieldsReader(extends FieldsProducer): \\n    \\tIt will define how postings are read from index, and provide *Enum class to iterate docids, freqs etc. \\n    \\tinner classes include:\\n\\t \\n\\t\\t PForDeltaFieldsEnum(extends FieldsEnum) \\n\\t\\t PForDeltaTermsEnum(extends TermsEnum) \\n\\t\\t PForDeltaDocsEnum(extends DocsEnum) \\n\\t\\t PForDeltaDocsAndPositonsEnum(extends DocsAndPostionsEnum) \\n\\t\\t PForDeltaTerms(extends Terms) \\n\\t \\n\\t \\n \\n\\n\\n It seems that \\\"BlockTermsReader\\/Writer\\\" have already implement those subclasses, and we can just pass our Postings(Writer\\/Reader)Base as an argument, like PatchedFrameOfRefCodec::fieldsConsumer() does. \\nThen, to introduce PForDeltaCodec into trunk, we should also introduce the \\\"fixed codec\\\"? Also, why isn\'t lucene40codec implemented with this line?  \\n\\n \\n \\n\\t We may need to tune the skipper settings, based on profiling \\nresults from skip-intensive (Phrase, And) queries... since it\'s \\ncurrently geared towards single-doc-at-once encoding. I don\'t think \\nwe should try to make a new skipper impl here... (there is a separate \\nissue for that). \\n \\n \\n\\n It seems that skip settings are not so related to backend codec? Do you mean the nocommit line in FixedPostingsWriterImpl.java:117 ? \\n\\n \\n \\n\\t Maybe explore the combination of pulsing and PForDelta codecs; \\nseems like the combination of those two could be important, since \\nfor low docFreq terms, retrieving the docs is now more \\nexpensive... \\n \\n \\n\\n Yes, it seems that if PForDelta outperforms current approaches, a Pulsing version will work better. This feature will also come as \\\"phase 2\\\".              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13260149\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13260149&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13260149\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13260149_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13260149_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/12 02:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-24T02:05:28+0000\'\u003e24\\/Apr\\/12 02:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank all of you for providing me this opportunity! Let us begin!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13260149_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13260149_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/12 02:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-24T02:05:28+0000\'\u003e24\\/Apr\\/12 02:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank all of you for providing me this opportunity! Let us begin!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13260422\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13260422&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13260422\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13260422_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13260422_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/12 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-24T10:41:12+0000\'\u003e24\\/Apr\\/12 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Billy, I\'m very excited your proposal is accepted!  Congrats \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e  Now the fun work begins...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13260422_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13260422_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/12 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-24T10:41:12+0000\'\u003e24\\/Apr\\/12 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Billy, I\'m very excited your proposal is accepted!  Congrats    Now the fun work begins...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262694\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262694&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262694\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13262694_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262694_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:04:26+0000\'\u003e26\\/Apr\\/12 16:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt\'s quite strange that sometimes I cannot access repo1.maven.org, therefore \\\"ant ivy-boostrap\\\" &amp; \\\"ant resolve\\\" will fail to work.(Since I\'m in China, the network connection might be limited).\u003c\\/p\u003e\\n\\n\u003cp\u003eOnce Mike and I hoped to make things work by configuring \\\"lucene\\/common-build.xml\\\" &amp; \\\"dev-tools\\/scripts\\/poll-mirrors.pl\\\" to another maven mirror, listed in \u003ca href=\\\"http:\\/\\/docs.codehaus.org\\/display\\/MAVENUSER\\/Mirrors+Repositories\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/docs.codehaus.org\\/display\\/MAVENUSER\\/Mirrors+Repositories\u003c\\/a\u003e. Unfortunately, the main site \\\"repo1.maven.org\\\" was configured into ivy-2.2.0.jar, and even we pass \\\"ant ivy-bootstrap\\\", \\\"ant resolve\\\" still fails.\u003c\\/p\u003e\\n\\n\u003cp\u003eWell, here is how I get things work(too ugly, hope a better suggestion!):\u003c\\/p\u003e\\n\\n\u003cp\u003echange \\/etc\\/hosts,\u003cbr\\/\u003e\\nand redirect current maven site to a mirror with same directory structure, for example: \u003c\\/p\u003e\\n\\n\u003cp\u003e194.8.197.22    repo1.maven.org # to \u003ca href=\\\"http:\\/\\/mirror.netcologne.de\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/mirror.netcologne.de\\/\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13262694_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262694_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:04:26+0000\'\u003e26\\/Apr\\/12 16:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It\'s quite strange that sometimes I cannot access repo1.maven.org, therefore \\\"ant ivy-boostrap\\\" &amp; \\\"ant resolve\\\" will fail to work.(Since I\'m in China, the network connection might be limited). \\n\\n Once Mike and I hoped to make things work by configuring \\\"lucene\\/common-build.xml\\\" &amp; \\\"dev-tools\\/scripts\\/poll-mirrors.pl\\\" to another maven mirror, listed in  http:\\/\\/docs.codehaus.org\\/display\\/MAVENUSER\\/Mirrors+Repositories . Unfortunately, the main site \\\"repo1.maven.org\\\" was configured into ivy-2.2.0.jar, and even we pass \\\"ant ivy-bootstrap\\\", \\\"ant resolve\\\" still fails. \\n\\n Well, here is how I get things work(too ugly, hope a better suggestion!): \\n\\n change \\/etc\\/hosts, \\nand redirect current maven site to a mirror with same directory structure, for example:  \\n\\n 194.8.197.22    repo1.maven.org # to  http:\\/\\/mirror.netcologne.de\\/               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262701\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262701&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262701\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13262701_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262701_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:13:09+0000\'\u003e26\\/Apr\\/12 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePhew, I\'m glad to hear you got it working!  So \\\"ant resolve\\\" finished successfully?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13262701_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262701_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:13:09+0000\'\u003e26\\/Apr\\/12 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Phew, I\'m glad to hear you got it working!  So \\\"ant resolve\\\" finished successfully?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262707\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262707&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262707\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13262707_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262707_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:17:53+0000\'\u003e26\\/Apr\\/12 16:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYes, and \\\"ant test\\\" is running now. Maybe we can configure something to avoid the ugly hack?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13262707_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262707_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:17:53+0000\'\u003e26\\/Apr\\/12 16:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yes, and \\\"ant test\\\" is running now. Maybe we can configure something to avoid the ugly hack?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262711\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262711&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262711\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262711_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262711_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:23:12+0000\'\u003e26\\/Apr\\/12 16:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMaybe a good solution is if we have an ant property (that we somehow pass to ivy), and\u003cbr\\/\u003e\\nwe conditionally set it in ant by default to a server we know that works in china,\u003cbr\\/\u003e\\nif the \\\"${user.language}\\\"=\\\"zh\\\" ?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262711_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262711_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:23:12+0000\'\u003e26\\/Apr\\/12 16:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Maybe a good solution is if we have an ant property (that we somehow pass to ivy), and \\nwe conditionally set it in ant by default to a server we know that works in china, \\nif the \\\"${user.language}\\\"=\\\"zh\\\" ?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262715\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262715&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262715\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13262715_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262715_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:27:03+0000\'\u003e26\\/Apr\\/12 16:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you, Robert! But currently, the maven mirror in China(\u003ca href=\\\"http:\\/\\/mirrors.redv.com\\/maven2\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/mirrors.redv.com\\/maven2\u003c\\/a\u003e) is not available. And can we pass a property to ivy to replace the \\\"repo1*\\\" stuff?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13262715_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262715_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:27:03+0000\'\u003e26\\/Apr\\/12 16:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you, Robert! But currently, the maven mirror in China( http:\\/\\/mirrors.redv.com\\/maven2 ) is not available. And can we pass a property to ivy to replace the \\\"repo1*\\\" stuff?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262741\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262741&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262741\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262741_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262741_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:59:30+0000\'\u003e26\\/Apr\\/12 16:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ecan you remove your hack and try this patch?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262741_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262741_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 16:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T16:59:30+0000\'\u003e26\\/Apr\\/12 16:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    can you remove your hack and try this patch?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262772\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262772&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262772\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13262772_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262772_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 17:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T17:29:44+0000\'\u003e26\\/Apr\\/12 17:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you Robert! The patch works well. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13262772_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262772_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 17:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T17:29:44+0000\'\u003e26\\/Apr\\/12 17:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you Robert! The patch works well.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262777\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262777&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262777\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262777_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262777_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T17:32:00+0000\'\u003e26\\/Apr\\/12 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch does not yet fix ivy-bootstrap. Ivy-bootstrap still only tries repo1.maven.org. We need a different strategy for that: either we depend on try-catch from ant contrib (undesired), use custom ant task (grrrr), or use a chain of targets with fail-on-error=false unless the file already exists and checksum at the end... Lemme see if i can fix ivy-bootstrap, too!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262777_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262777_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T17:32:00+0000\'\u003e26\\/Apr\\/12 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch does not yet fix ivy-bootstrap. Ivy-bootstrap still only tries repo1.maven.org. We need a different strategy for that: either we depend on try-catch from ant contrib (undesired), use custom ant task (grrrr), or use a chain of targets with fail-on-error=false unless the file already exists and checksum at the end... Lemme see if i can fix ivy-bootstrap, too!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262815\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262815&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262815\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262815_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262815_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 18:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T18:16:45+0000\'\u003e26\\/Apr\\/12 18:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eupdated patch with also logic for ivy-bootstrap. if repo1.maven.org fails, we try the same china-friendly mirror (currently \u003ca href=\\\"http:\\/\\/mirror.netcologne.de\\/maven2\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/mirror.netcologne.de\\/maven2\u003c\\/a\u003e). We disable fail-on-error, instead sha1-checksum the result at the end to determine real success or not (and if it fails that, prints a message suggesting you manually download it)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262815_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262815_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 18:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T18:16:45+0000\'\u003e26\\/Apr\\/12 18:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    updated patch with also logic for ivy-bootstrap. if repo1.maven.org fails, we try the same china-friendly mirror (currently  http:\\/\\/mirror.netcologne.de\\/maven2 ). We disable fail-on-error, instead sha1-checksum the result at the end to determine real success or not (and if it fails that, prints a message suggesting you manually download it)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13262835\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13262835&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13262835\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262835_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262835_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 18:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T18:32:39+0000\'\u003e26\\/Apr\\/12 18:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI will commit this patch: please let us know if you have more problems from china! \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13262835_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13262835_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/12 18:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-26T18:32:39+0000\'\u003e26\\/Apr\\/12 18:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I will commit this patch: please let us know if you have more problems from china!                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13263302\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13263302&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13263302\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13263302_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13263302_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/12 02:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-27T02:00:58+0000\'\u003e27\\/Apr\\/12 02:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK, and thanks for the new commit!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13263302_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13263302_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/12 02:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-04-27T02:00:58+0000\'\u003e27\\/Apr\\/12 02:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK, and thanks for the new commit!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13265950\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13265950&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13265950\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13265950_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13265950_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/May\\/12 18:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-01T18:12:44+0000\'\u003e01\\/May\\/12 18:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA postings format named VSEncoding also seems promising! \u003c\\/p\u003e\\n\\n\u003cp\u003eIt is available here: \u003ca href=\\\"http:\\/\\/integerencoding.isti.cnr.it\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/integerencoding.isti.cnr.it\\/\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd license compatible: \u003ca href=\\\"https:\\/\\/github.com\\/maropu\\/integer_encoding_library\\/blob\\/master\\/LICENSE\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/maropu\\/integer_encoding_library\\/blob\\/master\\/LICENSE\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13265950_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13265950_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/May\\/12 18:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-01T18:12:44+0000\'\u003e01\\/May\\/12 18:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    A postings format named VSEncoding also seems promising!  \\n\\n It is available here:  http:\\/\\/integerencoding.isti.cnr.it\\/  \\n\\n And license compatible:  https:\\/\\/github.com\\/maropu\\/integer_encoding_library\\/blob\\/master\\/LICENSE               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13287876\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13287876&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13287876\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13287876_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13287876_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/12 09:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-02T09:30:39+0000\'\u003e02\\/Jun\\/12 09:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is a initial implementation of PForPostingsFormat. It is registered in oal.codecs.mockrandom.MockRandomPostingsFormat, and all tests have passed (Maybe I should modify some other mock files as well?).\u003c\\/p\u003e\\n\\n\u003cp\u003eThis version is orginally inspired by the pfor and pfor2 impls in bulk_branch, mostly by the idea of pfor. Currently, the compressed data consists of three parts: header, normal area, and excpetion area. The normal area encodes each small  value as b bits, as well as exception values. The exception area stores each large value directly, possibly as 8,16,or 32 bits. NumFrameBits range from 1-32 are all supported.\u003c\\/p\u003e\\n\\n\u003cp\u003eI haven\'t test the performance, but there are some known bottlenecks: For example, data = \u003c\\/p\u003e\\n{0, 0xffffffff, 0, 1, 0, 1, 0}\\n\u003cp\u003e, numFrameBits=1, then the following \'1\'s will be forced as exceptions, which will dramatically increase compressed size.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13287876_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13287876_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/12 09:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-02T09:30:39+0000\'\u003e02\\/Jun\\/12 09:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is a initial implementation of PForPostingsFormat. It is registered in oal.codecs.mockrandom.MockRandomPostingsFormat, and all tests have passed (Maybe I should modify some other mock files as well?). \\n\\n This version is orginally inspired by the pfor and pfor2 impls in bulk_branch, mostly by the idea of pfor. Currently, the compressed data consists of three parts: header, normal area, and excpetion area. The normal area encodes each small  value as b bits, as well as exception values. The exception area stores each large value directly, possibly as 8,16,or 32 bits. NumFrameBits range from 1-32 are all supported. \\n\\n I haven\'t test the performance, but there are some known bottlenecks: For example, data =  \\n{0, 0xffffffff, 0, 1, 0, 1, 0}\\n , numFrameBits=1, then the following \'1\'s will be forced as exceptions, which will dramatically increase compressed size.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13287936\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13287936&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13287936\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13287936_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13287936_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/12 13:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-02T13:30:19+0000\'\u003e02\\/Jun\\/12 13:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAwesome progress!  Nice to have a dirt path online that we can then\u003cbr\\/\u003e\\niterate from ...\u003c\\/p\u003e\\n\\n\u003cp\u003eHmm, I\'m seeing some test failures when I run:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eant test -Dtests.postingsformat=PFor\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003eEg, TestNRTThreads, TestShardSearching, TestTimeLimitingCollector.\u003c\\/p\u003e\\n\\n\u003cp\u003eRemember to add the standard copyright headers to each new source\u003cbr\\/\u003e\\nfile...\u003c\\/p\u003e\\n\\n\u003cp\u003eWe don\'t have to do this now, but I wonder if we can share code w\\/ the\u003cbr\\/\u003e\\npacked ints impl we have, instead generating another one with the .py\u003cbr\\/\u003e\\nsource.\u003c\\/p\u003e\\n\\n\u003cp\u003eTestDemo makes a nice TestMin... I usually start with TestDemo when\u003cbr\\/\u003e\\ntesting scary new code, and then it\'s a huge milestone once TestDemo\u003cbr\\/\u003e\\npasses \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eWe should definitely cutover to BlockTree terms dict (I would upgrade\u003cbr\\/\u003e\\nthat TODO to a nocommit!).\u003c\\/p\u003e\\n\\n\u003cp\u003eI suspect that wrapping the blocks byte[] as ByteBuffer and then\u003cbr\\/\u003e\\nIntBuffer is going to be too costly per decode so we should init them\u003cbr\\/\u003e\\nonce and re-use (upgrade that TODO to a nocommit).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13287936_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13287936_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/12 13:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-02T13:30:19+0000\'\u003e02\\/Jun\\/12 13:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Awesome progress!  Nice to have a dirt path online that we can then \\niterate from ... \\n\\n Hmm, I\'m seeing some test failures when I run: \\n  \\n ant test -Dtests.postingsformat=PFor\\n \\n  \\n Eg, TestNRTThreads, TestShardSearching, TestTimeLimitingCollector. \\n\\n Remember to add the standard copyright headers to each new source \\nfile... \\n\\n We don\'t have to do this now, but I wonder if we can share code w\\/ the \\npacked ints impl we have, instead generating another one with the .py \\nsource. \\n\\n TestDemo makes a nice TestMin... I usually start with TestDemo when \\ntesting scary new code, and then it\'s a huge milestone once TestDemo \\npasses   \\n\\n We should definitely cutover to BlockTree terms dict (I would upgrade \\nthat TODO to a nocommit!). \\n\\n I suspect that wrapping the blocks byte[] as ByteBuffer and then \\nIntBuffer is going to be too costly per decode so we should init them \\nonce and re-use (upgrade that TODO to a nocommit).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13287951\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13287951&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13287951\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13287951_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13287951_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/12 14:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-02T14:20:50+0000\'\u003e02\\/Jun\\/12 14:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAh, yes, I forgot to use -Dtests.postingsformat...I can see the errors\u003cbr\\/\u003e\\nnow.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eTestDemo makes a nice TestMin... I usually start with TestDemo when\u003cbr\\/\u003e\\ntesting scary new code, and then it\'s a huge milestone once TestDemo\u003cbr\\/\u003e\\npasses \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eHmm, that means I should remove TestMin.java? This testcase works fine\u003cbr\\/\u003e\\nfor the patch.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eWe should definitely cutover to BlockTree terms dict (I would upgrade\u003cbr\\/\u003e\\nthat TODO to a nocommit!).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI\'m not quite familiar with these sign stuff, shall I change all the \u003cbr\\/\u003e\\n\\\"TODO\\\" sign into \\\"nocommit\\\"? Are the signs related to documentation, \u003cbr\\/\u003e\\nor just marked to remember not to commit current codes?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13287951_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13287951_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/12 14:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-02T14:20:50+0000\'\u003e02\\/Jun\\/12 14:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ah, yes, I forgot to use -Dtests.postingsformat...I can see the errors \\nnow. \\n\\n \\n TestDemo makes a nice TestMin... I usually start with TestDemo when \\ntesting scary new code, and then it\'s a huge milestone once TestDemo \\npasses   \\n Hmm, that means I should remove TestMin.java? This testcase works fine \\nfor the patch. \\n\\n \\n We should definitely cutover to BlockTree terms dict (I would upgrade \\nthat TODO to a nocommit!).  \\n I\'m not quite familiar with these sign stuff, shall I change all the  \\n\\\"TODO\\\" sign into \\\"nocommit\\\"? Are the signs related to documentation,  \\nor just marked to remember not to commit current codes?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13287952\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13287952&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13287952\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13287952_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13287952_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/12 14:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-02T14:41:13+0000\'\u003e02\\/Jun\\/12 14:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eHmm, that means I should remove TestMin.java? This testcase works fine for the patch.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOh it\'s fine to keep TestMin now that you wrote it ... I was just saying that TestDemo is the test I run when I want the most trivial test for a new big change.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eI\'m not quite familiar with these sign stuff, shall I change all the \u003cbr\\/\u003e\\n \\\"TODO\\\" sign into \\\"nocommit\\\"? Are the signs related to documentation, \u003cbr\\/\u003e\\n or just marked to remember not to commit current codes?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eSorry - this is just a convention I use: I put a \\/\\/ nocommit comment whenever there\'s a \\\"blocker\\\" to committing; this way I can grep for nocommit to see what still needs fixing... and towards the end, nocommits will often be downgraded to TODOs since on closer inspection they really don\'t have to block committing...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13287952_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13287952_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/12 14:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-02T14:41:13+0000\'\u003e02\\/Jun\\/12 14:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Hmm, that means I should remove TestMin.java? This testcase works fine for the patch.  \\n\\n Oh it\'s fine to keep TestMin now that you wrote it ... I was just saying that TestDemo is the test I run when I want the most trivial test for a new big change. \\n\\n \\n I\'m not quite familiar with these sign stuff, shall I change all the  \\n \\\"TODO\\\" sign into \\\"nocommit\\\"? Are the signs related to documentation,  \\n or just marked to remember not to commit current codes?  \\n\\n Sorry - this is just a convention I use: I put a \\/\\/ nocommit comment whenever there\'s a \\\"blocker\\\" to committing; this way I can grep for nocommit to see what still needs fixing... and towards the end, nocommits will often be downgraded to TODOs since on closer inspection they really don\'t have to block committing...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13288232\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13288232&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13288232\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13288232_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13288232_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jun\\/12 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-03T18:40:29+0000\'\u003e03\\/Jun\\/12 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAh, just cannot wait for a performance optimization!\u003c\\/p\u003e\\n\\n\u003cp\u003eThis version should now pass all tests below: \u003c\\/p\u003e\\n\\n\u003cp\u003eant test-core -Dtests.postingsformat=PFor\u003c\\/p\u003e\\n\\n\u003cp\u003eIt fixes: 1) trailing forced exceptions will be ignored and encoded as normal value; 2) IntBuffer is maintained at IndexInput\\/Output level; 3) Former nocommit issues such as BlockTreeTerms* and code licence.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch also contains a minimal change with the help of Robert\'s patch: \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/attachment\\/12530685\\/LUCENE-4102.patch\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/issues.apache.org\\/jira\\/secure\\/attachment\\/12530685\\/LUCENE-4102.patch\u003c\\/a\u003e. Hope Dawid will commit the complete version into trunk soon!\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll try to optimize these codes later.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13288232_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13288232_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jun\\/12 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-03T18:40:29+0000\'\u003e03\\/Jun\\/12 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ah, just cannot wait for a performance optimization! \\n\\n This version should now pass all tests below:  \\n\\n ant test-core -Dtests.postingsformat=PFor \\n\\n It fixes: 1) trailing forced exceptions will be ignored and encoded as normal value; 2) IntBuffer is maintained at IndexInput\\/Output level; 3) Former nocommit issues such as BlockTreeTerms* and code licence. \\n\\n The patch also contains a minimal change with the help of Robert\'s patch:  https:\\/\\/issues.apache.org\\/jira\\/secure\\/attachment\\/12530685\\/LUCENE-4102.patch . Hope Dawid will commit the complete version into trunk soon! \\n\\n I\'ll try to optimize these codes later.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13288675\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13288675&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13288675\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13288675_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13288675_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jun\\/12 17:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-04T17:00:42+0000\'\u003e04\\/Jun\\/12 17:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eExcellent!  All tests also pass for me w\\/ PFor postings format as\u003cbr\\/\u003e\\nwell... this is a great starting point \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e One Solr test failed\u003cbr\\/\u003e\\n(ContentStreamTest)... but I think it was false failure...\u003c\\/p\u003e\\n\\n\u003cp\u003eI did notice the tests seem to run slower, especially certain ones eg\u003cbr\\/\u003e\\nTestJoinUtil.\u003c\\/p\u003e\\n\\n\u003cp\u003eStill missing a couple license headers (TestMin, TestCompress)...\u003c\\/p\u003e\\n\\n\u003cp\u003eI ran a quick perf test using\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/code.google.com\\/a\\/apache-extras.org\\/p\\/luceneutil\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/code.google.com\\/a\\/apache-extras.org\\/p\\/luceneutil\u003c\\/a\u003e on a 10M doc\u003cbr\\/\u003e\\nWikipedia index.\u003c\\/p\u003e\\n\\n\u003cp\u003eIndexing time is ~18% slower than Lucene40PostingsFormat (1071 sec vs\u003cbr\\/\u003e\\n1261 sec).\u003c\\/p\u003e\\n\\n\u003cp\u003eBut more important is the slower search times:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS pfor StdDev pfor      Pct diff\\n              Phrase        8.52        0.50        4.43        0.40  -55% -  -39%\\n        SloppyPhrase       12.52        0.39        7.87        0.51  -43% -  -30%\\n          AndHighMed       67.69        2.82       44.22        1.47  -39% -  -29%\\n            SpanNear        5.19        0.12        3.90        0.28  -31% -  -17%\\n            PKLookup      112.16        1.71       95.61        1.30  -17% -  -12%\\n         AndHighHigh       13.22        0.34       11.86        0.72  -17% -   -2%\\n            Wildcard       46.04        0.37       41.68        4.45  -19% -    1%\\n              Fuzzy1       50.11        2.03       48.06        1.91  -11% -    3%\\n           OrHighMed        9.26        0.48        8.90        0.37  -12% -    5%\\n          OrHighHigh       12.28        0.56       11.83        0.49  -11% -    5%\\n      TermBGroup1M1P       40.47        1.94       39.88        2.51  -11% -   10%\\n              Fuzzy2       53.71        2.66       53.01        2.08   -9% -    7%\\n         TermGroup1M       36.46        1.21       35.99        1.58   -8% -    6%\\n        TermBGroup1M       55.53        1.99       55.26        2.68   -8% -    8%\\n             Respell       69.71        4.49       69.73        2.07   -8% -   10%\\n                Term       94.38        7.62       94.96       12.19  -18% -   23%\\n             Prefix3       41.63        0.34       42.21        5.82  -13% -   16%\\n              IntNRQ        7.08        0.15        7.28        1.29  -17% -   23%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThe queries that do skipping are quite a bit slower; this makes sense,\u003cbr\\/\u003e\\nsince on skip we do a full block decode.  A smaller block size (we use\u003cbr\\/\u003e\\n128 now right?) should help I think.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s strange that the non-skipping queries (Term, OrHighMed,\u003cbr\\/\u003e\\nOrHighHigh) don\'t show any performance gain ... maybe we need to\u003cbr\\/\u003e\\noptimize the decode... or it could be the removal of the bulk api\u003cbr\\/\u003e\\nis hurting us here.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m also curious if we tried a pure FOR (no patching, so we must set\u003cbr\\/\u003e\\nnumBits according to the max value = larger index but hopefully faster\u003cbr\\/\u003e\\ndecode) if the results would improve...\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13288675_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13288675_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jun\\/12 17:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-04T17:00:42+0000\'\u003e04\\/Jun\\/12 17:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Excellent!  All tests also pass for me w\\/ PFor postings format as \\nwell... this is a great starting point   One Solr test failed \\n(ContentStreamTest)... but I think it was false failure... \\n\\n I did notice the tests seem to run slower, especially certain ones eg \\nTestJoinUtil. \\n\\n Still missing a couple license headers (TestMin, TestCompress)... \\n\\n I ran a quick perf test using \\n http:\\/\\/code.google.com\\/a\\/apache-extras.org\\/p\\/luceneutil  on a 10M doc \\nWikipedia index. \\n\\n Indexing time is ~18% slower than Lucene40PostingsFormat (1071 sec vs \\n1261 sec). \\n\\n But more important is the slower search times: \\n\\n  \\n                 Task    QPS base StdDev base    QPS pfor StdDev pfor      Pct diff\\n              Phrase        8.52        0.50        4.43        0.40  -55% -  -39%\\n        SloppyPhrase       12.52        0.39        7.87        0.51  -43% -  -30%\\n          AndHighMed       67.69        2.82       44.22        1.47  -39% -  -29%\\n            SpanNear        5.19        0.12        3.90        0.28  -31% -  -17%\\n            PKLookup      112.16        1.71       95.61        1.30  -17% -  -12%\\n         AndHighHigh       13.22        0.34       11.86        0.72  -17% -   -2%\\n            Wildcard       46.04        0.37       41.68        4.45  -19% -    1%\\n              Fuzzy1       50.11        2.03       48.06        1.91  -11% -    3%\\n           OrHighMed        9.26        0.48        8.90        0.37  -12% -    5%\\n          OrHighHigh       12.28        0.56       11.83        0.49  -11% -    5%\\n      TermBGroup1M1P       40.47        1.94       39.88        2.51  -11% -   10%\\n              Fuzzy2       53.71        2.66       53.01        2.08   -9% -    7%\\n         TermGroup1M       36.46        1.21       35.99        1.58   -8% -    6%\\n        TermBGroup1M       55.53        1.99       55.26        2.68   -8% -    8%\\n             Respell       69.71        4.49       69.73        2.07   -8% -   10%\\n                Term       94.38        7.62       94.96       12.19  -18% -   23%\\n             Prefix3       41.63        0.34       42.21        5.82  -13% -   16%\\n              IntNRQ        7.08        0.15        7.28        1.29  -17% -   23%\\n \\n  \\n\\n The queries that do skipping are quite a bit slower; this makes sense, \\nsince on skip we do a full block decode.  A smaller block size (we use \\n128 now right?) should help I think. \\n\\n It\'s strange that the non-skipping queries (Term, OrHighMed, \\nOrHighHigh) don\'t show any performance gain ... maybe we need to \\noptimize the decode... or it could be the removal of the bulk api \\nis hurting us here. \\n\\n I\'m also curious if we tried a pure FOR (no patching, so we must set \\nnumBits according to the max value = larger index but hopefully faster \\ndecode) if the results would improve... \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13289104\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13289104&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13289104\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13289104_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13289104_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jun\\/12 03:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-05T03:00:08+0000\'\u003e05\\/Jun\\/12 03:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mike, we have so much details to help optimize!\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eStill missing a couple license headers (TestMin, TestCompress)...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eOk, I\'ll add them later.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI ran a quick perf test using \u003ca href=\\\"http:\\/\\/code.google.com\\/a\\/apache-extras.org\\/p\\/luceneutil\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/code.google.com\\/a\\/apache-extras.org\\/p\\/luceneutil\u003c\\/a\u003e on a 10M doc Wikipedia index.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eThe script is wonderful! But the wiki data is missing? Can I get it from a wiki dump instead?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eIndexing time is ~18% slower than Lucene40PostingsFormat (1071 sec vs 1261 sec).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eYes, it is expected, actually it scans every block 33 times to estimate metadata such as numFrameBits and numExceptions.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13289104_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13289104_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jun\\/12 03:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-05T03:00:08+0000\'\u003e05\\/Jun\\/12 03:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mike, we have so much details to help optimize! \\n\\n  Still missing a couple license headers (TestMin, TestCompress)...  \\n Ok, I\'ll add them later. \\n\\n  I ran a quick perf test using  http:\\/\\/code.google.com\\/a\\/apache-extras.org\\/p\\/luceneutil  on a 10M doc Wikipedia index.  \\n The script is wonderful! But the wiki data is missing? Can I get it from a wiki dump instead? \\n\\n  Indexing time is ~18% slower than Lucene40PostingsFormat (1071 sec vs 1261 sec).  \\n Yes, it is expected, actually it scans every block 33 times to estimate metadata such as numFrameBits and numExceptions.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13289296\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13289296&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13289296\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13289296_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13289296_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jun\\/12 10:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-05T10:05:10+0000\'\u003e05\\/Jun\\/12 10:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Billy,\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eCan I get it from a wiki dump instead?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYou can download it at \u003ca href=\\\"http:\\/\\/people.apache.org\\/~mikemccand\\/enwiki-20120502-lines-1k.txt.lzma\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/people.apache.org\\/~mikemccand\\/enwiki-20120502-lines-1k.txt.lzma\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThat\'s ~6.3 GB (compressed) and 28.7 GB (decompressed); it\'s the 2012\\/05\\/02 Wikipedia en export, filtered to plain text and then broken into 33.3 M ~1 KB sized docs.  I can help you get the luceneutil env set up...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003eIndexing time is ~18% slower than Lucene40PostingsFormat (1071 sec vs 1261 sec).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYes, it is expected, actually it scans every block 33 times to estimate metadata such as numFrameBits and numExceptions.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOK, in that case I\'m surprised it\'s only ~18% slower!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13289296_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13289296_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jun\\/12 10:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-05T10:05:10+0000\'\u003e05\\/Jun\\/12 10:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Billy, \\n\\n  Can I get it from a wiki dump instead?  \\n\\n You can download it at  http:\\/\\/people.apache.org\\/~mikemccand\\/enwiki-20120502-lines-1k.txt.lzma  \\n\\n That\'s ~6.3 GB (compressed) and 28.7 GB (decompressed); it\'s the 2012\\/05\\/02 Wikipedia en export, filtered to plain text and then broken into 33.3 M ~1 KB sized docs.  I can help you get the luceneutil env set up... \\n\\n \\n  Indexing time is ~18% slower than Lucene40PostingsFormat (1071 sec vs 1261 sec).  \\n\\n Yes, it is expected, actually it scans every block 33 times to estimate metadata such as numFrameBits and numExceptions.  \\n\\n OK, in that case I\'m surprised it\'s only ~18% slower!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13291850\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13291850&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13291850\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13291850_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13291850_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jun\\/12 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-08T16:32:41+0000\'\u003e08\\/Jun\\/12 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK, here is a result I tried to reproduce with Mike\'s test script:\u003cbr\\/\u003e\\nIndexing time:\u003cbr\\/\u003e\\n    trunk: 2396 sec\u003cbr\\/\u003e\\n    patch: 2793 sec\u003c\\/p\u003e\\n\\n\u003cp\u003eSearching time:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e          TaskQPS Lucene40StdDev Lucene40    QPS PFor StdDev PFor      Pct diff\\n          AndHighMed       22.76        0.54       14.68        1.00  -41% -  -29%\\n        SloppyPhrase        3.58        0.17        2.46        0.27  -41% -  -19%\\n            SpanNear        5.90        0.09        4.08        0.37  -38% -  -23%\\n         AndHighHigh       10.00        0.17        8.08        0.57  -26% -  -11%\\n              Phrase        1.68        0.07        1.45        0.17  -27% -    0%\\n             Respell       37.65        0.74       33.41        1.04  -15% -   -6%\\n              Fuzzy1       38.00        1.60       34.37        1.06  -15% -   -2%\\n              IntNRQ        4.27        0.33        3.87        0.19  -19% -    3%\\n              Fuzzy2       16.35        0.60       15.02        0.31  -13% -   -2%\\n            Wildcard       30.24        0.57       28.24        1.85  -14% -    1%\\n            PKLookup       85.82        5.04       83.25        2.81  -11% -    6%\\n             Prefix3       19.20        0.40       19.19        1.46   -9% -    9%\\n           OrHighMed        9.25        0.59        9.41        0.70  -11% -   16%\\n         TermGroup1M       11.46        0.62       11.74        0.81   -9% -   15%\\n          OrHighHigh        3.15        0.17        3.28        0.23   -8% -   17%\\n      TermBGroup1M1P       19.28        0.38       20.32        1.14   -2% -   13%\\n        TermBGroup1M        6.23        0.21        6.71        0.46   -3% -   19%\\n                Term       30.86        1.52       34.34        3.26   -4% -   28%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eIt is done on a 64bit AMD server with Java 1.7.0.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13291850_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13291850_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jun\\/12 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-08T16:32:41+0000\'\u003e08\\/Jun\\/12 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK, here is a result I tried to reproduce with Mike\'s test script: \\nIndexing time: \\n    trunk: 2396 sec \\n    patch: 2793 sec \\n\\n Searching time: \\n  \\n           TaskQPS Lucene40StdDev Lucene40    QPS PFor StdDev PFor      Pct diff\\n          AndHighMed       22.76        0.54       14.68        1.00  -41% -  -29%\\n        SloppyPhrase        3.58        0.17        2.46        0.27  -41% -  -19%\\n            SpanNear        5.90        0.09        4.08        0.37  -38% -  -23%\\n         AndHighHigh       10.00        0.17        8.08        0.57  -26% -  -11%\\n              Phrase        1.68        0.07        1.45        0.17  -27% -    0%\\n             Respell       37.65        0.74       33.41        1.04  -15% -   -6%\\n              Fuzzy1       38.00        1.60       34.37        1.06  -15% -   -2%\\n              IntNRQ        4.27        0.33        3.87        0.19  -19% -    3%\\n              Fuzzy2       16.35        0.60       15.02        0.31  -13% -   -2%\\n            Wildcard       30.24        0.57       28.24        1.85  -14% -    1%\\n            PKLookup       85.82        5.04       83.25        2.81  -11% -    6%\\n             Prefix3       19.20        0.40       19.19        1.46   -9% -    9%\\n           OrHighMed        9.25        0.59        9.41        0.70  -11% -   16%\\n         TermGroup1M       11.46        0.62       11.74        0.81   -9% -   15%\\n          OrHighHigh        3.15        0.17        3.28        0.23   -8% -   17%\\n      TermBGroup1M1P       19.28        0.38       20.32        1.14   -2% -   13%\\n        TermBGroup1M        6.23        0.21        6.71        0.46   -3% -   19%\\n                Term       30.86        1.52       34.34        3.26   -4% -   28%\\n \\n  \\n\\n It is done on a 64bit AMD server with Java 1.7.0.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13395884\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13395884&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13395884\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13395884_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13395884_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/12 13:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-18T13:41:48+0000\'\u003e18\\/Jun\\/12 13:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe new \\\"3892_pfor\\\" patch fixed some \\\"SuppressingCodec\\\" stuff since last two weeks. And the \\\"3892_for\\\" lazily implements \\\"For\\\" postingsformat based on current codes. These two patches are temporary separated, in order to prevent performance reduction for the sake of method overriding.\u003c\\/p\u003e\\n\\n\u003cp\u003eCurrently, blocksize ranges from 32 to 128 are tested on both two patches. However, for those skipping-intensive queries, there is no significant performance gain when smaller blocksize was applied. \u003c\\/p\u003e\\n\\n\u003cp\u003eHere is a previous result for PFor, with blockSize=64, comparing with 128(in brackets):\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS Base StdDev Base    QPS PFor StdDev PFor      Pct diff\\n              Phrase        4.93        0.36        3.10        0.33  -47% -  -25%  (-47% -  -25%)\\n          AndHighMed       27.92        2.26       19.16        1.72  -42% -  -18%  (-37% -  -15%)\\n            SpanNear        2.73        0.16        1.96        0.24  -40% -  -14%  (-36% -  -13%)\\n        SloppyPhrase        4.19        0.21        3.20        0.30  -34% -  -12%  (-30% -   -6%)\\n            Wildcard       19.44        0.87       17.11        0.94  -20% -   -2%  (-17% -    3%)\\n         AndHighHigh        7.50        0.38        6.61        0.59  -23% -    1%  (-19% -    6%)\\n              IntNRQ        4.06        0.52        3.88        0.35  -22% -   19%  (-16% -   24%)\\n             Prefix3       31.00        1.69       30.45        2.29  -13% -   11%  ( -6% -   20%)\\n          OrHighHigh        4.16        0.47        4.11        0.34  -18% -   20%  (-14% -   27%)\\n           OrHighMed        4.98        0.59        4.94        0.41  -18% -   22%  (-14% -   27%)\\n             Respell       40.29        2.11       40.11        2.13  -10% -   10%  (-15% -    2%)\\n        TermBGroup1M       20.50        0.32       20.52        0.80   -5% -    5%  (  1% -   10%)\\n         TermGroup1M       13.51        0.43       13.61        0.40   -5% -    7%  (  1% -    9%)\\n              Fuzzy1       43.20        1.83       44.02        1.95   -6% -   11%  (-11% -    1%)\\n            PKLookup       87.16        1.78       89.52        0.94    0% -    5%  ( -2% -    7%)\\n              Fuzzy2       16.09        0.80       16.54        0.77   -6% -   13%  (-11% -    6%)\\n                Term       43.56        1.53       45.26        3.84   -8% -   16%  (  2% -   26%)\\n      TermBGroup1M1P       21.33        0.64       22.24        1.23   -4% -   13%  (  0% -   14%) \\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eAlso, the For postingsformat shows few performance change. So I suppose the bottleneck isn\'t in this method: PForUtil.patchException.\u003cbr\\/\u003e\\nHere is an example with blockSize=64:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n              Phrase        5.03        0.45        3.30        0.43  -47% -  -18%\\n          AndHighMed       28.05        2.33       18.83        1.77  -43% -  -19%\\n            SpanNear        2.69        0.18        1.94        0.25  -40% -  -12%\\n        SloppyPhrase        4.19        0.20        3.22        0.35  -34% -  -10%\\n         AndHighHigh        7.61        0.46        6.41        0.54  -27% -   -2%\\n             Respell       41.36        1.65       37.94        2.42  -17% -    1%\\n            Wildcard       19.20        0.77       17.89        0.99  -15% -    2%\\n          OrHighHigh        4.22        0.37        3.94        0.32  -21% -   10%\\n           OrHighMed        5.06        0.46        4.73        0.39  -21% -   11%\\n              Fuzzy1       44.15        1.31       42.38        1.74  -10% -    2%\\n              Fuzzy2       16.48        0.59       15.84        0.76  -11% -    4%\\n         TermGroup1M       13.32        0.35       13.44        0.53   -5% -    7%\\n            PKLookup       87.70        1.81       88.62        1.22   -2% -    4%\\n        TermBGroup1M       20.14        0.47       20.40        0.59   -3% -    6%\\n             Prefix3       30.31        1.49       31.08        2.26   -9% -   15%\\n      TermBGroup1M1P       21.13        0.46       21.79        1.42   -5% -   12%\\n              IntNRQ        3.96        0.45        4.14        0.46  -16% -   31%\\n                Term       43.07        1.51       46.06        4.50   -6% -   21%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13395884_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13395884_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/12 13:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-18T13:41:48+0000\'\u003e18\\/Jun\\/12 13:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The new \\\"3892_pfor\\\" patch fixed some \\\"SuppressingCodec\\\" stuff since last two weeks. And the \\\"3892_for\\\" lazily implements \\\"For\\\" postingsformat based on current codes. These two patches are temporary separated, in order to prevent performance reduction for the sake of method overriding. \\n\\n Currently, blocksize ranges from 32 to 128 are tested on both two patches. However, for those skipping-intensive queries, there is no significant performance gain when smaller blocksize was applied.  \\n\\n Here is a previous result for PFor, with blockSize=64, comparing with 128(in brackets): \\n  \\n                 Task    QPS Base StdDev Base    QPS PFor StdDev PFor      Pct diff\\n              Phrase        4.93        0.36        3.10        0.33  -47% -  -25%  (-47% -  -25%)\\n          AndHighMed       27.92        2.26       19.16        1.72  -42% -  -18%  (-37% -  -15%)\\n            SpanNear        2.73        0.16        1.96        0.24  -40% -  -14%  (-36% -  -13%)\\n        SloppyPhrase        4.19        0.21        3.20        0.30  -34% -  -12%  (-30% -   -6%)\\n            Wildcard       19.44        0.87       17.11        0.94  -20% -   -2%  (-17% -    3%)\\n         AndHighHigh        7.50        0.38        6.61        0.59  -23% -    1%  (-19% -    6%)\\n              IntNRQ        4.06        0.52        3.88        0.35  -22% -   19%  (-16% -   24%)\\n             Prefix3       31.00        1.69       30.45        2.29  -13% -   11%  ( -6% -   20%)\\n          OrHighHigh        4.16        0.47        4.11        0.34  -18% -   20%  (-14% -   27%)\\n           OrHighMed        4.98        0.59        4.94        0.41  -18% -   22%  (-14% -   27%)\\n             Respell       40.29        2.11       40.11        2.13  -10% -   10%  (-15% -    2%)\\n        TermBGroup1M       20.50        0.32       20.52        0.80   -5% -    5%  (  1% -   10%)\\n         TermGroup1M       13.51        0.43       13.61        0.40   -5% -    7%  (  1% -    9%)\\n              Fuzzy1       43.20        1.83       44.02        1.95   -6% -   11%  (-11% -    1%)\\n            PKLookup       87.16        1.78       89.52        0.94    0% -    5%  ( -2% -    7%)\\n              Fuzzy2       16.09        0.80       16.54        0.77   -6% -   13%  (-11% -    6%)\\n                Term       43.56        1.53       45.26        3.84   -8% -   16%  (  2% -   26%)\\n      TermBGroup1M1P       21.33        0.64       22.24        1.23   -4% -   13%  (  0% -   14%) \\n \\n  \\n\\n Also, the For postingsformat shows few performance change. So I suppose the bottleneck isn\'t in this method: PForUtil.patchException. \\nHere is an example with blockSize=64: \\n  \\n                 Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n              Phrase        5.03        0.45        3.30        0.43  -47% -  -18%\\n          AndHighMed       28.05        2.33       18.83        1.77  -43% -  -19%\\n            SpanNear        2.69        0.18        1.94        0.25  -40% -  -12%\\n        SloppyPhrase        4.19        0.20        3.22        0.35  -34% -  -10%\\n         AndHighHigh        7.61        0.46        6.41        0.54  -27% -   -2%\\n             Respell       41.36        1.65       37.94        2.42  -17% -    1%\\n            Wildcard       19.20        0.77       17.89        0.99  -15% -    2%\\n          OrHighHigh        4.22        0.37        3.94        0.32  -21% -   10%\\n           OrHighMed        5.06        0.46        4.73        0.39  -21% -   11%\\n              Fuzzy1       44.15        1.31       42.38        1.74  -10% -    2%\\n              Fuzzy2       16.48        0.59       15.84        0.76  -11% -    4%\\n         TermGroup1M       13.32        0.35       13.44        0.53   -5% -    7%\\n            PKLookup       87.70        1.81       88.62        1.22   -2% -    4%\\n        TermBGroup1M       20.14        0.47       20.40        0.59   -3% -    6%\\n             Prefix3       30.31        1.49       31.08        2.26   -9% -   15%\\n      TermBGroup1M1P       21.13        0.46       21.79        1.42   -5% -   12%\\n              IntNRQ        3.96        0.45        4.14        0.46  -16% -   31%\\n                Term       43.07        1.51       46.06        4.50   -6% -   21%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13395894\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13395894&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13395894\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13395894_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13395894_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/12 13:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-18T13:54:15+0000\'\u003e18\\/Jun\\/12 13:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere\'s a potential bottleneck during method calling...Here is an example for PFor, with blocksize=128, exception rate = 97%, normal value &lt;= 2 bits, exception value &lt;= 32 bits:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eDecoding normal values:                              4703 ns\\nPatching exceptions:                                 5797 ns\\nSingle call of PForUtil.decompress totally takes:   58318 ns\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eIn addition, it costs about 4000ns to record the time span.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13395894_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13395894_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/12 13:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-18T13:54:15+0000\'\u003e18\\/Jun\\/12 13:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There\'s a potential bottleneck during method calling...Here is an example for PFor, with blocksize=128, exception rate = 97%, normal value &lt;= 2 bits, exception value &lt;= 32 bits: \\n\\n  \\n Decoding normal values:                              4703 ns\\nPatching exceptions:                                 5797 ns\\nSingle call of PForUtil.decompress totally takes:   58318 ns\\n \\n  \\n\\n In addition, it costs about 4000ns to record the time span.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13396325\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13396325&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13396325\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13396325_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13396325_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/12 22:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-18T22:43:09+0000\'\u003e18\\/Jun\\/12 22:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOn the For patch ... we shouldn\'t encode\\/decode numInts right?  It\'s\u003cbr\\/\u003e\\nalways 128?\u003c\\/p\u003e\\n\\n\u003cp\u003eUp above, in ForFactory, when we readInt() to get numBytes ... it\u003cbr\\/\u003e\\nseems like we could stuff the header numBits into that same int and\u003cbr\\/\u003e\\nsave checking that in FORUtil.decompress....\u003c\\/p\u003e\\n\\n\u003cp\u003eI think there are a few possible ideas to explore to get faster\u003cbr\\/\u003e\\nPFor\\/For performance:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eGet more direct access to the file as an int[]; eg MMapDir could\u003cbr\\/\u003e\\n    expose an IntBuffer from its ByteBuffer (saving the initial copy\u003cbr\\/\u003e\\n    into byte[] that we now do).  Or maybe we add\u003cbr\\/\u003e\\n    IndexInput.readInts(int[]) and dir impl can optimize how that\'s\u003cbr\\/\u003e\\n    done (MMapDir could use Unsafe.copyBytes... except for little\u003cbr\\/\u003e\\n    endian architectures ... we\'d probably have to have separate\u003cbr\\/\u003e\\n    specialized decoder rather than letting Int\\/ByteBuffer do the byte\u003cbr\\/\u003e\\n    swapping).  This would require the whole file stays aligned w\\/ int\u003cbr\\/\u003e\\n    (eg the header must be 0 mod 4).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eCopy\\/share how oal.packed works, i.e. being able to waste a bit to\u003cbr\\/\u003e\\n    have faster decode (eg storing the 7 bit case as byte[], wasting 1\u003cbr\\/\u003e\\n    bit for each value).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eSkipping: can we partially decode a block?  EG if we are skipping\u003cbr\\/\u003e\\n    and we know we only want values after the 80th one, then we\u003cbr\\/\u003e\\n    shouldn\'t decode those first 80...\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eSince doc\\/freq are \\\"aligned\\\", when we store pointers to a given\u003cbr\\/\u003e\\n    spot, eg in the terms dict or in skip data, we should only store\u003cbr\\/\u003e\\n    the offset once (today we store it twice).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eAlternatively, maybe we should only save skip data on doc\\/freq\u003cbr\\/\u003e\\n    block boundaries (prox would still need skip-within-block).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eMaybe we should store doc &amp; frq blocks interleaved in a single\u003cbr\\/\u003e\\n    file (since they are \\\"aligned\\\") and then skip would skip to the\u003cbr\\/\u003e\\n    start of a doc\\/frq block pair.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eOther ideas...?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13396325_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13396325_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jun\\/12 22:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-18T22:43:09+0000\'\u003e18\\/Jun\\/12 22:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    On the For patch ... we shouldn\'t encode\\/decode numInts right?  It\'s \\nalways 128? \\n\\n Up above, in ForFactory, when we readInt() to get numBytes ... it \\nseems like we could stuff the header numBits into that same int and \\nsave checking that in FORUtil.decompress.... \\n\\n I think there are a few possible ideas to explore to get faster \\nPFor\\/For performance: \\n\\n \\n\\t Get more direct access to the file as an int[]; eg MMapDir could \\n    expose an IntBuffer from its ByteBuffer (saving the initial copy \\n    into byte[] that we now do).  Or maybe we add \\n    IndexInput.readInts(int[]) and dir impl can optimize how that\'s \\n    done (MMapDir could use Unsafe.copyBytes... except for little \\n    endian architectures ... we\'d probably have to have separate \\n    specialized decoder rather than letting Int\\/ByteBuffer do the byte \\n    swapping).  This would require the whole file stays aligned w\\/ int \\n    (eg the header must be 0 mod 4). \\n \\n\\n\\n \\n\\t Copy\\/share how oal.packed works, i.e. being able to waste a bit to \\n    have faster decode (eg storing the 7 bit case as byte[], wasting 1 \\n    bit for each value). \\n \\n\\n\\n \\n\\t Skipping: can we partially decode a block?  EG if we are skipping \\n    and we know we only want values after the 80th one, then we \\n    shouldn\'t decode those first 80... \\n \\n\\n\\n \\n\\t Since doc\\/freq are \\\"aligned\\\", when we store pointers to a given \\n    spot, eg in the terms dict or in skip data, we should only store \\n    the offset once (today we store it twice). \\n \\n\\n\\n \\n\\t Alternatively, maybe we should only save skip data on doc\\/freq \\n    block boundaries (prox would still need skip-within-block). \\n \\n\\n\\n \\n\\t Maybe we should store doc &amp; frq blocks interleaved in a single \\n    file (since they are \\\"aligned\\\") and then skip would skip to the \\n    start of a doc\\/frq block pair. \\n \\n\\n\\n Other ideas...?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13396987\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13396987&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13396987\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13396987_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13396987_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jun\\/12 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-19T19:03:01+0000\'\u003e19\\/Jun\\/12 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 08\\/Aug\\/12 03:34\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOh, thank you Mike! I haven\'t thought too much about those skipping policies.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eUp above, in ForFactory, when we readInt() to get numBytes ... it seems like we could stuff the header numBits into that same int and save checking that in FORUtil.decompress....\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eAh, yes, I just forgot to remove the redundant codes. Here is a initial try to remove header and call ForDecompressImpl directly in readBlock():with For, blockSize=128. Data in bracket show prior benchmark.\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n              Phrase        4.99        0.37        3.57        0.26  -38% -  -17% (-44% -  -18%)\\n          AndHighMed       28.91        2.17       22.66        0.82  -29% -  -12% (-38% -   -9%)\\n            SpanNear        2.72        0.14        2.22        0.13  -26% -   -8% (-36% -   -8%)\\n        SloppyPhrase        4.24        0.26        3.70        0.16  -21% -   -3% (-33% -   -6%)\\n             Respell       40.71        2.59       37.66        1.36  -16% -    2% (-18% -    0%)\\n              Fuzzy1       43.22        2.01       40.66        0.32  -10% -    0% (-12% -    0%)\\n              Fuzzy2       16.25        0.90       15.64        0.26  -10% -    3% (-12% -    3%)\\n            Wildcard       19.07        0.86       19.07        0.73   -8% -    8% (-21% -    3%)\\n         AndHighHigh        7.76        0.47        7.77        0.15   -7% -    8% (-21% -   10%)\\n            PKLookup       87.50        4.56       88.51        1.24   -5% -    8% ( -2% -    5%)\\n        TermBGroup1M       20.42        0.87       21.32        0.74   -3% -   12% (  2% -   10%)\\n           OrHighMed        5.33        0.68        5.61        0.14   -9% -   23% (-16% -   25%)\\n          OrHighHigh        4.43        0.53        4.69        0.12   -8% -   23% (-15% -   24%)\\n         TermGroup1M       13.30        0.34       14.31        0.40    2% -   13% (  0% -   13%)\\n      TermBGroup1M1P       20.92        0.59       23.71        0.86    6% -   20% ( -1% -   22%)\\n             Prefix3       30.30        1.41       35.14        1.76    5% -   27% (-14% -   21%)\\n              IntNRQ        3.90        0.54        4.58        0.47   -7% -   50% (-25% -   33%)\\n                Term       42.17        1.55       52.33        2.57   13% -   35% (  1% -   33%)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003e\u003cdel\u003eThe improvement is quite general. However, I still suppose this just benefits from less method calling. I\'m trying to change the PFor codes, and remove those nested call.\u003c\\/del\u003e (this is not actually true, since I was using percentage diff instead of QPS during comparison)\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eGet more direct access to the file as an int[]; ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eOk, this will be considered when the pfor+pulsing is completed. I\'m just curious why we don\'t have readInts in ora.util yet...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eSkipping: can we partially decode a block? ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eThe pfor-opt approach(encode lower bits of exception in normal area, and other bits in exception area)  natually fits \\\"partially decode a block\\\", that\'ll be possible when we optimize skipping queries.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13396987_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13396987_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jun\\/12 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-19T19:03:01+0000\'\u003e19\\/Jun\\/12 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 08\\/Aug\\/12 03:34\\\"\u003eedited\u003c\\/span\u003e                   Oh, thank you Mike! I haven\'t thought too much about those skipping policies. \\n\\n  Up above, in ForFactory, when we readInt() to get numBytes ... it seems like we could stuff the header numBits into that same int and save checking that in FORUtil.decompress....  \\n Ah, yes, I just forgot to remove the redundant codes. Here is a initial try to remove header and call ForDecompressImpl directly in readBlock():with For, blockSize=128. Data in bracket show prior benchmark. \\n  \\n                 Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n              Phrase        4.99        0.37        3.57        0.26  -38% -  -17% (-44% -  -18%)\\n          AndHighMed       28.91        2.17       22.66        0.82  -29% -  -12% (-38% -   -9%)\\n            SpanNear        2.72        0.14        2.22        0.13  -26% -   -8% (-36% -   -8%)\\n        SloppyPhrase        4.24        0.26        3.70        0.16  -21% -   -3% (-33% -   -6%)\\n             Respell       40.71        2.59       37.66        1.36  -16% -    2% (-18% -    0%)\\n              Fuzzy1       43.22        2.01       40.66        0.32  -10% -    0% (-12% -    0%)\\n              Fuzzy2       16.25        0.90       15.64        0.26  -10% -    3% (-12% -    3%)\\n            Wildcard       19.07        0.86       19.07        0.73   -8% -    8% (-21% -    3%)\\n         AndHighHigh        7.76        0.47        7.77        0.15   -7% -    8% (-21% -   10%)\\n            PKLookup       87.50        4.56       88.51        1.24   -5% -    8% ( -2% -    5%)\\n        TermBGroup1M       20.42        0.87       21.32        0.74   -3% -   12% (  2% -   10%)\\n           OrHighMed        5.33        0.68        5.61        0.14   -9% -   23% (-16% -   25%)\\n          OrHighHigh        4.43        0.53        4.69        0.12   -8% -   23% (-15% -   24%)\\n         TermGroup1M       13.30        0.34       14.31        0.40    2% -   13% (  0% -   13%)\\n      TermBGroup1M1P       20.92        0.59       23.71        0.86    6% -   20% ( -1% -   22%)\\n             Prefix3       30.30        1.41       35.14        1.76    5% -   27% (-14% -   21%)\\n              IntNRQ        3.90        0.54        4.58        0.47   -7% -   50% (-25% -   33%)\\n                Term       42.17        1.55       52.33        2.57   13% -   35% (  1% -   33%)\\n \\n  \\n  The improvement is quite general. However, I still suppose this just benefits from less method calling. I\'m trying to change the PFor codes, and remove those nested call.  (this is not actually true, since I was using percentage diff instead of QPS during comparison) \\n\\n  Get more direct access to the file as an int[]; ...  \\n Ok, this will be considered when the pfor+pulsing is completed. I\'m just curious why we don\'t have readInts in ora.util yet... \\n\\n  Skipping: can we partially decode a block? ...  \\n The pfor-opt approach(encode lower bits of exception in normal area, and other bits in exception area)  natually fits \\\"partially decode a block\\\", that\'ll be possible when we optimize skipping queries.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13397228\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13397228&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13397228\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13397228_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397228_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 03:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T03:16:52+0000\'\u003e20\\/Jun\\/12 03:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 08\\/Aug\\/12 03:35\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnd result for PFor(blocksize=128):\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS Base StdDev Base    QPS PFor StdDev PFor      Pct diff\\n              Phrase        4.87        0.36        3.39        0.18  -38% -  -20% (-47% -  -25%)\\n          AndHighMed       27.78        2.35       21.13        0.52  -31% -  -14% (-37% -  -15%)\\n            SpanNear        2.70        0.14        2.20        0.11  -26% -   -9% (-36% -  -13%)\\n        SloppyPhrase        4.17        0.15        3.77        0.21  -17% -    0% (-30% -   -6%)\\n             Respell       39.97        1.56       37.65        1.95  -14% -    3% (-15% -    2%)\\n            Wildcard       19.08        0.77       18.33        0.92  -12% -    5% (-17% -    3%)\\n              Fuzzy1       42.29        1.13       40.78        1.44   -9% -    2% (-11% -    1%)\\n         AndHighHigh        7.61        0.55        7.45        0.08   -9% -    6% (-19% -    6%)\\n              Fuzzy2       15.79        0.55       15.64        0.70   -8% -    7% (-11% -    6%)\\n            PKLookup       86.71        2.13       88.92        2.24   -2% -    7% ( -2% -    7%)\\n         TermGroup1M       13.04        0.23       14.03        0.40    2% -   12% (  1% -    9%)\\n              IntNRQ        3.97        0.48        4.35        0.61  -15% -   41% (-16% -   24%)\\n      TermBGroup1M1P       21.04        0.35       23.20        0.60    5% -   14% (  0% -   14%)\\n        TermBGroup1M       19.27        0.47       21.28        0.84    3% -   17% (  1% -   10%)\\n          OrHighHigh        4.13        0.47        4.63        0.27   -5% -   34% (-14% -   27%)\\n           OrHighMed        4.95        0.59        5.58        0.34   -5% -   35% (-14% -   27%)\\n             Prefix3       30.33        1.36       34.26        2.14    1% -   25% ( -6% -   20%)\\n                Term       41.99        1.19       50.75        1.72   13% -   28% (  2% -   26%)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003e\u003cdel\u003eIt works, and it is quite interesting that StdDev for Term query is reduced significantly.\u003c\\/del\u003e (same as last comment, when comparing two versions directly(method call vs. unfolded, the improvement is somewhat noisy))\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13397228_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397228_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 03:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T03:16:52+0000\'\u003e20\\/Jun\\/12 03:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 08\\/Aug\\/12 03:35\\\"\u003eedited\u003c\\/span\u003e                   And result for PFor(blocksize=128): \\n  \\n                 Task    QPS Base StdDev Base    QPS PFor StdDev PFor      Pct diff\\n              Phrase        4.87        0.36        3.39        0.18  -38% -  -20% (-47% -  -25%)\\n          AndHighMed       27.78        2.35       21.13        0.52  -31% -  -14% (-37% -  -15%)\\n            SpanNear        2.70        0.14        2.20        0.11  -26% -   -9% (-36% -  -13%)\\n        SloppyPhrase        4.17        0.15        3.77        0.21  -17% -    0% (-30% -   -6%)\\n             Respell       39.97        1.56       37.65        1.95  -14% -    3% (-15% -    2%)\\n            Wildcard       19.08        0.77       18.33        0.92  -12% -    5% (-17% -    3%)\\n              Fuzzy1       42.29        1.13       40.78        1.44   -9% -    2% (-11% -    1%)\\n         AndHighHigh        7.61        0.55        7.45        0.08   -9% -    6% (-19% -    6%)\\n              Fuzzy2       15.79        0.55       15.64        0.70   -8% -    7% (-11% -    6%)\\n            PKLookup       86.71        2.13       88.92        2.24   -2% -    7% ( -2% -    7%)\\n         TermGroup1M       13.04        0.23       14.03        0.40    2% -   12% (  1% -    9%)\\n              IntNRQ        3.97        0.48        4.35        0.61  -15% -   41% (-16% -   24%)\\n      TermBGroup1M1P       21.04        0.35       23.20        0.60    5% -   14% (  0% -   14%)\\n        TermBGroup1M       19.27        0.47       21.28        0.84    3% -   17% (  1% -   10%)\\n          OrHighHigh        4.13        0.47        4.63        0.27   -5% -   34% (-14% -   27%)\\n           OrHighMed        4.95        0.59        5.58        0.34   -5% -   35% (-14% -   27%)\\n             Prefix3       30.33        1.36       34.26        2.14    1% -   25% ( -6% -   20%)\\n                Term       41.99        1.19       50.75        1.72   13% -   28% (  2% -   26%)\\n \\n  \\n  It works, and it is quite interesting that StdDev for Term query is reduced significantly.  (same as last comment, when comparing two versions directly(method call vs. unfolded, the improvement is somewhat noisy))              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13397430\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13397430&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13397430\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13397430_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397430_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 11:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T11:39:16+0000\'\u003e20\\/Jun\\/12 11:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe For index is 5.2 GB vs 4.9 GB for vInt: not bad to have only 5%\u003cbr\\/\u003e\\nincrease in index size when using For PF (10M wikipedia index).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eGet more direct access to the file as an int[]; eg MMapDir could\u003cbr\\/\u003e\\nexpose an IntBuffer from its ByteBuffer (saving the initial copy\u003cbr\\/\u003e\\ninto byte[] that we now do). \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI tested this, by making hacked up changes to Billy\'s For patch\u003cbr\\/\u003e\\nrequiring MMapDirectory and pulling an IntBuffer directly from its\u003cbr\\/\u003e\\nByteBuffer, saving one copy of bytes into the byte[] first.  But,\u003cbr\\/\u003e\\ncuriously, it didn\'t seem to improve things much:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n          AndHighMed       24.32        0.60       14.24        0.41  -44% -  -38%\\n            PKLookup      131.98        3.09      108.35        1.47  -20% -  -14%\\n         AndHighHigh        5.36        0.18        4.66        0.02  -16% -   -9%\\n              Phrase        1.48        0.02        1.33        0.10  -18% -   -2%\\n        SloppyPhrase        1.40        0.04        1.26        0.03  -13% -   -5%\\n            SpanNear        1.14        0.01        1.04        0.02  -10% -   -6%\\n              IntNRQ       12.13        0.70       11.27        0.46  -15% -    2%\\n             Prefix3       34.51        1.17       34.11        1.28   -8% -    6%\\n              Fuzzy1       90.63        1.74       89.68        1.46   -4% -    2%\\n             Respell       77.22        2.62       76.99        1.62   -5% -    5%\\n            Wildcard       11.84        0.40       12.20        0.37   -3% -    9%\\n              Fuzzy2       34.34        0.82       36.16        1.08    0% -   11%\\n      TermBGroup1M1P        4.71        0.11        5.02        0.18    0% -   12%\\n           OrHighMed        7.87        0.28        8.50        0.55   -2% -   19%\\n        TermBGroup1M        3.47        0.03        3.78        0.03    7% -   11%\\n         TermGroup1M        2.96        0.01        3.25        0.03    8% -   11%\\n          OrHighHigh        3.55        0.12        3.91        0.21    0% -   20%\\n                Term        9.72        0.28       10.87        0.44    4% -   19%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eMaybe, instead, reading into an int[] and decoding from an int array\u003cbr\\/\u003e\\n(hopefully avoiding bounds checks) will be faster than calling\u003cbr\\/\u003e\\nIntBuffer.get for each encoded int...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13397430_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397430_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 11:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T11:39:16+0000\'\u003e20\\/Jun\\/12 11:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The For index is 5.2 GB vs 4.9 GB for vInt: not bad to have only 5% \\nincrease in index size when using For PF (10M wikipedia index). \\n\\n \\n Get more direct access to the file as an int[]; eg MMapDir could \\nexpose an IntBuffer from its ByteBuffer (saving the initial copy \\ninto byte[] that we now do).   \\n\\n I tested this, by making hacked up changes to Billy\'s For patch \\nrequiring MMapDirectory and pulling an IntBuffer directly from its \\nByteBuffer, saving one copy of bytes into the byte[] first.  But, \\ncuriously, it didn\'t seem to improve things much: \\n\\n  \\n                 Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n          AndHighMed       24.32        0.60       14.24        0.41  -44% -  -38%\\n            PKLookup      131.98        3.09      108.35        1.47  -20% -  -14%\\n         AndHighHigh        5.36        0.18        4.66        0.02  -16% -   -9%\\n              Phrase        1.48        0.02        1.33        0.10  -18% -   -2%\\n        SloppyPhrase        1.40        0.04        1.26        0.03  -13% -   -5%\\n            SpanNear        1.14        0.01        1.04        0.02  -10% -   -6%\\n              IntNRQ       12.13        0.70       11.27        0.46  -15% -    2%\\n             Prefix3       34.51        1.17       34.11        1.28   -8% -    6%\\n              Fuzzy1       90.63        1.74       89.68        1.46   -4% -    2%\\n             Respell       77.22        2.62       76.99        1.62   -5% -    5%\\n            Wildcard       11.84        0.40       12.20        0.37   -3% -    9%\\n              Fuzzy2       34.34        0.82       36.16        1.08    0% -   11%\\n      TermBGroup1M1P        4.71        0.11        5.02        0.18    0% -   12%\\n           OrHighMed        7.87        0.28        8.50        0.55   -2% -   19%\\n        TermBGroup1M        3.47        0.03        3.78        0.03    7% -   11%\\n         TermGroup1M        2.96        0.01        3.25        0.03    8% -   11%\\n          OrHighHigh        3.55        0.12        3.91        0.21    0% -   20%\\n                Term        9.72        0.28       10.87        0.44    4% -   19%\\n \\n  \\n\\n Maybe, instead, reading into an int[] and decoding from an int array \\n(hopefully avoiding bounds checks) will be faster than calling \\nIntBuffer.get for each encoded int...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13397500\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13397500&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13397500\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13397500_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397500_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 13:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T13:41:03+0000\'\u003e20\\/Jun\\/12 13:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe *unfold_method.patch just remove the nested call of PForDecompressImpl.decode, and also clip out numBytes information for ForPF. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13397500_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397500_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 13:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T13:41:03+0000\'\u003e20\\/Jun\\/12 13:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The *unfold_method.patch just remove the nested call of PForDecompressImpl.decode, and also clip out numBytes information for ForPF.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13397605\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13397605&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13397605\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13397605_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397605_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 16:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T16:14:27+0000\'\u003e20\\/Jun\\/12 16:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK I created a branch and committed last For patch: \u003ca href=\\\"https:\\/\\/svn.apache.org\\/repos\\/asf\\/lucene\\/dev\\/branches\\/pforcodec_3892\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/repos\\/asf\\/lucene\\/dev\\/branches\\/pforcodec_3892\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13397605_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397605_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 16:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T16:14:27+0000\'\u003e20\\/Jun\\/12 16:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK I created a branch and committed last For patch:  https:\\/\\/svn.apache.org\\/repos\\/asf\\/lucene\\/dev\\/branches\\/pforcodec_3892               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13397694\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13397694&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13397694\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13397694_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397694_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 17:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T17:56:47+0000\'\u003e20\\/Jun\\/12 17:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 20\\/Jun\\/12 17:57\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK, just reproduce your test. But Mike, are we using a same task file? Our relative speeds for different queries are not the same. \u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n              Phrase        5.07        0.45        3.76        0.19  -35% -  -14% (-44% -  -18%)\\n          AndHighMed       28.32        2.34       22.67        0.67  -28% -  -10% (-38% -   -9%)\\n            SpanNear        2.72        0.13        2.36        0.14  -22% -   -3% (-36% -   -8%)\\n        SloppyPhrase        4.18        0.20        3.83        0.15  -16% -    0% (-33% -   -6%)\\n             Respell       42.02        1.83       38.86        2.30  -16% -    2% (-18% -    0%)\\n              Fuzzy1       44.96        1.58       42.85        1.69  -11% -    2% (-12% -    0%)\\n              Fuzzy2       16.78        0.69       16.34        0.68  -10% -    5% (-12% -    3%)\\n            PKLookup       89.11        2.15       87.33        2.19   -6% -    2% ( -2% -    5%)\\n         AndHighHigh        7.61        0.44        7.69        0.21   -7% -   10% (-21% -   10%)\\n            Wildcard       19.50        0.91       20.02        0.72   -5% -   11% (-21% -    3%)\\n        TermBGroup1M       20.82        0.37       21.73        0.69    0% -    9% (  2% -   10%)\\n         TermGroup1M       13.79        0.13       14.61        0.32    2% -    9% (  1% -    9%)\\n              IntNRQ        4.11        0.56        4.56        0.56  -14% -   43% (-25% -   33%)\\n      TermBGroup1M1P       21.45        0.75       24.00        0.51    5% -   18% ( -1% -   22%)\\n           OrHighMed        5.08        0.49        5.73        0.15    0% -   28% (-16% -   25%)\\n          OrHighHigh        4.22        0.39        4.78        0.13    1% -   28% (-15% -   24%)\\n             Prefix3       30.91        1.63       35.65        2.02    3% -   28% (-14% -   21%)\\n                Term       44.36        1.87       54.01        1.96   12% -   31% ( -1% -   33%)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13397694_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397694_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 17:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T17:56:47+0000\'\u003e20\\/Jun\\/12 17:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 20\\/Jun\\/12 17:57\\\"\u003eedited\u003c\\/span\u003e                   OK, just reproduce your test. But Mike, are we using a same task file? Our relative speeds for different queries are not the same.  \\n  \\n                 Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n              Phrase        5.07        0.45        3.76        0.19  -35% -  -14% (-44% -  -18%)\\n          AndHighMed       28.32        2.34       22.67        0.67  -28% -  -10% (-38% -   -9%)\\n            SpanNear        2.72        0.13        2.36        0.14  -22% -   -3% (-36% -   -8%)\\n        SloppyPhrase        4.18        0.20        3.83        0.15  -16% -    0% (-33% -   -6%)\\n             Respell       42.02        1.83       38.86        2.30  -16% -    2% (-18% -    0%)\\n              Fuzzy1       44.96        1.58       42.85        1.69  -11% -    2% (-12% -    0%)\\n              Fuzzy2       16.78        0.69       16.34        0.68  -10% -    5% (-12% -    3%)\\n            PKLookup       89.11        2.15       87.33        2.19   -6% -    2% ( -2% -    5%)\\n         AndHighHigh        7.61        0.44        7.69        0.21   -7% -   10% (-21% -   10%)\\n            Wildcard       19.50        0.91       20.02        0.72   -5% -   11% (-21% -    3%)\\n        TermBGroup1M       20.82        0.37       21.73        0.69    0% -    9% (  2% -   10%)\\n         TermGroup1M       13.79        0.13       14.61        0.32    2% -    9% (  1% -    9%)\\n              IntNRQ        4.11        0.56        4.56        0.56  -14% -   43% (-25% -   33%)\\n      TermBGroup1M1P       21.45        0.75       24.00        0.51    5% -   18% ( -1% -   22%)\\n           OrHighMed        5.08        0.49        5.73        0.15    0% -   28% (-16% -   25%)\\n          OrHighHigh        4.22        0.39        4.78        0.13    1% -   28% (-15% -   24%)\\n             Prefix3       30.91        1.63       35.65        2.02    3% -   28% (-14% -   21%)\\n                Term       44.36        1.87       54.01        1.96   12% -   31% ( -1% -   33%)\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13397958\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13397958&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13397958\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13397958_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397958_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 22:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T22:40:56+0000\'\u003e20\\/Jun\\/12 22:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eBut Mike, are we using a same task file? Our relative speeds for different queries are not the same.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eSorry, I\'m using a hand edited \\\"hard\\\" tasks file; I\'ll commit &amp; push to luceneutil.  But, separately: each run picks a different subset of the tasks from each category to run, so results from one run to another in general aren\'t comparable unless we fix the random seed it uses.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13397958_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13397958_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/12 22:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-20T22:40:56+0000\'\u003e20\\/Jun\\/12 22:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     But Mike, are we using a same task file? Our relative speeds for different queries are not the same.  \\n\\n Sorry, I\'m using a hand edited \\\"hard\\\" tasks file; I\'ll commit &amp; push to luceneutil.  But, separately: each run picks a different subset of the tasks from each category to run, so results from one run to another in general aren\'t comparable unless we fix the random seed it uses.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13398507\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13398507&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13398507\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13398507_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13398507_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/12 15:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-21T15:48:34+0000\'\u003e21\\/Jun\\/12 15:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 21\\/Jun\\/12 15:53\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFor decompressing phase, replace the use of IntBuffer with a direct int[] to int[] decoder. Method convert() is supposed to be performant enough...coz it is not different from the inner implementation of IntBuffer.get(), i.e.\u003ca href=\\\"http:\\/\\/massapi.com\\/source\\/jdk1.6.0_17\\/src\\/java\\/nio\\/Bits.java.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/massapi.com\\/source\\/jdk1.6.0_17\\/src\\/java\\/nio\\/Bits.java.html\u003c\\/a\u003e, line 193. However, result isn\'t interesting.\u003c\\/p\u003e\\n\\n\u003cp\u003eHmm, there is an extra block of memory write here, which Mike wanted to avoid in previous patch. That should be the cause.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13398507_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13398507_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/12 15:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-21T15:48:34+0000\'\u003e21\\/Jun\\/12 15:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 21\\/Jun\\/12 15:53\\\"\u003eedited\u003c\\/span\u003e                   For decompressing phase, replace the use of IntBuffer with a direct int[] to int[] decoder. Method convert() is supposed to be performant enough...coz it is not different from the inner implementation of IntBuffer.get(), i.e. http:\\/\\/massapi.com\\/source\\/jdk1.6.0_17\\/src\\/java\\/nio\\/Bits.java.html , line 193. However, result isn\'t interesting. \\n\\n Hmm, there is an extra block of memory write here, which Mike wanted to avoid in previous patch. That should be the cause.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13398582\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13398582&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13398582\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13398582_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13398582_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/12 16:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-21T16:55:24+0000\'\u003e21\\/Jun\\/12 16:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 21\\/Jun\\/12 17:01\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNow remove the memory write codes, and replace IntBuffer.get() with getInt(byte,byte,byte,byte), since this patch contains method unfolding, there is no actually difference...Seems that we\'re paying attenting on a wrong point.\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n              Phrase        5.02        0.46        3.66        0.30  -38% -  -13% (-38% -  -17%)\\n          AndHighMed       28.08        2.29       23.04        1.01  -27% -   -6% (-29% -  -12%)\\n            SpanNear        2.69        0.16        2.30        0.19  -25% -    0% (-26% -   -8%)\\n        SloppyPhrase        4.18        0.22        3.83        0.18  -16% -    1% (-21% -   -3%)\\n             Respell       41.92        2.15       39.54        2.45  -15% -    5% (-16% -    2%)\\n              Fuzzy1       44.47        1.99       43.34        3.07  -13% -    9% (-10% -    0%)\\n            Wildcard       19.70        1.06       19.60        1.16  -11% -   11% ( -8% -    8%)\\n              Fuzzy2       16.54        0.86       16.52        1.16  -11% -   12% (-10% -    3%)\\n            PKLookup       87.32        2.47       88.62        1.33   -2% -    6% ( -5% -    8%)\\n         AndHighHigh        7.55        0.43        7.84        0.15   -3% -   12% ( -7% -    8%)\\n        TermBGroup1M       19.86        0.14       21.41        0.70    3% -   12% ( -3% -   12%)\\n         TermGroup1M       13.35        0.17       14.40        0.38    3% -   12% (  2% -   13%)\\n              IntNRQ        4.10        0.57        4.45        0.73  -20% -   46% ( -7% -   50%)\\n      TermBGroup1M1P       21.29        0.63       23.45        0.82    3% -   17% (  6% -   20%)\\n             Prefix3       31.13        1.71       35.53        2.90    0% -   30% (  5% -   27%)\\n           OrHighMed        4.96        0.61        5.83        0.35   -1% -   42% ( -9% -   23%)\\n          OrHighHigh        4.13        0.49        4.87        0.29    0% -   41% ( -8% -   23%)\\n                Term       42.93        1.17       52.11        2.21   13% -   30% ( 13% -   35%)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003eIt is compared with result in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13396987&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13396987\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13396987&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13396987\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13398582_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13398582_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/12 16:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-21T16:55:24+0000\'\u003e21\\/Jun\\/12 16:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 21\\/Jun\\/12 17:01\\\"\u003eedited\u003c\\/span\u003e                   Now remove the memory write codes, and replace IntBuffer.get() with getInt(byte,byte,byte,byte), since this patch contains method unfolding, there is no actually difference...Seems that we\'re paying attenting on a wrong point. \\n  \\n                 Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n              Phrase        5.02        0.46        3.66        0.30  -38% -  -13% (-38% -  -17%)\\n          AndHighMed       28.08        2.29       23.04        1.01  -27% -   -6% (-29% -  -12%)\\n            SpanNear        2.69        0.16        2.30        0.19  -25% -    0% (-26% -   -8%)\\n        SloppyPhrase        4.18        0.22        3.83        0.18  -16% -    1% (-21% -   -3%)\\n             Respell       41.92        2.15       39.54        2.45  -15% -    5% (-16% -    2%)\\n              Fuzzy1       44.47        1.99       43.34        3.07  -13% -    9% (-10% -    0%)\\n            Wildcard       19.70        1.06       19.60        1.16  -11% -   11% ( -8% -    8%)\\n              Fuzzy2       16.54        0.86       16.52        1.16  -11% -   12% (-10% -    3%)\\n            PKLookup       87.32        2.47       88.62        1.33   -2% -    6% ( -5% -    8%)\\n         AndHighHigh        7.55        0.43        7.84        0.15   -3% -   12% ( -7% -    8%)\\n        TermBGroup1M       19.86        0.14       21.41        0.70    3% -   12% ( -3% -   12%)\\n         TermGroup1M       13.35        0.17       14.40        0.38    3% -   12% (  2% -   13%)\\n              IntNRQ        4.10        0.57        4.45        0.73  -20% -   46% ( -7% -   50%)\\n      TermBGroup1M1P       21.29        0.63       23.45        0.82    3% -   17% (  6% -   20%)\\n             Prefix3       31.13        1.71       35.53        2.90    0% -   30% (  5% -   27%)\\n           OrHighMed        4.96        0.61        5.83        0.35   -1% -   42% ( -9% -   23%)\\n          OrHighHigh        4.13        0.49        4.87        0.29    0% -   41% ( -8% -   23%)\\n                Term       42.93        1.17       52.11        2.21   13% -   30% ( 13% -   35%)\\n \\n  \\n It is compared with result in  https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13396987&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13396987               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13398800\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13398800&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13398800\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13398800_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13398800_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/12 19:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-21T19:50:27+0000\'\u003e21\\/Jun\\/12 19:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnd same codes with the wikimediumhard.tasks file.(This is really a hard testcase, since QPS are so small that we can hardly depend on Pct Diff \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e )\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n          AndHighMed       10.76        0.21        6.47        0.32  -43% -  -35%\\n         AndHighHigh        2.89        0.08        2.57        0.19  -20% -   -1%\\n            SpanNear        0.60        0.01        0.55        0.01  -11% -   -6%\\n        SloppyPhrase        0.61        0.01        0.57        0.01   -9% -   -3%\\n            PKLookup       87.72        2.61       86.28        1.48   -6% -    3%\\n              Fuzzy1       36.22        1.14       35.90        0.97   -6% -    5%\\n              Phrase        1.22        0.03        1.22        0.08   -9% -    8%\\n             Respell       32.84        0.92       33.55        0.87   -3% -    7%\\n              IntNRQ        3.66        0.35        3.74        0.08   -8% -   15%\\n              Fuzzy2       21.62        0.66       22.10        0.51   -3% -    7%\\n             Prefix3       13.30        0.49       14.09        0.76   -3% -   15%\\n           OrHighMed        3.43        0.16        3.65        0.45  -10% -   25%\\n          OrHighHigh        1.66        0.09        1.79        0.22  -10% -   28%\\n            Wildcard        3.39        0.14        3.74        0.20    0% -   21%\\n      TermBGroup1M1P        1.84        0.03        2.10        0.16    3% -   25%\\n         TermGroup1M        1.14        0.03        1.34        0.10    5% -   29%\\n        TermBGroup1M        1.49        0.05        1.78        0.13    7% -   32%\\n                Term        3.49        0.13        4.38        0.65    2% -   49%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13398800_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13398800_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/12 19:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-21T19:50:27+0000\'\u003e21\\/Jun\\/12 19:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    And same codes with the wikimediumhard.tasks file.(This is really a hard testcase, since QPS are so small that we can hardly depend on Pct Diff   ) \\n  \\n                 Task    QPS Base StdDev Base     QPS For  StdDev For      Pct diff\\n          AndHighMed       10.76        0.21        6.47        0.32  -43% -  -35%\\n         AndHighHigh        2.89        0.08        2.57        0.19  -20% -   -1%\\n            SpanNear        0.60        0.01        0.55        0.01  -11% -   -6%\\n        SloppyPhrase        0.61        0.01        0.57        0.01   -9% -   -3%\\n            PKLookup       87.72        2.61       86.28        1.48   -6% -    3%\\n              Fuzzy1       36.22        1.14       35.90        0.97   -6% -    5%\\n              Phrase        1.22        0.03        1.22        0.08   -9% -    8%\\n             Respell       32.84        0.92       33.55        0.87   -3% -    7%\\n              IntNRQ        3.66        0.35        3.74        0.08   -8% -   15%\\n              Fuzzy2       21.62        0.66       22.10        0.51   -3% -    7%\\n             Prefix3       13.30        0.49       14.09        0.76   -3% -   15%\\n           OrHighMed        3.43        0.16        3.65        0.45  -10% -   25%\\n          OrHighHigh        1.66        0.09        1.79        0.22  -10% -   28%\\n            Wildcard        3.39        0.14        3.74        0.20    0% -   21%\\n      TermBGroup1M1P        1.84        0.03        2.10        0.16    3% -   25%\\n         TermGroup1M        1.14        0.03        1.34        0.10    5% -   29%\\n        TermBGroup1M        1.49        0.05        1.78        0.13    7% -   32%\\n                Term        3.49        0.13        4.38        0.65    2% -   49%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13399501\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13399501&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13399501\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13399501_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13399501_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/12 18:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-22T18:37:51+0000\'\u003e22\\/Jun\\/12 18:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI was curious how much the \\\"layers\\\" (SepPostingsReader,\u003cbr\\/\u003e\\nFixedIntBlock.IntIndexInput, ForFactor) between the FOR block decode\u003cbr\\/\u003e\\nand the query scoring were hurting performance, so I wrote a\u003cbr\\/\u003e\\nspecialized scorer (BlockTermScorer) for just TermQuery.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe scorer is only used if the postings format is ForPF, and if no\u003cbr\\/\u003e\\nskipping will be done (I didn\'t implement advance...).\u003c\\/p\u003e\\n\\n\u003cp\u003eThe scorer reaches down and holds on to the decoded int[] buffer, and\u003cbr\\/\u003e\\nthen does its own adding up of the doc deltas, reading the next block,\u003cbr\\/\u003e\\netc.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe baseline is the current branch (not trunk!):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base   QPS patch StdDev patch     Pct diff\\n            Wildcard       10.31        0.40       10.10        0.17   -7% -    3%\\n         AndHighHigh        4.90        0.10        4.82        0.15   -6% -    3%\\n             Prefix3       28.50        1.06       28.11        0.50   -6% -    4%\\n              IntNRQ        9.72        0.46        9.60        0.57  -11% -    9%\\n        SloppyPhrase        0.92        0.03        0.92        0.02   -6% -    5%\\n            PKLookup      106.21        2.54      105.66        2.07   -4% -    3%\\n              Phrase        1.56        0.00        1.56        0.01   -1% -    0%\\n              Fuzzy1       90.33        3.48       90.19        2.25   -6% -    6%\\n              Fuzzy2       29.66        0.61       29.64        0.85   -4% -    4%\\n          AndHighMed       14.87        0.29       15.02        0.81   -6% -    8%\\n             Respell       78.83        2.46       79.62        1.54   -3% -    6%\\n            SpanNear        1.18        0.02        1.19        0.04   -4% -    6%\\n         TermGroup1M        2.78        0.06        3.28        0.14   10% -   25%\\n          OrHighHigh        4.19        0.24        5.04        0.20    9% -   32%\\n           OrHighMed        8.21        0.45        9.87        0.23   11% -   30%\\n      TermBGroup1M1P        5.11        0.20        6.21        0.26   12% -   31%\\n        TermBGroup1M        4.49        0.11        5.49        0.27   13% -   31%\\n                Term        8.89        0.58       11.90        1.52    9% -   61%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eSeems like we get a good boost removing the abstractions.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13399501_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13399501_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jun\\/12 18:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-22T18:37:51+0000\'\u003e22\\/Jun\\/12 18:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I was curious how much the \\\"layers\\\" (SepPostingsReader, \\nFixedIntBlock.IntIndexInput, ForFactor) between the FOR block decode \\nand the query scoring were hurting performance, so I wrote a \\nspecialized scorer (BlockTermScorer) for just TermQuery. \\n\\n The scorer is only used if the postings format is ForPF, and if no \\nskipping will be done (I didn\'t implement advance...). \\n\\n The scorer reaches down and holds on to the decoded int[] buffer, and \\nthen does its own adding up of the doc deltas, reading the next block, \\netc. \\n\\n The baseline is the current branch (not trunk!): \\n\\n  \\n                 Task    QPS base StdDev base   QPS patch StdDev patch     Pct diff\\n            Wildcard       10.31        0.40       10.10        0.17   -7% -    3%\\n         AndHighHigh        4.90        0.10        4.82        0.15   -6% -    3%\\n             Prefix3       28.50        1.06       28.11        0.50   -6% -    4%\\n              IntNRQ        9.72        0.46        9.60        0.57  -11% -    9%\\n        SloppyPhrase        0.92        0.03        0.92        0.02   -6% -    5%\\n            PKLookup      106.21        2.54      105.66        2.07   -4% -    3%\\n              Phrase        1.56        0.00        1.56        0.01   -1% -    0%\\n              Fuzzy1       90.33        3.48       90.19        2.25   -6% -    6%\\n              Fuzzy2       29.66        0.61       29.64        0.85   -4% -    4%\\n          AndHighMed       14.87        0.29       15.02        0.81   -6% -    8%\\n             Respell       78.83        2.46       79.62        1.54   -3% -    6%\\n            SpanNear        1.18        0.02        1.19        0.04   -4% -    6%\\n         TermGroup1M        2.78        0.06        3.28        0.14   10% -   25%\\n          OrHighHigh        4.19        0.24        5.04        0.20    9% -   32%\\n           OrHighMed        8.21        0.45        9.87        0.23   11% -   30%\\n      TermBGroup1M1P        5.11        0.20        6.21        0.26   12% -   31%\\n        TermBGroup1M        4.49        0.11        5.49        0.27   13% -   31%\\n                Term        8.89        0.58       11.90        1.52    9% -   61%\\n \\n  \\n\\n Seems like we get a good boost removing the abstractions.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13399869\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13399869&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13399869\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cmale\\\" id=\\\"commentauthor_13399869_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cmale\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cmale\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris Male\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13399869_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jun\\/12 07:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-23T07:23:28+0000\'\u003e23\\/Jun\\/12 07:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt\'s really interesting the effect of peeling back those abstractions.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cmale\\\" id=\\\"commentauthor_13399869_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cmale\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cmale\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris Male\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13399869_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jun\\/12 07:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-23T07:23:28+0000\'\u003e23\\/Jun\\/12 07:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It\'s really interesting the effect of peeling back those abstractions.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13399883\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13399883&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13399883\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13399883_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13399883_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jun\\/12 08:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-23T08:36:37+0000\'\u003e23\\/Jun\\/12 08:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 08\\/Aug\\/12 03:41\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYes, really interesting. And that should make sense. \u003cdel\u003eAs far as I know, a method with exception handling may be quite slow than a simple if statement check.\u003c\\/del\u003e(Hmm, now I think this is not true, the improvement should mainly come the framework change) Here is part of the result in my test, with Mike\'s patch:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e           OrHighMed        2.53        0.31        2.57        0.13  -13% -   21%\\n            Wildcard        3.86        0.12        3.94        0.38  -10% -   15%\\n          OrHighHigh        1.57        0.18        1.61        0.08  -12% -   21%\\n      TermBGroup1M1P        1.93        0.03        2.48        0.10   21% -   35%\\n         TermGroup1M        1.37        0.02        1.81        0.05   26% -   37%\\n        TermBGroup1M        1.17        0.02        1.64        0.07   32% -   47%\\n                Term        2.92        0.13        4.46        0.23   38% -   68%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13399883_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13399883_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jun\\/12 08:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-06-23T08:36:37+0000\'\u003e23\\/Jun\\/12 08:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 08\\/Aug\\/12 03:41\\\"\u003eedited\u003c\\/span\u003e                   Yes, really interesting. And that should make sense.  As far as I know, a method with exception handling may be quite slow than a simple if statement check. (Hmm, now I think this is not true, the improvement should mainly come the framework change) Here is part of the result in my test, with Mike\'s patch: \\n  \\n            OrHighMed        2.53        0.31        2.57        0.13  -13% -   21%\\n            Wildcard        3.86        0.12        3.94        0.38  -10% -   15%\\n          OrHighHigh        1.57        0.18        1.61        0.08  -12% -   21%\\n      TermBGroup1M1P        1.93        0.03        2.48        0.10   21% -   35%\\n         TermGroup1M        1.37        0.02        1.81        0.05   26% -   37%\\n        TermBGroup1M        1.17        0.02        1.64        0.07   32% -   47%\\n                Term        2.92        0.13        4.46        0.23   38% -   68%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13405169\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13405169&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13405169\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13405169_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13405169_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/12 17:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-02T17:55:29+0000\'\u003e02\\/Jul\\/12 17:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis version will make PFor work side by side with For. Hmm, the performance results might changed a little, I\'ll post them later.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13405169_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13405169_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/12 17:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-02T17:55:29+0000\'\u003e02\\/Jul\\/12 17:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This version will make PFor work side by side with For. Hmm, the performance results might changed a little, I\'ll post them later.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13405477\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13405477&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13405477\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13405477_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13405477_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jul\\/12 00:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-03T00:44:26+0000\'\u003e03\\/Jul\\/12 00:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Billy, I committed this to the branch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13405477_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13405477_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jul\\/12 00:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-03T00:44:26+0000\'\u003e03\\/Jul\\/12 00:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Billy, I committed this to the branch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13409661\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13409661&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13409661\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13409661_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13409661_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/12 17:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-09T17:25:02+0000\'\u003e09\\/Jul\\/12 17:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCurrent branch cannot pass tests like this: \u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eant test -Dtestcase=TestConcurrentMergeScheduler -Dtests.method=testFlushExceptions -Dtests.seed=C2ED637AF330E96A -Dtests.postingsformat=For \\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003eMaybe we should handle the IndexOutput more gracefully?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13409661_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13409661_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/12 17:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-09T17:25:02+0000\'\u003e09\\/Jul\\/12 17:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Current branch cannot pass tests like this:  \\n  \\n ant test -Dtestcase=TestConcurrentMergeScheduler -Dtests.method=testFlushExceptions -Dtests.seed=C2ED637AF330E96A -Dtests.postingsformat=For \\n \\n  \\n Maybe we should handle the IndexOutput more gracefully?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13409662\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13409662&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13409662\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13409662_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13409662_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/12 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-09T17:26:18+0000\'\u003e09\\/Jul\\/12 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnd this patch ensures pulsing support for PFor and For postings format.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13409662_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13409662_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/12 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-09T17:26:18+0000\'\u003e09\\/Jul\\/12 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    And this patch ensures pulsing support for PFor and For postings format.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13409664\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13409664&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13409664\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13409664_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13409664_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/12 17:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-09T17:30:58+0000\'\u003e09\\/Jul\\/12 17:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eCurrent branch cannot pass tests like this:\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThanks, I committed the patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13409664_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13409664_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/12 17:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-09T17:30:58+0000\'\u003e09\\/Jul\\/12 17:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Current branch cannot pass tests like this:  \\n\\n Thanks, I committed the patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13411373\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13411373&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13411373\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411373_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411373_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 10:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T10:13:43+0000\'\u003e11\\/Jul\\/12 10:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAdd javadocs for previous codes. I\'m still not sure about the IOUtils.closeWhileHandlingException(), I think the exceptions should not be suppressed when out.close() is called? This patch also makes some minor change on randomness in testcase. \u003cbr\\/\u003e\\nThe Pulsing parts in last patch is not included here, because they doesn\'t improve performance significantly. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411373_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411373_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 10:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T10:13:43+0000\'\u003e11\\/Jul\\/12 10:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Add javadocs for previous codes. I\'m still not sure about the IOUtils.closeWhileHandlingException(), I think the exceptions should not be suppressed when out.close() is called? This patch also makes some minor change on randomness in testcase.  \\nThe Pulsing parts in last patch is not included here, because they doesn\'t improve performance significantly.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13411472\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13411472&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13411472\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13411472_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411472_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:21:33+0000\'\u003e11\\/Jul\\/12 13:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI\'m still not sure about the IOUtils.closeWhileHandlingException(), I think the exceptions should not be suppressed when out.close() is called?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eActually I think you want them to be suppressed, so that the original exception is seen?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13411472_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411472_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:21:33+0000\'\u003e11\\/Jul\\/12 13:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I\'m still not sure about the IOUtils.closeWhileHandlingException(), I think the exceptions should not be suppressed when out.close() is called?  \\n\\n Actually I think you want them to be suppressed, so that the original exception is seen?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13411475\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13411475&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13411475\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13411475_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411475_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:25:48+0000\'\u003e11\\/Jul\\/12 13:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDocs\\/cleanup patch looks good, I\'ll commit to the branch!  Thanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13411475_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411475_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:25:48+0000\'\u003e11\\/Jul\\/12 13:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Docs\\/cleanup patch looks good, I\'ll commit to the branch!  Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13411495\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13411495&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13411495\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411495_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411495_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:41:26+0000\'\u003e11\\/Jul\\/12 13:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 11\\/Jul\\/12 13:47\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eActually I think you want them to be suppressed, so that the original exception is seen?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eNot my idea actually, I think the exception should be thrown for out.close()? closeWhileHandlingException() will suppress those exceptions. So in this patch I use out.close() instead of IOUtils.closeWhileHandlingException()\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411495_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411495_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:41:26+0000\'\u003e11\\/Jul\\/12 13:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 11\\/Jul\\/12 13:47\\\"\u003eedited\u003c\\/span\u003e                    Actually I think you want them to be suppressed, so that the original exception is seen?  \\n\\n Not my idea actually, I think the exception should be thrown for out.close()? closeWhileHandlingException() will suppress those exceptions. So in this patch I use out.close() instead of IOUtils.closeWhileHandlingException()              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13411515\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13411515&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13411515\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13411515_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411515_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:57:27+0000\'\u003e11\\/Jul\\/12 13:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eNot my idea actually, I think the exception should be thrown for out.close()? closeWhileHandlingException() will suppress those exceptions\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eBut the problem is some other exception has already been thrown (because success is false).  If out.close then hits a second exception we have to pick which one should be thrown, and I think the original one is better?  (Since it\'s likely the root cause of whatever went wrong).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13411515_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411515_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:57:27+0000\'\u003e11\\/Jul\\/12 13:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Not my idea actually, I think the exception should be thrown for out.close()? closeWhileHandlingException() will suppress those exceptions  \\n\\n But the problem is some other exception has already been thrown (because success is false).  If out.close then hits a second exception we have to pick which one should be thrown, and I think the original one is better?  (Since it\'s likely the root cause of whatever went wrong).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13411517\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13411517&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13411517\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411517_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411517_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:59:29+0000\'\u003e11\\/Jul\\/12 13:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eThe Pulsing parts in last patch is not included here, because they doesn\'t improve performance significantly. \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHere are some tests between For vs PulsingFor, PFor vs PulsingPFor. Run on the 1M docs with wikimediumhard.tasks\u003c\\/p\u003e\\n\\n\u003cp\u003eIt is strange that PKLookup still doesn\'t benefit for FixedBlockInt:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task     QPS For  StdDev ForQPS PulsingForStdDev PulsingFor      Pct diff\\n         AndHighHigh       23.01        0.33       22.94        0.66   -4% -    4%  \\n          AndHighMed       56.41        0.76       57.41        1.74   -2% -    6%  \\n              Fuzzy1       86.74        0.85       82.22        2.39   -8% -   -1% \\n              Fuzzy2       28.23        0.38       26.15        0.97  -11% -   -2% \\n              IntNRQ       41.78        1.65       40.78        3.53  -14% -   10% \\n          OrHighHigh       14.44        0.34       14.50        0.92   -8% -    9%  \\n           OrHighMed       30.59        0.77       31.12        1.93   -6% -   10% \\n            PKLookup      110.31        2.03      109.22        2.43   -4% -    3%  \\n              Phrase        8.18        0.44        7.97        0.40  -12% -    8%  \\n             Prefix3       99.64        2.38       97.09        3.46   -8% -    3%  \\n             Respell       99.66        0.45       92.76        2.81  -10% -   -3% \\n        SloppyPhrase        4.28        0.16        4.08        0.13  -11% -    2%  \\n            SpanNear        4.08        0.13        3.93        0.06   -7% -    0%  \\n                Term       33.63        1.25       34.06        1.71   -7% -   10% \\n        TermBGroup1M       15.54        0.46       15.78        0.56   -4% -    8%  \\n      TermBGroup1M1P       20.34        0.73       20.62        0.62   -5% -    8%  \\n         TermGroup1M       19.18        0.52       19.72        0.49   -2% -    8%  \\n            Wildcard       34.86        0.88       34.27        1.77   -9% -    6% \\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e         AndHighHigh       19.98        0.31       19.92        0.26   -3% -    2%  \\n          AndHighMed       58.21        1.51       57.86        1.18   -5% -    4%  \\n              Fuzzy1       91.86        1.17       85.86        1.18   -8% -   -4% \\n              Fuzzy2       32.66        0.58       30.08        0.57  -11% -   -4% \\n              IntNRQ       33.89        0.82       32.66        1.10   -9% -    2%  \\n          OrHighHigh       15.79        1.29       14.96        0.67  -16% -    7%\\n           OrHighMed       30.31        2.09       28.91        1.67  -15% -    8%\\n            PKLookup      112.80        0.81      111.82        2.90   -4% -    2%\\n              Phrase        6.14        0.11        6.23        0.10   -1% -    5%\\n             Prefix3      147.80        2.88      138.35        2.11   -9% -   -3%\\n             Respell      118.57        1.18      108.30        1.86  -11% -   -6%\\n        SloppyPhrase        5.78        0.15        5.66        0.29   -9% -    5%\\n            SpanNear        6.32        0.14        6.40        0.16   -3% -    6%\\n                Term       41.60        2.44       38.12        0.33  -14% -   -1%\\n        TermBGroup1M       14.40        0.48       13.73        0.19   -8% -    0%\\n      TermBGroup1M1P       23.68        0.44       22.82        0.44   -7% -    0%\\n         TermGroup1M       15.25        0.48       14.51        0.20   -9% -    0%\\n            Wildcard       32.76        0.53       31.76        0.62   -6% -    0%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411517_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411517_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 13:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T13:59:29+0000\'\u003e11\\/Jul\\/12 13:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     The Pulsing parts in last patch is not included here, because they doesn\'t improve performance significantly.   \\n\\n Here are some tests between For vs PulsingFor, PFor vs PulsingPFor. Run on the 1M docs with wikimediumhard.tasks \\n\\n It is strange that PKLookup still doesn\'t benefit for FixedBlockInt: \\n\\n  \\n                 Task     QPS For  StdDev ForQPS PulsingForStdDev PulsingFor      Pct diff\\n         AndHighHigh       23.01        0.33       22.94        0.66   -4% -    4%  \\n          AndHighMed       56.41        0.76       57.41        1.74   -2% -    6%  \\n              Fuzzy1       86.74        0.85       82.22        2.39   -8% -   -1% \\n              Fuzzy2       28.23        0.38       26.15        0.97  -11% -   -2% \\n              IntNRQ       41.78        1.65       40.78        3.53  -14% -   10% \\n          OrHighHigh       14.44        0.34       14.50        0.92   -8% -    9%  \\n           OrHighMed       30.59        0.77       31.12        1.93   -6% -   10% \\n            PKLookup      110.31        2.03      109.22        2.43   -4% -    3%  \\n              Phrase        8.18        0.44        7.97        0.40  -12% -    8%  \\n             Prefix3       99.64        2.38       97.09        3.46   -8% -    3%  \\n             Respell       99.66        0.45       92.76        2.81  -10% -   -3% \\n        SloppyPhrase        4.28        0.16        4.08        0.13  -11% -    2%  \\n            SpanNear        4.08        0.13        3.93        0.06   -7% -    0%  \\n                Term       33.63        1.25       34.06        1.71   -7% -   10% \\n        TermBGroup1M       15.54        0.46       15.78        0.56   -4% -    8%  \\n      TermBGroup1M1P       20.34        0.73       20.62        0.62   -5% -    8%  \\n         TermGroup1M       19.18        0.52       19.72        0.49   -2% -    8%  \\n            Wildcard       34.86        0.88       34.27        1.77   -9% -    6% \\n \\n  \\n\\n  \\n          AndHighHigh       19.98        0.31       19.92        0.26   -3% -    2%  \\n          AndHighMed       58.21        1.51       57.86        1.18   -5% -    4%  \\n              Fuzzy1       91.86        1.17       85.86        1.18   -8% -   -4% \\n              Fuzzy2       32.66        0.58       30.08        0.57  -11% -   -4% \\n              IntNRQ       33.89        0.82       32.66        1.10   -9% -    2%  \\n          OrHighHigh       15.79        1.29       14.96        0.67  -16% -    7%\\n           OrHighMed       30.31        2.09       28.91        1.67  -15% -    8%\\n            PKLookup      112.80        0.81      111.82        2.90   -4% -    2%\\n              Phrase        6.14        0.11        6.23        0.10   -1% -    5%\\n             Prefix3      147.80        2.88      138.35        2.11   -9% -   -3%\\n             Respell      118.57        1.18      108.30        1.86  -11% -   -6%\\n        SloppyPhrase        5.78        0.15        5.66        0.29   -9% -    5%\\n            SpanNear        6.32        0.14        6.40        0.16   -3% -    6%\\n                Term       41.60        2.44       38.12        0.33  -14% -   -1%\\n        TermBGroup1M       14.40        0.48       13.73        0.19   -8% -    0%\\n      TermBGroup1M1P       23.68        0.44       22.82        0.44   -7% -    0%\\n         TermGroup1M       15.25        0.48       14.51        0.20   -9% -    0%\\n            Wildcard       32.76        0.53       31.76        0.62   -6% -    0%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13411533\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13411533&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13411533\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411533_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411533_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 14:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T14:05:57+0000\'\u003e11\\/Jul\\/12 14:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eBut the problem is some other exception has already been thrown (because success is false). If out.close then hits a second exception we have to pick which one should be thrown, and I think the original one is better? (Since it\'s likely the root cause of whatever went wrong).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOK, I see, then let\'s change ForPostingsFormat.fieldsConsumer\\/Producer as well.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411533_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411533_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 14:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T14:05:57+0000\'\u003e11\\/Jul\\/12 14:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     But the problem is some other exception has already been thrown (because success is false). If out.close then hits a second exception we have to pick which one should be thrown, and I think the original one is better? (Since it\'s likely the root cause of whatever went wrong).  \\n\\n OK, I see, then let\'s change ForPostingsFormat.fieldsConsumer\\/Producer as well.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13411546\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13411546&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13411546\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13411546_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411546_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 14:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T14:17:40+0000\'\u003e11\\/Jul\\/12 14:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK I committed that!  Let me know if I missed any...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13411546_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411546_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 14:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T14:17:40+0000\'\u003e11\\/Jul\\/12 14:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK I committed that!  Let me know if I missed any...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13411556\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13411556&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13411556\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411556_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411556_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 14:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T14:25:16+0000\'\u003e11\\/Jul\\/12 14:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK, thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13411556_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13411556_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/12 14:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-11T14:25:16+0000\'\u003e11\\/Jul\\/12 14:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK, thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13412900\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13412900&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13412900\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13412900_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13412900_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/12 16:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-12T16:12:09+0000\'\u003e12\\/Jul\\/12 16:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFix a minor bug for maxChain, which will not be detected when blockSize&lt;256. \u003c\\/p\u003e\\n\\n\u003cp\u003eSupport numBits=0, however, in wiki data, there are only 0.09% of the blocks encoded as numBits=0, this doesn\'t actually affect the performance.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso add some testcases.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13412900_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13412900_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/12 16:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-12T16:12:09+0000\'\u003e12\\/Jul\\/12 16:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Fix a minor bug for maxChain, which will not be detected when blockSize&lt;256.  \\n\\n Support numBits=0, however, in wiki data, there are only 0.09% of the blocks encoded as numBits=0, this doesn\'t actually affect the performance. \\n\\n Also add some testcases.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413312\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413312&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413312\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413312_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413312_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/12 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-12T22:57:24+0000\'\u003e12\\/Jul\\/12 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Billy, I\'ll commit!\u003c\\/p\u003e\\n\\n\u003cp\u003eOne thing I noticed: I think we shouldn\'t separately read numBytes and the int header?  Can\'t we do a single readVInt(), and that encodes numBytes as well as format (bit width and format, once we tie into oal.util.packed APIs)?  Also, we shouldn\'t encode numInts at all, ie, this should be fixed for the whole segment, and not written per block.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413312_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413312_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/12 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-12T22:57:24+0000\'\u003e12\\/Jul\\/12 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Billy, I\'ll commit! \\n\\n One thing I noticed: I think we shouldn\'t separately read numBytes and the int header?  Can\'t we do a single readVInt(), and that encodes numBytes as well as format (bit width and format, once we tie into oal.util.packed APIs)?  Also, we shouldn\'t encode numInts at all, ie, this should be fixed for the whole segment, and not written per block.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413314\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413314&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413314\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413314_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413314_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/12 23:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-12T23:03:19+0000\'\u003e12\\/Jul\\/12 23:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI didn\'t commit lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/codecs\\/pfor\\/ForPostingsFormat.java &#8211; your IDE had changed it to a wildcard import (I prefer we stick with individual imports).\u003c\\/p\u003e\\n\\n\u003cp\u003eWas the numBits==0 case for all 0s not all 1s?  We may want to have it mean all 1s instead?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413314_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413314_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/12 23:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-12T23:03:19+0000\'\u003e12\\/Jul\\/12 23:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I didn\'t commit lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/codecs\\/pfor\\/ForPostingsFormat.java &#8211; your IDE had changed it to a wildcard import (I prefer we stick with individual imports). \\n\\n Was the numBits==0 case for all 0s not all 1s?  We may want to have it mean all 1s instead?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413682\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413682&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413682\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413682_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413682_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 12:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T12:12:17+0000\'\u003e13\\/Jul\\/12 12:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eWas the numBits==0 case for all 0s not all 1s? We may want to have it mean all 1s instead?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eOK, I just tested this, and for most cases(93%) when the whole block shares one value v, v==1. This change improves index speed and reduce file size a bit(280s vs 320s and 589M vs 591M). But why? Does lucene store freq() when it is 0 as well, so a whole block with v==1 will be more possible?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413682_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413682_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 12:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T12:12:17+0000\'\u003e13\\/Jul\\/12 12:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Was the numBits==0 case for all 0s not all 1s? We may want to have it mean all 1s instead?  \\n OK, I just tested this, and for most cases(93%) when the whole block shares one value v, v==1. This change improves index speed and reduce file size a bit(280s vs 320s and 589M vs 591M). But why? Does lucene store freq() when it is 0 as well, so a whole block with v==1 will be more possible?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413698\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413698&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413698\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413698_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413698_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 13:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T13:00:04+0000\'\u003e13\\/Jul\\/12 13:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eBut why? Does lucene store freq() when it is 0 as well, so a whole block with v==1 will be more possible?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eA whole block of 1s can easily happen: if all freqs are one (the term always occurred only once in each document), or if the term occurs in every document than the delta between docIDs is always 1.\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t think we should ever hit an all 0s block today (hmm: except for positions, if the given term always occurred at the first position in each doc).\u003c\\/p\u003e\\n\\n\u003cp\u003eWe could in theory subtract 1 from all these deltas (except the first one!  so maybe we add one to the docID to begin with...) so that these turn into all 0s blocks, but then at decode time we\'d have to add 1 back and I\'m not sure that\'d net\\/net be a win.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413698_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413698_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 13:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T13:00:04+0000\'\u003e13\\/Jul\\/12 13:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     But why? Does lucene store freq() when it is 0 as well, so a whole block with v==1 will be more possible?  \\n\\n A whole block of 1s can easily happen: if all freqs are one (the term always occurred only once in each document), or if the term occurs in every document than the delta between docIDs is always 1. \\n\\n I don\'t think we should ever hit an all 0s block today (hmm: except for positions, if the given term always occurred at the first position in each doc). \\n\\n We could in theory subtract 1 from all these deltas (except the first one!  so maybe we add one to the docID to begin with...) so that these turn into all 0s blocks, but then at decode time we\'d have to add 1 back and I\'m not sure that\'d net\\/net be a win.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413709\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413709&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413709\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413709_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413709_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 13:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T13:17:40+0000\'\u003e13\\/Jul\\/12 13:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eWe could in theory subtract 1 from all these deltas (except the first one! so maybe we add one to the docID to begin with...) so that these turn into all 0s blocks, but then at decode time we\'d have to add 1 back and I\'m not sure that\'d net\\/net be a win.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHmm , so current strategy is: 1.for docIDs, store v\u003cspan class=\\\"error\\\"\u003e&#91;i+1&#93;\u003c\\/span\u003e-v\u003cspan class=\\\"error\\\"\u003e&#91;i&#93;\u003c\\/span\u003e-1; 2. for freq and positions, store v\u003cspan class=\\\"error\\\"\u003e&#91;i&#93;\u003c\\/span\u003e directly? Yes there are blocks with all 0s, although very rare to see. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413709_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413709_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 13:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T13:17:40+0000\'\u003e13\\/Jul\\/12 13:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     We could in theory subtract 1 from all these deltas (except the first one! so maybe we add one to the docID to begin with...) so that these turn into all 0s blocks, but then at decode time we\'d have to add 1 back and I\'m not sure that\'d net\\/net be a win.  \\n\\n Hmm , so current strategy is: 1.for docIDs, store v &#91;i+1&#93; -v &#91;i&#93; -1; 2. for freq and positions, store v &#91;i&#93;  directly? Yes there are blocks with all 0s, although very rare to see.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413719\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413719&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413719\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413719_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413719_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 13:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T13:26:22+0000\'\u003e13\\/Jul\\/12 13:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNo, for docIDs we store docID - lastDocID.  So that delta can be 0 for the first doc in a posting list, and then &gt;= 1 thereafter.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut an all 0s block is possible if a bunch of terms in a row occurred only in doc 0.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413719_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413719_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 13:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T13:26:22+0000\'\u003e13\\/Jul\\/12 13:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    No, for docIDs we store docID - lastDocID.  So that delta can be 0 for the first doc in a posting list, and then &gt;= 1 thereafter. \\n\\n But an all 0s block is possible if a bunch of terms in a row occurred only in doc 0.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413781\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413781&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413781\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413781_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413781_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 14:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T14:37:38+0000\'\u003e13\\/Jul\\/12 14:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 13\\/Jul\\/12 16:00\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis patch cut the extra header and merge numBytes into header. Also, it store only one int when a whole block share the same value. So no matter which strategy we use (d-gap, or d-gap minus 1), it will work well.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd here are the changes between different methods, postingsformat=PFor:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003emethod          base     all_0s  all_1s  all_Vs  all_Vs+header_cut\\nindex time(s):  324     315     279     279     291\\nindex size(MB): 591     591     589     589     577\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003epostingsFormat=For: \u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003emethod          base     all_Vs+header_cut\\nindex time(s):  250     251\\nindex size(MB): 611     598\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003ewhere raw refers to the version when numBits==0 isn\'t supported, all_0s refers to last patch, all_Vs+header_cut refers to this patch. As for PFor, now the index size is almost equal to Lucene40(590.7M vs 590.0M).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413781_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413781_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 14:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T14:37:38+0000\'\u003e13\\/Jul\\/12 14:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 13\\/Jul\\/12 16:00\\\"\u003eedited\u003c\\/span\u003e                   This patch cut the extra header and merge numBytes into header. Also, it store only one int when a whole block share the same value. So no matter which strategy we use (d-gap, or d-gap minus 1), it will work well. \\n\\n And here are the changes between different methods, postingsformat=PFor: \\n  \\n method          base     all_0s  all_1s  all_Vs  all_Vs+header_cut\\nindex time(s):  324     315     279     279     291\\nindex size(MB): 591     591     589     589     577\\n \\n  \\n\\n postingsFormat=For:  \\n  \\n method          base     all_Vs+header_cut\\nindex time(s):  250     251\\nindex size(MB): 611     598\\n \\n  \\n\\n where raw refers to the version when numBits==0 isn\'t supported, all_0s refers to last patch, all_Vs+header_cut refers to this patch. As for PFor, now the index size is almost equal to Lucene40(590.7M vs 590.0M).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413919\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413919&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413919\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413919_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413919_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 18:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T18:07:54+0000\'\u003e13\\/Jul\\/12 18:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eprevious patch is a little messy, do some cleanups.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413919_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413919_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 18:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T18:07:54+0000\'\u003e13\\/Jul\\/12 18:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    previous patch is a little messy, do some cleanups.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413935\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413935&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413935\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413935_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413935_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 18:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T18:22:04+0000\'\u003e13\\/Jul\\/12 18:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThose are interesting results!  Curious how much faster indexing is for PFor if you use all_Vs; cutting the header is also a nice reduction on index size.\u003c\\/p\u003e\\n\\n\u003cp\u003eInstead of having P\\/ForUtil reach up into P\\/ForPostingsFormat for the default block size, I think we can assume the int[] array length (of the decoded buffer) is the size of the block?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13413935_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413935_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 18:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T18:22:04+0000\'\u003e13\\/Jul\\/12 18:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Those are interesting results!  Curious how much faster indexing is for PFor if you use all_Vs; cutting the header is also a nice reduction on index size. \\n\\n Instead of having P\\/ForUtil reach up into P\\/ForPostingsFormat for the default block size, I think we can assume the int[] array length (of the decoded buffer) is the size of the block?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13413942\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13413942&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13413942\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413942_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413942_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 18:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T18:30:35+0000\'\u003e13\\/Jul\\/12 18:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eInstead of having P\\/ForUtil reach up into P\\/ForPostingsFormat for the default block size, I think we can assume the int[] array length (of the decoded buffer) is the size of the block?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003e+1, I\'ll update the patch\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13413942_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13413942_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/12 18:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-13T18:30:35+0000\'\u003e13\\/Jul\\/12 18:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Instead of having P\\/ForUtil reach up into P\\/ForPostingsFormat for the default block size, I think we can assume the int[] array length (of the decoded buffer) is the size of the block?  \\n +1, I\'ll update the patch              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13414626\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13414626&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13414626\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13414626_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13414626_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jul\\/12 13:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-15T13:15:38+0000\'\u003e15\\/Jul\\/12 13:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMaybe we should cleanup those patches first? The latest \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-3892\\\" title=\\\"Add a useful intblock postings format (eg, FOR, PFOR, PFORDelta, Simple9\\/16\\/64, etc.)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-3892\\\"\u003e\u003cdel\u003eLUCENE-3892\u003c\\/del\u003e\u003c\\/a\u003e-for&amp;pfor-with-javadoc.patch should be a baseline for current methods. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch marked as \\\"iterate numbits\\\" uses previous method to estimate compressed size, ignoring all forced exception, while the other one marked as \\\"slow estimate\\\" will fakely compress the whole block several times, and get the lower bound of our compressed size. Here is a comparison: \u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003emethod         header_cut iter_numBits slow_estimate\\nindex size(M)  577        573          554\\nindex time(s)  275        258          296 \\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e  \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13414626_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13414626_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Jul\\/12 13:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-15T13:15:38+0000\'\u003e15\\/Jul\\/12 13:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Maybe we should cleanup those patches first? The latest   LUCENE-3892  -for&amp;pfor-with-javadoc.patch should be a baseline for current methods.  \\n\\n The patch marked as \\\"iterate numbits\\\" uses previous method to estimate compressed size, ignoring all forced exception, while the other one marked as \\\"slow estimate\\\" will fakely compress the whole block several times, and get the lower bound of our compressed size. Here is a comparison:  \\n  \\n method         header_cut iter_numBits slow_estimate\\nindex size(M)  577        573          554\\nindex time(s)  275        258          296 \\n \\n                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13415072\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13415072&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13415072\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13415072_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415072_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 12:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T12:55:27+0000\'\u003e16\\/Jul\\/12 12:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Billy, I committed last baseline patch!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13415072_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415072_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 12:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T12:55:27+0000\'\u003e16\\/Jul\\/12 12:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Billy, I committed last baseline patch!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13415085\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13415085&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13415085\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13415085_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415085_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 13:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T13:10:22+0000\'\u003e16\\/Jul\\/12 13:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI opened \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-4225\\\" title=\\\"New FixedPostingsFormat for less overhead than SepPostingsFormat\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-4225\\\"\u003e\u003cdel\u003eLUCENE-4225\u003c\\/del\u003e\u003c\\/a\u003e with a new base PostingsFormat that gives better perf for For than Sep...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13415085_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415085_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 13:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T13:10:22+0000\'\u003e16\\/Jul\\/12 13:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I opened   LUCENE-4225   with a new base PostingsFormat that gives better perf for For than Sep...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13415226\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13415226&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13415226\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13415226_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415226_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 15:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T15:34:40+0000\'\u003e16\\/Jul\\/12 15:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think a good thing to explore next is to stop using our own packed ints impl and instead cutover to oal.util.packed?  (Since so much effort has gone into making those impls fast).\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-4161\\\" title=\\\"Make PackedInts usable by codecs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-4161\\\"\u003e\u003cdel\u003eLUCENE-4161\u003c\\/del\u003e\u003c\\/a\u003e has already taken a big step towards making them usable ... we should prototype an initial cutover and then iterate?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13415226_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415226_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 15:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T15:34:40+0000\'\u003e16\\/Jul\\/12 15:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think a good thing to explore next is to stop using our own packed ints impl and instead cutover to oal.util.packed?  (Since so much effort has gone into making those impls fast). \\n\\n   LUCENE-4161   has already taken a big step towards making them usable ... we should prototype an initial cutover and then iterate?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13415230\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13415230&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13415230\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13415230_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415230_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 15:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T15:43:21+0000\'\u003e16\\/Jul\\/12 15:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e+1 Don\'t hesitate to tell me if you\'re missing methods for this issue (I\'m thinking at least of bulk int[] read\\/write, we currently only make it possible with longs).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13415230_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415230_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 15:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T15:43:21+0000\'\u003e16\\/Jul\\/12 15:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    +1 Don\'t hesitate to tell me if you\'re missing methods for this issue (I\'m thinking at least of bulk int[] read\\/write, we currently only make it possible with longs).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13415236\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13415236&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13415236\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13415236_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415236_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 15:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T15:49:54+0000\'\u003e16\\/Jul\\/12 15:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI opened \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-4225\\\" title=\\\"New FixedPostingsFormat for less overhead than SepPostingsFormat\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-4225\\\"\u003e\u003cdel\u003eLUCENE-4225\u003c\\/del\u003e\u003c\\/a\u003e with a new base PostingsFormat that gives better perf for For than Sep...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eWow, the result looks great! Quite curious why some queries improve so much, like AndHighHigh.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-4161\\\" title=\\\"Make PackedInts usable by codecs\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-4161\\\"\u003e\u003cdel\u003eLUCENE-4161\u003c\\/del\u003e\u003c\\/a\u003e has already taken a big step towards making them usable ... we should prototype an initial cutover and then iterate?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eYes, but we should make the PostingsFormat pass test first? Currently it also fails some tests for ForPF.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13415236_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415236_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 15:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T15:49:54+0000\'\u003e16\\/Jul\\/12 15:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I opened   LUCENE-4225   with a new base PostingsFormat that gives better perf for For than Sep...  \\n Wow, the result looks great! Quite curious why some queries improve so much, like AndHighHigh. \\n\\n    LUCENE-4161   has already taken a big step towards making them usable ... we should prototype an initial cutover and then iterate?  \\n Yes, but we should make the PostingsFormat pass test first? Currently it also fails some tests for ForPF.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13415335\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13415335&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13415335\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13415335_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415335_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 16:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T16:01:49+0000\'\u003e16\\/Jul\\/12 16:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eYes, but we should make the PostingsFormat pass test first? Currently it also fails some tests for ForPF.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eUh oh I didn\'t know tests are failing on the branch: do you have a seed?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13415335_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13415335_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/12 16:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-16T16:01:49+0000\'\u003e16\\/Jul\\/12 16:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Yes, but we should make the PostingsFormat pass test first? Currently it also fails some tests for ForPF.  \\n\\n Uh oh I didn\'t know tests are failing on the branch: do you have a seed?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13419144\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13419144&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13419144\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13419144_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13419144_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/12 13:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-20T13:51:53+0000\'\u003e20\\/Jul\\/12 13:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 20\\/Jul\\/12 13:52\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAn initial try with PackedInts in current trunk version. I replaced all the int[] buffer with long[] buffer so we can use the API directly. I don\'t quite understand the Writer part, so we have to save each long value one by one.\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, it is the Reader part we are concerned:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base QPS packedStdDev packed      Pct diff\\n         AndHighHigh       29.60        1.56       23.78        0.51  -25% -  -13%\\n          AndHighMed       74.68        3.92       53.15        2.31  -35% -  -21%\\n              Fuzzy1       88.23        1.21       87.13        1.41   -4% -    1%\\n              Fuzzy2       30.09        0.45       29.47        0.47   -5% -    1%\\n              IntNRQ       41.96        3.88       38.16        2.48  -22% -    6%\\n          OrHighHigh       17.56        0.34       15.45        0.15  -14% -   -9%\\n           OrHighMed       34.71        0.76       30.77        0.53  -14% -   -7%\\n            PKLookup      111.00        1.90      110.52        1.59   -3% -    2%\\n              Phrase        9.03        0.23        7.62        0.41  -22% -   -8%\\n             Prefix3      123.56        8.42      110.94        5.43  -20% -    1%\\n             Respell      102.37        1.11      101.79        1.38   -2% -    1%\\n        SloppyPhrase        3.97        0.19        3.52        0.07  -17% -   -4%\\n            SpanNear        8.24        0.18        7.22        0.25  -17% -   -7%\\n                Term       45.16        3.15       37.47        2.32  -27% -   -5%\\n        TermBGroup1M       17.19        1.09       15.86        0.77  -17% -    3%\\n      TermBGroup1M1P       23.47        1.66       20.43        1.16  -23% -   -1%\\n         TermGroup1M       19.20        1.14       17.73        0.84  -16% -    2%\\n            Wildcard       42.75        3.27       36.75        1.96  -24% -   -1%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eMaybe we should try PACKED_SINGLE_BLOCK for some special value of numBits, instead of using PACKED all the time?\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks to Adrien, we have a more direct API in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-4239\\\" title=\\\"Provide access to PackedInts&#39; low-level blocks &lt;-&gt; values conversion methods\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-4239\\\"\u003e\u003cdel\u003eLUCENE-4239\u003c\\/del\u003e\u003c\\/a\u003e, I\'m trying that now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13419144_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13419144_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/12 13:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-20T13:51:53+0000\'\u003e20\\/Jul\\/12 13:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 20\\/Jul\\/12 13:52\\\"\u003eedited\u003c\\/span\u003e                   An initial try with PackedInts in current trunk version. I replaced all the int[] buffer with long[] buffer so we can use the API directly. I don\'t quite understand the Writer part, so we have to save each long value one by one. \\n\\n However, it is the Reader part we are concerned: \\n  \\n                 Task    QPS base StdDev base QPS packedStdDev packed      Pct diff\\n         AndHighHigh       29.60        1.56       23.78        0.51  -25% -  -13%\\n          AndHighMed       74.68        3.92       53.15        2.31  -35% -  -21%\\n              Fuzzy1       88.23        1.21       87.13        1.41   -4% -    1%\\n              Fuzzy2       30.09        0.45       29.47        0.47   -5% -    1%\\n              IntNRQ       41.96        3.88       38.16        2.48  -22% -    6%\\n          OrHighHigh       17.56        0.34       15.45        0.15  -14% -   -9%\\n           OrHighMed       34.71        0.76       30.77        0.53  -14% -   -7%\\n            PKLookup      111.00        1.90      110.52        1.59   -3% -    2%\\n              Phrase        9.03        0.23        7.62        0.41  -22% -   -8%\\n             Prefix3      123.56        8.42      110.94        5.43  -20% -    1%\\n             Respell      102.37        1.11      101.79        1.38   -2% -    1%\\n        SloppyPhrase        3.97        0.19        3.52        0.07  -17% -   -4%\\n            SpanNear        8.24        0.18        7.22        0.25  -17% -   -7%\\n                Term       45.16        3.15       37.47        2.32  -27% -   -5%\\n        TermBGroup1M       17.19        1.09       15.86        0.77  -17% -    3%\\n      TermBGroup1M1P       23.47        1.66       20.43        1.16  -23% -   -1%\\n         TermGroup1M       19.20        1.14       17.73        0.84  -16% -    2%\\n            Wildcard       42.75        3.27       36.75        1.96  -24% -   -1%\\n \\n  \\n\\n Maybe we should try PACKED_SINGLE_BLOCK for some special value of numBits, instead of using PACKED all the time? \\n\\n Thanks to Adrien, we have a more direct API in   LUCENE-4239  , I\'m trying that now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13419359\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13419359&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13419359\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13419359_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13419359_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/12 17:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-20T17:15:04+0000\'\u003e20\\/Jul\\/12 17:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch with the decoder interface, mentioned in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-4239\\\" title=\\\"Provide access to PackedInts&#39; low-level blocks &lt;-&gt; values conversion methods\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-4239\\\"\u003e\u003cdel\u003eLUCENE-4239\u003c\\/del\u003e\u003c\\/a\u003e. I\'m afraid that the for loop of readLong() hurts the performance. Here is the comparison against last patch:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh       21.89        0.64       22.14        0.43   -3% -    6%\\n          AndHighMed       52.23        2.34       52.94        1.74   -6% -    9%\\n              Fuzzy1       86.61        1.63       87.29        3.14   -4% -    6%\\n              Fuzzy2       30.54        0.54       30.95        1.18   -4% -    7%\\n              IntNRQ       38.00        1.23       38.14        1.04   -5% -    6%\\n          OrHighHigh       16.37        0.21       16.68        0.79   -4% -    8%\\n           OrHighMed       39.59        0.69       40.34        2.16   -5% -    9%\\n            PKLookup      111.51        1.34      112.78        1.37   -1% -    3%\\n              Phrase        4.54        0.12        4.52        0.13   -5% -    5%\\n             Prefix3      107.85        2.51      109.13        2.10   -3% -    5%\\n             Respell      123.21        2.18      125.15        5.01   -4% -    7%\\n        SloppyPhrase        6.51        0.11        6.44        0.29   -7% -    5%\\n            SpanNear        5.36        0.16        5.31        0.14   -6% -    4%\\n                Term       42.49        1.66       44.10        1.86   -4% -   12%\\n        TermBGroup1M       17.86        0.80       17.82        0.51   -7% -    7%\\n      TermBGroup1M1P       21.08        0.55       21.10        0.62   -5% -    5%\\n         TermGroup1M       19.57        0.82       19.57        0.64   -7% -    7%\\n            Wildcard       43.99        1.21       44.80        1.10   -3% -    7%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13419359_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13419359_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/12 17:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-20T17:15:04+0000\'\u003e20\\/Jul\\/12 17:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch with the decoder interface, mentioned in   LUCENE-4239  . I\'m afraid that the for loop of readLong() hurts the performance. Here is the comparison against last patch: \\n  \\n                 Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh       21.89        0.64       22.14        0.43   -3% -    6%\\n          AndHighMed       52.23        2.34       52.94        1.74   -6% -    9%\\n              Fuzzy1       86.61        1.63       87.29        3.14   -4% -    6%\\n              Fuzzy2       30.54        0.54       30.95        1.18   -4% -    7%\\n              IntNRQ       38.00        1.23       38.14        1.04   -5% -    6%\\n          OrHighHigh       16.37        0.21       16.68        0.79   -4% -    8%\\n           OrHighMed       39.59        0.69       40.34        2.16   -5% -    9%\\n            PKLookup      111.51        1.34      112.78        1.37   -1% -    3%\\n              Phrase        4.54        0.12        4.52        0.13   -5% -    5%\\n             Prefix3      107.85        2.51      109.13        2.10   -3% -    5%\\n             Respell      123.21        2.18      125.15        5.01   -4% -    7%\\n        SloppyPhrase        6.51        0.11        6.44        0.29   -7% -    5%\\n            SpanNear        5.36        0.16        5.31        0.14   -6% -    4%\\n                Term       42.49        1.66       44.10        1.86   -4% -   12%\\n        TermBGroup1M       17.86        0.80       17.82        0.51   -7% -    7%\\n      TermBGroup1M1P       21.08        0.55       21.10        0.62   -5% -    5%\\n         TermGroup1M       19.57        0.82       19.57        0.64   -7% -    7%\\n            Wildcard       43.99        1.21       44.80        1.10   -3% -    7%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13419381\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13419381&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13419381\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13419381_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13419381_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/12 17:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-20T17:46:17+0000\'\u003e20\\/Jul\\/12 17:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eI\'m afraid that the for loop of readLong() hurts the performance. Here is the comparison against last patch:\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think so too. I think in each enum, up front you want a pre-allocated byte[] (maximum size possible for the block),\u003cbr\\/\u003e\\nand you do ByteBuffer.wrap\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/error.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e.asLongBuffer.\u003c\\/p\u003e\\n\\n\u003cp\u003eafter you read the header, call readBytes() and then just rewind()?\u003c\\/p\u003e\\n\\n\u003cp\u003eSo this is just like what you do now in the branch, except with LongBuffer instead of IntBuffer\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13419381_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13419381_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/12 17:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-20T17:46:17+0000\'\u003e20\\/Jul\\/12 17:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n I\'m afraid that the for loop of readLong() hurts the performance. Here is the comparison against last patch:  \\n\\n I think so too. I think in each enum, up front you want a pre-allocated byte[] (maximum size possible for the block), \\nand you do ByteBuffer.wrap .asLongBuffer. \\n\\n after you read the header, call readBytes() and then just rewind()? \\n\\n So this is just like what you do now in the branch, except with LongBuffer instead of IntBuffer              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13419444\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13419444&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13419444\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13419444_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13419444_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/12 18:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-20T18:57:20+0000\'\u003e20\\/Jul\\/12 18:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 20\\/Jul\\/12 18:59\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSo I changed the patch to readBytes():\u003c\\/p\u003e\\n\\n\u003cp\u003ebase: PackedInts.getReaderNoHeader().get(long[]), file io is handled by PackedInts.\u003cbr\\/\u003e\\ncomp: PackedInts.getDecoder().decode(LongBuffer,LongBuffer), use byte[] to hold the compressed block, and ByteBuffer.wrap().asLongBuffer as a wrapper.\u003c\\/p\u003e\\n\\n\u003cp\u003eWell, not as expected.\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh       23.78        1.06       23.38        0.42   -7% -    4%\\n          AndHighMed       52.06        3.28       50.82        1.21  -10% -    6%\\n              Fuzzy1       88.56        0.59       88.98        2.38   -2% -    3%\\n              Fuzzy2       28.80        0.36       28.97        0.83   -3% -    4%\\n              IntNRQ       41.92        1.67       41.34        0.50   -6% -    3%\\n          OrHighHigh       15.85        0.45       15.89        0.39   -4% -    5%\\n           OrHighMed       20.38        0.61       20.50        0.62   -5% -    6%\\n            PKLookup      110.72        2.19      111.74        2.53   -3% -    5%\\n              Phrase        7.51        0.12        7.05        0.18   -9% -   -2%\\n             Prefix3      106.27        2.65      105.37        1.13   -4% -    2%\\n             Respell      112.03        0.81      112.79        2.71   -2% -    3%\\n        SloppyPhrase       15.43        0.48       14.92        0.27   -7% -    1%\\n            SpanNear        3.52        0.10        3.41        0.06   -7% -    1%\\n                Term       39.19        1.34       39.04        0.81   -5% -    5%\\n        TermBGroup1M       18.45        0.68       18.33        0.56   -7% -    6%\\n      TermBGroup1M1P       22.78        0.90       22.26        0.56   -8% -    4%\\n         TermGroup1M       19.50        0.73       19.42        0.63   -7% -    6%\\n            Wildcard       29.56        1.13       29.18        0.28   -5% -    3%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13419444_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13419444_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/12 18:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-20T18:57:20+0000\'\u003e20\\/Jul\\/12 18:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 20\\/Jul\\/12 18:59\\\"\u003eedited\u003c\\/span\u003e                   So I changed the patch to readBytes(): \\n\\n base: PackedInts.getReaderNoHeader().get(long[]), file io is handled by PackedInts. \\ncomp: PackedInts.getDecoder().decode(LongBuffer,LongBuffer), use byte[] to hold the compressed block, and ByteBuffer.wrap().asLongBuffer as a wrapper. \\n\\n Well, not as expected. \\n  \\n                 Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh       23.78        1.06       23.38        0.42   -7% -    4%\\n          AndHighMed       52.06        3.28       50.82        1.21  -10% -    6%\\n              Fuzzy1       88.56        0.59       88.98        2.38   -2% -    3%\\n              Fuzzy2       28.80        0.36       28.97        0.83   -3% -    4%\\n              IntNRQ       41.92        1.67       41.34        0.50   -6% -    3%\\n          OrHighHigh       15.85        0.45       15.89        0.39   -4% -    5%\\n           OrHighMed       20.38        0.61       20.50        0.62   -5% -    6%\\n            PKLookup      110.72        2.19      111.74        2.53   -3% -    5%\\n              Phrase        7.51        0.12        7.05        0.18   -9% -   -2%\\n             Prefix3      106.27        2.65      105.37        1.13   -4% -    2%\\n             Respell      112.03        0.81      112.79        2.71   -2% -    3%\\n        SloppyPhrase       15.43        0.48       14.92        0.27   -7% -    1%\\n            SpanNear        3.52        0.10        3.41        0.06   -7% -    1%\\n                Term       39.19        1.34       39.04        0.81   -5% -    5%\\n        TermBGroup1M       18.45        0.68       18.33        0.56   -7% -    6%\\n      TermBGroup1M1P       22.78        0.90       22.26        0.56   -8% -    4%\\n         TermGroup1M       19.50        0.73       19.42        0.63   -7% -    6%\\n            Wildcard       29.56        1.13       29.18        0.28   -5% -    3%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13420732\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13420732&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13420732\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13420732_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13420732_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/12 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-23T16:02:57+0000\'\u003e23\\/Jul\\/12 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFYI: I committed the TestPostingsFormat here to trunk\\/4.x to get it going in jenkins.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will merge back to the branch... it can then be modified\\/improved as usual!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13420732_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13420732_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/12 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-23T16:02:57+0000\'\u003e23\\/Jul\\/12 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    FYI: I committed the TestPostingsFormat here to trunk\\/4.x to get it going in jenkins. \\n\\n I will merge back to the branch... it can then be modified\\/improved as usual!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13425010\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13425010&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13425010\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13425010_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425010_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 17:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T17:07:40+0000\'\u003e30\\/Jul\\/12 17:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 30\\/Jul\\/12 17:36\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePrevious experiments showed a net loss with packed ints API, however there\'re slight difference e.g. all-value-the-same case is not handled equally. I suppose these two patches should make the comparison fair enough. \u003c\\/p\u003e\\n\\n\u003cp\u003eBase: BlockForPF + hardcoded decoder\u003cbr\\/\u003e\\nComp: BlockForPF + PackedInts.Decoder\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh       25.66        0.31       22.61        1.21  -17% -   -6%\\n          AndHighMed       74.17        1.45       59.48        3.62  -26% -  -13%\\n              Fuzzy1       95.60        1.51       96.06        2.22   -3% -    4%\\n              Fuzzy2       28.67        0.50       28.51        0.75   -4% -    3%\\n              IntNRQ       33.31        0.60       30.73        1.51  -13% -   -1%\\n          OrHighHigh       17.58        0.59       16.22        1.18  -17% -    2%\\n           OrHighMed       34.42        0.93       32.14        2.33  -15% -    2%\\n            PKLookup      217.08        4.25      213.76        1.37   -4% -    1%\\n              Phrase        6.10        0.12        5.34        0.07  -15% -   -9%\\n             Prefix3       77.27        1.26       70.42        2.87  -13% -   -3%\\n             Respell       92.91        1.34       92.61        1.83   -3% -    3%\\n        SloppyPhrase        5.35        0.16        5.00        0.29  -14% -    1%\\n            SpanNear        6.05        0.15        5.47        0.07  -12% -   -6%\\n                Term       37.62        0.32       33.08        1.70  -17% -   -6%\\n        TermBGroup1M       17.45        0.64       16.40        0.73  -13% -    1%\\n      TermBGroup1M1P       25.20        0.69       23.47        1.24  -14% -    0%\\n         TermGroup1M       18.53        0.65       17.40        0.76  -13% -    1%\\n            Wildcard       44.39        0.49       40.51        1.69  -13% -   -3%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eHmm, quite strange that we are already getting perf loss with baseline patch:\u003c\\/p\u003e\\n\\n\u003cp\u003eBase: BlockForPF in current branch\u003cbr\\/\u003e\\nComp: BlockForPF + hardcoded decoder(patch file)\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh       26.71        0.98       24.15        0.82  -15% -   -2%\\n          AndHighMed       73.37        5.01       61.30        1.97  -24% -   -7%\\n              Fuzzy1       85.73        4.95       84.30        1.79   -9% -    6%\\n              Fuzzy2       30.15        2.05       29.52        0.66  -10% -    7%\\n              IntNRQ       38.56        1.69       36.91        1.27  -11% -    3%\\n          OrHighHigh       16.98        1.48       16.82        0.94  -13% -   14%\\n           OrHighMed       34.60        2.79       34.70        2.22  -13% -   16%\\n            PKLookup      214.93        3.99      213.86        1.23   -2% -    1%\\n              Phrase       11.53        0.23       10.75        0.42  -12% -   -1%\\n             Prefix3      107.15        3.83      102.12        2.69  -10% -    1%\\n             Respell       87.41        5.41       86.08        1.76   -9% -    7%\\n        SloppyPhrase        5.90        0.15        5.66        0.21   -9% -    2%\\n            SpanNear        4.99        0.12        4.79        0.01   -6% -   -1%\\n                Term       49.37        2.38       45.53        0.49  -12% -   -2%\\n        TermBGroup1M       17.23        0.40       16.44        0.53   -9% -    0%\\n      TermBGroup1M1P       22.02        0.50       22.42        0.60   -3% -    7%\\n         TermGroup1M       13.65        0.29       13.05        0.28   -8% -    0%\\n            Wildcard       48.73        2.01       46.35        1.31  -11% -    2%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13425010_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425010_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 17:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T17:07:40+0000\'\u003e30\\/Jul\\/12 17:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 30\\/Jul\\/12 17:36\\\"\u003eedited\u003c\\/span\u003e                   Previous experiments showed a net loss with packed ints API, however there\'re slight difference e.g. all-value-the-same case is not handled equally. I suppose these two patches should make the comparison fair enough.  \\n\\n Base: BlockForPF + hardcoded decoder \\nComp: BlockForPF + PackedInts.Decoder \\n  \\n                 Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh       25.66        0.31       22.61        1.21  -17% -   -6%\\n          AndHighMed       74.17        1.45       59.48        3.62  -26% -  -13%\\n              Fuzzy1       95.60        1.51       96.06        2.22   -3% -    4%\\n              Fuzzy2       28.67        0.50       28.51        0.75   -4% -    3%\\n              IntNRQ       33.31        0.60       30.73        1.51  -13% -   -1%\\n          OrHighHigh       17.58        0.59       16.22        1.18  -17% -    2%\\n           OrHighMed       34.42        0.93       32.14        2.33  -15% -    2%\\n            PKLookup      217.08        4.25      213.76        1.37   -4% -    1%\\n              Phrase        6.10        0.12        5.34        0.07  -15% -   -9%\\n             Prefix3       77.27        1.26       70.42        2.87  -13% -   -3%\\n             Respell       92.91        1.34       92.61        1.83   -3% -    3%\\n        SloppyPhrase        5.35        0.16        5.00        0.29  -14% -    1%\\n            SpanNear        6.05        0.15        5.47        0.07  -12% -   -6%\\n                Term       37.62        0.32       33.08        1.70  -17% -   -6%\\n        TermBGroup1M       17.45        0.64       16.40        0.73  -13% -    1%\\n      TermBGroup1M1P       25.20        0.69       23.47        1.24  -14% -    0%\\n         TermGroup1M       18.53        0.65       17.40        0.76  -13% -    1%\\n            Wildcard       44.39        0.49       40.51        1.69  -13% -   -3%\\n \\n  \\n\\n Hmm, quite strange that we are already getting perf loss with baseline patch: \\n\\n Base: BlockForPF in current branch \\nComp: BlockForPF + hardcoded decoder(patch file) \\n  \\n                 Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh       26.71        0.98       24.15        0.82  -15% -   -2%\\n          AndHighMed       73.37        5.01       61.30        1.97  -24% -   -7%\\n              Fuzzy1       85.73        4.95       84.30        1.79   -9% -    6%\\n              Fuzzy2       30.15        2.05       29.52        0.66  -10% -    7%\\n              IntNRQ       38.56        1.69       36.91        1.27  -11% -    3%\\n          OrHighHigh       16.98        1.48       16.82        0.94  -13% -   14%\\n           OrHighMed       34.60        2.79       34.70        2.22  -13% -   16%\\n            PKLookup      214.93        3.99      213.86        1.23   -2% -    1%\\n              Phrase       11.53        0.23       10.75        0.42  -12% -   -1%\\n             Prefix3      107.15        3.83      102.12        2.69  -10% -    1%\\n             Respell       87.41        5.41       86.08        1.76   -9% -    7%\\n        SloppyPhrase        5.90        0.15        5.66        0.21   -9% -    2%\\n            SpanNear        4.99        0.12        4.79        0.01   -6% -   -1%\\n                Term       49.37        2.38       45.53        0.49  -12% -   -2%\\n        TermBGroup1M       17.23        0.40       16.44        0.53   -9% -    0%\\n      TermBGroup1M1P       22.02        0.50       22.42        0.60   -3% -    7%\\n         TermGroup1M       13.65        0.29       13.05        0.28   -8% -    0%\\n            Wildcard       48.73        2.01       46.35        1.31  -11% -    2%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13425153\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13425153&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13425153\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425153_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425153_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 19:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T19:39:37+0000\'\u003e30\\/Jul\\/12 19:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m confused by these two patches: are they against trunk?  How come eg they have mods to build.xml?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425153_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425153_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 19:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T19:39:37+0000\'\u003e30\\/Jul\\/12 19:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m confused by these two patches: are they against trunk?  How come eg they have mods to build.xml?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13425246\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13425246&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13425246\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425246_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425246_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 21:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T21:15:14+0000\'\u003e30\\/Jul\\/12 21:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK I think I understand the two patches now.\u003c\\/p\u003e\\n\\n\u003cp\u003eFirst, the build.xml changes are noise I think.  Second, the patches\u003cbr\\/\u003e\\nboth mix in the removal of the current For\\/PFor postings formats based\u003cbr\\/\u003e\\non sep (I will separately commit this removal: BlockPF is faster).\u003c\\/p\u003e\\n\\n\u003cp\u003eThen, one patch (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-3892\\\" title=\\\"Add a useful intblock postings format (eg, FOR, PFOR, PFORDelta, Simple9\\/16\\/64, etc.)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-3892\\\"\u003e\u003cdel\u003eLUCENE-3892\u003c\\/del\u003e\u003c\\/a\u003e-blockFor&amp;hardcode(base).patch) keeps\u003cbr\\/\u003e\\nusing the separate packed-ints impl we have, but cuts over to\u003cbr\\/\u003e\\nLongBuffer instead of int[] for the decoded values (still uses\u003cbr\\/\u003e\\nIntBuffer for the encoded values), while the other patch\u003cbr\\/\u003e\\n(\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-3892\\\" title=\\\"Add a useful intblock postings format (eg, FOR, PFOR, PFORDelta, Simple9\\/16\\/64, etc.)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-3892\\\"\u003e\u003cdel\u003eLUCENE-3892\u003c\\/del\u003e\u003c\\/a\u003e-blockFor&amp;packedecoder(comp).patch) uses oal.util.packed\u003cbr\\/\u003e\\nand LongBuffer for both encoded and decoded values.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo it\'s nice to see that \\\"merely\\\" switching to LongBuffer to pass\u003cbr\\/\u003e\\nencoded\\/decoded values around doesn\'t seem to hurt much, except for\u003cbr\\/\u003e\\nAnd queries (odd?), but then switching to oal.util.packed does hurt\u003cbr\\/\u003e\\n(also odd because our packed ints impl has been heavily optimized\u003cbr\\/\u003e\\nlately).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425246_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425246_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 21:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T21:15:14+0000\'\u003e30\\/Jul\\/12 21:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK I think I understand the two patches now. \\n\\n First, the build.xml changes are noise I think.  Second, the patches \\nboth mix in the removal of the current For\\/PFor postings formats based \\non sep (I will separately commit this removal: BlockPF is faster). \\n\\n Then, one patch (  LUCENE-3892  -blockFor&amp;hardcode(base).patch) keeps \\nusing the separate packed-ints impl we have, but cuts over to \\nLongBuffer instead of int[] for the decoded values (still uses \\nIntBuffer for the encoded values), while the other patch \\n(  LUCENE-3892  -blockFor&amp;packedecoder(comp).patch) uses oal.util.packed \\nand LongBuffer for both encoded and decoded values. \\n\\n So it\'s nice to see that \\\"merely\\\" switching to LongBuffer to pass \\nencoded\\/decoded values around doesn\'t seem to hurt much, except for \\nAnd queries (odd?), but then switching to oal.util.packed does hurt \\n(also odd because our packed ints impl has been heavily optimized \\nlately).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13425296\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13425296&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13425296\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13425296_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425296_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 22:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T22:00:27+0000\'\u003e30\\/Jul\\/12 22:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMy benchmark results are a little different but oal.util.packed is still behind... (it compares the current branch vs. patched with PackedInts):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                TaskQPS pforcodecStdDev pforcodecQPS pforcodec-packedintsStdDev pforcodec-packedints      Pct diff\\n              Phrase       38.21        3.01       35.73        2.41  -19% -    8%\\n            SpanNear       27.99        1.30       26.30        1.23  -14% -    3%\\n        SloppyPhrase       43.32        2.98       41.02        2.53  -16% -    7%\\n          AndHighMed      230.23        8.48      219.88        9.35  -11% -    3%\\n         AndHighHigh       52.53        2.02       50.80        2.62  -11% -    5%\\n              IntNRQ       43.24        3.42       41.84        2.79  -16% -   12%\\n            Wildcard      113.26        3.17      109.91        3.50   -8% -    3%\\n             Prefix3      194.56        9.56      189.39        9.64  -11% -    7%\\n                Term      301.86       14.49      295.28       17.51  -12% -    8%\\n           OrHighMed      100.60        8.30       99.06        8.00  -16% -   15%\\n          OrHighHigh       32.35        2.92       31.90        2.88  -17% -   18%\\n              Fuzzy2       36.27        0.67       35.87        0.93   -5% -    3%\\n              Fuzzy1       81.14        1.24       80.24        1.68   -4% -    2%\\n       TermGroup100K      193.40        3.36      191.27        4.13   -4% -    2%\\n    TermBGroup100K1P      152.78        5.06      151.23        3.98   -6% -    5%\\n      TermBGroup100K      242.78        7.06      240.71        8.01   -6% -    5%\\n             Respell       85.75        1.36       85.17        2.04   -4% -    3%\\n            PKLookup      206.02        5.05      205.57        4.63   -4% -    4%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI am not sure why oal.util.packed is slower. The only differences I see is that they use inheritance instead of a switch block to know how to decode data and that they encode values in the high-order long bits first while the branch currently starts with the low-order int bits. I\'ll try to dig deeper to understand what happens...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13425296_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425296_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 22:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T22:00:27+0000\'\u003e30\\/Jul\\/12 22:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    My benchmark results are a little different but oal.util.packed is still behind... (it compares the current branch vs. patched with PackedInts): \\n\\n  \\n                 TaskQPS pforcodecStdDev pforcodecQPS pforcodec-packedintsStdDev pforcodec-packedints      Pct diff\\n              Phrase       38.21        3.01       35.73        2.41  -19% -    8%\\n            SpanNear       27.99        1.30       26.30        1.23  -14% -    3%\\n        SloppyPhrase       43.32        2.98       41.02        2.53  -16% -    7%\\n          AndHighMed      230.23        8.48      219.88        9.35  -11% -    3%\\n         AndHighHigh       52.53        2.02       50.80        2.62  -11% -    5%\\n              IntNRQ       43.24        3.42       41.84        2.79  -16% -   12%\\n            Wildcard      113.26        3.17      109.91        3.50   -8% -    3%\\n             Prefix3      194.56        9.56      189.39        9.64  -11% -    7%\\n                Term      301.86       14.49      295.28       17.51  -12% -    8%\\n           OrHighMed      100.60        8.30       99.06        8.00  -16% -   15%\\n          OrHighHigh       32.35        2.92       31.90        2.88  -17% -   18%\\n              Fuzzy2       36.27        0.67       35.87        0.93   -5% -    3%\\n              Fuzzy1       81.14        1.24       80.24        1.68   -4% -    2%\\n       TermGroup100K      193.40        3.36      191.27        4.13   -4% -    2%\\n    TermBGroup100K1P      152.78        5.06      151.23        3.98   -6% -    5%\\n      TermBGroup100K      242.78        7.06      240.71        8.01   -6% -    5%\\n             Respell       85.75        1.36       85.17        2.04   -4% -    3%\\n            PKLookup      206.02        5.05      205.57        4.63   -4% -    4%\\n \\n  \\n\\n I am not sure why oal.util.packed is slower. The only differences I see is that they use inheritance instead of a switch block to know how to decode data and that they encode values in the high-order long bits first while the branch currently starts with the low-order int bits. I\'ll try to dig deeper to understand what happens...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13425306\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13425306&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13425306\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425306_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425306_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 22:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T22:17:31+0000\'\u003e30\\/Jul\\/12 22:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI just committed a new BlockPacked postings format, which is a copy of\u003cbr\\/\u003e\\nBlock postings format but using oal.util.packed for encode\\/decode.\u003c\\/p\u003e\\n\\n\u003cp\u003eI left Block unchanged, except I moved the util classes it had been\u003cbr\\/\u003e\\nusing out of oal.codecs.pfor, and removed oal.codecs.pfor.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo now we can iterate to speed up packed ints cutover, and do perf\u003cbr\\/\u003e\\ntests off the branch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425306_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425306_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 22:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T22:17:31+0000\'\u003e30\\/Jul\\/12 22:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I just committed a new BlockPacked postings format, which is a copy of \\nBlock postings format but using oal.util.packed for encode\\/decode. \\n\\n I left Block unchanged, except I moved the util classes it had been \\nusing out of oal.codecs.pfor, and removed oal.codecs.pfor. \\n\\n So now we can iterate to speed up packed ints cutover, and do perf \\ntests off the branch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13425313\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13425313&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13425313\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425313_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425313_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 22:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T22:19:26+0000\'\u003e30\\/Jul\\/12 22:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSorry I meant to say: the BlockPacked PF is from Billy\'s \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-3892\\\" title=\\\"Add a useful intblock postings format (eg, FOR, PFOR, PFORDelta, Simple9\\/16\\/64, etc.)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-3892\\\"\u003e\u003cdel\u003eLUCENE-3892\u003c\\/del\u003e\u003c\\/a\u003e-blockFor&amp;packedecoder(comp).patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425313_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425313_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 22:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T22:19:26+0000\'\u003e30\\/Jul\\/12 22:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sorry I meant to say: the BlockPacked PF is from Billy\'s   LUCENE-3892  -blockFor&amp;packedecoder(comp).patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13425388\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13425388&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13425388\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425388_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425388_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 23:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T23:37:58+0000\'\u003e30\\/Jul\\/12 23:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tested Block vs BlockPacked as checked in.\u003c\\/p\u003e\\n\\n\u003cp\u003eOn a Westmere Xeon machine (Java 1.7.0_04):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n          AndHighMed       15.14        0.14       13.78        0.13  -10% -   -7%\\n        SloppyPhrase        2.55        0.11        2.33        0.09  -15% -   -1%\\n          OrHighHigh        3.75        0.16        3.44        0.09  -14% -   -1%\\n            Wildcard        8.44        0.01        7.78        0.28  -11% -   -4%\\n            SpanNear        1.11        0.04        1.03        0.04  -13% -    0%\\n             Prefix3       17.91        0.08       16.63        0.50  -10% -   -3%\\n           OrHighMed       11.35        0.65       10.63        0.44  -15% -    3%\\n              IntNRQ        6.73        0.03        6.32        0.27  -10% -   -1%\\n        TermBGroup1M        3.87        0.03        3.68        0.04   -6% -   -3%\\n         AndHighHigh        4.86        0.09        4.63        0.03   -7% -   -2%\\n              Phrase        1.10        0.06        1.05        0.06  -14% -    6%\\n                Term        7.86        0.03        7.52        0.04   -5% -   -3%\\n      TermBGroup1M1P        4.65        0.12        4.49        0.06   -6% -    0%\\n         TermGroup1M        2.97        0.04        2.88        0.02   -4% -   -1%\\n              Fuzzy1       71.22        1.93       71.02        1.44   -4% -    4%\\n              Fuzzy2       49.76        1.33       49.90        1.23   -4% -    5%\\n             Respell       76.23        2.67       76.93        2.67   -5% -    8%\\n            PKLookup      161.89        3.28      168.28        7.87   -2% -   11%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eAnd on an desktop Ivy Bridge (Java 1.7.0_04):\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n          AndHighMed       17.32        0.12       15.41        0.03  -11% -  -10%\\n        SloppyPhrase        2.74        0.21        2.56        0.11  -16% -    5%\\n              Phrase        1.32        0.07        1.23        0.06  -15% -    3%\\n            Wildcard        9.65        0.11        9.08        0.12   -8% -   -3%\\n            SpanNear        1.20        0.01        1.13        0.01   -7% -   -3%\\n         AndHighHigh        5.32        0.03        5.04        0.02   -6% -   -4%\\n             Prefix3       18.93        0.20       18.04        0.24   -6% -   -2%\\n              IntNRQ        7.79        0.13        7.48        0.13   -7% -    0%\\n                Term        9.48        0.10        9.15        0.43   -8% -    2%\\n        TermBGroup1M        4.74        0.05        4.59        0.12   -6% -    0%\\n           OrHighMed       13.01        0.24       12.60        0.55   -9% -    2%\\n          OrHighHigh        4.08        0.05        3.97        0.17   -8% -    2%\\n         TermGroup1M        3.30        0.03        3.22        0.07   -5% -    0%\\n      TermBGroup1M1P        5.52        0.11        5.42        0.22   -7% -    4%\\n            PKLookup      194.62        4.43      193.44        5.07   -5% -    4%\\n              Fuzzy1       79.23        1.31       79.21        0.96   -2% -    2%\\n             Respell       78.97        1.04       79.87        1.15   -1% -    3%\\n              Fuzzy2       56.17        0.93       56.82        0.64   -1% -    4%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eSo packed is still behind ...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13425388_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13425388_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/12 23:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-07-30T23:37:58+0000\'\u003e30\\/Jul\\/12 23:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I tested Block vs BlockPacked as checked in. \\n\\n On a Westmere Xeon machine (Java 1.7.0_04): \\n\\n  \\n                 Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n          AndHighMed       15.14        0.14       13.78        0.13  -10% -   -7%\\n        SloppyPhrase        2.55        0.11        2.33        0.09  -15% -   -1%\\n          OrHighHigh        3.75        0.16        3.44        0.09  -14% -   -1%\\n            Wildcard        8.44        0.01        7.78        0.28  -11% -   -4%\\n            SpanNear        1.11        0.04        1.03        0.04  -13% -    0%\\n             Prefix3       17.91        0.08       16.63        0.50  -10% -   -3%\\n           OrHighMed       11.35        0.65       10.63        0.44  -15% -    3%\\n              IntNRQ        6.73        0.03        6.32        0.27  -10% -   -1%\\n        TermBGroup1M        3.87        0.03        3.68        0.04   -6% -   -3%\\n         AndHighHigh        4.86        0.09        4.63        0.03   -7% -   -2%\\n              Phrase        1.10        0.06        1.05        0.06  -14% -    6%\\n                Term        7.86        0.03        7.52        0.04   -5% -   -3%\\n      TermBGroup1M1P        4.65        0.12        4.49        0.06   -6% -    0%\\n         TermGroup1M        2.97        0.04        2.88        0.02   -4% -   -1%\\n              Fuzzy1       71.22        1.93       71.02        1.44   -4% -    4%\\n              Fuzzy2       49.76        1.33       49.90        1.23   -4% -    5%\\n             Respell       76.23        2.67       76.93        2.67   -5% -    8%\\n            PKLookup      161.89        3.28      168.28        7.87   -2% -   11%\\n \\n  \\n\\n And on an desktop Ivy Bridge (Java 1.7.0_04): \\n  \\n                 Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n          AndHighMed       17.32        0.12       15.41        0.03  -11% -  -10%\\n        SloppyPhrase        2.74        0.21        2.56        0.11  -16% -    5%\\n              Phrase        1.32        0.07        1.23        0.06  -15% -    3%\\n            Wildcard        9.65        0.11        9.08        0.12   -8% -   -3%\\n            SpanNear        1.20        0.01        1.13        0.01   -7% -   -3%\\n         AndHighHigh        5.32        0.03        5.04        0.02   -6% -   -4%\\n             Prefix3       18.93        0.20       18.04        0.24   -6% -   -2%\\n              IntNRQ        7.79        0.13        7.48        0.13   -7% -    0%\\n                Term        9.48        0.10        9.15        0.43   -8% -    2%\\n        TermBGroup1M        4.74        0.05        4.59        0.12   -6% -    0%\\n           OrHighMed       13.01        0.24       12.60        0.55   -9% -    2%\\n          OrHighHigh        4.08        0.05        3.97        0.17   -8% -    2%\\n         TermGroup1M        3.30        0.03        3.22        0.07   -5% -    0%\\n      TermBGroup1M1P        5.52        0.11        5.42        0.22   -7% -    4%\\n            PKLookup      194.62        4.43      193.44        5.07   -5% -    4%\\n              Fuzzy1       79.23        1.31       79.21        0.96   -2% -    2%\\n             Respell       78.97        1.04       79.87        1.15   -1% -    3%\\n              Fuzzy2       56.17        0.93       56.82        0.64   -1% -    4%\\n \\n  \\n\\n So packed is still behind ...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13428936\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13428936&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13428936\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13428936_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13428936_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Aug\\/12 23:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-05T23:33:49+0000\'\u003e05\\/Aug\\/12 23:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI just committed an optimization to BlockPF DocsEnum.advance, inlining\u003cbr\\/\u003e\\nthe scanning step (still have to do D&amp;PEnum and EverythingEnum):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n              IntNRQ       12.46        1.45       11.60        0.04  -16% -    5%\\n            Wildcard       54.36        2.75       52.72        0.38   -8% -    2%\\n             Prefix3       85.43        4.97       83.08        0.47   -8% -    3%\\n              Fuzzy2       63.86        2.13       62.44        1.79   -8% -    4%\\n             Respell       62.75        1.52       61.42        2.02   -7% -    3%\\n              Fuzzy1       75.68        1.65       74.69        1.44   -5% -    2%\\n         LowSpanNear        9.24        0.20        9.13        0.19   -5% -    3%\\n            PKLookup      192.89        2.91      190.66        2.43   -3% -    1%\\n        HighSpanNear        1.71        0.05        1.69        0.05   -6% -    4%\\n         MedSpanNear        4.80        0.11        4.76        0.12   -5% -    4%\\n           MedPhrase       12.57        0.27       12.56        0.21   -3% -    3%\\n     MedSloppyPhrase        6.57        0.11        6.56        0.11   -3% -    3%\\n           LowPhrase       21.55        0.35       21.55        0.28   -2% -    2%\\n     LowSloppyPhrase        7.25        0.16        7.28        0.12   -3% -    4%\\n          HighPhrase        1.81        0.11        1.82        0.10  -10% -   13%\\n    HighSloppyPhrase        1.94        0.10        1.96        0.05   -6% -    9%\\n             LowTerm      512.53        5.66      518.31        2.30    0% -    2%\\n             MedTerm      196.09        4.68      198.76        0.30   -1% -    3%\\n            HighTerm       35.53        0.95       36.11        0.03   -1% -    4%\\n           OrHighMed       23.34        0.83       23.85        0.70   -4% -    9%\\n           OrHighLow       26.91        0.98       27.53        0.82   -4% -    9%\\n          OrHighHigh       11.27        0.41       11.53        0.34   -4% -    9%\\n         AndHighHigh       21.24        0.05       23.79        0.13   11% -   12%\\n          AndHighLow      553.19        8.47      621.35        4.01    9% -   14%\\n          AndHighMed       57.45        0.13       67.78        0.70   16% -   19%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13428936_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13428936_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Aug\\/12 23:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-05T23:33:49+0000\'\u003e05\\/Aug\\/12 23:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I just committed an optimization to BlockPF DocsEnum.advance, inlining \\nthe scanning step (still have to do D&amp;PEnum and EverythingEnum): \\n\\n  \\n                 Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n              IntNRQ       12.46        1.45       11.60        0.04  -16% -    5%\\n            Wildcard       54.36        2.75       52.72        0.38   -8% -    2%\\n             Prefix3       85.43        4.97       83.08        0.47   -8% -    3%\\n              Fuzzy2       63.86        2.13       62.44        1.79   -8% -    4%\\n             Respell       62.75        1.52       61.42        2.02   -7% -    3%\\n              Fuzzy1       75.68        1.65       74.69        1.44   -5% -    2%\\n         LowSpanNear        9.24        0.20        9.13        0.19   -5% -    3%\\n            PKLookup      192.89        2.91      190.66        2.43   -3% -    1%\\n        HighSpanNear        1.71        0.05        1.69        0.05   -6% -    4%\\n         MedSpanNear        4.80        0.11        4.76        0.12   -5% -    4%\\n           MedPhrase       12.57        0.27       12.56        0.21   -3% -    3%\\n     MedSloppyPhrase        6.57        0.11        6.56        0.11   -3% -    3%\\n           LowPhrase       21.55        0.35       21.55        0.28   -2% -    2%\\n     LowSloppyPhrase        7.25        0.16        7.28        0.12   -3% -    4%\\n          HighPhrase        1.81        0.11        1.82        0.10  -10% -   13%\\n    HighSloppyPhrase        1.94        0.10        1.96        0.05   -6% -    9%\\n             LowTerm      512.53        5.66      518.31        2.30    0% -    2%\\n             MedTerm      196.09        4.68      198.76        0.30   -1% -    3%\\n            HighTerm       35.53        0.95       36.11        0.03   -1% -    4%\\n           OrHighMed       23.34        0.83       23.85        0.70   -4% -    9%\\n           OrHighLow       26.91        0.98       27.53        0.82   -4% -    9%\\n          OrHighHigh       11.27        0.41       11.53        0.34   -4% -    9%\\n         AndHighHigh       21.24        0.05       23.79        0.13   11% -   12%\\n          AndHighLow      553.19        8.47      621.35        4.01    9% -   14%\\n          AndHighMed       57.45        0.13       67.78        0.70   16% -   19%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13430373\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13430373&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13430373\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13430373_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430373_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/12 14:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-07T14:47:17+0000\'\u003e07\\/Aug\\/12 14:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI backported Mike\'s changes to the \u003ctt\u003eBlockPacked\u003c\\/tt\u003e codec and tried to understand why it was slower than \u003ctt\u003eBlock\u003c\\/tt\u003e...\u003c\\/p\u003e\\n\\n\u003cp\u003eThe use of \u003ctt\u003ejava.nio.*Buffer\u003c\\/tt\u003e seemed to be the bottleneck (\u003ctt\u003eByteBuffer.asLongBuffer\u003c\\/tt\u003e and \u003ctt\u003eByteBuffer.getLong\u003c\\/tt\u003e especially are \u003cem\u003every\u003c\\/em\u003e slow) of the decoding step so I switched back to decoding from long[] (instead of LongBuffer) and added direct decoding from byte[] to avoid having to convert the bytes to longs before decoding.\u003c\\/p\u003e\\n\\n\u003cp\u003eTests passed with -Dtests.postingsformat=BlockPacked. Here are the results of the benchmark (unfortunately, it started before Mike committed r1370179):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS 3892 StdDev 3892QPS 3892-packedStdDev 3892-packed      Pct diff\\n            PKLookup      259.41        9.06      255.77        8.89   -8% -    5%\\n          AndHighLow     1656.30       50.44     1653.85       55.05   -6% -    6%\\n         AndHighHigh       82.90        1.82       83.47        2.52   -4% -    6%\\n          AndHighMed      274.76       11.11      278.51       13.42   -7% -   10%\\n             Prefix3      285.41        4.82      289.60        6.31   -2% -    5%\\n            HighTerm      230.78       14.33      235.16       20.61  -12% -   18%\\n              IntNRQ       55.91        1.03       57.13        2.73   -4% -    9%\\n             LowTerm     1720.10       47.06     1759.16       55.47   -3% -    8%\\n            Wildcard      290.54        3.82      297.39        5.42    0% -    5%\\n             MedTerm      733.01       35.38      750.46       50.37   -8% -   14%\\n        HighSpanNear        6.93        0.23        7.12        0.39   -6% -   11%\\n          HighPhrase        6.46        0.22        6.65        0.46   -7% -   14%\\n             Respell       96.11        2.84       99.00        3.98   -3% -   10%\\n          OrHighHigh       38.07        2.53       39.23        3.06  -10% -   19%\\n              Fuzzy2       50.29        1.70       51.87        2.25   -4% -   11%\\n           MedPhrase       26.20        0.94       27.03        1.07   -4% -   11%\\n           OrHighMed      138.83        7.76      143.54        9.79   -8% -   16%\\n              Fuzzy1      100.58        2.15      104.21        3.99   -2% -    9%\\n    HighSloppyPhrase        5.26        0.11        5.45        0.24   -3% -   10%\\n           OrHighLow       78.43        5.55       81.80        6.89  -10% -   21%\\n         MedSpanNear       32.75        1.13       34.28        1.73   -3% -   13%\\n           LowPhrase       90.27        3.20       95.06        3.58   -2% -   13%\\n         LowSpanNear       46.40        1.95       48.89        2.40   -3% -   15%\\n     MedSloppyPhrase       36.29        1.00       38.59        1.46    0% -   13%\\n     LowSloppyPhrase       37.41        1.11       40.48        1.39    1% -   15%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eMike, Billy, could you check that \u003ctt\u003eBLockPacked\u003c\\/tt\u003e is at least as fast as \u003ctt\u003eBlock\u003c\\/tt\u003e on your computer too?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13430373_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430373_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/12 14:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-07T14:47:17+0000\'\u003e07\\/Aug\\/12 14:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I backported Mike\'s changes to the  BlockPacked  codec and tried to understand why it was slower than  Block ... \\n\\n The use of  java.nio.*Buffer  seemed to be the bottleneck ( ByteBuffer.asLongBuffer  and  ByteBuffer.getLong  especially are  very  slow) of the decoding step so I switched back to decoding from long[] (instead of LongBuffer) and added direct decoding from byte[] to avoid having to convert the bytes to longs before decoding. \\n\\n Tests passed with -Dtests.postingsformat=BlockPacked. Here are the results of the benchmark (unfortunately, it started before Mike committed r1370179): \\n\\n  \\n                 Task    QPS 3892 StdDev 3892QPS 3892-packedStdDev 3892-packed      Pct diff\\n            PKLookup      259.41        9.06      255.77        8.89   -8% -    5%\\n          AndHighLow     1656.30       50.44     1653.85       55.05   -6% -    6%\\n         AndHighHigh       82.90        1.82       83.47        2.52   -4% -    6%\\n          AndHighMed      274.76       11.11      278.51       13.42   -7% -   10%\\n             Prefix3      285.41        4.82      289.60        6.31   -2% -    5%\\n            HighTerm      230.78       14.33      235.16       20.61  -12% -   18%\\n              IntNRQ       55.91        1.03       57.13        2.73   -4% -    9%\\n             LowTerm     1720.10       47.06     1759.16       55.47   -3% -    8%\\n            Wildcard      290.54        3.82      297.39        5.42    0% -    5%\\n             MedTerm      733.01       35.38      750.46       50.37   -8% -   14%\\n        HighSpanNear        6.93        0.23        7.12        0.39   -6% -   11%\\n          HighPhrase        6.46        0.22        6.65        0.46   -7% -   14%\\n             Respell       96.11        2.84       99.00        3.98   -3% -   10%\\n          OrHighHigh       38.07        2.53       39.23        3.06  -10% -   19%\\n              Fuzzy2       50.29        1.70       51.87        2.25   -4% -   11%\\n           MedPhrase       26.20        0.94       27.03        1.07   -4% -   11%\\n           OrHighMed      138.83        7.76      143.54        9.79   -8% -   16%\\n              Fuzzy1      100.58        2.15      104.21        3.99   -2% -    9%\\n    HighSloppyPhrase        5.26        0.11        5.45        0.24   -3% -   10%\\n           OrHighLow       78.43        5.55       81.80        6.89  -10% -   21%\\n         MedSpanNear       32.75        1.13       34.28        1.73   -3% -   13%\\n           LowPhrase       90.27        3.20       95.06        3.58   -2% -   13%\\n         LowSpanNear       46.40        1.95       48.89        2.40   -3% -   15%\\n     MedSloppyPhrase       36.29        1.00       38.59        1.46    0% -   13%\\n     LowSloppyPhrase       37.41        1.11       40.48        1.39    1% -   15%\\n \\n  \\n\\n Mike, Billy, could you check that  BLockPacked  is at least as fast as  Block  on your computer too?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13430423\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13430423&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13430423\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13430423_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430423_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/12 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-07T16:50:01+0000\'\u003e07\\/Aug\\/12 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Adrien! Your codes are really clean!\u003c\\/p\u003e\\n\\n\u003cp\u003eAt first glance, I think we should still support all-value-the-same case? For some applications(like index with payloads), that might be helpful.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd, I\'m a little confused about your performance test. Did you use BlockPF before r1370179 as a baseline, and compare it with your latest commit? Here, I tested these two PF under latest versions(r1370345).\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh      124.53        9.36      100.46        3.31  -27% -   -9%\\n          AndHighLow     2141.08       63.93     1922.73       36.32  -14% -   -5%\\n          AndHighMed      281.48       36.49      218.68       13.10  -35% -   -5%\\n              Fuzzy1       84.33        2.56       83.94        1.67   -5% -    4%\\n              Fuzzy2       30.49        1.13       30.48        0.71   -5% -    6%\\n          HighPhrase        9.08        0.28        7.56        0.20  -21% -  -11%\\n    HighSloppyPhrase        5.46        0.21        4.88        0.23  -17% -   -2%\\n        HighSpanNear       10.12        0.21        9.21        0.30  -13% -   -3%\\n            HighTerm      176.52        6.13      146.13        5.43  -22% -  -11%\\n              IntNRQ       59.56        1.98       51.05        1.33  -19% -   -9%\\n           LowPhrase       40.02        1.03       32.75        0.37  -21% -  -15%\\n     LowSloppyPhrase       59.59        2.85       51.49        1.33  -19% -   -6%\\n         LowSpanNear       73.86        3.17       61.98        1.45  -21% -  -10%\\n             LowTerm     1755.38       15.56     1622.61       26.87   -9% -   -5%\\n           MedPhrase       25.99        0.47       21.01        0.17  -21% -  -16%\\n     MedSloppyPhrase       30.52        0.89       24.77        0.55  -22% -  -14%\\n         MedSpanNear       22.26        0.43       18.73        0.47  -19% -  -12%\\n             MedTerm      651.90       18.97      573.34       19.25  -17% -   -6%\\n          OrHighHigh       26.75        0.33       23.53        0.50  -14% -   -9%\\n           OrHighLow      151.69        2.13      134.17        3.19  -14% -   -8%\\n           OrHighMed      102.48        1.48       90.73        2.01  -14% -   -8%\\n            PKLookup      216.59        5.70      215.99        2.99   -4% -    3%\\n             Prefix3      166.00        0.78      145.25        1.29  -13% -  -11%\\n             Respell       82.01        3.01       82.80        1.66   -4% -    6%\\n            Wildcard      151.66        2.22      141.14        1.57   -9% -   -4%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eStrange that it isn\'t working well on my computer. And results are similar when I change MMapDirectory to NIOFSDirectory.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13430423_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430423_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/12 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-07T16:50:01+0000\'\u003e07\\/Aug\\/12 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Adrien! Your codes are really clean! \\n\\n At first glance, I think we should still support all-value-the-same case? For some applications(like index with payloads), that might be helpful. \\n\\n And, I\'m a little confused about your performance test. Did you use BlockPF before r1370179 as a baseline, and compare it with your latest commit? Here, I tested these two PF under latest versions(r1370345). \\n\\n  \\n                 Task    QPS base StdDev base    QPS comp StdDev comp      Pct diff\\n         AndHighHigh      124.53        9.36      100.46        3.31  -27% -   -9%\\n          AndHighLow     2141.08       63.93     1922.73       36.32  -14% -   -5%\\n          AndHighMed      281.48       36.49      218.68       13.10  -35% -   -5%\\n              Fuzzy1       84.33        2.56       83.94        1.67   -5% -    4%\\n              Fuzzy2       30.49        1.13       30.48        0.71   -5% -    6%\\n          HighPhrase        9.08        0.28        7.56        0.20  -21% -  -11%\\n    HighSloppyPhrase        5.46        0.21        4.88        0.23  -17% -   -2%\\n        HighSpanNear       10.12        0.21        9.21        0.30  -13% -   -3%\\n            HighTerm      176.52        6.13      146.13        5.43  -22% -  -11%\\n              IntNRQ       59.56        1.98       51.05        1.33  -19% -   -9%\\n           LowPhrase       40.02        1.03       32.75        0.37  -21% -  -15%\\n     LowSloppyPhrase       59.59        2.85       51.49        1.33  -19% -   -6%\\n         LowSpanNear       73.86        3.17       61.98        1.45  -21% -  -10%\\n             LowTerm     1755.38       15.56     1622.61       26.87   -9% -   -5%\\n           MedPhrase       25.99        0.47       21.01        0.17  -21% -  -16%\\n     MedSloppyPhrase       30.52        0.89       24.77        0.55  -22% -  -14%\\n         MedSpanNear       22.26        0.43       18.73        0.47  -19% -  -12%\\n             MedTerm      651.90       18.97      573.34       19.25  -17% -   -6%\\n          OrHighHigh       26.75        0.33       23.53        0.50  -14% -   -9%\\n           OrHighLow      151.69        2.13      134.17        3.19  -14% -   -8%\\n           OrHighMed      102.48        1.48       90.73        2.01  -14% -   -8%\\n            PKLookup      216.59        5.70      215.99        2.99   -4% -    3%\\n             Prefix3      166.00        0.78      145.25        1.29  -13% -  -11%\\n             Respell       82.01        3.01       82.80        1.66   -4% -    6%\\n            Wildcard      151.66        2.22      141.14        1.57   -9% -   -4%\\n \\n  \\n\\n Strange that it isn\'t working well on my computer. And results are similar when I change MMapDirectory to NIOFSDirectory.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13430439\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13430439&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13430439\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13430439_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430439_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/12 17:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-07T17:05:11+0000\'\u003e07\\/Aug\\/12 17:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHmm also not great results on my env (base=Block, packed=BlockPacked), based on current branch head:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base  QPS packedStdDev packed      Pct diff\\n          AndHighMed       59.23        3.07       34.24        0.69  -46% -  -37%\\n          AndHighLow      576.35       21.09      349.57        7.44  -42% -  -35%\\n         AndHighHigh       23.83        0.72       15.53        0.29  -37% -  -31%\\n           MedPhrase       12.56        0.20        8.87        0.31  -32% -  -25%\\n           LowPhrase       20.52        0.21       14.89        0.43  -30% -  -24%\\n     MedSloppyPhrase        7.46        0.20        5.41        0.13  -31% -  -23%\\n     LowSloppyPhrase        6.73        0.18        4.92        0.12  -30% -  -22%\\n         LowSpanNear        7.63        0.32        5.65        0.19  -31% -  -20%\\n    HighSloppyPhrase        1.90        0.08        1.52        0.05  -25% -  -14%\\n          HighPhrase        1.57        0.04        1.26        0.08  -26% -  -12%\\n         MedSpanNear        3.84        0.18        3.14        0.14  -25% -  -10%\\n             LowTerm      433.22       34.89      364.03       15.63  -25% -   -4%\\n        HighSpanNear        1.40        0.07        1.19        0.06  -23% -   -6%\\n              IntNRQ        9.50        0.43        8.09        0.92  -27% -    0%\\n            HighTerm       29.47        4.89       25.46        2.35  -32% -   13%\\n             MedTerm      148.76       21.53      129.17        9.59  -29% -    9%\\n             Prefix3       72.81        2.20       63.65        3.88  -20% -   -4%\\n            Wildcard       44.79        0.92       39.91        2.20  -17% -   -4%\\n           OrHighMed       16.81        0.48       15.28        0.21  -12% -   -5%\\n           OrHighLow       21.85        0.67       20.03        0.32  -12% -   -3%\\n          OrHighHigh        8.49        0.28        7.80        0.14  -12% -   -3%\\n              Fuzzy1       61.33        1.95       58.91        1.11   -8% -    1%\\n            PKLookup      156.87        1.14      154.08        2.13   -3% -    0%\\n             Respell       58.72        1.57       59.60        1.28   -3% -    6%\\n              Fuzzy2       60.98        2.34       62.03        1.89   -5% -    9%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI think optimizing the all-values-same case is actually quite important for payloads (but luceneutil doesn\'t test this today).\u003c\\/p\u003e\\n\\n\u003cp\u003eBut, curiously, my BlockPacked index is a bit smaller than my Block index (4643 MB vs 4650 MB).\u003c\\/p\u003e\\n\\n\u003cp\u003eI do wonder about using long[] to hold the uncompressed results (they only need int[]); that\'s one big difference still.  Also: I\'d love to see how acceptableOverheadRatio &gt; 0 does ... (and, using PACKED_SINGLE_BLOCK ... we\'d have to put a bit in the header to record the format).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13430439_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430439_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/12 17:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-07T17:05:11+0000\'\u003e07\\/Aug\\/12 17:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hmm also not great results on my env (base=Block, packed=BlockPacked), based on current branch head: \\n\\n  \\n                 Task    QPS base StdDev base  QPS packedStdDev packed      Pct diff\\n          AndHighMed       59.23        3.07       34.24        0.69  -46% -  -37%\\n          AndHighLow      576.35       21.09      349.57        7.44  -42% -  -35%\\n         AndHighHigh       23.83        0.72       15.53        0.29  -37% -  -31%\\n           MedPhrase       12.56        0.20        8.87        0.31  -32% -  -25%\\n           LowPhrase       20.52        0.21       14.89        0.43  -30% -  -24%\\n     MedSloppyPhrase        7.46        0.20        5.41        0.13  -31% -  -23%\\n     LowSloppyPhrase        6.73        0.18        4.92        0.12  -30% -  -22%\\n         LowSpanNear        7.63        0.32        5.65        0.19  -31% -  -20%\\n    HighSloppyPhrase        1.90        0.08        1.52        0.05  -25% -  -14%\\n          HighPhrase        1.57        0.04        1.26        0.08  -26% -  -12%\\n         MedSpanNear        3.84        0.18        3.14        0.14  -25% -  -10%\\n             LowTerm      433.22       34.89      364.03       15.63  -25% -   -4%\\n        HighSpanNear        1.40        0.07        1.19        0.06  -23% -   -6%\\n              IntNRQ        9.50        0.43        8.09        0.92  -27% -    0%\\n            HighTerm       29.47        4.89       25.46        2.35  -32% -   13%\\n             MedTerm      148.76       21.53      129.17        9.59  -29% -    9%\\n             Prefix3       72.81        2.20       63.65        3.88  -20% -   -4%\\n            Wildcard       44.79        0.92       39.91        2.20  -17% -   -4%\\n           OrHighMed       16.81        0.48       15.28        0.21  -12% -   -5%\\n           OrHighLow       21.85        0.67       20.03        0.32  -12% -   -3%\\n          OrHighHigh        8.49        0.28        7.80        0.14  -12% -   -3%\\n              Fuzzy1       61.33        1.95       58.91        1.11   -8% -    1%\\n            PKLookup      156.87        1.14      154.08        2.13   -3% -    0%\\n             Respell       58.72        1.57       59.60        1.28   -3% -    6%\\n              Fuzzy2       60.98        2.34       62.03        1.89   -5% -    9%\\n \\n  \\n\\n I think optimizing the all-values-same case is actually quite important for payloads (but luceneutil doesn\'t test this today). \\n\\n But, curiously, my BlockPacked index is a bit smaller than my Block index (4643 MB vs 4650 MB). \\n\\n I do wonder about using long[] to hold the uncompressed results (they only need int[]); that\'s one big difference still.  Also: I\'d love to see how acceptableOverheadRatio &gt; 0 does ... (and, using PACKED_SINGLE_BLOCK ... we\'d have to put a bit in the header to record the format).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13430507\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13430507&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13430507\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13430507_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430507_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/12 18:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-07T18:31:58+0000\'\u003e07\\/Aug\\/12 18:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tried smaller block sizes than 128.  Here\'s 128 (base) vs 64:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base QPS block64StdDev block64      Pct diff\\n         AndHighHigh       23.91        0.57       22.28        0.27  -10% -   -3%\\n          AndHighMed       60.63        1.02       56.96        1.13   -9% -   -2%\\n     MedSloppyPhrase        7.69        0.01        7.30        0.13   -6% -   -3%\\n    HighSloppyPhrase        1.93        0.02        1.83        0.04   -8% -   -1%\\n     LowSloppyPhrase        6.84        0.03        6.57        0.11   -6% -   -1%\\n              Fuzzy1       65.49        0.85       63.50        1.68   -6% -    0%\\n          HighPhrase        1.57        0.04        1.53        0.04   -7% -    3%\\n           OrHighLow       22.89        0.98       22.38        0.61   -8% -    4%\\n           OrHighMed       17.65        0.70       17.27        0.43   -8% -    4%\\n              IntNRQ        9.50        0.48        9.33        0.36  -10% -    7%\\n          OrHighHigh        8.98        0.36        8.84        0.19   -7% -    4%\\n            HighTerm       29.60        2.64       29.16        1.44  -13% -   13%\\n              Fuzzy2       65.54        0.86       64.63        2.13   -5% -    3%\\n            Wildcard       45.27        1.27       44.78        0.48   -4% -    2%\\n             MedTerm      150.40       12.65      148.99        6.63  -12% -   12%\\n             Prefix3       72.55        2.55       72.31        1.02   -5% -    4%\\n             LowTerm      421.62       38.27      422.40        9.47  -10% -   12%\\n         LowSpanNear        7.55        0.34        7.62        0.22   -6% -    8%\\n        HighSpanNear        1.34        0.09        1.35        0.06   -9% -   12%\\n           MedPhrase       12.45        0.24       12.66        0.13   -1% -    4%\\n             Respell       59.54        1.80       60.95        1.86   -3% -    8%\\n         MedSpanNear        3.70        0.24        3.80        0.15   -7% -   14%\\n            PKLookup      154.56        2.45      158.96        1.89    0% -    5%\\n           LowPhrase       20.21        0.33       20.95        0.15    1% -    6%\\n          AndHighLow      577.81       12.46      637.96       29.80    3% -   18%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eAnd 128 (base) vs 32:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base QPS block64StdDev block64      Pct diff\\n         AndHighHigh       23.86        0.52       20.68        0.59  -17% -   -8%\\n              IntNRQ        9.48        0.38        8.84        0.46  -15% -    2%\\n    HighSloppyPhrase        1.87        0.04        1.76        0.06  -11% -    0%\\n             Prefix3       72.65        2.18       68.24        2.96  -12% -    1%\\n            HighTerm       29.91        1.40       28.28        2.94  -19% -    9%\\n            Wildcard       44.74        0.83       42.43        1.49  -10% -    0%\\n        HighSpanNear        1.37        0.08        1.30        0.07  -15% -    6%\\n             MedTerm      152.73        5.28      145.45       14.69  -17% -    8%\\n     MedSloppyPhrase        7.46        0.12        7.12        0.25   -9% -    0%\\n          HighPhrase        1.57        0.03        1.50        0.01   -7% -   -1%\\n           OrHighLow       22.94        0.70       22.00        1.10  -11% -    3%\\n          AndHighMed       58.72        1.79       56.60        1.95   -9% -    2%\\n     LowSloppyPhrase        6.67        0.10        6.44        0.20   -7% -    1%\\n           OrHighMed       17.52        0.56       17.00        0.82  -10% -    5%\\n         LowSpanNear        7.53        0.35        7.34        0.39  -11% -    7%\\n          OrHighHigh        8.84        0.31        8.62        0.43  -10% -    6%\\n         MedSpanNear        3.79        0.20        3.71        0.21  -12% -    9%\\n            PKLookup      153.34        3.22      150.19        4.91   -7% -    3%\\n              Fuzzy1       62.93        1.77       62.28        2.23   -7% -    5%\\n             LowTerm      410.23       21.57      410.83       35.19  -13% -   14%\\n           MedPhrase       12.55        0.14       12.65        0.08    0% -    2%\\n           LowPhrase       20.42        0.17       20.77        0.21    0% -    3%\\n              Fuzzy2       61.44        3.12       64.13        1.97   -3% -   13%\\n             Respell       56.65        3.29       60.21        1.39   -1% -   15%\\n          AndHighLow      588.05       12.37      720.63       19.33   16% -   28%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eIt looks like there\'s some speedup to AndHighLow and LowPhrase ... but\u003cbr\\/\u003e\\nslowdowns in other (harder) queries... so I think net\\/net we should\u003cbr\\/\u003e\\nleave block size at 128.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13430507_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430507_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Aug\\/12 18:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-07T18:31:58+0000\'\u003e07\\/Aug\\/12 18:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I tried smaller block sizes than 128.  Here\'s 128 (base) vs 64: \\n  \\n                 Task    QPS base StdDev base QPS block64StdDev block64      Pct diff\\n         AndHighHigh       23.91        0.57       22.28        0.27  -10% -   -3%\\n          AndHighMed       60.63        1.02       56.96        1.13   -9% -   -2%\\n     MedSloppyPhrase        7.69        0.01        7.30        0.13   -6% -   -3%\\n    HighSloppyPhrase        1.93        0.02        1.83        0.04   -8% -   -1%\\n     LowSloppyPhrase        6.84        0.03        6.57        0.11   -6% -   -1%\\n              Fuzzy1       65.49        0.85       63.50        1.68   -6% -    0%\\n          HighPhrase        1.57        0.04        1.53        0.04   -7% -    3%\\n           OrHighLow       22.89        0.98       22.38        0.61   -8% -    4%\\n           OrHighMed       17.65        0.70       17.27        0.43   -8% -    4%\\n              IntNRQ        9.50        0.48        9.33        0.36  -10% -    7%\\n          OrHighHigh        8.98        0.36        8.84        0.19   -7% -    4%\\n            HighTerm       29.60        2.64       29.16        1.44  -13% -   13%\\n              Fuzzy2       65.54        0.86       64.63        2.13   -5% -    3%\\n            Wildcard       45.27        1.27       44.78        0.48   -4% -    2%\\n             MedTerm      150.40       12.65      148.99        6.63  -12% -   12%\\n             Prefix3       72.55        2.55       72.31        1.02   -5% -    4%\\n             LowTerm      421.62       38.27      422.40        9.47  -10% -   12%\\n         LowSpanNear        7.55        0.34        7.62        0.22   -6% -    8%\\n        HighSpanNear        1.34        0.09        1.35        0.06   -9% -   12%\\n           MedPhrase       12.45        0.24       12.66        0.13   -1% -    4%\\n             Respell       59.54        1.80       60.95        1.86   -3% -    8%\\n         MedSpanNear        3.70        0.24        3.80        0.15   -7% -   14%\\n            PKLookup      154.56        2.45      158.96        1.89    0% -    5%\\n           LowPhrase       20.21        0.33       20.95        0.15    1% -    6%\\n          AndHighLow      577.81       12.46      637.96       29.80    3% -   18%\\n \\n  \\n\\n And 128 (base) vs 32: \\n  \\n                 Task    QPS base StdDev base QPS block64StdDev block64      Pct diff\\n         AndHighHigh       23.86        0.52       20.68        0.59  -17% -   -8%\\n              IntNRQ        9.48        0.38        8.84        0.46  -15% -    2%\\n    HighSloppyPhrase        1.87        0.04        1.76        0.06  -11% -    0%\\n             Prefix3       72.65        2.18       68.24        2.96  -12% -    1%\\n            HighTerm       29.91        1.40       28.28        2.94  -19% -    9%\\n            Wildcard       44.74        0.83       42.43        1.49  -10% -    0%\\n        HighSpanNear        1.37        0.08        1.30        0.07  -15% -    6%\\n             MedTerm      152.73        5.28      145.45       14.69  -17% -    8%\\n     MedSloppyPhrase        7.46        0.12        7.12        0.25   -9% -    0%\\n          HighPhrase        1.57        0.03        1.50        0.01   -7% -   -1%\\n           OrHighLow       22.94        0.70       22.00        1.10  -11% -    3%\\n          AndHighMed       58.72        1.79       56.60        1.95   -9% -    2%\\n     LowSloppyPhrase        6.67        0.10        6.44        0.20   -7% -    1%\\n           OrHighMed       17.52        0.56       17.00        0.82  -10% -    5%\\n         LowSpanNear        7.53        0.35        7.34        0.39  -11% -    7%\\n          OrHighHigh        8.84        0.31        8.62        0.43  -10% -    6%\\n         MedSpanNear        3.79        0.20        3.71        0.21  -12% -    9%\\n            PKLookup      153.34        3.22      150.19        4.91   -7% -    3%\\n              Fuzzy1       62.93        1.77       62.28        2.23   -7% -    5%\\n             LowTerm      410.23       21.57      410.83       35.19  -13% -   14%\\n           MedPhrase       12.55        0.14       12.65        0.08    0% -    2%\\n           LowPhrase       20.42        0.17       20.77        0.21    0% -    3%\\n              Fuzzy2       61.44        3.12       64.13        1.97   -3% -   13%\\n             Respell       56.65        3.29       60.21        1.39   -1% -   15%\\n          AndHighLow      588.05       12.37      720.63       19.33   16% -   28%\\n \\n  \\n\\n It looks like there\'s some speedup to AndHighLow and LowPhrase ... but \\nslowdowns in other (harder) queries... so I think net\\/net we should \\nleave block size at 128.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13430798\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13430798&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13430798\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13430798_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430798_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 01:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T01:38:48+0000\'\u003e08\\/Aug\\/12 01:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mike. And detailed comparison result on my computer is here: \u003ca href=\\\"http:\\/\\/pastebin.com\\/HLaAuCNp\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/pastebin.com\\/HLaAuCNp\u003c\\/a\u003e\u003cbr\\/\u003e\\nI tried block size range from 1024~32, also used 128 as the base.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13430798_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13430798_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 01:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T01:38:48+0000\'\u003e08\\/Aug\\/12 01:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mike. And detailed comparison result on my computer is here:  http:\\/\\/pastebin.com\\/HLaAuCNp  \\nI tried block size range from 1024~32, also used 128 as the base.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431117\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431117&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431117\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13431117_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431117_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 13:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T13:53:33+0000\'\u003e08\\/Aug\\/12 13:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 08\\/Aug\\/12 17:47\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnd result on skipMulitiplier, use current 8 as the baseline: \u003ca href=\\\"http:\\/\\/pastebin.com\\/TG4C6u6S\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/pastebin.com\\/TG4C6u6S\u003c\\/a\u003e\u003cbr\\/\u003e\\nSomewhat noisy, but or-queries benifit a little when skipMultiplier=32.\u003cbr\\/\u003e\\nAnd results when we set blockSize fixed to 64: \u003ca href=\\\"http:\\/\\/pastebin.com\\/FQBiKGim\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/pastebin.com\\/FQBiKGim\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13431117_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431117_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 13:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T13:53:33+0000\'\u003e08\\/Aug\\/12 13:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Han Jiang - 08\\/Aug\\/12 17:47\\\"\u003eedited\u003c\\/span\u003e                   And result on skipMulitiplier, use current 8 as the baseline:  http:\\/\\/pastebin.com\\/TG4C6u6S  \\nSomewhat noisy, but or-queries benifit a little when skipMultiplier=32. \\nAnd results when we set blockSize fixed to 64:  http:\\/\\/pastebin.com\\/FQBiKGim               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431183\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431183&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431183\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431183_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431183_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 15:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T15:51:38+0000\'\u003e08\\/Aug\\/12 15:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tested BulkVInt again, ie to decouple the cutover from Sep to BlockPF vs the\u003cbr\\/\u003e\\nvInt\\/FOR change.\u003c\\/p\u003e\\n\\n\u003cp\u003eBase=Lucene40, comp=BlockPF(BulkVInt):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev baseQPS bulkVIntStdDev bulkVInt   Pct diff\\n          AndHighLow      857.35       20.10      614.20       10.73  -31% -  -25%\\n             Respell       62.99        2.35       60.53        1.34   -9% -    2%\\n          AndHighMed       65.64        2.24       63.61        0.93   -7% -    1%\\n              Fuzzy2       62.83        1.75       61.72        1.31   -6% -    3%\\n            PKLookup      195.97        1.87      194.73        5.00   -4% -    2%\\n              IntNRQ       12.50        0.10       12.43        1.49  -13% -   12%\\n              Fuzzy1       72.68        1.12       73.84        0.88   -1% -    4%\\n          HighPhrase        1.75        0.05        1.78        0.08   -5% -    8%\\n         LowSpanNear        9.01        0.12        9.27        0.13    0% -    5%\\n           LowPhrase       19.73        0.43       20.64        0.15    1% -    7%\\n         MedSpanNear        4.52        0.06        4.74        0.01    3% -    6%\\n           MedPhrase       11.74        0.31       12.40        0.09    2% -    9%\\n             LowTerm      435.96       13.41      467.22        9.10    1% -   12%\\n             Prefix3       75.47        0.51       81.52        4.38    1% -   14%\\n            Wildcard       48.66        0.44       52.79        2.79    1% -   15%\\n          OrHighHigh       10.11        0.63       11.06        0.32    0% -   20%\\n           OrHighMed       20.85        1.31       22.99        0.63    0% -   20%\\n        HighSpanNear        1.50        0.02        1.67        0.01    8% -   13%\\n           OrHighLow       23.55        1.46       26.51        0.76    2% -   23%\\n     LowSloppyPhrase        6.45        0.14        7.37        0.18    9% -   19%\\n             MedTerm      163.46       10.30      188.55        5.22    5% -   26%\\n     MedSloppyPhrase        5.74        0.12        6.65        0.15   10% -   20%\\n    HighSloppyPhrase        1.69        0.04        1.98        0.11    8% -   26%\\n         AndHighHigh       19.00        0.53       22.91        0.24   16% -   25%\\n            HighTerm       28.28        1.95       34.48        0.99   10% -   34%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\\n\u003cp\u003eBase=BlockPF(BulkVInt), comp=BlockPF(FOR):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n              IntNRQ       12.10        1.70       11.61        0.02  -16% -   11%\\n    HighSloppyPhrase        2.00        0.11        1.95        0.03   -8% -    4%\\n          HighPhrase        1.85        0.05        1.81        0.07   -8% -    4%\\n            Wildcard       52.32        3.09       52.49        0.24   -5% -    7%\\n     LowSloppyPhrase        7.41        0.24        7.43        0.19   -5% -    6%\\n     MedSloppyPhrase        6.69        0.18        6.72        0.21   -5% -    6%\\n           OrHighMed       22.99        0.55       23.23        0.85   -4% -    7%\\n             Respell       61.99        2.01       62.70        1.57   -4% -    7%\\n           OrHighLow       26.52        0.69       26.83        1.00   -5% -    7%\\n              Fuzzy1       74.72        1.34       75.59        1.43   -2% -    4%\\n            PKLookup      189.68        7.14      192.09        3.82   -4% -    7%\\n          OrHighHigh       11.05        0.27       11.21        0.42   -4% -    7%\\n              Fuzzy2       62.78        1.86       63.70        1.87   -4% -    7%\\n        HighSpanNear        1.65        0.03        1.69        0.02    0% -    5%\\n             Prefix3       80.25        5.44       82.57        1.03   -4% -   11%\\n         AndHighHigh       22.79        0.11       23.53        0.13    2% -    4%\\n         LowSpanNear        9.16        0.26        9.48        0.21   -1% -    8%\\n         MedSpanNear        4.67        0.09        4.84        0.07    0% -    7%\\n           MedPhrase       12.59        0.26       13.07        0.24    0% -    7%\\n           LowPhrase       20.86        0.33       22.06        0.30    2% -    8%\\n          AndHighLow      618.27       13.15      655.52        3.30    3% -    8%\\n            HighTerm       33.95        1.11       36.02        0.08    2% -    9%\\n             MedTerm      186.09        5.51      198.46        0.09    3% -    9%\\n          AndHighMed       63.71        1.15       69.15        0.45    5% -   11%\\n             LowTerm      469.17        7.25      514.55        2.83    7% -   12%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eSo ... most of the gains come from BlockPF cutover.  This is sort of\u003cbr\\/\u003e\\n... surprising\\/disappointing, ie, our bottlenecks are the abstraction\u003cbr\\/\u003e\\nlayers, not the actual decode cost.  Still it\'s good to make progress\u003cbr\\/\u003e\\non removing the abstractions.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, it looks like the only query that is slower than Lucene40 is\u003cbr\\/\u003e\\nAndHighLow ... however, it\'s also an extremely fast query to begin\u003cbr\\/\u003e\\nwith so I think it\'s a fine tradeoff that it gets slower while the\u003cbr\\/\u003e\\nhard\\/slower queries get faster.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431183_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431183_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 15:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T15:51:38+0000\'\u003e08\\/Aug\\/12 15:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I tested BulkVInt again, ie to decouple the cutover from Sep to BlockPF vs the \\nvInt\\/FOR change. \\n\\n Base=Lucene40, comp=BlockPF(BulkVInt): \\n\\n  \\n                 Task    QPS base StdDev baseQPS bulkVIntStdDev bulkVInt   Pct diff\\n          AndHighLow      857.35       20.10      614.20       10.73  -31% -  -25%\\n             Respell       62.99        2.35       60.53        1.34   -9% -    2%\\n          AndHighMed       65.64        2.24       63.61        0.93   -7% -    1%\\n              Fuzzy2       62.83        1.75       61.72        1.31   -6% -    3%\\n            PKLookup      195.97        1.87      194.73        5.00   -4% -    2%\\n              IntNRQ       12.50        0.10       12.43        1.49  -13% -   12%\\n              Fuzzy1       72.68        1.12       73.84        0.88   -1% -    4%\\n          HighPhrase        1.75        0.05        1.78        0.08   -5% -    8%\\n         LowSpanNear        9.01        0.12        9.27        0.13    0% -    5%\\n           LowPhrase       19.73        0.43       20.64        0.15    1% -    7%\\n         MedSpanNear        4.52        0.06        4.74        0.01    3% -    6%\\n           MedPhrase       11.74        0.31       12.40        0.09    2% -    9%\\n             LowTerm      435.96       13.41      467.22        9.10    1% -   12%\\n             Prefix3       75.47        0.51       81.52        4.38    1% -   14%\\n            Wildcard       48.66        0.44       52.79        2.79    1% -   15%\\n          OrHighHigh       10.11        0.63       11.06        0.32    0% -   20%\\n           OrHighMed       20.85        1.31       22.99        0.63    0% -   20%\\n        HighSpanNear        1.50        0.02        1.67        0.01    8% -   13%\\n           OrHighLow       23.55        1.46       26.51        0.76    2% -   23%\\n     LowSloppyPhrase        6.45        0.14        7.37        0.18    9% -   19%\\n             MedTerm      163.46       10.30      188.55        5.22    5% -   26%\\n     MedSloppyPhrase        5.74        0.12        6.65        0.15   10% -   20%\\n    HighSloppyPhrase        1.69        0.04        1.98        0.11    8% -   26%\\n         AndHighHigh       19.00        0.53       22.91        0.24   16% -   25%\\n            HighTerm       28.28        1.95       34.48        0.99   10% -   34%\\n \\n  \\n\\n\\n Base=BlockPF(BulkVInt), comp=BlockPF(FOR): \\n\\n  \\n                 Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n              IntNRQ       12.10        1.70       11.61        0.02  -16% -   11%\\n    HighSloppyPhrase        2.00        0.11        1.95        0.03   -8% -    4%\\n          HighPhrase        1.85        0.05        1.81        0.07   -8% -    4%\\n            Wildcard       52.32        3.09       52.49        0.24   -5% -    7%\\n     LowSloppyPhrase        7.41        0.24        7.43        0.19   -5% -    6%\\n     MedSloppyPhrase        6.69        0.18        6.72        0.21   -5% -    6%\\n           OrHighMed       22.99        0.55       23.23        0.85   -4% -    7%\\n             Respell       61.99        2.01       62.70        1.57   -4% -    7%\\n           OrHighLow       26.52        0.69       26.83        1.00   -5% -    7%\\n              Fuzzy1       74.72        1.34       75.59        1.43   -2% -    4%\\n            PKLookup      189.68        7.14      192.09        3.82   -4% -    7%\\n          OrHighHigh       11.05        0.27       11.21        0.42   -4% -    7%\\n              Fuzzy2       62.78        1.86       63.70        1.87   -4% -    7%\\n        HighSpanNear        1.65        0.03        1.69        0.02    0% -    5%\\n             Prefix3       80.25        5.44       82.57        1.03   -4% -   11%\\n         AndHighHigh       22.79        0.11       23.53        0.13    2% -    4%\\n         LowSpanNear        9.16        0.26        9.48        0.21   -1% -    8%\\n         MedSpanNear        4.67        0.09        4.84        0.07    0% -    7%\\n           MedPhrase       12.59        0.26       13.07        0.24    0% -    7%\\n           LowPhrase       20.86        0.33       22.06        0.30    2% -    8%\\n          AndHighLow      618.27       13.15      655.52        3.30    3% -    8%\\n            HighTerm       33.95        1.11       36.02        0.08    2% -    9%\\n             MedTerm      186.09        5.51      198.46        0.09    3% -    9%\\n          AndHighMed       63.71        1.15       69.15        0.45    5% -   11%\\n             LowTerm      469.17        7.25      514.55        2.83    7% -   12%\\n \\n  \\n\\n So ... most of the gains come from BlockPF cutover.  This is sort of \\n... surprising\\/disappointing, ie, our bottlenecks are the abstraction \\nlayers, not the actual decode cost.  Still it\'s good to make progress \\non removing the abstractions. \\n\\n Also, it looks like the only query that is slower than Lucene40 is \\nAndHighLow ... however, it\'s also an extremely fast query to begin \\nwith so I think it\'s a fine tradeoff that it gets slower while the \\nhard\\/slower queries get faster.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431193\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431193&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431193\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13431193_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431193_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 16:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T16:08:24+0000\'\u003e08\\/Aug\\/12 16:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eSo ... most of the gains come from BlockPF cutover. This is sort of\u003cbr\\/\u003e\\n... surprising\\/disappointing, ie, our bottlenecks are the abstraction\u003cbr\\/\u003e\\nlayers, not the actual decode cost. Still it\'s good to make progress\u003cbr\\/\u003e\\non removing the abstractions.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI don\'t think its that disappointing. This isnt a very interesting\u003cbr\\/\u003e\\nbenchmark for a compression algorithm like FOR: instead imagine the\u003cbr\\/\u003e\\nvery common case of apps today indexing small fields like product names,\u003cbr\\/\u003e\\nrestaurant names, or something like that. Freqs are nearly always 1,\u003cbr\\/\u003e\\nand positions are tiny, but often people still want the ability to\u003cbr\\/\u003e\\nuse things like phrase queries. And imagine cases where people\u003cbr\\/\u003e\\nare indexing data from a database and there are only a few unique\u003cbr\\/\u003e\\nvalues (e.g. product type = tshirt, pants, shoes) in a field. \u003c\\/p\u003e\\n\\n\u003cp\u003eI think the wikipedia benchmark doesn\'t do a very good job of illustrating \u003cbr\\/\u003e\\nperformance on use-cases like this, which I think are common and also\u003cbr\\/\u003e\\nwhere I\'m fairly positive FOR will be a win. \u003c\\/p\u003e\\n\\n\u003cp\u003eIts nice that its not slower or too much bigger in the \\\"worst case\\\"\u003cbr\\/\u003e\\nof large docs where the numbers aren\'t so tiny?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003eAlso, it looks like the only query that is slower than Lucene40 is\u003cbr\\/\u003e\\nAndHighLow ... however, it\'s also an extremely fast query to begin\u003cbr\\/\u003e\\nwith so I think it\'s a fine tradeoff that it gets slower while the\u003cbr\\/\u003e\\nhard\\/slower queries get faster.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1, lets not even think twice about that one.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13431193_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431193_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 16:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T16:08:24+0000\'\u003e08\\/Aug\\/12 16:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n So ... most of the gains come from BlockPF cutover. This is sort of \\n... surprising\\/disappointing, ie, our bottlenecks are the abstraction \\nlayers, not the actual decode cost. Still it\'s good to make progress \\non removing the abstractions.  \\n\\n I don\'t think its that disappointing. This isnt a very interesting \\nbenchmark for a compression algorithm like FOR: instead imagine the \\nvery common case of apps today indexing small fields like product names, \\nrestaurant names, or something like that. Freqs are nearly always 1, \\nand positions are tiny, but often people still want the ability to \\nuse things like phrase queries. And imagine cases where people \\nare indexing data from a database and there are only a few unique \\nvalues (e.g. product type = tshirt, pants, shoes) in a field.  \\n\\n I think the wikipedia benchmark doesn\'t do a very good job of illustrating  \\nperformance on use-cases like this, which I think are common and also \\nwhere I\'m fairly positive FOR will be a win.  \\n\\n Its nice that its not slower or too much bigger in the \\\"worst case\\\" \\nof large docs where the numbers aren\'t so tiny? \\n\\n \\n Also, it looks like the only query that is slower than Lucene40 is \\nAndHighLow ... however, it\'s also an extremely fast query to begin \\nwith so I think it\'s a fine tradeoff that it gets slower while the \\nhard\\/slower queries get faster.  \\n\\n +1, lets not even think twice about that one. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431324\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431324&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431324\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431324_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431324_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 19:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T19:37:13+0000\'\u003e08\\/Aug\\/12 19:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Adrien Grand - 08\\/Aug\\/12 19:38\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI did some changes to the \u003ctt\u003eBlockPacked\u003c\\/tt\u003e codec:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eencoding and decoding using int[] instead of long[]\u003c\\/li\u003e\\n\\t\u003cli\u003eselection of the format based on a configurable overhead ratio.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThe results are encouraging (using acceptableOverheadRatio = PackedInts.DEFAULT = 20%):\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS 3892 StdDev 3892QPS 3892-packedStdDev 3892-packed      Pct diff\\n            PKLookup      256.93        8.89      256.85        7.47   -6% -    6%\\n           OrHighLow      145.14        9.86      145.14        9.35  -12% -   14%\\n             Respell      110.26        1.84      110.27        2.01   -3% -    3%\\n         AndHighHigh      112.97        0.81      113.19        2.17   -2% -    2%\\n              Fuzzy1      102.15        1.47      102.86        3.13   -3% -    5%\\n          OrHighHigh       94.56        6.56       95.43        6.35  -11% -   15%\\n              Fuzzy2       42.49        0.77       42.89        1.43   -4% -    6%\\n           OrHighMed      175.30       11.34      177.42       10.83  -10% -   14%\\n          AndHighLow     1925.02       23.92     1952.57       48.68   -2% -    5%\\n          HighPhrase        8.96        0.41        9.11        0.46   -7% -   11%\\n            Wildcard      189.79        2.13      193.12        1.57    0% -    3%\\n        HighSpanNear        6.47        0.15        6.59        0.25   -4% -    8%\\n             Prefix3      256.67        2.58      262.40        2.84    0% -    4%\\n             LowTerm     1746.52       52.80     1789.54       54.30   -3% -    8%\\n            HighTerm      238.70       13.46      245.63       16.60   -9% -   16%\\n             MedTerm      923.64       38.19      951.18       46.85   -5% -   12%\\n          AndHighMed      364.46        3.65      377.09       10.03    0% -    7%\\n              IntNRQ       56.58        1.02       58.84        0.80    0% -    7%\\n    HighSloppyPhrase       11.73        0.30       12.40        0.62   -2% -   13%\\n         LowSpanNear       29.64        0.96       32.44        0.98    2% -   16%\\n         MedSpanNear       22.96        0.72       25.16        0.85    2% -   16%\\n           MedPhrase       40.99        1.25       45.09        1.24    3% -   16%\\n     LowSloppyPhrase       37.88        0.99       41.98        1.49    4% -   17%\\n           LowPhrase       64.40        2.04       71.84        1.41    5% -   17%\\n     MedSloppyPhrase       42.29        1.16       47.32        1.54    5% -   18%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI hope this will be confirmed on your computers this time .\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431324_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431324_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 19:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T19:37:13+0000\'\u003e08\\/Aug\\/12 19:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Adrien Grand - 08\\/Aug\\/12 19:38\\\"\u003eedited\u003c\\/span\u003e                   I did some changes to the  BlockPacked  codec: \\n \\n\\t encoding and decoding using int[] instead of long[] \\n\\t selection of the format based on a configurable overhead ratio. \\n \\n\\n\\n The results are encouraging (using acceptableOverheadRatio = PackedInts.DEFAULT = 20%): \\n  \\n                 Task    QPS 3892 StdDev 3892QPS 3892-packedStdDev 3892-packed      Pct diff\\n            PKLookup      256.93        8.89      256.85        7.47   -6% -    6%\\n           OrHighLow      145.14        9.86      145.14        9.35  -12% -   14%\\n             Respell      110.26        1.84      110.27        2.01   -3% -    3%\\n         AndHighHigh      112.97        0.81      113.19        2.17   -2% -    2%\\n              Fuzzy1      102.15        1.47      102.86        3.13   -3% -    5%\\n          OrHighHigh       94.56        6.56       95.43        6.35  -11% -   15%\\n              Fuzzy2       42.49        0.77       42.89        1.43   -4% -    6%\\n           OrHighMed      175.30       11.34      177.42       10.83  -10% -   14%\\n          AndHighLow     1925.02       23.92     1952.57       48.68   -2% -    5%\\n          HighPhrase        8.96        0.41        9.11        0.46   -7% -   11%\\n            Wildcard      189.79        2.13      193.12        1.57    0% -    3%\\n        HighSpanNear        6.47        0.15        6.59        0.25   -4% -    8%\\n             Prefix3      256.67        2.58      262.40        2.84    0% -    4%\\n             LowTerm     1746.52       52.80     1789.54       54.30   -3% -    8%\\n            HighTerm      238.70       13.46      245.63       16.60   -9% -   16%\\n             MedTerm      923.64       38.19      951.18       46.85   -5% -   12%\\n          AndHighMed      364.46        3.65      377.09       10.03    0% -    7%\\n              IntNRQ       56.58        1.02       58.84        0.80    0% -    7%\\n    HighSloppyPhrase       11.73        0.30       12.40        0.62   -2% -   13%\\n         LowSpanNear       29.64        0.96       32.44        0.98    2% -   16%\\n         MedSpanNear       22.96        0.72       25.16        0.85    2% -   16%\\n           MedPhrase       40.99        1.25       45.09        1.24    3% -   16%\\n     LowSloppyPhrase       37.88        0.99       41.98        1.49    4% -   17%\\n           LowPhrase       64.40        2.04       71.84        1.41    5% -   17%\\n     MedSloppyPhrase       42.29        1.16       47.32        1.54    5% -   18%\\n \\n  \\n\\n I hope this will be confirmed on your computers this time .               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431485\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431485&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431485\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431485_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431485_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 22:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T22:59:19+0000\'\u003e08\\/Aug\\/12 22:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI also see (smaller) gains with BlockPacked vs Block (this is 10M doc index):\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base  QPS packedStdDev packed      Pct diff\\n          AndHighMed       69.19        0.53       66.43        0.63   -5% -   -2%\\n              Fuzzy2       63.71        1.24       62.25        1.58   -6% -    2%\\n             Respell       62.69        1.41       61.53        1.47   -6% -    2%\\n              IntNRQ       11.86        0.43       11.73        0.03   -4% -    2%\\n              Fuzzy1       75.48        1.21       75.05        1.52   -4% -    3%\\n            Wildcard       53.23        0.63       52.96        0.25   -2% -    1%\\n         MedSpanNear        4.88        0.16        4.88        0.11   -5% -    5%\\n            PKLookup      191.48        2.84      191.62        3.98   -3% -    3%\\n            HighTerm       35.71        0.63       35.91        0.06   -1% -    2%\\n             Prefix3       83.14        1.34       83.83        0.49   -1% -    3%\\n             LowTerm      513.35        0.77      517.92        1.50    0% -    1%\\n        HighSpanNear        1.70        0.06        1.71        0.03   -4% -    6%\\n         AndHighHigh       23.45        0.09       23.69        0.10    0% -    1%\\n           OrHighLow       27.27        1.06       27.59        0.15   -3% -    5%\\n           OrHighMed       23.61        0.92       23.89        0.17   -3% -    6%\\n          OrHighHigh       11.42        0.44       11.59        0.12   -3% -    6%\\n     MedSloppyPhrase        6.84        0.17        6.95        0.23   -4% -    7%\\n           LowPhrase       22.02        0.39       22.43        0.15    0% -    4%\\n             MedTerm      196.76        3.01      200.62        0.33    0% -    3%\\n         LowSpanNear        9.60        0.24        9.82        0.31   -3% -    8%\\n           MedPhrase       13.08        0.30       13.41        0.12    0% -    5%\\n     LowSloppyPhrase        7.55        0.21        7.77        0.27   -3% -    9%\\n          AndHighLow      649.84       18.26      669.08        6.63    0% -    6%\\n    HighSloppyPhrase        1.98        0.08        2.04        0.09   -4% -   12%\\n          HighPhrase        1.76        0.11        1.96        0.10    0% -   24%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThe index is 4669 MB with Block and 4790 with BlockPacked = ~2.6%\u003cbr\\/\u003e\\nlarger ... seems worth it!  Apps can always tune the 20% too.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431485_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431485_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 22:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T22:59:19+0000\'\u003e08\\/Aug\\/12 22:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I also see (smaller) gains with BlockPacked vs Block (this is 10M doc index): \\n  \\n                 Task    QPS base StdDev base  QPS packedStdDev packed      Pct diff\\n          AndHighMed       69.19        0.53       66.43        0.63   -5% -   -2%\\n              Fuzzy2       63.71        1.24       62.25        1.58   -6% -    2%\\n             Respell       62.69        1.41       61.53        1.47   -6% -    2%\\n              IntNRQ       11.86        0.43       11.73        0.03   -4% -    2%\\n              Fuzzy1       75.48        1.21       75.05        1.52   -4% -    3%\\n            Wildcard       53.23        0.63       52.96        0.25   -2% -    1%\\n         MedSpanNear        4.88        0.16        4.88        0.11   -5% -    5%\\n            PKLookup      191.48        2.84      191.62        3.98   -3% -    3%\\n            HighTerm       35.71        0.63       35.91        0.06   -1% -    2%\\n             Prefix3       83.14        1.34       83.83        0.49   -1% -    3%\\n             LowTerm      513.35        0.77      517.92        1.50    0% -    1%\\n        HighSpanNear        1.70        0.06        1.71        0.03   -4% -    6%\\n         AndHighHigh       23.45        0.09       23.69        0.10    0% -    1%\\n           OrHighLow       27.27        1.06       27.59        0.15   -3% -    5%\\n           OrHighMed       23.61        0.92       23.89        0.17   -3% -    6%\\n          OrHighHigh       11.42        0.44       11.59        0.12   -3% -    6%\\n     MedSloppyPhrase        6.84        0.17        6.95        0.23   -4% -    7%\\n           LowPhrase       22.02        0.39       22.43        0.15    0% -    4%\\n             MedTerm      196.76        3.01      200.62        0.33    0% -    3%\\n         LowSpanNear        9.60        0.24        9.82        0.31   -3% -    8%\\n           MedPhrase       13.08        0.30       13.41        0.12    0% -    5%\\n     LowSloppyPhrase        7.55        0.21        7.77        0.27   -3% -    9%\\n          AndHighLow      649.84       18.26      669.08        6.63    0% -    6%\\n    HighSloppyPhrase        1.98        0.08        2.04        0.09   -4% -   12%\\n          HighPhrase        1.76        0.11        1.96        0.10    0% -   24%\\n \\n  \\n\\n The index is 4669 MB with Block and 4790 with BlockPacked = ~2.6% \\nlarger ... seems worth it!  Apps can always tune the 20% too.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431491\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431491&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431491\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431491_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431491_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:05:02+0000\'\u003e08\\/Aug\\/12 23:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI created a non-specialized (ie single method to handle all numBits\u003cbr\\/\u003e\\ncases) packed int decoder that decodes directly from byte[].  Baseline\u003cbr\\/\u003e\\nis current BlockPF (FOR w\\/ specialized decoder), comp is w\\/ the patch\u003cbr\\/\u003e\\n(using non-specialized decoder):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n          AndHighMed       69.04        0.77       36.41        1.91  -50% -  -43%\\n          AndHighLow      649.70       17.03      346.71       18.22  -50% -  -42%\\n         LowSpanNear        9.88        0.25        5.53        0.06  -45% -  -42%\\n           MedPhrase       13.25        0.26        7.74        0.07  -43% -  -39%\\n     LowSloppyPhrase        7.59        0.15        4.54        0.13  -43% -  -37%\\n           LowPhrase       22.29        0.31       13.77        0.08  -39% -  -36%\\n         AndHighHigh       23.55        0.12       15.22        0.63  -38% -  -32%\\n     MedSloppyPhrase        6.88        0.12        4.60        0.16  -36% -  -29%\\n    HighSloppyPhrase        1.98        0.07        1.38        0.05  -35% -  -25%\\n            HighTerm       36.11        0.01       25.31        0.87  -32% -  -27%\\n         MedSpanNear        5.02        0.16        3.56        0.03  -31% -  -26%\\n             MedTerm      198.76        0.34      142.92        4.34  -30% -  -25%\\n          HighPhrase        1.83        0.08        1.32        0.02  -31% -  -23%\\n           OrHighLow       27.32        1.10       20.55        0.54  -29% -  -19%\\n           OrHighMed       23.65        0.93       17.83        0.44  -29% -  -19%\\n          OrHighHigh       11.42        0.46        8.72        0.20  -28% -  -18%\\n        HighSpanNear        1.74        0.06        1.38        0.01  -24% -  -17%\\n              IntNRQ       11.61        0.01        9.26        0.02  -20% -  -20%\\n             LowTerm      513.60        2.26      411.60        7.65  -21% -  -18%\\n             Prefix3       82.36        1.05       67.48        1.29  -20% -  -15%\\n            Wildcard       52.63        0.44       43.45        0.81  -19% -  -15%\\n              Fuzzy1       74.74        1.02       70.03        0.80   -8% -   -3%\\n            PKLookup      192.60        3.94      191.87        2.07   -3% -    2%\\n              Fuzzy2       62.50        1.29       62.74        1.10   -3% -    4%\\n             Respell       61.69        1.04       62.79        0.84   -1% -    4%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eSo... is it\'s clear all our the specializing does help!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431491_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431491_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:05:02+0000\'\u003e08\\/Aug\\/12 23:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I created a non-specialized (ie single method to handle all numBits \\ncases) packed int decoder that decodes directly from byte[].  Baseline \\nis current BlockPF (FOR w\\/ specialized decoder), comp is w\\/ the patch \\n(using non-specialized decoder): \\n\\n  \\n                 Task    QPS base StdDev base     QPS for  StdDev for      Pct diff\\n          AndHighMed       69.04        0.77       36.41        1.91  -50% -  -43%\\n          AndHighLow      649.70       17.03      346.71       18.22  -50% -  -42%\\n         LowSpanNear        9.88        0.25        5.53        0.06  -45% -  -42%\\n           MedPhrase       13.25        0.26        7.74        0.07  -43% -  -39%\\n     LowSloppyPhrase        7.59        0.15        4.54        0.13  -43% -  -37%\\n           LowPhrase       22.29        0.31       13.77        0.08  -39% -  -36%\\n         AndHighHigh       23.55        0.12       15.22        0.63  -38% -  -32%\\n     MedSloppyPhrase        6.88        0.12        4.60        0.16  -36% -  -29%\\n    HighSloppyPhrase        1.98        0.07        1.38        0.05  -35% -  -25%\\n            HighTerm       36.11        0.01       25.31        0.87  -32% -  -27%\\n         MedSpanNear        5.02        0.16        3.56        0.03  -31% -  -26%\\n             MedTerm      198.76        0.34      142.92        4.34  -30% -  -25%\\n          HighPhrase        1.83        0.08        1.32        0.02  -31% -  -23%\\n           OrHighLow       27.32        1.10       20.55        0.54  -29% -  -19%\\n           OrHighMed       23.65        0.93       17.83        0.44  -29% -  -19%\\n          OrHighHigh       11.42        0.46        8.72        0.20  -28% -  -18%\\n        HighSpanNear        1.74        0.06        1.38        0.01  -24% -  -17%\\n              IntNRQ       11.61        0.01        9.26        0.02  -20% -  -20%\\n             LowTerm      513.60        2.26      411.60        7.65  -21% -  -18%\\n             Prefix3       82.36        1.05       67.48        1.29  -20% -  -15%\\n            Wildcard       52.63        0.44       43.45        0.81  -19% -  -15%\\n              Fuzzy1       74.74        1.02       70.03        0.80   -8% -   -3%\\n            PKLookup      192.60        3.94      191.87        2.07   -3% -    2%\\n              Fuzzy2       62.50        1.29       62.74        1.10   -3% -    4%\\n             Respell       61.69        1.04       62.79        0.84   -1% -    4%\\n \\n  \\n\\n So... is it\'s clear all our the specializing does help!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431498\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431498&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431498\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431498_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431498_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:13:56+0000\'\u003e08\\/Aug\\/12 23:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mike for your tests. Do you think \u003ctt\u003eBlockPacked\u003c\\/tt\u003e is now fast enough to replace \u003ctt\u003eBlock\u003c\\/tt\u003e with \u003ctt\u003eBlockPacked\u003c\\/tt\u003e? I am asking because it is a little painful to always have to backport changes from one format to the other.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431498_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431498_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:13:56+0000\'\u003e08\\/Aug\\/12 23:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mike for your tests. Do you think  BlockPacked  is now fast enough to replace  Block  with  BlockPacked ? I am asking because it is a little painful to always have to backport changes from one format to the other.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431504\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431504&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431504\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431504_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431504_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:29:18+0000\'\u003e08\\/Aug\\/12 23:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYes I think we should do a hard cutover now?  Ie, merge any final changes (sorry for all the commits!  we are nearly ready to land I think...) over to BlockPacked, then remove Block and rename BlockPacked to Block?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431504_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431504_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:29:18+0000\'\u003e08\\/Aug\\/12 23:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yes I think we should do a hard cutover now?  Ie, merge any final changes (sorry for all the commits!  we are nearly ready to land I think...) over to BlockPacked, then remove Block and rename BlockPacked to Block?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431506\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431506&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431506\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431506_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431506_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:34:32+0000\'\u003e08\\/Aug\\/12 23:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSounds good. I think the only commits that have not been merged yet are 1371010 and 1371011.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431506_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431506_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:34:32+0000\'\u003e08\\/Aug\\/12 23:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sounds good. I think the only commits that have not been merged yet are 1371010 and 1371011.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431511\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431511&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431511\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431511_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431511_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:49:02+0000\'\u003e08\\/Aug\\/12 23:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK I\'ll merge &amp; replace Block w\\/ BlockPacked... likely sometime tomorrow.  Thanks Adrien!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431511_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431511_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/12 23:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-08T23:49:02+0000\'\u003e08\\/Aug\\/12 23:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK I\'ll merge &amp; replace Block w\\/ BlockPacked... likely sometime tomorrow.  Thanks Adrien!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431709\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431709&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431709\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431709_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431709_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 09:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T09:44:33+0000\'\u003e09\\/Aug\\/12 09:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Adrien Grand - 09\\/Aug\\/12 11:05\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe comment you added in 1371011 on the value of \u003ctt\u003eBLOCK_SIZE\u003c\\/tt\u003e caught my attention: I think that BLOCK_SIZE should be at least 64 with PackedInts encoding\\/decoding since these conversions are long-aligned (I backported your two commits and added a comment about this). For example, the \u003ctt\u003ePACKED\u003c\\/tt\u003e 7-bits encoder cannot encode less than 64 values in one iteration.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn case someone would really want to use smaller block sizes (eg. 32), I think it should still perform pretty well if \u003ctt\u003eacceptableOverheadRatio &gt;= ~25%\u003c\\/tt\u003e (in that case, all bits-per-value in the \u003cspan class=\\\"error\\\"\u003e&#91;1-24&#93;\u003c\\/span\u003e range either use a \u003ctt\u003ePACKED_SINGLE_BLOCK\u003c\\/tt\u003e encoder or an 8-bits, 16-bits or 24-bits \u003ctt\u003ePACKED\u003c\\/tt\u003e encoder).\u003c\\/p\u003e\\n\\n\u003cp\u003eDo we plan to make the block size configurable?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431709_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431709_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 09:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T09:44:33+0000\'\u003e09\\/Aug\\/12 09:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Adrien Grand - 09\\/Aug\\/12 11:05\\\"\u003eedited\u003c\\/span\u003e                   The comment you added in 1371011 on the value of  BLOCK_SIZE  caught my attention: I think that BLOCK_SIZE should be at least 64 with PackedInts encoding\\/decoding since these conversions are long-aligned (I backported your two commits and added a comment about this). For example, the  PACKED  7-bits encoder cannot encode less than 64 values in one iteration. \\n\\n In case someone would really want to use smaller block sizes (eg. 32), I think it should still perform pretty well if  acceptableOverheadRatio &gt;= ~25%  (in that case, all bits-per-value in the  &#91;1-24&#93;  range either use a  PACKED_SINGLE_BLOCK  encoder or an 8-bits, 16-bits or 24-bits  PACKED  encoder). \\n\\n Do we plan to make the block size configurable?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431733\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431733&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431733\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431733_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431733_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 10:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T10:53:22+0000\'\u003e09\\/Aug\\/12 10:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Adrien.  So now we just have to replace Block with BlockPacked right?\u003c\\/p\u003e\\n\\n\u003cp\u003eOK let\'s just fix the comment to be multiple of 64.\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t think we need to make BLOCK_SIZE configurable.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431733_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431733_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 10:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T10:53:22+0000\'\u003e09\\/Aug\\/12 10:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Adrien.  So now we just have to replace Block with BlockPacked right? \\n\\n OK let\'s just fix the comment to be multiple of 64. \\n\\n I don\'t think we need to make BLOCK_SIZE configurable.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431735\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431735&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431735\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431735_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431735_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 11:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T11:04:49+0000\'\u003e09\\/Aug\\/12 11:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eSo now we just have to replace Block with BlockPacked right?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYes, I think so.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI don\'t think we need to make BLOCK_SIZE configurable.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIn that case, should we also hard-code the value of \u003ctt\u003eacceptableOverheadRatio\u003c\\/tt\u003e?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431735_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431735_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 11:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T11:04:49+0000\'\u003e09\\/Aug\\/12 11:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     So now we just have to replace Block with BlockPacked right?  \\n\\n Yes, I think so. \\n\\n  I don\'t think we need to make BLOCK_SIZE configurable.  \\n\\n In that case, should we also hard-code the value of  acceptableOverheadRatio ? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431742\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431742&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431742\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431742_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431742_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 11:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T11:22:07+0000\'\u003e09\\/Aug\\/12 11:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eActually let\'s hold off a bit on replacing Block w\\/ BlockPacked: Billy was going to do some more tests with PFOR...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eIn that case, should we also hard-code the value of acceptableOverheadRatio?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHmm that one seems more compelling to let apps change?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431742_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431742_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 11:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T11:22:07+0000\'\u003e09\\/Aug\\/12 11:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Actually let\'s hold off a bit on replacing Block w\\/ BlockPacked: Billy was going to do some more tests with PFOR... \\n\\n  In that case, should we also hard-code the value of acceptableOverheadRatio?  \\n\\n Hmm that one seems more compelling to let apps change?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431753\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431753&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431753\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431753_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431753_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 11:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T11:45:24+0000\'\u003e09\\/Aug\\/12 11:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eShouldn\'t MIN_ENCODED_SIZE be MAX_ENCODED_SIZE?  Ie the max number of\u003cbr\\/\u003e\\nbytes encoding will ever require.  And I think the same for\u003cbr\\/\u003e\\nMIN -&gt; MAX_DATA_SIZE?  Or maybe MIN_REQUIRED_XXX?\u003c\\/p\u003e\\n\\n\u003cp\u003eI think readVIntBlock shouldn\'t be in ForUtil?  Ie it\'s very\u003cbr\\/\u003e\\npostings-format-specific and it\'s not using packed ints at all.  Also\u003cbr\\/\u003e\\nthe \\\"equivalent\\\" readVIntBlock code for the positions case (in the\u003cbr\\/\u003e\\nreadPositions methods) is still in the BlockPackedPostingsReader.  I\u003cbr\\/\u003e\\nthink it\'s great to have writeBlock\\/readBlock\\/skipBlock in ForUtil.\u003c\\/p\u003e\\n\\n\u003cp\u003eDo we really need to write\\/write the 32 format.getId(), numBits into\u003cbr\\/\u003e\\nthe postings file header?  I guess it\'s either that or ... store the float\u003cbr\\/\u003e\\nacceptableOverheadRatio (eg using Float.floatToIntBits I guess) and\u003cbr\\/\u003e\\nhave some back-compat enforced in the logic in\u003cbr\\/\u003e\\nPackedInts.fastestFormatAndBits... hmm.\u003c\\/p\u003e\\n\\n\u003cp\u003eHmm ... MIN_DATA_SIZE is 147 (PACKED_SINGLE_BLOCK, bpv=3), but\u003cbr\\/\u003e\\nBLOCK_SIZE is 128 ... so I guess this means if we ever pick that\u003cbr\\/\u003e\\nformat (because acceptableOverheadRatio allowed us to), we\'re\u003cbr\\/\u003e\\nencoding\\/decoding those extra 19 unused ints right?  (I was just\u003cbr\\/\u003e\\ntrying to understand why we alloc all the int[] to MIN_DATA_SIZE not\u003cbr\\/\u003e\\nBLOCK_SIZE...).\u003c\\/p\u003e\\n\\n\u003cp\u003eForUtil.getMinRequiredBufferSize seems like dead code?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431753_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431753_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 11:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T11:45:24+0000\'\u003e09\\/Aug\\/12 11:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Shouldn\'t MIN_ENCODED_SIZE be MAX_ENCODED_SIZE?  Ie the max number of \\nbytes encoding will ever require.  And I think the same for \\nMIN -&gt; MAX_DATA_SIZE?  Or maybe MIN_REQUIRED_XXX? \\n\\n I think readVIntBlock shouldn\'t be in ForUtil?  Ie it\'s very \\npostings-format-specific and it\'s not using packed ints at all.  Also \\nthe \\\"equivalent\\\" readVIntBlock code for the positions case (in the \\nreadPositions methods) is still in the BlockPackedPostingsReader.  I \\nthink it\'s great to have writeBlock\\/readBlock\\/skipBlock in ForUtil. \\n\\n Do we really need to write\\/write the 32 format.getId(), numBits into \\nthe postings file header?  I guess it\'s either that or ... store the float \\nacceptableOverheadRatio (eg using Float.floatToIntBits I guess) and \\nhave some back-compat enforced in the logic in \\nPackedInts.fastestFormatAndBits... hmm. \\n\\n Hmm ... MIN_DATA_SIZE is 147 (PACKED_SINGLE_BLOCK, bpv=3), but \\nBLOCK_SIZE is 128 ... so I guess this means if we ever pick that \\nformat (because acceptableOverheadRatio allowed us to), we\'re \\nencoding\\/decoding those extra 19 unused ints right?  (I was just \\ntrying to understand why we alloc all the int[] to MIN_DATA_SIZE not \\nBLOCK_SIZE...). \\n\\n ForUtil.getMinRequiredBufferSize seems like dead code?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431762\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431762&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431762\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13431762_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431762_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 12:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T12:13:21+0000\'\u003e09\\/Aug\\/12 12:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you Adrien! The BlockPacked PF also worked well on my computer \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base  QPS packedStdDev packed      Pct diff\\n         AndHighHigh      122.57        3.01      123.90        2.49   -3% -    5%\\n          AndHighLow     2260.53       21.18     2273.77       55.09   -2% -    3%\\n          AndHighMed      328.01        8.18      329.31       11.36   -5% -    6%\\n              Fuzzy1       86.37        0.94       86.24        2.12   -3% -    3%\\n              Fuzzy2       31.40        0.46       31.22        0.64   -4% -    2%\\n          HighPhrase        9.09        0.51        9.15        0.40   -8% -   11%\\n    HighSloppyPhrase        5.30        0.25        5.34        0.08   -5% -    7%\\n        HighSpanNear       10.11        0.44       10.42        0.34   -4% -   11%\\n            HighTerm      179.43        7.26      178.96        5.70   -7% -    7%\\n              IntNRQ       61.87        3.79       60.59        4.31  -14% -   11%\\n           LowPhrase       41.23        1.54       42.97        1.32   -2% -   11%\\n     LowSloppyPhrase       62.83        2.11       68.23        0.99    3% -   14%\\n         LowSpanNear       81.28        2.74       85.74        2.67   -1% -   12%\\n             LowTerm     1763.70       29.21     1778.41       23.07   -2% -    3%\\n           MedPhrase       27.06        1.16       27.54        0.88   -5% -    9%\\n     MedSloppyPhrase       31.82        1.16       33.70        0.14    1% -   10%\\n         MedSpanNear       23.09        0.93       23.84        0.79   -4% -   11%\\n             MedTerm      659.09       22.65      671.54       19.79   -4% -    8%\\n          OrHighHigh       27.36        0.52       27.41        1.25   -6% -    6%\\n           OrHighLow      154.99        2.07      156.20        7.08   -5% -    6%\\n           OrHighMed      105.13        1.52      105.30        4.65   -5% -    6%\\n            PKLookup      210.64        6.95      217.57        2.08    0% -    7%\\n             Prefix3      170.22        6.22      166.80        4.18   -7% -    4%\\n             Respell       83.96        1.47       83.75        1.25   -3% -    3%\\n            Wildcard      155.08        4.31      155.31        3.12   -4% -    5%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13431762_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431762_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 12:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T12:13:21+0000\'\u003e09\\/Aug\\/12 12:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you Adrien! The BlockPacked PF also worked well on my computer   \\n  \\n                 Task    QPS base StdDev base  QPS packedStdDev packed      Pct diff\\n         AndHighHigh      122.57        3.01      123.90        2.49   -3% -    5%\\n          AndHighLow     2260.53       21.18     2273.77       55.09   -2% -    3%\\n          AndHighMed      328.01        8.18      329.31       11.36   -5% -    6%\\n              Fuzzy1       86.37        0.94       86.24        2.12   -3% -    3%\\n              Fuzzy2       31.40        0.46       31.22        0.64   -4% -    2%\\n          HighPhrase        9.09        0.51        9.15        0.40   -8% -   11%\\n    HighSloppyPhrase        5.30        0.25        5.34        0.08   -5% -    7%\\n        HighSpanNear       10.11        0.44       10.42        0.34   -4% -   11%\\n            HighTerm      179.43        7.26      178.96        5.70   -7% -    7%\\n              IntNRQ       61.87        3.79       60.59        4.31  -14% -   11%\\n           LowPhrase       41.23        1.54       42.97        1.32   -2% -   11%\\n     LowSloppyPhrase       62.83        2.11       68.23        0.99    3% -   14%\\n         LowSpanNear       81.28        2.74       85.74        2.67   -1% -   12%\\n             LowTerm     1763.70       29.21     1778.41       23.07   -2% -    3%\\n           MedPhrase       27.06        1.16       27.54        0.88   -5% -    9%\\n     MedSloppyPhrase       31.82        1.16       33.70        0.14    1% -   10%\\n         MedSpanNear       23.09        0.93       23.84        0.79   -4% -   11%\\n             MedTerm      659.09       22.65      671.54       19.79   -4% -    8%\\n          OrHighHigh       27.36        0.52       27.41        1.25   -6% -    6%\\n           OrHighLow      154.99        2.07      156.20        7.08   -5% -    6%\\n           OrHighMed      105.13        1.52      105.30        4.65   -5% -    6%\\n            PKLookup      210.64        6.95      217.57        2.08    0% -    7%\\n             Prefix3      170.22        6.22      166.80        4.18   -7% -    4%\\n             Respell       83.96        1.47       83.75        1.25   -3% -    3%\\n            Wildcard      155.08        4.31      155.31        3.12   -4% -    5%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431764\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431764&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431764\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431764_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431764_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 12:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T12:16:11+0000\'\u003e09\\/Aug\\/12 12:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think, for a fair test, we should also test w\\/ acceptableOverheadRatio=0 ... I\'ll run that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431764_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431764_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 12:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T12:16:11+0000\'\u003e09\\/Aug\\/12 12:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think, for a fair test, we should also test w\\/ acceptableOverheadRatio=0 ... I\'ll run that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431767\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431767&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431767\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431767_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431767_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 12:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T12:22:07+0000\'\u003e09\\/Aug\\/12 12:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eShouldn\'t MIN_ENCODED_SIZE be MAX_ENCODED_SIZE?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI prefixed with \\\"MIN\\\" because it is the minimum size the encoded buffer size must have to be able to handle all cases. But I think you are right, \\\"MAX\\\" or \\\"REQUIRED\\\" would be clearer.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI think readVIntBlock shouldn\'t be in ForUtil?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI\'ll move it back to BlockPackedPostingsReader.\u003c\\/p\u003e\\n\\n\\n\u003cblockquote\u003e\u003cp\u003e Do we really need to write\\/write the 32 format.getId(), numBits into\u003cbr\\/\u003e\\nthe postings file header? I guess it\'s either that or ... store the float\u003cbr\\/\u003e\\nacceptableOverheadRatio (eg using Float.floatToIntBits I guess) and\u003cbr\\/\u003e\\nhave some back-compat enforced in the logic in\u003cbr\\/\u003e\\nPackedInts.fastestFormatAndBits... hmm.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI hesitated between these two approaches but I think writing all cases to the header is less error-prone? Moreover it would allow us to change the logic of \u003ctt\u003efastestFormatAndBits\u003c\\/tt\u003e without having to bump the version number.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e Hmm ... MIN_DATA_SIZE is 147 (PACKED_SINGLE_BLOCK, bpv=3), but\u003cbr\\/\u003e\\nBLOCK_SIZE is 128 ... so I guess this means if we ever pick that\u003cbr\\/\u003e\\nformat (because acceptableOverheadRatio allowed us to), we\'re\u003cbr\\/\u003e\\nencoding\\/decoding those extra 19 unused ints right? (I was just\u003cbr\\/\u003e\\ntrying to understand why we alloc all the int[] to MIN_DATA_SIZE not\u003cbr\\/\u003e\\nBLOCK_SIZE...).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eExactly. The other problem is that we are also storing these unnecessary 19 values (but it is not easy to fix since PACKED_SINGLE_BLOCK writes values in the low-order long bits first (little endian)). Maybe we should make PACKED_SINGLE_BLOCK write values in the high-order bits first and split byte encoders and decoders from the long ones (so that they have a lower \u003ctt\u003evalueCount()\u003c\\/tt\u003e). \u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eForUtil.getMinRequiredBufferSize seems like dead code?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI\'ll remove it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431767_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431767_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 12:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T12:22:07+0000\'\u003e09\\/Aug\\/12 12:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Shouldn\'t MIN_ENCODED_SIZE be MAX_ENCODED_SIZE?  \\n\\n I prefixed with \\\"MIN\\\" because it is the minimum size the encoded buffer size must have to be able to handle all cases. But I think you are right, \\\"MAX\\\" or \\\"REQUIRED\\\" would be clearer. \\n\\n  I think readVIntBlock shouldn\'t be in ForUtil?  \\n\\n I\'ll move it back to BlockPackedPostingsReader. \\n\\n\\n   Do we really need to write\\/write the 32 format.getId(), numBits into \\nthe postings file header? I guess it\'s either that or ... store the float \\nacceptableOverheadRatio (eg using Float.floatToIntBits I guess) and \\nhave some back-compat enforced in the logic in \\nPackedInts.fastestFormatAndBits... hmm.  \\n\\n I hesitated between these two approaches but I think writing all cases to the header is less error-prone? Moreover it would allow us to change the logic of  fastestFormatAndBits  without having to bump the version number. \\n\\n   Hmm ... MIN_DATA_SIZE is 147 (PACKED_SINGLE_BLOCK, bpv=3), but \\nBLOCK_SIZE is 128 ... so I guess this means if we ever pick that \\nformat (because acceptableOverheadRatio allowed us to), we\'re \\nencoding\\/decoding those extra 19 unused ints right? (I was just \\ntrying to understand why we alloc all the int[] to MIN_DATA_SIZE not \\nBLOCK_SIZE...).  \\n\\n Exactly. The other problem is that we are also storing these unnecessary 19 values (but it is not easy to fix since PACKED_SINGLE_BLOCK writes values in the low-order long bits first (little endian)). Maybe we should make PACKED_SINGLE_BLOCK write values in the high-order bits first and split byte encoders and decoders from the long ones (so that they have a lower  valueCount() ).  \\n\\n  ForUtil.getMinRequiredBufferSize seems like dead code?  \\n\\n I\'ll remove it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431882\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431882&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431882\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13431882_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431882_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T15:01:46+0000\'\u003e09\\/Aug\\/12 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI revived the PFor codes, and test it agains BlockFor and BlockPacked:\u003c\\/p\u003e\\n\\n\u003cp\u003eBlockFor as base:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS pfor StdDev pfor      Pct diff\\n         AndHighHigh      121.54        1.37      116.69        2.03   -6% -   -1%\\n          AndHighLow     2286.36       14.19     2212.92       11.48   -4% -   -2%\\n          AndHighMed      322.97        7.37      294.19        4.76  -12% -   -5%\\n              Fuzzy1       85.56        1.46       87.97        3.27   -2% -    8%\\n              Fuzzy2       30.94        0.56       32.16        1.34   -2% -   10%\\n          HighPhrase        9.39        0.38        9.02        0.45  -12% -    5%\\n    HighSloppyPhrase        5.38        0.08        5.24        0.12   -6% -    1%\\n        HighSpanNear       10.38        0.39        9.92        0.08   -8% -    0%\\n            HighTerm      180.30        6.87      172.83        6.26  -11% -    3%\\n              IntNRQ       62.01        3.73       60.89        3.54  -12% -   10%\\n           LowPhrase       42.44        0.67       38.73        0.89  -12% -   -5%\\n     LowSloppyPhrase       62.82        0.79       56.79        0.43  -11% -   -7%\\n         LowSpanNear       81.79        2.00       74.10        1.13  -12% -   -5%\\n             LowTerm     1763.95       39.62     1721.30       34.22   -6% -    1%\\n           MedPhrase       27.87        0.59       25.82        0.74  -11% -   -2%\\n     MedSloppyPhrase       32.15        0.41       29.91        0.31   -9% -   -4%\\n         MedSpanNear       23.48        0.71       22.00        0.05   -9% -   -3%\\n             MedTerm      662.11       24.22      638.81       19.31   -9% -    3%\\n          OrHighHigh       26.82        0.47       27.14        1.93   -7% -   10%\\n           OrHighLow      152.40        3.54      156.58       11.11   -6% -   12%\\n           OrHighMed      103.20        2.26      105.84        7.55   -6% -   12%\\n            PKLookup      216.38        4.32      219.32        2.59   -1% -    4%\\n             Prefix3      169.89        4.97      163.82        3.34   -8% -    1%\\n             Respell       83.23        1.44       86.20        3.00   -1% -    9%\\n            Wildcard      155.81        2.79      152.30        2.54   -5% -    1%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eBlockPacked as base:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS pfor StdDev pfor      Pct diff\\n         AndHighHigh      122.94        3.43      116.24        1.90   -9% -   -1%\\n          AndHighLow     2294.32       58.32     2199.14       31.97   -7% -    0%\\n          AndHighMed      325.55       12.44      290.20        3.80  -15% -   -6%\\n              Fuzzy1       88.33        1.84       87.86        2.54   -5% -    4%\\n              Fuzzy2       31.92        0.80       32.00        0.92   -5% -    5%\\n          HighPhrase        9.73        0.47        9.04        0.29  -14% -    0%\\n    HighSloppyPhrase        5.49        0.19        5.16        0.03   -9% -   -1%\\n        HighSpanNear       10.93        0.23        9.90        0.09  -12% -   -6%\\n            HighTerm      178.31        6.37      171.06        6.14  -10% -    3%\\n              IntNRQ       60.87        4.71       62.38        5.49  -13% -   20%\\n           LowPhrase       44.97        1.18       38.36        1.01  -19% -  -10%\\n     LowSloppyPhrase       69.61        1.19       55.90        1.39  -23% -  -16%\\n         LowSpanNear       88.50        0.66       72.80        2.23  -20% -  -14%\\n             LowTerm     1769.84       32.66     1717.02       39.75   -6% -    1%\\n           MedPhrase       28.88        0.84       25.57        0.68  -16% -   -6%\\n     MedSloppyPhrase       34.47        0.50       29.29        0.54  -17% -  -12%\\n         MedSpanNear       24.88        0.32       21.69        0.38  -15% -  -10%\\n             MedTerm      667.95       21.61      633.73       22.17  -11% -    1%\\n          OrHighHigh       27.96        1.29       26.82        0.81  -11% -    3%\\n           OrHighLow      158.62        5.82      155.08        5.05   -8% -    4%\\n           OrHighMed      107.16        4.19      104.81        3.17   -8% -    4%\\n            PKLookup      217.22        1.86      216.83        1.87   -1% -    1%\\n             Prefix3      167.32        6.72      166.12        6.53   -8% -    7%\\n             Respell       85.25        2.27       85.85        2.16   -4% -    6%\\n            Wildcard      156.24        5.69      154.63        3.02   -6% -    4%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eCurrent PFor impl only saves 1.8% against For, but get quite some perf loss. Let\'s use the Packed version!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13431882_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431882_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T15:01:46+0000\'\u003e09\\/Aug\\/12 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I revived the PFor codes, and test it agains BlockFor and BlockPacked: \\n\\n BlockFor as base: \\n  \\n                 Task    QPS base StdDev base    QPS pfor StdDev pfor      Pct diff\\n         AndHighHigh      121.54        1.37      116.69        2.03   -6% -   -1%\\n          AndHighLow     2286.36       14.19     2212.92       11.48   -4% -   -2%\\n          AndHighMed      322.97        7.37      294.19        4.76  -12% -   -5%\\n              Fuzzy1       85.56        1.46       87.97        3.27   -2% -    8%\\n              Fuzzy2       30.94        0.56       32.16        1.34   -2% -   10%\\n          HighPhrase        9.39        0.38        9.02        0.45  -12% -    5%\\n    HighSloppyPhrase        5.38        0.08        5.24        0.12   -6% -    1%\\n        HighSpanNear       10.38        0.39        9.92        0.08   -8% -    0%\\n            HighTerm      180.30        6.87      172.83        6.26  -11% -    3%\\n              IntNRQ       62.01        3.73       60.89        3.54  -12% -   10%\\n           LowPhrase       42.44        0.67       38.73        0.89  -12% -   -5%\\n     LowSloppyPhrase       62.82        0.79       56.79        0.43  -11% -   -7%\\n         LowSpanNear       81.79        2.00       74.10        1.13  -12% -   -5%\\n             LowTerm     1763.95       39.62     1721.30       34.22   -6% -    1%\\n           MedPhrase       27.87        0.59       25.82        0.74  -11% -   -2%\\n     MedSloppyPhrase       32.15        0.41       29.91        0.31   -9% -   -4%\\n         MedSpanNear       23.48        0.71       22.00        0.05   -9% -   -3%\\n             MedTerm      662.11       24.22      638.81       19.31   -9% -    3%\\n          OrHighHigh       26.82        0.47       27.14        1.93   -7% -   10%\\n           OrHighLow      152.40        3.54      156.58       11.11   -6% -   12%\\n           OrHighMed      103.20        2.26      105.84        7.55   -6% -   12%\\n            PKLookup      216.38        4.32      219.32        2.59   -1% -    4%\\n             Prefix3      169.89        4.97      163.82        3.34   -8% -    1%\\n             Respell       83.23        1.44       86.20        3.00   -1% -    9%\\n            Wildcard      155.81        2.79      152.30        2.54   -5% -    1%\\n \\n  \\n\\n BlockPacked as base: \\n  \\n                 Task    QPS base StdDev base    QPS pfor StdDev pfor      Pct diff\\n         AndHighHigh      122.94        3.43      116.24        1.90   -9% -   -1%\\n          AndHighLow     2294.32       58.32     2199.14       31.97   -7% -    0%\\n          AndHighMed      325.55       12.44      290.20        3.80  -15% -   -6%\\n              Fuzzy1       88.33        1.84       87.86        2.54   -5% -    4%\\n              Fuzzy2       31.92        0.80       32.00        0.92   -5% -    5%\\n          HighPhrase        9.73        0.47        9.04        0.29  -14% -    0%\\n    HighSloppyPhrase        5.49        0.19        5.16        0.03   -9% -   -1%\\n        HighSpanNear       10.93        0.23        9.90        0.09  -12% -   -6%\\n            HighTerm      178.31        6.37      171.06        6.14  -10% -    3%\\n              IntNRQ       60.87        4.71       62.38        5.49  -13% -   20%\\n           LowPhrase       44.97        1.18       38.36        1.01  -19% -  -10%\\n     LowSloppyPhrase       69.61        1.19       55.90        1.39  -23% -  -16%\\n         LowSpanNear       88.50        0.66       72.80        2.23  -20% -  -14%\\n             LowTerm     1769.84       32.66     1717.02       39.75   -6% -    1%\\n           MedPhrase       28.88        0.84       25.57        0.68  -16% -   -6%\\n     MedSloppyPhrase       34.47        0.50       29.29        0.54  -17% -  -12%\\n         MedSpanNear       24.88        0.32       21.69        0.38  -15% -  -10%\\n             MedTerm      667.95       21.61      633.73       22.17  -11% -    1%\\n          OrHighHigh       27.96        1.29       26.82        0.81  -11% -    3%\\n           OrHighLow      158.62        5.82      155.08        5.05   -8% -    4%\\n           OrHighMed      107.16        4.19      104.81        3.17   -8% -    4%\\n            PKLookup      217.22        1.86      216.83        1.87   -1% -    1%\\n             Prefix3      167.32        6.72      166.12        6.53   -8% -    7%\\n             Respell       85.25        2.27       85.85        2.16   -4% -    6%\\n            Wildcard      156.24        5.69      154.63        3.02   -6% -    4%\\n \\n  \\n\\n Current PFor impl only saves 1.8% against For, but get quite some perf loss. Let\'s use the Packed version!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431914\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431914&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431914\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431914_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431914_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 15:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T15:42:34+0000\'\u003e09\\/Aug\\/12 15:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI compared Block w\\/ BlockPacked, but set acceptableOverheadRatio to 0 for a fairer test:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS pack StdDev pack      Pct diff\\n    HighSloppyPhrase        1.94        0.01        1.91        0.05   -4% -    2%\\n           LowPhrase       21.05        0.07       20.84        0.37   -3% -    1%\\n           MedPhrase       13.05        0.04       12.93        0.23   -3% -    1%\\n            Wildcard       43.87        2.76       43.49        2.10  -11% -   10%\\n              IntNRQ        8.88        1.39        8.83        0.78  -21% -   28%\\n              Fuzzy1       63.07        1.96       62.78        1.46   -5% -    5%\\n     LowSloppyPhrase        6.92        0.01        6.91        0.13   -2% -    1%\\n             Prefix3       71.38        5.20       71.35        3.17  -10% -   12%\\n            PKLookup      157.00        1.78      158.01        2.01   -1% -    3%\\n          AndHighLow      668.76        4.82      674.80        7.48    0% -    2%\\n          HighPhrase        1.56        0.03        1.58        0.03   -3% -    5%\\n     MedSloppyPhrase        7.71        0.03        7.80        0.11    0% -    2%\\n          AndHighMed       74.05        0.49       75.35        0.36    0% -    2%\\n         AndHighHigh       25.92        0.30       26.78        0.19    1% -    5%\\n             Respell       57.07        2.70       59.20        1.80   -3% -   12%\\n              Fuzzy2       60.81        2.92       63.32        1.68   -3% -   12%\\n          OrHighHigh        8.99        0.17        9.39        0.11    1% -    7%\\n           OrHighMed       17.65        0.37       18.52        0.13    2% -    7%\\n         MedSpanNear        3.90        0.17        4.11        0.09   -1% -   12%\\n           OrHighLow       22.99        0.51       24.22        0.15    2% -    8%\\n        HighSpanNear        1.40        0.06        1.48        0.03    0% -   12%\\n         LowSpanNear        7.84        0.31        8.32        0.17    0% -   12%\\n             LowTerm      406.02       28.53      444.21       37.75   -6% -   27%\\n             MedTerm      149.83        8.11      167.60       15.06   -3% -   28%\\n            HighTerm       29.57        1.67       33.42        3.20   -3% -   31%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eCuriously it seems even faster than w\\/ acceptableOverheadRatio=0.2!  But it makes it clear we should do a hard cutover.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431914_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431914_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 15:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T15:42:34+0000\'\u003e09\\/Aug\\/12 15:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I compared Block w\\/ BlockPacked, but set acceptableOverheadRatio to 0 for a fairer test: \\n\\n  \\n                 Task    QPS base StdDev base    QPS pack StdDev pack      Pct diff\\n    HighSloppyPhrase        1.94        0.01        1.91        0.05   -4% -    2%\\n           LowPhrase       21.05        0.07       20.84        0.37   -3% -    1%\\n           MedPhrase       13.05        0.04       12.93        0.23   -3% -    1%\\n            Wildcard       43.87        2.76       43.49        2.10  -11% -   10%\\n              IntNRQ        8.88        1.39        8.83        0.78  -21% -   28%\\n              Fuzzy1       63.07        1.96       62.78        1.46   -5% -    5%\\n     LowSloppyPhrase        6.92        0.01        6.91        0.13   -2% -    1%\\n             Prefix3       71.38        5.20       71.35        3.17  -10% -   12%\\n            PKLookup      157.00        1.78      158.01        2.01   -1% -    3%\\n          AndHighLow      668.76        4.82      674.80        7.48    0% -    2%\\n          HighPhrase        1.56        0.03        1.58        0.03   -3% -    5%\\n     MedSloppyPhrase        7.71        0.03        7.80        0.11    0% -    2%\\n          AndHighMed       74.05        0.49       75.35        0.36    0% -    2%\\n         AndHighHigh       25.92        0.30       26.78        0.19    1% -    5%\\n             Respell       57.07        2.70       59.20        1.80   -3% -   12%\\n              Fuzzy2       60.81        2.92       63.32        1.68   -3% -   12%\\n          OrHighHigh        8.99        0.17        9.39        0.11    1% -    7%\\n           OrHighMed       17.65        0.37       18.52        0.13    2% -    7%\\n         MedSpanNear        3.90        0.17        4.11        0.09   -1% -   12%\\n           OrHighLow       22.99        0.51       24.22        0.15    2% -    8%\\n        HighSpanNear        1.40        0.06        1.48        0.03    0% -   12%\\n         LowSpanNear        7.84        0.31        8.32        0.17    0% -   12%\\n             LowTerm      406.02       28.53      444.21       37.75   -6% -   27%\\n             MedTerm      149.83        8.11      167.60       15.06   -3% -   28%\\n            HighTerm       29.57        1.67       33.42        3.20   -3% -   31%\\n \\n  \\n\\n Curiously it seems even faster than w\\/ acceptableOverheadRatio=0.2!  But it makes it clear we should do a hard cutover.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431916\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431916&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431916\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431916_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431916_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 15:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T15:43:05+0000\'\u003e09\\/Aug\\/12 15:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI revived the PFor codes, and test it agains BlockFor and BlockPacked\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThanks Billy, I\'ll run a test too ...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431916_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431916_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 15:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T15:43:05+0000\'\u003e09\\/Aug\\/12 15:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I revived the PFor codes, and test it agains BlockFor and BlockPacked  \\n\\n Thanks Billy, I\'ll run a test too ...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431951\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431951&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431951\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431951_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431951_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 16:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T16:22:23+0000\'\u003e09\\/Aug\\/12 16:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eCuriously it seems even faster than w\\/ acceptableOverheadRatio=0.2! But it makes it clear we should do a hard cutover.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI had been doing some tests with the bulk version of PackedInts.get (which uses the same methods that we use for BlockPacked) while working on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-4098\\\" title=\\\"Efficient bulk operations for packed integer arrays\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-4098\\\"\u003e\u003cdel\u003eLUCENE-4098\u003c\\/del\u003e\u003c\\/a\u003e and it seemed that the bottleneck was more memory bandwidth than CPU (for large arrays at least). If you look at the last graph of \u003ca href=\\\"http:\\/\\/people.apache.org\\/~jpountz\\/packed_ints3.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/people.apache.org\\/~jpountz\\/packed_ints3.html\u003c\\/a\u003e, the throughput seems to depend more on the memory efficiency of the picked impl than on the way it stores data. Maybe we are experiencing a similar phenomenon here...\u003c\\/p\u003e\\n\\n\u003cp\u003eUnless I am missing something, the only difference between BlockPacked and Block is that BlockPacked decodes directly from byte[] whereas Block uses ByteBuffer.asLongBuffer to translate from bytes to ints and then decodes from the ints... Interesting to know it has so much overhead...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13431951_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431951_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 16:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T16:22:23+0000\'\u003e09\\/Aug\\/12 16:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Curiously it seems even faster than w\\/ acceptableOverheadRatio=0.2! But it makes it clear we should do a hard cutover.  \\n\\n I had been doing some tests with the bulk version of PackedInts.get (which uses the same methods that we use for BlockPacked) while working on   LUCENE-4098   and it seemed that the bottleneck was more memory bandwidth than CPU (for large arrays at least). If you look at the last graph of  http:\\/\\/people.apache.org\\/~jpountz\\/packed_ints3.html , the throughput seems to depend more on the memory efficiency of the picked impl than on the way it stores data. Maybe we are experiencing a similar phenomenon here... \\n\\n Unless I am missing something, the only difference between BlockPacked and Block is that BlockPacked decodes directly from byte[] whereas Block uses ByteBuffer.asLongBuffer to translate from bytes to ints and then decodes from the ints... Interesting to know it has so much overhead...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431983\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431983&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431983\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431983_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431983_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:07:24+0000\'\u003e09\\/Aug\\/12 17:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK indeed PFOR is slower for me too:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e                Task    QPS base StdDev base    QPS pfor StdDev pfor      Pct diff\\n          HighPhrase        1.56        0.03        1.25        0.12  -28% -  -10%\\n           MedPhrase       13.05        0.10       10.50        0.58  -24% -  -14%\\n           LowPhrase       21.08        0.08       17.35        0.85  -22% -  -13%\\n          AndHighMed       73.78        0.66       62.50        1.68  -18% -  -12%\\n          AndHighLow      674.60        2.54      573.00       12.06  -17% -  -12%\\n         LowSpanNear        8.04        0.17        6.97        0.23  -17% -   -8%\\n         MedSpanNear        3.97        0.10        3.58        0.15  -15% -   -3%\\n     MedSloppyPhrase        7.58        0.11        6.93        0.14  -11% -   -5%\\n         AndHighHigh       25.71        0.47       23.58        0.61  -12% -   -4%\\n        HighSpanNear        1.42        0.04        1.31        0.05  -12% -   -1%\\n             MedTerm      155.44       18.75      144.46       12.33  -24% -   14%\\n            HighTerm       30.27        4.31       28.25        2.88  -26% -   19%\\n     LowSloppyPhrase        6.73        0.13        6.28        0.12  -10% -   -3%\\n          OrHighHigh        9.06        0.24        8.53        0.33  -11% -    0%\\n           OrHighLow       23.09        0.67       21.88        0.91  -11% -    1%\\n           OrHighMed       17.71        0.51       16.79        0.67  -11% -    1%\\n    HighSloppyPhrase        1.88        0.05        1.80        0.04   -9% -    0%\\n              IntNRQ        9.42        0.50        9.05        0.89  -17% -   11%\\n             Prefix3       72.67        2.42       70.42        3.61  -11% -    5%\\n              Fuzzy1       63.71        1.07       62.34        1.55   -6% -    1%\\n            Wildcard       45.25        0.99       44.28        1.55   -7% -    3%\\n            PKLookup      159.04        2.13      157.17        1.90   -3% -    1%\\n              Fuzzy2       62.51        2.28       63.40        1.65   -4% -    8%\\n             LowTerm      400.06       57.60      407.73       52.40  -22% -   34%\\n             Respell       56.72        3.19       59.83        2.10   -3% -   15%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI think we should replace Block with BlockPacked now?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431983_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431983_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:07:24+0000\'\u003e09\\/Aug\\/12 17:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK indeed PFOR is slower for me too: \\n\\n  \\n                 Task    QPS base StdDev base    QPS pfor StdDev pfor      Pct diff\\n          HighPhrase        1.56        0.03        1.25        0.12  -28% -  -10%\\n           MedPhrase       13.05        0.10       10.50        0.58  -24% -  -14%\\n           LowPhrase       21.08        0.08       17.35        0.85  -22% -  -13%\\n          AndHighMed       73.78        0.66       62.50        1.68  -18% -  -12%\\n          AndHighLow      674.60        2.54      573.00       12.06  -17% -  -12%\\n         LowSpanNear        8.04        0.17        6.97        0.23  -17% -   -8%\\n         MedSpanNear        3.97        0.10        3.58        0.15  -15% -   -3%\\n     MedSloppyPhrase        7.58        0.11        6.93        0.14  -11% -   -5%\\n         AndHighHigh       25.71        0.47       23.58        0.61  -12% -   -4%\\n        HighSpanNear        1.42        0.04        1.31        0.05  -12% -   -1%\\n             MedTerm      155.44       18.75      144.46       12.33  -24% -   14%\\n            HighTerm       30.27        4.31       28.25        2.88  -26% -   19%\\n     LowSloppyPhrase        6.73        0.13        6.28        0.12  -10% -   -3%\\n          OrHighHigh        9.06        0.24        8.53        0.33  -11% -    0%\\n           OrHighLow       23.09        0.67       21.88        0.91  -11% -    1%\\n           OrHighMed       17.71        0.51       16.79        0.67  -11% -    1%\\n    HighSloppyPhrase        1.88        0.05        1.80        0.04   -9% -    0%\\n              IntNRQ        9.42        0.50        9.05        0.89  -17% -   11%\\n             Prefix3       72.67        2.42       70.42        3.61  -11% -    5%\\n              Fuzzy1       63.71        1.07       62.34        1.55   -6% -    1%\\n            Wildcard       45.25        0.99       44.28        1.55   -7% -    3%\\n            PKLookup      159.04        2.13      157.17        1.90   -3% -    1%\\n              Fuzzy2       62.51        2.28       63.40        1.65   -4% -    8%\\n             LowTerm      400.06       57.60      407.73       52.40  -22% -   34%\\n             Respell       56.72        3.19       59.83        2.10   -3% -   15%\\n \\n  \\n\\n I think we should replace Block with BlockPacked now?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431985\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431985&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431985\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431985_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431985_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:09:50+0000\'\u003e09\\/Aug\\/12 17:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI had been doing some tests with the bulk version of PackedInts.get (which uses the same methods that we use for BlockPacked) while working on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-4098\\\" title=\\\"Efficient bulk operations for packed integer arrays\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-4098\\\"\u003e\u003cdel\u003eLUCENE-4098\u003c\\/del\u003e\u003c\\/a\u003e and it seemed that the bottleneck was more memory bandwidth than CPU (for large arrays at least). \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAhh, interesting...\u003c\\/p\u003e\\n\\n\u003cp\u003eSo I think we should test different acceptableOverheadRatios to find the best ... it could be it\'s 0!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431985_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431985_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:09:50+0000\'\u003e09\\/Aug\\/12 17:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I had been doing some tests with the bulk version of PackedInts.get (which uses the same methods that we use for BlockPacked) while working on   LUCENE-4098   and it seemed that the bottleneck was more memory bandwidth than CPU (for large arrays at least).   \\n\\n Ahh, interesting... \\n\\n So I think we should test different acceptableOverheadRatios to find the best ... it could be it\'s 0!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13431991\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13431991&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13431991\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431991_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431991_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:17:08+0000\'\u003e09\\/Aug\\/12 17:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003eDo we really need to write\\/write the 32 format.getId(), numBits into the postings file header? I guess it\'s either that or ... store the float acceptableOverheadRatio (eg using Float.floatToIntBits I guess) and have some back-compat enforced in the logic in PackedInts.fastestFormatAndBits... hmm.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI hesitated between these two approaches but I think writing all cases to the header is less error-prone? Moreover it would allow us to change the logic of fastestFormatAndBits without having to bump the version number.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eMaybe for starters we should just hardwire acceptableOverheadRatio at\u003cbr\\/\u003e\\n0 ... then we simplify this back-compat until\\/unless we really need to\u003cbr\\/\u003e\\nmake this configurable.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13431991_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13431991_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:17:08+0000\'\u003e09\\/Aug\\/12 17:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n  Do we really need to write\\/write the 32 format.getId(), numBits into the postings file header? I guess it\'s either that or ... store the float acceptableOverheadRatio (eg using Float.floatToIntBits I guess) and have some back-compat enforced in the logic in PackedInts.fastestFormatAndBits... hmm.  \\n\\n I hesitated between these two approaches but I think writing all cases to the header is less error-prone? Moreover it would allow us to change the logic of fastestFormatAndBits without having to bump the version number.  \\n\\n Maybe for starters we should just hardwire acceptableOverheadRatio at \\n0 ... then we simplify this back-compat until\\/unless we really need to \\nmake this configurable.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13432001\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13432001&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13432001\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13432001_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13432001_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:21:32+0000\'\u003e09\\/Aug\\/12 17:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eThe other problem is that we are also storing these unnecessary 19 values (but it is not easy to fix since PACKED_SINGLE_BLOCK writes values in the low-order long bits first (little endian)). Maybe we should make PACKED_SINGLE_BLOCK write values in the high-order bits first and split byte encoders and decoders from the long ones (so that they have a lower valueCount()).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOK, we can explore that later (another reason to simply always use Format.PACKED for now...).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13432001_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13432001_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:21:32+0000\'\u003e09\\/Aug\\/12 17:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     The other problem is that we are also storing these unnecessary 19 values (but it is not easy to fix since PACKED_SINGLE_BLOCK writes values in the low-order long bits first (little endian)). Maybe we should make PACKED_SINGLE_BLOCK write values in the high-order bits first and split byte encoders and decoders from the long ones (so that they have a lower valueCount()).  \\n\\n OK, we can explore that later (another reason to simply always use Format.PACKED for now...).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13432009\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13432009&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13432009\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13432009_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13432009_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:32:15+0000\'\u003e09\\/Aug\\/12 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eOK indeed PFOR is slower for me too:\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think for starters since you guys have gotten FOR pretty nice we should just focus on that one?\u003c\\/p\u003e\\n\\n\u003cp\u003eWe could later see if PFOR could get additional wins as a second step: getting FOR working nice and fast\u003cbr\\/\u003e\\nis awesome on its own!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13432009_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13432009_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T17:32:15+0000\'\u003e09\\/Aug\\/12 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n OK indeed PFOR is slower for me too:  \\n\\n I think for starters since you guys have gotten FOR pretty nice we should just focus on that one? \\n\\n We could later see if PFOR could get additional wins as a second step: getting FOR working nice and fast \\nis awesome on its own!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13432235\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13432235&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13432235\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13432235_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13432235_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 22:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T22:30:45+0000\'\u003e09\\/Aug\\/12 22:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI think for starters since you guys have gotten FOR pretty nice we should just focus on that one?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYeah I think we should do that.  I think the branch is nearly ready to land!\u003c\\/p\u003e\\n\\n\u003cp\u003eI just replaced Block with BlockPacked ...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13432235_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13432235_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Aug\\/12 22:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-09T22:30:45+0000\'\u003e09\\/Aug\\/12 22:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I think for starters since you guys have gotten FOR pretty nice we should just focus on that one?  \\n\\n Yeah I think we should do that.  I think the branch is nearly ready to land! \\n\\n I just replaced Block with BlockPacked ...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13432716\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13432716&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13432716\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13432716_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13432716_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Aug\\/12 12:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-10T12:13:49+0000\'\u003e10\\/Aug\\/12 12:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI ran the comparison between acceptableOverheadRatio=PackedInts.COMPACT (0%) and PackedInts.DEFAULT (20%) and it seems to be much faster with PackedInts.COMPACT:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003ebase=COMPACT, challenger=DEFAULT\\n                Task    QPS base StdDev base     QPS def  StdDev def      Pct diff\\n              IntNRQ       81.83        5.43       74.14        2.94  -18% -    0%\\n            HighTerm      146.55       10.34      133.57        9.02  -20% -    4%\\n           LowPhrase       93.91        1.63       86.90        1.67  -10% -   -4%\\n             MedTerm      824.58       43.48      766.35       38.78  -16% -    3%\\n     LowSloppyPhrase       83.29        1.99       77.65        1.18  -10% -   -3%\\n           OrHighMed       94.15        5.28       88.34        4.54  -15% -    4%\\n          OrHighHigh      100.63        5.42       94.57        4.20  -14% -    3%\\n           OrHighLow      128.62        7.21      120.92        6.07  -15% -    4%\\n          HighPhrase       13.05        0.45       12.29        0.39  -11% -    0%\\n             Prefix3      217.06        6.82      205.05        4.62  -10% -    0%\\n           MedPhrase       27.50        0.97       26.33        0.79  -10% -    2%\\n            Wildcard      183.20        4.87      175.58        3.89   -8% -    0%\\n             LowTerm     1763.31       43.24     1693.31       39.29   -8% -    0%\\n    HighSloppyPhrase       10.05        0.48        9.67        0.40  -11% -    5%\\n         AndHighHigh      111.59        1.15      107.45        1.66   -6% -   -1%\\n         LowSpanNear       56.16        1.32       54.25        1.01   -7% -    0%\\n          AndHighMed      423.44        7.40      409.32        5.10   -6% -    0%\\n         MedSpanNear       33.14        0.91       32.32        0.74   -7% -    2%\\n          AndHighLow     2177.50       30.79     2134.05       28.64   -4% -    0%\\n              Fuzzy1       95.34        2.41       93.66        2.32   -6% -    3%\\n        HighSpanNear        5.28        0.17        5.21        0.11   -6% -    3%\\n     MedSloppyPhrase       18.41        0.72       18.19        0.70   -8% -    6%\\n              Fuzzy2       37.73        1.31       37.31        1.14   -7% -    5%\\n             Respell      109.71        3.09      108.64        2.76   -6% -    4%\\n            PKLookup      257.32        6.64      260.00        7.15   -4% -    6%\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13432716_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13432716_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Aug\\/12 12:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-10T12:13:49+0000\'\u003e10\\/Aug\\/12 12:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I ran the comparison between acceptableOverheadRatio=PackedInts.COMPACT (0%) and PackedInts.DEFAULT (20%) and it seems to be much faster with PackedInts.COMPACT: \\n\\n  \\n base=COMPACT, challenger=DEFAULT\\n                Task    QPS base StdDev base     QPS def  StdDev def      Pct diff\\n              IntNRQ       81.83        5.43       74.14        2.94  -18% -    0%\\n            HighTerm      146.55       10.34      133.57        9.02  -20% -    4%\\n           LowPhrase       93.91        1.63       86.90        1.67  -10% -   -4%\\n             MedTerm      824.58       43.48      766.35       38.78  -16% -    3%\\n     LowSloppyPhrase       83.29        1.99       77.65        1.18  -10% -   -3%\\n           OrHighMed       94.15        5.28       88.34        4.54  -15% -    4%\\n          OrHighHigh      100.63        5.42       94.57        4.20  -14% -    3%\\n           OrHighLow      128.62        7.21      120.92        6.07  -15% -    4%\\n          HighPhrase       13.05        0.45       12.29        0.39  -11% -    0%\\n             Prefix3      217.06        6.82      205.05        4.62  -10% -    0%\\n           MedPhrase       27.50        0.97       26.33        0.79  -10% -    2%\\n            Wildcard      183.20        4.87      175.58        3.89   -8% -    0%\\n             LowTerm     1763.31       43.24     1693.31       39.29   -8% -    0%\\n    HighSloppyPhrase       10.05        0.48        9.67        0.40  -11% -    5%\\n         AndHighHigh      111.59        1.15      107.45        1.66   -6% -   -1%\\n         LowSpanNear       56.16        1.32       54.25        1.01   -7% -    0%\\n          AndHighMed      423.44        7.40      409.32        5.10   -6% -    0%\\n         MedSpanNear       33.14        0.91       32.32        0.74   -7% -    2%\\n          AndHighLow     2177.50       30.79     2134.05       28.64   -4% -    0%\\n              Fuzzy1       95.34        2.41       93.66        2.32   -6% -    3%\\n        HighSpanNear        5.28        0.17        5.21        0.11   -6% -    3%\\n     MedSloppyPhrase       18.41        0.72       18.19        0.70   -8% -    6%\\n              Fuzzy2       37.73        1.31       37.31        1.14   -7% -    5%\\n             Respell      109.71        3.09      108.64        2.76   -6% -    4%\\n            PKLookup      257.32        6.64      260.00        7.15   -4% -    6%\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13433143\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13433143&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13433143\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13433143_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13433143_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Aug\\/12 13:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-13T13:55:54+0000\'\u003e13\\/Aug\\/12 13:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e(From mailing-list) So I think if its this ambiguous for wikipedia we should shoot for the most COMPACT form as a safe default.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1 too. I just committed the change.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13433143_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13433143_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Aug\\/12 13:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-13T13:55:54+0000\'\u003e13\\/Aug\\/12 13:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     (From mailing-list) So I think if its this ambiguous for wikipedia we should shoot for the most COMPACT form as a safe default.  \\n\\n +1 too. I just committed the change.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13435033\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13435033&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13435033\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13435033_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13435033_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/12 12:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-15T12:51:08+0000\'\u003e15\\/Aug\\/12 12:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUwe just started builds for this branch (thanks!): \u003ca href=\\\"http:\\/\\/jenkins.sd-datasolutions.de\\/job\\/pforcodec-3892-branch\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/jenkins.sd-datasolutions.de\\/job\\/pforcodec-3892-branch\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13435033_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13435033_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Aug\\/12 12:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-15T12:51:08+0000\'\u003e15\\/Aug\\/12 12:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Uwe just started builds for this branch (thanks!):  http:\\/\\/jenkins.sd-datasolutions.de\\/job\\/pforcodec-3892-branch               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13437296\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13437296&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13437296\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437296_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437296_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/12 12:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-18T12:29:15+0000\'\u003e18\\/Aug\\/12 12:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch from Billy improving javadocs ...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437296_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437296_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/12 12:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-18T12:29:15+0000\'\u003e18\\/Aug\\/12 12:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch from Billy improving javadocs ...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13437347\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13437347&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13437347\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437347_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437347_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/12 15:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-18T15:36:17+0000\'\u003e18\\/Aug\\/12 15:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch, applyable to trunk (use patch -p1 &lt; ...).\u003c\\/p\u003e\\n\\n\u003cp\u003eThe branch builds look stable ... I think this is ready to land on trunk!\u003c\\/p\u003e\\n\\n\u003cp\u003eI think we should leave Lucene40 as default PF for now, until we BlockPF bakes on trunk for a while, but as some point (maybe for 4.1?) I think we should cutover to BlockPF as the default.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437347_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437347_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Aug\\/12 15:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-18T15:36:17+0000\'\u003e18\\/Aug\\/12 15:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch, applyable to trunk (use patch -p1 &lt; ...). \\n\\n The branch builds look stable ... I think this is ready to land on trunk! \\n\\n I think we should leave Lucene40 as default PF for now, until we BlockPF bakes on trunk for a while, but as some point (maybe for 4.1?) I think we should cutover to BlockPF as the default.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13437770\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13437770&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13437770\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13437770_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437770_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 10:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T10:05:09+0000\'\u003e20\\/Aug\\/12 10:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFrom r1373332:\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eprivate static final int PACKED_INTS_VERSION = 0; \\/\\/ nocommit: encode in the stream?\u003cbr\\/\u003e\\n+  private static final int PACKED_INTS_VERSION_START = 0;\u003cbr\\/\u003e\\n+  private static final int PACKED_INTS_VERSION_CURRENT = PACKED_INTS_VERSION_START;\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eMike, is there any reason why you didn\'t use \u003ctt\u003ePackedInts.VERSION_START\u003c\\/tt\u003e and \u003ctt\u003ePackedInts.VERSION_CURRENT\u003c\\/tt\u003e instead?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13437770_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437770_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 10:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T10:05:09+0000\'\u003e20\\/Aug\\/12 10:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    From r1373332: \\n \\n \\n\\t private static final int PACKED_INTS_VERSION = 0; \\/\\/ nocommit: encode in the stream? \\n+  private static final int PACKED_INTS_VERSION_START = 0; \\n+  private static final int PACKED_INTS_VERSION_CURRENT = PACKED_INTS_VERSION_START; \\n \\n \\n\\n Mike, is there any reason why you didn\'t use  PackedInts.VERSION_START  and  PackedInts.VERSION_CURRENT  instead?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13437789\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13437789&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13437789\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437789_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437789_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 11:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T11:19:11+0000\'\u003e20\\/Aug\\/12 11:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eMike, is there any reason why you didn\'t use PackedInts.VERSION_START and PackedInts.VERSION_CURRENT instead?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWoops, no, I forgot we had version info in PackedInts!  I\'ll switch it over.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437789_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437789_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 11:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T11:19:11+0000\'\u003e20\\/Aug\\/12 11:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Mike, is there any reason why you didn\'t use PackedInts.VERSION_START and PackedInts.VERSION_CURRENT instead?  \\n\\n Woops, no, I forgot we had version info in PackedInts!  I\'ll switch it over.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13437806\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13437806&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13437806\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437806_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437806_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 12:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T12:13:15+0000\'\u003e20\\/Aug\\/12 12:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK I committed that, and also added version checking in getEncoder\\/Decoder, and I now loop over all versions when computing MAX_DATA_SIZE &#8211; can you double check Adrien?  Thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437806_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437806_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 12:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T12:13:15+0000\'\u003e20\\/Aug\\/12 12:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    OK I committed that, and also added version checking in getEncoder\\/Decoder, and I now loop over all versions when computing MAX_DATA_SIZE &#8211; can you double check Adrien?  Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13437818\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13437818&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13437818\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13437818_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437818_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 12:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T12:31:28+0000\'\u003e20\\/Aug\\/12 12:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYou toasted me, I was just doing exactly the same change! \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e The diff looks good to me.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13437818_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437818_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 12:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T12:31:28+0000\'\u003e20\\/Aug\\/12 12:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    You toasted me, I was just doing exactly the same change!   The diff looks good to me.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13437825\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13437825&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13437825\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437825_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437825_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 12:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T12:39:43+0000\'\u003e20\\/Aug\\/12 12:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWoops sorry!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13437825_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437825_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 12:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T12:39:43+0000\'\u003e20\\/Aug\\/12 12:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Woops sorry!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13437834\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13437834&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13437834\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13437834_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437834_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 12:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T12:57:36+0000\'\u003e20\\/Aug\\/12 12:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eThe branch builds look stable ... I think this is ready to land on trunk!\u003c\\/p\u003e\\n\\n\u003cp\u003eI think we should leave Lucene40 as default PF for now, until we BlockPF bakes on trunk for a while, but as some point (maybe for 4.1?) I think we should cutover to BlockPF as the default.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13437834_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437834_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 12:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T12:57:36+0000\'\u003e20\\/Aug\\/12 12:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n The branch builds look stable ... I think this is ready to land on trunk! \\n\\n I think we should leave Lucene40 as default PF for now, until we BlockPF bakes on trunk for a while, but as some point (maybe for 4.1?) I think we should cutover to BlockPF as the default.  \\n\\n +1              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13437889\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13437889&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13437889\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13437889_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437889_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 14:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T14:18:15+0000\'\u003e20\\/Aug\\/12 14:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eWoops sorry!\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eNP, good to know we had planned the same changes.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eThe branch builds look stable ... I think this is ready to land on trunk!\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1 too\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13437889_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13437889_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/12 14:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-20T14:18:15+0000\'\u003e20\\/Aug\\/12 14:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Woops sorry!  \\n\\n NP, good to know we had planned the same changes. \\n\\n  The branch builds look stable ... I think this is ready to land on trunk!  \\n\\n +1 too              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13438643\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13438643&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13438643\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13438643_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13438643_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/12 12:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-21T12:16:38+0000\'\u003e21\\/Aug\\/12 12:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI just merged to trunk &amp; 4.x.  Thanks Billy, this is a great addition to Lucene!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13438643_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13438643_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/12 12:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-21T12:16:38+0000\'\u003e21\\/Aug\\/12 12:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I just merged to trunk &amp; 4.x.  Thanks Billy, this is a great addition to Lucene!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13438653\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13438653&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13438653\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13438653_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13438653_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/12 12:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-21T12:34:51+0000\'\u003e21\\/Aug\\/12 12:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you Mike! And thanks to all of you! I learnt really much this summer!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billy\\\" id=\\\"commentauthor_13438653_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Han Jiang\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13438653_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/12 12:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-21T12:34:51+0000\'\u003e21\\/Aug\\/12 12:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you Mike! And thanks to all of you! I learnt really much this summer!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13438728\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13438728&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13438728\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13438728_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13438728_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/12 13:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-21T13:42:04+0000\'\u003e21\\/Aug\\/12 13:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Billy for all the hard work and endless benchmarking, so nice to have a block codec that is simple and clean and reuses our packed ints optimizations.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_13438728_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13438728_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/12 13:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-21T13:42:04+0000\'\u003e21\\/Aug\\/12 13:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Billy for all the hard work and endless benchmarking, so nice to have a block codec that is simple and clean and reuses our packed ints optimizations.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13438731\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13438731&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13438731\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13438731_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13438731_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/12 13:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-21T13:45:37+0000\'\u003e21\\/Aug\\/12 13:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eThanks Billy for all the hard work and endless benchmarking, so nice to have a block codec that is simple and clean and reuses our packed ints optimizations.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_13438731_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13438731_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Aug\\/12 13:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-21T13:45:37+0000\'\u003e21\\/Aug\\/12 13:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Thanks Billy for all the hard work and endless benchmarking, so nice to have a block codec that is simple and clean and reuses our packed ints optimizations.  \\n\\n +1              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13441287\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13441287&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13441287\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13441287_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13441287_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/12 16:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-24T16:39:45+0000\'\u003e24\\/Aug\\/12 16:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tried changing the generated bulk decode methods to re-use variables so we have much fewer local variables required (patch attached), but on quick testing it didn\'t seem to make much difference in performance.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_13441287_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13441287_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/12 16:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-24T16:39:45+0000\'\u003e24\\/Aug\\/12 16:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I tried changing the generated bulk decode methods to re-use variables so we have much fewer local variables required (patch attached), but on quick testing it didn\'t seem to make much difference in performance.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13441295\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13441295&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13441295\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13441295_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13441295_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/12 16:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-24T16:52:09+0000\'\u003e24\\/Aug\\/12 16:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWe should keep the size of methods small, as bigger methods work against the code cache of hotspot and if Lucene is not used alone, may get de-optimized.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13441295_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13441295_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/12 16:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-08-24T16:52:09+0000\'\u003e24\\/Aug\\/12 16:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    We should keep the size of methods small, as bigger methods work against the code cache of hotspot and if Lucene is not used alone, may get de-optimized.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13653695\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-3892?focusedCommentId=13653695&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13653695\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13653695_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13653695_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/13 10:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-05-10T10:32:41+0000\'\u003e10\\/May\\/13 10:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eClosed after release.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_13653695_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13653695_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/13 10:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-05-10T10:32:41+0000\'\u003e10\\/May\\/13 10:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Closed after release.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310110";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310110&amp;avatarId=10061\\\" alt=\\\"Lucene - Core\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\"\u003eLucene - Core\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1516204033995"> 
    <input type="hidden" title="jira.request.server.time" value="992"> 
    <input type="hidden" title="jira.request.id" value="947x7743122x11"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="7"> 
    <input type="hidden" title="db.reads.time.in.ms" value="68"> 
    <input type="hidden" title="db.conns.time.in.ms" value="80"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 947x7743122x11
	          REQUEST TIMESTAMP : [17/Jan/2018:15:47:13 +0000]
	               REQUEST TIME : 0.9920
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 7

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=28, elapsedTotal=68611146, elapsedMin=712673, elapsedMax=25332835, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=32, elapsedTotal=80028973, elapsedMin=818532, elapsedMax=25396972, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>