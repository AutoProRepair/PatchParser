<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|013fc8ec14d8383d468380bc44d2bee86cd0be2c|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"416127500a547f\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-4239"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-4239] Possible corruption if SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE is called during checkpoint  - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-4239] Possible corruption if SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE is called during checkpoint  - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4239">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-4239" href="/jira/browse/DERBY-4239" id="key-val" rel="12425976">DERBY-4239</a></li>
                </ol>
                <h1 id="summary-val">Possible corruption if SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE is called during checkpoint </h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4239"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-4239/DERBY-4239.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-4239/DERBY-4239.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-4239/DERBY-4239.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-4239/DERBY-4239.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/critical.svg" title="Critical - Crashes, loss of data, severe memory leak." width="16"> Critical </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.1.3.3 Head of 10.1 branch. Maintenance version bump for sps update ">10.1.3.3</span>, <span title="10.2.2.1 Head of 10.2 branch">10.2.2.1</span>, <span title="10.3.2.1 ">10.3.2.1</span>, <span title="10.4.2.0 ">10.4.2.0</span>, <span title="10.5.1.1 build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09">10.5.1.1</span>, <span title="10.6.1.0 Feature release">10.6.1.0</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.1.3.3" title="10.1.3.3 Head of 10.1 branch. Maintenance version bump for sps update ">10.1.3.3</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.2.2.1" title="10.2.2.1 Head of 10.2 branch">10.2.2.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.3.1" title="10.3.3.1 Head of 10.3 branch">10.3.3.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.2.1" title="10.4.2.1 Head of 10.4 branch">10.4.2.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.2.0" title="10.5.2.0 10.5.2 Release July 30 2009 (794445) Now deprecated">10.5.2.0</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.6.1.0" title="10.6.1.0 Feature release">10.6.1.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Store" title="Store ">Store</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12425976-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value"> 
                    <div id="field-environment" class="twixi-block twixi-block-inverted collapsed "> 
                     <div class="twixi-wrap verbose"> 
                      <a href="#" class="twixi "><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>Hide</span></span></a> 
                      <div class="flooded">
                        z/OS z10 processor. 
                       <br> java version "1.6.0"
                       <br> Java(TM) SE Runtime Environment (build pmz3160sr4-20090219_01(SR4))
                       <br> IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 z/OS s390-31 jvmmz3160-20090215_29883 (JIT enabled, AOT enabled)
                       <br> J9VM - 20090215_029883_bHdSMr
                       <br> JIT - r9_20090213_2028
                       <br> GC - 20090213_AA)
                       <br> JCL - 20090218_01
                       <br> also 
                       <br> java version "1.6.0"
                       <br> Java(TM) SE Runtime Environment (build pmz3160sr2ifix-20081021_01(SR2+IZ32776+IZ33456))
                       <br> IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 z/OS s390-31 jvmmz3160ifx-20081010_24288 (JIT enabled, AOT enabled)
                       <br> J9VM - 20081009_024288_bHdSMr
                       <br> JIT - r9_20080721_1330ifx2
                       <br> GC - 20080724_AA)
                       <br> JCL - 20080808_02
                       <br> 
                      </div> 
                     </div> 
                     <div class="twixi-wrap concise"> 
                      <a href="#" class="twixi "><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>Show</span></span></a> 
                      <div class="flooded">
                        z/OS z10 processor. java version "1.6.0" Java(TM) SE Runtime Environment (build pmz3160sr4-20090219_01(SR4)) IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 z/OS s390-31 jvmmz3160-20090215_29883 (JIT enabled, AOT enabled) J9VM - 20090215_029883_bHdSMr JIT - r9_20090213_2028 GC - 20090213_AA) JCL - 20090218_01 also java version "1.6.0" Java(TM) SE Runtime Environment (build pmz3160sr2ifix-20081021_01(SR2+IZ32776+IZ33456)) IBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 z/OS s390-31 jvmmz3160ifx-20081010_24288 (JIT enabled, AOT enabled) J9VM - 20081009_024288_bHdSMr JIT - r9_20080721_1330ifx2 GC - 20080724_AA) JCL - 20080808_02 
                      </div> 
                     </div> 
                    </div> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Data corruption</span>, 
                        <span>Regression Test Failure</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>corruption with storerecovery oc_rec? tests. ERROR XSLA7: Cannot redo operation null in the log when compress occurs during checkpoint, then jvm exits</p> 
                  <p>I saw corruption on z/OS with the storerecovery tests and 10.5.1.1. The failure comes in oc_rec3 trying to connect to the database, but the actual problem seems to have occurred with the prior test oc_rec2. The problem is somewhat intermittent, happening approximately 1/4 times. I extracted the case from the harness and will attach the reproduction and run the script repro.ksh. The script will loop up to 50 times until it gets the failure which looks like.</p> 
                  <p>ERROR XSLA7: Cannot redo operation null in the log.<br> at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)<br> at org.apache.derby.impl.store.raw.log.FileLogger.redo(Unknown Source)<br> at org.apache.derby.impl.store.raw.log.LogToFile.recover(Unknown Source)<br> at org.apache.derby.impl.store.raw.RawStore.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source)<br> at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source)<br> at org.apache.derby.impl.store.access.RAMAccessManager.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source)<br> at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source)<br> at org.apache.derby.impl.db.BasicDatabase.bootStore(Unknown Source)<br> at org.apache.derby.impl.db.BasicDatabase.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)<br> at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(Unknown Source)<br> at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(Unknown Source)<br> at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Unknown Source)<br> at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(Unknown Source)<br> at org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(Unknown Source)<br> at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)<br> at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)<br> at org.apache.derby.jdbc.AutoloadedDriver.connect(Unknown Source)<br> at java.sql.DriverManager.getConnection(DriverManager.java:311)<br> at java.sql.DriverManager.getConnection(DriverManager.java:268)<br> at CheckTables.main(CheckTables.java:8)<br> Caused by: ERROR XSDBB: Unknown page format at page Page(16,Container(0, 1073)), page dump follows: Hex dump:<br> 00000000: 0000 0000 0000 0000 0000 0000 0000 0000 ................<br> 00000010: 0000 0000 0000 0000 0000 0000 0000 0000 ................<br> &lt;snip lots of 000's&gt;</p> 
                  <p>I ran it with 10.3 and it completed all 50 iterations, so whether JVM or Derby issue it seems new since 10.3. (I haven't tried with 10.4). Oddly I have run tests many times before on this machine using in the 10.5.1.1 release and the same jvm and have never seen this failure, so am looking into whether maybe something changed on the machine or environment.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-4239?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-4239?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-4239?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-4239?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12408808" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12408808/badlogsizes.txt" draggable="true" data-downloadurl="text/plain:badlogsizes.txt:https://issues.apache.org/jira/secure/attachment/12408808/badlogsizes.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12408808/badlogsizes.txt" title="Latest  22/May/09 14:26 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:badlogsizes.txt:https://issues.apache.org/jira/secure/attachment/12408808/badlogsizes.txt">badlogsizes.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-22T14:26:08.175Z">22/May/09 14:26</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12409046" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12409046/derby_dumponly.zip" draggable="true" data-downloadurl="application/x-zip-compressed:derby_dumponly.zip:https://issues.apache.org/jira/secure/attachment/12409046/derby_dumponly.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12409046/derby_dumponly.zip" title="Latest  26/May/09 15:37 - Mike Matrigali" draggable="true" data-downloadurl="application/x-zip-compressed:derby_dumponly.zip:https://issues.apache.org/jira/secure/attachment/12409046/derby_dumponly.zip">derby_dumponly.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-26T15:37:31.367Z">26/May/09 15:37</time>
                   </dd>
                   <dd class="attachment-size">
                    2.14 MB
                   </dd>
                   <dd class="attachment-author">
                    Mike Matrigali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12408745" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12408745/derby.log" draggable="true" data-downloadurl="text/plain:derby.log:https://issues.apache.org/jira/secure/attachment/12408745/derby.log"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12408745/derby.log" title="Latest  21/May/09 21:53 - Mike Matrigali" draggable="true" data-downloadurl="text/plain:derby.log:https://issues.apache.org/jira/secure/attachment/12408745/derby.log">derby.log</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-21T21:53:46.773Z">21/May/09 21:53</time>
                   </dd>
                   <dd class="attachment-size">
                    2.19 MB
                   </dd>
                   <dd class="attachment-author">
                    Mike Matrigali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12408642" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12408642/derby.log" draggable="true" data-downloadurl="text/x-log:derby.log:https://issues.apache.org/jira/secure/attachment/12408642/derby.log"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12408642/derby.log" title=" 20/May/09 23:42 - Kathey Marsden" draggable="true" data-downloadurl="text/x-log:derby.log:https://issues.apache.org/jira/secure/attachment/12408642/derby.log">derby.log</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-20T23:42:13.460Z">20/May/09 23:42</time>
                   </dd>
                   <dd class="attachment-size">
                    194 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12409065" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12409065/derby-4239_1.diff" draggable="true" data-downloadurl="application/octet-stream:derby-4239_1.diff:https://issues.apache.org/jira/secure/attachment/12409065/derby-4239_1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12409065/derby-4239_1.diff" title="Latest  26/May/09 19:44 - Mike Matrigali" draggable="true" data-downloadurl="application/octet-stream:derby-4239_1.diff:https://issues.apache.org/jira/secure/attachment/12409065/derby-4239_1.diff">derby-4239_1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-26T19:44:40.073Z">26/May/09 19:44</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Mike Matrigali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12409133" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12409133/DERBY-4239_2.diff" draggable="true" data-downloadurl="application/octet-stream:DERBY-4239_2.diff:https://issues.apache.org/jira/secure/attachment/12409133/DERBY-4239_2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12409133/DERBY-4239_2.diff" title="Latest  27/May/09 06:58 - Mike Matrigali" draggable="true" data-downloadurl="application/octet-stream:DERBY-4239_2.diff:https://issues.apache.org/jira/secure/attachment/12409133/DERBY-4239_2.diff">DERBY-4239_2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-27T06:58:07.816Z">27/May/09 06:58</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Mike Matrigali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12409315" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12409315/DERBY-4239_3.diff" draggable="true" data-downloadurl="application/octet-stream:DERBY-4239_3.diff:https://issues.apache.org/jira/secure/attachment/12409315/DERBY-4239_3.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12409315/DERBY-4239_3.diff" title="Latest  28/May/09 22:44 - Mike Matrigali" draggable="true" data-downloadurl="application/octet-stream:DERBY-4239_3.diff:https://issues.apache.org/jira/secure/attachment/12409315/DERBY-4239_3.diff">DERBY-4239_3.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-28T22:44:03.485Z">28/May/09 22:44</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Mike Matrigali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12408809" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12408809/goodlogsizes.txt" draggable="true" data-downloadurl="text/plain:goodlogsizes.txt:https://issues.apache.org/jira/secure/attachment/12408809/goodlogsizes.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12408809/goodlogsizes.txt" title="Latest  22/May/09 14:26 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:goodlogsizes.txt:https://issues.apache.org/jira/secure/attachment/12408809/goodlogsizes.txt">goodlogsizes.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-22T14:26:08.179Z">22/May/09 14:26</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12408812" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12408812/identifyBadContainer.ksh" draggable="true" data-downloadurl="application/octet-stream:identifyBadContainer.ksh:https://issues.apache.org/jira/secure/attachment/12408812/identifyBadContainer.ksh"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12408812/identifyBadContainer.ksh" title="Latest  22/May/09 15:17 - Kathey Marsden" draggable="true" data-downloadurl="application/octet-stream:identifyBadContainer.ksh:https://issues.apache.org/jira/secure/attachment/12408812/identifyBadContainer.ksh">identifyBadContainer.ksh</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-22T15:17:44.897Z">22/May/09 15:17</time>
                   </dd>
                   <dd class="attachment-size">
                    0.9 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12408948" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12408948/reproBackgroundCheckpoint.zip" draggable="true" data-downloadurl="application/x-zip-compressed:reproBackgroundCheckpoint.zip:https://issues.apache.org/jira/secure/attachment/12408948/reproBackgroundCheckpoint.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12408948/reproBackgroundCheckpoint.zip" title="Latest  25/May/09 13:32 - Kathey Marsden" draggable="true" data-downloadurl="application/x-zip-compressed:reproBackgroundCheckpoint.zip:https://issues.apache.org/jira/secure/attachment/12408948/reproBackgroundCheckpoint.zip">reproBackgroundCheckpoint.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-25T13:32:10.753Z">25/May/09 13:32</time>
                   </dd>
                   <dd class="attachment-size">
                    15 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12408643" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12408643/reproDerby4239.zip" draggable="true" data-downloadurl="application/x-zip-compressed:reproDerby4239.zip:https://issues.apache.org/jira/secure/attachment/12408643/reproDerby4239.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12408643/reproDerby4239.zip" title="Latest  20/May/09 23:42 - Kathey Marsden" draggable="true" data-downloadurl="application/x-zip-compressed:reproDerby4239.zip:https://issues.apache.org/jira/secure/attachment/12408643/reproDerby4239.zip">reproDerby4239.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-20T23:42:13.464Z">20/May/09 23:42</time>
                   </dd>
                   <dd class="attachment-size">
                    14 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12408797" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12408797/wombat_keeplog_notcorrupt.zip" draggable="true" data-downloadurl="application/x-zip-compressed:wombat_keeplog_notcorrupt.zip:https://issues.apache.org/jira/secure/attachment/12408797/wombat_keeplog_notcorrupt.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12408797/wombat_keeplog_notcorrupt.zip" title="Latest  22/May/09 12:30 - Kathey Marsden" draggable="true" data-downloadurl="application/x-zip-compressed:wombat_keeplog_notcorrupt.zip:https://issues.apache.org/jira/secure/attachment/12408797/wombat_keeplog_notcorrupt.zip">wombat_keeplog_notcorrupt.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-22T12:30:54.155Z">22/May/09 12:30</time>
                   </dd>
                   <dd class="attachment-size">
                    2.35 MB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12408641" data-issue-id="12425976" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12408641/wombat_with_keeplog.zip" draggable="true" data-downloadurl="application/x-zip-compressed:wombat_with_keeplog.zip:https://issues.apache.org/jira/secure/attachment/12408641/wombat_with_keeplog.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12408641/wombat_with_keeplog.zip" title="Latest  20/May/09 23:42 - Kathey Marsden" draggable="true" data-downloadurl="application/x-zip-compressed:wombat_with_keeplog.zip:https://issues.apache.org/jira/secure/attachment/12408641/wombat_with_keeplog.zip">wombat_with_keeplog.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-05-20T23:42:13.433Z">20/May/09 23:42</time>
                   </dd>
                   <dd class="attachment-size">
                    2.35 MB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is duplicated by">
                   is duplicated by
                  </dt> 
                  <dd id="internal-12387958_12310000"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3393: Database corruption when adding sleep() in RAFContainer4.writePage()"> <a href="/jira/browse/DERBY-3393" data-issue-key="DERBY-3393" class="issue-link link-title resolution">DERBY-3393</a> <span class="link-summary">Database corruption when adding sleep() in RAFContainer4.writePage()</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/critical.svg" width="16" height="16" title="Critical - Crashes, loss of data, severe memory leak." alt="Critical - Crashes, loss of data, severe memory leak."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12415707_12310000"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-4075: ERROR XSDBB: Unknown page format at page Page(613,Container(0, 1024)) when running MailJdbc (Embedded) system tests"> <a href="/jira/browse/DERBY-4075" data-issue-key="DERBY-4075" class="issue-link link-title resolution">DERBY-4075</a> <span class="link-summary">ERROR XSDBB: Unknown page format at page Page(613,Container(0, 1024)) when running MailJdbc (Embedded) system tests</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/critical.svg" width="16" height="16" title="Critical - Crashes, loss of data, severe memory leak." alt="Critical - Crashes, loss of data, severe memory leak."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12387958_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3393: Database corruption when adding sleep() in RAFContainer4.writePage()"> <a href="/jira/browse/DERBY-3393" data-issue-key="DERBY-3393" class="issue-link link-title resolution">DERBY-3393</a> <span class="link-summary">Database corruption when adding sleep() in RAFContainer4.writePage()</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/critical.svg" width="16" height="16" title="Critical - Crashes, loss of data, severe memory leak." alt="Critical - Crashes, loss of data, severe memory leak."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12402150_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3833: OnlineCompressTest fails with ERROR XSDBB: Unknown page format at page Page(1,Container(0, 1440)) on 10.3 with ibm 1.5"> <a href="/jira/browse/DERBY-3833" data-issue-key="DERBY-3833" class="issue-link link-title resolution">DERBY-3833</a> <span class="link-summary">OnlineCompressTest fails with ERROR XSDBB: Unknown page format at page Page(1,Container(0, 1440)) on 10.3 with ibm 1.5</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12426921_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-4252: intermittent corruption./java.io.EOFException in RandomAccessFile.readInt() on boot after compress with background checkpoint"> <a href="/jira/browse/DERBY-4252" data-issue-key="DERBY-4252" class="issue-link link-title resolution">DERBY-4252</a> <span class="link-summary">intermittent corruption./java.io.EOFException in RandomAccessFile.readInt() on boot after compress with background checkpoint</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/critical.svg" width="16" height="16" title="Critical - Crashes, loss of data, severe memory leak." alt="Critical - Crashes, loss of data, severe memory leak."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mikem" rel="mikem" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mike Matrigali&quot;,&quot;emailAddress&quot;:&quot;mikem_app@sbcglobal.net&quot;,&quot;username&quot;:&quot;mikem&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mikem"></span></span> Mike Matrigali </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_kmarsden" rel="kmarsden" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Kathey Marsden&quot;,&quot;emailAddress&quot;:&quot;kmarsdenderby@sbcglobal.net&quot;,&quot;username&quot;:&quot;kmarsden&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="kmarsden"></span></span> Kathey Marsden </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="20/May/09 23:36"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-05-20T23:36:26+0000">20/May/09 23:36</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="12/Jan/11 22:24"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2011-01-12T22:24:29+0000">12/Jan/11 22:24</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="05/Jun/09 15:33"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-06-05T15:33:25+0000">05/Jun/09 15:33</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4239?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-4239?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12711425\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12711425&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12711425\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12711425_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12711425_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/May\\/09 23:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-20T23:42:13+0000\'\u003e20\\/May\\/09 23:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching wombat_with_keeplog.zip -  the database after a failing  run with derby.storage.keepTransactionLog=true\u003cbr\\/\u003e\\nderby.log - the derby.log from a failing run.\u003cbr\\/\u003e\\nreproDerby4239.zip - java files and repro.ksh.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo reproduce, on z\\/OS unzip reproDerby4239.zip \u003cbr\\/\u003e\\njavac -g *.java\u003cbr\\/\u003e\\nrepro.ksh\u003c\\/p\u003e\\n\\n\u003cp\u003eI tried on Windows and Myrna on Linux and we were not able to reproduce on those platforms.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12711425_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12711425_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/May\\/09 23:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-20T23:42:13+0000\'\u003e20\\/May\\/09 23:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching wombat_with_keeplog.zip -  the database after a failing  run with derby.storage.keepTransactionLog=true \\nderby.log - the derby.log from a failing run. \\nreproDerby4239.zip - java files and repro.ksh. \\n\\n To reproduce, on z\\/OS unzip reproDerby4239.zip  \\njavac -g *.java \\nrepro.ksh \\n\\n I tried on Windows and Myrna on Linux and we were not able to reproduce on those platforms. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12711664\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12711664&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12711664\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12711664_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12711664_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/May\\/09 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-21T15:57:04+0000\'\u003e21\\/May\\/09 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have not been able to reproduce with 100 iterations with -Xint, so at first glance it would appear to be a JIT issue.  It does reproduce with -Xjit:optLevel=noOpt,count=0 which removes most of  JIT optimizations.   I was incorrect that it does not produce with 10.3.  I was able to pop the issue with 10.3.3.1 - (765035). I had done the original run with a slightly earlier sane build.  I am not sure yet whether it only reproduces with insane builds.\u003c\\/p\u003e\\n\\n\u003cp\u003eTypically with JIT problems you can generate a log of all the compiled methods and their optimization level and 1) Feed that back into the next run to get a consistent reproduction. and 2) Do a binary search with iterative runs with half the log file to narrow down the failing method.\u003cbr\\/\u003e\\nUnfortunately, neither of these methods work in this case, suggesting some timing or order of compilation issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eI would like some tips on how to identify  issue earlier, preferably as the  bad log record as it was written to disk.   Is there any way to do this?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12711664_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12711664_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/May\\/09 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-21T15:57:04+0000\'\u003e21\\/May\\/09 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have not been able to reproduce with 100 iterations with -Xint, so at first glance it would appear to be a JIT issue.  It does reproduce with -Xjit:optLevel=noOpt,count=0 which removes most of  JIT optimizations.   I was incorrect that it does not produce with 10.3.  I was able to pop the issue with 10.3.3.1 - (765035). I had done the original run with a slightly earlier sane build.  I am not sure yet whether it only reproduces with insane builds. \\n\\n Typically with JIT problems you can generate a log of all the compiled methods and their optimization level and 1) Feed that back into the next run to get a consistent reproduction. and 2) Do a binary search with iterative runs with half the log file to narrow down the failing method. \\nUnfortunately, neither of these methods work in this case, suggesting some timing or order of compilation issue. \\n\\n I would like some tips on how to identify  issue earlier, preferably as the  bad log record as it was written to disk.   Is there any way to do this? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12711832\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12711832&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12711832\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12711832_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12711832_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/May\\/09 21:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-21T21:53:46+0000\'\u003e21\\/May\\/09 21:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey asked that I log suggestions about what to look at in corrupt db\'s, so logging them here.  I don\'t have any conclusions yet what is happening, just\u003cbr\\/\u003e\\nposting info as I see it.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe information I am posting is from looking at the wombat_with_keeplog.zip \u003cbr\\/\u003e\\nposted to this issue.  This is a good one to look at as kathey has managed to \u003cbr\\/\u003e\\nreproduce and had it set up so that all transaction logs are kept.   This means that\u003cbr\\/\u003e\\nit is possible to read through these records and get an exact history of all \\\"writing\\\"\u003cbr\\/\u003e\\noperations.   There a couple of ways to do this.  With a sane server you can set \u003cbr\\/\u003e\\nderby.storage.keepTransactionLog=true (i am not sure if this works with insane \u003cbr\\/\u003e\\nserver or not).  A supported way of almost doing this is to take a online backup, \u003cbr\\/\u003e\\nwhich I believe will then stop logs from being deleted - but note that online backup\u003cbr\\/\u003e\\nmay change the behavior of some operations which are documented in the backup\u003cbr\\/\u003e\\ndocs.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eIn this case we are debugging a reproducible boot error, so just starting up \u003cbr\\/\u003e\\nreproduces the error.   First I set the following which will only work in a SANE\u003cbr\\/\u003e\\nserver.:\u003cbr\\/\u003e\\nderby.debug.true=LogTrace\u003cbr\\/\u003e\\nThis will dump a short description of each log record that is processed.  For \u003cbr\\/\u003e\\nrecovery this will include all the records that are read at boot time.  Note this \u003cbr\\/\u003e\\nwill not be all the records in the log, it will just dump out the ones looked at during\u003cbr\\/\u003e\\nnormal reboot.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe first thing I look for is the first occurence of the error and if it is nested the lowest nested error.  In this case I get the following.  From this I get that recovery\u003cbr\\/\u003e\\nreboot is trying to redo a delete on page 16 of container 1073.  The page version\u003cbr\\/\u003e\\nis 775 so there have been 775 updates to this page before this.  The instant\u003cbr\\/\u003e\\nis the basically the log record address (6,447354) - the first part 6 means it is\u003cbr\\/\u003e\\nin log6.dat, second part is the byte offset into log6.dat:\u003cbr\\/\u003e\\nPage(16,Container(0, 1073)) pageVersion 775 :  Delete : Slot=1 recordId=7 delete=true instant =\u003cbr\\/\u003e\\n (6,447354) logEnd = (6,447413) logIn at 25 available 18^M\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom the stack the operation is reading the page in from disk and getting a page\u003cbr\\/\u003e\\nof all zero\'s when it expects to get a formated page at pageVersion 774.\u003c\\/p\u003e\\n\\n\u003cp\u003esnip from log:\u003cbr\\/\u003e\\nDEBUG LogTrace OUTPUT: scanned 64300 : Page Operation: Page(17,Container(0, 1041)) pageVersion 776 :  Delete : Slot=1 recordId=7 delete=true instant =\u003cbr\\/\u003e\\n (6,447236) logEnd = (6,447295) logIn at 25 available 18^M\u003cbr\\/\u003e\\nDEBUG LogTrace OUTPUT: scanned 64300 : Page Operation: Page(16,Container(0, 1057)) pageVersion 775 :  Delete : Slot=1 recordId=7 delete=true instant =\u003cbr\\/\u003e\\n (6,447295) logEnd = (6,447354) logIn at 25 available 18^M\u003cbr\\/\u003e\\nDEBUG LogTrace OUTPUT: scanned 64300 : Page Operation: Page(16,Container(0, 1073)) pageVersion 775 :  Delete : Slot=1 recordId=7 delete=true instant =\u003cbr\\/\u003e\\n (6,447354) logEnd = (6,447413) logIn at 25 available 18^M\u003c\\/p\u003e\\n\\n\u003cp\u003e------------  BEGIN SHUTDOWN ERROR STACK -------------\u003cbr\\/\u003e\\n^M\u003cbr\\/\u003e\\nERROR XSLA7: Cannot redo operation Page Operation: Page(16,Container(0, 1073)) pageVersion 775 :  Delete : Slot=1 recordId=7 delete=true in the log.^M\u003cbr\\/\u003e\\n    at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1525)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)^M\u003cbr\\/\u003e\\n    at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)^M\u003cbr\\/\u003e\\n    at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021)^M\u003cbr\\/\u003e\\n    at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374)^M\u003cbr\\/\u003e\\n    at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)^M\u003cbr\\/\u003e\\n    at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)^M\u003cbr\\/\u003e\\n    at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)^M\u003cbr\\/\u003e\\n    at java.sql.DriverManager.getConnection(DriverManager.java:316)^M\u003cbr\\/\u003e\\n    at java.sql.DriverManager.getConnection(DriverManager.java:297)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.tools.ij.util.startJBMS(util.java:462)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.tools.ij.util.startJBMS(util.java:542)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.tools.ij.ConnectionEnv.init(ConnectionEnv.java:64)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.tools.ij.utilMain.initFromEnvironment(utilMain.java:164)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.tools.ij.Main.&lt;init&gt;(Main.java:225)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.tools.ij.Main.getMain(Main.java:189)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:174)^M\u003cbr\\/\u003e\\n    at org.apache.derby.impl.tools.ij.Main.main(Main.java:73)^M\u003cbr\\/\u003e\\n    at org.apache.derby.tools.ij.main(ij.java:59)^M\u003cbr\\/\u003e\\nCaused by: ERROR XSDBB: Unknown page format at page Page(16,Container(0, 1073)), page dump follows: Hex dump:\u003cbr\\/\u003e\\n00000000: 0000 0000 0000 0000 0000 0000 0000 0000  ................\u003cbr\\/\u003e\\n00000010: 0000 0000 0000 0000 0000 0000 0000 0000  ................\u003cbr\\/\u003e\\n00000020: 0000 0000 0000 0000 0000 0000 0000 0000  ................\u003cbr\\/\u003e\\n00000030: 0000 0000 0000 0000 0000 0000 0000 0000  ................\u003cbr\\/\u003e\\n00000040: 0000 0000 0000 0000 0000 0000 0000 0000  ................\u003cbr\\/\u003e\\n00000050: 0000 0000 0000 0000 0000 0000 0000 0000  ................\u003cbr\\/\u003e\\n... complete page dump of a page of all ZERO\'s\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12711832_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12711832_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/May\\/09 21:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-21T21:53:46+0000\'\u003e21\\/May\\/09 21:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey asked that I log suggestions about what to look at in corrupt db\'s, so logging them here.  I don\'t have any conclusions yet what is happening, just \\nposting info as I see it. \\n\\n The information I am posting is from looking at the wombat_with_keeplog.zip  \\nposted to this issue.  This is a good one to look at as kathey has managed to  \\nreproduce and had it set up so that all transaction logs are kept.   This means that \\nit is possible to read through these records and get an exact history of all \\\"writing\\\" \\noperations.   There a couple of ways to do this.  With a sane server you can set  \\nderby.storage.keepTransactionLog=true (i am not sure if this works with insane  \\nserver or not).  A supported way of almost doing this is to take a online backup,  \\nwhich I believe will then stop logs from being deleted - but note that online backup \\nmay change the behavior of some operations which are documented in the backup \\ndocs. \\n\\n\\n In this case we are debugging a reproducible boot error, so just starting up  \\nreproduces the error.   First I set the following which will only work in a SANE \\nserver.: \\nderby.debug.true=LogTrace \\nThis will dump a short description of each log record that is processed.  For  \\nrecovery this will include all the records that are read at boot time.  Note this  \\nwill not be all the records in the log, it will just dump out the ones looked at during \\nnormal reboot. \\n\\n The first thing I look for is the first occurence of the error and if it is nested the lowest nested error.  In this case I get the following.  From this I get that recovery \\nreboot is trying to redo a delete on page 16 of container 1073.  The page version \\nis 775 so there have been 775 updates to this page before this.  The instant \\nis the basically the log record address (6,447354) - the first part 6 means it is \\nin log6.dat, second part is the byte offset into log6.dat: \\nPage(16,Container(0, 1073)) pageVersion 775 :  Delete : Slot=1 recordId=7 delete=true instant = \\n (6,447354) logEnd = (6,447413) logIn at 25 available 18^M \\n\\n From the stack the operation is reading the page in from disk and getting a page \\nof all zero\'s when it expects to get a formated page at pageVersion 774. \\n\\n snip from log: \\nDEBUG LogTrace OUTPUT: scanned 64300 : Page Operation: Page(17,Container(0, 1041)) pageVersion 776 :  Delete : Slot=1 recordId=7 delete=true instant = \\n (6,447236) logEnd = (6,447295) logIn at 25 available 18^M \\nDEBUG LogTrace OUTPUT: scanned 64300 : Page Operation: Page(16,Container(0, 1057)) pageVersion 775 :  Delete : Slot=1 recordId=7 delete=true instant = \\n (6,447295) logEnd = (6,447354) logIn at 25 available 18^M \\nDEBUG LogTrace OUTPUT: scanned 64300 : Page Operation: Page(16,Container(0, 1073)) pageVersion 775 :  Delete : Slot=1 recordId=7 delete=true instant = \\n (6,447354) logEnd = (6,447413) logIn at 25 available 18^M \\n\\n ------------  BEGIN SHUTDOWN ERROR STACK ------------- \\n^M \\nERROR XSLA7: Cannot redo operation Page Operation: Page(16,Container(0, 1073)) pageVersion 775 :  Delete : Slot=1 recordId=7 delete=true in the log.^M \\n    at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)^M \\n    at org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1525)^M \\n    at org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924)^M \\n    at org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339)^M \\n    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)^M \\n    at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)^M \\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)^M \\n    at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)^M \\n    at org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019)^M \\n    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)^M \\n    at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)^M \\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)^M \\n    at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)^M \\n    at org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780)^M \\n    at org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196)^M \\n    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)^M \\n    at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)^M \\n    at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858)^M \\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724)^M \\n    at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602)^M \\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021)^M \\n    at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)^M \\n    at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581)^M \\n    at org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374)^M \\n    at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)^M \\n    at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)^M \\n    at org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)^M \\n    at java.sql.DriverManager.getConnection(DriverManager.java:316)^M \\n    at java.sql.DriverManager.getConnection(DriverManager.java:297)^M \\n    at org.apache.derby.impl.tools.ij.util.startJBMS(util.java:462)^M \\n    at org.apache.derby.impl.tools.ij.util.startJBMS(util.java:542)^M \\n    at org.apache.derby.impl.tools.ij.ConnectionEnv.init(ConnectionEnv.java:64)^M \\n    at org.apache.derby.impl.tools.ij.utilMain.initFromEnvironment(utilMain.java:164)^M \\n    at org.apache.derby.impl.tools.ij.Main.&lt;init&gt;(Main.java:225)^M \\n    at org.apache.derby.impl.tools.ij.Main.getMain(Main.java:189)^M \\n    at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:174)^M \\n    at org.apache.derby.impl.tools.ij.Main.main(Main.java:73)^M \\n    at org.apache.derby.tools.ij.main(ij.java:59)^M \\nCaused by: ERROR XSDBB: Unknown page format at page Page(16,Container(0, 1073)), page dump follows: Hex dump: \\n00000000: 0000 0000 0000 0000 0000 0000 0000 0000  ................ \\n00000010: 0000 0000 0000 0000 0000 0000 0000 0000  ................ \\n00000020: 0000 0000 0000 0000 0000 0000 0000 0000  ................ \\n00000030: 0000 0000 0000 0000 0000 0000 0000 0000  ................ \\n00000040: 0000 0000 0000 0000 0000 0000 0000 0000  ................ \\n00000050: 0000 0000 0000 0000 0000 0000 0000 0000  ................ \\n... complete page dump of a page of all ZERO\'s              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12712063\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12712063&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12712063\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712063_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712063_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 12:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T12:30:54+0000\'\u003e22\\/May\\/09 12:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eattached is a database from when we are able to reconnect and run CheckTables successfully (wombat_keeplog_notcorrupt.zip)  and also two text files showing the log file sizes on 4 good (able to reconnect) with checktables and 4 bad (corrupt) databases, created  with the attached reproduction and derby.storage.keepTransactionLog=true\u003cbr\\/\u003e\\nalong with badlogsizes.txt and goodlogsizes.txt showing the log file sizes.\u003c\\/p\u003e\\n\\n\u003cp\u003eI notice the good ones all have 7 log files and the bad ones all have 6, but even between good databases the log sizes vary somewhat.   Why the difference?\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso I looked at first corrupted database that I posted  and found the corruption in the  index TEST1_IDX_INDCOL2.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo map the index to the container number  1073, I doctored up the database so I could connect to it and then ran.\u003cbr\\/\u003e\\nSELECT  C.CONGLOMERATENUMBER, C.CONGLOMERATENAME  FROM SYS.SYSCONGLOMERATES C WHERE CONGLOMERATENUMBER=1073;\u003c\\/p\u003e\\n\\n\u003cp\u003eI will check other corrupt databases and see if it is corruption of the same index and  see if the reproduction works without the index.\u003c\\/p\u003e\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712063_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712063_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 12:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T12:30:54+0000\'\u003e22\\/May\\/09 12:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    attached is a database from when we are able to reconnect and run CheckTables successfully (wombat_keeplog_notcorrupt.zip)  and also two text files showing the log file sizes on 4 good (able to reconnect) with checktables and 4 bad (corrupt) databases, created  with the attached reproduction and derby.storage.keepTransactionLog=true \\nalong with badlogsizes.txt and goodlogsizes.txt showing the log file sizes. \\n\\n I notice the good ones all have 7 log files and the bad ones all have 6, but even between good databases the log sizes vary somewhat.   Why the difference? \\n\\n Also I looked at first corrupted database that I posted  and found the corruption in the  index TEST1_IDX_INDCOL2. \\n\\n To map the index to the container number  1073, I doctored up the database so I could connect to it and then ran. \\nSELECT  C.CONGLOMERATENUMBER, C.CONGLOMERATENAME  FROM SYS.SYSCONGLOMERATES C WHERE CONGLOMERATENUMBER=1073; \\n\\n I will check other corrupt databases and see if it is corruption of the same index and  see if the reproduction works without the index. \\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12712102\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12712102&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12712102\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712102_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712102_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 14:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T14:17:43+0000\'\u003e22\\/May\\/09 14:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooking at some corrupt databases I saw issues with the TEST1 table, TEST1_IDX_INDCOL3, TEST1_IDX_INDCOL1,  and TEST1_IDX_KEYCOL, so it seems to be all over the place except that it is the TEST1 table  and its indexes.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712102_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712102_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 14:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T14:17:43+0000\'\u003e22\\/May\\/09 14:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Looking at some corrupt databases I saw issues with the TEST1 table, TEST1_IDX_INDCOL3, TEST1_IDX_INDCOL1,  and TEST1_IDX_KEYCOL, so it seems to be all over the place except that it is the TEST1 table  and its indexes.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12712107\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12712107&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12712107\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712107_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712107_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 14:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T14:26:08+0000\'\u003e22\\/May\\/09 14:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ereattaching goodlogsizes.txt and badlogsizes.txt as the original ones were unreadable (still in EBCDIC)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712107_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712107_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 14:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T14:26:08+0000\'\u003e22\\/May\\/09 14:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    reattaching goodlogsizes.txt and badlogsizes.txt as the original ones were unreadable (still in EBCDIC)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12712134\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12712134&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12712134\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712134_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712134_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 15:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T15:17:44+0000\'\u003e22\\/May\\/09 15:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI used this little script to identify the bad containers.  It should only be run on a copy of the corrupted db in case anything goes wrong.\u003c\\/p\u003e\\n\\n\u003cp\u003eYou have to get the container number out of derby.log and then run. \u003c\\/p\u003e\\n\\n\u003cp\u003eindentifyBadContainer.ksh &lt;database&gt; &lt;containernumber&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eIt could be smarter and grep or awk the containernumber out of the log for you and  determine whether this is a table or index and just output the name instead of the query output, but it sufficed for my purposes.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712134_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712134_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 15:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T15:17:44+0000\'\u003e22\\/May\\/09 15:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I used this little script to identify the bad containers.  It should only be run on a copy of the corrupted db in case anything goes wrong. \\n\\n You have to get the container number out of derby.log and then run.  \\n\\n indentifyBadContainer.ksh &lt;database&gt; &lt;containernumber&gt; \\n\\n It could be smarter and grep or awk the containernumber out of the log for you and  determine whether this is a table or index and just output the name instead of the query output, but it sufficed for my purposes.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12712245\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12712245&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12712245\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712245_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712245_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 20:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T20:41:21+0000\'\u003e22\\/May\\/09 20:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJust a few more notes.  \u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eI reproduced the issue on  IBM 1.5 again on z\\/OS.\u003cbr\\/\u003e\\njava version \\\"1.5.0\\\"\u003cbr\\/\u003e\\nJava(TM) 2 Runtime Environment, Standard Edition (build pmz31devifx-20090408 (SR9-2 ))\u003cbr\\/\u003e\\nIBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 z\\/OS s390-31 j9vmmz3123ifx-20090324 (JIT enabled)\u003cbr\\/\u003e\\nJ9VM - 20090319_32038_bHdSMr\u003cbr\\/\u003e\\nJIT  - 20081112_1511ifx1_r8\u003cbr\\/\u003e\\nGC   - 200811_07)\u003cbr\\/\u003e\\nJCL  - 20090408\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eI put a wait for post commit after the delete and again after the compress before exiting the jvm and it still reproduced, so the issue does not seem related to any contention between the delete postcommit operations and the compress or any problem related to not completing the postcommit before exiting the JVM.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eIt does not seem to reproduce with a clean shutdown, so seems specific to recovery and the log files that were written.  Mike thinks perhaps some timing issue related to when the checkpoint record gets laid down and what log records are after the checkpoint record.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eMike said the log records appear to be well formed.  There is not just the random corruption that I would have expected if this were a JVM bug.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eI am running with 1.4.2 and haven\'t seen it yet after 34  runs. (It of course always seems to pop just after I hit send saying it hasn\'t happened.)    I know there are significant changes in the JVM from 1.4.2 to 1.5 and I think also the I\\/O behavior of Derby under 1.4.2 is different than it is with 1.5 with the incorporation of nio  so this doesn\'t really help us determine if it is a JVM or Derby issue.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712245_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712245_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 20:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T20:41:21+0000\'\u003e22\\/May\\/09 20:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Just a few more notes.   \\n \\n\\t I reproduced the issue on  IBM 1.5 again on z\\/OS. \\njava version \\\"1.5.0\\\" \\nJava(TM) 2 Runtime Environment, Standard Edition (build pmz31devifx-20090408 (SR9-2 )) \\nIBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 z\\/OS s390-31 j9vmmz3123ifx-20090324 (JIT enabled) \\nJ9VM - 20090319_32038_bHdSMr \\nJIT  - 20081112_1511ifx1_r8 \\nGC   - 200811_07) \\nJCL  - 20090408 \\n \\n\\n\\n \\n\\t I put a wait for post commit after the delete and again after the compress before exiting the jvm and it still reproduced, so the issue does not seem related to any contention between the delete postcommit operations and the compress or any problem related to not completing the postcommit before exiting the JVM. \\n \\n\\n\\n \\n\\t It does not seem to reproduce with a clean shutdown, so seems specific to recovery and the log files that were written.  Mike thinks perhaps some timing issue related to when the checkpoint record gets laid down and what log records are after the checkpoint record. \\n \\n\\n\\n \\n\\t Mike said the log records appear to be well formed.  There is not just the random corruption that I would have expected if this were a JVM bug. \\n \\n\\n\\n \\n\\t I am running with 1.4.2 and haven\'t seen it yet after 34  runs. (It of course always seems to pop just after I hit send saying it hasn\'t happened.)    I know there are significant changes in the JVM from 1.4.2 to 1.5 and I think also the I\\/O behavior of Derby under 1.4.2 is different than it is with 1.5 with the incorporation of nio  so this doesn\'t really help us determine if it is a JVM or Derby issue. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12712265\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12712265&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12712265\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712265_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712265_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 21:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T21:12:12+0000\'\u003e22\\/May\\/09 21:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooking again I see nio is available in 1.4.2.  Does the Derby store behavior change in anyway using 1.4.2. vs 1.5?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712265_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712265_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/09 21:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-22T21:12:12+0000\'\u003e22\\/May\\/09 21:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Looking again I see nio is available in 1.4.2.  Does the Derby store behavior change in anyway using 1.4.2. vs 1.5? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12712555\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12712555&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12712555\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12712555_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712555_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/May\\/09 14:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-24T14:19:16+0000\'\u003e24\\/May\\/09 14:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe cache manager that uses a ConcurrentHashMap is only loaded on JVM&gt;=1.5, and this may affect the timing of the checkpoints.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m wondering if this could be related to the new background cleaner which is used in a different way than the old one. Does the problem reproduce if you make ConcurrentCache.getBackgroundCleaner() always return null?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12712555_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712555_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/May\\/09 14:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-24T14:19:16+0000\'\u003e24\\/May\\/09 14:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The cache manager that uses a ConcurrentHashMap is only loaded on JVM&gt;=1.5, and this may affect the timing of the checkpoints. \\n\\n I\'m wondering if this could be related to the new background cleaner which is used in a different way than the old one. Does the problem reproduce if you make ConcurrentCache.getBackgroundCleaner() always return null?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12712720\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12712720&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12712720\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712720_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712720_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/May\\/09 13:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-25T13:32:10+0000\'\u003e25\\/May\\/09 13:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am not sure if this is another bug or the same problem or a combination of both, but the attached reprodcution reproBackgroundCheckpoint.zip reproduces corruption on Windows with IBM 1.6 Sun JDK 1.6.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe reproduction is the same as the original one except it has a thread which continually runs checkpoints while the program runs and therefore makes it more likely there is a conflict between the normal checkpoint and the one initiated by the compress.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo run, compile the java programs and run the script  reprobckchkpt.ksh.  It may take a dozen iterations or so.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith the Sun JVM, got the same \u003cbr\\/\u003e\\nCaused by: ERROR XSDBB: Unknown page format at page Page(98,Container(0, 1024)), page dump follows: Hex dump:...\u003c\\/p\u003e\\n\\n\u003cp\u003eThe exceptions with IBM 1.6 were  different though:\u003cbr\\/\u003e\\n============= begin nested exception, level (4) ===========\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.io.EOFException: Reached end of file while attempting to read a whole page.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.RAFContainer4.readFull(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.RAFContainer4.readPage0(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.RAFContainer4.readPage(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.CachedPage.readPage(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.CachedPage.setIdentity(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.cache.ConcurrentCache.find(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.FileContainer.getAnyPage(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.BaseContainer.getAnyPage(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.BaseContainerHandle.getAnyPage(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.PageBasicOperation.findpage(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.data.PageBasicOperation.needsRedo(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.RawStore.boot(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.bootStore(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.boot(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(Unknown Source)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:316)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:273)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat CheckTables.main(CheckTables.java:8)\u003c\\/p\u003e\\n\\n\u003cp\u003eand\u003c\\/p\u003e\\n\\n\u003cp\u003eCaused by: ERROR XSLAM: Cannot verify database format at \u003c\\/p\u003e\\n{1} due to IOException.\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1882)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\t... 7 more\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\nCaused by: java.io.EOFException\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\t... 33 more\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n============= begin nested exception, level (1) ===========\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\njava.sql.SQLException: Cannot verify database format at {1}\\n\u003cp\u003e due to IOException.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:201)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2614)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:316)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:273)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat CheckTables.main(CheckTables.java:8)\u003c\\/p\u003e\\n\\n\u003cp\u003eCaused by: java.sql.SQLException: Cannot verify database format at \u003c\\/p\u003e\\n{1} due to IOException.\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\t... 9 more\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\nCaused by: ERROR XSLAM: Cannot verify database format at {1}\\n\u003cp\u003e due to IOException.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1882)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t... 7 more\u003c\\/p\u003e\\n\\n\u003cp\u003eCaused by: java.io.EOFException\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t... 33 more\u003c\\/p\u003e\\n\\n\u003cp\u003e============= end nested exception, level (1) ===========\u003c\\/p\u003e\\n\\n\u003cp\u003e============= begin nested exception, level (2) ===========\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.sql.SQLException: Cannot verify database format at \u003c\\/p\u003e\\n{1} due to IOException.\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:201)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2614)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:316)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:273)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\n\\tat CheckTables.main(CheckTables.java:8)\u003cbr\\/\u003e\\n\u003cbr\\/\u003e\\nCaused by: ERROR XSLAM: Cannot verify database format at {1}\\n\u003cp\u003e due to IOException.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1882)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t... 7 more\u003c\\/p\u003e\\n\\n\u003cp\u003eCaused by: java.io.EOFException\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t... 33 more\u003c\\/p\u003e\\n\\n\u003cp\u003e============= end nested exception, level (2) ===========\u003c\\/p\u003e\\n\\n\u003cp\u003e============= begin nested exception, level (3) ===========\u003c\\/p\u003e\\n\\n\u003cp\u003eERROR XSLAM: Cannot verify database format at \u003c\\/p\u003e\\n{1}\\n\u003cp\u003e due to IOException.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1882)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:316)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:273)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat CheckTables.main(CheckTables.java:8)\u003c\\/p\u003e\\n\\n\u003cp\u003eCaused by: java.io.EOFException\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t... 33 more\u003c\\/p\u003e\\n\\n\u003cp\u003e============= end nested exception, level (3) ===========\u003c\\/p\u003e\\n\\n\u003cp\u003e============= begin nested exception, level (4) ===========\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.io.EOFException\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:316)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:273)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat CheckTables.main(CheckTables.java:8)\u003c\\/p\u003e\\n\\n\u003cp\u003e============= end nested exception, level (4) ===========\u003c\\/p\u003e\\n\\n\u003cp\u003e2009-05-25 02:28:24.156 GMT Thread\u003cspan class=\\\"error\\\"\u003e&#91;main,5,main&#93;\u003c\\/span\u003e Less severe exception raised during cleanup (ignored) An attempt was made to close a transaction that was still active. The transaction has been aborted.\u003c\\/p\u003e\\n\\n\u003cp\u003eERROR 40XT4: An attempt was made to close a transaction that was still active. The transaction has been aborted.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:276)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.xact.Xact.close(Xact.java:1136)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.store.raw.xact.XactContext.cleanupOnError(XactContext.java:140)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.iapi.services.context.ContextManager.cleanupOnError(ContextManager.java:333)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.cleanupOnError(TransactionResourceImpl.java:419)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:584)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:316)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat java.sql.DriverManager.getConnection(DriverManager.java:273)\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tat CheckTables.main(CheckTables.java:8)\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12712720_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12712720_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/May\\/09 13:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-25T13:32:10+0000\'\u003e25\\/May\\/09 13:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am not sure if this is another bug or the same problem or a combination of both, but the attached reprodcution reproBackgroundCheckpoint.zip reproduces corruption on Windows with IBM 1.6 Sun JDK 1.6. \\n\\n The reproduction is the same as the original one except it has a thread which continually runs checkpoints while the program runs and therefore makes it more likely there is a conflict between the normal checkpoint and the one initiated by the compress. \\n\\n To run, compile the java programs and run the script  reprobckchkpt.ksh.  It may take a dozen iterations or so. \\n\\n With the Sun JVM, got the same  \\nCaused by: ERROR XSDBB: Unknown page format at page Page(98,Container(0, 1024)), page dump follows: Hex dump:... \\n\\n The exceptions with IBM 1.6 were  different though: \\n============= begin nested exception, level (4) =========== \\n\\n java.io.EOFException: Reached end of file while attempting to read a whole page. \\n\\n \\tat org.apache.derby.impl.store.raw.data.RAFContainer4.readFull(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.data.RAFContainer4.readPage0(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.data.RAFContainer4.readPage(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.data.CachedPage.readPage(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.data.CachedPage.setIdentity(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.cache.ConcurrentCache.find(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.data.FileContainer.getAnyPage(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.data.BaseContainer.getAnyPage(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.data.BaseContainerHandle.getAnyPage(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.data.PageBasicOperation.findpage(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.data.PageBasicOperation.needsRedo(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.raw.RawStore.boot(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source) \\n\\n \\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(Unknown Source) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Unknown Source) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.bootStore(Unknown Source) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.boot(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(Unknown Source) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(Unknown Source) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Unknown Source) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(Unknown Source) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(Unknown Source) \\n\\n \\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source) \\n\\n \\tat org.apache.derby.jdbc.InternalDriver.connect(Unknown Source) \\n\\n \\tat org.apache.derby.jdbc.AutoloadedDriver.connect(Unknown Source) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:316) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:273) \\n\\n \\tat CheckTables.main(CheckTables.java:8) \\n\\n and \\n\\n Caused by: ERROR XSLAM: Cannot verify database format at  \\n{1} due to IOException. \\n \\n\\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296) \\n \\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1882) \\n \\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985) \\n \\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944) \\n \\n\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704) \\n \\n\\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206) \\n \\n\\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176) \\n \\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924) \\n \\n\\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339) \\n \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n \\n\\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019) \\n \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n \\n\\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780) \\n \\n\\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196) \\n \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n \\n\\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858) \\n \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724) \\n \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602) \\n \\n\\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021) \\n \\n\\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581) \\n \\n\\t... 7 more \\n \\nCaused by: java.io.EOFException \\n \\n\\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739) \\n \\n\\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869) \\n \\n\\t... 33 more \\n \\n============= begin nested exception, level (1) =========== \\n \\njava.sql.SQLException: Cannot verify database format at {1}\\n  due to IOException. \\n\\n \\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95) \\n\\n \\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:201) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2614) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374) \\n\\n \\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n\\n \\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n\\n \\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:316) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:273) \\n\\n \\tat CheckTables.main(CheckTables.java:8) \\n\\n Caused by: java.sql.SQLException: Cannot verify database format at  \\n{1} due to IOException. \\n \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119) \\n \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70) \\n \\n\\t... 9 more \\n \\nCaused by: ERROR XSLAM: Cannot verify database format at {1}\\n  due to IOException. \\n\\n \\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1882) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944) \\n\\n \\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704) \\n\\n \\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206) \\n\\n \\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924) \\n\\n \\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\n \\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581) \\n\\n \\t... 7 more \\n\\n Caused by: java.io.EOFException \\n\\n \\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869) \\n\\n \\t... 33 more \\n\\n ============= end nested exception, level (1) =========== \\n\\n ============= begin nested exception, level (2) =========== \\n\\n java.sql.SQLException: Cannot verify database format at  \\n{1} due to IOException. \\n \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45) \\n \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119) \\n \\n\\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70) \\n \\n\\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:201) \\n \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2614) \\n \\n\\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374) \\n \\n\\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n \\n\\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n \\n\\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:316) \\n \\n\\tat java.sql.DriverManager.getConnection(DriverManager.java:273) \\n \\n\\tat CheckTables.main(CheckTables.java:8) \\n \\nCaused by: ERROR XSLAM: Cannot verify database format at {1}\\n  due to IOException. \\n\\n \\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1882) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944) \\n\\n \\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704) \\n\\n \\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206) \\n\\n \\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924) \\n\\n \\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\n \\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581) \\n\\n \\t... 7 more \\n\\n Caused by: java.io.EOFException \\n\\n \\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869) \\n\\n \\t... 33 more \\n\\n ============= end nested exception, level (2) =========== \\n\\n ============= begin nested exception, level (3) =========== \\n\\n ERROR XSLAM: Cannot verify database format at  \\n{1}\\n  due to IOException. \\n\\n \\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:296) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1882) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944) \\n\\n \\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704) \\n\\n \\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206) \\n\\n \\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924) \\n\\n \\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\n \\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374) \\n\\n \\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n\\n \\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n\\n \\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:316) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:273) \\n\\n \\tat CheckTables.main(CheckTables.java:8) \\n\\n Caused by: java.io.EOFException \\n\\n \\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869) \\n\\n \\t... 33 more \\n\\n ============= end nested exception, level (3) =========== \\n\\n ============= begin nested exception, level (4) =========== \\n\\n java.io.EOFException \\n\\n \\tat java.io.RandomAccessFile.readInt(RandomAccessFile.java:739) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.verifyLogFormat(LogToFile.java:1869) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtPosition(LogToFile.java:2985) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.getLogFileAtBeginning(LogToFile.java:2944) \\n\\n \\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecordForward(Scan.java:704) \\n\\n \\tat org.apache.derby.impl.store.raw.log.Scan.getNextRecord(Scan.java:206) \\n\\n \\tat org.apache.derby.impl.store.raw.log.FileLogger.redo(FileLogger.java:1176) \\n\\n \\tat org.apache.derby.impl.store.raw.log.LogToFile.recover(LogToFile.java:924) \\n\\n \\tat org.apache.derby.impl.store.raw.RawStore.boot(RawStore.java:339) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\n \\tat org.apache.derby.impl.store.access.RAMAccessManager.boot(RAMAccessManager.java:1019) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonitor.java:573) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.java:427) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.bootStore(BasicDatabase.java:780) \\n\\n \\tat org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:196) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2021) \\n\\n \\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1858) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(BaseMonitor.java:1724) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1602) \\n\\n \\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021) \\n\\n \\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2581) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:374) \\n\\n \\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n\\n \\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n\\n \\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:316) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:273) \\n\\n \\tat CheckTables.main(CheckTables.java:8) \\n\\n ============= end nested exception, level (4) =========== \\n\\n 2009-05-25 02:28:24.156 GMT Thread &#91;main,5,main&#93;  Less severe exception raised during cleanup (ignored) An attempt was made to close a transaction that was still active. The transaction has been aborted. \\n\\n ERROR 40XT4: An attempt was made to close a transaction that was still active. The transaction has been aborted. \\n\\n \\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:276) \\n\\n \\tat org.apache.derby.impl.store.raw.xact.Xact.close(Xact.java:1136) \\n\\n \\tat org.apache.derby.impl.store.raw.xact.XactContext.cleanupOnError(XactContext.java:140) \\n\\n \\tat org.apache.derby.iapi.services.context.ContextManager.cleanupOnError(ContextManager.java:333) \\n\\n \\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.cleanupOnError(TransactionResourceImpl.java:419) \\n\\n \\tat org.apache.derby.impl.jdbc.EmbedConnection.&lt;init&gt;(EmbedConnection.java:584) \\n\\n \\tat org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Driver40.java:68) \\n\\n \\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238) \\n\\n \\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:316) \\n\\n \\tat java.sql.DriverManager.getConnection(DriverManager.java:273) \\n\\n \\tat CheckTables.main(CheckTables.java:8) \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12713059\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12713059&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12713059\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713059_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713059_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T15:37:31+0000\'\u003e26\\/May\\/09 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ederby_dumponly.log is a derby.log booted on the database that won\'t boot, with the following debug flag.  This forces the boot to just print all the log records rather than \u003cbr\\/\u003e\\nprocess them:\u003cbr\\/\u003e\\nderby.debug.true=DumpLogOnly,LogTrace\u003c\\/p\u003e\\n\\n\u003cp\u003eUsing this I can see what was going on in the db after the problem log record \u003cbr\\/\u003e\\ncausing the crash.  What I see is that toward the end the is a log record for \u003cbr\\/\u003e\\nthe compress of container 1073:\u003cbr\\/\u003e\\nDEBUG LogTrace OUTPUT: scanned 64851 : Page Operation: Page(0,Container(0, 1073)) pageVersion 107 :  CompressSpaceOperation: newHighestPage = 13;num_p\u003cbr\\/\u003e\\nages_truncated = 31 to Page(0,Container(0, 1073)) instant = (6,3249863) logEnd = (6,3249908) logIn at 25 available 4^M\u003c\\/p\u003e\\n\\n\u003cp\u003eIf I look backward in the log from this point I find the most recent operation on 1073:\u003cbr\\/\u003e\\nDEBUG LogTrace OUTPUT: scanned 64820 : Page Operation: Page(29,Container(0, 1024)) pageVersion 66 : Purge : 1 slots starting at 12 (recordId=18) insta\u003cbr\\/\u003e\\nnt = (6,3210739) logEnd = (6,3210791) logIn at 23 available 13^M\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd If I again start at that Compress log record and search backward for a \u003cbr\\/\u003e\\ncheckpoint record I find:\u003cbr\\/\u003e\\nDEBUG LogTrace OUTPUT: scanned 61634 : Checkpoint :     redoLWM (4,943)\u003cbr\\/\u003e\\n        undoLWM (4,943)\u003cbr\\/\u003e\\n**************************\u003cbr\\/\u003e\\norg.apache.derby.impl.store.raw.xact.TransactionTable@16ca16ca\u003cbr\\/\u003e\\nTransaction Table: size = 1 largestUpdateXactId = 61634\u003cbr\\/\u003e\\nXid=61634 gid=null firstLog=(4,943) lastLog=null transactionStatus=0 myxact=null update=true recovery=true prepare=false needExclusion=true\u003cbr\\/\u003e\\n--------------------------- instant = (4,981) logEnd = (4,1056) logIn at 55 available 4^M\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd the last checkpoint in the log is:\u003cbr\\/\u003e\\nDEBUG LogTrace OUTPUT: scanned 64191 : Checkpoint :     redoLWM (6,24)\u003cbr\\/\u003e\\n        undoLWM (5,61)\u003cbr\\/\u003e\\n**************************\u003cbr\\/\u003e\\norg.apache.derby.impl.store.raw.xact.TransactionTable@64a864a8\u003cbr\\/\u003e\\nTransaction Table: size = 2 largestUpdateXactId = 64852\u003cbr\\/\u003e\\nXid=64191 gid=null firstLog=(6,3250100) lastLog=null transactionStatus=0 myxact=null update=true recovery=true prepare=false needExclusion=true\u003cbr\\/\u003e\\nXid=64852 gid=null firstLog=(6,3249980) lastLog=(6,3250018) transactionStatus=0 myxact=null update=true recovery=true prepare=false needExclusion=true\u003cbr\\/\u003e\\n--------------------------- instant = (6,3250138) logEnd = (6,3250245) logIn at 87 available 4^M\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem with this is that for redo recovery of compress space record to work\u003cbr\\/\u003e\\nproperly, there must be a checkpoint with a redo lwm (low water mark) that is after any operation on the container before the compress operation happens.\u003cbr\\/\u003e\\nCompress calls checkpoint to make this happen.  The reason is that redo \u003cbr\\/\u003e\\nrecovery wants to replay any log record it has making pages march orderly from\u003cbr\\/\u003e\\nversion n to version n+1, ...   But the compress space operation shrinks the file\u003cbr\\/\u003e\\non disk losing version n, so version n+1 can\'t be redone.  \u003c\\/p\u003e\\n\\n\u003cp\u003eIn this case the last checkpoint has redo lwm of (6,24) and the last operation is\u003cbr\\/\u003e\\nafter that at (6,3210739)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713059_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713059_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T15:37:31+0000\'\u003e26\\/May\\/09 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    derby_dumponly.log is a derby.log booted on the database that won\'t boot, with the following debug flag.  This forces the boot to just print all the log records rather than  \\nprocess them: \\nderby.debug.true=DumpLogOnly,LogTrace \\n\\n Using this I can see what was going on in the db after the problem log record  \\ncausing the crash.  What I see is that toward the end the is a log record for  \\nthe compress of container 1073: \\nDEBUG LogTrace OUTPUT: scanned 64851 : Page Operation: Page(0,Container(0, 1073)) pageVersion 107 :  CompressSpaceOperation: newHighestPage = 13;num_p \\nages_truncated = 31 to Page(0,Container(0, 1073)) instant = (6,3249863) logEnd = (6,3249908) logIn at 25 available 4^M \\n\\n If I look backward in the log from this point I find the most recent operation on 1073: \\nDEBUG LogTrace OUTPUT: scanned 64820 : Page Operation: Page(29,Container(0, 1024)) pageVersion 66 : Purge : 1 slots starting at 12 (recordId=18) insta \\nnt = (6,3210739) logEnd = (6,3210791) logIn at 23 available 13^M \\n\\n And If I again start at that Compress log record and search backward for a  \\ncheckpoint record I find: \\nDEBUG LogTrace OUTPUT: scanned 61634 : Checkpoint :     redoLWM (4,943) \\n        undoLWM (4,943) \\n************************** \\norg.apache.derby.impl.store.raw.xact.TransactionTable@16ca16ca \\nTransaction Table: size = 1 largestUpdateXactId = 61634 \\nXid=61634 gid=null firstLog=(4,943) lastLog=null transactionStatus=0 myxact=null update=true recovery=true prepare=false needExclusion=true \\n--------------------------- instant = (4,981) logEnd = (4,1056) logIn at 55 available 4^M \\n\\n And the last checkpoint in the log is: \\nDEBUG LogTrace OUTPUT: scanned 64191 : Checkpoint :     redoLWM (6,24) \\n        undoLWM (5,61) \\n************************** \\norg.apache.derby.impl.store.raw.xact.TransactionTable@64a864a8 \\nTransaction Table: size = 2 largestUpdateXactId = 64852 \\nXid=64191 gid=null firstLog=(6,3250100) lastLog=null transactionStatus=0 myxact=null update=true recovery=true prepare=false needExclusion=true \\nXid=64852 gid=null firstLog=(6,3249980) lastLog=(6,3250018) transactionStatus=0 myxact=null update=true recovery=true prepare=false needExclusion=true \\n--------------------------- instant = (6,3250138) logEnd = (6,3250245) logIn at 87 available 4^M \\n\\n The problem with this is that for redo recovery of compress space record to work \\nproperly, there must be a checkpoint with a redo lwm (low water mark) that is after any operation on the container before the compress operation happens. \\nCompress calls checkpoint to make this happen.  The reason is that redo  \\nrecovery wants to replay any log record it has making pages march orderly from \\nversion n to version n+1, ...   But the compress space operation shrinks the file \\non disk losing version n, so version n+1 can\'t be redone.   \\n\\n In this case the last checkpoint has redo lwm of (6,24) and the last operation is \\nafter that at (6,3210739)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12713062\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12713062&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12713062\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713062_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713062_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T15:44:10+0000\'\u003e26\\/May\\/09 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt looks like the problem is when compress asks for a checkpoint while another checkpoint is in progress.  The current  checkpoint code will either wait for current checkpoint to finish or just return if one is already in progress.  compress needs a path that will wait for current one \u003cbr\\/\u003e\\nto finish and restart another one, and wait for that one to finish.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll concentrate on a patch for this.   I am not sure if the last stack that kathey posted is this same bug.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713062_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713062_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T15:44:10+0000\'\u003e26\\/May\\/09 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It looks like the problem is when compress asks for a checkpoint while another checkpoint is in progress.  The current  checkpoint code will either wait for current checkpoint to finish or just return if one is already in progress.  compress needs a path that will wait for current one  \\nto finish and restart another one, and wait for that one to finish. \\n\\n I\'ll concentrate on a patch for this.   I am not sure if the last stack that kathey posted is this same bug.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12713069\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12713069&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12713069\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12713069_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713069_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T16:02:59+0000\'\u003e26\\/May\\/09 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mike for looking at this.  If we still see the EOFException  with my background checkpoint repro after your fix,  I will file a separate bug.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12713069_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713069_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 16:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T16:02:59+0000\'\u003e26\\/May\\/09 16:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mike for looking at this.  If we still see the EOFException  with my background checkpoint repro after your fix,  I will file a separate bug.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12713125\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12713125&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12713125\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12713125_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713125_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 17:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T17:23:11+0000\'\u003e26\\/May\\/09 17:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChanging the affects version to include past versions.   I haven\'t actually seen it  with 10.2, but did with 10.1.3.3 and see no reason why 10.2 wouldn\'t be affected.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12713125_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713125_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 17:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T17:23:11+0000\'\u003e26\\/May\\/09 17:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Changing the affects version to include past versions.   I haven\'t actually seen it  with 10.2, but did with 10.1.3.3 and see no reason why 10.2 wouldn\'t be affected.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12713208\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12713208&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12713208\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713208_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713208_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 19:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T19:44:40+0000\'\u003e26\\/May\\/09 19:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePreliminary patch for this issue.  I have not run full tests yet, but would like feedback from anyone who could reproduce the original error - I have not actually reproduced\u003cbr\\/\u003e\\nit myself.  \u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch only includes code changes, no new tests.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe fix is to add interfaces that allow compress table to tell the underlying store that\u003cbr\\/\u003e\\nit needs a new checkpoint and needs to wait until that checkpoint has made it into\u003cbr\\/\u003e\\nthe log before proceeding with the operation which will shrink the file destroying \u003cbr\\/\u003e\\npages that may otherwise participate in redo recovery.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have only altered the behavior for the compress operation and left all other\u003cbr\\/\u003e\\ncheckpoint() calling paths the same, but reading some \u003cbr\\/\u003e\\ncomments while looking at the code makes me concerned that some of the\u003cbr\\/\u003e\\nbackup code and backup for encryption code may have also have problems with\u003cbr\\/\u003e\\nan ongoing checkpoint.  But would rather address those problems if they exist in\u003cbr\\/\u003e\\nanother issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713208_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713208_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 19:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T19:44:40+0000\'\u003e26\\/May\\/09 19:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Preliminary patch for this issue.  I have not run full tests yet, but would like feedback from anyone who could reproduce the original error - I have not actually reproduced \\nit myself.   \\n\\n This patch only includes code changes, no new tests. \\n\\n The fix is to add interfaces that allow compress table to tell the underlying store that \\nit needs a new checkpoint and needs to wait until that checkpoint has made it into \\nthe log before proceeding with the operation which will shrink the file destroying  \\npages that may otherwise participate in redo recovery. \\n\\n I have only altered the behavior for the compress operation and left all other \\ncheckpoint() calling paths the same, but reading some  \\ncomments while looking at the code makes me concerned that some of the \\nbackup code and backup for encryption code may have also have problems with \\nan ongoing checkpoint.  But would rather address those problems if they exist in \\nanother issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12713314\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12713314&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12713314\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12713314_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713314_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 23:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T23:00:34+0000\'\u003e26\\/May\\/09 23:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mike for the quick fix.  With the patch, I got 200 clean runs on z\\/OS and also 200 clean runs on Windows (IBM 1.6) with the windows repro.\u003c\\/p\u003e\\n\\n\u003cp\u003eI took a quick look at the patch and have no useful technical comments but noticed that the patch mixes spaces and tabs.  Also there is an extra @param wait in javadoc(LogFactory:107).\u003c\\/p\u003e\\n\\n\u003cp\u003eI have a question though.  Under what conditions would we not want to queue the checkpoint requests and force a new checkpoint?\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen we look at the other cases,  in addition to backup, I think it would be good to look at:\u003cbr\\/\u003e\\nCALL SYSCS_UTIL.SYSCS_CHECKPOINT_DATABASE() to make sure it has no issues.  It seems like it should  force a new checkpoint as well.\u003c\\/p\u003e\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12713314_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713314_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 23:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T23:00:34+0000\'\u003e26\\/May\\/09 23:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mike for the quick fix.  With the patch, I got 200 clean runs on z\\/OS and also 200 clean runs on Windows (IBM 1.6) with the windows repro. \\n\\n I took a quick look at the patch and have no useful technical comments but noticed that the patch mixes spaces and tabs.  Also there is an extra @param wait in javadoc(LogFactory:107). \\n\\n I have a question though.  Under what conditions would we not want to queue the checkpoint requests and force a new checkpoint? \\n\\n When we look at the other cases,  in addition to backup, I think it would be good to look at: \\nCALL SYSCS_UTIL.SYSCS_CHECKPOINT_DATABASE() to make sure it has no issues.  It seems like it should  force a new checkpoint as well. \\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12713331\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12713331&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12713331\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713331_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713331_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 23:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T23:55:39+0000\'\u003e26\\/May\\/09 23:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe normal case where we ask for a checkpoint, which is triggered by default when we think \u003cbr\\/\u003e\\nwe have logged approximately 10meg of log is a case where we don\'t want to start a new one.\u003cbr\\/\u003e\\nThe only reason we are doing a checkpoint in this case is to minimize recovery time if we happen to crash.  If there is already a checkpoint in progress, then that is good enough.  There\u003cbr\\/\u003e\\nis no correctness of needed a checkpoint to start NOW and wait for it to finish.\u003cbr\\/\u003e\\nCheckpoints can really slow down the over all throughput of the system, especially if user\u003cbr\\/\u003e\\nhas increased the cache size, so we don\'t want to do additional ones if they are\u003cbr\\/\u003e\\nunnecessary.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not sure what backup needs.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the case of the user callable routine we don\'t really say much about what it does:\u003cbr\\/\u003e\\nThe SYSCS_UTIL.SYSCS_CHECKPOINT_DATABASE system procedure checkpoints the database by flushing all cached data to disk.  But I would lean toward changing its behavior to\u003cbr\\/\u003e\\nalso do another checkpoint.  \u003c\\/p\u003e\\n\\n\u003cp\u003eI am tempted to change the patch to eliminate the wait parameter, and instead all code that \u003cbr\\/\u003e\\ncurrently calls wait will always force a new checkpoint and wait for it if it finds a checkpoint in\u003cbr\\/\u003e\\nprogress.  If I do this change I will make sure the \\\"normal\\\" checkpoint does not call this path.  Any opinions?  It would be nice if we could generate bug scripts that show the\u003cbr\\/\u003e\\nspecific bugs that are fixed by adding the additional checkpoints, but this is hard as is\u003cbr\\/\u003e\\nevidenced we still don\'t have a perfect repro for the compress bug.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713331_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713331_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/May\\/09 23:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-26T23:55:39+0000\'\u003e26\\/May\\/09 23:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The normal case where we ask for a checkpoint, which is triggered by default when we think  \\nwe have logged approximately 10meg of log is a case where we don\'t want to start a new one. \\nThe only reason we are doing a checkpoint in this case is to minimize recovery time if we happen to crash.  If there is already a checkpoint in progress, then that is good enough.  There \\nis no correctness of needed a checkpoint to start NOW and wait for it to finish. \\nCheckpoints can really slow down the over all throughput of the system, especially if user \\nhas increased the cache size, so we don\'t want to do additional ones if they are \\nunnecessary. \\n\\n I am not sure what backup needs. \\n\\n In the case of the user callable routine we don\'t really say much about what it does: \\nThe SYSCS_UTIL.SYSCS_CHECKPOINT_DATABASE system procedure checkpoints the database by flushing all cached data to disk.  But I would lean toward changing its behavior to \\nalso do another checkpoint.   \\n\\n I am tempted to change the patch to eliminate the wait parameter, and instead all code that  \\ncurrently calls wait will always force a new checkpoint and wait for it if it finds a checkpoint in \\nprogress.  If I do this change I will make sure the \\\"normal\\\" checkpoint does not call this path.  Any opinions?  It would be nice if we could generate bug scripts that show the \\nspecific bugs that are fixed by adding the additional checkpoints, but this is hard as is \\nevidenced we still don\'t have a perfect repro for the compress bug.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12713449\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12713449&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12713449\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713449_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713449_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/May\\/09 06:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-27T06:58:07+0000\'\u003e27\\/May\\/09 06:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFirst patch hung the tests.  Needed to move the retry of the checkpoint out of the synchronized block.  Still not ready for commit, rerunning all tests.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12713449_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12713449_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/May\\/09 06:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-27T06:58:07+0000\'\u003e27\\/May\\/09 06:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    First patch hung the tests.  Needed to move the retry of the checkpoint out of the synchronized block.  Still not ready for commit, rerunning all tests.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12714208\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12714208&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12714208\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12714208_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714208_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/May\\/09 22:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-28T22:44:03+0000\'\u003e28\\/May\\/09 22:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDerby-4239_3.diff is the patch I intend to commit.  It passes complete set of nightly tests.\u003c\\/p\u003e\\n\\n\u003cp\u003eAfter looking at the backup code it seemed like backup really wanted to have the same behavior\u003cbr\\/\u003e\\nthat compress was looking for.  I also changed the behavior of the system procedure checkpoint\u003cbr\\/\u003e\\nto match backup and compress checkpoint.  \u003c\\/p\u003e\\n\\n\u003cp\u003eI moved the waiting code into the subroutine so that it could differ between a checkpoint returning\u003cbr\\/\u003e\\nfalse because another a checkpoint was in progress and a couple of other possible conditions.\u003cbr\\/\u003e\\nWithout this change system could get in a state where it looped forever trying to get a checkpoint\u003cbr\\/\u003e\\n(one case was trying to force a clean shutdown after we had already closed down the logging\u003cbr\\/\u003e\\nsystem).\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12714208_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714208_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/May\\/09 22:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-28T22:44:03+0000\'\u003e28\\/May\\/09 22:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Derby-4239_3.diff is the patch I intend to commit.  It passes complete set of nightly tests. \\n\\n After looking at the backup code it seemed like backup really wanted to have the same behavior \\nthat compress was looking for.  I also changed the behavior of the system procedure checkpoint \\nto match backup and compress checkpoint.   \\n\\n I moved the waiting code into the subroutine so that it could differ between a checkpoint returning \\nfalse because another a checkpoint was in progress and a couple of other possible conditions. \\nWithout this change system could get in a state where it looped forever trying to get a checkpoint \\n(one case was trying to force a clean shutdown after we had already closed down the logging \\nsystem). \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12714796\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12714796&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12714796\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12714796_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714796_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/May\\/09 00:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-31T00:07:17+0000\'\u003e31\\/May\\/09 00:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDo you think this could be the same as the problem reported in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3393\\\" title=\\\"Database corruption when adding sleep() in RAFContainer4.writePage()\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3393\\\"\u003e\u003cdel\u003eDERBY-3393\u003c\\/del\u003e\u003c\\/a\u003e? I\'ve run the storerecovery suite once without the patch and twice with the patch. Without the patch, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3393\\\" title=\\\"Database corruption when adding sleep() in RAFContainer4.writePage()\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3393\\\"\u003e\u003cdel\u003eDERBY-3393\u003c\\/del\u003e\u003c\\/a\u003e was reproduced, but none of the runs with the patch reproduced it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12714796_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714796_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/May\\/09 00:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-31T00:07:17+0000\'\u003e31\\/May\\/09 00:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Do you think this could be the same as the problem reported in   DERBY-3393  ? I\'ve run the storerecovery suite once without the patch and twice with the patch. Without the patch,   DERBY-3393   was reproduced, but none of the runs with the patch reproduced it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12714868\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12714868&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12714868\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12714868_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714868_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/May\\/09 14:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-31T14:38:09+0000\'\u003e31\\/May\\/09 14:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI was doing some more runs on Windows with the patch because I accidentally deleted the database\\/log with the EOFException and I got a hang.   I don\'t really understand what is getting hung up though.\u003cbr\\/\u003e\\nThis is with IBM 1.6 and ReproCorruptionBackgroundCheckpoint.\u003c\\/p\u003e\\n\\n\u003cp\u003e2XMFULLTHDDUMP Full thread dump J9 VM (J2RE 6.0 IBM J9 2.4 Windows XP x86-32 build jvmwi3260sr5-20090516_3558820090516_035588_lHdSMr, native threads):\u003cbr\\/\u003e\\n3XMTHREADINFO      \\\"JIT Compilation Thread\\\" TID:0x41CB1900, j9thread_t:0x00292630, state:CW, prio=10\u003cbr\\/\u003e\\n3XMTHREADINFO1            (native thread ID:0x1028, native priority:0xB, native policy:UNKNOWN)\u003cbr\\/\u003e\\n3XMTHREADINFO      \\\"Gc Slave Thread\\\" TID:0x4209C500, j9thread_t:0x00292FC0, state:CW, prio=5\u003cbr\\/\u003e\\n3XMTHREADINFO1            (native thread ID:0x1638, native priority:0x5, native policy:UNKNOWN)\u003cbr\\/\u003e\\n3XMTHREADINFO      \\\"derby.antiGC\\\" TID:0x41ED2100, j9thread_t:0x4276259C, state:CW, prio=1\u003cbr\\/\u003e\\n3XMTHREADINFO1            (native thread ID:0x970, native priority:0x1, native policy:UNKNOWN)\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Native Method)\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Object.java:167)\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/services\\/monitor\\/AntiGC.run(Bytecode PC:15)\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/lang\\/Thread.run(Thread.java:735)\u003cbr\\/\u003e\\n3XMTHREADINFO      \\\"Thread-2\\\" TID:0x42934500, j9thread_t:0x42762A64, state:CW, prio=5\u003cbr\\/\u003e\\n3XMTHREADINFO1            (native thread ID:0x13E8, native priority:0x5, native policy:UNKNOWN)\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Native Method)\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Object.java:167)\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/util\\/Timer$TimerImpl.run(Timer.java:221)\u003cbr\\/\u003e\\n3XMTHREADINFO      \\\"derby.rawStoreDaemon\\\" TID:0x42933300, j9thread_t:0x42762F2C, state:CW, prio=5\u003cbr\\/\u003e\\n3XMTHREADINFO1            (native thread ID:0xF30, native priority:0x5, native policy:UNKNOWN)\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Native Method)\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Object.java:196(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/services\\/daemon\\/BasicDaemon.rest(Bytecode PC:3(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/services\\/daemon\\/BasicDaemon.run(Bytecode PC:22)\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/lang\\/Thread.run(Thread.java:735)\u003cbr\\/\u003e\\n3XMTHREADINFO      \\\"Thread-6\\\" TID:0x42933900, j9thread_t:0x42763190, state:CW, prio=5\u003cbr\\/\u003e\\n3XMTHREADINFO1            (native thread ID:0x143C, native priority:0x5, native policy:UNKNOWN)\u003cbr\\/\u003e\\n4XESTACKTRACE          at sun\\/nio\\/ch\\/FileChannelImpl.force0(Native Method)\u003cbr\\/\u003e\\n4XESTACKTRACE          at sun\\/nio\\/ch\\/FileChannelImpl.force(FileChannelImpl.java:364(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/io\\/DirRandomAccessFile4.sync(Bytecode PC:77(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/log\\/LogToFile.syncFile(Bytecode PC:77(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/log\\/LogToFile.writeControlFile(Bytecode PC:394(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/log\\/LogToFile.checkpointWithTran(Bytecode PC:341(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/log\\/LogToFile.checkpoint(Bytecode PC:16(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/RawStore.checkpoint(Bytecode PC:16(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/access\\/RAMAccessManager.checkpoint(Bytecode PC:16(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/db\\/BasicDatabase.checkpoint(Bytecode PC:16(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/catalog\\/SystemProcedures.SYSCS_CHECKPOINT_DATABASE(Bytecode PC:16(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/exe\\/acd381409ax0121x944ex95fex00000008ed900.g0(Bytecode PC:16(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at sun\\/reflect\\/GeneratedMethodAccessor3.invoke(Bytecode PC:16(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at sun\\/reflect\\/DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at java\\/lang\\/reflect\\/Method.invoke(Method.java:578(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/services\\/reflect\\/ReflectMethod.invoke(Bytecode PC:6(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/sql\\/execute\\/CallStatementResultSet.open(Bytecode PC:6(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/sql\\/GenericPreparedStatement.executeStmt(Bytecode PC:6(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/sql\\/GenericPreparedStatement.execute(Bytecode PC:4(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/jdbc\\/EmbedStatement.executeStatement(Bytecode PC:4(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/jdbc\\/EmbedStatement.execute(Bytecode PC:152(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/jdbc\\/EmbedStatement.execute(Bytecode PC:7(Compiled Code))\u003cbr\\/\u003e\\n4XESTACKTRACE          at ReproCorruptionBackgroundCheckpoint$1.run(ReproCorruptionBackgroundCheckpoint.java:97(Compiled Code))\u003cbr\\/\u003e\\n3XMTHREADINFO      \\\"DestroyJavaVM helper thread\\\" TID:0x41CB1300, j9thread_t:0x002923CC, state:CW, prio=5\u003cbr\\/\u003e\\n3XMTHREADINFO1            (native thread ID:0x808, native priority:0x5, native policy:UNKNOWN)\u003cbr\\/\u003e\\nNULL           ------------------------------------------------------------------------\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12714868_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714868_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/May\\/09 14:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-31T14:38:09+0000\'\u003e31\\/May\\/09 14:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I was doing some more runs on Windows with the patch because I accidentally deleted the database\\/log with the EOFException and I got a hang.   I don\'t really understand what is getting hung up though. \\nThis is with IBM 1.6 and ReproCorruptionBackgroundCheckpoint. \\n\\n 2XMFULLTHDDUMP Full thread dump J9 VM (J2RE 6.0 IBM J9 2.4 Windows XP x86-32 build jvmwi3260sr5-20090516_3558820090516_035588_lHdSMr, native threads): \\n3XMTHREADINFO      \\\"JIT Compilation Thread\\\" TID:0x41CB1900, j9thread_t:0x00292630, state:CW, prio=10 \\n3XMTHREADINFO1            (native thread ID:0x1028, native priority:0xB, native policy:UNKNOWN) \\n3XMTHREADINFO      \\\"Gc Slave Thread\\\" TID:0x4209C500, j9thread_t:0x00292FC0, state:CW, prio=5 \\n3XMTHREADINFO1            (native thread ID:0x1638, native priority:0x5, native policy:UNKNOWN) \\n3XMTHREADINFO      \\\"derby.antiGC\\\" TID:0x41ED2100, j9thread_t:0x4276259C, state:CW, prio=1 \\n3XMTHREADINFO1            (native thread ID:0x970, native priority:0x1, native policy:UNKNOWN) \\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Native Method) \\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Object.java:167) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/services\\/monitor\\/AntiGC.run(Bytecode PC:15) \\n4XESTACKTRACE          at java\\/lang\\/Thread.run(Thread.java:735) \\n3XMTHREADINFO      \\\"Thread-2\\\" TID:0x42934500, j9thread_t:0x42762A64, state:CW, prio=5 \\n3XMTHREADINFO1            (native thread ID:0x13E8, native priority:0x5, native policy:UNKNOWN) \\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Native Method) \\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Object.java:167) \\n4XESTACKTRACE          at java\\/util\\/Timer$TimerImpl.run(Timer.java:221) \\n3XMTHREADINFO      \\\"derby.rawStoreDaemon\\\" TID:0x42933300, j9thread_t:0x42762F2C, state:CW, prio=5 \\n3XMTHREADINFO1            (native thread ID:0xF30, native priority:0x5, native policy:UNKNOWN) \\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Native Method) \\n4XESTACKTRACE          at java\\/lang\\/Object.wait(Object.java:196(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/services\\/daemon\\/BasicDaemon.rest(Bytecode PC:3(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/services\\/daemon\\/BasicDaemon.run(Bytecode PC:22) \\n4XESTACKTRACE          at java\\/lang\\/Thread.run(Thread.java:735) \\n3XMTHREADINFO      \\\"Thread-6\\\" TID:0x42933900, j9thread_t:0x42763190, state:CW, prio=5 \\n3XMTHREADINFO1            (native thread ID:0x143C, native priority:0x5, native policy:UNKNOWN) \\n4XESTACKTRACE          at sun\\/nio\\/ch\\/FileChannelImpl.force0(Native Method) \\n4XESTACKTRACE          at sun\\/nio\\/ch\\/FileChannelImpl.force(FileChannelImpl.java:364(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/io\\/DirRandomAccessFile4.sync(Bytecode PC:77(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/log\\/LogToFile.syncFile(Bytecode PC:77(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/log\\/LogToFile.writeControlFile(Bytecode PC:394(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/log\\/LogToFile.checkpointWithTran(Bytecode PC:341(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/log\\/LogToFile.checkpoint(Bytecode PC:16(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/raw\\/RawStore.checkpoint(Bytecode PC:16(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/store\\/access\\/RAMAccessManager.checkpoint(Bytecode PC:16(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/db\\/BasicDatabase.checkpoint(Bytecode PC:16(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/catalog\\/SystemProcedures.SYSCS_CHECKPOINT_DATABASE(Bytecode PC:16(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/exe\\/acd381409ax0121x944ex95fex00000008ed900.g0(Bytecode PC:16(Compiled Code)) \\n4XESTACKTRACE          at sun\\/reflect\\/GeneratedMethodAccessor3.invoke(Bytecode PC:16(Compiled Code)) \\n4XESTACKTRACE          at sun\\/reflect\\/DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java(Compiled Code)) \\n4XESTACKTRACE          at java\\/lang\\/reflect\\/Method.invoke(Method.java:578(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/services\\/reflect\\/ReflectMethod.invoke(Bytecode PC:6(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/sql\\/execute\\/CallStatementResultSet.open(Bytecode PC:6(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/sql\\/GenericPreparedStatement.executeStmt(Bytecode PC:6(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/sql\\/GenericPreparedStatement.execute(Bytecode PC:4(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/jdbc\\/EmbedStatement.executeStatement(Bytecode PC:4(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/jdbc\\/EmbedStatement.execute(Bytecode PC:152(Compiled Code)) \\n4XESTACKTRACE          at org\\/apache\\/derby\\/impl\\/jdbc\\/EmbedStatement.execute(Bytecode PC:7(Compiled Code)) \\n4XESTACKTRACE          at ReproCorruptionBackgroundCheckpoint$1.run(ReproCorruptionBackgroundCheckpoint.java:97(Compiled Code)) \\n3XMTHREADINFO      \\\"DestroyJavaVM helper thread\\\" TID:0x41CB1300, j9thread_t:0x002923CC, state:CW, prio=5 \\n3XMTHREADINFO1            (native thread ID:0x808, native priority:0x5, native policy:UNKNOWN) \\nNULL           ------------------------------------------------------------------------              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12714882\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12714882&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12714882\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12714882_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714882_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/May\\/09 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-31T15:44:23+0000\'\u003e31\\/May\\/09 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am not sure what the expected behavior is of the ReproCorruptionBackgroundCheckpoint() test.   Reading \u003cbr\\/\u003e\\nthe current test it seems like it starts a thread that loops forever doing checkpoints one after another.  The\u003cbr\\/\u003e\\nstack that you posted doesn\'t seem like anything is hanging, it looks like there is a single thread actively doing\u003cbr\\/\u003e\\na checkpoint.  \u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems like the test should stop the user checkpoint thread after the main test has finished.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12714882_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714882_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/May\\/09 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-31T15:44:23+0000\'\u003e31\\/May\\/09 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am not sure what the expected behavior is of the ReproCorruptionBackgroundCheckpoint() test.   Reading  \\nthe current test it seems like it starts a thread that loops forever doing checkpoints one after another.  The \\nstack that you posted doesn\'t seem like anything is hanging, it looks like there is a single thread actively doing \\na checkpoint.   \\n\\n It seems like the test should stop the user checkpoint thread after the main test has finished.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12714887\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12714887&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12714887\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12714887_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714887_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/May\\/09 15:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-31T15:53:51+0000\'\u003e31\\/May\\/09 15:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt seems likely that \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3393\\\" title=\\\"Database corruption when adding sleep() in RAFContainer4.writePage()\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3393\\\"\u003e\u003cdel\u003eDERBY-3393\u003c\\/del\u003e\u003c\\/a\u003e is related to this.  Changing the write as is suggested in 3393 changes up the timing of checkpoints, and I can imagine that could cause the circumstances \u003cbr\\/\u003e\\nof 4239.  The errors reported do seem like redo on records that could be explained if compress\u003cbr\\/\u003e\\nhappened on them and a checkpoint was not put down properly to stop redo recovery happening\u003cbr\\/\u003e\\non them.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am going to run the 3393 case a bunch of times and if it still does not repeat probably close that\u003cbr\\/\u003e\\nerror.  If anyone can cause an error reported in 3393 after the patch for 4239 please post.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12714887_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714887_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/May\\/09 15:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-05-31T15:53:51+0000\'\u003e31\\/May\\/09 15:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It seems likely that   DERBY-3393   is related to this.  Changing the write as is suggested in 3393 changes up the timing of checkpoints, and I can imagine that could cause the circumstances  \\nof 4239.  The errors reported do seem like redo on records that could be explained if compress \\nhappened on them and a checkpoint was not put down properly to stop redo recovery happening \\non them. \\n\\n I am going to run the 3393 case a bunch of times and if it still does not repeat probably close that \\nerror.  If anyone can cause an error reported in 3393 after the patch for 4239 please post.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12714941\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12714941&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12714941\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12714941_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714941_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jun\\/09 00:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-01T00:07:36+0000\'\u003e01\\/Jun\\/09 00:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI did another thread dump and confirmed that as you suspected, it was not hung but still looping.\u003cbr\\/\u003e\\nThe thread doing the checkpoint,  is set as a daemon thread, so should have terminated when System.exit() was  called. I am not quite sure why it didn\'t with this particular run, but it doesn\'t look like a Derby issue, so I won\'t pursue it for now.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12714941_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12714941_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Jun\\/09 00:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-01T00:07:36+0000\'\u003e01\\/Jun\\/09 00:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I did another thread dump and confirmed that as you suspected, it was not hung but still looping. \\nThe thread doing the checkpoint,  is set as a daemon thread, so should have terminated when System.exit() was  called. I am not quite sure why it didn\'t with this particular run, but it doesn\'t look like a Derby issue, so I won\'t pursue it for now. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12724132\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4239?focusedCommentId=12724132&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12724132\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12724132_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12724132_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jun\\/09 15:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-25T15:41:09+0000\'\u003e25\\/Jun\\/09 15:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChanging title to be more descriptive and reflect that the problem is not z\\/OS specific.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12724132_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12724132_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jun\\/09 15:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-06-25T15:41:09+0000\'\u003e25\\/Jun\\/09 15:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Changing title to be more descriptive and reflect that the problem is not z\\/OS specific.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239737114"> 
    <input type="hidden" title="jira.request.server.time" value="217"> 
    <input type="hidden" title="jira.request.id" value="528x94402554x4"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="2"> 
    <input type="hidden" title="db.reads.time.in.ms" value="59"> 
    <input type="hidden" title="db.conns.time.in.ms" value="65"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 528x94402554x4
	          REQUEST TIMESTAMP : [05/Mar/2018:08:48:57 +0000]
	               REQUEST TIME : 0.2170
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 2

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=26, elapsedTotal=59394905, elapsedMin=410558, elapsedMax=31859777, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=30, elapsedTotal=65219722, elapsedMin=426682, elapsedMax=31899476, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>