<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|3189414830ff45db0cb0d186fbf5a16c205ac933|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"8a832afa6deea8\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-606"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-606] SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE fails on (very) large tables - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-606] SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE fails on (very) large tables - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-606">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-606" href="/jira/browse/DERBY-606" id="key-val" rel="12317695">DERBY-606</a></li>
                </ol>
                <h1 id="summary-val">SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE fails on (very) large tables</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-606"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-606/DERBY-606.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-606/DERBY-606.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-606/DERBY-606.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-606/DERBY-606.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.1.1.0 ">10.1.1.0</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.1.4" title="10.3.1.4 ">10.3.1.4</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Store" title="Store ">Store</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12317695-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value">
                     Java 1.5.0_04 on Windows Server 2003 Web Edition 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE fails with one of the following error messages when applied to a very large table (&gt;2GB):</p> 
                  <p>Log operation null encounters error writing itself out to the log stream, this could be caused by an errant log operation or internal log buffer full due to excessively large log operation. SQLSTATE: XJ001: Java exception: ': java.io.IOException'.</p> 
                  <p>or</p> 
                  <p>The exception 'java.lang.ArrayIndexOutOfBoundsException' was thrown while evaluating an expression. SQLSTATE: XJ001: Java exception: ': java.lang.ArrayIndexOutOfBoundsException'.</p> 
                  <p>In either case, no entry is written to the console log or to derby.log.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-606?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-606?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-606?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-606?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12344771" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12344771/A606Test.java" draggable="true" data-downloadurl="text/x-java:A606Test.java:https://issues.apache.org/jira/secure/attachment/12344771/A606Test.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="Java Source File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12344771/A606Test.java" title="Latest  10/Nov/06 17:10 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-java:A606Test.java:https://issues.apache.org/jira/secure/attachment/12344771/A606Test.java">A606Test.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-11-10T17:10:49.000Z">10/Nov/06 17:10</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346233" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346233/derby606_impl-v4.diff" draggable="true" data-downloadurl="text/x-patch:derby606_impl-v4.diff:https://issues.apache.org/jira/secure/attachment/12346233/derby606_impl-v4.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346233/derby606_impl-v4.diff" title="Latest  01/Dec/06 15:26 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606_impl-v4.diff:https://issues.apache.org/jira/secure/attachment/12346233/derby606_impl-v4.diff">derby606_impl-v4.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-01T15:26:00.000Z">01/Dec/06 15:26</time>
                   </dd>
                   <dd class="attachment-size">
                    21 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346321" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346321/derby606_impl-v5.diff" draggable="true" data-downloadurl="text/x-patch:derby606_impl-v5.diff:https://issues.apache.org/jira/secure/attachment/12346321/derby606_impl-v5.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346321/derby606_impl-v5.diff" title="Latest  04/Dec/06 09:23 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606_impl-v5.diff:https://issues.apache.org/jira/secure/attachment/12346321/derby606_impl-v5.diff">derby606_impl-v5.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-04T09:23:40.000Z">04/Dec/06 09:23</time>
                   </dd>
                   <dd class="attachment-size">
                    22 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346631" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346631/derby606_impl-v6.diff" draggable="true" data-downloadurl="text/x-patch:derby606_impl-v6.diff:https://issues.apache.org/jira/secure/attachment/12346631/derby606_impl-v6.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346631/derby606_impl-v6.diff" title="Latest  07/Dec/06 11:22 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606_impl-v6.diff:https://issues.apache.org/jira/secure/attachment/12346631/derby606_impl-v6.diff">derby606_impl-v6.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-07T11:22:34.000Z">07/Dec/06 11:22</time>
                   </dd>
                   <dd class="attachment-size">
                    22 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346234" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346234/derby606_upgrade-v4.diff" draggable="true" data-downloadurl="text/x-patch:derby606_upgrade-v4.diff:https://issues.apache.org/jira/secure/attachment/12346234/derby606_upgrade-v4.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346234/derby606_upgrade-v4.diff" title="Latest  01/Dec/06 15:26 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606_upgrade-v4.diff:https://issues.apache.org/jira/secure/attachment/12346234/derby606_upgrade-v4.diff">derby606_upgrade-v4.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-01T15:26:00.000Z">01/Dec/06 15:26</time>
                   </dd>
                   <dd class="attachment-size">
                    238 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346322" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346322/derby606_upgrade-v5.diff" draggable="true" data-downloadurl="text/x-patch:derby606_upgrade-v5.diff:https://issues.apache.org/jira/secure/attachment/12346322/derby606_upgrade-v5.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346322/derby606_upgrade-v5.diff" title="Latest  04/Dec/06 09:23 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606_upgrade-v5.diff:https://issues.apache.org/jira/secure/attachment/12346322/derby606_upgrade-v5.diff">derby606_upgrade-v5.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-04T09:23:40.000Z">04/Dec/06 09:23</time>
                   </dd>
                   <dd class="attachment-size">
                    239 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346693" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346693/derby606_upgrade-v6.diff" draggable="true" data-downloadurl="text/x-patch:derby606_upgrade-v6.diff:https://issues.apache.org/jira/secure/attachment/12346693/derby606_upgrade-v6.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346693/derby606_upgrade-v6.diff" title="Latest  07/Dec/06 17:52 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606_upgrade-v6.diff:https://issues.apache.org/jira/secure/attachment/12346693/derby606_upgrade-v6.diff">derby606_upgrade-v6.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-07T17:52:39.000Z">07/Dec/06 17:52</time>
                   </dd>
                   <dd class="attachment-size">
                    235 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346737" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346737/derby606_upgrade-v7.diff" draggable="true" data-downloadurl="text/x-patch:derby606_upgrade-v7.diff:https://issues.apache.org/jira/secure/attachment/12346737/derby606_upgrade-v7.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346737/derby606_upgrade-v7.diff" title="Latest  08/Dec/06 05:52 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606_upgrade-v7.diff:https://issues.apache.org/jira/secure/attachment/12346737/derby606_upgrade-v7.diff">derby606_upgrade-v7.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-08T05:52:40.000Z">08/Dec/06 05:52</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12345218" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12345218/derby606_v1.diff" draggable="true" data-downloadurl="text/x-patch:derby606_v1.diff:https://issues.apache.org/jira/secure/attachment/12345218/derby606_v1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12345218/derby606_v1.diff" title="Latest  17/Nov/06 13:23 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606_v1.diff:https://issues.apache.org/jira/secure/attachment/12345218/derby606_v1.diff">derby606_v1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-11-17T13:23:20.000Z">17/Nov/06 13:23</time>
                   </dd>
                   <dd class="attachment-size">
                    15 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12345992" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12345992/derby606-v2.diff" draggable="true" data-downloadurl="text/x-patch:derby606-v2.diff:https://issues.apache.org/jira/secure/attachment/12345992/derby606-v2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12345992/derby606-v2.diff" title="Latest  29/Nov/06 07:18 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606-v2.diff:https://issues.apache.org/jira/secure/attachment/12345992/derby606-v2.diff">derby606-v2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-11-29T07:18:18.000Z">29/Nov/06 07:18</time>
                   </dd>
                   <dd class="attachment-size">
                    40 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346186" data-issue-id="12317695" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346186/derby606-v3.diff" draggable="true" data-downloadurl="text/x-patch:derby606-v3.diff:https://issues.apache.org/jira/secure/attachment/12346186/derby606-v3.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346186/derby606-v3.diff" title="Latest  01/Dec/06 08:34 - Mayuresh Nirhali" draggable="true" data-downloadurl="text/x-patch:derby606-v3.diff:https://issues.apache.org/jira/secure/attachment/12346186/derby606-v3.diff">derby606-v3.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-01T08:34:35.000Z">01/Dec/06 08:34</time>
                   </dd>
                   <dd class="attachment-size">
                    257 kB
                   </dd>
                   <dd class="attachment-author">
                    Mayuresh Nirhali
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mayureshnirhali" rel="mayureshnirhali" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mayuresh Nirhali&quot;,&quot;emailAddress&quot;:&quot;Mayuresh.Nirhali@Sun.COM&quot;,&quot;username&quot;:&quot;mayureshnirhali&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mayureshnirhali"></span></span> Mayuresh Nirhali </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_jeff@redcondor.com" rel="jeff@redcondor.com" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Jeffrey Aguilera&quot;,&quot;emailAddress&quot;:&quot;jeff@redcondor.com&quot;,&quot;username&quot;:&quot;jeff@redcondor.com&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="jeff@redcondor.com"></span></span> Jeffrey Aguilera </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">1</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="07/Oct/05 08:08"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2005-10-07T08:08:17+0000">07/Oct/05 08:08</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="24/Jan/08 13:09"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-01-24T13:09:59+0000">24/Jan/08 13:09</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="04/Jan/07 12:36"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2007-01-04T12:36:35+0000">04/Jan/07 12:36</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-606?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-606?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12431025\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12431025&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12431025\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"skambha\\\" id=\\\"commentauthor_12431025_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=skambha\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"skambha\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Sunitha Kambhampati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12431025_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Aug\\/06 17:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-28T17:52:19+0000\'\u003e28\\/Aug\\/06 17:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI can reproduce this failure in one of my  test scenarios on a very large table:\u003cbr\\/\u003e\\nij&gt; call syscs_util.syscs_inplace_compress_table(\'APP\',\'STOCK\',1,1,1);\u003cbr\\/\u003e\\nERROR XSLB1: Log operation null encounters error writing itself out to the log stream, this could be caused by an errant log operation or internal log buffer full due to excessively large log operation.\u003cbr\\/\u003e\\nERROR XJ001: Java exception: \': java.io.IOException\'.\u003c\\/p\u003e\\n\\n\u003cp\u003estock has 60million rows. \u003c\\/p\u003e\\n\\n\u003cp\u003eschema for stock table.\u003cbr\\/\u003e\\nij&gt; create table stock (\u003cbr\\/\u003e\\n        s_i_id          int NOT NULL,\u003cbr\\/\u003e\\n        s_w_id          smallint NOT NULL,\u003cbr\\/\u003e\\n        s_quantity      int NOT NULL,\u003cbr\\/\u003e\\n        s_dist_01       char(24) NOT NULL,\u003cbr\\/\u003e\\n        s_dist_02       char(24) NOT NULL,\u003cbr\\/\u003e\\n        s_dist_03       char(24) NOT NULL,\u003cbr\\/\u003e\\n        s_dist_04       char(24) NOT NULL,\u003cbr\\/\u003e\\n        s_dist_05       char(24) NOT NULL,\u003cbr\\/\u003e\\n        s_dist_06       char(24) NOT NULL,\u003cbr\\/\u003e\\n        s_dist_07       char(24) NOT NULL,\u003cbr\\/\u003e\\n        s_dist_08       char(24) NOT NULL,\u003cbr\\/\u003e\\n        s_dist_09       char(24) NOT NULL,\u003cbr\\/\u003e\\n        s_dist_10       char(24) NOT NULL,\u003c\\/p\u003e\\n\\n\u003cp\u003e        s_ytd           decimal(8) NOT NULL,\u003cbr\\/\u003e\\n        s_order_cnt     int NOT NULL,\u003cbr\\/\u003e\\n        s_remote_cnt    int NOT NULL,\u003cbr\\/\u003e\\n        s_data          varchar(50) NOT NULL\u003cbr\\/\u003e\\n);\u003c\\/p\u003e\\n\\n\u003cp\u003eThere is no error messages in derby.log.  I\'ll try to rerun the test and run with ij.execptionTrace=true to get the entire trace. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"skambha\\\" id=\\\"commentauthor_12431025_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=skambha\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"skambha\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Sunitha Kambhampati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12431025_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Aug\\/06 17:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-28T17:52:19+0000\'\u003e28\\/Aug\\/06 17:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I can reproduce this failure in one of my  test scenarios on a very large table: \\nij&gt; call syscs_util.syscs_inplace_compress_table(\'APP\',\'STOCK\',1,1,1); \\nERROR XSLB1: Log operation null encounters error writing itself out to the log stream, this could be caused by an errant log operation or internal log buffer full due to excessively large log operation. \\nERROR XJ001: Java exception: \': java.io.IOException\'. \\n\\n stock has 60million rows.  \\n\\n schema for stock table. \\nij&gt; create table stock ( \\n        s_i_id          int NOT NULL, \\n        s_w_id          smallint NOT NULL, \\n        s_quantity      int NOT NULL, \\n        s_dist_01       char(24) NOT NULL, \\n        s_dist_02       char(24) NOT NULL, \\n        s_dist_03       char(24) NOT NULL, \\n        s_dist_04       char(24) NOT NULL, \\n        s_dist_05       char(24) NOT NULL, \\n        s_dist_06       char(24) NOT NULL, \\n        s_dist_07       char(24) NOT NULL, \\n        s_dist_08       char(24) NOT NULL, \\n        s_dist_09       char(24) NOT NULL, \\n        s_dist_10       char(24) NOT NULL, \\n\\n         s_ytd           decimal(8) NOT NULL, \\n        s_order_cnt     int NOT NULL, \\n        s_remote_cnt    int NOT NULL, \\n        s_data          varchar(50) NOT NULL \\n); \\n\\n There is no error messages in derby.log.  I\'ll try to rerun the test and run with ij.execptionTrace=true to get the entire trace.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12431280\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12431280&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12431280\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"skambha\\\" id=\\\"commentauthor_12431280_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=skambha\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"skambha\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Sunitha Kambhampati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12431280_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Aug\\/06 16:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-29T16:01:45+0000\'\u003e29\\/Aug\\/06 16:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is the stacktrace:\u003cbr\\/\u003e\\nij version 10.2\u003cbr\\/\u003e\\nij&gt; connect \'jdbc:derby:dbtpcc\';\u003cbr\\/\u003e\\nij&gt; call syscs_util.syscs_inplace_compress_table(\'APP\',\'STOCK\',1,1,1);\u003cbr\\/\u003e\\nERROR XSLB1: Log operation null encounters error writing itself out to the log stream, this could be caused by an errant log operation or internal log buffer full due to excessively large log operation.\u003cbr\\/\u003e\\nERROR XSLB1: Log operation null encounters error writing itself out to the log stream, this could be caused by an errant log operation or internal log buffer full due to excessively large log operation.\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.error.StandardException.newException(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.FileLogger.logAndDo(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.xact.Xact.logAndDo(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.LoggableAllocActions.actionCompressSpaceOperation(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.AllocExtent.compress(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.AllocPage.compress(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.FileContainer.compressContainer(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.BaseContainer.compressContainer(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.BaseContainerHandle.compressContainer(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.heap.Heap.compressConglomerate(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.RAMTransaction.compressConglomerate(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.db.OnlineCompress.truncateEnd(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.db.OnlineCompress.compressTable(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.catalog.SystemProcedures.SYSCS_INPLACE_COMPRESS_TABLE(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.exe.ac601a400fx010dx55efx588dx0000001d75e80.g0(Unknown Source)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\u003cbr\\/\u003e\\n\\tat java.lang.reflect.Method.invoke(Method.java:391)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.reflect.ReflectMethod.invoke(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.CallStatementResultSet.open(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main14.main(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.tools.ij.main(Unknown Source)\u003cbr\\/\u003e\\nERROR XJ001: Java exception: \': java.io.IOException\'.\u003cbr\\/\u003e\\njava.io.IOException\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.CompressedNumber.writeInt(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.CompressSpacePageOperation.writeExternal(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdOutputStream.writeObject(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.LogRecord.writeExternal(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.services.io.FormatIdOutputStream.writeObject(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.log.FileLogger.logAndDo(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.xact.Xact.logAndDo(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.LoggableAllocActions.actionCompressSpaceOperation(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.AllocExtent.compress(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.AllocPage.compress(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.FileContainer.compressContainer(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.BaseContainer.compressContainer(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.raw.data.BaseContainerHandle.compressContainer(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.heap.Heap.compressConglomerate(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.store.access.RAMTransaction.compressConglomerate(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.db.OnlineCompress.truncateEnd(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.iapi.db.OnlineCompress.compressTable(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.catalog.SystemProcedures.SYSCS_INPLACE_COMPRESS_TABLE(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.exe.ac601a400fx010dx55efx588dx0000001d75e80.g0(Unknown Source)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)\u003cbr\\/\u003e\\n\\tat java.lang.reflect.Method.invoke(Method.java:391)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.services.reflect.ReflectMethod.invoke(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.execute.CallStatementResultSet.open(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.go(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.tools.ij.Main14.main(Unknown Source)\u003cbr\\/\u003e\\n\\tat org.apache.derby.tools.ij.main(Unknown Source)\u003cbr\\/\u003e\\nij&gt; exit;\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"skambha\\\" id=\\\"commentauthor_12431280_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=skambha\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"skambha\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Sunitha Kambhampati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12431280_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Aug\\/06 16:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-29T16:01:45+0000\'\u003e29\\/Aug\\/06 16:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is the stacktrace: \\nij version 10.2 \\nij&gt; connect \'jdbc:derby:dbtpcc\'; \\nij&gt; call syscs_util.syscs_inplace_compress_table(\'APP\',\'STOCK\',1,1,1); \\nERROR XSLB1: Log operation null encounters error writing itself out to the log stream, this could be caused by an errant log operation or internal log buffer full due to excessively large log operation. \\nERROR XSLB1: Log operation null encounters error writing itself out to the log stream, this could be caused by an errant log operation or internal log buffer full due to excessively large log operation. \\n\\tat org.apache.derby.iapi.error.StandardException.newException(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.log.FileLogger.logAndDo(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.xact.Xact.logAndDo(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.LoggableAllocActions.actionCompressSpaceOperation(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.AllocExtent.compress(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.AllocPage.compress(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.FileContainer.compressContainer(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.BaseContainer.compressContainer(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.BaseContainerHandle.compressContainer(Unknown Source) \\n\\tat org.apache.derby.impl.store.access.heap.Heap.compressConglomerate(Unknown Source) \\n\\tat org.apache.derby.impl.store.access.RAMTransaction.compressConglomerate(Unknown Source) \\n\\tat org.apache.derby.iapi.db.OnlineCompress.truncateEnd(Unknown Source) \\n\\tat org.apache.derby.iapi.db.OnlineCompress.compressTable(Unknown Source) \\n\\tat org.apache.derby.catalog.SystemProcedures.SYSCS_INPLACE_COMPRESS_TABLE(Unknown Source) \\n\\tat org.apache.derby.exe.ac601a400fx010dx55efx588dx0000001d75e80.g0(Unknown Source) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60) \\n\\tat java.lang.reflect.Method.invoke(Method.java:391) \\n\\tat org.apache.derby.impl.services.reflect.ReflectMethod.invoke(Unknown Source) \\n\\tat org.apache.derby.impl.sql.execute.CallStatementResultSet.open(Unknown Source) \\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.Main.go(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.Main14.main(Unknown Source) \\n\\tat org.apache.derby.tools.ij.main(Unknown Source) \\nERROR XJ001: Java exception: \': java.io.IOException\'. \\njava.io.IOException \\n\\tat org.apache.derby.iapi.services.io.CompressedNumber.writeInt(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.CompressSpacePageOperation.writeExternal(Unknown Source) \\n\\tat org.apache.derby.iapi.services.io.FormatIdOutputStream.writeObject(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.log.LogRecord.writeExternal(Unknown Source) \\n\\tat org.apache.derby.iapi.services.io.FormatIdOutputStream.writeObject(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.log.FileLogger.logAndDo(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.xact.Xact.logAndDo(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.LoggableAllocActions.actionCompressSpaceOperation(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.AllocExtent.compress(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.AllocPage.compress(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.FileContainer.compressContainer(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.BaseContainer.compressContainer(Unknown Source) \\n\\tat org.apache.derby.impl.store.raw.data.BaseContainerHandle.compressContainer(Unknown Source) \\n\\tat org.apache.derby.impl.store.access.heap.Heap.compressConglomerate(Unknown Source) \\n\\tat org.apache.derby.impl.store.access.RAMTransaction.compressConglomerate(Unknown Source) \\n\\tat org.apache.derby.iapi.db.OnlineCompress.truncateEnd(Unknown Source) \\n\\tat org.apache.derby.iapi.db.OnlineCompress.compressTable(Unknown Source) \\n\\tat org.apache.derby.catalog.SystemProcedures.SYSCS_INPLACE_COMPRESS_TABLE(Unknown Source) \\n\\tat org.apache.derby.exe.ac601a400fx010dx55efx588dx0000001d75e80.g0(Unknown Source) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60) \\n\\tat java.lang.reflect.Method.invoke(Method.java:391) \\n\\tat org.apache.derby.impl.services.reflect.ReflectMethod.invoke(Unknown Source) \\n\\tat org.apache.derby.impl.sql.execute.CallStatementResultSet.open(Unknown Source) \\n\\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source) \\n\\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.utilMain.go(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.Main.go(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.Main.mainCore(Unknown Source) \\n\\tat org.apache.derby.impl.tools.ij.Main14.main(Unknown Source) \\n\\tat org.apache.derby.tools.ij.main(Unknown Source) \\nij&gt; exit;              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12440827\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12440827&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12440827\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12440827_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12440827_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/06 08:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-10-09T08:34:40+0000\'\u003e09\\/Oct\\/06 08:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI was able to reproduce this error.\u003cbr\\/\u003e\\nI am working with 30 million rows of schema mentioned in the previous comments. Total size of the DB is about 12 GB.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am also able to reproduce this issue by just setting the truncate bit (\'APP\', \'TEST\', 0, 0, 1). here, I am not sure if this has any dependency on the previous runs of Defragment operation, as I am working with the same DB setup. But, just setting the truncate bit is convinient and faster to debug the scenario.\u003c\\/p\u003e\\n\\n\u003cp\u003eOn further investigation, It was found that while Allocated Extent associated with last allocated page is being compressed, All the pages are found to be free, thus new_highest_page is set to \'-1\'. Now, when the CompressSpaceOperation is being logged CompressedNumber.writeInt method is called with value -1. This method is written to throw exception if the value is less than Zero, hence the IOException occurs.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn my opinion, Having a scenario with new_highest_page set to -1 is valid and in such a case there should not be any issue logging such operation. But, I am no expert in the Store module and would like to  know If this assumption is wrong or if I am missing something. If I am on the right track then the fix would be to update CompressedNumber.writeInt method to handle *valid negative values.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12440827_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12440827_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/06 08:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-10-09T08:34:40+0000\'\u003e09\\/Oct\\/06 08:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I was able to reproduce this error. \\nI am working with 30 million rows of schema mentioned in the previous comments. Total size of the DB is about 12 GB. \\n\\n I am also able to reproduce this issue by just setting the truncate bit (\'APP\', \'TEST\', 0, 0, 1). here, I am not sure if this has any dependency on the previous runs of Defragment operation, as I am working with the same DB setup. But, just setting the truncate bit is convinient and faster to debug the scenario. \\n\\n On further investigation, It was found that while Allocated Extent associated with last allocated page is being compressed, All the pages are found to be free, thus new_highest_page is set to \'-1\'. Now, when the CompressSpaceOperation is being logged CompressedNumber.writeInt method is called with value -1. This method is written to throw exception if the value is less than Zero, hence the IOException occurs. \\n\\n In my opinion, Having a scenario with new_highest_page set to -1 is valid and in such a case there should not be any issue logging such operation. But, I am no expert in the Store module and would like to  know If this assumption is wrong or if I am missing something. If I am on the right track then the fix would be to update CompressedNumber.writeInt method to handle *valid negative values.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12448803\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12448803&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12448803\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12448803_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12448803_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Nov\\/06 17:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-10T17:10:49+0000\'\u003e10\\/Nov\\/06 17:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a repro for this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe idea for reproduction is to create a table with large number of records and delete most of them so that atleast the last AllocExtent  is empty and then attempt to do a inplace_compress. This demonstrates the scenario of compressing AllocExtent with new_highest_page = -1.\u003c\\/p\u003e\\n\\n\u003cp\u003eI would like to add this testcase to the existing suite. Any thoughts on which suite would be the most appropriate for such case and if there is any existing test which I can extend to include this case instead ??\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12448803_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12448803_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Nov\\/06 17:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-10T17:10:49+0000\'\u003e10\\/Nov\\/06 17:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a repro for this issue. \\n\\n The idea for reproduction is to create a table with large number of records and delete most of them so that atleast the last AllocExtent  is empty and then attempt to do a inplace_compress. This demonstrates the scenario of compressing AllocExtent with new_highest_page = -1. \\n\\n I would like to add this testcase to the existing suite. Any thoughts on which suite would be the most appropriate for such case and if there is any existing test which I can extend to include this case instead ??              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12448813\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12448813&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12448813\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12448813_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12448813_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Nov\\/06 18:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-10T18:08:57+0000\'\u003e10\\/Nov\\/06 18:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDo you know how you are going to fix this issue, definitely consider upgrade implications of any change made.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think any change to allow CompressedNumber to write a negative number is likely not going to be backward\u003cbr\\/\u003e\\ncompatible - now maybe that does not matter as any attempt to write a negative number with it, is already a bug.\u003cbr\\/\u003e\\nThe bit patterns for the compressed number representation are pretty carefully chosen assuming non-negative\u003cbr\\/\u003e\\nnumbers.  This code is used extensively in every row\\/column on disk in the database, so requiring a hard \u003cbr\\/\u003e\\nupgrade of the format is a large issue.\u003c\\/p\u003e\\n\\n\u003cp\u003ea few easier paths:\u003cbr\\/\u003e\\n1) rewrite the log format for the record to not compress the numbers.  The space doesn\'t really matter as it doesn\'t happen very much.  As this would be a new log format it should be handled under hard upgrade.  The bug would\u003cbr\\/\u003e\\nnot be fixed under soft upgrade.  Probably should throw an error earlier if you see a negative number under\u003cbr\\/\u003e\\nsoft upgrade.  If we could set back time on the db this would seem the natural fix.  Or maybe if you are soft \u003cbr\\/\u003e\\nupgrade you change the -1 to be the last page in the conglomerate, which would mean in this special case\u003cbr\\/\u003e\\nthe code would think there was a free page when we know there aren\'t any, but this is only a hint anyway.  \u003cbr\\/\u003e\\nIf you go this route look at the upgrade tests and add a case for both soft and hard upgrade in 10.3.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) change the conglomerate code to not generate negative numbers, maybe use something like maxint or maxlong.  This will of course require looking at all the code that currently checks for -1.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12448813_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12448813_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Nov\\/06 18:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-10T18:08:57+0000\'\u003e10\\/Nov\\/06 18:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Do you know how you are going to fix this issue, definitely consider upgrade implications of any change made. \\n\\n I think any change to allow CompressedNumber to write a negative number is likely not going to be backward \\ncompatible - now maybe that does not matter as any attempt to write a negative number with it, is already a bug. \\nThe bit patterns for the compressed number representation are pretty carefully chosen assuming non-negative \\nnumbers.  This code is used extensively in every row\\/column on disk in the database, so requiring a hard  \\nupgrade of the format is a large issue. \\n\\n a few easier paths: \\n1) rewrite the log format for the record to not compress the numbers.  The space doesn\'t really matter as it doesn\'t happen very much.  As this would be a new log format it should be handled under hard upgrade.  The bug would \\nnot be fixed under soft upgrade.  Probably should throw an error earlier if you see a negative number under \\nsoft upgrade.  If we could set back time on the db this would seem the natural fix.  Or maybe if you are soft  \\nupgrade you change the -1 to be the last page in the conglomerate, which would mean in this special case \\nthe code would think there was a free page when we know there aren\'t any, but this is only a hint anyway.   \\nIf you go this route look at the upgrade tests and add a case for both soft and hard upgrade in 10.3. \\n\\n 2) change the conglomerate code to not generate negative numbers, maybe use something like maxint or maxlong.  This will of course require looking at all the code that currently checks for -1.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12449683\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12449683&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12449683\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12449683_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12449683_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/06 15:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-14T15:19:27+0000\'\u003e14\\/Nov\\/06 15:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks mike for looking into this and also for the valuable suggestions. They were really helpful to put me in the right direction while I am working on this fix. and sorry, I could not write sooner.\u003c\\/p\u003e\\n\\n\u003cp\u003eI realized that changing CompressedNumber to write negative values will not be appropriate, after looking at the bit patterns. That is for 2 reasons. 1, Need for hard upgrade and 2, the only possible negative value written by CompressedNumber is newHighestPage. So, It is not worth the effort of making it write negative\u003cbr\\/\u003e\\nvalues.\u003c\\/p\u003e\\n\\n\u003cp\u003eSince this is a special case which is true only for CompressSpaceOperation, I was wondering if this can be handled by write\\/readExternal methods of CompressSpaceOperation itself. When log record is written for this case, a positive value is passed to the log and when it is read back, it is identified to be the correct value. Choosing this positive value would be very critical, I was thinking of Integer.MAX_VALUE. Please let me know if there are any sideaffects of this approach.\u003cbr\\/\u003e\\nThis can be considered for handling the soft upgrade mode case as well.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am also looking into your suggestions. Is it accepted to change the Log format of record only for one particular operation by not compressing the numbers or did you mean to not compress the numbers for all the operations ??\u003c\\/p\u003e\\n\\n\u003cp\u003eI can extend the upgradetests based on the approach we agree upon. although, I havent had a chance to look at those tests yet.\u003cbr\\/\u003e\\nI would appreciate any more comments on this. Thanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12449683_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12449683_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/06 15:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-14T15:19:27+0000\'\u003e14\\/Nov\\/06 15:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks mike for looking into this and also for the valuable suggestions. They were really helpful to put me in the right direction while I am working on this fix. and sorry, I could not write sooner. \\n\\n I realized that changing CompressedNumber to write negative values will not be appropriate, after looking at the bit patterns. That is for 2 reasons. 1, Need for hard upgrade and 2, the only possible negative value written by CompressedNumber is newHighestPage. So, It is not worth the effort of making it write negative \\nvalues. \\n\\n Since this is a special case which is true only for CompressSpaceOperation, I was wondering if this can be handled by write\\/readExternal methods of CompressSpaceOperation itself. When log record is written for this case, a positive value is passed to the log and when it is read back, it is identified to be the correct value. Choosing this positive value would be very critical, I was thinking of Integer.MAX_VALUE. Please let me know if there are any sideaffects of this approach. \\nThis can be considered for handling the soft upgrade mode case as well. \\n\\n I am also looking into your suggestions. Is it accepted to change the Log format of record only for one particular operation by not compressing the numbers or did you mean to not compress the numbers for all the operations ?? \\n\\n I can extend the upgradetests based on the approach we agree upon. although, I havent had a chance to look at those tests yet. \\nI would appreciate any more comments on this. Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12449751\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12449751&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12449751\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12449751_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12449751_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/06 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-14T19:45:20+0000\'\u003e14\\/Nov\\/06 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eo my suggestion was to only change what this log record wrote, not all log records that used compressed number.  If you are going to change the format of what is written, then it seems simpler to just write the number uncompressed than to add an extra decoding.\u003cbr\\/\u003e\\nNote \\\"change\\\" the format is not really allowed.  What you need to do is support the old log record\u003cbr\\/\u003e\\nand add a new log record which has the changed format.  For soft upgrade you need to always read\\/write\u003cbr\\/\u003e\\nthe old log record.  For hard upgrade you need to write new format and be able to read both old and new log\u003cbr\\/\u003e\\nrecord, once you have hard upgraded you don\'t have to worry about older versions of the software encountering\u003cbr\\/\u003e\\nthis unknown new log record.\u003cbr\\/\u003e\\no note if you choose a fix which in any way alters what is written, I think you basically have to add a new log record\u003cbr\\/\u003e\\nin case of hard upgrade (and bug will continue to exist in soft upgrade).  \u003cbr\\/\u003e\\nYou can save copying code by having the new log record extend the existing one and just update the \u003cbr\\/\u003e\\ngetTypeFormatId(), readExternal(), writeExternal() routines.  This way soft upgrade can still read\\/write the old\u003cbr\\/\u003e\\nrecord.  Need some code to write the new vs. the old one in case of hard upgrade.  \u003cbr\\/\u003e\\no if you decide you want to look at runtime fix vs. log record fix let me know and maybe I can give some pointers.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12449751_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12449751_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/06 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-14T19:45:20+0000\'\u003e14\\/Nov\\/06 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    o my suggestion was to only change what this log record wrote, not all log records that used compressed number.  If you are going to change the format of what is written, then it seems simpler to just write the number uncompressed than to add an extra decoding. \\nNote \\\"change\\\" the format is not really allowed.  What you need to do is support the old log record \\nand add a new log record which has the changed format.  For soft upgrade you need to always read\\/write \\nthe old log record.  For hard upgrade you need to write new format and be able to read both old and new log \\nrecord, once you have hard upgraded you don\'t have to worry about older versions of the software encountering \\nthis unknown new log record. \\no note if you choose a fix which in any way alters what is written, I think you basically have to add a new log record \\nin case of hard upgrade (and bug will continue to exist in soft upgrade).   \\nYou can save copying code by having the new log record extend the existing one and just update the  \\ngetTypeFormatId(), readExternal(), writeExternal() routines.  This way soft upgrade can still read\\/write the old \\nrecord.  Need some code to write the new vs. the old one in case of hard upgrade.   \\no if you decide you want to look at runtime fix vs. log record fix let me know and maybe I can give some pointers.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12449853\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12449853&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12449853\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12449853_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12449853_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/06 23:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-14T23:01:41+0000\'\u003e14\\/Nov\\/06 23:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCan this problem be soved by writing a different log records for this special case ?   If the rest of system is working fine with the current assumption that negative numbers are not be written to the log. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003e-suresh\u003c\\/p\u003e\\n\\n\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12449853_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12449853_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Nov\\/06 23:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-14T23:01:41+0000\'\u003e14\\/Nov\\/06 23:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Can this problem be soved by writing a different log records for this special case ?   If the rest of system is working fine with the current assumption that negative numbers are not be written to the log.  \\n\\n\\n -suresh \\n\\n\\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12450071\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12450071&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12450071\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12450071_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450071_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/06 15:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-15T15:39:41+0000\'\u003e15\\/Nov\\/06 15:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Mike and Suresh.\u003c\\/p\u003e\\n\\n\u003cp\u003eYes. It makes sense to only change the log record format for this special case.\u003c\\/p\u003e\\n\\n\u003cp\u003eLooking at possible runtime fix, I feel, this approach would create some Major-Minor version checks in write\\/readExternal methods which would not be ideal. Approach of Extending the class would make the changes much simpler.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, currently this is what I have in mind. CompressSpacePageOperation will be extended to form a new class CompressSpacePageOperation10_3. This class over override readExternal, writeExternal and getTypeFormatId methods. read\\/writeExternal methods would write the new_highest_page field without compression and the other fields are compressed and written to the Log. A new ID StoreFormatIds.LOGOP_COMPRESS10_3_SPACE is created.\u003c\\/p\u003e\\n\\n\u003cp\u003eNow, when LOggableAllocActions creates CompressSpacePageOperation, a new check will be added to identify whether this is a soft or hard upgrade. The only way to do this is by calling LogToFile.checkVersion(Major, Minor). Based on the flag returned either the old CompressSpacePageOperation or the new one will be called. LogFactory is not accessible at this level in the code and hence calling checkVersion is not possible. Xact has no interface to get XContext so there isnt any way to reach LogFactory. I need some inputs here.\u003cbr\\/\u003e\\n------\u003cbr\\/\u003e\\nWhile investigating, I also realized that even if you write the record with newHighestPage set to -1, the log is written successfully but the transaction does not commit because AllocPage.compressSpace has an assertion (only in DEBUG mode btw) which checks if the newHighestPage is not positive. Thus an Exception is thrown. I think this assertion check is invalid. Also it causes inconsistency in the behavior between sane-insane builds as it only happens when SanityManager.DEBUG is true. Will it be okay to remove this assertion ?\u003c\\/p\u003e\\n\\n\u003chr \\/\u003e\\n\u003cp\u003eLastly, If the compress space operation involving data pages spanned across multiple AllocExtents (which is the current case), the compress operation happens only on the last page. Ideally, it should clean up the last AllocPage (with referred datapages) and also clean up data pages which might be empty in the previous AllocationExtent. I realized this when I saw a very small decrease in physical size when I ran the reproducible testcase. Can someone please confirm this ?? So, I can file a JIRA for this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12450071_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450071_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Nov\\/06 15:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-15T15:39:41+0000\'\u003e15\\/Nov\\/06 15:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Mike and Suresh. \\n\\n Yes. It makes sense to only change the log record format for this special case. \\n\\n Looking at possible runtime fix, I feel, this approach would create some Major-Minor version checks in write\\/readExternal methods which would not be ideal. Approach of Extending the class would make the changes much simpler. \\n\\n So, currently this is what I have in mind. CompressSpacePageOperation will be extended to form a new class CompressSpacePageOperation10_3. This class over override readExternal, writeExternal and getTypeFormatId methods. read\\/writeExternal methods would write the new_highest_page field without compression and the other fields are compressed and written to the Log. A new ID StoreFormatIds.LOGOP_COMPRESS10_3_SPACE is created. \\n\\n Now, when LOggableAllocActions creates CompressSpacePageOperation, a new check will be added to identify whether this is a soft or hard upgrade. The only way to do this is by calling LogToFile.checkVersion(Major, Minor). Based on the flag returned either the old CompressSpacePageOperation or the new one will be called. LogFactory is not accessible at this level in the code and hence calling checkVersion is not possible. Xact has no interface to get XContext so there isnt any way to reach LogFactory. I need some inputs here. \\n------ \\nWhile investigating, I also realized that even if you write the record with newHighestPage set to -1, the log is written successfully but the transaction does not commit because AllocPage.compressSpace has an assertion (only in DEBUG mode btw) which checks if the newHighestPage is not positive. Thus an Exception is thrown. I think this assertion check is invalid. Also it causes inconsistency in the behavior between sane-insane builds as it only happens when SanityManager.DEBUG is true. Will it be okay to remove this assertion ? \\n\\n \\n Lastly, If the compress space operation involving data pages spanned across multiple AllocExtents (which is the current case), the compress operation happens only on the last page. Ideally, it should clean up the last AllocPage (with referred datapages) and also clean up data pages which might be empty in the previous AllocationExtent. I realized this when I saw a very small decrease in physical size when I ran the reproducible testcase. Can someone please confirm this ?? So, I can file a JIRA for this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12450263\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12450263&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12450263\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12450263_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450263_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/06 02:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-16T02:52:43+0000\'\u003e16\\/Nov\\/06 02:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI agree with you , it might be trickey to  check  db versions especially on  a readExpternal() call.   It would be nice to avoid creating another class.  Hopefully some one on the list some has  ideas to do that. \u003c\\/p\u003e\\n\\n\u003cp\u003eIf you would like to proceed with a new class approach.  It would be better to make the new class handle \u003cbr\\/\u003e\\nthe old behavior . i.e   create a new class  CompressSpacePageOperation_V10_2  that extends the    CompressSpacePageOperation  and  change the format id for  the  CompressSpacePageOperation  class to  a new one.   This way it is easier to read the code,  and remove the _v0 class later   when upgrade  is not supported from old version. \u003c\\/p\u003e\\n\\n\u003cp\u003eLooks like  assertion check is incorrect  in the case you mentioned,   please  fix it.   I would  not call the assertion code under debug is  in-consistent  with insane-builds unless  behaviour is different.  In debug builds it  is  normal to do some extra checks ,  they are useful   to get some information   when stress tests fail after  a few days run. \u003c\\/p\u003e\\n\\n\u003cp\u003eactionCompressSpaceOperation() in   LoggableAllocaction  has  RawTransaction   as argument. \u003cbr\\/\u003e\\nIt would be ok  to  expose the checkVersion method from logFactory  to RawTransaction,  Concrete implementation of     RawTransaction   abstract  class ,   raw\\/xact\\/Xact.java  already  has the logFactory information. \u003c\\/p\u003e\\n\\n\u003cp\u003eI would expect   compress operation to  work even if there are  multiple  alloc pages, .may  be there is bug some where ; please file a JIRA. \u003c\\/p\u003e\\n\\n\u003cp\u003eThanks \u003cbr\\/\u003e\\n-suresh\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12450263_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450263_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/06 02:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-16T02:52:43+0000\'\u003e16\\/Nov\\/06 02:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I agree with you , it might be trickey to  check  db versions especially on  a readExpternal() call.   It would be nice to avoid creating another class.  Hopefully some one on the list some has  ideas to do that.  \\n\\n If you would like to proceed with a new class approach.  It would be better to make the new class handle  \\nthe old behavior . i.e   create a new class  CompressSpacePageOperation_V10_2  that extends the    CompressSpacePageOperation  and  change the format id for  the  CompressSpacePageOperation  class to  a new one.   This way it is easier to read the code,  and remove the _v0 class later   when upgrade  is not supported from old version.  \\n\\n Looks like  assertion check is incorrect  in the case you mentioned,   please  fix it.   I would  not call the assertion code under debug is  in-consistent  with insane-builds unless  behaviour is different.  In debug builds it  is  normal to do some extra checks ,  they are useful   to get some information   when stress tests fail after  a few days run.  \\n\\n actionCompressSpaceOperation() in   LoggableAllocaction  has  RawTransaction   as argument.  \\nIt would be ok  to  expose the checkVersion method from logFactory  to RawTransaction,  Concrete implementation of     RawTransaction   abstract  class ,   raw\\/xact\\/Xact.java  already  has the logFactory information.  \\n\\n I would expect   compress operation to  work even if there are  multiple  alloc pages, .may  be there is bug some where ; please file a JIRA.  \\n\\n Thanks  \\n-suresh \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12450437\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12450437&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12450437\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12450437_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450437_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/06 16:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-16T16:00:58+0000\'\u003e16\\/Nov\\/06 16:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Suresh for your comments.\u003c\\/p\u003e\\n\\n\u003cp\u003eI got a little further with the additional Class approach and as you mentioned I had to create another child of CompressSpacePageOperation that will behave just like the original one was until now. But, The new class will still use the typeFormatId of the base class.\u003cbr\\/\u003e\\nI also added another method in RawTransaction that returns LogFactory and with this the DB versio checks are made in LoggableAllocActions, thanks for this suggestion. I hope this will be useful in the future as well. The assertion is still kept, but modified to handle -1 value.\u003c\\/p\u003e\\n\\n\u003cp\u003ehaving said that, I will be glad to consider any other approach than creating these child classes. But, the approach of doing db versions checks in read\\/write methods, I believe, isnt a good option.\u003c\\/p\u003e\\n\\n\u003cp\u003eI shall move onto extending OnlineCompressTest to cover this case.\u003cbr\\/\u003e\\nI am currently running derbyall with my patch and shall attach it soon.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12450437_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450437_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/06 16:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-16T16:00:58+0000\'\u003e16\\/Nov\\/06 16:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Suresh for your comments. \\n\\n I got a little further with the additional Class approach and as you mentioned I had to create another child of CompressSpacePageOperation that will behave just like the original one was until now. But, The new class will still use the typeFormatId of the base class. \\nI also added another method in RawTransaction that returns LogFactory and with this the DB versio checks are made in LoggableAllocActions, thanks for this suggestion. I hope this will be useful in the future as well. The assertion is still kept, but modified to handle -1 value. \\n\\n having said that, I will be glad to consider any other approach than creating these child classes. But, the approach of doing db versions checks in read\\/write methods, I believe, isnt a good option. \\n\\n I shall move onto extending OnlineCompressTest to cover this case. \\nI am currently running derbyall with my patch and shall attach it soon. \\n\\n\\n Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12450734\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12450734&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12450734\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12450734_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450734_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/06 13:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-17T13:23:20+0000\'\u003e17\\/Nov\\/06 13:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am attaching a preliminary patch. This does not include changes to upgradeTest and also the repro is not added to the testsuite yet. But, This is a initial proposal for the fix for the bug and the fix in itself is complete.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have ran derbyall and junit tests and have not seen any relevant new failures.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs mentioned in my earlier comments, this fix adds two new classes and some code changes to support that. Also, it adds a new interface in RawTrans to expose to LogFactory. \u003cbr\\/\u003e\\nI would appreciate review comments on this.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12450734_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450734_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/06 13:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-17T13:23:20+0000\'\u003e17\\/Nov\\/06 13:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am attaching a preliminary patch. This does not include changes to upgradeTest and also the repro is not added to the testsuite yet. But, This is a initial proposal for the fix for the bug and the fix in itself is complete. \\n\\n I have ran derbyall and junit tests and have not seen any relevant new failures. \\n\\n As mentioned in my earlier comments, this fix adds two new classes and some code changes to support that. Also, it adds a new interface in RawTrans to expose to LogFactory.  \\nI would appreciate review comments on this. \\n\\n Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12450785\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12450785&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12450785\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12450785_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450785_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/06 16:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-17T16:42:51+0000\'\u003e17\\/Nov\\/06 16:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI looked at the OnlineCompressTest and realized that to reproduce this case, the simplest way is to increase the number of rows added to the table in one of the existing testcases. However, I see a following comment in the testcase,\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;snip&gt;\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e4000 rows  - reasonable number of pages to test out, still 1 alloc page\u003cbr\\/\u003e\\n     *\u003c\\/li\u003e\\n\\t\u003cli\u003enote that row numbers greater than 4000 may lead to lock escalation\u003c\\/li\u003e\\n\\t\u003cli\u003eissues, if queries like \\\"delete from x\\\" are used to delete all the\u003c\\/li\u003e\\n\\t\u003cli\u003erows.\u003cbr\\/\u003e\\n&lt;\\/snip&gt;\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThis is very relevant to the testcase which I would like to add and so, would like to know the Lock Escalation issue here. Has anyone seen this kind of issue before ? any pointers ??\u003c\\/p\u003e\\n\\n\u003cp\u003eThe repro attached to the bug has almost similar testcase, I have not seen any problems with that so far. So, it might be that the Lock Escalation issue has already been fixed. (I did not find any related JIRA for this though). Can someone please confirm this ?? I can update the comments if that problem has been fixed.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12450785_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12450785_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/06 16:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-17T16:42:51+0000\'\u003e17\\/Nov\\/06 16:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I looked at the OnlineCompressTest and realized that to reproduce this case, the simplest way is to increase the number of rows added to the table in one of the existing testcases. However, I see a following comment in the testcase, \\n\\n &lt;snip&gt; \\n \\n\\t 4000 rows  - reasonable number of pages to test out, still 1 alloc page \\n     * \\n\\t note that row numbers greater than 4000 may lead to lock escalation \\n\\t issues, if queries like \\\"delete from x\\\" are used to delete all the \\n\\t rows. \\n&lt;\\/snip&gt; \\n \\n\\n\\n This is very relevant to the testcase which I would like to add and so, would like to know the Lock Escalation issue here. Has anyone seen this kind of issue before ? any pointers ?? \\n\\n The repro attached to the bug has almost similar testcase, I have not seen any problems with that so far. So, it might be that the Lock Escalation issue has already been fixed. (I did not find any related JIRA for this though). Can someone please confirm this ?? I can update the comments if that problem has been fixed. \\n\\n Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454241\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12454241&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454241\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12454241_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454241_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/06 07:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-29T07:18:18+0000\'\u003e29\\/Nov\\/06 07:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching next version of patch. This patch now includes changes to the OnlineCompressTest and UpgradeTest.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have created Upgrade_10_2_10_3, but it is not currently included in the upgrade.runall, because the 10.2 binaries are not available in the trunk for upgrade testing.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch has grown more than what I had imagined. I would really appreciate review comments.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12454241_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454241_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/06 07:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-29T07:18:18+0000\'\u003e29\\/Nov\\/06 07:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching next version of patch. This patch now includes changes to the OnlineCompressTest and UpgradeTest. \\n\\n I have created Upgrade_10_2_10_3, but it is not currently included in the upgrade.runall, because the 10.2 binaries are not available in the trunk for upgrade testing. \\n\\n The patch has grown more than what I had imagined. I would really appreciate review comments.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454250\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12454250&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454250\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12454250_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454250_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/06 08:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-29T08:08:11+0000\'\u003e29\\/Nov\\/06 08:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe 10.2.1.6 jars are checked into the repository and available at \u003ca href=\\\"http:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/jars\\/10.2.1.6\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/jars\\/10.2.1.6\\/\u003c\\/a\u003e. To add them to a trunk checkout, execute the following from the top of a checkout of the trunk:\u003c\\/p\u003e\\n\\n\u003cp\u003esvn pe svn:externals tools\\/testing\u003c\\/p\u003e\\n\\n\u003cp\u003eand then add a line for the 10.2 jars, e.g.:\u003c\\/p\u003e\\n\\n\u003cp\u003ederby\\/10.2 \u003ca href=\\\"https:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/jars\\/10.2.1.6\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/jars\\/10.2.1.6\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThe next time you do an svn update, the 10.2.1.6 jars will be checked out to tools\\/testing\\/derby\\/10.2\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12454250_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454250_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/06 08:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-29T08:08:11+0000\'\u003e29\\/Nov\\/06 08:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The 10.2.1.6 jars are checked into the repository and available at  http:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/jars\\/10.2.1.6\\/ . To add them to a trunk checkout, execute the following from the top of a checkout of the trunk: \\n\\n svn pe svn:externals tools\\/testing \\n\\n and then add a line for the 10.2 jars, e.g.: \\n\\n derby\\/10.2  https:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/jars\\/10.2.1.6  \\n\\n The next time you do an svn update, the 10.2.1.6 jars will be checked out to tools\\/testing\\/derby\\/10.2              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454827\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12454827&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454827\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12454827_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454827_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 08:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T08:06:03+0000\'\u003e01\\/Dec\\/06 08:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for working on this issue. Patch looks good , i have only few minor comments. \u003c\\/p\u003e\\n\\n\u003cp\u003e1) Two new classes CompressSpacePageOperation10_2.java and\u003cbr\\/\u003e\\nCompressSpacePageOperation10_3.java may not be required. I think CompressSpacePageOperation.java  \u003cbr\\/\u003e\\ncan be modified to handle the new 10.3\\/10.2 behavior and create one new class\u003cbr\\/\u003e\\nCompressSpacePageOperation10_2  that extends the CompressSpacePageOperation\u003cbr\\/\u003e\\nand sets the old format id.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e2) CompressSpacePageOperation10_2.java Copyright has a wrong class name.\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/data\\/CompressSpacePageOperation10_2.java\u003c\\/p\u003e\\n\\n\u003cp\u003e+   Derby - Class org.apache.derby.impl.store.raw.data.ChainAllocPageOperation\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e3) Minor comment error in \u003cbr\\/\u003e\\n   Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/raw\\/RawStoreFactory.java\u003c\\/p\u003e\\n\\n\u003cp\u003e+\\t\\/** Derby Store Minor Version (2) **\\/\u003cbr\\/\u003e\\n+\\tpublic static final int DERBY_STORE_MINOR_VERSION_3    = 3;\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eversion number in the comment , should be 3. \u003c\\/p\u003e\\n\\n\u003cp\u003e4) Great work with tests.  One minor nit : \u003cbr\\/\u003e\\nWhen I looked first time , following change in the OnlineCompressTest.java, \u003cbr\\/\u003e\\ngot me confused. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003e+        int[] test_cases = \u003c\\/p\u003e\\n{104000}\\n\u003cp\u003e;\u003c\\/p\u003e\\n\\n\u003cp\u003e+        for (int i = 0; i &lt; test_cases.length; i++)\u003cbr\\/\u003e\\n+        {\u003cbr\\/\u003e\\n+            \\/\\/ first create new table and run the tests.\u003cbr\\/\u003e\\n+            createAndLoadLargeTable(conn, true, table_name, test_cases\u003cspan class=\\\"error\\\"\u003e&#91;i&#93;\u003c\\/span\u003e, 0);\u003cbr\\/\u003e\\n+\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eI am sure you must have added it to try different no of rows to reproduce the\u003cbr\\/\u003e\\nproblem. Now that you know the no of of rows required to reproduce\u003cbr\\/\u003e\\nthe problem. It might be better to change the code to noRows= 104000  \u003cbr\\/\u003e\\ninstead of test_cases; just to make it more clear.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e5) tests\\/upgradeTests\\/Upgrade_10_2_10_3.java  has to be disabled due to\u003cbr\\/\u003e\\n   \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1135\\\" title=\\\"Run upgrade test using a security manager\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1135\\\"\u003e\u003cdel\u003eDERBY-1135\u003c\\/del\u003e\u003c\\/a\u003e bug ,  please see build.xml in this directory. \u003c\\/p\u003e\\n\\n\u003cp\u003e   There is another Jira entry\u003cbr\\/\u003e\\n   (\u003ca href=\\\"http:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1689\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1689\u003c\\/a\u003e)  to add upgrade tests\u003cbr\\/\u003e\\n   for 10.2 to 102.  If you would like to address the 10.2 to 10.3 upgrade\u003cbr\\/\u003e\\n   support in a  separate patch, that is fine with me. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12454827_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454827_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 08:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T08:06:03+0000\'\u003e01\\/Dec\\/06 08:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for working on this issue. Patch looks good , i have only few minor comments.  \\n\\n 1) Two new classes CompressSpacePageOperation10_2.java and \\nCompressSpacePageOperation10_3.java may not be required. I think CompressSpacePageOperation.java   \\ncan be modified to handle the new 10.3\\/10.2 behavior and create one new class \\nCompressSpacePageOperation10_2  that extends the CompressSpacePageOperation \\nand sets the old format id. \\n\\n\\n 2) CompressSpacePageOperation10_2.java Copyright has a wrong class name. \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/data\\/CompressSpacePageOperation10_2.java \\n\\n +   Derby - Class org.apache.derby.impl.store.raw.data.ChainAllocPageOperation \\n\\n\\n 3) Minor comment error in  \\n   Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/store\\/raw\\/RawStoreFactory.java \\n\\n +\\t\\/** Derby Store Minor Version (2) **\\/ \\n+\\tpublic static final int DERBY_STORE_MINOR_VERSION_3    = 3; \\n\\n\\n version number in the comment , should be 3.  \\n\\n 4) Great work with tests.  One minor nit :  \\nWhen I looked first time , following change in the OnlineCompressTest.java,  \\ngot me confused.  \\n\\n\\n +        int[] test_cases =  \\n{104000}\\n ; \\n\\n +        for (int i = 0; i &lt; test_cases.length; i++) \\n+        { \\n+            \\/\\/ first create new table and run the tests. \\n+            createAndLoadLargeTable(conn, true, table_name, test_cases &#91;i&#93; , 0); \\n+ \\n\\n\\n I am sure you must have added it to try different no of rows to reproduce the \\nproblem. Now that you know the no of of rows required to reproduce \\nthe problem. It might be better to change the code to noRows= 104000   \\ninstead of test_cases; just to make it more clear. \\n\\n\\n 5) tests\\/upgradeTests\\/Upgrade_10_2_10_3.java  has to be disabled due to \\n     DERBY-1135   bug ,  please see build.xml in this directory.  \\n\\n    There is another Jira entry \\n   ( http:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1689 )  to add upgrade tests \\n   for 10.2 to 102.  If you would like to address the 10.2 to 10.3 upgrade \\n   support in a  separate patch, that is fine with me.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454834\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12454834&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454834\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12454834_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454834_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 08:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T08:34:35+0000\'\u003e01\\/Dec\\/06 08:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching next version of the patch!\u003c\\/p\u003e\\n\\n\u003cp\u003eThis version now will work well with 10.2 binaries integrated in the trunk.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnother modification is that, the 10.1 -10.3 upgrade is now taken out. I believe it was a temporary workaround when we transitioned to 10.3. So, the only upgradeTest that should be run is Upgrade10.2_10.3 and ofcourse this test also has cases for previous upgrades as it uses the same framework and the new case is added to the existing framework.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am going to file a bug for cleaning up the 10.1 related files.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12454834_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454834_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 08:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T08:34:35+0000\'\u003e01\\/Dec\\/06 08:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching next version of the patch! \\n\\n This version now will work well with 10.2 binaries integrated in the trunk. \\n\\n Another modification is that, the 10.1 -10.3 upgrade is now taken out. I believe it was a temporary workaround when we transitioned to 10.3. So, the only upgradeTest that should be run is Upgrade10.2_10.3 and ofcourse this test also has cases for previous upgrades as it uses the same framework and the new case is added to the existing framework. \\n\\n I am going to file a bug for cleaning up the 10.1 related files.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454932\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12454932&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454932\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12454932_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454932_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 15:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T15:26:00+0000\'\u003e01\\/Dec\\/06 15:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks a lot suresh,\u003c\\/p\u003e\\n\\n\u003cp\u003eI think I misunderstood the proposal you gave initially about CompressSpacePageOperation10_2 class. This new solution of having only 1 class extending the old one to support old behavior seems to be the right thing to do. I have done so, but  the main class will need to have one extra check which I could not avoid. Let me know if you have any workaround to this small nit in the new approach.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have also addressed your comments in this new set of patches. I have created 2 patches, one which includes implementation and test changes and another one specifically for upgradeTest changes. Thanks for this tip.\u003c\\/p\u003e\\n\\n\u003cp\u003eI would really appreciate review comments on this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12454932_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454932_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 15:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T15:26:00+0000\'\u003e01\\/Dec\\/06 15:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks a lot suresh, \\n\\n I think I misunderstood the proposal you gave initially about CompressSpacePageOperation10_2 class. This new solution of having only 1 class extending the old one to support old behavior seems to be the right thing to do. I have done so, but  the main class will need to have one extra check which I could not avoid. Let me know if you have any workaround to this small nit in the new approach. \\n\\n I have also addressed your comments in this new set of patches. I have created 2 patches, one which includes implementation and test changes and another one specifically for upgradeTest changes. Thanks for this tip. \\n\\n I would really appreciate review comments on this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12455046\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12455046&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12455046\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12455046_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455046_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 23:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T23:33:03+0000\'\u003e01\\/Dec\\/06 23:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for considering my suggestions.  Extra check(if( !(this instanceof\u003cbr\\/\u003e\\nCompressSpacePageOperation10_2) ) in the  CompressSpacePageOperation.java \u003cbr\\/\u003e\\nis ok. You need some kind of check in  to correctly call the \u003cbr\\/\u003e\\nwriteExternal\\/readExternal. Only othe alternative I can think of is to \u003cbr\\/\u003e\\ncheck for formatId instead of using the \\\"instanceof\\\". \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eWhile reviewing the latest patches(derby606_impl-v4.diff and derby606_upgrade-v4.diff ), \u003cbr\\/\u003e\\nnoticed you are disabling IN_PLACE_COMPRESS  on soft-upgrade to 10.3, in my \u003cbr\\/\u003e\\nview that is incorrect. If I understand correctly this bug happens only on \u003cbr\\/\u003e\\nlarge data size and does not leave the database in the corrupt state. \u003c\\/p\u003e\\n\\n\u003cp\u003eI believe right thing to do is to use the old log record on soft-upgrade to\u003cbr\\/\u003e\\n10.3 and allow compress. If you would like to be real nice to the users \u003cbr\\/\u003e\\nthen you can catch the bugs case and throw an error message, but I think it is\u003cbr\\/\u003e\\nnot required; users hitting the bug case first time on a a soft-upgrade is \u003cbr\\/\u003e\\nalmost zero probability. \u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/data\\/LoggableAllocActions.java\u003c\\/p\u003e\\n\\n\u003cp\u003e+\\tif( t.getLogFactory().checkVersion(RawStoreFactory.DERBY_STORE_MAJOR_VERSION_10,\u003cbr\\/\u003e\\n+\\t\\t\\t\\t\\tRawStoreFactory.DERBY_STORE_MINOR_VERSION_3,\u003cbr\\/\u003e\\n+\\t\\t\\t\\t\\t\\\"CompressSpace operation on an existing database\\\") )\u003c\\/p\u003e\\n\\n\u003cp\u003eAbove call throws an exception if version is not at the correct level, in this\u003cbr\\/\u003e\\ncase if not at  10.3. I think if you pass \\\"null\\\" for feature name , it will\u003cbr\\/\u003e\\njust return true\\/false. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003ePlease also fix the upgrade tests also, if you decide to allow compress on soft-upgrade. \u003c\\/p\u003e\\n\\n\u003cp\u003eI am sorry for missing this in my previous review. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThere is one major problem with the latest patch, it can make database \u003cbr\\/\u003e\\nnon-recoverable on upgrade from 10.2.\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Formatid are incorrect for CompressSpacePageOperation10_2 and    CompressSpacePageOperation. \u003cbr\\/\u003e\\n   CompressSpacePageOperation should have the new format id and  the\u003cbr\\/\u003e\\n   CompressSpacePageOperation10_2 should have the OLD one. \u003c\\/p\u003e\\n\\n\u003cp\u003eRelated changes :\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/data\\/CompressSpacePageOperation10_2.java\u003cbr\\/\u003e\\n+\u003cbr\\/\u003e\\n+\\t\\/**\u003cbr\\/\u003e\\n+\\t\\tReturn my format identifier.\u003cbr\\/\u003e\\n+\\t*\\/\u003cbr\\/\u003e\\n+\\tpublic int getTypeFormatId() \u003c\\/p\u003e\\n{\\n+\\t\\treturn super.getTypeFormatId();\\n+\\t}\\n\\n\u003cp\u003eI am sure , you wanted it to return StoredFormatIds.LOGOP_COMPRESS10_2_SPACE;  \u003c\\/p\u003e\\n\\n\u003cp\u003eand  also :\u003cbr\\/\u003e\\nIndex: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/RegisteredFormatIds.java\u003cbr\\/\u003e\\n+\\t\\/* 465 *\\/   \\\"org.apache.derby.impl.store.raw.data.CompressSpacePageOperation10_2\\\",\u003c\\/p\u003e\\n\\n\u003cp\u003eThat shoud have been\u003cbr\\/\u003e\\n\\\"org.apache.derby.impl.store.raw.data.CompressSpacePageOperation\\\" and you\u003cbr\\/\u003e\\nshould change existing entry for compress to \\\"CompressSpacePageOperation10_2\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eand the format id numbers should get changed  also :\u003cbr\\/\u003e\\nIndex: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/StoredFormatIds.java\u003cbr\\/\u003e\\n         public static final int LOGOP_COMPRESS_SPACE =\u003cbr\\/\u003e\\n                 (MIN_ID_2 + 454);\u003c\\/p\u003e\\n\\n\u003cp\u003e+\\t\\/* org.apache.derby.impl.store.raw.data.CompressSpacePageOperation10_2 *\\/\u003cbr\\/\u003e\\n+        public static final int LOGOP_COMPRESS10_2_SPACE =\u003cbr\\/\u003e\\n+                (MIN_ID_2 + 465);\u003cbr\\/\u003e\\n+\u003c\\/p\u003e\\n\\n\\n\\n\u003cp\u003e2) In the upgrade test , why you need to insert  104000 rows ? I think you \u003cbr\\/\u003e\\ncan produce the compress log record with less number of records and reduce\u003cbr\\/\u003e\\nthe test time.  \u003c\\/p\u003e\\n\\n\u003cp\u003e+\\t\\t\\ttry \u003c\\/p\u003e\\n{\\n+\\t\\t\\t\\tcheckDataToCase606(conn, 0, 104000, true);\\n+\\t\\t\\t}\\n\u003cp\u003e catch(SQLException sqle) \u003c\\/p\u003e\\n{\\n+\\t\\t\\t\\tpassed = isExpectedException(sqle, \\\"XSLB1\\\");\\n+\\t\\t\\t}\\n\\n\\n\\n\u003cp\u003eThanks\u003cbr\\/\u003e\\n-suresh\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12455046_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455046_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 23:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T23:33:03+0000\'\u003e01\\/Dec\\/06 23:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for considering my suggestions.  Extra check(if( !(this instanceof \\nCompressSpacePageOperation10_2) ) in the  CompressSpacePageOperation.java  \\nis ok. You need some kind of check in  to correctly call the  \\nwriteExternal\\/readExternal. Only othe alternative I can think of is to  \\ncheck for formatId instead of using the \\\"instanceof\\\".  \\n\\n\\n While reviewing the latest patches(derby606_impl-v4.diff and derby606_upgrade-v4.diff ),  \\nnoticed you are disabling IN_PLACE_COMPRESS  on soft-upgrade to 10.3, in my  \\nview that is incorrect. If I understand correctly this bug happens only on  \\nlarge data size and does not leave the database in the corrupt state.  \\n\\n I believe right thing to do is to use the old log record on soft-upgrade to \\n10.3 and allow compress. If you would like to be real nice to the users  \\nthen you can catch the bugs case and throw an error message, but I think it is \\nnot required; users hitting the bug case first time on a a soft-upgrade is  \\nalmost zero probability.  \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/data\\/LoggableAllocActions.java \\n\\n +\\tif( t.getLogFactory().checkVersion(RawStoreFactory.DERBY_STORE_MAJOR_VERSION_10, \\n+\\t\\t\\t\\t\\tRawStoreFactory.DERBY_STORE_MINOR_VERSION_3, \\n+\\t\\t\\t\\t\\t\\\"CompressSpace operation on an existing database\\\") ) \\n\\n Above call throws an exception if version is not at the correct level, in this \\ncase if not at  10.3. I think if you pass \\\"null\\\" for feature name , it will \\njust return true\\/false.  \\n\\n\\n Please also fix the upgrade tests also, if you decide to allow compress on soft-upgrade.  \\n\\n I am sorry for missing this in my previous review.  \\n\\n\\n There is one major problem with the latest patch, it can make database  \\nnon-recoverable on upgrade from 10.2. \\n\\n 1) Formatid are incorrect for CompressSpacePageOperation10_2 and    CompressSpacePageOperation.  \\n   CompressSpacePageOperation should have the new format id and  the \\n   CompressSpacePageOperation10_2 should have the OLD one.  \\n\\n Related changes : \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/data\\/CompressSpacePageOperation10_2.java \\n+ \\n+\\t\\/** \\n+\\t\\tReturn my format identifier. \\n+\\t*\\/ \\n+\\tpublic int getTypeFormatId()  \\n{\\n+\\t\\treturn super.getTypeFormatId();\\n+\\t}\\n\\n I am sure , you wanted it to return StoredFormatIds.LOGOP_COMPRESS10_2_SPACE;   \\n\\n and  also : \\nIndex: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/RegisteredFormatIds.java \\n+\\t\\/* 465 *\\/   \\\"org.apache.derby.impl.store.raw.data.CompressSpacePageOperation10_2\\\", \\n\\n That shoud have been \\n\\\"org.apache.derby.impl.store.raw.data.CompressSpacePageOperation\\\" and you \\nshould change existing entry for compress to \\\"CompressSpacePageOperation10_2\\\". \\n\\n and the format id numbers should get changed  also : \\nIndex: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/StoredFormatIds.java \\n         public static final int LOGOP_COMPRESS_SPACE = \\n                 (MIN_ID_2 + 454); \\n\\n +\\t\\/* org.apache.derby.impl.store.raw.data.CompressSpacePageOperation10_2 *\\/ \\n+        public static final int LOGOP_COMPRESS10_2_SPACE = \\n+                (MIN_ID_2 + 465); \\n+ \\n\\n\\n\\n 2) In the upgrade test , why you need to insert  104000 rows ? I think you  \\ncan produce the compress log record with less number of records and reduce \\nthe test time.   \\n\\n +\\t\\t\\ttry  \\n{\\n+\\t\\t\\t\\tcheckDataToCase606(conn, 0, 104000, true);\\n+\\t\\t\\t}\\n  catch(SQLException sqle)  \\n{\\n+\\t\\t\\t\\tpassed = isExpectedException(sqle, \\\"XSLB1\\\");\\n+\\t\\t\\t}\\n\\n\\n\\n Thanks \\n-suresh              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12455260\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12455260&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12455260\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12455260_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455260_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/06 09:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-04T09:23:40+0000\'\u003e04\\/Dec\\/06 09:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Suresh for catching that!\u003c\\/p\u003e\\n\\n\u003cp\u003eI have created new patches based on your feedback and they are attached.\u003c\\/p\u003e\\n\\n\u003cp\u003eRegarding the UpgradeTest  with 10400 rows, I believe it is good to test the soft and hard upgrade when the edge case is hit. Hence I use the case almost as is from OnlineCompressTest.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis case is not only about large size table data but it happens when data stored  (in multiple allocation pages) is deleted to an extent where the last allocation page is completely empty. In this case, when the compress is called, the operation does not complete successfully because the log record is not written due to the fact that newHighestPage is negative.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo simulate this, I created a table with data (for a particualr db schema) that will just grow beyond the size that can be managed by 1 alloc page. Then deleted enough data to make sure the last allocpage is empty. The combination of 10400 + the db schema is optimized for minimum time. I could not get the other 2 db schemas in OnlineCompressTest to work for this case, for a shorter duration.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is a large patch and Comments on this new patch are most welcome.\u003c\\/p\u003e\\n\\n\u003cp\u003e-Mayuresh\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12455260_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455260_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/06 09:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-04T09:23:40+0000\'\u003e04\\/Dec\\/06 09:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Suresh for catching that! \\n\\n I have created new patches based on your feedback and they are attached. \\n\\n Regarding the UpgradeTest  with 10400 rows, I believe it is good to test the soft and hard upgrade when the edge case is hit. Hence I use the case almost as is from OnlineCompressTest. \\n\\n This case is not only about large size table data but it happens when data stored  (in multiple allocation pages) is deleted to an extent where the last allocation page is completely empty. In this case, when the compress is called, the operation does not complete successfully because the log record is not written due to the fact that newHighestPage is negative. \\n\\n To simulate this, I created a table with data (for a particualr db schema) that will just grow beyond the size that can be managed by 1 alloc page. Then deleted enough data to make sure the last allocpage is empty. The combination of 10400 + the db schema is optimized for minimum time. I could not get the other 2 db schemas in OnlineCompressTest to work for this case, for a shorter duration. \\n\\n This is a large patch and Comments on this new patch are most welcome. \\n\\n -Mayuresh              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12456260\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12456260&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12456260\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12456260_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456260_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/06 23:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-06T23:30:36+0000\'\u003e06\\/Dec\\/06 23:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ederby606_impl-v5.diff :\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch looks good to be committed. Did you run the regression tests ?\u003cbr\\/\u003e\\nFor some reason I can not apply this patch to my code-line.  \u003cbr\\/\u003e\\nCould you please recreate the patch and post it. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003e$ patch -i c:\\/temp\\/derby606_impl-v5.diff\u003cbr\\/\u003e\\npatching file `java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/xact\\/Xact.java\'\u003cbr\\/\u003e\\npatching file `java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/data\\/CompressSpacePag\u003cbr\\/\u003e\\neOperation10_2.java\'\u003cbr\\/\u003e\\npatch: **** malformed patch at line 120: Index: java\\/engine\\/org\\/apache\\/derby\\/imp\u003cbr\\/\u003e\\nl\\/store\\/raw\\/data\\/LoggableAllocActions.java\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e1) One minor thing I noticed is you did not update the MAX_ID_2 in the\u003cbr\\/\u003e\\nfollowing file :\u003c\\/p\u003e\\n\\n\u003cp\u003eIndex: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/StoredFormatIds.java\u003c\\/p\u003e\\n\\n\u003cp\u003epublic static final int MAX_ID_2 =\u003cbr\\/\u003e\\n                (MIN_ID_2 + 464);\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eFile  derby606_upgrade-v5.diff :\u003cbr\\/\u003e\\n--------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eAs Bryan and others pointed out Derby supports upgrade from 10.1 to 10.3\u003cbr\\/\u003e\\nalso. This patch seems to incorrectly remove 10.1 to 10.3 upgrade test.\u003c\\/p\u003e\\n\\n\u003cp\u003eAfter your latest change to allow Compress on softupgrade , following error\u003cbr\\/\u003e\\ncheck  is not valid any more:\u003c\\/p\u003e\\n\\n\u003cp\u003e+\\t\\t\\ttry \u003c\\/p\u003e\\n{\\n+\\t\\t\\t\\tcheckDataToCase606(conn, 0, 104000, true);\\n+\\t\\t\\t}\\n\u003cp\u003e catch(SQLException sqle) {\u003cbr\\/\u003e\\n+\\t\\t\\t\\tpassed = isExpectedException(sqle, \\\"XSLB1\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003eNow the above check  is going to fail on softupgrade because of the derby-606 bug. \u003c\\/p\u003e\\n\\n\u003cp\u003eAs I understand changes to upgrade is going to test :\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Compress Log Record writes on compress operation.\u003cbr\\/\u003e\\n2) On hard upgrade , derby-606 problem does not occur. \u003c\\/p\u003e\\n\\n\u003cp\u003eFollowing cases is not tested : \u003cbr\\/\u003e\\n1) Replay of the old compress log record  on softupgrade\\/hardupgrade (\u003cbr\\/\u003e\\nreadExternal() execution), because database is shutdown after each upgrade test\u003cbr\\/\u003e\\nphase. This might be tricky to do because you need to simulate crash-recovery, \u003cbr\\/\u003e\\nyou can work on it separately if you are interested. Let\'s try to get the \u003cbr\\/\u003e\\ncurrent patches committed.     \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThanks\u003cbr\\/\u003e\\n-suresh\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12456260_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456260_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/06 23:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-06T23:30:36+0000\'\u003e06\\/Dec\\/06 23:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    derby606_impl-v5.diff : \\n\\n This patch looks good to be committed. Did you run the regression tests ? \\nFor some reason I can not apply this patch to my code-line.   \\nCould you please recreate the patch and post it.  \\n\\n\\n $ patch -i c:\\/temp\\/derby606_impl-v5.diff \\npatching file `java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/xact\\/Xact.java\' \\npatching file `java\\/engine\\/org\\/apache\\/derby\\/impl\\/store\\/raw\\/data\\/CompressSpacePag \\neOperation10_2.java\' \\npatch: **** malformed patch at line 120: Index: java\\/engine\\/org\\/apache\\/derby\\/imp \\nl\\/store\\/raw\\/data\\/LoggableAllocActions.java \\n\\n\\n 1) One minor thing I noticed is you did not update the MAX_ID_2 in the \\nfollowing file : \\n\\n Index: java\\/engine\\/org\\/apache\\/derby\\/iapi\\/services\\/io\\/StoredFormatIds.java \\n\\n public static final int MAX_ID_2 = \\n                (MIN_ID_2 + 464); \\n\\n\\n File  derby606_upgrade-v5.diff : \\n-------------------------------- \\n\\n As Bryan and others pointed out Derby supports upgrade from 10.1 to 10.3 \\nalso. This patch seems to incorrectly remove 10.1 to 10.3 upgrade test. \\n\\n After your latest change to allow Compress on softupgrade , following error \\ncheck  is not valid any more: \\n\\n +\\t\\t\\ttry  \\n{\\n+\\t\\t\\t\\tcheckDataToCase606(conn, 0, 104000, true);\\n+\\t\\t\\t}\\n  catch(SQLException sqle) { \\n+\\t\\t\\t\\tpassed = isExpectedException(sqle, \\\"XSLB1\\\"); \\n\\n Now the above check  is going to fail on softupgrade because of the derby-606 bug.  \\n\\n As I understand changes to upgrade is going to test : \\n\\n 1) Compress Log Record writes on compress operation. \\n2) On hard upgrade , derby-606 problem does not occur.  \\n\\n Following cases is not tested :  \\n1) Replay of the old compress log record  on softupgrade\\/hardupgrade ( \\nreadExternal() execution), because database is shutdown after each upgrade test \\nphase. This might be tricky to do because you need to simulate crash-recovery,  \\nyou can work on it separately if you are interested. Let\'s try to get the  \\ncurrent patches committed.      \\n\\n\\n Thanks \\n-suresh              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12456356\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12456356&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12456356\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12456356_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456356_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Dec\\/06 11:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-07T11:22:34+0000\'\u003e07\\/Dec\\/06 11:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003enew patch for the implementation is attached.\u003c\\/p\u003e\\n\\n\u003cp\u003eI had some problems with svn:eol settings and they have been fixed now and the patch has been updated and also tested.\u003cbr\\/\u003e\\nI have also modified the StoredFormatIds to correct the max_id now. Thanks Suresh for catching that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12456356_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456356_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Dec\\/06 11:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-07T11:22:34+0000\'\u003e07\\/Dec\\/06 11:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    new patch for the implementation is attached. \\n\\n I had some problems with svn:eol settings and they have been fixed now and the patch has been updated and also tested. \\nI have also modified the StoredFormatIds to correct the max_id now. Thanks Suresh for catching that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12456497\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12456497&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12456497\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12456497_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456497_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Dec\\/06 17:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-07T17:52:39+0000\'\u003e07\\/Dec\\/06 17:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; As Bryan and others pointed out Derby supports upgrade from 10.1 to 10.3\u003cbr\\/\u003e\\n&gt; also. This patch seems to incorrectly remove 10.1 to 10.3 upgrade test.\u003c\\/p\u003e\\n\\n\u003cp\u003eI considered this. The current framework for upgrade testing needs some modification to support upgrade from more than 1 prev releases. build.xml should create &lt;test&gt;_app.properties file for each such test in the upgradeSuite. Also, upgrade from 10.0 to 10.3 should be considered.  I looked into 10.2 and 10.1 workspaces and they contain only one test. One good thing is that, as mentioned in my other comments, UpgradeTester still includes all the testcases for upgrade from 10.0 and 10.1, so this work can be used to make upgradetest support upgrade from 10.0 and 10.1 to 10.3.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn my opinion, all This is probably out of scope for this bug. I feel, A follow up patch tracked by different JIRA entry can handle this effort. It might be useful to comment out the lines instead of removing, I shall do that. Please let me know what do you think.\u003c\\/p\u003e\\n\\n\u003cp\u003e------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eAttached is another patch for upgrade tests. I simplified the 606 case to call compress for common scenario where old log record is used, instead of exercising the bug case. This case in Upgrade testing framework will also work with old\\/new releases and not just the combination of 10.2-10.3.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThanks for your help !!\u003cbr\\/\u003e\\n&#8211; Mayuresh\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12456497_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456497_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Dec\\/06 17:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-07T17:52:39+0000\'\u003e07\\/Dec\\/06 17:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; As Bryan and others pointed out Derby supports upgrade from 10.1 to 10.3 \\n&gt; also. This patch seems to incorrectly remove 10.1 to 10.3 upgrade test. \\n\\n I considered this. The current framework for upgrade testing needs some modification to support upgrade from more than 1 prev releases. build.xml should create &lt;test&gt;_app.properties file for each such test in the upgradeSuite. Also, upgrade from 10.0 to 10.3 should be considered.  I looked into 10.2 and 10.1 workspaces and they contain only one test. One good thing is that, as mentioned in my other comments, UpgradeTester still includes all the testcases for upgrade from 10.0 and 10.1, so this work can be used to make upgradetest support upgrade from 10.0 and 10.1 to 10.3. \\n\\n In my opinion, all This is probably out of scope for this bug. I feel, A follow up patch tracked by different JIRA entry can handle this effort. It might be useful to comment out the lines instead of removing, I shall do that. Please let me know what do you think. \\n\\n ------------------ \\n\\n Attached is another patch for upgrade tests. I simplified the 606 case to call compress for common scenario where old log record is used, instead of exercising the bug case. This case in Upgrade testing framework will also work with old\\/new releases and not just the combination of 10.2-10.3. \\n\\n\\n Thanks for your help !! \\n&#8211; Mayuresh              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12456705\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12456705&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12456705\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12456705_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456705_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Dec\\/06 05:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-08T05:52:40+0000\'\u003e08\\/Dec\\/06 05:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSuresh pointed out that 10.1 to 10.3 upgrade test will be more appropriate at this time. I think that is wise also because it will still exercise a relevant upgrade for this bug.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, in the new attached patch, I have cleaned up 10.2-10.3 test related code and the patch looks neat now. It  only has a added testcase to UpgradeTester with corresponding changes to the out file.\u003c\\/p\u003e\\n\\n\u003cp\u003eplease note that, we are not including 10.2-10.3 upgrade tests here, so the patch does not include additional trunk settings to checkout 10.2 binaries. This will be added as a part of fix to 1689, I feel.\u003c\\/p\u003e\\n\\n\u003cp\u003ethanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12456705_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456705_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Dec\\/06 05:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-08T05:52:40+0000\'\u003e08\\/Dec\\/06 05:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Suresh pointed out that 10.1 to 10.3 upgrade test will be more appropriate at this time. I think that is wise also because it will still exercise a relevant upgrade for this bug. \\n\\n So, in the new attached patch, I have cleaned up 10.2-10.3 test related code and the patch looks neat now. It  only has a added testcase to UpgradeTester with corresponding changes to the out file. \\n\\n please note that, we are not including 10.2-10.3 upgrade tests here, so the patch does not include additional trunk settings to checkout 10.2 binaries. This will be added as a part of fix to 1689, I feel. \\n\\n thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12456988\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12456988&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12456988\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12456988_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456988_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Dec\\/06 21:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-08T21:51:35+0000\'\u003e08\\/Dec\\/06 21:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted     derby606_impl-v6.diff and derby606_upgrade-v7.diff   to trunk,  revision 484797.  Thanks Mayuresh. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tsuresh\\\" id=\\\"commentauthor_12456988_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tsuresh\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tsuresh\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Suresh Thalamati\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456988_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Dec\\/06 21:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-08T21:51:35+0000\'\u003e08\\/Dec\\/06 21:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed     derby606_impl-v6.diff and derby606_upgrade-v7.diff   to trunk,  revision 484797.  Thanks Mayuresh.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12461933\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12461933&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12461933\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12461933_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12461933_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/07 10:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-01-03T10:32:43+0000\'\u003e03\\/Jan\\/07 10:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCleared patch available flag.\u003cbr\\/\u003e\\nCan anyone help me to confirm and update the status of this issue?\u003cbr\\/\u003e\\nIt is still reported as in progress and unresolved, which indicate there are more patches to come.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12461933_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12461933_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/07 10:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-01-03T10:32:43+0000\'\u003e03\\/Jan\\/07 10:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Cleared patch available flag. \\nCan anyone help me to confirm and update the status of this issue? \\nIt is still reported as in progress and unresolved, which indicate there are more patches to come.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12462202\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12462202&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12462202\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12462202_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12462202_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/07 12:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-01-04T12:36:35+0000\'\u003e04\\/Jan\\/07 12:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003epatch has been committed by Suresh on 12\\/09. No more pending patches, and No backports required.\u003cbr\\/\u003e\\nChanging the status to Resolved.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks Kristian for pointing this out.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mayureshnirhali\\\" id=\\\"commentauthor_12462202_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mayureshnirhali\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mayureshnirhali\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mayuresh Nirhali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12462202_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/07 12:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-01-04T12:36:35+0000\'\u003e04\\/Jan\\/07 12:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    patch has been committed by Suresh on 12\\/09. No more pending patches, and No backports required. \\nChanging the status to Resolved. \\n\\n Thanks Kristian for pointing this out. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562046\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-606?focusedCommentId=12562046&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562046\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12562046_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562046_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 13:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T13:09:59+0000\'\u003e24\\/Jan\\/08 13:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis issue is resolved and has not been updated in the last 12 months (since 24\\/Jan\\/07). \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12562046_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562046_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 13:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T13:09:59+0000\'\u003e24\\/Jan\\/08 13:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This issue is resolved and has not been updated in the last 12 months (since 24\\/Jan\\/07).               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520237944148"> 
    <input type="hidden" title="jira.request.server.time" value="232"> 
    <input type="hidden" title="jira.request.id" value="499x94341946x5"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="6"> 
    <input type="hidden" title="db.reads.time.in.ms" value="31"> 
    <input type="hidden" title="db.conns.time.in.ms" value="37"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 499x94341946x5
	          REQUEST TIMESTAMP : [05/Mar/2018:08:19:04 +0000]
	               REQUEST TIME : 0.2320
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 6

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=20, elapsedTotal=31897024, elapsedMin=342935, elapsedMax=19883656, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=25, elapsedTotal=37426156, elapsedMin=367325, elapsedMax=19916491, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>