<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|0c81588fdee528b816a73807e925b34146b8334d|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"24c3ff40866b6e\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-4371"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-4371] Non-selected columns for SELECT DISTINCT allowed in ORDER BY clause if ordered by expression - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-4371] Non-selected columns for SELECT DISTINCT allowed in ORDER BY clause if ordered by expression - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4371">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-4371" href="/jira/browse/DERBY-4371" id="key-val" rel="12434994">DERBY-4371</a></li>
                </ol>
                <h1 id="summary-val">Non-selected columns for SELECT DISTINCT allowed in ORDER BY clause if ordered by expression</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4371"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-4371/DERBY-4371.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-4371/DERBY-4371.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-4371/DERBY-4371.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-4371/DERBY-4371.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/critical.svg" title="Critical - Crashes, loss of data, severe memory leak." width="16"> Critical </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.5.1.1 build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09">10.5.1.1</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.7.1.1" title="10.7.1.1 First release on the 10.7 branch.">10.7.1.1</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12434994-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>Repro attached</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Wrong query result</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>How to repeat:</p> 
                  <p>ij&gt; create table t (i integer, j integer);;<br> 0 rows inserted/updated/deleted<br> ij&gt; insert into t values (1,2),(1,3);<br> 2 rows inserted/updated/deleted<br> ij&gt; select distinct i from t order by j;<br> ERROR 42879: The ORDER BY clause may not contain column 'J', since the query specifies DISTINCT and that column does not appear in the query result.<br> ij&gt; select distinct i from t order by j*2;<br> I <br> -----------<br> 1 <br> 1 </p> 
                  <p>2 rows selected</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-4371?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-4371?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-4371?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-4371?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12442750" data-issue-id="12434994" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12442750/DERBY-4371.diff" draggable="true" data-downloadurl="application/octet-stream:DERBY-4371.diff:https://issues.apache.org/jira/secure/attachment/12442750/DERBY-4371.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12442750/DERBY-4371.diff" title="Latest  24/Apr/10 20:11 - Nirmal Fernando" draggable="true" data-downloadurl="application/octet-stream:DERBY-4371.diff:https://issues.apache.org/jira/secure/attachment/12442750/DERBY-4371.diff">DERBY-4371.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-04-24T20:11:13.828Z">24/Apr/10 20:11</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Nirmal Fernando
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12442872" data-issue-id="12434994" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12442872/DERBY-4371-2.diff" draggable="true" data-downloadurl="application/octet-stream:DERBY-4371-2.diff:https://issues.apache.org/jira/secure/attachment/12442872/DERBY-4371-2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12442872/DERBY-4371-2.diff" title="Latest  26/Apr/10 17:36 - Nirmal Fernando" draggable="true" data-downloadurl="application/octet-stream:DERBY-4371-2.diff:https://issues.apache.org/jira/secure/attachment/12442872/DERBY-4371-2.diff">DERBY-4371-2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-04-26T17:36:27.779Z">26/Apr/10 17:36</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Nirmal Fernando
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12443151" data-issue-id="12434994" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12443151/DERBY-4371-3.diff" draggable="true" data-downloadurl="application/octet-stream:DERBY-4371-3.diff:https://issues.apache.org/jira/secure/attachment/12443151/DERBY-4371-3.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12443151/DERBY-4371-3.diff" title="Latest  29/Apr/10 01:00 - Nirmal Fernando" draggable="true" data-downloadurl="application/octet-stream:DERBY-4371-3.diff:https://issues.apache.org/jira/secure/attachment/12443151/DERBY-4371-3.diff">DERBY-4371-3.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-04-29T01:00:45.427Z">29/Apr/10 01:00</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Nirmal Fernando
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12443459" data-issue-id="12434994" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12443459/DERBY-4371-4.diff" draggable="true" data-downloadurl="application/octet-stream:DERBY-4371-4.diff:https://issues.apache.org/jira/secure/attachment/12443459/DERBY-4371-4.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12443459/DERBY-4371-4.diff" title="Latest  03/May/10 11:40 - Nirmal Fernando" draggable="true" data-downloadurl="application/octet-stream:DERBY-4371-4.diff:https://issues.apache.org/jira/secure/attachment/12443459/DERBY-4371-4.diff">DERBY-4371-4.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-05-03T11:40:55.265Z">03/May/10 11:40</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Nirmal Fernando
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12452549" data-issue-id="12434994" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12452549/derby-4371-5.diff" draggable="true" data-downloadurl="text/x-patch:derby-4371-5.diff:https://issues.apache.org/jira/secure/attachment/12452549/derby-4371-5.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12452549/derby-4371-5.diff" title="Latest  19/Aug/10 17:20 - Nirmal Fernando" draggable="true" data-downloadurl="text/x-patch:derby-4371-5.diff:https://issues.apache.org/jira/secure/attachment/12452549/derby-4371-5.diff">derby-4371-5.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-08-19T17:20:10.922Z">19/Aug/10 17:20</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Nirmal Fernando
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12452628" data-issue-id="12434994" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12452628/derby-4371-6.diff" draggable="true" data-downloadurl="text/x-patch:derby-4371-6.diff:https://issues.apache.org/jira/secure/attachment/12452628/derby-4371-6.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12452628/derby-4371-6.diff" title="Latest  20/Aug/10 13:08 - Nirmal Fernando" draggable="true" data-downloadurl="text/x-patch:derby-4371-6.diff:https://issues.apache.org/jira/secure/attachment/12452628/derby-4371-6.diff">derby-4371-6.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-08-20T13:08:33.161Z">20/Aug/10 13:08</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Nirmal Fernando
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12452902" data-issue-id="12434994" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12452902/derby-4371-7.diff" draggable="true" data-downloadurl="text/x-patch:derby-4371-7.diff:https://issues.apache.org/jira/secure/attachment/12452902/derby-4371-7.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12452902/derby-4371-7.diff" title="Latest  24/Aug/10 07:51 - Nirmal Fernando" draggable="true" data-downloadurl="text/x-patch:derby-4371-7.diff:https://issues.apache.org/jira/secure/attachment/12452902/derby-4371-7.diff">derby-4371-7.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-08-24T07:51:20.469Z">24/Aug/10 07:51</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Nirmal Fernando
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12452649" data-issue-id="12434994" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12452649/derby-4371-tests.diff" draggable="true" data-downloadurl="text/x-patch:derby-4371-tests.diff:https://issues.apache.org/jira/secure/attachment/12452649/derby-4371-tests.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12452649/derby-4371-tests.diff" title="Latest  20/Aug/10 18:00 - Nirmal Fernando" draggable="true" data-downloadurl="text/x-patch:derby-4371-tests.diff:https://issues.apache.org/jira/secure/attachment/12452649/derby-4371-tests.diff">derby-4371-tests.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-08-20T18:00:48.486Z">20/Aug/10 18:00</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Nirmal Fernando
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12437871_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-4406: Wrong order when using ORDER BY on non-deterministic function"> <a href="/jira/browse/DERBY-4406" data-issue-key="DERBY-4406" class="issue-link link-title resolution">DERBY-4406</a> <span class="link-summary">Wrong order when using ORDER BY on non-deterministic function</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_nirmal" rel="nirmal" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Nirmal Fernando&quot;,&quot;emailAddress&quot;:&quot;nirmal070125@gmail.com&quot;,&quot;username&quot;:&quot;nirmal&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="nirmal"></span></span> Nirmal Fernando </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_bernt" rel="bernt" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Bernt M. Johnsen&quot;,&quot;emailAddress&quot;:&quot;bernt@apache.org&quot;,&quot;username&quot;:&quot;bernt&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="bernt"></span></span> Bernt M. Johnsen </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">1</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">1</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="07/Sep/09 11:33"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-09-07T11:33:52+0000">07/Sep/09 11:33</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="17/Jun/13 09:19"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-06-17T09:19:13+0000">17/Jun/13 09:19</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="25/Aug/10 12:11"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2010-08-25T12:11:21+0000">25/Aug/10 12:11</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4371?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-4371?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12758255\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12758255&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12758255\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bernt\\\" id=\\\"commentauthor_12758255_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bernt\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bernt\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bernt M. Johnsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12758255_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/09 14:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-09-22T14:21:41+0000\'\u003e22\\/Sep\\/09 14:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWrong result. Should be \\\"Critical\\\"\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bernt\\\" id=\\\"commentauthor_12758255_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bernt\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bernt\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bernt M. Johnsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12758255_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/09 14:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-09-22T14:21:41+0000\'\u003e22\\/Sep\\/09 14:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Wrong result. Should be \\\"Critical\\\"              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12764074\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12764074&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12764074\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12764074_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12764074_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/09 16:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-09T16:15:46+0000\'\u003e09\\/Oct\\/09 16:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSQL:2003 talks about this in part 2, 14.1 &lt;declare cursor&gt;, syntax rule 18d (18 d 9 B II, to be specific). My understanding is that if you have SELECT DISTINCT, all the columns\\/expressions in the ORDER BY clause must also be found in the select list.\u003c\\/p\u003e\\n\\n\u003cp\u003eAdding this restriction would solve the issue by rejecting the problematic query. Whereas the behaviour of this particular query is not well-defined, there may be some meaningful queries that will be rejected too, like \\\"select distinct i from t order by -i\\\", so we should probably add a release note if we choose to fix it this way.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnother data point, PostgreSQL does not allow any of the queries discussed here:\u003c\\/p\u003e\\n\\n\u003cp\u003ekh160127=# select distinct i from t order by j;\u003cbr\\/\u003e\\nERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list\u003cbr\\/\u003e\\nkh160127=# select distinct i from t order by j*2;\u003cbr\\/\u003e\\nERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list\u003cbr\\/\u003e\\nkh160127=# select distinct i from t order by -i;\u003cbr\\/\u003e\\nERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list\u003c\\/p\u003e\\n\\n\u003cp\u003eMySQL allows all three of them, although only the latter has a well-defined ordering.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12764074_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12764074_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Oct\\/09 16:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-09T16:15:46+0000\'\u003e09\\/Oct\\/09 16:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    SQL:2003 talks about this in part 2, 14.1 &lt;declare cursor&gt;, syntax rule 18d (18 d 9 B II, to be specific). My understanding is that if you have SELECT DISTINCT, all the columns\\/expressions in the ORDER BY clause must also be found in the select list. \\n\\n Adding this restriction would solve the issue by rejecting the problematic query. Whereas the behaviour of this particular query is not well-defined, there may be some meaningful queries that will be rejected too, like \\\"select distinct i from t order by -i\\\", so we should probably add a release note if we choose to fix it this way. \\n\\n Another data point, PostgreSQL does not allow any of the queries discussed here: \\n\\n kh160127=# select distinct i from t order by j; \\nERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list \\nkh160127=# select distinct i from t order by j*2; \\nERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list \\nkh160127=# select distinct i from t order by -i; \\nERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list \\n\\n MySQL allows all three of them, although only the latter has a well-defined ordering.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12764728\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12764728&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12764728\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12764728_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12764728_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Oct\\/09 16:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-12T16:00:27+0000\'\u003e12\\/Oct\\/09 16:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe error for \\\"select distinct i from t order by j\\\" is raised by OrderByColumn.bindOrderByColumn() if the query is distinct, the sort key is a column reference, and the sort key has been added to the result column list. Ideally, we should raise the error if the query is distinct and the sort key has been added to the RCL, and not care about whether or not it\'s a column reference. However, we always add the sort key to the RCL if it\'s an expression, even if the same expression is already in the RCL. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4406\\\" title=\\\"Wrong order when using ORDER BY on non-deterministic function\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4406\\\"\u003e\u003cdel\u003eDERBY-4406\u003c\\/del\u003e\u003c\\/a\u003e is caused by this, and a fix for that issue is likely to make it easier to fix this issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12764728_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12764728_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Oct\\/09 16:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-10-12T16:00:27+0000\'\u003e12\\/Oct\\/09 16:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The error for \\\"select distinct i from t order by j\\\" is raised by OrderByColumn.bindOrderByColumn() if the query is distinct, the sort key is a column reference, and the sort key has been added to the result column list. Ideally, we should raise the error if the query is distinct and the sort key has been added to the RCL, and not care about whether or not it\'s a column reference. However, we always add the sort key to the RCL if it\'s an expression, even if the same expression is already in the RCL.   DERBY-4406   is caused by this, and a fix for that issue is likely to make it easier to fix this issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12858492\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12858492&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12858492\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12858492_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12858492_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Apr\\/10 14:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-19T14:09:44+0000\'\u003e19\\/Apr\\/10 14:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi All,\u003c\\/p\u003e\\n\\n\u003cp\u003eI like to do some work on this bug as well. If someone can suggest me a starting point, it would be great.\u003c\\/p\u003e\\n\\n\u003cp\u003eFollowing is some of my understandings\\/ findings, please correct me if I am wrong.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think we need to perform a check inside OrderByColumn.bindOrderByColumn(), to find out whether the order by \u003cb\u003eexpression\u003c\\/b\u003e (not only column references) is same as the expression in RCL. If they are different we should raise that error if and only if (target instanceof SelectNode)=true and ( (SelectNode)target ).hasDistinct() =true.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think this will make Derby to not pull-up an expression that is already there in RCL. Currently Derby pull-up j*2 expression in both occasions mentioned below:\u003c\\/p\u003e\\n\\n\u003cp\u003e          select distinct i from t order by j*2; \\/\\/ addedColumnOffset = 0\u003cbr\\/\u003e\\n          select distinct j*2 from t order by j*2; \\/\\/ addedColumnOffset = 0 this ideally should be -1.\u003c\\/p\u003e\\n\\n\u003cp\u003eI like to get your view thoughts on this.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12858492_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12858492_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Apr\\/10 14:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-19T14:09:44+0000\'\u003e19\\/Apr\\/10 14:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi All, \\n\\n I like to do some work on this bug as well. If someone can suggest me a starting point, it would be great. \\n\\n Following is some of my understandings\\/ findings, please correct me if I am wrong. \\n\\n I think we need to perform a check inside OrderByColumn.bindOrderByColumn(), to find out whether the order by  expression  (not only column references) is same as the expression in RCL. If they are different we should raise that error if and only if (target instanceof SelectNode)=true and ( (SelectNode)target ).hasDistinct() =true. \\n\\n I think this will make Derby to not pull-up an expression that is already there in RCL. Currently Derby pull-up j*2 expression in both occasions mentioned below: \\n\\n           select distinct i from t order by j*2; \\/\\/ addedColumnOffset = 0 \\n          select distinct j*2 from t order by j*2; \\/\\/ addedColumnOffset = 0 this ideally should be -1. \\n\\n I like to get your view thoughts on this. \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12858739\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12858739&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12858739\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12858739_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12858739_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/10 01:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-20T01:07:21+0000\'\u003e20\\/Apr\\/10 01:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Nirmal, thanks for looking at this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eI wonder if it would be helpful to take a close look at how GROUP BY handles\u003cbr\\/\u003e\\na somewhat similar situation:\u003c\\/p\u003e\\n\\n\u003cp\u003e  select a, sum(b) from t group by a having a+c &gt; 1 \u003c\\/p\u003e\\n\\n\u003cp\u003eis not legal because of the reference to column \'c\'. But, the related statement:\u003c\\/p\u003e\\n\\n\u003cp\u003e  select a+c, sum(b) from t group by a+c having a+c &gt; 1 \u003c\\/p\u003e\\n\\n\u003cp\u003eis legal, because the expression is the same in all cases (I think &#8211; please check this!)\u003c\\/p\u003e\\n\\n\u003cp\u003eYou can find the code that implements this behavior, I think, in the method\u003cbr\\/\u003e\\naddNewColumnsForAggregation() in GroupByNode.java. In particular, look\u003cbr\\/\u003e\\nclosely at how the SubstituteExpressionsVisitor and CollectNodesVisitor\u003cbr\\/\u003e\\nget used to process the HAVING clause\'s expression tree.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12858739_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12858739_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/10 01:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-20T01:07:21+0000\'\u003e20\\/Apr\\/10 01:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Nirmal, thanks for looking at this issue. \\n\\n I wonder if it would be helpful to take a close look at how GROUP BY handles \\na somewhat similar situation: \\n\\n   select a, sum(b) from t group by a having a+c &gt; 1  \\n\\n is not legal because of the reference to column \'c\'. But, the related statement: \\n\\n   select a+c, sum(b) from t group by a+c having a+c &gt; 1  \\n\\n is legal, because the expression is the same in all cases (I think &#8211; please check this!) \\n\\n You can find the code that implements this behavior, I think, in the method \\naddNewColumnsForAggregation() in GroupByNode.java. In particular, look \\nclosely at how the SubstituteExpressionsVisitor and CollectNodesVisitor \\nget used to process the HAVING clause\'s expression tree.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12858810\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12858810&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12858810\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12858810_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12858810_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/10 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-20T10:41:49+0000\'\u003e20\\/Apr\\/10 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eActually, GROUP BY A+C is not valid SQL. It is non-standard syntax that was added in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-883\\\" title=\\\"Enhance GROUP BY clause to support expressions instead of just column references.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-883\\\"\u003e\u003cdel\u003eDERBY-883\u003c\\/del\u003e\u003c\\/a\u003e. SQL:2003 only allows column references in group by clauses, as far as I can see.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12858810_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12858810_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/10 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-20T10:41:49+0000\'\u003e20\\/Apr\\/10 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Actually, GROUP BY A+C is not valid SQL. It is non-standard syntax that was added in   DERBY-883  . SQL:2003 only allows column references in group by clauses, as far as I can see.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12858959\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12858959&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12858959\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12858959_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12858959_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/10 16:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-20T16:26:16+0000\'\u003e20\\/Apr\\/10 16:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Bryan &amp; Knut,\u003c\\/p\u003e\\n\\n\u003cp\u003eselect a, sum(b) from t group by a having a+c &gt; 1  : I checked this in both Derby and PostgreSQL, this is not legal as Bryan correctly mentioned since column reference \'c\' included in having clause is not in group by clause, though the \'a\' in select clause is in the group by clause. (Note that \'b\' is used as \'sum(b)\', i.e. if we use a column reference with an aggregate function it need not to be in the group by clause.)\u003c\\/p\u003e\\n\\n\u003cp\u003eselect a+c, sum(b) from t group by a+c having a+c &gt; 1  :This is a valid query in both Derby and PostgreSQL. I think Bryan is correct, since the same expression used in \u003cb\u003eall 3\u003c\\/b\u003e cases, this is successful. I verified this by following queries:\u003cbr\\/\u003e\\n     select a, sum(b) from t group by a+c having a+c &gt; 1 \\/\\/this fails \u003cbr\\/\u003e\\n     select a-c, sum(b) from t group by a+c having a+c &gt; 1 \\/\\/this fails\u003cbr\\/\u003e\\n     select a-c, sum(b) from t group by a,c having a+c &gt; 1 \\/\\/this passes\u003cbr\\/\u003e\\n     select a, sum(b) from t group by a+c,a having a+c &gt; 1 \\/\\/this passes\u003cbr\\/\u003e\\n                      ---&gt; this implies expressions in select clause should be in group by clause\u003c\\/p\u003e\\n\\n\u003cp\u003esame way I figured out that an expression used in a having clause should be in group by clause.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12858959_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12858959_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Apr\\/10 16:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-20T16:26:16+0000\'\u003e20\\/Apr\\/10 16:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Bryan &amp; Knut, \\n\\n select a, sum(b) from t group by a having a+c &gt; 1  : I checked this in both Derby and PostgreSQL, this is not legal as Bryan correctly mentioned since column reference \'c\' included in having clause is not in group by clause, though the \'a\' in select clause is in the group by clause. (Note that \'b\' is used as \'sum(b)\', i.e. if we use a column reference with an aggregate function it need not to be in the group by clause.) \\n\\n select a+c, sum(b) from t group by a+c having a+c &gt; 1  :This is a valid query in both Derby and PostgreSQL. I think Bryan is correct, since the same expression used in  all 3  cases, this is successful. I verified this by following queries: \\n     select a, sum(b) from t group by a+c having a+c &gt; 1 \\/\\/this fails  \\n     select a-c, sum(b) from t group by a+c having a+c &gt; 1 \\/\\/this fails \\n     select a-c, sum(b) from t group by a,c having a+c &gt; 1 \\/\\/this passes \\n     select a, sum(b) from t group by a+c,a having a+c &gt; 1 \\/\\/this passes \\n                      ---&gt; this implies expressions in select clause should be in group by clause \\n\\n same way I figured out that an expression used in a having clause should be in group by clause. \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12860572\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12860572&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12860572\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12860572_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860572_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/10 20:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-24T20:11:13+0000\'\u003e24\\/Apr\\/10 20:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi All,\u003c\\/p\u003e\\n\\n\u003cp\u003eI have attached a patch for this issue. This patch shows following error for the query mentioned in the description:\u003c\\/p\u003e\\n\\n\u003cp\u003eERROR 42879: The ORDER BY clause may not contain column \'expression\' , since the query specifies DISTINCT and that column does not appear in the query result.\u003c\\/p\u003e\\n\\n\u003cp\u003eI used \'expression\' in the error, since j*2 is not a column reference, but I think it is better if we can show a new error for this.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am expecting your valuable comments on the patch.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12860572_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860572_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/10 20:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-24T20:11:13+0000\'\u003e24\\/Apr\\/10 20:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi All, \\n\\n I have attached a patch for this issue. This patch shows following error for the query mentioned in the description: \\n\\n ERROR 42879: The ORDER BY clause may not contain column \'expression\' , since the query specifies DISTINCT and that column does not appear in the query result. \\n\\n I used \'expression\' in the error, since j*2 is not a column reference, but I think it is better if we can show a new error for this. \\n\\n I am expecting your valuable comments on the patch. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12860573\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12860573&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12860573\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12860573_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860573_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/10 20:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-24T20:13:24+0000\'\u003e24\\/Apr\\/10 20:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am running derbyall tests now.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12860573_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860573_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/10 20:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-24T20:13:24+0000\'\u003e24\\/Apr\\/10 20:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am running derbyall tests now. \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12860658\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12860658&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12860658\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12860658_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860658_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/10 06:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-25T06:03:38+0000\'\u003e25\\/Apr\\/10 06:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi All,\u003c\\/p\u003e\\n\\n\u003cp\u003eI ran the derbyall tests with my modification, but it failed (I was wondering why). Following is a quote from derbyall_report.txt:\u003c\\/p\u003e\\n\\n\u003cp\u003eGenerating report for RunSuite derbyall  null null null true \u003cbr\\/\u003e\\n------------------ Java Information ------------------\u003cbr\\/\u003e\\nJava Version:    1.6.0_16\u003cbr\\/\u003e\\nJava Vendor:     Sun Microsystems Inc.\u003cbr\\/\u003e\\nJava home:       C:\\\\Program Files\\\\Java\\\\jre6\u003cbr\\/\u003e\\nJava classpath:  %classpath%;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derby.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbytools.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyrun.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbynet.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyclient.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyTesting.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\tools\\\\java\\\\jakarta-oro-2.0.8.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\tools\\\\java\\\\junit.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_cs.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_de_DE.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_es.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_fr.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_hu.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_it.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ja_JP.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ko_KR.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_pl.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_pt_BR.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ru.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_zh_CN.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_zh_TW.jar;C:\\\\OtherNirmal\\\\GSoC\\\\xalan-j_2_7_1-bin-2jars\\\\xalan-j_2_7_1\\\\samples\\\\xalansamples.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\fop.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\avalon-framework-4.2.0.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\batik-all-1.6.jar;.\u003cbr\\/\u003e\\nOS name:         Windows Vista\u003cbr\\/\u003e\\nOS architecture: x86\u003cbr\\/\u003e\\nOS version:      6.0\u003cbr\\/\u003e\\nJava user name:  Nirmal\u003cbr\\/\u003e\\nJava user home:  C:\\\\Users\\\\Nirmal\u003cbr\\/\u003e\\nJava user dir:   C:\\\\OtherNirmal\\\\GSoC\\\\Testing\\\\DerbyAll\u003cbr\\/\u003e\\njava.specification.name: Java Platform API Specification\u003cbr\\/\u003e\\njava.specification.version: 1.6\u003cbr\\/\u003e\\n--------- Derby Information --------\u003cbr\\/\u003e\\nJRE - JDBC: Java SE 6 - JDBC 4.0\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derby.jar&#93;\u003c\\/span\u003e 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbytools.jar&#93;\u003c\\/span\u003e 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbynet.jar&#93;\u003c\\/span\u003e 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyclient.jar&#93;\u003c\\/span\u003e 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n------------------------------------------------------\u003cbr\\/\u003e\\n----------------- Locale Information -----------------\u003cbr\\/\u003e\\nCurrent Locale :  [English\\/United States \u003cspan class=\\\"error\\\"\u003e&#91;en_US&#93;\u003c\\/span\u003e]\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;cs&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;de_DE&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;es&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;fr&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;hu&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;it&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;ja_JP&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;ko_KR&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;pl&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;pt_BR&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;ru&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;zh_CN&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;zh_TW&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n------------------------------------------------------\u003cbr\\/\u003e\\nTest environment information:\u003cbr\\/\u003e\\nCOMMAND LINE STYLE: jdk13\u003cbr\\/\u003e\\nTEST CANONS: master\u003cbr\\/\u003e\\n------------------------------------------------------\u003cbr\\/\u003e\\n------------------------------------------------------\u003cbr\\/\u003e\\nSummary results:\u003c\\/p\u003e\\n\\n\u003cp\u003eTest Run Started: 2010-04-25 01:19:16.0\u003cbr\\/\u003e\\nTest Run Duration: 00:48:47\u003c\\/p\u003e\\n\\n\u003cp\u003e204 Tests Run\u003cbr\\/\u003e\\n31% Pass (65 tests passed)\u003cbr\\/\u003e\\n69% Fail (139 tests failed)\u003cbr\\/\u003e\\n3 Suites skipped\u003c\\/p\u003e\\n\\n\u003cp\u003e=================================================================\u003cbr\\/\u003e\\nSince I was pretty sure, that these failures occurred not because of my modifications, I ran derbyall again after commenting the code I added.\u003cbr\\/\u003e\\nThe result was what I expected.\u003c\\/p\u003e\\n\\n\u003cp\u003eGenerating report for RunSuite derbyall  null null null true \u003cbr\\/\u003e\\n------------------ Java Information ------------------\u003cbr\\/\u003e\\nJava Version:    1.6.0_16\u003cbr\\/\u003e\\nJava Vendor:     Sun Microsystems Inc.\u003cbr\\/\u003e\\nJava home:       C:\\\\Program Files\\\\Java\\\\jre6\u003cbr\\/\u003e\\nJava classpath:  %classpath%;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derby.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbytools.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyrun.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbynet.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyclient.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyTesting.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\tools\\\\java\\\\jakarta-oro-2.0.8.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\tools\\\\java\\\\junit.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_cs.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_de_DE.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_es.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_fr.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_hu.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_it.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ja_JP.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ko_KR.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_pl.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_pt_BR.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ru.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_zh_CN.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_zh_TW.jar;C:\\\\OtherNirmal\\\\GSoC\\\\xalan-j_2_7_1-bin-2jars\\\\xalan-j_2_7_1\\\\samples\\\\xalansamples.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\fop.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\avalon-framework-4.2.0.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\batik-all-1.6.jar;.\u003cbr\\/\u003e\\nOS name:         Windows Vista\u003cbr\\/\u003e\\nOS architecture: x86\u003cbr\\/\u003e\\nOS version:      6.0\u003cbr\\/\u003e\\nJava user name:  Nirmal\u003cbr\\/\u003e\\nJava user home:  C:\\\\Users\\\\Nirmal\u003cbr\\/\u003e\\nJava user dir:   C:\\\\OtherNirmal\\\\GSoC\\\\Testing\\\\DerbyAll2\u003cbr\\/\u003e\\njava.specification.name: Java Platform API Specification\u003cbr\\/\u003e\\njava.specification.version: 1.6\u003cbr\\/\u003e\\n--------- Derby Information --------\u003cbr\\/\u003e\\nJRE - JDBC: Java SE 6 - JDBC 4.0\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derby.jar&#93;\u003c\\/span\u003e 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbytools.jar&#93;\u003c\\/span\u003e 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbynet.jar&#93;\u003c\\/span\u003e 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyclient.jar&#93;\u003c\\/span\u003e 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n------------------------------------------------------\u003cbr\\/\u003e\\n----------------- Locale Information -----------------\u003cbr\\/\u003e\\nCurrent Locale :  [English\\/United States \u003cspan class=\\\"error\\\"\u003e&#91;en_US&#93;\u003c\\/span\u003e]\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;cs&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;de_DE&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;es&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;fr&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;hu&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;it&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;ja_JP&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;ko_KR&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;pl&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;pt_BR&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;ru&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;zh_CN&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\nFound support for locale: \u003cspan class=\\\"error\\\"\u003e&#91;zh_TW&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n\\t version: 10.6.0.0 alpha - (exported)\u003cbr\\/\u003e\\n------------------------------------------------------\u003cbr\\/\u003e\\nTest environment information:\u003cbr\\/\u003e\\nCOMMAND LINE STYLE: jdk13\u003cbr\\/\u003e\\nTEST CANONS: master\u003cbr\\/\u003e\\n------------------------------------------------------\u003cbr\\/\u003e\\n------------------------------------------------------\u003cbr\\/\u003e\\nSummary results:\u003c\\/p\u003e\\n\\n\u003cp\u003eTest Run Started: 2010-04-25 10:29:54.0\u003cbr\\/\u003e\\nTest Run Duration: 00:48:08\u003c\\/p\u003e\\n\\n\u003cp\u003e204 Tests Run\u003cbr\\/\u003e\\n31% Pass (65 tests passed)\u003cbr\\/\u003e\\n69% Fail (139 tests failed)\u003cbr\\/\u003e\\n3 Suites skipped\u003c\\/p\u003e\\n\\n\u003cp\u003e============================================================\u003c\\/p\u003e\\n\\n\u003cp\u003eBut, since the both reports failed same number of tests, I suppose I can conclude that my modifications, not resulted of failure of any tests.\u003c\\/p\u003e\\n\\n\u003cp\u003eExpect your views on this.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12860658_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860658_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/10 06:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-25T06:03:38+0000\'\u003e25\\/Apr\\/10 06:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi All, \\n\\n I ran the derbyall tests with my modification, but it failed (I was wondering why). Following is a quote from derbyall_report.txt: \\n\\n Generating report for RunSuite derbyall  null null null true  \\n------------------ Java Information ------------------ \\nJava Version:    1.6.0_16 \\nJava Vendor:     Sun Microsystems Inc. \\nJava home:       C:\\\\Program Files\\\\Java\\\\jre6 \\nJava classpath:  %classpath%;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derby.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbytools.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyrun.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbynet.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyclient.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyTesting.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\tools\\\\java\\\\jakarta-oro-2.0.8.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\tools\\\\java\\\\junit.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_cs.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_de_DE.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_es.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_fr.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_hu.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_it.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ja_JP.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ko_KR.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_pl.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_pt_BR.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ru.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_zh_CN.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_zh_TW.jar;C:\\\\OtherNirmal\\\\GSoC\\\\xalan-j_2_7_1-bin-2jars\\\\xalan-j_2_7_1\\\\samples\\\\xalansamples.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\fop.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\avalon-framework-4.2.0.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\batik-all-1.6.jar;. \\nOS name:         Windows Vista \\nOS architecture: x86 \\nOS version:      6.0 \\nJava user name:  Nirmal \\nJava user home:  C:\\\\Users\\\\Nirmal \\nJava user dir:   C:\\\\OtherNirmal\\\\GSoC\\\\Testing\\\\DerbyAll \\njava.specification.name: Java Platform API Specification \\njava.specification.version: 1.6 \\n--------- Derby Information -------- \\nJRE - JDBC: Java SE 6 - JDBC 4.0 \\n &#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derby.jar&#93;  10.6.0.0 alpha - (exported) \\n &#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbytools.jar&#93;  10.6.0.0 alpha - (exported) \\n &#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbynet.jar&#93;  10.6.0.0 alpha - (exported) \\n &#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyclient.jar&#93;  10.6.0.0 alpha - (exported) \\n------------------------------------------------------ \\n----------------- Locale Information ----------------- \\nCurrent Locale :  [English\\/United States  &#91;en_US&#93; ] \\nFound support for locale:  &#91;cs&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;de_DE&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;es&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;fr&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;hu&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;it&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;ja_JP&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;ko_KR&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;pl&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;pt_BR&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;ru&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;zh_CN&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;zh_TW&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\n------------------------------------------------------ \\nTest environment information: \\nCOMMAND LINE STYLE: jdk13 \\nTEST CANONS: master \\n------------------------------------------------------ \\n------------------------------------------------------ \\nSummary results: \\n\\n Test Run Started: 2010-04-25 01:19:16.0 \\nTest Run Duration: 00:48:47 \\n\\n 204 Tests Run \\n31% Pass (65 tests passed) \\n69% Fail (139 tests failed) \\n3 Suites skipped \\n\\n ================================================================= \\nSince I was pretty sure, that these failures occurred not because of my modifications, I ran derbyall again after commenting the code I added. \\nThe result was what I expected. \\n\\n Generating report for RunSuite derbyall  null null null true  \\n------------------ Java Information ------------------ \\nJava Version:    1.6.0_16 \\nJava Vendor:     Sun Microsystems Inc. \\nJava home:       C:\\\\Program Files\\\\Java\\\\jre6 \\nJava classpath:  %classpath%;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derby.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbytools.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyrun.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbynet.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyclient.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyTesting.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\tools\\\\java\\\\jakarta-oro-2.0.8.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\tools\\\\java\\\\junit.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_cs.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_de_DE.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_es.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_fr.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_hu.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_it.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ja_JP.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ko_KR.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_pl.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_pt_BR.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_ru.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_zh_CN.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyLocale_zh_TW.jar;C:\\\\OtherNirmal\\\\GSoC\\\\xalan-j_2_7_1-bin-2jars\\\\xalan-j_2_7_1\\\\samples\\\\xalansamples.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\fop.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\avalon-framework-4.2.0.jar;C:\\\\OtherNirmal\\\\GSoC\\\\Document\\\\lib\\\\batik-all-1.6.jar;. \\nOS name:         Windows Vista \\nOS architecture: x86 \\nOS version:      6.0 \\nJava user name:  Nirmal \\nJava user home:  C:\\\\Users\\\\Nirmal \\nJava user dir:   C:\\\\OtherNirmal\\\\GSoC\\\\Testing\\\\DerbyAll2 \\njava.specification.name: Java Platform API Specification \\njava.specification.version: 1.6 \\n--------- Derby Information -------- \\nJRE - JDBC: Java SE 6 - JDBC 4.0 \\n &#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derby.jar&#93;  10.6.0.0 alpha - (exported) \\n &#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbytools.jar&#93;  10.6.0.0 alpha - (exported) \\n &#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbynet.jar&#93;  10.6.0.0 alpha - (exported) \\n &#91;C:\\\\OtherNirmal\\\\GSoC\\\\Code\\\\jars\\\\sane\\\\derbyclient.jar&#93;  10.6.0.0 alpha - (exported) \\n------------------------------------------------------ \\n----------------- Locale Information ----------------- \\nCurrent Locale :  [English\\/United States  &#91;en_US&#93; ] \\nFound support for locale:  &#91;cs&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;de_DE&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;es&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;fr&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;hu&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;it&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;ja_JP&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;ko_KR&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;pl&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;pt_BR&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;ru&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;zh_CN&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\nFound support for locale:  &#91;zh_TW&#93;  \\n\\t version: 10.6.0.0 alpha - (exported) \\n------------------------------------------------------ \\nTest environment information: \\nCOMMAND LINE STYLE: jdk13 \\nTEST CANONS: master \\n------------------------------------------------------ \\n------------------------------------------------------ \\nSummary results: \\n\\n Test Run Started: 2010-04-25 10:29:54.0 \\nTest Run Duration: 00:48:08 \\n\\n 204 Tests Run \\n31% Pass (65 tests passed) \\n69% Fail (139 tests failed) \\n3 Suites skipped \\n\\n ============================================================ \\n\\n But, since the both reports failed same number of tests, I suppose I can conclude that my modifications, not resulted of failure of any tests. \\n\\n Expect your views on this. \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12860718\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12860718&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12860718\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12860718_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860718_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/10 17:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-25T17:33:27+0000\'\u003e25\\/Apr\\/10 17:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi All,\u003c\\/p\u003e\\n\\n\u003cp\u003ederbyall Tests ran successfully. \u003c\\/p\u003e\\n\\n\u003cp\u003eIf someone can review the patch it would be great.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12860718_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860718_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/10 17:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-25T17:33:27+0000\'\u003e25\\/Apr\\/10 17:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi All, \\n\\n derbyall Tests ran successfully.  \\n\\n If someone can review the patch it would be great. \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12860928\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12860928&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12860928\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12860928_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860928_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/10 14:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-26T14:05:33+0000\'\u003e26\\/Apr\\/10 14:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Nirmal, thanks for the patch, it looks very promising.\u003cbr\\/\u003e\\nHere\'s a couple things that occurred to me as I read it:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Is the instanceof check for BinaryOperatorNode necessary?\u003cbr\\/\u003e\\nWhat would happen if it was removed?\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Did you run the JUnit test suites? Or just the derbyall suite?\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Can you add some new JUnit test cases to cover some of\u003cbr\\/\u003e\\nthe variations that are handled by the new code? In particular,\u003cbr\\/\u003e\\nit would be nice to have test cases for the ORDER BY statements that\u003cbr\\/\u003e\\nare mentioned in the bug description, and it would be nice to have\u003cbr\\/\u003e\\ntest cases for the ORDER BY statements that you mention in\u003cbr\\/\u003e\\nyour comments in the patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that DistinctTest.java would be a fine place to add the test cases.\u003c\\/p\u003e\\n\\n\u003cp\u003e4) Something about this loop looks strange:\u003c\\/p\u003e\\n\\n\u003cp\u003e    for (int i=1; i&lt;target.getResultColumns().size() ;i++ ){\u003c\\/p\u003e\\n\\n\u003cp\u003eUsually, either the loop counter starts at 0, or the loop test\u003cbr\\/\u003e\\nis for &lt;=, not &lt;. Do you think the start and end conditions are\u003cbr\\/\u003e\\ncorrect in this case?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12860928_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12860928_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/10 14:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-26T14:05:33+0000\'\u003e26\\/Apr\\/10 14:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Nirmal, thanks for the patch, it looks very promising. \\nHere\'s a couple things that occurred to me as I read it: \\n\\n 1) Is the instanceof check for BinaryOperatorNode necessary? \\nWhat would happen if it was removed? \\n\\n 2) Did you run the JUnit test suites? Or just the derbyall suite? \\n\\n 3) Can you add some new JUnit test cases to cover some of \\nthe variations that are handled by the new code? In particular, \\nit would be nice to have test cases for the ORDER BY statements that \\nare mentioned in the bug description, and it would be nice to have \\ntest cases for the ORDER BY statements that you mention in \\nyour comments in the patch. \\n\\n I think that DistinctTest.java would be a fine place to add the test cases. \\n\\n 4) Something about this loop looks strange: \\n\\n     for (int i=1; i&lt;target.getResultColumns().size() ;i++ ){ \\n\\n Usually, either the loop counter starts at 0, or the loop test \\nis for &lt;=, not &lt;. Do you think the start and end conditions are \\ncorrect in this case?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12861009\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12861009&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12861009\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12861009_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861009_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/10 17:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-26T17:34:32+0000\'\u003e26\\/Apr\\/10 17:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Bryan,\u003c\\/p\u003e\\n\\n\u003cp\u003eThank you very much for reviewing the patch.\u003c\\/p\u003e\\n\\n\u003cp\u003e1) I added this simply because queries like select distinct i*2 from order by i are already giving that error. But I think removing this will not affect anything instead we will able to handle queries like select distinct i from order by random() such that it shows the error. Thanks for pointing it.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) I ran just the derbyall suite, I will run suites.all now.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) This will probably the next thing I like to learn. I will read up on Junit tests.\u003c\\/p\u003e\\n\\n\u003cp\u003e4) Whoops, thanks Bryan, it was a mistake, and I corrected that, and I modified the patch too, please find the new attachment.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks Again.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12861009_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861009_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/10 17:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-26T17:34:32+0000\'\u003e26\\/Apr\\/10 17:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Bryan, \\n\\n Thank you very much for reviewing the patch. \\n\\n 1) I added this simply because queries like select distinct i*2 from order by i are already giving that error. But I think removing this will not affect anything instead we will able to handle queries like select distinct i from order by random() such that it shows the error. Thanks for pointing it. \\n\\n 2) I ran just the derbyall suite, I will run suites.all now. \\n\\n 3) This will probably the next thing I like to learn. I will read up on Junit tests. \\n\\n 4) Whoops, thanks Bryan, it was a mistake, and I corrected that, and I modified the patch too, please find the new attachment. \\n\\n Thanks Again.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12861651\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12861651&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12861651\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12861651_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861651_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 02:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T02:27:24+0000\'\u003e28\\/Apr\\/10 02:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Bryan,\u003c\\/p\u003e\\n\\n\u003cp\u003eI ran Junit tests for the new modification and there\'s a failure. Following is the output in JunitAll.out:\u003c\\/p\u003e\\n\\n\u003cp\u003e orderby(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)junit.framework.ComparisonFailure: Output at line 1736 expected:&lt;\u003cspan class=\\\"error\\\"\u003e&#91;C1 |C2 &#93;\u003c\\/span\u003e&gt; but was:&lt;\u003cspan class=\\\"error\\\"\u003e&#91;ERROR 42879: The ORDER BY clause may not contain column &#39;expression&#39;, since the query specifies DISTINCT and that column does not appear in the query result.&#93;\u003c\\/span\u003e&gt;\u003cbr\\/\u003e\\nat org.apache.derbyTesting.functionTests.util.CanonTestCase.compareCanon(CanonTestCase.java:106)\u003cbr\\/\u003e\\nat org.apache.derbyTesting.functionTests.util.ScriptTestCase.runTest(ScriptTestCase.java:198)\u003cbr\\/\u003e\\nat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109)\u003cbr\\/\u003e\\nat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\u003cbr\\/\u003e\\nat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\u003cbr\\/\u003e\\nat junit.extensions.TestSetup.run(TestSetup.java:25)\u003cbr\\/\u003e\\nat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eWhere can I found the query related to this ?\u003cbr\\/\u003e\\nThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12861651_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861651_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 02:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T02:27:24+0000\'\u003e28\\/Apr\\/10 02:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Bryan, \\n\\n I ran Junit tests for the new modification and there\'s a failure. Following is the output in JunitAll.out: \\n\\n  orderby(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)junit.framework.ComparisonFailure: Output at line 1736 expected:&lt; &#91;C1 |C2 &#93; &gt; but was:&lt; &#91;ERROR 42879: The ORDER BY clause may not contain column &#39;expression&#39;, since the query specifies DISTINCT and that column does not appear in the query result.&#93; &gt; \\nat org.apache.derbyTesting.functionTests.util.CanonTestCase.compareCanon(CanonTestCase.java:106) \\nat org.apache.derbyTesting.functionTests.util.ScriptTestCase.runTest(ScriptTestCase.java:198) \\nat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109) \\nat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24) \\nat junit.extensions.TestSetup$1.protect(TestSetup.java:21) \\nat junit.extensions.TestSetup.run(TestSetup.java:25) \\nat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\n\\n Where can I found the query related to this ? \\nThanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12861654\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12861654&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12861654\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12861654_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861654_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 02:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T02:58:45+0000\'\u003e28\\/Apr\\/10 02:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere\'s a bit of a trick to reading the following output:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;  orderby(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)junit.framework.ComparisonFailure: \u003cbr\\/\u003e\\n&gt; Output at line 1736 expected:&lt;\u003cspan class=\\\"error\\\"\u003e&#91;C1 |C2 &#93;\u003c\\/span\u003e&gt; but was:&lt;[ERROR 42879: The ORDER BY clause \u003cbr\\/\u003e\\n&gt; may not contain column \'expression\', since the query specifies DISTINCT and that column does \u003cbr\\/\u003e\\n&gt; not appear in the query result.]&gt; \u003c\\/p\u003e\\n\\n\u003cp\u003eThe output is referring to line 1736 in the file \u003cbr\\/\u003e\\njava\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/orderby.out\u003c\\/p\u003e\\n\\n\u003cp\u003eThe \\\"LangScripts\\\" test is a special JUnit test which takes files full of SQL statements, such as\u003cbr\\/\u003e\\njava\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/orderby.sql, feeds them\u003cbr\\/\u003e\\ninto the \\\"ij\\\" tool, and then compares the output against the corresponding XXX.out file.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo have a look at line 1736 in orderby.out and the message should make more sense.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12861654_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861654_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 02:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T02:58:45+0000\'\u003e28\\/Apr\\/10 02:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There\'s a bit of a trick to reading the following output: \\n\\n &gt;  orderby(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)junit.framework.ComparisonFailure:  \\n&gt; Output at line 1736 expected:&lt; &#91;C1 |C2 &#93; &gt; but was:&lt;[ERROR 42879: The ORDER BY clause  \\n&gt; may not contain column \'expression\', since the query specifies DISTINCT and that column does  \\n&gt; not appear in the query result.]&gt;  \\n\\n The output is referring to line 1736 in the file  \\njava\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/orderby.out \\n\\n The \\\"LangScripts\\\" test is a special JUnit test which takes files full of SQL statements, such as \\njava\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/orderby.sql, feeds them \\ninto the \\\"ij\\\" tool, and then compares the output against the corresponding XXX.out file. \\n\\n So have a look at line 1736 in orderby.out and the message should make more sense.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12861655\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12861655&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12861655\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12861655_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861655_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 03:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T03:13:13+0000\'\u003e28\\/Apr\\/10 03:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Bryan for help me out to read this.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, I found that the line 1736 is referred to the query: select distinct c1, c2 from t1 order by c1+1;\u003c\\/p\u003e\\n\\n\u003cp\u003eAccording to the standards this should fail with the error I created:\u003c\\/p\u003e\\n\\n\u003cp\u003eERROR 42879: The ORDER BY clause may not contain column \'expression\', since the query specifies DISTINCT and that column does\u003cbr\\/\u003e\\nnot appear in the query result.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut it expects the query to be pass and output this:\u003c\\/p\u003e\\n\\n\u003cp\u003eC1         |C2        \u003cbr\\/\u003e\\n----------------------\u003cbr\\/\u003e\\n1          |c         \u003cbr\\/\u003e\\n2          |b         \u003cbr\\/\u003e\\n3          |a         \u003cbr\\/\u003e\\n4          |c  \u003c\\/p\u003e\\n\\n\u003cp\u003eSo, I think we need to modify this test, isn\'t it? Isn\'t this the place I need to add additional queries to test the functionality of the modified code?\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12861655_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861655_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 03:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T03:13:13+0000\'\u003e28\\/Apr\\/10 03:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Bryan for help me out to read this. \\n\\n So, I found that the line 1736 is referred to the query: select distinct c1, c2 from t1 order by c1+1; \\n\\n According to the standards this should fail with the error I created: \\n\\n ERROR 42879: The ORDER BY clause may not contain column \'expression\', since the query specifies DISTINCT and that column does \\nnot appear in the query result. \\n\\n But it expects the query to be pass and output this: \\n\\n C1         |C2         \\n---------------------- \\n1          |c          \\n2          |b          \\n3          |a          \\n4          |c   \\n\\n So, I think we need to modify this test, isn\'t it? Isn\'t this the place I need to add additional queries to test the functionality of the modified code? \\n\\n Thanks. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12861661\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12861661&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12861661\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12861661_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861661_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 03:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T03:32:59+0000\'\u003e28\\/Apr\\/10 03:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt sounds like your proposed patch would cause\u003cbr\\/\u003e\\na query which previously passed to get an error instead.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is the sort of thing that we always think very carefully\u003cbr\\/\u003e\\nabout, because people may be currently using queries\u003cbr\\/\u003e\\nlike this, and depending on them, and so we are hesitant\u003cbr\\/\u003e\\nto disrupt functionality that is currently operational for fear\u003cbr\\/\u003e\\nof breaking existing applications.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn this particular case, we can see by using the Subversion \\\"annotate\\\" feature\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/orderby.out?view=annotate\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/orderby.out?view=annotate\u003c\\/a\u003e\u003cbr\\/\u003e\\n that the particular query was changed by \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2351\\\" title=\\\"ORDER BY with expression with distinct in the select list returns incorrect result\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2351\\\"\u003e\u003cdel\u003eDERBY-2351\u003c\\/del\u003e\u003c\\/a\u003e in revision 637529:\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/orderby.out?r1=637528&amp;r2=637529&amp;\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/orderby.out?r1=637528&amp;r2=637529&amp;\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that the next step is probably to have a close review of the\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2351\\\" title=\\\"ORDER BY with expression with distinct in the select list returns incorrect result\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2351\\\"\u003e\u003cdel\u003eDERBY-2351\u003c\\/del\u003e\u003c\\/a\u003e notes and try to understand why the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2351\\\" title=\\\"ORDER BY with expression with distinct in the select list returns incorrect result\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2351\\\"\u003e\u003cdel\u003eDERBY-2351\u003c\\/del\u003e\u003c\\/a\u003e changes\u003cbr\\/\u003e\\nare in conflict with the changes in your proposed patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s quite possible that your patch is implementing the desired behavior,\u003cbr\\/\u003e\\nbut it would better still if we can understand why \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2351\\\" title=\\\"ORDER BY with expression with distinct in the select list returns incorrect result\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2351\\\"\u003e\u003cdel\u003eDERBY-2351\u003c\\/del\u003e\u003c\\/a\u003e felt that\u003cbr\\/\u003e\\nthe other behavior was desirable.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12861661_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861661_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 03:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T03:32:59+0000\'\u003e28\\/Apr\\/10 03:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It sounds like your proposed patch would cause \\na query which previously passed to get an error instead. \\n\\n This is the sort of thing that we always think very carefully \\nabout, because people may be currently using queries \\nlike this, and depending on them, and so we are hesitant \\nto disrupt functionality that is currently operational for fear \\nof breaking existing applications. \\n\\n In this particular case, we can see by using the Subversion \\\"annotate\\\" feature \\n http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/orderby.out?view=annotate  \\n that the particular query was changed by   DERBY-2351   in revision 637529: \\n http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/orderby.out?r1=637528&amp;r2=637529&amp;  \\n\\n I think that the next step is probably to have a close review of the \\n  DERBY-2351   notes and try to understand why the   DERBY-2351   changes \\nare in conflict with the changes in your proposed patch. \\n\\n It\'s quite possible that your patch is implementing the desired behavior, \\nbut it would better still if we can understand why   DERBY-2351   felt that \\nthe other behavior was desirable. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12861668\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12861668&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12861668\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12861668_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861668_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 03:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T03:53:44+0000\'\u003e28\\/Apr\\/10 03:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Bryan,\u003c\\/p\u003e\\n\\n\u003cp\u003eOkey, I understood the importance.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will study on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2351\\\" title=\\\"ORDER BY with expression with distinct in the select list returns incorrect result\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2351\\\"\u003e\u003cdel\u003eDERBY-2351\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12861668_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12861668_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/10 03:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-28T03:53:44+0000\'\u003e28\\/Apr\\/10 03:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Bryan, \\n\\n Okey, I understood the importance. \\n\\n I will study on   DERBY-2351  . \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12862039\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12862039&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12862039\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12862039_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12862039_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Apr\\/10 00:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-29T00:59:31+0000\'\u003e29\\/Apr\\/10 00:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Bryan,\u003c\\/p\u003e\\n\\n\u003cp\u003eAs I understood after going through \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2351\\\" title=\\\"ORDER BY with expression with distinct in the select list returns incorrect result\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2351\\\"\u003e\u003cdel\u003eDERBY-2351\u003c\\/del\u003e\u003c\\/a\u003e, we must allow queries like:\u003c\\/p\u003e\\n\\n\u003cp\u003eselect distinct i from t order by i*2\u003c\\/p\u003e\\n\\n\u003cp\u003e          should be allow as this functionality may have been using by Derby users, in there applications. Derby allows this is because i is there in the distinct even though i*2 is not there.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, if we follow this rule it implies that:\u003cbr\\/\u003e\\n select distinct * from t order by i*2\u003cbr\\/\u003e\\n       is also allow.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo check whether a column reference in a distinct is contained in this order by column I have to perform a check for each operand in both ways (j*2 and 2*j).\u003c\\/p\u003e\\n\\n\u003cp\u003eI have attached a patch proposal. Your reviews are highly appreciated.\u003c\\/p\u003e\\n\\n\u003cp\u003eNote: This patch is not tend to handle queries like below:\u003cbr\\/\u003e\\nselect distinct i from t order by random()\u003cbr\\/\u003e\\nselect distinct i from t order by j*2*3;\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12862039_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12862039_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Apr\\/10 00:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-29T00:59:31+0000\'\u003e29\\/Apr\\/10 00:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Bryan, \\n\\n As I understood after going through   DERBY-2351  , we must allow queries like: \\n\\n select distinct i from t order by i*2 \\n\\n           should be allow as this functionality may have been using by Derby users, in there applications. Derby allows this is because i is there in the distinct even though i*2 is not there. \\n\\n So, if we follow this rule it implies that: \\n select distinct * from t order by i*2 \\n       is also allow. \\n\\n To check whether a column reference in a distinct is contained in this order by column I have to perform a check for each operand in both ways (j*2 and 2*j). \\n\\n I have attached a patch proposal. Your reviews are highly appreciated. \\n\\n Note: This patch is not tend to handle queries like below: \\nselect distinct i from t order by random() \\nselect distinct i from t order by j*2*3; \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12862345\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12862345&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12862345\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12862345_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12862345_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Apr\\/10 18:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-29T18:52:36+0000\'\u003e29\\/Apr\\/10 18:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Nirmal,\u003c\\/p\u003e\\n\\n\u003cp\u003eIf I understand correctly, the patch only addresses the case with a binary operator with one numeric constant operand and one result column operand. Unfortunately, that\'s just one out of an infinite number of possible shapes the ORDER BY clause could take, and we cannot address each one of those cases individually, so I think we should aim for a more general approach.\u003c\\/p\u003e\\n\\n\u003cp\u003ePerhaps this would work:\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen DISTINCT is specified, do this for each OrderByColumn:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Check if there\'s a column in the target\'s result column list with an equivalent expression (can be checked with the isEquivalent() method in ValueNode). If there is one, this OrderByColumn is OK.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Otherwise, collect all columns referenced by the expression in the OrderByColumn (CollectNodesVisitor could probably do this for you), and check if all the columns are also in the target\'s result column list. If they all are, the OrderByColumn is OK. If not, throw an exception.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12862345_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12862345_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Apr\\/10 18:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-29T18:52:36+0000\'\u003e29\\/Apr\\/10 18:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Nirmal, \\n\\n If I understand correctly, the patch only addresses the case with a binary operator with one numeric constant operand and one result column operand. Unfortunately, that\'s just one out of an infinite number of possible shapes the ORDER BY clause could take, and we cannot address each one of those cases individually, so I think we should aim for a more general approach. \\n\\n Perhaps this would work: \\n\\n When DISTINCT is specified, do this for each OrderByColumn: \\n\\n 1) Check if there\'s a column in the target\'s result column list with an equivalent expression (can be checked with the isEquivalent() method in ValueNode). If there is one, this OrderByColumn is OK. \\n\\n 2) Otherwise, collect all columns referenced by the expression in the OrderByColumn (CollectNodesVisitor could probably do this for you), and check if all the columns are also in the target\'s result column list. If they all are, the OrderByColumn is OK. If not, throw an exception.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12863315\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12863315&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12863315\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12863315_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863315_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 11:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T11:40:25+0000\'\u003e03\\/May\\/10 11:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Knut, for reviewing the patch, yes me too felt that it is too generic and thanks for suggesting me possible two ways, that was really helpful. I think the most appropriate way is the second way, since we want queries like select distinct c1, c2 from t1 order by c1+1 to be valid.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4371\\\" title=\\\"Non-selected columns for SELECT DISTINCT allowed in ORDER BY clause if ordered by expression\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4371\\\"\u003e\u003cdel\u003eDERBY-4371\u003c\\/del\u003e\u003c\\/a\u003e-4.diff contains the new modifications. Highly appreciate reviews from all of you. Thanks.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am now running the tests.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12863315_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863315_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 11:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T11:40:25+0000\'\u003e03\\/May\\/10 11:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Knut, for reviewing the patch, yes me too felt that it is too generic and thanks for suggesting me possible two ways, that was really helpful. I think the most appropriate way is the second way, since we want queries like select distinct c1, c2 from t1 order by c1+1 to be valid. \\n\\n The patch   DERBY-4371  -4.diff contains the new modifications. Highly appreciate reviews from all of you. Thanks. \\n\\n I am now running the tests.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12863347\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12863347&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12863347\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12863347_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863347_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 13:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T13:36:44+0000\'\u003e03\\/May\\/10 13:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Knut Anders Hatlen - 03\\/May\\/10 13:37\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Nirmal,\u003c\\/p\u003e\\n\\n\u003cp\u003eSorry for not being clear. I didn\'t mean to suggest two different approaches, but one approach with two steps. If we only implement step 2, we won\'t allow statements like this one (which are allowed according to the standard):\u003c\\/p\u003e\\n\\n\u003cp\u003eSELECT DISTINCT C1+1 FROM T ORDER BY C1+1\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12863347_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863347_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 13:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T13:36:44+0000\'\u003e03\\/May\\/10 13:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Knut Anders Hatlen - 03\\/May\\/10 13:37\\\"\u003eedited\u003c\\/span\u003e                   Hi Nirmal, \\n\\n Sorry for not being clear. I didn\'t mean to suggest two different approaches, but one approach with two steps. If we only implement step 2, we won\'t allow statements like this one (which are allowed according to the standard): \\n\\n SELECT DISTINCT C1+1 FROM T ORDER BY C1+1              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12863356\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12863356&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12863356\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12863356_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863356_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 14:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T14:04:50+0000\'\u003e03\\/May\\/10 14:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Knut,\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s okey. With a slight modification I managed to use 2) and it worked fine.\u003cbr\\/\u003e\\nMethod:\u003cbr\\/\u003e\\nIt checks the ColumnReferences in distinct clause (using CollectNodesVisitor ), with ColumnReferences in OrderByColumn.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis successfully allow the above query.\u003c\\/p\u003e\\n\\n\u003cp\u003eAny thoughts of this approach? \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12863356_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863356_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 14:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T14:04:50+0000\'\u003e03\\/May\\/10 14:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Knut, \\n\\n It\'s okey. With a slight modification I managed to use 2) and it worked fine. \\nMethod: \\nIt checks the ColumnReferences in distinct clause (using CollectNodesVisitor ), with ColumnReferences in OrderByColumn. \\n\\n This successfully allow the above query. \\n\\n Any thoughts of this approach?               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12863382\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12863382&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12863382\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12863382_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863382_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 15:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T15:39:20+0000\'\u003e03\\/May\\/10 15:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Nirmal,\u003c\\/p\u003e\\n\\n\u003cp\u003eAfter a quick look at the patch, I have these comments:\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t think the CollectNodesVisitor should be used on the expressions in the select list, as that would allow too many queries to be executed. For example, the #4 patch will allow this statement:\u003c\\/p\u003e\\n\\n\u003cp\u003e    select distinct i*j from t1 order by i\\/j\u003c\\/p\u003e\\n\\n\u003cp\u003eThis statement should be rejected because none of the columns I or J, or the expression I\\/J are contained directly in the select list (both I and J are in an expression in the select list, but not on the top level, so there\'s no functional dependency between the columns in the select list and the expression in the order by clause).\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m not sure if it\'s enough to check the name of the columns to see if it\'s the same column, as they may refer to columns in different tables. Perhaps ColumnReference.isEquivalent() would work better?\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t think column names should be compared with String.equalsIgnoreCase(), as column names are case sensitive. For example, I think this select statement is supposed to fail because \\\"I\\\" is not the same column as \\\"i\\\":\u003c\\/p\u003e\\n\\n\u003cp\u003eij&gt; create table t2(\\\"I\\\" int , \\\"i\\\" int);\u003cbr\\/\u003e\\n0 rows inserted\\/updated\\/deleted\u003cbr\\/\u003e\\nij&gt; select distinct \\\"I\\\"+1 from t2 order by \\\"i\\\"+1;\u003cbr\\/\u003e\\n1          \u003cbr\\/\u003e\\n-----------\u003c\\/p\u003e\\n\\n\u003cp\u003e0 rows selected\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12863382_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863382_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 15:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T15:39:20+0000\'\u003e03\\/May\\/10 15:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Nirmal, \\n\\n After a quick look at the patch, I have these comments: \\n\\n I don\'t think the CollectNodesVisitor should be used on the expressions in the select list, as that would allow too many queries to be executed. For example, the #4 patch will allow this statement: \\n\\n     select distinct i*j from t1 order by i\\/j \\n\\n This statement should be rejected because none of the columns I or J, or the expression I\\/J are contained directly in the select list (both I and J are in an expression in the select list, but not on the top level, so there\'s no functional dependency between the columns in the select list and the expression in the order by clause). \\n\\n I\'m not sure if it\'s enough to check the name of the columns to see if it\'s the same column, as they may refer to columns in different tables. Perhaps ColumnReference.isEquivalent() would work better? \\n\\n I don\'t think column names should be compared with String.equalsIgnoreCase(), as column names are case sensitive. For example, I think this select statement is supposed to fail because \\\"I\\\" is not the same column as \\\"i\\\": \\n\\n ij&gt; create table t2(\\\"I\\\" int , \\\"i\\\" int); \\n0 rows inserted\\/updated\\/deleted \\nij&gt; select distinct \\\"I\\\"+1 from t2 order by \\\"i\\\"+1; \\n1           \\n----------- \\n\\n 0 rows selected              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12863409\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12863409&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12863409\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12863409_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863409_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 17:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T17:14:37+0000\'\u003e03\\/May\\/10 17:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Knut,\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for the comments.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll look into your first and second comments.\u003c\\/p\u003e\\n\\n\u003cp\u003eI printed out a column name given by ColumnReference.getColumnName(), though the column in the table is \'i\' it shows as \'I\'. To confirm this I created a new table with columns \'s\' and inserted some values to it, and issued select * command, and the result was displayed as \'S\'. That\'s why I used that method, but now only I knew that we can issue case sensitive column names, by adding within a quotation mark(\\\").\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12863409_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12863409_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/May\\/10 17:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-03T17:14:37+0000\'\u003e03\\/May\\/10 17:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Knut, \\n\\n Thanks for the comments. \\n\\n I\'ll look into your first and second comments. \\n\\n I printed out a column name given by ColumnReference.getColumnName(), though the column in the table is \'i\' it shows as \'I\'. To confirm this I created a new table with columns \'s\' and inserted some values to it, and issued select * command, and the result was displayed as \'S\'. That\'s why I used that method, but now only I knew that we can issue case sensitive column names, by adding within a quotation mark(\\\"). \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900258\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900258&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900258\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900258_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900258_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 11:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T11:50:00+0000\'\u003e19\\/Aug\\/10 11:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi,\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll resume my work on this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut I\'ve a small doubt. \u003cbr\\/\u003e\\nShould we allow following type of queries:\u003cbr\\/\u003e\\n\\\"select distinct i from t order by i\\/j;\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003ethanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900258_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900258_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 11:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T11:50:00+0000\'\u003e19\\/Aug\\/10 11:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, \\n\\n I\'ll resume my work on this issue. \\n\\n But I\'ve a small doubt.  \\nShould we allow following type of queries: \\n\\\"select distinct i from t order by i\\/j;\\\" \\n\\n thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900296\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900296&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900296\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lilywei\\\" id=\\\"commentauthor_12900296_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lilywei\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lilywei\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lily Wei\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900296_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 14:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T14:54:48+0000\'\u003e19\\/Aug\\/10 14:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Nirmal:\u003cbr\\/\u003e\\n     I am new to this issue. However, will \\\"select distinct i from t order by i\\/j\\\" fits in to 2) collect all columns referenced by the expression in the OrderByColumn (CollectNodesVisitor could probably do this for you), and check if all the columns are also in the target\'s result column list. If they all are, the OrderByColumn is OK. If not, throw an exception.  \\\"j\\\" is not in the column of target\'s result column list so we throw an exception. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"lilywei\\\" id=\\\"commentauthor_12900296_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=lilywei\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"lilywei\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Lily Wei\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900296_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 14:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T14:54:48+0000\'\u003e19\\/Aug\\/10 14:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Nirmal: \\n     I am new to this issue. However, will \\\"select distinct i from t order by i\\/j\\\" fits in to 2) collect all columns referenced by the expression in the OrderByColumn (CollectNodesVisitor could probably do this for you), and check if all the columns are also in the target\'s result column list. If they all are, the OrderByColumn is OK. If not, throw an exception.  \\\"j\\\" is not in the column of target\'s result column list so we throw an exception.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900304\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900304&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900304\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900304_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900304_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 15:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T15:06:43+0000\'\u003e19\\/Aug\\/10 15:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Lily,\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for the reply. \u003c\\/p\u003e\\n\\n\u003cp\u003eI got confused with Knut\'s last post \u003c\\/p\u003e\\n\\n\u003cp\u003ei.e.   select distinct i*j from t1 order by i\\/j\u003cbr\\/\u003e\\nThis statement should be rejected because none of the columns I or J, or the expression I\\/J are contained directly in the select list (both I and J are in an expression in the select list, but not on the top level, so there\'s no functional dependency between the columns in the select list and the expression in the order by clause). \u003c\\/p\u003e\\n\\n\u003cp\u003eWhat you think? Isn\'t this implies as it\'s enough to have I OR J? May be Knut accidentally mistyped it.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900304_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900304_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 15:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T15:06:43+0000\'\u003e19\\/Aug\\/10 15:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Lily, \\n\\n Thanks for the reply.  \\n\\n I got confused with Knut\'s last post  \\n\\n i.e.   select distinct i*j from t1 order by i\\/j \\nThis statement should be rejected because none of the columns I or J, or the expression I\\/J are contained directly in the select list (both I and J are in an expression in the select list, but not on the top level, so there\'s no functional dependency between the columns in the select list and the expression in the order by clause).  \\n\\n What you think? Isn\'t this implies as it\'s enough to have I OR J? May be Knut accidentally mistyped it. \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900326\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900326&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900326\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900326_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900326_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T15:57:37+0000\'\u003e19\\/Aug\\/10 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi,\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m attaching patch #5 which is capable of fixing this issue. \u003cbr\\/\u003e\\nIt would be nice if someone can review this.\u003c\\/p\u003e\\n\\n\u003cp\u003ePS: This will allow a query like\u003cbr\\/\u003e\\nselect distinct i from t order by i\\/j;\u003cbr\\/\u003e\\n for now. After I get clarified whether this type of \u003cbr\\/\u003e\\nquery is valid, I\'ll update the patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900326_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900326_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T15:57:37+0000\'\u003e19\\/Aug\\/10 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, \\n\\n I\'m attaching patch #5 which is capable of fixing this issue.  \\nIt would be nice if someone can review this. \\n\\n PS: This will allow a query like \\nselect distinct i from t order by i\\/j; \\n for now. After I get clarified whether this type of  \\nquery is valid, I\'ll update the patch. \\n\\n Thanks.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900327\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900327&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900327\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12900327_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900327_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 15:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T15:58:56+0000\'\u003e19\\/Aug\\/10 15:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Should we allow following type of queries:\u003cbr\\/\u003e\\n&gt; \\\"select distinct i from t order by i\\/j;\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eNo, this query should not be allowed. Consider the table\u003c\\/p\u003e\\n\\n\u003cp\u003e i  |  j  | i\\/j\u003cbr\\/\u003e\\n---------------\u003cbr\\/\u003e\\n100 |  10 | 10\u003cbr\\/\u003e\\n100 | 100 |  1\u003cbr\\/\u003e\\n200 |  40 |  5\u003cbr\\/\u003e\\n  3 |   1 |  3\u003c\\/p\u003e\\n\\n\u003cp\u003eHere, the ORDER BY clause is ambiguous, because it\'s not clear whether\u003cbr\\/\u003e\\n100 should be the first value or the last value in the result.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12900327_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900327_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 15:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T15:58:56+0000\'\u003e19\\/Aug\\/10 15:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Should we allow following type of queries: \\n&gt; \\\"select distinct i from t order by i\\/j;\\\" \\n\\n No, this query should not be allowed. Consider the table \\n\\n  i  |  j  | i\\/j \\n--------------- \\n100 |  10 | 10 \\n100 | 100 |  1 \\n200 |  40 |  5 \\n  3 |   1 |  3 \\n\\n Here, the ORDER BY clause is ambiguous, because it\'s not clear whether \\n100 should be the first value or the last value in the result.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900336\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900336&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900336\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900336_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900336_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 16:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T16:17:28+0000\'\u003e19\\/Aug\\/10 16:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Knut,\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for the explanation! \u003cbr\\/\u003e\\nI\'ll update the patch soon!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900336_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900336_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 16:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T16:17:28+0000\'\u003e19\\/Aug\\/10 16:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Knut, \\n\\n Thanks for the explanation!  \\nI\'ll update the patch soon!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900352\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900352&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900352\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900352_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900352_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T16:46:14+0000\'\u003e19\\/Aug\\/10 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching the updated patch. Following our few queries which I\'ve tested:\u003c\\/p\u003e\\n\\n\u003cp\u003eFailing queries:\u003cbr\\/\u003e\\nselect distinct i from t order by j;\u003cbr\\/\u003e\\nselect distinct i from t order by j*2;\u003cbr\\/\u003e\\nselect distinct i,j*3 from t order by j*2;\u003cbr\\/\u003e\\nselect distinct i from t order by i*2,j*3;\u003cbr\\/\u003e\\nselect distinct i*j from t order by i\\/j;\u003cbr\\/\u003e\\nselect distinct i from t order by -j;\u003cbr\\/\u003e\\nselect distinct i from t order by i\\/j;\u003c\\/p\u003e\\n\\n\u003cp\u003ePassing queries:\u003cbr\\/\u003e\\nselect distinct i,j from t order by j;\u003cbr\\/\u003e\\nselect distinct i,j from t order by j*2;\u003cbr\\/\u003e\\nselect distinct i,j*2 from t order by j*2;\u003cbr\\/\u003e\\nselect distinct i,j from t order by i*2,j*3;\u003cbr\\/\u003e\\nselect distinct * from t order by j*2, i*3;\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900352_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900352_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/10 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-19T16:46:14+0000\'\u003e19\\/Aug\\/10 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching the updated patch. Following our few queries which I\'ve tested: \\n\\n Failing queries: \\nselect distinct i from t order by j; \\nselect distinct i from t order by j*2; \\nselect distinct i,j*3 from t order by j*2; \\nselect distinct i from t order by i*2,j*3; \\nselect distinct i*j from t order by i\\/j; \\nselect distinct i from t order by -j; \\nselect distinct i from t order by i\\/j; \\n\\n Passing queries: \\nselect distinct i,j from t order by j; \\nselect distinct i,j from t order by j*2; \\nselect distinct i,j*2 from t order by j*2; \\nselect distinct i,j from t order by i*2,j*3; \\nselect distinct * from t order by j*2, i*3; \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900664\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900664&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900664\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12900664_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900664_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/10 10:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-20T10:58:49+0000\'\u003e20\\/Aug\\/10 10:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the patch, Nirmal. This looks promising! I found the new logic in bindOrderByColumn() a bit hard to follow, though, mainly because of the many nesting levels. Do you think it is possible to factor out some of that code into helper methods to improve the readability?\u003c\\/p\u003e\\n\\n\u003cp\u003eIt would be great if you could add the queries you posted above to one of the regression tests (both the ones that are expected to work, and those that are expected to fail).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12900664_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900664_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/10 10:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-20T10:58:49+0000\'\u003e20\\/Aug\\/10 10:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the patch, Nirmal. This looks promising! I found the new logic in bindOrderByColumn() a bit hard to follow, though, mainly because of the many nesting levels. Do you think it is possible to factor out some of that code into helper methods to improve the readability? \\n\\n It would be great if you could add the queries you posted above to one of the regression tests (both the ones that are expected to work, and those that are expected to fail).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900665\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900665&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900665\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12900665_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900665_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/10 11:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-20T11:02:56+0000\'\u003e20\\/Aug\\/10 11:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ebindOrderByColumn() doesn\'t seem to handle the case where the CollectNodeVisitor returns an empty list. For example, these two queries used to work, but now they fail:\u003c\\/p\u003e\\n\\n\u003cp\u003eij&gt; select distinct i from t order by 1+1;\u003cbr\\/\u003e\\nERROR 42879: The ORDER BY clause may not contain column \'null\', since the query specifies DISTINCT and that column does not appear in the query result.\u003cbr\\/\u003e\\nij&gt; select distinct i from t order by random();\u003cbr\\/\u003e\\nERROR 42879: The ORDER BY clause may not contain column \'null\', since the query specifies DISTINCT and that column does not appear in the query result.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12900665_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900665_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/10 11:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-20T11:02:56+0000\'\u003e20\\/Aug\\/10 11:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    bindOrderByColumn() doesn\'t seem to handle the case where the CollectNodeVisitor returns an empty list. For example, these two queries used to work, but now they fail: \\n\\n ij&gt; select distinct i from t order by 1+1; \\nERROR 42879: The ORDER BY clause may not contain column \'null\', since the query specifies DISTINCT and that column does not appear in the query result. \\nij&gt; select distinct i from t order by random(); \\nERROR 42879: The ORDER BY clause may not contain column \'null\', since the query specifies DISTINCT and that column does not appear in the query result.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900684\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900684&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900684\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900684_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900684_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/10 13:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-20T13:08:33+0000\'\u003e20\\/Aug\\/10 13:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Knut,\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for reviewing the patch!\u003c\\/p\u003e\\n\\n\u003cp\u003eI have attached the patch #6, this will allow those queries you have mentioned and broke the code into another method for the ease of read.\u003c\\/p\u003e\\n\\n\u003cp\u003ePS: I\'ll attach a different patch including the changes to the orderby.out.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900684_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900684_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/10 13:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-20T13:08:33+0000\'\u003e20\\/Aug\\/10 13:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Knut, \\n\\n Thanks for reviewing the patch! \\n\\n I have attached the patch #6, this will allow those queries you have mentioned and broke the code into another method for the ease of read. \\n\\n PS: I\'ll attach a different patch including the changes to the orderby.out. \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12900800\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12900800&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12900800\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900800_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900800_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/10 18:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-20T18:00:48+0000\'\u003e20\\/Aug\\/10 18:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi,\u003c\\/p\u003e\\n\\n\u003cp\u003eHere\'s the diff of tests added. Tests ran successfully in my environment.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12900800_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12900800_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Aug\\/10 18:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-20T18:00:48+0000\'\u003e20\\/Aug\\/10 18:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi, \\n\\n Here\'s the diff of tests added. Tests ran successfully in my environment. \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12901435\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12901435&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12901435\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12901435_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12901435_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Aug\\/10 15:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-23T15:17:57+0000\'\u003e23\\/Aug\\/10 15:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Nirmal, the new patch was easier to read. And thanks for adding all the test cases.\u003c\\/p\u003e\\n\\n\u003cp\u003eI believe the code is correct, but it\'s still somewhat tricky to understand, especially because of the nesting levels and the way it breaks out of the loops. Here are some suggestions that I think would make the code easier to follow:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) Reduce the nesting level in the else branch in bindOrderByColumn(). Instead of the current code with two levels\u003c\\/p\u003e\\n\\n\u003cp\u003e        if (addedColumnOffset &gt;= 0 &amp;&amp; ....) {\u003cbr\\/\u003e\\n            if (!expressionMatch(target)) {\u003c\\/p\u003e\\n\\n\u003cp\u003emerge them into one if statement:\u003c\\/p\u003e\\n\\n\u003cp\u003e    if (addedColumnOffset &gt;= 0 &amp;&amp; ....\u003cbr\\/\u003e\\n        &amp;&amp; !expressionMatch(target)) {\u003c\\/p\u003e\\n\\n\u003cp\u003e2. Instead of breaking out of the loop in bindOrderByColumn() with the \\\"break\\\" keyword when a non-matching column is found, just throw the exception immediately. Then it\'s easier to see what the effect of a mismatch is.\u003c\\/p\u003e\\n\\n\u003cp\u003e3. Given that the \\\"throw\\\" statement is moved inside the loop as part of comment (2), there\'s no need to check explicitly whether the list of collected nodes was empty, so \\\"if(collectNodesVisitor.getList().isEmpty())\\\" can be removed.\u003c\\/p\u003e\\n\\n\u003cp\u003e4. The results of some sub-expressions could be put in to local variables to avoid having to repeat them. For example, target.getResultColumns() in expressionMatch(), and target.getResultColumns() and target.getResultColumns().getResultColumn\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/information.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e.getExpression() in columnMatchFound().\u003c\\/p\u003e\\n\\n\u003cp\u003e5. The loop in columnMatchFound() could be simplified by returning true immediately when a match is found, instead of setting a flag and then checking the flag further down in the loop body.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12901435_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12901435_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Aug\\/10 15:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-23T15:17:57+0000\'\u003e23\\/Aug\\/10 15:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Nirmal, the new patch was easier to read. And thanks for adding all the test cases. \\n\\n I believe the code is correct, but it\'s still somewhat tricky to understand, especially because of the nesting levels and the way it breaks out of the loops. Here are some suggestions that I think would make the code easier to follow: \\n\\n 1) Reduce the nesting level in the else branch in bindOrderByColumn(). Instead of the current code with two levels \\n\\n         if (addedColumnOffset &gt;= 0 &amp;&amp; ....) { \\n            if (!expressionMatch(target)) { \\n\\n merge them into one if statement: \\n\\n     if (addedColumnOffset &gt;= 0 &amp;&amp; .... \\n        &amp;&amp; !expressionMatch(target)) { \\n\\n 2. Instead of breaking out of the loop in bindOrderByColumn() with the \\\"break\\\" keyword when a non-matching column is found, just throw the exception immediately. Then it\'s easier to see what the effect of a mismatch is. \\n\\n 3. Given that the \\\"throw\\\" statement is moved inside the loop as part of comment (2), there\'s no need to check explicitly whether the list of collected nodes was empty, so \\\"if(collectNodesVisitor.getList().isEmpty())\\\" can be removed. \\n\\n 4. The results of some sub-expressions could be put in to local variables to avoid having to repeat them. For example, target.getResultColumns() in expressionMatch(), and target.getResultColumns() and target.getResultColumns().getResultColumn .getExpression() in columnMatchFound(). \\n\\n 5. The loop in columnMatchFound() could be simplified by returning true immediately when a match is found, instead of setting a flag and then checking the flag further down in the loop body.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12901760\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12901760&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12901760\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12901760_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12901760_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/10 07:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-24T07:51:20+0000\'\u003e24\\/Aug\\/10 07:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Knut,\u003c\\/p\u003e\\n\\n\u003cp\u003ePatch #7 is included the modifications that you\'ve suggested.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12901760_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12901760_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/10 07:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-24T07:51:20+0000\'\u003e24\\/Aug\\/10 07:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Knut, \\n\\n Patch #7 is included the modifications that you\'ve suggested. \\n\\n Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12902398\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12902398&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12902398\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12902398_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12902398_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Aug\\/10 12:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-25T12:11:21+0000\'\u003e25\\/Aug\\/10 12:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you, Nirmal! The #7 patch looks good to me. I\'ve checked it in along with the new test cases.\u003c\\/p\u003e\\n\\n\u003cp\u003eCommitted revision 989048.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12902398_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12902398_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Aug\\/10 12:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-25T12:11:21+0000\'\u003e25\\/Aug\\/10 12:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you, Nirmal! The #7 patch looks good to me. I\'ve checked it in along with the new test cases. \\n\\n Committed revision 989048.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12902405\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=12902405&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12902405\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12902405_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12902405_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Aug\\/10 12:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-25T12:32:14+0000\'\u003e25\\/Aug\\/10 12:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Knut for committing the patch!! \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"nirmal\\\" id=\\\"commentauthor_12902405_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=nirmal\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"nirmal\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Nirmal Fernando\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12902405_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Aug\\/10 12:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-08-25T12:32:14+0000\'\u003e25\\/Aug\\/10 12:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Knut for committing the patch!!               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13685164\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4371?focusedCommentId=13685164&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13685164\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13685164_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13685164_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/13 09:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-06-17T09:19:13+0000\'\u003e17\\/Jun\\/13 09:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;bulk update&#93;\u003c\\/span\u003e Close all resolved issues that haven\'t been updated for more than one year.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13685164_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13685164_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/13 09:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-06-17T09:19:13+0000\'\u003e17\\/Jun\\/13 09:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;bulk update&#93;  Close all resolved issues that haven\'t been updated for more than one year.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239808059"> 
    <input type="hidden" title="jira.request.server.time" value="251"> 
    <input type="hidden" title="jira.request.id" value="530x94404814x2"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="1"> 
    <input type="hidden" title="db.reads.time.in.ms" value="49"> 
    <input type="hidden" title="db.conns.time.in.ms" value="55"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 530x94404814x2
	          REQUEST TIMESTAMP : [05/Mar/2018:08:50:08 +0000]
	               REQUEST TIME : 0.2510
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 1

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=23, elapsedTotal=49215819, elapsedMin=702004, elapsedMax=13646047, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=27, elapsedTotal=55511181, elapsedMin=745433, elapsedMax=13666755, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>