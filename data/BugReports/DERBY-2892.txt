<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|930ce95f779bac8c9f08b8727a4bf40dc5479016|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"e4d8670283c40c\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-2892"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-2892] Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-2892] Closing a resultset after retrieving a large > 32665 bytes value with Network Server does not release locks - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2892">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-2892" href="/jira/browse/DERBY-2892" id="key-val" rel="12372921">DERBY-2892</a></li>
                </ol>
                <h1 id="summary-val">Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2892"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-2892/DERBY-2892.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-2892/DERBY-2892.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-2892/DERBY-2892.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-2892/DERBY-2892.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/critical.svg" title="Critical - Crashes, loss of data, severe memory leak." width="16"> Critical </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.2.2.0 ">10.2.2.0</span>, <span title="10.3.1.4 ">10.3.1.4</span>, <span title="10.3.2.1 ">10.3.2.1</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.3.0" title="10.3.3.0 ">10.3.3.0</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.1.3" title="10.4.1.3 ">10.4.1.3</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.1.1" title="10.5.1.1 build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09">10.5.1.1</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12372921-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value">
                     JDK: build 1.6.0_01-b06 (WinXP &amp; Gentoo/SuSE)
                    <br> Hardware: Intel x86
                    <br> Client/Server environment 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310050" class="item"> 
                     <div class="wrap"> 
                      <strong title="Urgency" class="name">Urgency:</strong> 
                      <div id="customfield_12310050-val" class="value type-select" data-fieldtype="select" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        Normal 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Regression</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>This is the same issue as <a href="https://issues.apache.org/jira/browse/DERBY-255" title="Closing a resultset after retrieving a large > 32K value with Network Server does not release locks" class="issue-link" data-issue-key="DERBY-255"><del>DERBY-255</del></a> (<a href="https://issues.apache.org/jira/browse/DERBY-255" class="external-link" rel="nofollow">https://issues.apache.org/jira/browse/DERBY-255</a>). The test attached to <a href="https://issues.apache.org/jira/browse/DERBY-255" title="Closing a resultset after retrieving a large > 32K value with Network Server does not release locks" class="issue-link" data-issue-key="DERBY-255"><del>DERBY-255</del></a> shows the locks being not released. Everything is fine when using Derby 10.1.3.1 .</p> 
                  <p>I would think it's a regression bug.</p> 
                  <p>Output from sysinfo:</p> 
                  <p>------------------ Java-Informationen ------------------<br> Java-Version: 1.6.0_01<br> Java-Anbieter: Sun Microsystems Inc.<br> Java-Home: C:\work\applications\development\java\jdk1.6u1-SE\jre<br> Java-Klassenpfad: C:\work\applications\development\derby-10.2.2.0/lib/derby.jar;C:\work\applications\development\derby-<br> 0.2.2.0/lib/derbynet.jar;C:\work\applications\development\derby-10.2.2.0/lib/derbyclient.jar;C:\work\applications\devel<br> pment\derby-10.2.2.0/lib/derbytools.jar<br> Name des Betriebssystems: Windows XP<br> Architektur des Betriebssystems: x86<br> Betriebssystemversion: 5.1<br> Java-Benutzername: thomas.niessen<br> Java-Benutzerausgangsverzeichnis: C:\Dokumente und Einstellungen\thomas.niessen<br> Java-Benutzerverzeichnis: C:\work\applications\development\derby-10.2.2.0<br> java.specification.name: Java Platform API Specification<br> java.specification.version: 1.6<br> --------- Derby-Informationen --------<br> JRE - JDBC: Java SE 6 - JDBC 4.0<br> <span class="error">[C:\work\applications\development\derby-10.2.2.0\lib\derby.jar]</span> 10.2.2.0 - (485682)<br> <span class="error">[C:\work\applications\development\derby-10.2.2.0\lib\derbytools.jar]</span> 10.2.2.0 - (485682)<br> <span class="error">[C:\work\applications\development\derby-10.2.2.0\lib\derbynet.jar]</span> 10.2.2.0 - (485682)<br> <span class="error">[C:\work\applications\development\derby-10.2.2.0\lib\derbyclient.jar]</span> 10.2.2.0 - (485682)<br> ------------------------------------------------------<br> ----------------- Informationen zur Lõndereinstellung -----------------<br> Aktuelle Lõndereinstellung: [Deutsch/Deutschland <span class="error">[de_DE]</span>]<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[cs]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[de_DE]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[es]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[fr]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[hu]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[it]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[ja_JP]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[ko_KR]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[pl]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[pt_BR]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[ru]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[zh_CN]</span><br> Version: 10.2.2.0 - (485682)<br> Es wurde Unterst³tzung f³r die folgende Lõndereinstellung gefunden: <span class="error">[zh_TW]</span><br> Version: 10.2.2.0 - (485682)</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-2892?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-2892?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-2892?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-2892?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12361629" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12361629/DERBY-2892_07_10_07_try1_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY-2892_07_10_07_try1_diff.txt:https://issues.apache.org/jira/secure/attachment/12361629/DERBY-2892_07_10_07_try1_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12361629/DERBY-2892_07_10_07_try1_diff.txt" title="Latest  12/Jul/07 00:47 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:DERBY-2892_07_10_07_try1_diff.txt:https://issues.apache.org/jira/secure/attachment/12361629/DERBY-2892_07_10_07_try1_diff.txt">DERBY-2892_07_10_07_try1_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-12T00:47:54.694Z">12/Jul/07 00:47</time>
                   </dd>
                   <dd class="attachment-size">
                    15 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12361630" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12361630/DERBY-2892_07_10_07_try1_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY-2892_07_10_07_try1_stat.txt:https://issues.apache.org/jira/secure/attachment/12361630/DERBY-2892_07_10_07_try1_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12361630/DERBY-2892_07_10_07_try1_stat.txt" title="Latest  12/Jul/07 00:48 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:DERBY-2892_07_10_07_try1_stat.txt:https://issues.apache.org/jira/secure/attachment/12361630/DERBY-2892_07_10_07_try1_stat.txt">DERBY-2892_07_10_07_try1_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-12T00:48:19.383Z">12/Jul/07 00:48</time>
                   </dd>
                   <dd class="attachment-size">
                    0.4 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12361815" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12361815/DERBY-2892_07_13_07_try2_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY-2892_07_13_07_try2_diff.txt:https://issues.apache.org/jira/secure/attachment/12361815/DERBY-2892_07_13_07_try2_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12361815/DERBY-2892_07_13_07_try2_diff.txt" title="Latest  13/Jul/07 20:21 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:DERBY-2892_07_13_07_try2_diff.txt:https://issues.apache.org/jira/secure/attachment/12361815/DERBY-2892_07_13_07_try2_diff.txt">DERBY-2892_07_13_07_try2_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-13T20:21:49.843Z">13/Jul/07 20:21</time>
                   </dd>
                   <dd class="attachment-size">
                    14 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12361816" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12361816/DERBY-2892_07_13_07_try2_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY-2892_07_13_07_try2_stat.txt:https://issues.apache.org/jira/secure/attachment/12361816/DERBY-2892_07_13_07_try2_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12361816/DERBY-2892_07_13_07_try2_stat.txt" title="Latest  13/Jul/07 20:22 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:DERBY-2892_07_13_07_try2_stat.txt:https://issues.apache.org/jira/secure/attachment/12361816/DERBY-2892_07_13_07_try2_stat.txt">DERBY-2892_07_13_07_try2_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-13T20:22:58.146Z">13/Jul/07 20:22</time>
                   </dd>
                   <dd class="attachment-size">
                    0.7 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12380868" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12380868/derby-2892_10.3_try1_diff.txt" draggable="true" data-downloadurl="text/plain:derby-2892_10.3_try1_diff.txt:https://issues.apache.org/jira/secure/attachment/12380868/derby-2892_10.3_try1_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12380868/derby-2892_10.3_try1_diff.txt" title="Latest  24/Apr/08 20:36 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:derby-2892_10.3_try1_diff.txt:https://issues.apache.org/jira/secure/attachment/12380868/derby-2892_10.3_try1_diff.txt">derby-2892_10.3_try1_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-04-24T20:36:54.873Z">24/Apr/08 20:36</time>
                   </dd>
                   <dd class="attachment-size">
                    26 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12370296" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12370296/derby-2892.diff" draggable="true" data-downloadurl="text/x-patch:derby-2892.diff:https://issues.apache.org/jira/secure/attachment/12370296/derby-2892.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12370296/derby-2892.diff" title="Latest  27/Nov/07 13:10 - Øystein Grøvlen" draggable="true" data-downloadurl="text/x-patch:derby-2892.diff:https://issues.apache.org/jira/secure/attachment/12370296/derby-2892.diff">derby-2892.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-11-27T13:10:38.459Z">27/Nov/07 13:10</time>
                   </dd>
                   <dd class="attachment-size">
                    19 kB
                   </dd>
                   <dd class="attachment-author">
                    Øystein Grøvlen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12379200" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12379200/derby-2892-1a-alternative_fix_partial.diff" draggable="true" data-downloadurl="text/x-patch:derby-2892-1a-alternative_fix_partial.diff:https://issues.apache.org/jira/secure/attachment/12379200/derby-2892-1a-alternative_fix_partial.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12379200/derby-2892-1a-alternative_fix_partial.diff" title="Latest  02/Apr/08 23:02 - Kristian Waagan" draggable="true" data-downloadurl="text/x-patch:derby-2892-1a-alternative_fix_partial.diff:https://issues.apache.org/jira/secure/attachment/12379200/derby-2892-1a-alternative_fix_partial.diff">derby-2892-1a-alternative_fix_partial.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-04-02T23:02:11.835Z">02/Apr/08 23:02</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Kristian Waagan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12379716" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12379716/derby-2892-1b-alternative_fix_partial.diff" draggable="true" data-downloadurl="text/x-patch:derby-2892-1b-alternative_fix_partial.diff:https://issues.apache.org/jira/secure/attachment/12379716/derby-2892-1b-alternative_fix_partial.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12379716/derby-2892-1b-alternative_fix_partial.diff" title="Latest  09/Apr/08 10:21 - Kristian Waagan" draggable="true" data-downloadurl="text/x-patch:derby-2892-1b-alternative_fix_partial.diff:https://issues.apache.org/jira/secure/attachment/12379716/derby-2892-1b-alternative_fix_partial.diff">derby-2892-1b-alternative_fix_partial.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-04-09T10:21:01.809Z">09/Apr/08 10:21</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Kristian Waagan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12379717" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12379717/derby-2892-2a-alternative_fix_cleanup.diff" draggable="true" data-downloadurl="text/x-patch:derby-2892-2a-alternative_fix_cleanup.diff:https://issues.apache.org/jira/secure/attachment/12379717/derby-2892-2a-alternative_fix_cleanup.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12379717/derby-2892-2a-alternative_fix_cleanup.diff" title="Latest  09/Apr/08 10:29 - Kristian Waagan" draggable="true" data-downloadurl="text/x-patch:derby-2892-2a-alternative_fix_cleanup.diff:https://issues.apache.org/jira/secure/attachment/12379717/derby-2892-2a-alternative_fix_cleanup.diff">derby-2892-2a-alternative_fix_cleanup.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-04-09T10:29:50.867Z">09/Apr/08 10:29</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Kristian Waagan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12369878" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12369878/derby-2892firstshot.diff" draggable="true" data-downloadurl="text/x-patch:derby-2892firstshot.diff:https://issues.apache.org/jira/secure/attachment/12369878/derby-2892firstshot.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12369878/derby-2892firstshot.diff" title="Latest  20/Nov/07 12:53 - Øystein Grøvlen" draggable="true" data-downloadurl="text/x-patch:derby-2892firstshot.diff:https://issues.apache.org/jira/secure/attachment/12369878/derby-2892firstshot.diff">derby-2892firstshot.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-11-20T12:53:41.164Z">20/Nov/07 12:53</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Øystein Grøvlen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12361631" data-issue-id="12372921" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12361631/protocolErrorRepro.zip" draggable="true" data-downloadurl="application/zip:protocolErrorRepro.zip:https://issues.apache.org/jira/secure/attachment/12361631/protocolErrorRepro.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-zip" title="Zip Archive"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12361631/protocolErrorRepro.zip" title="Latest  12/Jul/07 00:56 - Kathey Marsden" draggable="true" data-downloadurl="application/zip:protocolErrorRepro.zip:https://issues.apache.org/jira/secure/attachment/12361631/protocolErrorRepro.zip">protocolErrorRepro.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-12T00:56:05.700Z">12/Jul/07 00:56</time>
                   </dd>
                   <dd class="attachment-size">
                    181 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="depends upon">
                   depends upon
                  </dt> 
                  <dd id="internal-12379542_10001"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3098: LOB locks are not released after free()."> <a href="/jira/browse/DERBY-3098" data-issue-key="DERBY-3098" class="issue-link link-title resolution">DERBY-3098</a> <span class="link-summary">LOB locks are not released after free().</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-32162_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-255: Closing a resultset after retrieving a large > 32K value with Network Server does not release locks"> <a href="/jira/browse/DERBY-255" data-issue-key="DERBY-255" class="issue-link link-title resolution">DERBY-255</a> <span class="link-summary">Closing a resultset after retrieving a large &gt; 32K value with Network Server does not release locks</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12375265_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-2990: ResultSet.getBlob holds locks even with READ_UNCOMMITTED isolation level"> <a href="/jira/browse/DERBY-2990" data-issue-key="DERBY-2990" class="issue-link link-title resolution">DERBY-2990</a> <span class="link-summary">ResultSet.getBlob holds locks even with READ_UNCOMMITTED isolation level</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12392355_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3571: LOB locators are not released if the LOB columns are not accessed by the client"> <a href="/jira/browse/DERBY-3571" data-issue-key="DERBY-3571" class="issue-link link-title resolution">DERBY-3571</a> <span class="link-summary">LOB locators are not released if the LOB columns are not accessed by the client</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-31583_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-208: Add support to retrieve lobs for Network Server by locator rather than matierializing the LOB"> <a href="/jira/browse/DERBY-208" data-issue-key="DERBY-208" class="issue-link link-title resolution">DERBY-208</a> <span class="link-summary">Add support to retrieve lobs for Network Server by locator rather than matierializing the LOB</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-32988_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-326: Improve streaming of large objects for network server and client"> <a href="/jira/browse/DERBY-326" data-issue-key="DERBY-326" class="issue-link link-title resolution">DERBY-326</a> <span class="link-summary">Improve streaming of large objects for network server and client</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list collapsed-links-list"> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12373682_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-2933: When  network server disconnects due to an I/O Exception it does not always log the exception that caused the error"> <a href="/jira/browse/DERBY-2933" data-issue-key="DERBY-2933" class="issue-link link-title">DERBY-2933</a> <span class="link-summary">When network server disconnects due to an I/O Exception it does not always log the exception that caused the error</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12394964_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3650: internal multiple references from different rows to a single BLOB/CLOB stream leads to various errors when second reference used."> <a href="/jira/browse/DERBY-3650" data-issue-key="DERBY-3650" class="issue-link link-title resolution">DERBY-3650</a> <span class="link-summary">internal multiple references from different rows to a single BLOB/CLOB stream leads to various errors when second reference used.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12392732_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-3583: Derby should throw a better error message if a BLOB/CLOB column is accessed more than once"> <a href="/jira/browse/DERBY-3583" data-issue-key="DERBY-3583" class="issue-link link-title resolution">DERBY-3583</a> <span class="link-summary">Derby should throw a better error message if a BLOB/CLOB column is accessed more than once</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <div id="show-more-links"> 
                  <button class="aui-button aui-button-link" id="show-more-links-link">Show 4 more links</button> 
                  <span>(1 is related to, 3 relates to)</span> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="view-subtasks" class="module toggle-wrap">
               <div id="view-subtasks_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="subtask-view-options" class="aui-list-section aui-first aui-last">
                     <li class="aui-list-item"><a id="subtasks-show-all" href="/jira/browse/DERBY-2892?subTaskView=all#issuetable" class="aui-list-checked aui-checked aui-list-item-link" title="Show All"><span>Show All</span></a></li>
                     <li class="aui-list-item"><a id="subtasks-show-open" href="/jira/browse/DERBY-2892?subTaskView=unresolved#issuetable" class="aui-list-checked aui-list-item-link" title="Show Open"><span>Show Open</span></a></li>
                     <li class="aui-list-item"><a id="subtasks-bulk-operation" href="/jira/issue/bulkedit/BulkEdit1!default.jspa?reset=true&amp;searchParent=DERBY-2892" class="aui-list-checked aui-list-item-link" title="Bulk operation"><span>Bulk operation</span></a></li>
                     <li class="aui-list-item"><a id="subtasks-open-issue-navigator" href="/jira/issues/?jql=parent%3DDERBY-2892" class="aui-list-checked aui-list-item-link" title="Open issue navigator"><span>Open issue navigator</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Sub-Tasks</h2>
               </div>
               <div class="mod-content">
                <div class="mod-content intform subtask-table-container"> 
                 <issuetable-web-component> 
                  <table id="issuetable"> 
                   <tbody>
                    <tr id="issuerow12373904" rel="12373904" data-issuekey="DERBY-2941" class="issuerow"> 
                     <td class="stsequence">
                      <div rel="0" class="subtask-done">
                       1.
                      </div> </td> 
                     <td class="stsummary"><a class="issue-link" data-issue-key="DERBY-2941" href="/jira/browse/DERBY-2941">With 10.2, Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks</a></td> 
                     <td class="issuetype"> <a class="issue-link" data-issue-key="DERBY-2941" href="/jira/browse/DERBY-2941"> <img src="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue"> </a> </td> 
                     <td class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </td> 
                     <td class="assignee"> <span class="tinylink"><a class="user-hover" rel="kmarsden" id="assignee_kmarsden" href="/jira/secure/ViewProfile.jspa?name=kmarsden">Kathey Marsden</a></span> </td> 
                    </tr> 
                   </tbody> 
                  </table> 
                 </issuetable-web-component> 
                 <div class="end-of-stable-message"></div> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_kristwaa" rel="kristwaa" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Kristian Waagan&quot;,&quot;emailAddress&quot;:&quot;kristwaa@apache.org&quot;,&quot;username&quot;:&quot;kristwaa&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="kristwaa"></span></span> Kristian Waagan </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_tomes" rel="tomes" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Thomas Niessen&quot;,&quot;emailAddress&quot;:&quot;thomas.niessen@scopevisio.com&quot;,&quot;username&quot;:&quot;tomes&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="tomes"></span></span> Thomas Niessen </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">4</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">2</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="03/Jul/07 15:18"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2007-07-03T15:18:39+0000">03/Jul/07 15:18</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="02/May/13 02:29"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-05-02T02:29:09+0000">02/May/13 02:29</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="25/Apr/08 15:46"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-04-25T15:46:51+0000">25/Apr/08 15:46</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2892?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-2892?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12510530\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12510530&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510530\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510530_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510530_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 00:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T00:01:37+0000\'\u003e06\\/Jul\\/07 00:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI verified that this is a regression in 10.2 and still exists in the trunk.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510530_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510530_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 00:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T00:01:37+0000\'\u003e06\\/Jul\\/07 00:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I verified that this is a regression in 10.2 and still exists in the trunk. \\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510716\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12510716&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510716\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510716_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510716_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 15:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T15:59:40+0000\'\u003e06\\/Jul\\/07 15:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLinking to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-255\\\" title=\\\"Closing a resultset after retrieving a large &gt; 32K value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-255\\\"\u003e\u003cdel\u003eDERBY-255\u003c\\/del\u003e\u003c\\/a\u003e since this is a regression of that fix.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510716_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510716_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 15:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T15:59:40+0000\'\u003e06\\/Jul\\/07 15:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Linking to   DERBY-255   since this is a regression of that fix.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510721\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12510721&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510721\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510721_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510721_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T16:13:33+0000\'\u003e06\\/Jul\\/07 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt looks like this regressed with the checkin of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-326\\\" title=\\\"Improve streaming of large objects for network server and client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-326\\\"\u003e\u003cdel\u003eDERBY-326\u003c\\/del\u003e\u003c\\/a\u003e (svn 405037).  This is when the lock timeout was reintroduced to the client canon for blobclob4blob\u003cbr\\/\u003e\\n179014   kmarsden START: clobTest92\u003cbr\\/\u003e\\n405037       tmnk FAIL &#8211; unexpected exception ****************\u003cbr\\/\u003e\\n405037       tmnk SQLSTATE(40XL1): A lock could not be obtained within the time requested\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510721_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510721_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T16:13:33+0000\'\u003e06\\/Jul\\/07 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It looks like this regressed with the checkin of   DERBY-326   (svn 405037).  This is when the lock timeout was reintroduced to the client canon for blobclob4blob \\n179014   kmarsden START: clobTest92 \\n405037       tmnk FAIL &#8211; unexpected exception **************** \\n405037       tmnk SQLSTATE(40XL1): A lock could not be obtained within the time requested \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510722\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12510722&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510722\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510722_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510722_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 16:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T16:15:17+0000\'\u003e06\\/Jul\\/07 16:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChanging to critical since this is a regression that is likely to be hit by users.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510722_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510722_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 16:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T16:15:17+0000\'\u003e06\\/Jul\\/07 16:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Changing to critical since this is a regression that is likely to be hit by users.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510761\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12510761&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510761\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510761_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510761_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 18:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T18:57:57+0000\'\u003e06\\/Jul\\/07 18:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThomas, what JDBC API call are you using? I see the test clobTest92 is doing a getClob() which legitimately holds locks.  It is ResultSet.getCharacterStream(), ResultSet.getString(), ResultSet.getBinaryStream() and ResultSet.getBytes() that should not hold locks after the ResultSet is closed.  For some reason today when I run the repro for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-255\\\" title=\\\"Closing a resultset after retrieving a large &gt; 32K value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-255\\\"\u003e\u003cdel\u003eDERBY-255\u003c\\/del\u003e\u003c\\/a\u003e,  I\'m not seeing the locks being held although I was sure I saw it yesterday so I am getting a bit confused.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510761_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510761_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 18:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T18:57:57+0000\'\u003e06\\/Jul\\/07 18:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thomas, what JDBC API call are you using? I see the test clobTest92 is doing a getClob() which legitimately holds locks.  It is ResultSet.getCharacterStream(), ResultSet.getString(), ResultSet.getBinaryStream() and ResultSet.getBytes() that should not hold locks after the ResultSet is closed.  For some reason today when I run the repro for   DERBY-255  ,  I\'m not seeing the locks being held although I was sure I saw it yesterday so I am getting a bit confused.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510812\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12510812&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510812\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510812_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510812_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 22:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T22:17:53+0000\'\u003e06\\/Jul\\/07 22:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI checked in a test jdbcapi\\/LargeDataLocksTest.java \u003cbr\\/\u003e\\nDate: Fri Jul  6 15:11:12 2007\u003cbr\\/\u003e\\nNew Revision: 554073\u003c\\/p\u003e\\n\\n\u003cp\u003eURL: \u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc?view=rev&amp;rev=554073\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc?view=rev&amp;rev=554073\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eto add test coverage for ResultSet.getCharacterStream(), ResultSet.getString(), ResultSet.getBinaryStream() and ResultSet.getBytes()  with large values to make sure locks are not being held.  I am beginning to think that I may have panicked when seeing this regression filed. I can\'t seem to reproduce now.  Anyway I will leave this open until we hear from Thomas. Perhaps we can get a change to the new test that shows a regression or perhaps he is just using getBlob()\\/getClob() and locks are expected to stick around until the end of the transaction.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510812_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510812_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 22:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T22:17:53+0000\'\u003e06\\/Jul\\/07 22:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I checked in a test jdbcapi\\/LargeDataLocksTest.java  \\nDate: Fri Jul  6 15:11:12 2007 \\nNew Revision: 554073 \\n\\n URL:  http:\\/\\/svn.apache.org\\/viewvc?view=rev&amp;rev=554073  \\n\\n to add test coverage for ResultSet.getCharacterStream(), ResultSet.getString(), ResultSet.getBinaryStream() and ResultSet.getBytes()  with large values to make sure locks are not being held.  I am beginning to think that I may have panicked when seeing this regression filed. I can\'t seem to reproduce now.  Anyway I will leave this open until we hear from Thomas. Perhaps we can get a change to the new test that shows a regression or perhaps he is just using getBlob()\\/getClob() and locks are expected to stick around until the end of the transaction. \\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510820\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12510820&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510820\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510820_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510820_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 22:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T22:55:58+0000\'\u003e06\\/Jul\\/07 22:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eApparently I had an older server running on my machine.  I am now able to reproduce and the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-255\\\" title=\\\"Closing a resultset after retrieving a large &gt; 32K value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-255\\\"\u003e\u003cdel\u003eDERBY-255\u003c\\/del\u003e\u003c\\/a\u003e repro on 10.3 and the  LargeDataLocksTest fails on trunk.  I disabled this test for client until this bug is fixed.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12510820_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510820_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 22:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T22:55:58+0000\'\u003e06\\/Jul\\/07 22:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Apparently I had an older server running on my machine.  I am now able to reproduce and the   DERBY-255   repro on 10.3 and the  LargeDataLocksTest fails on trunk.  I disabled this test for client until this bug is fixed. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511086\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511086&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511086\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12511086_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511086_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 11:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T11:16:39+0000\'\u003e09\\/Jul\\/07 11:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey\'s comment seems to imply that getClob should cause the CLOB data to be locked while getCharacterStream should not.  Is this behavior defined by the JDBC or SQL standards?  It does not seem obvious to me that a Clob object representing a CLOB in the database should have different stability requirements from an InputStream object on the same CLOB. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12511086_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511086_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 11:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T11:16:39+0000\'\u003e09\\/Jul\\/07 11:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey\'s comment seems to imply that getClob should cause the CLOB data to be locked while getCharacterStream should not.  Is this behavior defined by the JDBC or SQL standards?  It does not seem obvious to me that a Clob object representing a CLOB in the database should have different stability requirements from an InputStream object on the same CLOB.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511211\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511211&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511211\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511211_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511211_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 18:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T18:11:00+0000\'\u003e09\\/Jul\\/07 18:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eClob and Blob explicitly state that they are valid for the duration of the transaction in which they are created.\u003c\\/p\u003e\\n\\n\u003cp\u003egetBinaryStream says:\u003cbr\\/\u003e\\n\\\"Note: All the data in the returned stream must be read prior to getting the value of any other column. The next call to a getter method implicitly closes the stream\\\",  implying that the stream is much shorter lived.\u003c\\/p\u003e\\n\\n\u003cp\u003egetCharacterStream does not say one way or another, but I assume it is parallel with  getBinaryStream().\u003c\\/p\u003e\\n\\n\u003cp\u003eNetwork server does not know the difference between what was called in JDBC, getBlob() vs getBinaryStream() vs getBytes()  for example.  Prior to the fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-326\\\" title=\\\"Improve streaming of large objects for network server and client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-326\\\"\u003e\u003cdel\u003eDERBY-326\u003c\\/del\u003e\u003c\\/a\u003e, Network Server would always call getBinaryStream() instead of getBlob and getCharacterStream() rather than getClob().  Since the lobs were materialized on the client we could still preserve the Blobs and Clobs until the end of the transaction.  I am not sure how this might be different now with the locator work and how changing back to getBinaryStream() getCharacterStream() calls would impact that.\u003c\\/p\u003e\\n\\n\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511211_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511211_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 18:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T18:11:00+0000\'\u003e09\\/Jul\\/07 18:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Clob and Blob explicitly state that they are valid for the duration of the transaction in which they are created. \\n\\n getBinaryStream says: \\n\\\"Note: All the data in the returned stream must be read prior to getting the value of any other column. The next call to a getter method implicitly closes the stream\\\",  implying that the stream is much shorter lived. \\n\\n getCharacterStream does not say one way or another, but I assume it is parallel with  getBinaryStream(). \\n\\n Network server does not know the difference between what was called in JDBC, getBlob() vs getBinaryStream() vs getBytes()  for example.  Prior to the fix for   DERBY-326  , Network Server would always call getBinaryStream() instead of getBlob and getCharacterStream() rather than getClob().  Since the lobs were materialized on the client we could still preserve the Blobs and Clobs until the end of the transaction.  I am not sure how this might be different now with the locator work and how changing back to getBinaryStream() getCharacterStream() calls would impact that. \\n\\n\\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511246\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511246&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511246\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511246_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511246_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T20:21:02+0000\'\u003e09\\/Jul\\/07 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere seem to be additional complications in 10.3 vs 10.2.  In 10.3 the getString and getCharacterStream calls request a lob locator which does a getObject (getBlob\\/getClob())  \u003c\\/p\u003e\\n\\n\u003cp\u003eAs for a 10.2 fix I played with changing the Blob.getBinaryStream and Clob.getCharacterStream calls to ResultSet.getBinaryStream and ResultSet.getCharacterStream.  The trouble is that the current implementation makes these calls twice, which is not allowed. Once to see if the stream is empty and then again with this code in \u003cbr\\/\u003e\\nEXTDTAInputStream:\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e\\t    boolean exist = is.read() &gt; -1;\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t    is.close();\u003cbr\\/\u003e\\n\\t    is = null;\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t    if(exist)\u003c\\/p\u003e\\n{\\n\\t\\topenInputStreamAgain(rs,column,ndrdaType);\\n\\t    } \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511246_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511246_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T20:21:02+0000\'\u003e09\\/Jul\\/07 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There seem to be additional complications in 10.3 vs 10.2.  In 10.3 the getString and getCharacterStream calls request a lob locator which does a getObject (getBlob\\/getClob())   \\n\\n As for a 10.2 fix I played with changing the Blob.getBinaryStream and Clob.getCharacterStream calls to ResultSet.getBinaryStream and ResultSet.getCharacterStream.  The trouble is that the current implementation makes these calls twice, which is not allowed. Once to see if the stream is empty and then again with this code in  \\nEXTDTAInputStream: \\n\\n\\n \\t    boolean exist = is.read() &gt; -1; \\n\\n \\t    is.close(); \\n\\t    is = null; \\n\\n \\t    if(exist) \\n{\\n\\t\\topenInputStreamAgain(rs,column,ndrdaType);\\n\\t    }             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511451\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511451&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511451\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12511451_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511451_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/07 14:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-10T14:00:56+0000\'\u003e10\\/Jul\\/07 14:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey Marsden (JIRA) wrote:\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; Clob and Blob explicitly state that they are valid for the duration\u003cbr\\/\u003e\\n&gt; of the transaction in which they are created.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhile I have been aware of this, I have not interpreted this to mean\u003cbr\\/\u003e\\nthat the value could not change, just that it should be possible to\u003cbr\\/\u003e\\nuse it to access the underlying LOB column.  However, I think you\u003cbr\\/\u003e\\nright that in the context of result sets one would expect the LOB\u003cbr\\/\u003e\\nobject to represent a LOB value, not a LOB column.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; \u003cbr\\/\u003e\\n&gt; getBinaryStream says:\u003cbr\\/\u003e\\n&gt; \\\"Note: All the data in the returned stream must be read prior to\u003cbr\\/\u003e\\n&gt; getting the value of any other column. The next call to a getter\u003cbr\\/\u003e\\n&gt; method implicitly closes the stream\\\", implying that the stream is\u003cbr\\/\u003e\\n&gt; much shorter lived.\u003c\\/p\u003e\\n\\n\u003cp\u003eThank you for making you aware of this.  I guess I should have studied\u003cbr\\/\u003e\\nthe API doc better.  Is the \\\"implicitly closes\\\" part implemented by\u003cbr\\/\u003e\\nDerby?  I can not remember to have seen any code for this.  \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; \u003cbr\\/\u003e\\n&gt; getCharacterStream does not say one way or another, but I assume it\u003cbr\\/\u003e\\n&gt; is parallel with getBinaryStream().\u003c\\/p\u003e\\n\\n\u003cp\u003egetAsciiStream says the same as getBinaryStream(). \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; \u003cbr\\/\u003e\\n&gt; Network server does not know the difference between what was called\u003cbr\\/\u003e\\n&gt; in JDBC, getBlob() vs getBinaryStream() vs getBytes() for example.\u003cbr\\/\u003e\\n&gt; Prior to the fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-326\\\" title=\\\"Improve streaming of large objects for network server and client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-326\\\"\u003e\u003cdel\u003eDERBY-326\u003c\\/del\u003e\u003c\\/a\u003e, Network Server would always call\u003cbr\\/\u003e\\n&gt; getBinaryStream() instead of getBlob and getCharacterStream() rather\u003cbr\\/\u003e\\n&gt; than getClob().  Since the lobs were materialized on the client we\u003cbr\\/\u003e\\n&gt; could still preserve the Blobs and Clobs until the end of the\u003cbr\\/\u003e\\n&gt; transaction.  I am not sure how this might be different now with the\u003cbr\\/\u003e\\n&gt; locator work and how changing back to getBinaryStream()\u003cbr\\/\u003e\\n&gt; getCharacterStream() calls would impact that.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith locators all operations in the network server are performed on\u003cbr\\/\u003e\\nBlob\\/Clob objects.  For example, InputStream.read will map to\u003cbr\\/\u003e\\nBlob.getBytes on the server.  Hence, I would assume that locks will be\u003cbr\\/\u003e\\nheld.  I have not checked, but this may now be true even for the\u003cbr\\/\u003e\\nembedded driver.  I see two possible solutions to this problem:\u003c\\/p\u003e\\n\\n\u003cp\u003e  1. Change how the locking is done.  Maybe one could provide away to\u003cbr\\/\u003e\\n     release locks when they are no longer needed.\u003cbr\\/\u003e\\n  2. Make a copy of the LOB value and allow concurrent updates.  In\u003cbr\\/\u003e\\n     10.3 this is now possible since there is a mechanism for making\u003cbr\\/\u003e\\n     temporary copies of LOBs.  In order for this to be efficient, we\u003cbr\\/\u003e\\n     should only make a copy when necessary. Hence, a copy-on-write\u003cbr\\/\u003e\\n     mechanism would be useful.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnother thing: \u003c\\/p\u003e\\n\\n\u003cp\u003eI noticed that in Ole\'s LOB compatibility testing for 10.3 that the\u003cbr\\/\u003e\\n10.3 version of the BlobClob4BlobTest, a locking test failed when\u003cbr\\/\u003e\\nrunning a 10.3 client with a 10.1 server (10.3 client with 10.2 server\u003cbr\\/\u003e\\nwent OK).  Does this mean that the test has been updated to accept\u003cbr\\/\u003e\\nthis faulty behavior?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12511451_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511451_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/07 14:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-10T14:00:56+0000\'\u003e10\\/Jul\\/07 14:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey Marsden (JIRA) wrote: \\n&gt;  \\n&gt; Clob and Blob explicitly state that they are valid for the duration \\n&gt; of the transaction in which they are created. \\n\\n While I have been aware of this, I have not interpreted this to mean \\nthat the value could not change, just that it should be possible to \\nuse it to access the underlying LOB column.  However, I think you \\nright that in the context of result sets one would expect the LOB \\nobject to represent a LOB value, not a LOB column. \\n\\n &gt;  \\n&gt; getBinaryStream says: \\n&gt; \\\"Note: All the data in the returned stream must be read prior to \\n&gt; getting the value of any other column. The next call to a getter \\n&gt; method implicitly closes the stream\\\", implying that the stream is \\n&gt; much shorter lived. \\n\\n Thank you for making you aware of this.  I guess I should have studied \\nthe API doc better.  Is the \\\"implicitly closes\\\" part implemented by \\nDerby?  I can not remember to have seen any code for this.   \\n\\n &gt;  \\n&gt; getCharacterStream does not say one way or another, but I assume it \\n&gt; is parallel with getBinaryStream(). \\n\\n getAsciiStream says the same as getBinaryStream().  \\n\\n &gt;  \\n&gt; Network server does not know the difference between what was called \\n&gt; in JDBC, getBlob() vs getBinaryStream() vs getBytes() for example. \\n&gt; Prior to the fix for   DERBY-326  , Network Server would always call \\n&gt; getBinaryStream() instead of getBlob and getCharacterStream() rather \\n&gt; than getClob().  Since the lobs were materialized on the client we \\n&gt; could still preserve the Blobs and Clobs until the end of the \\n&gt; transaction.  I am not sure how this might be different now with the \\n&gt; locator work and how changing back to getBinaryStream() \\n&gt; getCharacterStream() calls would impact that. \\n\\n With locators all operations in the network server are performed on \\nBlob\\/Clob objects.  For example, InputStream.read will map to \\nBlob.getBytes on the server.  Hence, I would assume that locks will be \\nheld.  I have not checked, but this may now be true even for the \\nembedded driver.  I see two possible solutions to this problem: \\n\\n   1. Change how the locking is done.  Maybe one could provide away to \\n     release locks when they are no longer needed. \\n  2. Make a copy of the LOB value and allow concurrent updates.  In \\n     10.3 this is now possible since there is a mechanism for making \\n     temporary copies of LOBs.  In order for this to be efficient, we \\n     should only make a copy when necessary. Hence, a copy-on-write \\n     mechanism would be useful. \\n\\n Another thing:  \\n\\n I noticed that in Ole\'s LOB compatibility testing for 10.3 that the \\n10.3 version of the BlobClob4BlobTest, a locking test failed when \\nrunning a 10.3 client with a 10.1 server (10.3 client with 10.2 server \\nwent OK).  Does this mean that the test has been updated to accept \\nthis faulty behavior?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511562\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511562&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511562\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511562_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511562_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/07 20:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-10T20:17:14+0000\'\u003e10\\/Jul\\/07 20:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003erev 405037 updated the blobclob4BLOB test to accept the timeout. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511562_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511562_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/07 20:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-10T20:17:14+0000\'\u003e10\\/Jul\\/07 20:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    rev 405037 updated the blobclob4BLOB test to accept the timeout.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511637\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511637&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511637\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511637_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511637_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/07 03:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-11T03:15:10+0000\'\u003e11\\/Jul\\/07 03:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI just thought I would give an update on my 10.2 work on this issue.  I tried switching EXTDTAInputStream to use ResultSet.getCharacterStream() and ResultSet.getBinaryStream.  Then instead of opening the stream again as was done with the Clob\\/Blob, I wrapped the binaryinputstream in a BufferedInputStream() so I could use mark() , read the first byte and then reset().  All of this worked for the repro for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-255\\\" title=\\\"Closing a resultset after retrieving a large &gt; 32K value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-255\\\"\u003e\u003cdel\u003eDERBY-255\u003c\\/del\u003e\u003c\\/a\u003e but has caused protocol errors in the blobclob4BLOB test.  Those I am still debugging. If anyone is interested in looking at the patch so far, I can attach it, otherwise I will just continue to work on it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511637_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511637_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jul\\/07 03:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-11T03:15:10+0000\'\u003e11\\/Jul\\/07 03:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I just thought I would give an update on my 10.2 work on this issue.  I tried switching EXTDTAInputStream to use ResultSet.getCharacterStream() and ResultSet.getBinaryStream.  Then instead of opening the stream again as was done with the Clob\\/Blob, I wrapped the binaryinputstream in a BufferedInputStream() so I could use mark() , read the first byte and then reset().  All of this worked for the repro for   DERBY-255   but has caused protocol errors in the blobclob4BLOB test.  Those I am still debugging. If anyone is interested in looking at the patch so far, I can attach it, otherwise I will just continue to work on it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511916\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511916&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511916\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511916_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511916_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 00:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T00:47:54+0000\'\u003e12\\/Jul\\/07 00:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am attaching a patch C:\\/kmarsden\\/patches\\/\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2892\\\" title=\\\"Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2892\\\"\u003e\u003cdel\u003eDERBY-2892\u003c\\/del\u003e\u003c\\/a\u003e_07_10_07_try1_diff.txt. THIS PATCH IS NOT FOR COMMIT.  It is my attempt so far to fix this issue in 10.2.  It does indeed resolve the problem with the locks, The new test jdbcapi\\/LargeDataLocks.java verifies the new locking behaviour, but causes a serious protocol error in some instances retrieving LOB values.    I have been staring at it for a long time and can\'t figure out what is wrong, so am hoping Bryan or other protocol expert can take a quick look and see perhaps something I have not thus far.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eI will attach the repro for the protocol error. Simply reversing the column order in the repro eliminates the error and comparing the old and new traces I don\'t see what could be causing the client to think it has hit the end of stream.  See the repro for more details and my previous comment for information on how the change was implemented.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511916_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511916_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 00:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T00:47:54+0000\'\u003e12\\/Jul\\/07 00:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am attaching a patch C:\\/kmarsden\\/patches\\/  DERBY-2892  _07_10_07_try1_diff.txt. THIS PATCH IS NOT FOR COMMIT.  It is my attempt so far to fix this issue in 10.2.  It does indeed resolve the problem with the locks, The new test jdbcapi\\/LargeDataLocks.java verifies the new locking behaviour, but causes a serious protocol error in some instances retrieving LOB values.    I have been staring at it for a long time and can\'t figure out what is wrong, so am hoping Bryan or other protocol expert can take a quick look and see perhaps something I have not thus far. \\n\\n\\n I will attach the repro for the protocol error. Simply reversing the column order in the repro eliminates the error and comparing the old and new traces I don\'t see what could be causing the client to think it has hit the end of stream.  See the repro for more details and my previous comment for information on how the change was implemented.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511918\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511918&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511918\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511918_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511918_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 00:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T00:56:05+0000\'\u003e12\\/Jul\\/07 00:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ehere is the java program and database to reproduce the protocol error. It is an exception from the client that it has reached eof, but debugging the server, I see that the server is queueing up the EXTDTA to send, but does not send it because the client disconnects.  Why the client disconnects and thinks it is at the end of data stream I cannot figure out.\u003c\\/p\u003e\\n\\n\u003cp\u003eNote: If you run this twice in a row the second time you will get a protocol error on the connection.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;C:\\/kmarsden\\/repro\\/derby-2892&#93;\u003c\\/span\u003e java TestDERBY2892\u003cbr\\/\u003e\\njava.sql.SQLException: Insufficient data while reading from the network - expected a minimum of 6 bytes and received onl\u003cbr\\/\u003e\\ny -1 bytes.  The connection has been terminated.\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:46)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:346)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.ResultSet.next(ResultSet.java:278)\u003cbr\\/\u003e\\n        at TestDERBY2892.clobTest0(TestDERBY2892.java:37)\u003cbr\\/\u003e\\n        at TestDERBY2892.main(TestDERBY2892.java:17)\u003cbr\\/\u003e\\nCaused by: org.apache.derby.client.am.DisconnectException: Insufficient data while reading from the network - expected a\u003cbr\\/\u003e\\n minimum of 6 bytes and received only -1 bytes.  The connection has been terminated.\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.Reply.fill(Reply.java:195)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.Reply.ensureALayerDataInBuffer(Reply.java:215)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.Reply.readDssHeader(Reply.java:317)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.Reply.peekCodePoint(Reply.java:1008)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.NetResultSetReply.parseCNTQRYreply(NetResultSetReply.java:133)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.NetResultSetReply.readFetch(NetResultSetReply.java:42)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.ResultSetReply.readFetch(ResultSetReply.java:41)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.NetResultSet.readFetch_(NetResultSet.java:206)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.ResultSet.flowFetch(ResultSet.java:4138)\u003cbr\\/\u003e\\n        at org.apache.derby.client.net.NetCursor.getMoreData_(NetCursor.java:1183)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.Cursor.stepNext(Cursor.java:176)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.Cursor.next(Cursor.java:195)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.ResultSet.nextX(ResultSet.java:299)\u003cbr\\/\u003e\\n        at org.apache.derby.client.am.ResultSet.next(ResultSet.java:269)\u003cbr\\/\u003e\\n        ... 2 more\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12511918_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511918_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 00:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T00:56:05+0000\'\u003e12\\/Jul\\/07 00:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    here is the java program and database to reproduce the protocol error. It is an exception from the client that it has reached eof, but debugging the server, I see that the server is queueing up the EXTDTA to send, but does not send it because the client disconnects.  Why the client disconnects and thinks it is at the end of data stream I cannot figure out. \\n\\n Note: If you run this twice in a row the second time you will get a protocol error on the connection. \\n\\n\\n  &#91;C:\\/kmarsden\\/repro\\/derby-2892&#93;  java TestDERBY2892 \\njava.sql.SQLException: Insufficient data while reading from the network - expected a minimum of 6 bytes and received onl \\ny -1 bytes.  The connection has been terminated. \\n        at org.apache.derby.client.am.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:46) \\n        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:346) \\n        at org.apache.derby.client.am.ResultSet.next(ResultSet.java:278) \\n        at TestDERBY2892.clobTest0(TestDERBY2892.java:37) \\n        at TestDERBY2892.main(TestDERBY2892.java:17) \\nCaused by: org.apache.derby.client.am.DisconnectException: Insufficient data while reading from the network - expected a \\n minimum of 6 bytes and received only -1 bytes.  The connection has been terminated. \\n        at org.apache.derby.client.net.Reply.fill(Reply.java:195) \\n        at org.apache.derby.client.net.Reply.ensureALayerDataInBuffer(Reply.java:215) \\n        at org.apache.derby.client.net.Reply.readDssHeader(Reply.java:317) \\n        at org.apache.derby.client.net.Reply.peekCodePoint(Reply.java:1008) \\n        at org.apache.derby.client.net.NetResultSetReply.parseCNTQRYreply(NetResultSetReply.java:133) \\n        at org.apache.derby.client.net.NetResultSetReply.readFetch(NetResultSetReply.java:42) \\n        at org.apache.derby.client.net.ResultSetReply.readFetch(ResultSetReply.java:41) \\n        at org.apache.derby.client.net.NetResultSet.readFetch_(NetResultSet.java:206) \\n        at org.apache.derby.client.am.ResultSet.flowFetch(ResultSet.java:4138) \\n        at org.apache.derby.client.net.NetCursor.getMoreData_(NetCursor.java:1183) \\n        at org.apache.derby.client.am.Cursor.stepNext(Cursor.java:176) \\n        at org.apache.derby.client.am.Cursor.next(Cursor.java:195) \\n        at org.apache.derby.client.am.ResultSet.nextX(ResultSet.java:299) \\n        at org.apache.derby.client.am.ResultSet.next(ResultSet.java:269) \\n        ... 2 more              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511923\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511923&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511923\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12511923_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511923_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 01:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T01:37:45+0000\'\u003e12\\/Jul\\/07 01:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Kathey, nothing immediately comes to mind, unfortunately.\u003c\\/p\u003e\\n\\n\u003cp\u003eDid you run the program with the DRDA protocol tracing (\u003ca href=\\\"http:\\/\\/wiki.apache.org\\/db-derby\\/ProtocolDebuggingTips\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/wiki.apache.org\\/db-derby\\/ProtocolDebuggingTips\u003c\\/a\u003e), and if so can you post the client and server traces?\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, can you briefly outline what the test program does? Does it read the entire LOB data from the first row before advancing to the next row? Or does it advance to the next row while there still remains unread LOB data from the previous row?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12511923_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511923_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 01:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T01:37:45+0000\'\u003e12\\/Jul\\/07 01:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Kathey, nothing immediately comes to mind, unfortunately. \\n\\n Did you run the program with the DRDA protocol tracing ( http:\\/\\/wiki.apache.org\\/db-derby\\/ProtocolDebuggingTips ), and if so can you post the client and server traces? \\n\\n Also, can you briefly outline what the test program does? Does it read the entire LOB data from the first row before advancing to the next row? Or does it advance to the next row while there still remains unread LOB data from the previous row?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511929\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511929&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511929\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12511929_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511929_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 02:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T02:00:40+0000\'\u003e12\\/Jul\\/07 02:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Simply reversing the column order in the repro eliminates the error\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is eerily familiar; it seems to me that we hit this same behavior in 10.3 during the locator development, but I don\'t remember anything more than that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12511929_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511929_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 02:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T02:00:40+0000\'\u003e12\\/Jul\\/07 02:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Simply reversing the column order in the repro eliminates the error \\n\\n This is eerily familiar; it seems to me that we hit this same behavior in 10.3 during the locator development, but I don\'t remember anything more than that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511945\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12511945&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511945\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12511945_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511945_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 02:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T02:42:45+0000\'\u003e12\\/Jul\\/07 02:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI see that there are two server DRDA trace files in the zip archive.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12511945_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511945_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 02:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T02:42:45+0000\'\u003e12\\/Jul\\/07 02:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I see that there are two server DRDA trace files in the zip archive.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512111\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512111&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512111\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512111_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512111_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 14:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T14:39:00+0000\'\u003e12\\/Jul\\/07 14:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIs there any evidence that you might be getting an exception on the server side just before the unexpected connection close? I\'ve seen code paths where a thrown exception causes the connection to be closed, and the symptoms are sometimes not so clear, pointing more at the closed connection than at the underlying exception which caused the close.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512111_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512111_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 14:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T14:39:00+0000\'\u003e12\\/Jul\\/07 14:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Is there any evidence that you might be getting an exception on the server side just before the unexpected connection close? I\'ve seen code paths where a thrown exception causes the connection to be closed, and the symptoms are sometimes not so clear, pointing more at the closed connection than at the underlying exception which caused the close.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512174\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512174&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512174\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512174_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512174_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T16:50:53+0000\'\u003e12\\/Jul\\/07 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;Is there any evidence that you might be getting an exception on the server side just before the unexpected connection close? \u003c\\/p\u003e\\n\\n\u003cp\u003eNo, the server does not throw an exception until it detects that the client is disconnected, when it is getting ready to flush the lob data.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;I see that there are two server DRDA trace files in the zip archive.\u003cbr\\/\u003e\\nServer1.trace.old is the trace with the unchanged server.\u003cbr\\/\u003e\\nServer1.trace.new is the trace with my changes.\u003cbr\\/\u003e\\nThere is no difference in the traces that I can detect up until the point the client disconnects.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;can you briefly outline what the test program does? Does it read the entire LOB data from the first row before advancing to the next row? Or does it advance to the next row while there still remains unread LOB data from the previous row?\u003c\\/p\u003e\\n\\n\u003cp\u003eIt reads the entire lob. for each row before advancing.  You can also reproduce with ij even by just retrieving the one offensive row.\u003cbr\\/\u003e\\nij&gt;  connect \'jdbc:derby:\\/\\/localhost:1527\\/wombat\';\u003cbr\\/\u003e\\nij(CONNECTION1)&gt; select a, b from testCLOB_MAIN where b = 10000;\u003cbr\\/\u003e\\nA\u003c\\/p\u003e\\n\u003cdiv class=\'table-wrap\'\u003e\\n\u003ctable class=\'confluenceTable\'\u003e\u003ctbody\u003e\\n\u003ctr\u003e\\n\u003ctd class=\'confluenceTd\'\u003eB\u003cbr\\/\u003e\\n------------------------------------------------------------------------------------------------------------------------\u003cbr\\/\u003e\\n--------------------\u003cbr\\/\u003e\\nERROR 58009: Insufficient data while reading from the network - expected a minimum of 6 bytes and received only -1 bytes\u003cbr\\/\u003e\\n.  The connection has been terminated.\u003cbr\\/\u003e\\nij(CONNECTION1)&gt;\u003c\\/td\u003e\\n\u003c\\/tr\u003e\\n\u003c\\/tbody\u003e\u003c\\/table\u003e\\n\u003c\\/div\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512174_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512174_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T16:50:53+0000\'\u003e12\\/Jul\\/07 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;Is there any evidence that you might be getting an exception on the server side just before the unexpected connection close?  \\n\\n No, the server does not throw an exception until it detects that the client is disconnected, when it is getting ready to flush the lob data. \\n\\n &gt;I see that there are two server DRDA trace files in the zip archive. \\nServer1.trace.old is the trace with the unchanged server. \\nServer1.trace.new is the trace with my changes. \\nThere is no difference in the traces that I can detect up until the point the client disconnects. \\n\\n &gt;can you briefly outline what the test program does? Does it read the entire LOB data from the first row before advancing to the next row? Or does it advance to the next row while there still remains unread LOB data from the previous row? \\n\\n It reads the entire lob. for each row before advancing.  You can also reproduce with ij even by just retrieving the one offensive row. \\nij&gt;  connect \'jdbc:derby:\\/\\/localhost:1527\\/wombat\'; \\nij(CONNECTION1)&gt; select a, b from testCLOB_MAIN where b = 10000; \\nA \\n \\n  \\n \\n B \\n------------------------------------------------------------------------------------------------------------------------ \\n-------------------- \\nERROR 58009: Insufficient data while reading from the network - expected a minimum of 6 bytes and received only -1 bytes \\n.  The connection has been terminated. \\nij(CONNECTION1)&gt; \\n \\n  \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512215\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512215&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512215\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512215_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512215_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 18:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T18:55:26+0000\'\u003e12\\/Jul\\/07 18:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Kathey! Just to be clear, to reproduce your results, I should:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ebuild a 10.2 server which contains your patch to the DRDA code\u003c\\/li\u003e\\n\\t\u003cli\u003estart up this 10.2 server against the database that\'s in your zip file\u003c\\/li\u003e\\n\\t\u003cli\u003euse a 10.2 client to run the test Java program that\'s in your zip file\u003c\\/li\u003e\\n\\t\u003cli\u003erun the test Java program a second time\u003cbr\\/\u003e\\nIs that the right instructions?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512215_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512215_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 18:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T18:55:26+0000\'\u003e12\\/Jul\\/07 18:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Kathey! Just to be clear, to reproduce your results, I should: \\n \\n\\t build a 10.2 server which contains your patch to the DRDA code \\n\\t start up this 10.2 server against the database that\'s in your zip file \\n\\t use a 10.2 client to run the test Java program that\'s in your zip file \\n\\t run the test Java program a second time \\nIs that the right instructions? \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512217\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512217&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512217\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512217_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512217_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 19:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T19:01:30+0000\'\u003e12\\/Jul\\/07 19:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\\n\u003cp\u003eThat is right Bryan except  running the test java program one time will reproduce the problem.  Running it a second time will produce a different error on connection which is a residual issue I think because there is risidual data in the buffer.  I don\'t think that we need to worry about that error if we fix the first one.  Running the java program a third time will reproduce the \u003cbr\\/\u003e\\ninsufficient data message again.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512217_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512217_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 19:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T19:01:30+0000\'\u003e12\\/Jul\\/07 19:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                   \\n That is right Bryan except  running the test java program one time will reproduce the problem.  Running it a second time will produce a different error on connection which is a residual issue I think because there is risidual data in the buffer.  I don\'t think that we need to worry about that error if we fix the first one.  Running the java program a third time will reproduce the  \\ninsufficient data message again. \\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512261\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512261&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512261\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512261_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512261_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 21:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T21:12:25+0000\'\u003e12\\/Jul\\/07 21:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Kathey. I can definitely reproduce the problem you\'re seeing.\u003c\\/p\u003e\\n\\n\u003cp\u003eGiven that the problem occurs with the patched EXTDTAInputStream, and does not occur with the stock 10.2 EXTDTAInputStream, it seems like it\'s worth studying those EXTDTAInputStream changes in depth to see how they might relate to this problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve been trying to understand this by building the code with and without the EXTDTAInputStream changes, and running the test case, trying to understand how the server\'s behavior changes with those changes.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo far, nothing of significance to report, though \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/sad.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512261_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512261_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 21:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T21:12:25+0000\'\u003e12\\/Jul\\/07 21:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Kathey. I can definitely reproduce the problem you\'re seeing. \\n\\n Given that the problem occurs with the patched EXTDTAInputStream, and does not occur with the stock 10.2 EXTDTAInputStream, it seems like it\'s worth studying those EXTDTAInputStream changes in depth to see how they might relate to this problem. \\n\\n I\'ve been trying to understand this by building the code with and without the EXTDTAInputStream changes, and running the test case, trying to understand how the server\'s behavior changes with those changes. \\n\\n So far, nothing of significance to report, though                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512285\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512285&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512285\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512285_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512285_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 22:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T22:18:46+0000\'\u003e12\\/Jul\\/07 22:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Kathey Marsden - 12\\/Jul\\/07 23:07\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBryan asked:\u003cbr\\/\u003e\\n&gt;Is there any evidence that you might be getting an exception on the server side just before the unexpected connection close?\u003c\\/p\u003e\\n\\n\u003cp\u003eStepping through this more carefully, I am seeing an IOException occurring in writeScalarStream() which is causing the disconnection.  Not sure why it is occurring, but it seems that we could benefit from better logging when such an exception occurs.\u003c\\/p\u003e\\n\\n\u003cp\u003eBelow is the trace of the server side I\\/O Exception.  There is no message.\u003cbr\\/\u003e\\nnull\u003cbr\\/\u003e\\njava.io.IOException\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.jdbc.UTF8Reader.read(UTF8Reader.java:97)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.ReEncodedInputStream.reEncode(ReEncodedInputStream.java:78)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.ReEncodedInputStream.read(ReEncodedInputStream.java:143)\u003cbr\\/\u003e\\n\\tat java.io.InputStream.read(InputStream.java:187)\u003cbr\\/\u003e\\n\\tat java.io.BufferedInputStream.fill(BufferedInputStream.java:229)\u003cbr\\/\u003e\\n\\tat java.io.BufferedInputStream.read(BufferedInputStream.java:246)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.EXTDTAInputStream.read(EXTDTAInputStream.java:118)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.DDMWriter.peekStream(DDMWriter.java:1969)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.DDMWriter.writeScalarStream(DDMWriter.java:719)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.DRDAConnThread.writeEXTDTA(DRDAConnThread.java:7806)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.DRDAConnThread.writeQRYDTA(DRDAConnThread.java:6351)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.DRDAConnThread.processCommands(DRDAConnThread.java:677)\u003cbr\\/\u003e\\n\\tat org.apache.derby.impl.drda.DRDAConnThread.run(DRDAConnThread.java:273)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512285_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512285_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 22:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T22:18:46+0000\'\u003e12\\/Jul\\/07 22:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Kathey Marsden - 12\\/Jul\\/07 23:07\\\"\u003eedited\u003c\\/span\u003e                   Bryan asked: \\n&gt;Is there any evidence that you might be getting an exception on the server side just before the unexpected connection close? \\n\\n Stepping through this more carefully, I am seeing an IOException occurring in writeScalarStream() which is causing the disconnection.  Not sure why it is occurring, but it seems that we could benefit from better logging when such an exception occurs. \\n\\n Below is the trace of the server side I\\/O Exception.  There is no message. \\nnull \\njava.io.IOException \\n\\tat org.apache.derby.impl.jdbc.UTF8Reader.read(UTF8Reader.java:97) \\n\\tat org.apache.derby.impl.drda.ReEncodedInputStream.reEncode(ReEncodedInputStream.java:78) \\n\\tat org.apache.derby.impl.drda.ReEncodedInputStream.read(ReEncodedInputStream.java:143) \\n\\tat java.io.InputStream.read(InputStream.java:187) \\n\\tat java.io.BufferedInputStream.fill(BufferedInputStream.java:229) \\n\\tat java.io.BufferedInputStream.read(BufferedInputStream.java:246) \\n\\tat org.apache.derby.impl.drda.EXTDTAInputStream.read(EXTDTAInputStream.java:118) \\n\\tat org.apache.derby.impl.drda.DDMWriter.peekStream(DDMWriter.java:1969) \\n\\tat org.apache.derby.impl.drda.DDMWriter.writeScalarStream(DDMWriter.java:719) \\n\\tat org.apache.derby.impl.drda.DRDAConnThread.writeEXTDTA(DRDAConnThread.java:7806) \\n\\tat org.apache.derby.impl.drda.DRDAConnThread.writeQRYDTA(DRDAConnThread.java:6351) \\n\\tat org.apache.derby.impl.drda.DRDAConnThread.processCommands(DRDAConnThread.java:677) \\n\\tat org.apache.derby.impl.drda.DRDAConnThread.run(DRDAConnThread.java:273)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512305\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512305&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512305\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512305_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512305_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 23:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T23:15:49+0000\'\u003e12\\/Jul\\/07 23:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLine 97 of UTF8Reader.java is this:\u003c\\/p\u003e\\n\\n\u003cp\u003e        public int read(char[] cbuf, int off, int len) throws IOException\u003cbr\\/\u003e\\n        {\u003cbr\\/\u003e\\n                synchronized (lock) {\u003cbr\\/\u003e\\n                        \\/\\/ check if closed..\u003cbr\\/\u003e\\n                        if (noMoreReads)\u003cbr\\/\u003e\\n                                throw new IOException();                   &lt;============ This is line 97\u003c\\/p\u003e\\n\\n\u003cp\u003eSo it would seem that it is complaining about an attempt to read a stream which is already closed?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512305_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512305_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/07 23:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-12T23:15:49+0000\'\u003e12\\/Jul\\/07 23:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Line 97 of UTF8Reader.java is this: \\n\\n         public int read(char[] cbuf, int off, int len) throws IOException \\n        { \\n                synchronized (lock) { \\n                        \\/\\/ check if closed.. \\n                        if (noMoreReads) \\n                                throw new IOException();                   &lt;============ This is line 97 \\n\\n So it would seem that it is complaining about an attempt to read a stream which is already closed?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512329\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512329&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512329\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512329_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512329_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 01:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T01:20:07+0000\'\u003e13\\/Jul\\/07 01:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMy first attempt to set a breakpoint on line 97 of UTF8Reader was not successful. I\'ll keep trying.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512329_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512329_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 01:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T01:20:07+0000\'\u003e13\\/Jul\\/07 01:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    My first attempt to set a breakpoint on line 97 of UTF8Reader was not successful. I\'ll keep trying.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512331\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512331&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512331\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512331_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512331_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 01:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T01:23:37+0000\'\u003e13\\/Jul\\/07 01:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBy \\\"not successful\\\", I mean that I didn\'t hit the breakpoint.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512331_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512331_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 01:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T01:23:37+0000\'\u003e13\\/Jul\\/07 01:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    By \\\"not successful\\\", I mean that I didn\'t hit the breakpoint.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512334\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512334&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512334\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512334_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512334_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 01:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T01:33:54+0000\'\u003e13\\/Jul\\/07 01:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePutting aside this specific test case for a minute, if you apply your patch to EXTDTAInputStream, do all the rest of the 10.2 regression tests pass successfully?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512334_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512334_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 01:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T01:33:54+0000\'\u003e13\\/Jul\\/07 01:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Putting aside this specific test case for a minute, if you apply your patch to EXTDTAInputStream, do all the rest of the 10.2 regression tests pass successfully?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512336\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512336&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512336\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512336_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512336_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 01:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T01:56:41+0000\'\u003e13\\/Jul\\/07 01:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks so much Bryan for your help.\u003cbr\\/\u003e\\nWell, I think I know what the problem is.  It comes straight from the getBinaryStream javadoc and I assume getCharacterStream works the same way.\u003c\\/p\u003e\\n\\n\u003cp\u003eNote: All the data in the returned stream must be read prior to getting the value of any other column. The next call to a getter method implicitly closes the stream. Also, a stream may return 0 when the method InputStream.available  is called whether there is data available or not.\u003c\\/p\u003e\\n\\n\u003cp\u003eSince we are doing the getInt() after the getCharacterStream(),  it closes the stream.  So, my patch is no good.  In order to use ResultSet.getCharacterStream, ResultSet.getBinaryStream() I am going to have to defer opening the stream until it is ready to send.  I\'ll see if that is possible.  I think it should be because we don\'t need to know if the stream is empty until that time. \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512336_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512336_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 01:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T01:56:41+0000\'\u003e13\\/Jul\\/07 01:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks so much Bryan for your help. \\nWell, I think I know what the problem is.  It comes straight from the getBinaryStream javadoc and I assume getCharacterStream works the same way. \\n\\n Note: All the data in the returned stream must be read prior to getting the value of any other column. The next call to a getter method implicitly closes the stream. Also, a stream may return 0 when the method InputStream.available  is called whether there is data available or not. \\n\\n Since we are doing the getInt() after the getCharacterStream(),  it closes the stream.  So, my patch is no good.  In order to use ResultSet.getCharacterStream, ResultSet.getBinaryStream() I am going to have to defer opening the stream until it is ready to send.  I\'ll see if that is possible.  I think it should be because we don\'t need to know if the stream is empty until that time.  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512339\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512339&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512339\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512339_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512339_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 02:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T02:11:22+0000\'\u003e13\\/Jul\\/07 02:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;Since we are doing the getInt() after the getCharacterStream(), it closes the stream.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks Kathey, that makes perfect sense. Good work on figuring this out!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12512339_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512339_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 02:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T02:11:22+0000\'\u003e13\\/Jul\\/07 02:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;Since we are doing the getInt() after the getCharacterStream(), it closes the stream. \\n\\n Thanks Kathey, that makes perfect sense. Good work on figuring this out!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512479\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512479&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512479\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512479_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512479_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 13:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T13:29:55+0000\'\u003e13\\/Jul\\/07 13:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWell deferring the opening of the stream until it is time to write the EXTDTA will not work because we need to know whether the value is null when we send the QRYDTA.  So I guess its back to the drawing board.  I don\'t have any good ideas for a fix at this point.  The 10.1 solution was to read the whole lob into memory.  I don\'t think we want to return to that for 10.2. Oystein had mentioned the possibility of changing the locking behavior as a solution, but I am way out of my league in that area so won\'t pursue that for 10.2.  Hopefully if it is changed for 10.3, we can backport the fix.\u003c\\/p\u003e\\n\\n\u003cp\u003eOystein mentioned two possibilities for 10.3\u003c\\/p\u003e\\n\\n\u003cp\u003e  1. Change how the locking is done. Maybe one could provide away to\u003cbr\\/\u003e\\n     release locks when they are no longer needed.\u003c\\/p\u003e\\n\\n\u003cp\u003eBy this do you mean to release the locks when the LOB is no longer referenced?  That sounds  good, but may still cause issues if the garbage collector has not kicked in, but perhaps would be suitable for backport to 10.2\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e  2. Make a copy of the LOB value and allow concurrent updates. In\u003cbr\\/\u003e\\n     10.3 this is now possible since there is a mechanism for making\u003cbr\\/\u003e\\n     temporary copies of LOBs. In order for this to be efficient, we\u003cbr\\/\u003e\\n     should only make a copy when necessary. Hence, a copy-on-write\u003cbr\\/\u003e\\n     mechanism would be useful.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis sounds ok too but does not offer any solution for 10.2, so I guess I would prefer 1.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512479_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512479_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 13:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T13:29:55+0000\'\u003e13\\/Jul\\/07 13:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Well deferring the opening of the stream until it is time to write the EXTDTA will not work because we need to know whether the value is null when we send the QRYDTA.  So I guess its back to the drawing board.  I don\'t have any good ideas for a fix at this point.  The 10.1 solution was to read the whole lob into memory.  I don\'t think we want to return to that for 10.2. Oystein had mentioned the possibility of changing the locking behavior as a solution, but I am way out of my league in that area so won\'t pursue that for 10.2.  Hopefully if it is changed for 10.3, we can backport the fix. \\n\\n Oystein mentioned two possibilities for 10.3 \\n\\n   1. Change how the locking is done. Maybe one could provide away to \\n     release locks when they are no longer needed. \\n\\n By this do you mean to release the locks when the LOB is no longer referenced?  That sounds  good, but may still cause issues if the garbage collector has not kicked in, but perhaps would be suitable for backport to 10.2 \\n\\n\\n   2. Make a copy of the LOB value and allow concurrent updates. In \\n     10.3 this is now possible since there is a mechanism for making \\n     temporary copies of LOBs. In order for this to be efficient, we \\n     should only make a copy when necessary. Hence, a copy-on-write \\n     mechanism would be useful. \\n\\n This sounds ok too but does not offer any solution for 10.2, so I guess I would prefer 1.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512532\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512532&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512532\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512532_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512532_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T16:38:48+0000\'\u003e13\\/Jul\\/07 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI checked in the test case jdbcapi\\/LargeDataLocks to 10.2. It should be uncommented in the jdbcapi suite once this bug is fixed in 10.2.  The test on the trunk is the junit test jdbcapi\\/LargeDataLocksTest, also disabled.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512532_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512532_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T16:38:48+0000\'\u003e13\\/Jul\\/07 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I checked in the test case jdbcapi\\/LargeDataLocks to 10.2. It should be uncommented in the jdbcapi suite once this bug is fixed in 10.2.  The test on the trunk is the junit test jdbcapi\\/LargeDataLocksTest, also disabled. \\n\\n Kathey \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512607\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512607&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512607\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512607_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512607_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T20:21:49+0000\'\u003e13\\/Jul\\/07 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached is a new 10.2 patch for this issue.  \u003cbr\\/\u003e\\nI figured out how to determine if the value is null or empty before retrieving the stream.  What I did was enhance the EngineResultSet interface to have a isNull(int columnIndex) and a getLength(int columnIndex) method that can be called before getBinaryStream() or getCharacterStream() is called. This eliminates the need to read a byte of the stream to see if it is empty or not.\u003c\\/p\u003e\\n\\n\u003cp\u003eI would like to know if this is a reasonable approach and would appreciate review of the patch.   I ran derbynetclientmats and the LargeDataLocks test with the patch and am running derbyall now.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512607_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512607_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T20:21:49+0000\'\u003e13\\/Jul\\/07 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached is a new 10.2 patch for this issue.   \\nI figured out how to determine if the value is null or empty before retrieving the stream.  What I did was enhance the EngineResultSet interface to have a isNull(int columnIndex) and a getLength(int columnIndex) method that can be called before getBinaryStream() or getCharacterStream() is called. This eliminates the need to read a byte of the stream to see if it is empty or not. \\n\\n I would like to know if this is a reasonable approach and would appreciate review of the patch.   I ran derbynetclientmats and the LargeDataLocks test with the patch and am running derbyall now. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512673\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512673&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512673\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"naka\\\" id=\\\"commentauthor_12512673_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=naka\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"naka\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tomohito Nakayama\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512673_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/07 03:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-14T03:54:36+0000\'\u003e14\\/Jul\\/07 03:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you for working this issue ....\u003c\\/p\u003e\\n\\n\u003cp\u003eI remember information about blobclob4blob in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-326\\\" title=\\\"Improve streaming of large objects for network server and client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-326\\\"\u003e\u003cdel\u003eDERBY-326\u003c\\/del\u003e\u003c\\/a\u003e which may be a support.\u003c\\/p\u003e\\n\\n\u003cp\u003eBefore the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-326\\\" title=\\\"Improve streaming of large objects for network server and client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-326\\\"\u003e\u003cdel\u003eDERBY-326\u003c\\/del\u003e\u003c\\/a\u003e, the result of clobTest92 was different between Embedded and NetworkServer\\/NetworkCient.\u003cbr\\/\u003e\\nAfter \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-326\\\" title=\\\"Improve streaming of large objects for network server and client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-326\\\"\u003e\u003cdel\u003eDERBY-326\u003c\\/del\u003e\u003c\\/a\u003e, the results of clobTest92  are same between Embedded and NetworkServer\\/NetworkCient.\u003c\\/p\u003e\\n\\n\u003cp\u003eRelated file for 10.2 branch is below.\u003c\\/p\u003e\\n\\n\u003cp\u003eEmbedded :\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/code\\/branches\\/10.2\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/blobclob4BLOB.out\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/code\\/branches\\/10.2\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/blobclob4BLOB.out\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eNetworkServer\\/NetworkClient  :\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/code\\/branches\\/10.2\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/DerbyNet\\/blobclob4BLOB.out\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/code\\/branches\\/10.2\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/DerbyNet\\/blobclob4BLOB.out\u003c\\/a\u003e\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/code\\/branches\\/10.2\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/DerbyNetClient\\/blobclob4BLOB.out\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/code\\/branches\\/10.2\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/DerbyNetClient\\/blobclob4BLOB.out\u003c\\/a\u003e\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"naka\\\" id=\\\"commentauthor_12512673_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=naka\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"naka\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tomohito Nakayama\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512673_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jul\\/07 03:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-14T03:54:36+0000\'\u003e14\\/Jul\\/07 03:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you for working this issue .... \\n\\n I remember information about blobclob4blob in   DERBY-326   which may be a support. \\n\\n Before the   DERBY-326  , the result of clobTest92 was different between Embedded and NetworkServer\\/NetworkCient. \\nAfter   DERBY-326  , the results of clobTest92  are same between Embedded and NetworkServer\\/NetworkCient. \\n\\n Related file for 10.2 branch is below. \\n\\n Embedded : \\n https:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/code\\/branches\\/10.2\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/blobclob4BLOB.out  \\n\\n NetworkServer\\/NetworkClient  : \\n https:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/code\\/branches\\/10.2\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/DerbyNet\\/blobclob4BLOB.out  \\n https:\\/\\/svn.apache.org\\/repos\\/asf\\/db\\/derby\\/code\\/branches\\/10.2\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/master\\/DerbyNetClient\\/blobclob4BLOB.out  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512964\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12512964&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512964\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512964_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512964_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/07 15:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-16T15:31:49+0000\'\u003e16\\/Jul\\/07 15:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Tomohito for looking at this issue. I think that with the fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-255\\\" title=\\\"Closing a resultset after retrieving a large &gt; 32K value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-255\\\"\u003e\u003cdel\u003eDERBY-255\u003c\\/del\u003e\u003c\\/a\u003e I did not submit sufficient testing for the getString(), getCharacterStream(), getBytes(), getBinaryStream() cases where locks should not be held.  This has hopefully been rectified with the addition of the LargeDataLocks test.  I attached a patch to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2941\\\" title=\\\"With 10.2, Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2941\\\"\u003e\u003cdel\u003eDERBY-2941\u003c\\/del\u003e\u003c\\/a\u003e to fix the issue and enable that test.\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12512964_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512964_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/07 15:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-16T15:31:49+0000\'\u003e16\\/Jul\\/07 15:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Tomohito for looking at this issue. I think that with the fix for   DERBY-255   I did not submit sufficient testing for the getString(), getCharacterStream(), getBytes(), getBinaryStream() cases where locks should not be held.  This has hopefully been rectified with the addition of the LargeDataLocks test.  I attached a patch to   DERBY-2941   to fix the issue and enable that test. \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12513340\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12513340&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12513340\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12513340_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12513340_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jul\\/07 19:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-17T19:37:33+0000\'\u003e17\\/Jul\\/07 19:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNow that \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2941\\\" title=\\\"With 10.2, Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2941\\\"\u003e\u003cdel\u003eDERBY-2941\u003c\\/del\u003e\u003c\\/a\u003e is resolved, this regression only affects 10.3 and 10.4  which use lob  locators.  Oystein mentioned two possibilities for approaching this issue in 10.3.  I previously stated that I would prefer  changing how the locking is done so we could backport to 10.2, but that is no longer a consideration.  \u003c\\/p\u003e\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12513340_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12513340_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jul\\/07 19:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-17T19:37:33+0000\'\u003e17\\/Jul\\/07 19:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Now that   DERBY-2941   is resolved, this regression only affects 10.3 and 10.4  which use lob  locators.  Oystein mentioned two possibilities for approaching this issue in 10.3.  I previously stated that I would prefer  changing how the locking is done so we could backport to 10.2, but that is no longer a consideration.   \\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12513885\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12513885&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12513885\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12513885_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12513885_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jul\\/07 11:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-19T11:57:24+0000\'\u003e19\\/Jul\\/07 11:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think I would prefer that one did not use database locks to\u003cbr\\/\u003e\\nachieving stability for LOB objects.  Locks are intended for\u003cbr\\/\u003e\\ntransaction isolation, not result set isolation.  I guess the main\u003cbr\\/\u003e\\nmotivation for using locking is to avoid reading the entire LOB before\u003cbr\\/\u003e\\nit is accessed.  That is, when ResultSet.getBlob is called the Blob\u003cbr\\/\u003e\\nvalue is not read; the reading is delayed until one performs\u003cbr\\/\u003e\\noperations on that Blob. Pre-10.3, one major problem with making a\u003cbr\\/\u003e\\ncopy of LOB would be that the entire LOB would have to be stored in\u003cbr\\/\u003e\\nmain-memory.  In 10.3, we have a mechanism for storing LOB values\u003cbr\\/\u003e\\ntemporarily on disk.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne alternative would be to always make a copy when getBlob\\/getClob is\u003cbr\\/\u003e\\ncalled.  That could significantly affect the performance of such an\u003cbr\\/\u003e\\noperation, but users can use ResultSet.getBinaryStream if they want\u003cbr\\/\u003e\\nto read a Blob with less overhead.\u003c\\/p\u003e\\n\\n\u003cp\u003eA more performant solution would be to delay copying until it is\u003cbr\\/\u003e\\nneeded.  That is, when someone else tries to update the LOB, a copy is\u003cbr\\/\u003e\\nmade.  I think such conflicts are not very typically for databases\u003cbr\\/\u003e\\nwith LOBs, so copying will normally not be done very often.  However,\u003cbr\\/\u003e\\none need some mechanism for detecting that the LOB to be updated are\u003cbr\\/\u003e\\ncurrently read by others.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am trying to get my mind around what is required here.  I do not\u003cbr\\/\u003e\\nhave a full undestanding yet, but here are some aspects that need to\u003cbr\\/\u003e\\nbe considered:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eWhen locators are used, a locator will map to an Blob\\/Clob object\u003cbr\\/\u003e\\n   on the server.  Client operations will be mapped to operations on\u003cbr\\/\u003e\\n   the Blob\\/Clob objects.  This makes the current locking mechanism\u003cbr\\/\u003e\\n   not work as intended since you will get Blob\\/Clob objects without\u003cbr\\/\u003e\\n   doing explicit getBlob\\/getClob calls.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eThe server is not able to distinguish whether an operation is\u003cbr\\/\u003e\\n   performed on a Blob\\/Clob or directly on the ResultSet.  E.g.,\u003cbr\\/\u003e\\n   Blob.getBinaryStream and ResultSet.getBinaryStream are local\u003cbr\\/\u003e\\n   operations on the client.  Read operations on the streams will map\u003cbr\\/\u003e\\n   to Blob.getBytes on the server.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eLocators are not used for all types of client operations. E.g.,\u003cbr\\/\u003e\\n   ResultSet.updateBinaryStream or PreparedStatement.setBinaryStream\u003cbr\\/\u003e\\n   will set up a stream that maps to a stream on the server.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eUpdates to Blob\\/Clob objects will cause the object to be copied to\u003cbr\\/\u003e\\n   temporary storage.  The updates will be applied to the database\u003cbr\\/\u003e\\n   when the Blob\\/Clob object is used to update a row.  E.g., If\u003cbr\\/\u003e\\n   ResultSet.updateBlob is used, the update will happen when\u003cbr\\/\u003e\\n   ResultSet.updateRow is called.  If PrepareStatement.setBlob is used,\u003cbr\\/\u003e\\n   it will happen when the prepared statement is executeed.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eWe will still need a mechanism to protect LOB values of the current\u003cbr\\/\u003e\\n   row of a ResultSet from being updated.  I am not familiar with the\u003cbr\\/\u003e\\n   current mechanism here.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12513885_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12513885_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jul\\/07 11:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-19T11:57:24+0000\'\u003e19\\/Jul\\/07 11:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think I would prefer that one did not use database locks to \\nachieving stability for LOB objects.  Locks are intended for \\ntransaction isolation, not result set isolation.  I guess the main \\nmotivation for using locking is to avoid reading the entire LOB before \\nit is accessed.  That is, when ResultSet.getBlob is called the Blob \\nvalue is not read; the reading is delayed until one performs \\noperations on that Blob. Pre-10.3, one major problem with making a \\ncopy of LOB would be that the entire LOB would have to be stored in \\nmain-memory.  In 10.3, we have a mechanism for storing LOB values \\ntemporarily on disk. \\n\\n One alternative would be to always make a copy when getBlob\\/getClob is \\ncalled.  That could significantly affect the performance of such an \\noperation, but users can use ResultSet.getBinaryStream if they want \\nto read a Blob with less overhead. \\n\\n A more performant solution would be to delay copying until it is \\nneeded.  That is, when someone else tries to update the LOB, a copy is \\nmade.  I think such conflicts are not very typically for databases \\nwith LOBs, so copying will normally not be done very often.  However, \\none need some mechanism for detecting that the LOB to be updated are \\ncurrently read by others. \\n\\n I am trying to get my mind around what is required here.  I do not \\nhave a full undestanding yet, but here are some aspects that need to \\nbe considered: \\n\\n \\n\\t When locators are used, a locator will map to an Blob\\/Clob object \\n   on the server.  Client operations will be mapped to operations on \\n   the Blob\\/Clob objects.  This makes the current locking mechanism \\n   not work as intended since you will get Blob\\/Clob objects without \\n   doing explicit getBlob\\/getClob calls. \\n \\n\\n\\n \\n\\t The server is not able to distinguish whether an operation is \\n   performed on a Blob\\/Clob or directly on the ResultSet.  E.g., \\n   Blob.getBinaryStream and ResultSet.getBinaryStream are local \\n   operations on the client.  Read operations on the streams will map \\n   to Blob.getBytes on the server. \\n \\n\\n\\n \\n\\t Locators are not used for all types of client operations. E.g., \\n   ResultSet.updateBinaryStream or PreparedStatement.setBinaryStream \\n   will set up a stream that maps to a stream on the server. \\n \\n\\n\\n \\n\\t Updates to Blob\\/Clob objects will cause the object to be copied to \\n   temporary storage.  The updates will be applied to the database \\n   when the Blob\\/Clob object is used to update a row.  E.g., If \\n   ResultSet.updateBlob is used, the update will happen when \\n   ResultSet.updateRow is called.  If PrepareStatement.setBlob is used, \\n   it will happen when the prepared statement is executeed. \\n \\n\\n\\n \\n\\t We will still need a mechanism to protect LOB values of the current \\n   row of a ResultSet from being updated.  I am not familiar with the \\n   current mechanism here. \\n \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514024\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12514024&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514024\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12514024_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514024_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jul\\/07 22:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-19T22:14:20+0000\'\u003e19\\/Jul\\/07 22:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you Oystein for sorting out the complexities of this issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12514024_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514024_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jul\\/07 22:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-19T22:14:20+0000\'\u003e19\\/Jul\\/07 22:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you Oystein for sorting out the complexities of this issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514249\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12514249&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514249\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12514249_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514249_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/07 17:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-20T17:10:03+0000\'\u003e20\\/Jul\\/07 17:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; - We will still need a mechanism to protect LOB values of the current\u003cbr\\/\u003e\\n&gt;   row of a ResultSet from being updated. I am not familiar with the\u003cbr\\/\u003e\\n&gt;   current mechanism here. \u003c\\/p\u003e\\n\\n\u003cp\u003eAs long as you are positioned on a row in the result set, a lock is\u003cbr\\/\u003e\\nset for that row (R or U if you have an updatable result set), which\u003cbr\\/\u003e\\nshould protect the lob as long as you are positioned on it.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn a scrollable result set, a copy is takes of the row, so after\u003cbr\\/\u003e\\npositioning away from the row, the underlying lob would not be\u003cbr\\/\u003e\\naccessed via this result set again until the row is possibly updated\u003cbr\\/\u003e\\n(if the result set is updatable). The U-lock on the row is reset when\u003cbr\\/\u003e\\nrepositioning back in that case.\u003c\\/p\u003e\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12514249_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514249_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/07 17:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-20T17:10:03+0000\'\u003e20\\/Jul\\/07 17:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; - We will still need a mechanism to protect LOB values of the current \\n&gt;   row of a ResultSet from being updated. I am not familiar with the \\n&gt;   current mechanism here.  \\n\\n As long as you are positioned on a row in the result set, a lock is \\nset for that row (R or U if you have an updatable result set), which \\nshould protect the lob as long as you are positioned on it. \\n\\n In a scrollable result set, a copy is takes of the row, so after \\npositioning away from the row, the underlying lob would not be \\naccessed via this result set again until the row is possibly updated \\n(if the result set is updatable). The U-lock on the row is reset when \\nrepositioning back in that case. \\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12516454\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12516454&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12516454\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12516454_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516454_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/07 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-30T17:48:48+0000\'\u003e30\\/Jul\\/07 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis is a critial issue and a regresssion that has been hit by users in the past moving to 10.2.  It is now fixed in 10.2 and regresses again going to 10.3.  I am marking it   Blocker because it seems like such a likely user hit.  I realize nobody is working on it and it is likely to get moved back down to urgent, but it just seems wrong to re-regress the product with 10.3.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12516454_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516454_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/07 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-30T17:48:48+0000\'\u003e30\\/Jul\\/07 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This is a critial issue and a regresssion that has been hit by users in the past moving to 10.2.  It is now fixed in 10.2 and regresses again going to 10.3.  I am marking it   Blocker because it seems like such a likely user hit.  I realize nobody is working on it and it is likely to get moved back down to urgent, but it just seems wrong to re-regress the product with 10.3. \\n\\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12516467\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12516467&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12516467\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12516467_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516467_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/07 18:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-30T18:28:05+0000\'\u003e30\\/Jul\\/07 18:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReverting the Urgency to normal. This issue occurs in 10.2. I do not believe that this old issue should block the release of other quality improvements.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12516467_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516467_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/07 18:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-30T18:28:05+0000\'\u003e30\\/Jul\\/07 18:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reverting the Urgency to normal. This issue occurs in 10.2. I do not believe that this old issue should block the release of other quality improvements.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12516552\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12516552&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12516552\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12516552_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516552_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/07 21:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-30T21:50:08+0000\'\u003e30\\/Jul\\/07 21:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNote: This issue has been resolved in 10.2 with \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2941\\\" title=\\\"With 10.2, Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2941\\\"\u003e\u003cdel\u003eDERBY-2941\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12516552_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516552_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jul\\/07 21:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-30T21:50:08+0000\'\u003e30\\/Jul\\/07 21:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Note: This issue has been resolved in 10.2 with   DERBY-2941                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12516715\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12516715&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12516715\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"naka\\\" id=\\\"commentauthor_12516715_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=naka\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"naka\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tomohito Nakayama\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516715_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jul\\/07 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-31T15:37:18+0000\'\u003e31\\/Jul\\/07 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI executed LargeDataLocksTest in the both cases of embedded and client. \u003cbr\\/\u003e\\nThe result was that test passes in the embedded case but fails in the client case.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn both cases of embedded and client, the only test code closes the resultset.....\u003cbr\\/\u003e\\nI wonder what is the exact difference which causes this result ....\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"naka\\\" id=\\\"commentauthor_12516715_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=naka\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"naka\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tomohito Nakayama\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516715_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jul\\/07 15:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-31T15:37:18+0000\'\u003e31\\/Jul\\/07 15:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I executed LargeDataLocksTest in the both cases of embedded and client.  \\nThe result was that test passes in the embedded case but fails in the client case. \\n\\n In both cases of embedded and client, the only test code closes the resultset..... \\nI wonder what is the exact difference which causes this result ....              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12516969\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12516969&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12516969\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"naka\\\" id=\\\"commentauthor_12516969_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=naka\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"naka\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tomohito Nakayama\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516969_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/07 13:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-01T13:57:14+0000\'\u003e01\\/Aug\\/07 13:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI added the test code as next to LargeDataLocksTest and \u003cbr\\/\u003e\\nfound that the behavior was same between embedded and client if explicitly getBlob.\u003c\\/p\u003e\\n\\n\u003cp\u003e+    public void testGetBlob() thr ows SQLException, IOException {\u003cbr\\/\u003e\\n+        int numBytes = 0;\u003cbr\\/\u003e\\n+        getConnection().setAutoCommit(false);\u003cbr\\/\u003e\\n+        Statement stmt = createStatement();\u003cbr\\/\u003e\\n+        String sql = \\\"SELECT bincol from t1\\\";\u003cbr\\/\u003e\\n+        ResultSet rs = stmt.executeQuery(sql);\u003cbr\\/\u003e\\n+        rs.next();\u003cbr\\/\u003e\\n+        Blob blob = rs.getBlob(1);\u003cbr\\/\u003e\\n+        InputStream stream = blob.getBinaryStream();\u003cbr\\/\u003e\\n+        int read = stream.read();\u003cbr\\/\u003e\\n+        while (read != -1) \u003c\\/p\u003e\\n{\\n+            read = stream.read();\\n+            numBytes++;\\n+        }\\n\u003cp\u003e+        assertEquals(38000, numBytes);\u003cbr\\/\u003e\\n+        rs.close();\u003cbr\\/\u003e\\n+        assertEquals(0, countLocks());\u003cbr\\/\u003e\\n+        commit();\u003cbr\\/\u003e\\n+    }\u003cbr\\/\u003e\\n+\u003cbr\\/\u003e\\n+\u003c\\/p\u003e\\n\\n\u003cp\u003eThe result for embedded:\u003cbr\\/\u003e\\n1) testGetBlob(org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest)junit.framework.AssertionFailedError: expected:&lt;0&gt; but was:&lt;2&gt;\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest.testGetBlob(LargeDataLocksTest.java:142)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:95)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003c\\/p\u003e\\n\\n\\n\\n\u003cp\u003eThe result for client :\u003cbr\\/\u003e\\n2) testGetBlob(org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest)junit.framework.AssertionFailedError: expected:&lt;0&gt; but was:&lt;2&gt;\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest.testGetBlob(LargeDataLocksTest.java:142)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\u003cbr\\/\u003e\\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:95)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23)\u003c\\/p\u003e\\n\\n\u003cp\u003eReading comments, I understood background of this result is locking for LOB.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"naka\\\" id=\\\"commentauthor_12516969_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=naka\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"naka\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tomohito Nakayama\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516969_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/07 13:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-01T13:57:14+0000\'\u003e01\\/Aug\\/07 13:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I added the test code as next to LargeDataLocksTest and  \\nfound that the behavior was same between embedded and client if explicitly getBlob. \\n\\n +    public void testGetBlob() thr ows SQLException, IOException { \\n+        int numBytes = 0; \\n+        getConnection().setAutoCommit(false); \\n+        Statement stmt = createStatement(); \\n+        String sql = \\\"SELECT bincol from t1\\\"; \\n+        ResultSet rs = stmt.executeQuery(sql); \\n+        rs.next(); \\n+        Blob blob = rs.getBlob(1); \\n+        InputStream stream = blob.getBinaryStream(); \\n+        int read = stream.read(); \\n+        while (read != -1)  \\n{\\n+            read = stream.read();\\n+            numBytes++;\\n+        }\\n +        assertEquals(38000, numBytes); \\n+        rs.close(); \\n+        assertEquals(0, countLocks()); \\n+        commit(); \\n+    } \\n+ \\n+ \\n\\n The result for embedded: \\n1) testGetBlob(org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest)junit.framework.AssertionFailedError: expected:&lt;0&gt; but was:&lt;2&gt; \\n\\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest.testGetBlob(LargeDataLocksTest.java:142) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) \\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:95) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\n\\n\\n The result for client : \\n2) testGetBlob(org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest)junit.framework.AssertionFailedError: expected:&lt;0&gt; but was:&lt;2&gt; \\n\\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest.testGetBlob(LargeDataLocksTest.java:142) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n\\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \\n\\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) \\n\\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:95) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n\\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n\\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n\\tat junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\n Reading comments, I understood background of this result is locking for LOB.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12516981\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12516981&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12516981\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"naka\\\" id=\\\"commentauthor_12516981_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=naka\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"naka\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tomohito Nakayama\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516981_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/07 14:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-01T14:20:22+0000\'\u003e01\\/Aug\\/07 14:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNow, I came to think that the current implementation of client \\/ server of derby have problem around\u003cbr\\/\u003e\\nResultSet#getBinaryStream method (and might be other getXXXXStream also).\u003c\\/p\u003e\\n\\n\u003cp\u003eMy intuitive thinking is that features of locater may be not needed for this kind of method, \u003cbr\\/\u003e\\nwhich are getXXXXStream and not getXlob.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"naka\\\" id=\\\"commentauthor_12516981_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=naka\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"naka\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Tomohito Nakayama\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12516981_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Aug\\/07 14:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-01T14:20:22+0000\'\u003e01\\/Aug\\/07 14:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Now, I came to think that the current implementation of client \\/ server of derby have problem around \\nResultSet#getBinaryStream method (and might be other getXXXXStream also). \\n\\n My intuitive thinking is that features of locater may be not needed for this kind of method,  \\nwhich are getXXXXStream and not getXlob.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12517149\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12517149&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12517149\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12517149_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12517149_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/07 06:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-02T06:01:28+0000\'\u003e02\\/Aug\\/07 06:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;Now, I came to think that the current implementation \u003cbr\\/\u003e\\n&gt;of client \\/ server of derby have problem around\u003cbr\\/\u003e\\n&gt;ResultSet#getBinaryStream method (and might be \u003cbr\\/\u003e\\n&gt;other getXXXXStream also). \u003c\\/p\u003e\\n\\n\u003cp\u003eFeatures of locator are not present for the ResultSet \u003cbr\\/\u003e\\nand the PreparedStatement methods.\u003c\\/p\u003e\\n\\n\u003cp\u003eRelevant comments from Derby-2604\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;As already discussed in the JIRA issue that was raised for \u003cbr\\/\u003e\\n&gt;PreparedStatements and CallableStatements\u003cbr\\/\u003e\\n&gt;(\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2529\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2529\u003c\\/a\u003e) there \u003cbr\\/\u003e\\n&gt;are no changes needed here related to Clob also.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;A similar case would exist for ResultSets also since \u003cbr\\/\u003e\\n&gt;the LOB in this case is also B-Layer streamed and \u003cbr\\/\u003e\\n&gt;there would be no significant improvement with using locators. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12517149_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12517149_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/07 06:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-02T06:01:28+0000\'\u003e02\\/Aug\\/07 06:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;Now, I came to think that the current implementation  \\n&gt;of client \\/ server of derby have problem around \\n&gt;ResultSet#getBinaryStream method (and might be  \\n&gt;other getXXXXStream also).  \\n\\n Features of locator are not present for the ResultSet  \\nand the PreparedStatement methods. \\n\\n Relevant comments from Derby-2604 \\n\\n &gt;As already discussed in the JIRA issue that was raised for  \\n&gt;PreparedStatements and CallableStatements \\n&gt;( https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2529 ) there  \\n&gt;are no changes needed here related to Clob also. \\n\\n &gt;A similar case would exist for ResultSets also since  \\n&gt;the LOB in this case is also B-Layer streamed and  \\n&gt;there would be no significant improvement with using locators.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12517553\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12517553&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12517553\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12517553_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12517553_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/07 14:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-03T14:59:27+0000\'\u003e03\\/Aug\\/07 14:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Kathey Marsden - 03\\/Aug\\/07 15:03\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eV. Narayanan said\u003cbr\\/\u003e\\n&gt;Features of locator are not present for the ResultSet\u003cbr\\/\u003e\\n&gt;and the PreparedStatement methods. \u003c\\/p\u003e\\n\\n\u003cp\u003eI am a little confused by this. Are you saying that a ResultSet.getBinaryStream() on the client should not be translating into a getBlob() on the server.  That does not seem to be the case in the trunk\\/10.3.  Can you try running jdbcapi\\/LargeDataLocks.java and see if perhaps this can be resolved easily.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12517553_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12517553_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/07 14:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-03T14:59:27+0000\'\u003e03\\/Aug\\/07 14:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Kathey Marsden - 03\\/Aug\\/07 15:03\\\"\u003eedited\u003c\\/span\u003e                   V. Narayanan said \\n&gt;Features of locator are not present for the ResultSet \\n&gt;and the PreparedStatement methods.  \\n\\n I am a little confused by this. Are you saying that a ResultSet.getBinaryStream() on the client should not be translating into a getBlob() on the server.  That does not seem to be the case in the trunk\\/10.3.  Can you try running jdbcapi\\/LargeDataLocks.java and see if perhaps this can be resolved easily. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12518403\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12518403&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12518403\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12518403_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518403_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/07 10:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-08T10:12:28+0000\'\u003e08\\/Aug\\/07 10:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;I am a little confused by this. Are you saying that a ResultSet.getBinaryStream()\u003cbr\\/\u003e\\n&gt;on the client should not be translating into a getBlob() on the server. That does \u003cbr\\/\u003e\\n&gt;not seem to be the case in the trunk\\/10.3. Can you try running jdbcapi\\/LargeDataLocks.java \u003cbr\\/\u003e\\n&gt;and see if perhaps this can be resolved easily.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhile working on locators, the ResultSet nor the PreparedStatement methods were\u003cbr\\/\u003e\\ntranslated to stored procedure calls to embedded methodssince this would be inefficient \u003cbr\\/\u003e\\nwhen compared to the Layer B Streaming and no materialization of LOB\'s was \u003cbr\\/\u003e\\nhappening that needed to be avoided. Hence it was OK to retain the current way it is done.\u003c\\/p\u003e\\n\\n\u003cp\u003eInternally I am not sure if the translation of the getBlob is happening at present.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12518403_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518403_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/07 10:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-08T10:12:28+0000\'\u003e08\\/Aug\\/07 10:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;I am a little confused by this. Are you saying that a ResultSet.getBinaryStream() \\n&gt;on the client should not be translating into a getBlob() on the server. That does  \\n&gt;not seem to be the case in the trunk\\/10.3. Can you try running jdbcapi\\/LargeDataLocks.java  \\n&gt;and see if perhaps this can be resolved easily. \\n\\n While working on locators, the ResultSet nor the PreparedStatement methods were \\ntranslated to stored procedure calls to embedded methodssince this would be inefficient  \\nwhen compared to the Layer B Streaming and no materialization of LOB\'s was  \\nhappening that needed to be avoided. Hence it was OK to retain the current way it is done. \\n\\n Internally I am not sure if the translation of the getBlob is happening at present.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12518409\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12518409&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12518409\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12518409_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518409_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/07 10:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-08T10:25:42+0000\'\u003e08\\/Aug\\/07 10:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSorry I meant \\\"Neither the ResultSet nor the PreparedStatement methods were\u003cbr\\/\u003e\\ntranslated to stored procedure calls to embedded methods\\\"  (i.e.) They were not\u003cbr\\/\u003e\\ntranslated to stored procedure calls.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12518409_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12518409_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/07 10:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-08T10:25:42+0000\'\u003e08\\/Aug\\/07 10:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sorry I meant \\\"Neither the ResultSet nor the PreparedStatement methods were \\ntranslated to stored procedure calls to embedded methods\\\"  (i.e.) They were not \\ntranslated to stored procedure calls.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12519073\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12519073&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12519073\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12519073_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12519073_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Aug\\/07 18:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-10T18:11:05+0000\'\u003e10\\/Aug\\/07 18:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am not sure how stored procedures come into it, but what I have been seeing is that with a 10.2 client or lower the DRDAType for getBinaryStream is  DRDAConstants.DRDA_TYPE_NLOBBYTES, so we instantiate a EXTDTAInputStream and with the fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2941\\\" title=\\\"With 10.2, Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2941\\\"\u003e\u003cdel\u003eDERBY-2941\u003c\\/del\u003e\u003c\\/a\u003e all is ok, BUT if we use a 10.3 client the DRDAType is DRDAConstants.DRDA_TYPE_NLOBLOC   so we do a getObject()(aka getBlob) on the column and it holds locks.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso I want to clarify that this issue is fixed with 10.2.2.1 clients and above with the fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2941\\\" title=\\\"With 10.2, Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2941\\\"\u003e\u003cdel\u003eDERBY-2941\u003c\\/del\u003e\u003c\\/a\u003e.  It regresses with 10.3 clients and higher.   So users affected by this issue, should not upgrade to 10.3.\u003c\\/p\u003e\\n\\n\u003cp\u003eNarayanan, do you have time to look and see if the change to use DRDA_TYPE_NLOBLOC for this case was necessary.  This is a serious regression in 10.3 that is likely to affect users. It would be good to get it addressed as soon as possible and I am not familiar enough with the Locator code to say how it should\\/ should not be.\u003c\\/p\u003e\\n\\n\u003cp\u003eYou can run the test jdbcapi\\/LargeDataLocks which is checked into the trunk but is not running at this time on the trunk due to this issue.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12519073_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12519073_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Aug\\/07 18:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-10T18:11:05+0000\'\u003e10\\/Aug\\/07 18:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am not sure how stored procedures come into it, but what I have been seeing is that with a 10.2 client or lower the DRDAType for getBinaryStream is  DRDAConstants.DRDA_TYPE_NLOBBYTES, so we instantiate a EXTDTAInputStream and with the fix for   DERBY-2941   all is ok, BUT if we use a 10.3 client the DRDAType is DRDAConstants.DRDA_TYPE_NLOBLOC   so we do a getObject()(aka getBlob) on the column and it holds locks. \\n\\n Also I want to clarify that this issue is fixed with 10.2.2.1 clients and above with the fix for   DERBY-2941  .  It regresses with 10.3 clients and higher.   So users affected by this issue, should not upgrade to 10.3. \\n\\n Narayanan, do you have time to look and see if the change to use DRDA_TYPE_NLOBLOC for this case was necessary.  This is a serious regression in 10.3 that is likely to affect users. It would be good to get it addressed as soon as possible and I am not familiar enough with the Locator code to say how it should\\/ should not be. \\n\\n You can run the test jdbcapi\\/LargeDataLocks which is checked into the trunk but is not running at this time on the trunk due to this issue. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12523174\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12523174&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12523174\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12523174_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12523174_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Aug\\/07 07:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-28T07:11:47+0000\'\u003e28\\/Aug\\/07 07:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTo answer Kathey\'s question: On the server, a stable mapping is needed\u003cbr\\/\u003e\\nbetween the locator ID and the Blob value is needed.  Earlier, you\u003cbr\\/\u003e\\ncopy the entire Blob value to the client in one round-trip.  Now, you\u003cbr\\/\u003e\\ncopy as much data as requested by the client.  It seems natural to use\u003cbr\\/\u003e\\na Blob object to represent the Blob value between round-trips.  Hence,\u003cbr\\/\u003e\\nI think getting a Blob object is necessary.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs I said earlier, I would prefer to fix this by using another\u003cbr\\/\u003e\\nmechanism than locking to guarantee the stability of a Blob value.  I\u003cbr\\/\u003e\\nplan to look closer into how to fix this in a week or two.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12523174_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12523174_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Aug\\/07 07:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-28T07:11:47+0000\'\u003e28\\/Aug\\/07 07:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    To answer Kathey\'s question: On the server, a stable mapping is needed \\nbetween the locator ID and the Blob value is needed.  Earlier, you \\ncopy the entire Blob value to the client in one round-trip.  Now, you \\ncopy as much data as requested by the client.  It seems natural to use \\na Blob object to represent the Blob value between round-trips.  Hence, \\nI think getting a Blob object is necessary. \\n\\n As I said earlier, I would prefer to fix this by using another \\nmechanism than locking to guarantee the stability of a Blob value.  I \\nplan to look closer into how to fix this in a week or two. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12523854\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12523854&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12523854\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12523854_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12523854_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Aug\\/07 14:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-30T14:07:08+0000\'\u003e30\\/Aug\\/07 14:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOysten said:\u003cbr\\/\u003e\\n&gt;I plan to look closer into how to fix this in a week or two.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks Oysten!\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12523854_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12523854_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Aug\\/07 14:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-30T14:07:08+0000\'\u003e30\\/Aug\\/07 14:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Oysten said: \\n&gt;I plan to look closer into how to fix this in a week or two. \\n\\n Thanks Oysten! \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12529512\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12529512&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12529512\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12529512_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529512_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/07 17:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-21T17:41:20+0000\'\u003e21\\/Sep\\/07 17:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHello Oystein. I just wanted to check in on this issue.   Have you been able to look closer at solution options?\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12529512_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529512_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/07 17:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-21T17:41:20+0000\'\u003e21\\/Sep\\/07 17:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hello Oystein. I just wanted to check in on this issue.   Have you been able to look closer at solution options? \\n\\n Thanks \\n\\n Kathey \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12530424\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12530424&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12530424\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12530424_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530424_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Sep\\/07 12:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-26T12:03:59+0000\'\u003e26\\/Sep\\/07 12:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have started to look a bit more at this issue.  I have not got very\u003cbr\\/\u003e\\nfar yet, but I have identified that the locking of the record\u003cbr\\/\u003e\\ncontaining the Blob occurs in OverflowInputStream#initStream.  Here an\u003cbr\\/\u003e\\nintent-shared lock on the table and a record lock for the record\u003cbr\\/\u003e\\ncontain the Blob is obtained.  As far as I can tell, the table lock is\u003cbr\\/\u003e\\nfor the duration of the transaction while the record lock follows the\u003cbr\\/\u003e\\ntransaction\'s isolation level.  Does this mean that it is the table\u003cbr\\/\u003e\\nintent lock that is the problem here?  \u003c\\/p\u003e\\n\\n\u003cp\u003eIf I run the LargeDataLocks program attached to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-255\\\" title=\\\"Closing a resultset after retrieving a large &gt; 32K value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-255\\\"\u003e\u003cdel\u003eDERBY-255\u003c\\/del\u003e\u003c\\/a\u003e it shows\u003cbr\\/\u003e\\nthat a IS table lock remains.  There is some discussion in\u003cbr\\/\u003e\\nOverflowInputStream#initStream on whether on should use the\u003cbr\\/\u003e\\ncontain\'s isolation level also for the intent lock, and not always use\u003cbr\\/\u003e\\nREPEATABLE READ, but it says:\u003c\\/p\u003e\\n\\n\u003cp\u003e        To do this, need to consider:\u003cbr\\/\u003e\\n        Sometimes the container\'s locking policy may NOT reflect the\u003cbr\\/\u003e\\n        correct locking policy. For example, if the container is a\u003cbr\\/\u003e\\n        table (not an index) and Access handles the locking of the\u003cbr\\/\u003e\\n        table via an index, the container\'s locking policy would be\u003cbr\\/\u003e\\n        set to do no locking.  Moreover, if the container is an index,\u003cbr\\/\u003e\\n        the locking policy would always be set to do no locking.\u003c\\/p\u003e\\n\\n\u003cp\u003eI guess I have to read up on the use of intent locks and the\u003cbr\\/\u003e\\ndifference between locking policies of transactions and containers\u003cbr\\/\u003e\\nbefore I can understand what this means.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12530424_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530424_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Sep\\/07 12:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-26T12:03:59+0000\'\u003e26\\/Sep\\/07 12:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have started to look a bit more at this issue.  I have not got very \\nfar yet, but I have identified that the locking of the record \\ncontaining the Blob occurs in OverflowInputStream#initStream.  Here an \\nintent-shared lock on the table and a record lock for the record \\ncontain the Blob is obtained.  As far as I can tell, the table lock is \\nfor the duration of the transaction while the record lock follows the \\ntransaction\'s isolation level.  Does this mean that it is the table \\nintent lock that is the problem here?   \\n\\n If I run the LargeDataLocks program attached to   DERBY-255   it shows \\nthat a IS table lock remains.  There is some discussion in \\nOverflowInputStream#initStream on whether on should use the \\ncontain\'s isolation level also for the intent lock, and not always use \\nREPEATABLE READ, but it says: \\n\\n         To do this, need to consider: \\n        Sometimes the container\'s locking policy may NOT reflect the \\n        correct locking policy. For example, if the container is a \\n        table (not an index) and Access handles the locking of the \\n        table via an index, the container\'s locking policy would be \\n        set to do no locking.  Moreover, if the container is an index, \\n        the locking policy would always be set to do no locking. \\n\\n I guess I have to read up on the use of intent locks and the \\ndifference between locking policies of transactions and containers \\nbefore I can understand what this means. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12530443\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12530443&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12530443\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12530443_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530443_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Sep\\/07 13:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-26T13:34:30+0000\'\u003e26\\/Sep\\/07 13:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMy previous comment is mistaken.  The LargeDataLocks program show that\u003cbr\\/\u003e\\nboth a table intent lock and a row lock remains:\u003c\\/p\u003e\\n\\n\u003cp\u003eSelect * from new org.apache.derby.diag.LockTable() as LT\u003cbr\\/\u003e\\nXID,TYPE,MODE,TABLENAME,LOCKNAME,STATE,TABLETYPE,LOCKCOUNT,INDEXNAME\u003cbr\\/\u003e\\n203,TABLE,IS,T1,Tablelock,GRANT,T,1,null\u003cbr\\/\u003e\\n203,ROW,S,T1,(2,6),GRANT,T,1,null\u003c\\/p\u003e\\n\\n\u003cp\u003eSorry for the confusion.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhile copy-on-write seems like a good idea, I am afraid it will be\u003cbr\\/\u003e\\nquite some work to implement a new mechanism like that, and I think I\u003cbr\\/\u003e\\nwill try a simpler approach first.\u003c\\/p\u003e\\n\\n\u003cp\u003eMy first attempt will try to see if there is some way to make the\u003cbr\\/\u003e\\nengine release locks when locators are freed.  Then, the client could\u003cbr\\/\u003e\\nrelease locators associated with streams when next()\\/close() is called\u003cbr\\/\u003e\\non the result set.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12530443_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530443_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Sep\\/07 13:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-26T13:34:30+0000\'\u003e26\\/Sep\\/07 13:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    My previous comment is mistaken.  The LargeDataLocks program show that \\nboth a table intent lock and a row lock remains: \\n\\n Select * from new org.apache.derby.diag.LockTable() as LT \\nXID,TYPE,MODE,TABLENAME,LOCKNAME,STATE,TABLETYPE,LOCKCOUNT,INDEXNAME \\n203,TABLE,IS,T1,Tablelock,GRANT,T,1,null \\n203,ROW,S,T1,(2,6),GRANT,T,1,null \\n\\n Sorry for the confusion. \\n\\n While copy-on-write seems like a good idea, I am afraid it will be \\nquite some work to implement a new mechanism like that, and I think I \\nwill try a simpler approach first. \\n\\n My first attempt will try to see if there is some way to make the \\nengine release locks when locators are freed.  Then, the client could \\nrelease locators associated with streams when next()\\/close() is called \\non the result set. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12530752\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12530752&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12530752\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12530752_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530752_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Sep\\/07 15:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-27T15:07:11+0000\'\u003e27\\/Sep\\/07 15:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSo my plan to fix this has two parts:\u003c\\/p\u003e\\n\\n\u003cp\u003e1. Change the locking so that the lock for a LOB is released when the\u003cbr\\/\u003e\\n   LOB object is closed.  My studies so far indicates that this can be\u003cbr\\/\u003e\\n   achieved as follows:\u003c\\/p\u003e\\n\\n\u003cp\u003e   a) Use read committed instead of repeatable read for the locking\u003cbr\\/\u003e\\n      policy in OverflowInputStream#initStream.  This will associate\u003cbr\\/\u003e\\n      the lock with the BaseContainerHandle that owns the\u003cbr\\/\u003e\\n      OverflowInputStream instead of the transaction.\u003c\\/p\u003e\\n\\n\u003cp\u003e   b) Release the locks for the BaseContainerHandle that owns the\u003cbr\\/\u003e\\n      OverflowInputStream when it is closed. (Debugging shows that\u003cbr\\/\u003e\\n      OverflowInputStream#close is called when a Blob\\/Clob object is\u003cbr\\/\u003e\\n      freed.)\u003c\\/p\u003e\\n\\n\u003cp\u003e2. Make sure a client releases locators when they are not to be used\u003cbr\\/\u003e\\n   anymore.  That is, the procedure to release a locator obtained by\u003cbr\\/\u003e\\n   getBinaryStream etc. will be called when next() or close() is\u003cbr\\/\u003e\\n   called on the result set.\u003c\\/p\u003e\\n\\n\u003cp\u003e   Since, according to the JDBC spec, such streams are only valid\u003cbr\\/\u003e\\n   until the next getXXX call, there should only be necessary to keep\u003cbr\\/\u003e\\n   track of one such locator at a time.  So when a new stream is\u003cbr\\/\u003e\\n   opened, the previous locator can be released.  Hence, it should not\u003cbr\\/\u003e\\n   be necessary to maintain a set of locators for the current row, one\u003cbr\\/\u003e\\n   single \\\"current\\\" locator per result set is sufficient.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12530752_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530752_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Sep\\/07 15:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-27T15:07:11+0000\'\u003e27\\/Sep\\/07 15:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    So my plan to fix this has two parts: \\n\\n 1. Change the locking so that the lock for a LOB is released when the \\n   LOB object is closed.  My studies so far indicates that this can be \\n   achieved as follows: \\n\\n    a) Use read committed instead of repeatable read for the locking \\n      policy in OverflowInputStream#initStream.  This will associate \\n      the lock with the BaseContainerHandle that owns the \\n      OverflowInputStream instead of the transaction. \\n\\n    b) Release the locks for the BaseContainerHandle that owns the \\n      OverflowInputStream when it is closed. (Debugging shows that \\n      OverflowInputStream#close is called when a Blob\\/Clob object is \\n      freed.) \\n\\n 2. Make sure a client releases locators when they are not to be used \\n   anymore.  That is, the procedure to release a locator obtained by \\n   getBinaryStream etc. will be called when next() or close() is \\n   called on the result set. \\n\\n    Since, according to the JDBC spec, such streams are only valid \\n   until the next getXXX call, there should only be necessary to keep \\n   track of one such locator at a time.  So when a new stream is \\n   opened, the previous locator can be released.  Hence, it should not \\n   be necessary to maintain a set of locators for the current row, one \\n   single \\\"current\\\" locator per result set is sufficient.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12530772\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12530772&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12530772\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12530772_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530772_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Sep\\/07 16:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-27T16:27:48+0000\'\u003e27\\/Sep\\/07 16:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOystein said ..\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;2. Make sure a client releases locators when they are not to be used\u003cbr\\/\u003e\\n&gt;   anymore. That is, the procedure to release a locator obtained by\u003cbr\\/\u003e\\n&gt;  getBinaryStream etc. will be called when next() or close() is\u003cbr\\/\u003e\\n&gt;.   called on the result set. \u003c\\/p\u003e\\n\\n\u003cp\u003eThis makes sense for getBinaryStream, but for Blobs the spec says\u003cbr\\/\u003e\\n\\\"A Blob object is valid for the duration of the transaction in which is was created.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eWill that still be the case with your propsed change?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12530772_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530772_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Sep\\/07 16:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-27T16:27:48+0000\'\u003e27\\/Sep\\/07 16:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Oystein said .. \\n\\n &gt;2. Make sure a client releases locators when they are not to be used \\n&gt;   anymore. That is, the procedure to release a locator obtained by \\n&gt;  getBinaryStream etc. will be called when next() or close() is \\n&gt;.   called on the result set.  \\n\\n This makes sense for getBinaryStream, but for Blobs the spec says \\n\\\"A Blob object is valid for the duration of the transaction in which is was created.\\\" \\n\\n Will that still be the case with your propsed change?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12530921\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12530921&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12530921\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12530921_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530921_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Sep\\/07 06:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-28T06:35:13+0000\'\u003e28\\/Sep\\/07 06:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey Marsden (JIRA) wrote:\u003cbr\\/\u003e\\n&gt; Oystein said ..\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt;&gt; 2. Make sure a client releases locators when they are not to be used\u003cbr\\/\u003e\\n&gt;&gt;   anymore. That is, the procedure to release a locator obtained by\u003cbr\\/\u003e\\n&gt;&gt;  getBinaryStream etc. will be called when next() or close() is\u003cbr\\/\u003e\\n&gt;&gt; .   called on the result set. \u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; This makes sense for getBinaryStream, but for Blobs the spec says\u003cbr\\/\u003e\\n&gt; \\\"A Blob object is valid for the duration of the transaction in which is was created.\\\"\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; Will that still be the case with your propsed change?\u003c\\/p\u003e\\n\\n\u003cp\u003eYes, locators obtained when doing ResultSet.get\u003cspan class=\\\"error\\\"\u003e&#91;BC&#93;\u003c\\/span\u003elob will not be released, only locators obtained by other ResultSet.getXXX methods (e.g., getBinaryStream). \u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12530921_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530921_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Sep\\/07 06:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-28T06:35:13+0000\'\u003e28\\/Sep\\/07 06:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey Marsden (JIRA) wrote: \\n&gt; Oystein said .. \\n&gt;  \\n&gt;&gt; 2. Make sure a client releases locators when they are not to be used \\n&gt;&gt;   anymore. That is, the procedure to release a locator obtained by \\n&gt;&gt;  getBinaryStream etc. will be called when next() or close() is \\n&gt;&gt; .   called on the result set.  \\n&gt;  \\n&gt; This makes sense for getBinaryStream, but for Blobs the spec says \\n&gt; \\\"A Blob object is valid for the duration of the transaction in which is was created.\\\" \\n&gt;  \\n&gt; Will that still be the case with your propsed change? \\n\\n Yes, locators obtained when doing ResultSet.get &#91;BC&#93; lob will not be released, only locators obtained by other ResultSet.getXXX methods (e.g., getBinaryStream).  \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12532028\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12532028&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12532028\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12532028_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532028_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Oct\\/07 07:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-03T07:44:32+0000\'\u003e03\\/Oct\\/07 07:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3098\\\" title=\\\"LOB locks are not released after free().\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3098\\\"\u003e\u003cdel\u003eDERBY-3098\u003c\\/del\u003e\u003c\\/a\u003e will handle part 1 as described above.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12532028_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532028_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Oct\\/07 07:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-03T07:44:32+0000\'\u003e03\\/Oct\\/07 07:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                      DERBY-3098   will handle part 1 as described above.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12543885\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12543885&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12543885\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12543885_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12543885_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/07 12:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-20T12:53:41+0000\'\u003e20\\/Nov\\/07 12:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached patch derby-2892firstshot.diff makes LargeDataLocksTest also work for client\\/server.  The approach is to make sure that closing a stream will free the underlying Blob, and in addition when closing a result set, the open stream needs to be closed.\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, this fix will also have affect when closing streams that was obtained from a Blob object instead of directly from the result set.  This is not correct since such Blob objects should live until end of transaction unless explicitly closed.  This causes a few test cases in BlobClob4BlobTest to be broken.\u003c\\/p\u003e\\n\\n\u003cp\u003eHence, the attached patch needs to be modified to distinguish between streams that were obtained from a result set, and streams that were obtained from a Blob object.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12543885_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12543885_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/07 12:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-20T12:53:41+0000\'\u003e20\\/Nov\\/07 12:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached patch derby-2892firstshot.diff makes LargeDataLocksTest also work for client\\/server.  The approach is to make sure that closing a stream will free the underlying Blob, and in addition when closing a result set, the open stream needs to be closed. \\n\\n However, this fix will also have affect when closing streams that was obtained from a Blob object instead of directly from the result set.  This is not correct since such Blob objects should live until end of transaction unless explicitly closed.  This causes a few test cases in BlobClob4BlobTest to be broken. \\n\\n Hence, the attached patch needs to be modified to distinguish between streams that were obtained from a result set, and streams that were obtained from a Blob object.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12544605\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12544605&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12544605\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12544605_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12544605_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Nov\\/07 21:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-21T21:32:11+0000\'\u003e21\\/Nov\\/07 21:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFixing this issue will create backward-compatibility issues.  For a Blob\\/Clob column of  a result set, only one get method can be called and only once.  For example, after executing ResultSet.getBinaryStream on a column, all following get methods (e.g., getBlob, getBinaryStream, getBytes) on this column wil fail.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12544605_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12544605_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Nov\\/07 21:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-21T21:32:11+0000\'\u003e21\\/Nov\\/07 21:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Fixing this issue will create backward-compatibility issues.  For a Blob\\/Clob column of  a result set, only one get method can be called and only once.  For example, after executing ResultSet.getBinaryStream on a column, all following get methods (e.g., getBlob, getBinaryStream, getBytes) on this column wil fail.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12545816\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12545816&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12545816\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12545816_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12545816_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/07 13:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-27T13:10:38+0000\'\u003e27\\/Nov\\/07 13:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached is a patch that solves the reported problem, and runs without\u003cbr\\/\u003e\\nerrors in the current test suites (suites.All and derbyall).  However,\u003cbr\\/\u003e\\nI do not feel confident that there is sufficient testing in this area\u003cbr\\/\u003e\\nto verify the fix.  I do not have time to add more tests right now,\u003cbr\\/\u003e\\nbut I hope to get back to this later.\u003c\\/p\u003e\\n\\n\u003cp\u003eNote also that this fix may affect existing applications since from\u003cbr\\/\u003e\\nnow only one get method per Blob\\/Clob column may now be called per\u003cbr\\/\u003e\\nrow of the result set.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe following describes the fixes in more detail:\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/jdbcapi\\/LargeDataLocksTest.java\u003cbr\\/\u003e\\n    Activate test also for client server to test the bug fix.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/Cursor.java\u003cbr\\/\u003e\\n    Access on Blob\\/Clob columns of result set is no longer forwarded\u003cbr\\/\u003e\\n    to the relevant method on the Blob\\/Clob object.  Instead, it is\u003cbr\\/\u003e\\n    made sure that the underlying Blob\\/Clob objects are freed when the\u003cbr\\/\u003e\\n    access is completed.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/Blob.java\u003cbr\\/\u003e\\n    Make getBinaryStreamX() package private so that it can be used by\u003cbr\\/\u003e\\n    Cursor.  This way, conversions between SqlException and\u003cbr\\/\u003e\\n    SQLException are avoided.  \u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/Clob.java\u003cbr\\/\u003e\\n    Make get...StreamX methods package private so that it can be used\u003cbr\\/\u003e\\n    by Cursor.  This way, conversions between SqlException and\u003cbr\\/\u003e\\n    SQLException are avoided.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/BlobLocatorInputStream.java\u003cbr\\/\u003e\\n    Add method setFreeBlobOnClose() which can be called in order to\u003cbr\\/\u003e\\n    make the stream free the underlying Blob object when it is closed.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/ResultSet.java\u003cbr\\/\u003e\\n    Closing the result set should close streams that have been opened\u003cbr\\/\u003e\\n    on columns of the result set.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/UpdateSensitiveLOBLocatorInputStream.java\u003cbr\\/\u003e\\n    Closing the stream should also close the wrapped stream.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/ClobLocatorInputStream.java\u003cbr\\/\u003e\\n    Add method setFreeClobOnClose() which can be called in order to\u003cbr\\/\u003e\\n    make the stream free the underlying Clob object when it is closed.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/ClobLocatorReader.java\u003cbr\\/\u003e\\n    Add method setFreeClobOnClose() which can be called in order to\u003cbr\\/\u003e\\n    make the stream free the underlying Clob object when it is closed.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12545816_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12545816_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Nov\\/07 13:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-27T13:10:38+0000\'\u003e27\\/Nov\\/07 13:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached is a patch that solves the reported problem, and runs without \\nerrors in the current test suites (suites.All and derbyall).  However, \\nI do not feel confident that there is sufficient testing in this area \\nto verify the fix.  I do not have time to add more tests right now, \\nbut I hope to get back to this later. \\n\\n Note also that this fix may affect existing applications since from \\nnow only one get method per Blob\\/Clob column may now be called per \\nrow of the result set. \\n\\n The following describes the fixes in more detail: \\n\\n M      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/jdbcapi\\/LargeDataLocksTest.java \\n    Activate test also for client server to test the bug fix. \\n\\n M      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/Cursor.java \\n    Access on Blob\\/Clob columns of result set is no longer forwarded \\n    to the relevant method on the Blob\\/Clob object.  Instead, it is \\n    made sure that the underlying Blob\\/Clob objects are freed when the \\n    access is completed. \\n\\n M      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/Blob.java \\n    Make getBinaryStreamX() package private so that it can be used by \\n    Cursor.  This way, conversions between SqlException and \\n    SQLException are avoided.   \\n\\n M      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/Clob.java \\n    Make get...StreamX methods package private so that it can be used \\n    by Cursor.  This way, conversions between SqlException and \\n    SQLException are avoided. \\n\\n M      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/BlobLocatorInputStream.java \\n    Add method setFreeBlobOnClose() which can be called in order to \\n    make the stream free the underlying Blob object when it is closed. \\n\\n M      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/ResultSet.java \\n    Closing the result set should close streams that have been opened \\n    on columns of the result set. \\n\\n M      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/UpdateSensitiveLOBLocatorInputStream.java \\n    Closing the stream should also close the wrapped stream. \\n\\n M      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/ClobLocatorInputStream.java \\n    Add method setFreeClobOnClose() which can be called in order to \\n    make the stream free the underlying Clob object when it is closed. \\n\\n M      java\\/client\\/org\\/apache\\/derby\\/client\\/am\\/ClobLocatorReader.java \\n    Add method setFreeClobOnClose() which can be called in order to \\n    make the stream free the underlying Clob object when it is closed. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12551859\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12551859&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12551859\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12551859_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12551859_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/07 17:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-12-14T17:07:47+0000\'\u003e14\\/Dec\\/07 17:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\\u00D8ystein said.\u003cbr\\/\u003e\\n&gt;Fixing this issue will create backward-compatibility issues. For a Blob\\/Clob column of a result set, only one get method &gt;can be called and only once. For example, after executing ResultSet.getBinaryStream on a column, all following get &gt;methods (e.g., getBlob, getBinaryStream, getBytes) on this column wil fail.\u003c\\/p\u003e\\n\\n\u003cp\u003eI thought this was the case since \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-721\\\" title=\\\"State of InputStream retrieved from resultset is not clean , if there exists previous InputStream .\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-721\\\"\u003e\u003cdel\u003eDERBY-721\u003c\\/del\u003e\u003c\\/a\u003e was fixed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12551859_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12551859_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/07 17:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-12-14T17:07:47+0000\'\u003e14\\/Dec\\/07 17:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\u00D8ystein said. \\n&gt;Fixing this issue will create backward-compatibility issues. For a Blob\\/Clob column of a result set, only one get method &gt;can be called and only once. For example, after executing ResultSet.getBinaryStream on a column, all following get &gt;methods (e.g., getBlob, getBinaryStream, getBytes) on this column wil fail. \\n\\n I thought this was the case since   DERBY-721   was fixed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12552372\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12552372&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12552372\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12552372_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12552372_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/07 11:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-12-17T11:14:48+0000\'\u003e17\\/Dec\\/07 11:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Kathey Marsden commented on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2892\\\" title=\\\"Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2892\\\"\u003e\u003cdel\u003eDERBY-2892\u003c\\/del\u003e\u003c\\/a\u003e:\u003cbr\\/\u003e\\n&gt; ---------------------------------------\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; \\u00D8ystein said.\u003cbr\\/\u003e\\n&gt;&gt; Fixing this issue will create backward-compatibility issues. For a\u003cbr\\/\u003e\\n&gt;&gt; Blob\\/Clob column of a result set, only one get method can be\u003cbr\\/\u003e\\n&gt;&gt; called and only once. For example, after executing\u003cbr\\/\u003e\\n&gt;&gt; ResultSet.getBinaryStream on a column, all following get methods\u003cbr\\/\u003e\\n&gt;&gt; (e.g., getBlob, getBinaryStream, getBytes) on this column wil fail.\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; I thought this was the case since \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-721\\\" title=\\\"State of InputStream retrieved from resultset is not clean , if there exists previous InputStream .\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-721\\\"\u003e\u003cdel\u003eDERBY-721\u003c\\/del\u003e\u003c\\/a\u003e was fixed.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am afraid that some of these restrictions may have been relaxed by\u003cbr\\/\u003e\\naccident when we introduced locators for 10.3.  Anyway, this patch will\u003cbr\\/\u003e\\nrestrict usage even further than Derby-721.  With a 10.2.1 server, I\u003cbr\\/\u003e\\nam able to do getBytes() followed by getBinaryStream().  With my patch\u003cbr\\/\u003e\\nthis will not be possible since getBytes will release the underlying\u003cbr\\/\u003e\\nBlob.  I will investigate the behavior of previous releases a bit\u003cbr\\/\u003e\\nfurther and report back.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12552372_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12552372_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/07 11:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-12-17T11:14:48+0000\'\u003e17\\/Dec\\/07 11:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Kathey Marsden commented on   DERBY-2892  : \\n&gt; --------------------------------------- \\n&gt;  \\n&gt; \\u00D8ystein said. \\n&gt;&gt; Fixing this issue will create backward-compatibility issues. For a \\n&gt;&gt; Blob\\/Clob column of a result set, only one get method can be \\n&gt;&gt; called and only once. For example, after executing \\n&gt;&gt; ResultSet.getBinaryStream on a column, all following get methods \\n&gt;&gt; (e.g., getBlob, getBinaryStream, getBytes) on this column wil fail. \\n&gt;  \\n&gt; I thought this was the case since   DERBY-721   was fixed. \\n\\n I am afraid that some of these restrictions may have been relaxed by \\naccident when we introduced locators for 10.3.  Anyway, this patch will \\nrestrict usage even further than Derby-721.  With a 10.2.1 server, I \\nam able to do getBytes() followed by getBinaryStream().  With my patch \\nthis will not be possible since getBytes will release the underlying \\nBlob.  I will investigate the behavior of previous releases a bit \\nfurther and report back.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12568520\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12568520&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12568520\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12568520_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568520_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Feb\\/08 11:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-13T11:58:28+0000\'\u003e13\\/Feb\\/08 11:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have tested the patch with the repro attached here: \u003ca href=\\\"http:\\/\\/www.nabble.com\\/Re%3A-Iterating-through-large-result-set-in-network-mode-causes-OutOfMemoryException-p15364393.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.nabble.com\\/Re%3A-Iterating-through-large-result-set-in-network-mode-causes-OutOfMemoryException-p15364393.html\u003c\\/a\u003e\u003cbr\\/\u003e\\nThis repro does not access the blob columns that are selected, and it turns out that with the current patch, the blob objects are not released, and OOM error occurs.  If I add a  call to ResultSet#getBytes for each row, the OOM error does not occur.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12568520_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568520_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Feb\\/08 11:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-13T11:58:28+0000\'\u003e13\\/Feb\\/08 11:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have tested the patch with the repro attached here:  http:\\/\\/www.nabble.com\\/Re%3A-Iterating-through-large-result-set-in-network-mode-causes-OutOfMemoryException-p15364393.html  \\nThis repro does not access the blob columns that are selected, and it turns out that with the current patch, the blob objects are not released, and OOM error occurs.  If I add a  call to ResultSet#getBytes for each row, the OOM error does not occur.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12578446\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12578446&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12578446\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12578446_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578446_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T18:58:41+0000\'\u003e13\\/Mar\\/08 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDo you think this change will make it in for 10.4?\u003cbr\\/\u003e\\nIf we are going to change behavior we probably best do it on \u003cbr\\/\u003e\\nminor release boundaries.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12578446_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578446_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T18:58:41+0000\'\u003e13\\/Mar\\/08 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Do you think this change will make it in for 10.4? \\nIf we are going to change behavior we probably best do it on  \\nminor release boundaries.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12578474\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12578474&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12578474\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12578474_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578474_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 20:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T20:08:25+0000\'\u003e13\\/Mar\\/08 20:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\\n\u003cp\u003eI agree, and I hope to get back to this within a week or so, but if \u003cbr\\/\u003e\\nothers have the time to look at, please do so.  As mentioned in my \u003cbr\\/\u003e\\ncomment, I have discovered that my proposed fix will not work for the \u003cbr\\/\u003e\\ncase where the select blob objects are never accessed by JDBC.  That \u003cbr\\/\u003e\\nshould be fixed, but the current patch will at least fix the more common \u003cbr\\/\u003e\\nscenarios.  In addition, some more tests should be added.\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; \u003cbr\\/\u003e\\n\\u00D8ystein\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12578474_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12578474_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Mar\\/08 20:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-13T20:08:25+0000\'\u003e13\\/Mar\\/08 20:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                   \\n I agree, and I hope to get back to this within a week or so, but if  \\nothers have the time to look at, please do so.  As mentioned in my  \\ncomment, I have discovered that my proposed fix will not work for the  \\ncase where the select blob objects are never accessed by JDBC.  That  \\nshould be fixed, but the current patch will at least fix the more common  \\nscenarios.  In addition, some more tests should be added. \\n\\n &#8211;  \\n\\u00D8ystein              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12581727\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12581727&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12581727\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12581727_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12581727_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Mar\\/08 23:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-24T23:40:41+0000\'\u003e24\\/Mar\\/08 23:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have a few cycles to help out with this issue.  As I see it, what needs \u003cbr\\/\u003e\\nto be done is \u003cbr\\/\u003e\\n1) Apply patch to latest and make sure tests pass.\u003cbr\\/\u003e\\n2) Add release note that you cannot access a column twice with JDBC.\u003cbr\\/\u003e\\n3) Add more tests.\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eAdd test to attempt to retrieve column twice and ensure reasonable error.\u003c\\/li\u003e\\n\\t\u003cli\u003eWhat other tests should be added?\u003cbr\\/\u003e\\n4) After checkin, file issue for lock timeout if column is not accessed by JDBC.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12581727_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12581727_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Mar\\/08 23:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-24T23:40:41+0000\'\u003e24\\/Mar\\/08 23:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have a few cycles to help out with this issue.  As I see it, what needs  \\nto be done is  \\n1) Apply patch to latest and make sure tests pass. \\n2) Add release note that you cannot access a column twice with JDBC. \\n3) Add more tests. \\n \\n\\t Add test to attempt to retrieve column twice and ensure reasonable error. \\n\\t What other tests should be added? \\n4) After checkin, file issue for lock timeout if column is not accessed by JDBC. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12581888\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12581888&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12581888\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12581888_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12581888_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Mar\\/08 12:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-25T12:18:02+0000\'\u003e25\\/Mar\\/08 12:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKathey, I\'m interested in looking at point 4. At least I believe it is the same problem. I used the repro \\u00D8ystein mentioned above, where I got an OOME instead of a timeout.\u003cbr\\/\u003e\\nI coded a prototype that solved the problem on the client side, but I\'m wondering if it can be better solved on the server side.\u003cbr\\/\u003e\\nI will look into this and report my findings.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12581888_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12581888_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Mar\\/08 12:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-25T12:18:02+0000\'\u003e25\\/Mar\\/08 12:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kathey, I\'m interested in looking at point 4. At least I believe it is the same problem. I used the repro \\u00D8ystein mentioned above, where I got an OOME instead of a timeout. \\nI coded a prototype that solved the problem on the client side, but I\'m wondering if it can be better solved on the server side. \\nI will look into this and report my findings.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12582342\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12582342&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12582342\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12582342_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582342_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/08 16:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-26T16:51:33+0000\'\u003e26\\/Mar\\/08 16:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI filed \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3571\\\" title=\\\"LOB locators are not released if the LOB columns are not accessed by the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3571\\\"\u003e\u003cdel\u003eDERBY-3571\u003c\\/del\u003e\u003c\\/a\u003e for the case where locators are not freed if the LOB columns are not accessed.\u003cbr\\/\u003e\\nReview and comments are welcome.\u003c\\/p\u003e\\n\\n\u003cp\u003eI haven\'t tested it, but I think \\u00D8ysteins patch and mine should go along fine together. They do however affect each other with respect to timing of the locator release and round trips to the server. We might want to investigate this with regards to performance.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12582342_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582342_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/08 16:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-26T16:51:33+0000\'\u003e26\\/Mar\\/08 16:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I filed   DERBY-3571   for the case where locators are not freed if the LOB columns are not accessed. \\nReview and comments are welcome. \\n\\n I haven\'t tested it, but I think \\u00D8ysteins patch and mine should go along fine together. They do however affect each other with respect to timing of the locator release and round trips to the server. We might want to investigate this with regards to performance.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12582390\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12582390&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12582390\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12582390_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582390_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/08 18:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-26T18:28:45+0000\'\u003e26\\/Mar\\/08 18:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Kathey Marsden - 26\\/Mar\\/08 18:54\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Kristian for looking at the issue of the lock timeout when the column is not accessed via JDBC.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2892\\\" title=\\\"Closing a resultset after retrieving a large &gt; 32665 bytes value with Network Server does not release locks\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2892\\\"\u003e\u003cdel\u003eDERBY-2892\u003c\\/del\u003e\u003c\\/a\u003e patch, I think we probably need to work on the error message if a column is retrieved twice.\u003cbr\\/\u003e\\nWhat happens now  if I do getString twice on a Clob column  is I get the message:\u003c\\/p\u003e\\n\\n\u003cp\u003eXJ217 - You cannot invoke other java.sql.Clob\\/java.sql.Blob methods after calling the free() method or after the Blob\\/Clob\'s transaction has been committed or rolled back.\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t know that that makes sense given the user called getString()\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eFor getCharacterStream()\\/getBinaryStream() there is no error on the call, just an IOException on the read.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12582390_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582390_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/08 18:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-26T18:28:45+0000\'\u003e26\\/Mar\\/08 18:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Kathey Marsden - 26\\/Mar\\/08 18:54\\\"\u003eedited\u003c\\/span\u003e                   Thanks Kristian for looking at the issue of the lock timeout when the column is not accessed via JDBC. \\n\\n For the   DERBY-2892   patch, I think we probably need to work on the error message if a column is retrieved twice. \\nWhat happens now  if I do getString twice on a Clob column  is I get the message: \\n\\n XJ217 - You cannot invoke other java.sql.Clob\\/java.sql.Blob methods after calling the free() method or after the Blob\\/Clob\'s transaction has been committed or rolled back. \\n\\n I don\'t know that that makes sense given the user called getString() \\n\\n\\n For getCharacterStream()\\/getBinaryStream() there is no error on the call, just an IOException on the read. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12582763\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12582763&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12582763\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12582763_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582763_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/08 18:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-27T18:42:19+0000\'\u003e27\\/Mar\\/08 18:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI was looking at improving the error messages when a column is accessed\u003cbr\\/\u003e\\nmore than once, and I realized that doing so will be much easier once the\u003cbr\\/\u003e\\npatch for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3571\\\" title=\\\"LOB locators are not released if the LOB columns are not accessed by the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3571\\\"\u003e\u003cdel\u003eDERBY-3571\u003c\\/del\u003e\u003c\\/a\u003e is in, which records whether lob columns have \u003cbr\\/\u003e\\nbeen accessed.\u003c\\/p\u003e\\n\\n\u003cp\u003eI would like to propose that we go ahead and commit the derby-2892 patch to \u003cbr\\/\u003e\\ntrunk and then attack the improved error messages after \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3571\\\" title=\\\"LOB locators are not released if the LOB columns are not accessed by the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3571\\\"\u003e\u003cdel\u003eDERBY-3571\u003c\\/del\u003e\u003c\\/a\u003e goes\u003cbr\\/\u003e\\nin as a separate issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eThoughts?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12582763_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582763_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Mar\\/08 18:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-27T18:42:19+0000\'\u003e27\\/Mar\\/08 18:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I was looking at improving the error messages when a column is accessed \\nmore than once, and I realized that doing so will be much easier once the \\npatch for   DERBY-3571   is in, which records whether lob columns have  \\nbeen accessed. \\n\\n I would like to propose that we go ahead and commit the derby-2892 patch to  \\ntrunk and then attack the improved error messages after   DERBY-3571   goes \\nin as a separate issue. \\n\\n Thoughts?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12582942\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12582942&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12582942\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12582942_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582942_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 08:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T08:31:17+0000\'\u003e28\\/Mar\\/08 08:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNote that \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3571\\\" title=\\\"LOB locators are not released if the LOB columns are not accessed by the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3571\\\"\u003e\u003cdel\u003eDERBY-3571\u003c\\/del\u003e\u003c\\/a\u003e will only track LOB locators in its current state.\u003cbr\\/\u003e\\nI think it can be extended to track all LOBs, but it is not clear to me at this point if that is the right way to proceed.\u003cbr\\/\u003e\\nAnswering these questions would help determine that:\u003cbr\\/\u003e\\n a) Shall an exception be thrown for any type of column if accessed twice?\u003cbr\\/\u003e\\n b) If not, which columns types does the restriction apply to?\u003c\\/p\u003e\\n\\n\u003cp\u003eI think a more general solution would be needed if an exception shall be raised for all column types.\u003cbr\\/\u003e\\nIf a solution is needed only for LOBs, I believe LOBStateTracker can be extended and used for the purpose.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12582942_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582942_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 08:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T08:31:17+0000\'\u003e28\\/Mar\\/08 08:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Note that   DERBY-3571   will only track LOB locators in its current state. \\nI think it can be extended to track all LOBs, but it is not clear to me at this point if that is the right way to proceed. \\nAnswering these questions would help determine that: \\n a) Shall an exception be thrown for any type of column if accessed twice? \\n b) If not, which columns types does the restriction apply to? \\n\\n I think a more general solution would be needed if an exception shall be raised for all column types. \\nIf a solution is needed only for LOBs, I believe LOBStateTracker can be extended and used for the purpose.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583123\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12583123&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583123\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583123_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583123_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 18:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T18:13:34+0000\'\u003e28\\/Mar\\/08 18:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFrom what I understand,  the restriction is only for lob columns. \u003cbr\\/\u003e\\nIf no one objects I will commit Oystein\'s patch to trunk on \u003cbr\\/\u003e\\nMonday and file an issue for the improved error messages.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583123_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583123_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 18:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T18:13:34+0000\'\u003e28\\/Mar\\/08 18:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    From what I understand,  the restriction is only for lob columns.  \\nIf no one objects I will commit Oystein\'s patch to trunk on  \\nMonday and file an issue for the improved error messages. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583487\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12583487&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583487\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583487_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583487_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/08 21:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-30T21:01:54+0000\'\u003e30\\/Mar\\/08 21:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached is a first shot at a release note for this issue. Please let me know if you have comments.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583487_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583487_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/08 21:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-30T21:01:54+0000\'\u003e30\\/Mar\\/08 21:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached is a first shot at a release note for this issue. Please let me know if you have comments.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583656\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12583656&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583656\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583656_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583656_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/08 12:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-31T12:23:23+0000\'\u003e31\\/Mar\\/08 12:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ecommitted this to trunk with revision  642974.  I will backport to 10.4\u003cbr\\/\u003e\\nafter tinderbox runs cleanly. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583656_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583656_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/08 12:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-31T12:23:23+0000\'\u003e31\\/Mar\\/08 12:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    committed this to trunk with revision  642974.  I will backport to 10.4 \\nafter tinderbox runs cleanly.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583792\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12583792&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583792\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583792_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583792_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/08 18:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-31T18:39:54+0000\'\u003e31\\/Mar\\/08 18:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ecommitted to trunk and 10.4\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12583792_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583792_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/08 18:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-31T18:39:54+0000\'\u003e31\\/Mar\\/08 18:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    committed to trunk and 10.4              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12584895\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12584895&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12584895\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12584895_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584895_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 23:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T23:02:11+0000\'\u003e02\\/Apr\\/08 23:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\'derby-2892-1a-alternative_fix_partial.diff\' demonstrates how the mechanism added by \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3571\\\" title=\\\"LOB locators are not released if the LOB columns are not accessed by the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3571\\\"\u003e\u003cdel\u003eDERBY-3571\u003c\\/del\u003e\u003c\\/a\u003e can be used to release the locators.\u003cbr\\/\u003e\\nIt does not implement the required code cleanup, which would basically be to remove parts of the already committed patch. It allows multiple calls to all getter methods, but only a single call is allowed for the getXStream methods. This restriction is enforced independently of this patch. A solution disallowing multiple calls can easily be implemented on top of patch 1a.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe advantage of the alternative implementation, is that it requires less code and that it might make the locator release a lot more efficient when the piggy-backing scheme is implemented.\u003c\\/p\u003e\\n\\n\u003cp\u003esuites.All ran without failures (except for the constantly failing management test).\u003cbr\\/\u003e\\nPatch ready for comments.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12584895_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584895_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 23:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T23:02:11+0000\'\u003e02\\/Apr\\/08 23:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \'derby-2892-1a-alternative_fix_partial.diff\' demonstrates how the mechanism added by   DERBY-3571   can be used to release the locators. \\nIt does not implement the required code cleanup, which would basically be to remove parts of the already committed patch. It allows multiple calls to all getter methods, but only a single call is allowed for the getXStream methods. This restriction is enforced independently of this patch. A solution disallowing multiple calls can easily be implemented on top of patch 1a. \\n\\n The advantage of the alternative implementation, is that it requires less code and that it might make the locator release a lot more efficient when the piggy-backing scheme is implemented. \\n\\n suites.All ran without failures (except for the constantly failing management test). \\nPatch ready for comments.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12586611\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12586611&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12586611\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12586611_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12586611_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Apr\\/08 00:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-08T00:32:13+0000\'\u003e08\\/Apr\\/08 00:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think the approach in \'derby-2892-1a-alternative_fix_partial.diff\' is preferable to the current approach because it does not introduce incompatibilities and can be backported to 10.3 where the bug still exists.  I  don\'t think we should disallow multiple calls unless we have to.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12586611_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12586611_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Apr\\/08 00:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-08T00:32:13+0000\'\u003e08\\/Apr\\/08 00:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think the approach in \'derby-2892-1a-alternative_fix_partial.diff\' is preferable to the current approach because it does not introduce incompatibilities and can be backported to 10.3 where the bug still exists.  I  don\'t think we should disallow multiple calls unless we have to. \\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12587001\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12587001&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12587001\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12587001_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12587001_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Apr\\/08 23:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-08T23:17:55+0000\'\u003e08\\/Apr\\/08 23:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFYI, some of our streams, for instance BlobLocatorInputStream, don\'t have a notion of being closed. It is therefore important that such streams are wrapped in a CloseFilterInputStream (and they are).\u003cbr\\/\u003e\\nI do not know why some streams ignore the close action, and I haven\'t verified if they are wrapped in each and every place they are used (outside the ResultSet class).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12587001_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12587001_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Apr\\/08 23:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-08T23:17:55+0000\'\u003e08\\/Apr\\/08 23:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    FYI, some of our streams, for instance BlobLocatorInputStream, don\'t have a notion of being closed. It is therefore important that such streams are wrapped in a CloseFilterInputStream (and they are). \\nI do not know why some streams ignore the close action, and I haven\'t verified if they are wrapped in each and every place they are used (outside the ResultSet class).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12587125\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12587125&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12587125\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12587125_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12587125_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Apr\\/08 10:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-09T10:14:31+0000\'\u003e09\\/Apr\\/08 10:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReopening to commit alternative fix.\u003cbr\\/\u003e\\nI expect there will be two patches, one is ready. The next one will remove some of the new functionality added in the original patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12587125_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12587125_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Apr\\/08 10:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-09T10:14:31+0000\'\u003e09\\/Apr\\/08 10:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reopening to commit alternative fix. \\nI expect there will be two patches, one is ready. The next one will remove some of the new functionality added in the original patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12587128\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12587128&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12587128\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12587128_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12587128_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Apr\\/08 10:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-09T10:21:01+0000\'\u003e09\\/Apr\\/08 10:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\'derby-2892-1b-alternative_fix_partial.diff\' is slightly changed from 1a; reordered keywords (abstract public -&gt; public abstract) and removed an added blank line.\u003c\\/p\u003e\\n\\n\u003cp\u003eCommitted to trunk with revsion 646255.\u003cbr\\/\u003e\\nI plan to backport the fix to 10.4 when the last patch has been committed, and also investigate the possibility of backporting to 10.3.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12587128_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12587128_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Apr\\/08 10:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-09T10:21:01+0000\'\u003e09\\/Apr\\/08 10:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \'derby-2892-1b-alternative_fix_partial.diff\' is slightly changed from 1a; reordered keywords (abstract public -&gt; public abstract) and removed an added blank line. \\n\\n Committed to trunk with revsion 646255. \\nI plan to backport the fix to 10.4 when the last patch has been committed, and also investigate the possibility of backporting to 10.3.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12587134\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12587134&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12587134\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12587134_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12587134_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Apr\\/08 10:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-09T10:29:50+0000\'\u003e09\\/Apr\\/08 10:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eForgot to say, but I ran the repro \\u00D8ystein mentioned with patch 1b applied and Xmx set to 48m without getting OOMEs.\u003c\\/p\u003e\\n\\n\u003cp\u003e\'derby-2892-2a-alternative_fix_cleanup.diff\' removes code that was added to support the first solution.\u003cbr\\/\u003e\\nNeed to verify if I have forgotten something.\u003c\\/p\u003e\\n\\n\u003cp\u003ePatch ready for review.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12587134_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12587134_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Apr\\/08 10:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-09T10:29:50+0000\'\u003e09\\/Apr\\/08 10:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Forgot to say, but I ran the repro \\u00D8ystein mentioned with patch 1b applied and Xmx set to 48m without getting OOMEs. \\n\\n \'derby-2892-2a-alternative_fix_cleanup.diff\' removes code that was added to support the first solution. \\nNeed to verify if I have forgotten something. \\n\\n Patch ready for review.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12588272\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12588272&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12588272\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12588272_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12588272_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Apr\\/08 16:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-12T16:24:06+0000\'\u003e12\\/Apr\\/08 16:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch derby-2892-1b-alternative_fix_partial.diff merged to 10.4.\u003cbr\\/\u003e\\nCommitted revision 647465.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12588272_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12588272_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Apr\\/08 16:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-12T16:24:06+0000\'\u003e12\\/Apr\\/08 16:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch derby-2892-1b-alternative_fix_partial.diff merged to 10.4. \\nCommitted revision 647465.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12588502\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12588502&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12588502\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12588502_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12588502_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/08 07:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-14T07:40:22+0000\'\u003e14\\/Apr\\/08 07:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for backporting the fix Dyre.\u003c\\/p\u003e\\n\\n\u003cp\u003eI committed the last cleanup patch (2a) to trunk with revision 647680 and merged it into 10.4 with revision 647682.\u003cbr\\/\u003e\\nI\'m not planning on any more fixes under this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eCan the release note needed flag be unset now?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12588502_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12588502_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Apr\\/08 07:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-14T07:40:22+0000\'\u003e14\\/Apr\\/08 07:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for backporting the fix Dyre. \\n\\n I committed the last cleanup patch (2a) to trunk with revision 647680 and merged it into 10.4 with revision 647682. \\nI\'m not planning on any more fixes under this issue. \\n\\n Can the release note needed flag be unset now?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12592151\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12592151&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12592151\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592151_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592151_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/08 18:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-24T18:56:11+0000\'\u003e24\\/Apr\\/08 18:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUnsetting the release note needed and existing application impact  flags as this issue\'s fix no longer impacts existing applications.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am leaving this issue open to port to 10.3\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592151_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592151_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/08 18:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-24T18:56:11+0000\'\u003e24\\/Apr\\/08 18:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Unsetting the release note needed and existing application impact  flags as this issue\'s fix no longer impacts existing applications. \\n\\n I am leaving this issue open to port to 10.3              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12592165\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12592165&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12592165\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592165_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592165_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/08 20:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-24T20:36:54+0000\'\u003e24\\/Apr\\/08 20:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI attempted to merge this fix to 10.3 Attached is the patch for my first try (derby-2892_10.3_try1_diff.txt not for commit).  I ported 643091,646255, and 647680 from trunk, but something is not quite right, because I still am getting locks held. LargeDataLocksTest fails with \u003c\\/p\u003e\\n\\n\u003cp\u003e1) testGetBinaryStream(org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest)junit.framework.AssertionF\u003cbr\\/\u003e\\nailedError: expected:&lt;0&gt; but was:&lt;2&gt;\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest.testGetBinaryStream(LargeDataLocksTest\u003cbr\\/\u003e\\n.java:114)\u003cbr\\/\u003e\\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\u003cbr\\/\u003e\\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\u003cbr\\/\u003e\\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)\u003cbr\\/\u003e\\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:23)\u003cbr\\/\u003e\\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\u003cbr\\/\u003e\\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\u003cbr\\/\u003e\\n        at junit.extensions.TestSetup.run(TestSetup.java:23)\u003c\\/p\u003e\\n\\n\u003cp\u003eOddly testCharacterStream seems to be ok. Investigating what could be the matter.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592165_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592165_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/08 20:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-24T20:36:54+0000\'\u003e24\\/Apr\\/08 20:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I attempted to merge this fix to 10.3 Attached is the patch for my first try (derby-2892_10.3_try1_diff.txt not for commit).  I ported 643091,646255, and 647680 from trunk, but something is not quite right, because I still am getting locks held. LargeDataLocksTest fails with  \\n\\n 1) testGetBinaryStream(org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest)junit.framework.AssertionF \\nailedError: expected:&lt;0&gt; but was:&lt;2&gt; \\n        at org.apache.derbyTesting.functionTests.tests.jdbcapi.LargeDataLocksTest.testGetBinaryStream(LargeDataLocksTest \\n.java:114) \\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) \\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) \\n        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88) \\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n        at junit.extensions.TestSetup.run(TestSetup.java:23) \\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n        at junit.extensions.TestSetup.run(TestSetup.java:23) \\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57) \\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22) \\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19) \\n        at junit.extensions.TestSetup.run(TestSetup.java:23) \\n\\n Oddly testCharacterStream seems to be ok. Investigating what could be the matter. \\n\\n Kathey              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12592172\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12592172&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12592172\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592172_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592172_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/08 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-24T21:14:05+0000\'\u003e24\\/Apr\\/08 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI found my problem. My client was way out of date because I had reverted to a very old version to track down a regression.  I think I was missing the fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3098\\\" title=\\\"LOB locks are not released after free().\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3098\\\"\u003e\u003cdel\u003eDERBY-3098\u003c\\/del\u003e\u003c\\/a\u003e. Sorry for the noise.   I\'ll run the full set of tests  and commit if all goes well.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592172_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592172_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Apr\\/08 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-24T21:14:05+0000\'\u003e24\\/Apr\\/08 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I found my problem. My client was way out of date because I had reverted to a very old version to track down a regression.  I think I was missing the fix for   DERBY-3098  . Sorry for the noise.   I\'ll run the full set of tests  and commit if all goes well. \\n\\n Kathey \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12592367\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12592367&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12592367\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12592367_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592367_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/08 13:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-25T13:01:01+0000\'\u003e25\\/Apr\\/08 13:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGood to hear.\u003cbr\\/\u003e\\nI\'m open to look into any issues you might find in this area after your latest test cycle has completed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12592367_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592367_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/08 13:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-25T13:01:01+0000\'\u003e25\\/Apr\\/08 13:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Good to hear. \\nI\'m open to look into any issues you might find in this area after your latest test cycle has completed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12592413\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2892?focusedCommentId=12592413&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12592413\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592413_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592413_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/08 15:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-25T15:46:51+0000\'\u003e25\\/Apr\\/08 15:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eResolving for 10.3.2.2. Assigning to Kristian since we went with his fix in the end.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592413_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592413_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/08 15:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-25T15:46:51+0000\'\u003e25\\/Apr\\/08 15:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Resolving for 10.3.2.2. Assigning to Kristian since we went with his fix in the end. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239056033"> 
    <input type="hidden" title="jira.request.server.time" value="391"> 
    <input type="hidden" title="jira.request.id" value="517x94377232x5"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="4"> 
    <input type="hidden" title="db.reads.time.in.ms" value="74"> 
    <input type="hidden" title="db.conns.time.in.ms" value="91"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 517x94377232x5
	          REQUEST TIMESTAMP : [05/Mar/2018:08:37:36 +0000]
	               REQUEST TIME : 0.3910
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 4

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=41, elapsedTotal=74255700, elapsedMin=425860, elapsedMax=21533303, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=45, elapsedTotal=91408314, elapsedMin=442178, elapsedMax=21755659, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>