<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|20a1236c22fbd60a1121c0943f26a34cfe83c2df|lout"> 
  <link rel="shortcut icon" href="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"sd.customer.profile.multi.languages\":true,\"sd.customer.portal.transitions\":true,\"sd.customer.portal.transitions.config\":true,\"sd.custom.email.stripping.rules\":false,\"sd.sla.lucene.issue.id.callback.performance\":true,\"sd.new.settings.sidebar.location\":true,\"sd.workload.report.paginator\":true,\"sd.experimental.portal.search.algorithm.default.1\":false,\"sd.customer.portal.help.center.agent.announcement\":true,\"sd.sla.improved.rendering\":false,\"sd.experimental.portal.search.algorithm.default.2\":false,\"sd.customer.feedback.validate.reporter.on.token\":true,\"sd.custom.email.notifications.utf8.csat.star\":true,\"sd.who.create.customers.by.email.setting\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.renderer.consider.variable.format\":true,\"sd.stats.event.tracking\":true,\"sd.password.helper.dialog\":true,\"sd.canned.responses\":false,\"sd.portal.help.center.customer.signup.secondary.email\":true,\"sd.custom.email.notifications.manage.language\":true,\"sd.use.search.by.permissions\":true,\"sd.slavalue.record.updated.date\":false,\"sd.report.custom.date.range\":false,\"sd.kb.article.helpfulness.report\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"sd.custom.email.notifications.styling\":true,\"sd.workinghours.new.page.bulldog.1\":false,\"sd.customer.portal.two.step.login\":false,\"sd.automation.psmq.async.executor\":true,\"sd.customer.org.list.page.lazy.search\":true,\"sd.approval.requested.when.handler\":true,\"sd.request.type.field.rest.api.filtering.bugfix\":true,\"sd.automation.then.action.auto.answer.approval\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"sla.will.only.be.paused.if.they.are.already.started\":true,\"sd.kb.comment.share.stats.collection\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"sd.customer.orgs.group.participants\":true,\"sd.portal.help.center.customer.signup\":true,\"sd.sla.agent.jql.security.restricted\":true,\"sd.test.feature.flag.x\":true,\"sd.test.feature.flag.y\":false,\"sd.cluster.safe.mail.channel.shutdown\":true,\"sd.email.channel.folders\":false,\"sd.email.analytics.open\":false,\"sd.kb.project.creation.create.link.space\":true,\"sd.workinghours.new.page\":false,\"sd.confluence.anonymous.permission.fix\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"sd.customer.portal.project.agent.announcement\":true,\"sd.automation.audit.log\":true,\"jira.jql.suggestrecentfields\":false,\"sd.canned.responses.check.index.startup\":false,\"sd.new.project.templates\":true,\"sd.custom.email.notifications.custom.rules.simple.ui\":false,\"sd.custom.email.notifications.cut.over\":true,\"sd.dismiss.all.misconfiguration.warnings.setting\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"sd.sla.configurations.export\":true,\"sd.canned.responses.variable.substitution\":true,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"sd.customer.portal.prioties.per.project.fix\":true,\"jira.instrumentation.laas\":false,\"sd.kb.self.service.report\":false,\"sla.improved.request.handling\":true,\"sd.no.schedule.async.upgrade.tasks\":true,\"sd.kb.primary.nav\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"sd.kb.issueview.panel.phase2\":true,\"sd.email.outsider.comments\":true,\"jira.create.linked.issue\":true,\"sd.kb.issueview.panel\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"sd.approvals.light.weight\":false,\"sd.automation.then.webhook\":true,\"sd.respect.inline.edit.issue.off\":true,\"jira.jql.smartautoselectfirst\":false,\"sd.global.portal.search.atlassian.only.tracking\":false,\"sd.automation.if.condition.comment.primary.action\":true,\"jira.priorities.per.project\":true,\"sd.inline.noformat.renderer\":true,\"sd.customer.request.type.create.edit.screens\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.servicedesk.servicedesk-canned-responses-plugin:canned-responses-data-provider.data"]="{\"substitutionVariables\":{\"issue.summary\":\"Issue summary\",\"issue.description\":\"Issue description\",\"issue.key\":\"Issue key\",\"issue.reporter.name\":\"Issue reporter\",\"issue.resolution\":\"Issue resolution\",\"request.url\":\"Request URL\",\"request.status\":\"Request status\"}}";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-help-links.help-links"]="{\"help\":{\"email.settings\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"managing.queues\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+queues+for+your+team\",\"email.setup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"request.settings.help.bubble\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\",\"email.settings.suitablerequest\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email#Receivingrequestsbyemail-suitablerequest\",\"sla.import.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Importing+SLAs\",\"documentation.home\":\"https://docs.atlassian.com/jira/jsd-docs-039/JIRA+Service+Desk+Documentation\",\"default\":\"https://docs.atlassian.com/jira/jsd-docs-039/\",\"create.space.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base#serving-customers-with-a-knowledge-base-createpermission\",\"email.settings.troubleshooting\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+the+email+channel\",\"admin.notifications.config\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+service+desk+notifications\",\"troubleshoot.requesttype\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+request+types\",\"approvals.configuration\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+JIRA+Service+Desk+approvals\",\"setting.up.reports\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+service+desk+reports\",\"public.signup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+public+signup\",\"knowledge.base\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base\",\"resolve.permission.scheme.errors\":\"https://docs.atlassian.com/jira/jsd-docs-039/Resolving+permission+scheme+errors\",\"getting.started\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+with+JIRA+Service+Desk\",\"getting.started.agent\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+for+service+desk+agents\",\"invite.customers\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\"},\"kb\":{\"default\":\"https://confluence.atlassian.com/display/SDKB/\",\"troubleshooting.user.management.issues\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\",\"legacytransition\":\"https://confluence.atlassian.com/display/SDKB/Replacing+legacy+automatic+transitions+with+automation+rules\",\"umtroubleshoot\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\"}}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-base-url.base-url"]="\"https://issues.apache.org/jira\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"d392ceaccc0714\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/1a6b21131945f6f49ff48336b49ca3fe-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/d8484c9183f546511a8e336a8779bcd9-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d3b35d835f8f46fc3b53bb4db7f85158-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/71d42e74136d842a3ef4d5d136484843-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/944bb39eced1b35cfc7194aa02eb5a5a/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/5a8f0f8b8aa8f96a4f0f7e9e248d62f3-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-2872"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-2872] Add Replication functionality to Derby - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-2872] Add Replication functionality to Derby - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2872">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-2872" href="/jira/browse/DERBY-2872" id="key-val" rel="12372418">DERBY-2872</a></li>
                </ol>
                <h1 id="summary-val">Add Replication functionality to Derby</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2872"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-2872/DERBY-2872.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-2872/DERBY-2872.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-2872/DERBY-2872.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-2872/DERBY-2872.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.4.1.3 ">10.4.1.3</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.1.3" title="10.4.1.3 ">10.4.1.3</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Replication" title="Replication ">Replication</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12372418-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>It would be nice to have replication functionality to Derby; many potential Derby users seem to want this. The attached functional specification lists some initial thoughts for how this feature may work.</p> 
                  <p>Dag Wanvik had a look at this functionality some months ago. He wrote a proof of concept patch that enables replication by copying (using file system copy) and redoing the existing Derby transaction log to the slave (unfortunately, I can not find the mail thread now).</p> 
                  <p><a href="https://issues.apache.org/jira/browse/DERBY-2852" title="Derby: Replication and Availability" class="issue-link" data-issue-key="DERBY-2852"><del>DERBY-2852</del></a> contains a patch that enables replication by sending dedicated logical log records to the slave through a network connection and redoing these.</p> 
                  <p>Replication has been requested and discussed previously in multiple threads, including these:</p> 
                  <p><a href="http://mail-archives.apache.org/mod_mbox/db-derby-user/200504.mbox/%3c426E04C1.1070904@yahoo.de%3e" class="external-link" rel="nofollow">http://mail-archives.apache.org/mod_mbox/db-derby-user/200504.mbox/%3c426E04C1.1070904@yahoo.de%3e</a><br> <a href="http://www.nabble.com/Does-Derby-support-Transaction-Logging---t2626667.html" class="external-link" rel="nofollow">http://www.nabble.com/Does-Derby-support-Transaction-Logging---t2626667.html</a></p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-2872?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-2872?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-2872?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-2872?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12365556" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12365556/master_classes_1.pdf" draggable="true" data-downloadurl="application/pdf:master_classes_1.pdf:https://issues.apache.org/jira/secure/attachment/12365556/master_classes_1.pdf" file-preview-id="12365556" file-preview-title="master_classes_1.pdf" file-preview-type="document"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-pdf" title="PDF File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12365556/master_classes_1.pdf" title="Latest  11/Sep/07 12:19 - Jørgen Løland" draggable="true" data-downloadurl="application/pdf:master_classes_1.pdf:https://issues.apache.org/jira/secure/attachment/12365556/master_classes_1.pdf" file-preview-id="12365556" file-preview-title="master_classes_1.pdf" file-preview-type="document">master_classes_1.pdf</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-11T12:19:29.952Z">11/Sep/07 12:19</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366445" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366445/poc_master_v2.diff" draggable="true" data-downloadurl="text/x-patch:poc_master_v2.diff:https://issues.apache.org/jira/secure/attachment/12366445/poc_master_v2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366445/poc_master_v2.diff" title="Latest  24/Sep/07 08:51 - Jørgen Løland" draggable="true" data-downloadurl="text/x-patch:poc_master_v2.diff:https://issues.apache.org/jira/secure/attachment/12366445/poc_master_v2.diff">poc_master_v2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-24T08:51:38.288Z">24/Sep/07 08:51</time>
                   </dd>
                   <dd class="attachment-size">
                    35 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366444" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366444/poc_master_v2.stat" draggable="true" data-downloadurl="application/octet-stream:poc_master_v2.stat:https://issues.apache.org/jira/secure/attachment/12366444/poc_master_v2.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366444/poc_master_v2.stat" title="Latest  24/Sep/07 08:51 - Jørgen Løland" draggable="true" data-downloadurl="application/octet-stream:poc_master_v2.stat:https://issues.apache.org/jira/secure/attachment/12366444/poc_master_v2.stat">poc_master_v2.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-24T08:51:38.129Z">24/Sep/07 08:51</time>
                   </dd>
                   <dd class="attachment-size">
                    0.7 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366732" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366732/poc_master_v2b.diff" draggable="true" data-downloadurl="text/x-patch:poc_master_v2b.diff:https://issues.apache.org/jira/secure/attachment/12366732/poc_master_v2b.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366732/poc_master_v2b.diff" title="Latest  28/Sep/07 09:57 - Jørgen Løland" draggable="true" data-downloadurl="text/x-patch:poc_master_v2b.diff:https://issues.apache.org/jira/secure/attachment/12366732/poc_master_v2b.diff">poc_master_v2b.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-28T09:57:20.363Z">28/Sep/07 09:57</time>
                   </dd>
                   <dd class="attachment-size">
                    44 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366447" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366447/poc_slave_v2.diff" draggable="true" data-downloadurl="text/x-patch:poc_slave_v2.diff:https://issues.apache.org/jira/secure/attachment/12366447/poc_slave_v2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366447/poc_slave_v2.diff" title="Latest  24/Sep/07 08:54 - Jørgen Løland" draggable="true" data-downloadurl="text/x-patch:poc_slave_v2.diff:https://issues.apache.org/jira/secure/attachment/12366447/poc_slave_v2.diff">poc_slave_v2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-24T08:54:39.516Z">24/Sep/07 08:54</time>
                   </dd>
                   <dd class="attachment-size">
                    40 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366446" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366446/poc_slave_v2.stat" draggable="true" data-downloadurl="application/octet-stream:poc_slave_v2.stat:https://issues.apache.org/jira/secure/attachment/12366446/poc_slave_v2.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366446/poc_slave_v2.stat" title="Latest  24/Sep/07 08:54 - Jørgen Løland" draggable="true" data-downloadurl="application/octet-stream:poc_slave_v2.stat:https://issues.apache.org/jira/secure/attachment/12366446/poc_slave_v2.stat">poc_slave_v2.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-24T08:54:39.387Z">24/Sep/07 08:54</time>
                   </dd>
                   <dd class="attachment-size">
                    0.7 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366733" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366733/poc_slave_v2b.diff" draggable="true" data-downloadurl="text/x-patch:poc_slave_v2b.diff:https://issues.apache.org/jira/secure/attachment/12366733/poc_slave_v2b.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366733/poc_slave_v2b.diff" title="Latest  28/Sep/07 09:57 - Jørgen Løland" draggable="true" data-downloadurl="text/x-patch:poc_slave_v2b.diff:https://issues.apache.org/jira/secure/attachment/12366733/poc_slave_v2b.diff">poc_slave_v2b.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-28T09:57:20.508Z">28/Sep/07 09:57</time>
                   </dd>
                   <dd class="attachment-size">
                    54 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12367463" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12367463/poc_slave_v2c.diff" draggable="true" data-downloadurl="text/x-diff:poc_slave_v2c.diff:https://issues.apache.org/jira/secure/attachment/12367463/poc_slave_v2c.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12367463/poc_slave_v2c.diff" title="Latest  10/Oct/07 11:01 - V.Narayanan" draggable="true" data-downloadurl="text/x-diff:poc_slave_v2c.diff:https://issues.apache.org/jira/secure/attachment/12367463/poc_slave_v2c.diff">poc_slave_v2c.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-10-10T11:01:14.653Z">10/Oct/07 11:01</time>
                   </dd>
                   <dd class="attachment-size">
                    56 kB
                   </dd>
                   <dd class="attachment-author">
                    V.Narayanan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12360914" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12360914/proof_of_concept_master.diff" draggable="true" data-downloadurl="text/x-patch:proof_of_concept_master.diff:https://issues.apache.org/jira/secure/attachment/12360914/proof_of_concept_master.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12360914/proof_of_concept_master.diff" title="Latest  02/Jul/07 09:20 - Jørgen Løland" draggable="true" data-downloadurl="text/x-patch:proof_of_concept_master.diff:https://issues.apache.org/jira/secure/attachment/12360914/proof_of_concept_master.diff">proof_of_concept_master.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-02T09:20:31.850Z">02/Jul/07 09:20</time>
                   </dd>
                   <dd class="attachment-size">
                    65 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12360915" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12360915/proof_of_concept_master.stat" draggable="true" data-downloadurl="application/octet-stream:proof_of_concept_master.stat:https://issues.apache.org/jira/secure/attachment/12360915/proof_of_concept_master.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12360915/proof_of_concept_master.stat" title="Latest  02/Jul/07 09:20 - Jørgen Løland" draggable="true" data-downloadurl="application/octet-stream:proof_of_concept_master.stat:https://issues.apache.org/jira/secure/attachment/12360915/proof_of_concept_master.stat">proof_of_concept_master.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-02T09:20:31.999Z">02/Jul/07 09:20</time>
                   </dd>
                   <dd class="attachment-size">
                    0.4 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12360916" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12360916/proof_of_concept_slave.diff" draggable="true" data-downloadurl="text/x-patch:proof_of_concept_slave.diff:https://issues.apache.org/jira/secure/attachment/12360916/proof_of_concept_slave.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12360916/proof_of_concept_slave.diff" title="Latest  02/Jul/07 09:20 - Jørgen Løland" draggable="true" data-downloadurl="text/x-patch:proof_of_concept_slave.diff:https://issues.apache.org/jira/secure/attachment/12360916/proof_of_concept_slave.diff">proof_of_concept_slave.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-02T09:20:58.960Z">02/Jul/07 09:20</time>
                   </dd>
                   <dd class="attachment-size">
                    18 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12360917" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12360917/proof_of_concept_slave.stat" draggable="true" data-downloadurl="application/octet-stream:proof_of_concept_slave.stat:https://issues.apache.org/jira/secure/attachment/12360917/proof_of_concept_slave.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12360917/proof_of_concept_slave.stat" title="Latest  02/Jul/07 09:20 - Jørgen Løland" draggable="true" data-downloadurl="application/octet-stream:proof_of_concept_slave.stat:https://issues.apache.org/jira/secure/attachment/12360917/proof_of_concept_slave.stat">proof_of_concept_slave.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-02T09:20:59.142Z">02/Jul/07 09:20</time>
                   </dd>
                   <dd class="attachment-size">
                    0.6 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12366734" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12366734/proof-of-concept_v2b-howto.txt" draggable="true" data-downloadurl="text/plain:proof-of-concept_v2b-howto.txt:https://issues.apache.org/jira/secure/attachment/12366734/proof-of-concept_v2b-howto.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12366734/proof-of-concept_v2b-howto.txt" title="Latest  28/Sep/07 09:57 - Jørgen Løland" draggable="true" data-downloadurl="text/plain:proof-of-concept_v2b-howto.txt:https://issues.apache.org/jira/secure/attachment/12366734/proof-of-concept_v2b-howto.txt">proof-of-concept_v2b-howto.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-28T09:57:20.532Z">28/Sep/07 09:57</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12377517" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12377517/replication_funcspec_v10.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v10.html:https://issues.apache.org/jira/secure/attachment/12377517/replication_funcspec_v10.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12377517/replication_funcspec_v10.html" title="Latest  10/Mar/08 10:21 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec_v10.html:https://issues.apache.org/jira/secure/attachment/12377517/replication_funcspec_v10.html">replication_funcspec_v10.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-10T10:21:11.920Z">10/Mar/08 10:21</time>
                   </dd>
                   <dd class="attachment-size">
                    30 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12377514" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12377514/replication_funcspec_v10.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v10.html:https://issues.apache.org/jira/secure/attachment/12377514/replication_funcspec_v10.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12377514/replication_funcspec_v10.html" title=" 10/Mar/08 09:57 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec_v10.html:https://issues.apache.org/jira/secure/attachment/12377514/replication_funcspec_v10.html">replication_funcspec_v10.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-10T09:57:20.328Z">10/Mar/08 09:57</time>
                   </dd>
                   <dd class="attachment-size">
                    30 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12361294" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12361294/replication_funcspec_v2.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v2.html:https://issues.apache.org/jira/secure/attachment/12361294/replication_funcspec_v2.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12361294/replication_funcspec_v2.html" title="Latest  06/Jul/07 12:48 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec_v2.html:https://issues.apache.org/jira/secure/attachment/12361294/replication_funcspec_v2.html">replication_funcspec_v2.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-06T12:48:29.733Z">06/Jul/07 12:48</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12361474" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12361474/replication_funcspec_v3.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v3.html:https://issues.apache.org/jira/secure/attachment/12361474/replication_funcspec_v3.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12361474/replication_funcspec_v3.html" title="Latest  10/Jul/07 09:39 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec_v3.html:https://issues.apache.org/jira/secure/attachment/12361474/replication_funcspec_v3.html">replication_funcspec_v3.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-10T09:39:37.620Z">10/Jul/07 09:39</time>
                   </dd>
                   <dd class="attachment-size">
                    11 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12364057" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12364057/replication_funcspec_v4.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v4.html:https://issues.apache.org/jira/secure/attachment/12364057/replication_funcspec_v4.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12364057/replication_funcspec_v4.html" title="Latest  17/Aug/07 19:05 - V.Narayanan" draggable="true" data-downloadurl="text/html:replication_funcspec_v4.html:https://issues.apache.org/jira/secure/attachment/12364057/replication_funcspec_v4.html">replication_funcspec_v4.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-08-17T19:05:54.971Z">17/Aug/07 19:05</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    V.Narayanan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12365078" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12365078/replication_funcspec_v5.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v5.html:https://issues.apache.org/jira/secure/attachment/12365078/replication_funcspec_v5.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12365078/replication_funcspec_v5.html" title="Latest  04/Sep/07 12:55 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec_v5.html:https://issues.apache.org/jira/secure/attachment/12365078/replication_funcspec_v5.html">replication_funcspec_v5.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-04T12:55:35.863Z">04/Sep/07 12:55</time>
                   </dd>
                   <dd class="attachment-size">
                    12 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12368813" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12368813/replication_funcspec_v6.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v6.html:https://issues.apache.org/jira/secure/attachment/12368813/replication_funcspec_v6.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12368813/replication_funcspec_v6.html" title="Latest  01/Nov/07 10:33 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec_v6.html:https://issues.apache.org/jira/secure/attachment/12368813/replication_funcspec_v6.html">replication_funcspec_v6.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-11-01T10:33:19.996Z">01/Nov/07 10:33</time>
                   </dd>
                   <dd class="attachment-size">
                    17 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12369351" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12369351/replication_funcspec_v7.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v7.html:https://issues.apache.org/jira/secure/attachment/12369351/replication_funcspec_v7.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12369351/replication_funcspec_v7.html" title="Latest  12/Nov/07 08:44 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec_v7.html:https://issues.apache.org/jira/secure/attachment/12369351/replication_funcspec_v7.html">replication_funcspec_v7.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-11-12T08:44:40.581Z">12/Nov/07 08:44</time>
                   </dd>
                   <dd class="attachment-size">
                    23 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12372080" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12372080/replication_funcspec_v8.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v8.html:https://issues.apache.org/jira/secure/attachment/12372080/replication_funcspec_v8.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12372080/replication_funcspec_v8.html" title="Latest  21/Dec/07 13:12 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec_v8.html:https://issues.apache.org/jira/secure/attachment/12372080/replication_funcspec_v8.html">replication_funcspec_v8.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-12-21T13:12:59.226Z">21/Dec/07 13:12</time>
                   </dd>
                   <dd class="attachment-size">
                    26 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12375828" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12375828/replication_funcspec_v9.html" draggable="true" data-downloadurl="text/html:replication_funcspec_v9.html:https://issues.apache.org/jira/secure/attachment/12375828/replication_funcspec_v9.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12375828/replication_funcspec_v9.html" title="Latest  18/Feb/08 11:40 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec_v9.html:https://issues.apache.org/jira/secure/attachment/12375828/replication_funcspec_v9.html">replication_funcspec_v9.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-18T11:40:18.145Z">18/Feb/08 11:40</time>
                   </dd>
                   <dd class="attachment-size">
                    29 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12360559" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12360559/replication_funcspec.html" draggable="true" data-downloadurl="text/html:replication_funcspec.html:https://issues.apache.org/jira/secure/attachment/12360559/replication_funcspec.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12360559/replication_funcspec.html" title="Latest  26/Jun/07 09:56 - Jørgen Løland" draggable="true" data-downloadurl="text/html:replication_funcspec.html:https://issues.apache.org/jira/secure/attachment/12360559/replication_funcspec.html">replication_funcspec.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-06-26T09:56:39.006Z">26/Jun/07 09:56</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12360918" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12360918/replication_script.txt" draggable="true" data-downloadurl="text/plain:replication_script.txt:https://issues.apache.org/jira/secure/attachment/12360918/replication_script.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12360918/replication_script.txt" title="Latest  02/Jul/07 09:20 - Jørgen Løland" draggable="true" data-downloadurl="text/plain:replication_script.txt:https://issues.apache.org/jira/secure/attachment/12360918/replication_script.txt">replication_script.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-07-02T09:20:59.165Z">02/Jul/07 09:20</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12376938" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12376938/ReplicationDesign.pdf" draggable="true" data-downloadurl="application/pdf:ReplicationDesign.pdf:https://issues.apache.org/jira/secure/attachment/12376938/ReplicationDesign.pdf" file-preview-id="12376938" file-preview-title="ReplicationDesign.pdf" file-preview-type="document"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-pdf" title="PDF File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12376938/ReplicationDesign.pdf" title="Latest  02/Mar/08 17:26 - V.Narayanan" draggable="true" data-downloadurl="application/pdf:ReplicationDesign.pdf:https://issues.apache.org/jira/secure/attachment/12376938/ReplicationDesign.pdf" file-preview-id="12376938" file-preview-title="ReplicationDesign.pdf" file-preview-type="document">ReplicationDesign.pdf</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-02T17:26:32.543Z">02/Mar/08 17:26</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    V.Narayanan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12376937" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12376937/ReplicationWriteup.txt" draggable="true" data-downloadurl="text/plain:ReplicationWriteup.txt:https://issues.apache.org/jira/secure/attachment/12376937/ReplicationWriteup.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12376937/ReplicationWriteup.txt" title="Latest  02/Mar/08 17:26 - V.Narayanan" draggable="true" data-downloadurl="text/plain:ReplicationWriteup.txt:https://issues.apache.org/jira/secure/attachment/12376937/ReplicationWriteup.txt">ReplicationWriteup.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-02T17:26:32.506Z">02/Mar/08 17:26</time>
                   </dd>
                   <dd class="attachment-size">
                    11 kB
                   </dd>
                   <dd class="attachment-author">
                    V.Narayanan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12365560" data-issue-id="12372418" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12365560/slave_classes_1.pdf" draggable="true" data-downloadurl="application/pdf:slave_classes_1.pdf:https://issues.apache.org/jira/secure/attachment/12365560/slave_classes_1.pdf" file-preview-id="12365560" file-preview-title="slave_classes_1.pdf" file-preview-type="document"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-pdf" title="PDF File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12365560/slave_classes_1.pdf" title="Latest  11/Sep/07 13:35 - Jørgen Løland" draggable="true" data-downloadurl="application/pdf:slave_classes_1.pdf:https://issues.apache.org/jira/secure/attachment/12365560/slave_classes_1.pdf" file-preview-id="12365560" file-preview-title="slave_classes_1.pdf" file-preview-type="document">slave_classes_1.pdf</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2007-09-11T13:35:03.657Z">11/Sep/07 13:35</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Jørgen Løland
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="incorporates">
                   incorporates
                  </dt> 
                  <dd id="internal-12373499_12310010"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-2922: Replication: Add master replication mode "> <a href="/jira/browse/DERBY-2922" data-issue-key="DERBY-2922" class="issue-link link-title resolution">DERBY-2922</a> <span class="link-summary">Replication: Add master replication mode </span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12374543_12310010"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-2978: Replication: Add slave replication mode"> <a href="/jira/browse/DERBY-2978" data-issue-key="DERBY-2978" class="issue-link link-title resolution">DERBY-2978</a> <span class="link-summary">Replication: Add slave replication mode</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12381592_12310010"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-3169: Add documentation for replication"> <a href="/jira/browse/DERBY-3169" data-issue-key="DERBY-3169" class="issue-link link-title resolution">DERBY-3169</a> <span class="link-summary">Add documentation for replication</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is depended upon by">
                   is depended upon by
                  </dt> 
                  <dd id="internal-12381451_10001"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-3161: Test the Derby Replication functionality introduced in DERBY-2872"> <a href="/jira/browse/DERBY-3161" data-issue-key="DERBY-3161" class="issue-link link-title resolution">DERBY-3161</a> <span class="link-summary">Test the Derby Replication functionality introduced in DERBY-2872</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12372115_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-2852: Derby: Replication and Availability"> <a href="/jira/browse/DERBY-2852" data-issue-key="DERBY-2852" class="issue-link link-title resolution">DERBY-2852</a> <span class="link-summary">Derby: Replication and Availability</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="view-subtasks" class="module toggle-wrap">
               <div id="view-subtasks_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="subtask-view-options" class="aui-list-section aui-first aui-last">
                     <li class="aui-list-item"><a id="subtasks-show-all" href="/jira/browse/DERBY-2872?subTaskView=all#issuetable" class="aui-list-checked aui-checked aui-list-item-link" title="Show All"><span>Show All</span></a></li>
                     <li class="aui-list-item"><a id="subtasks-show-open" href="/jira/browse/DERBY-2872?subTaskView=unresolved#issuetable" class="aui-list-checked aui-list-item-link" title="Show Open"><span>Show Open</span></a></li>
                     <li class="aui-list-item"><a id="subtasks-bulk-operation" href="/jira/issue/bulkedit/BulkEdit1!default.jspa?reset=true&amp;searchParent=DERBY-2872" class="aui-list-checked aui-list-item-link" title="Bulk operation"><span>Bulk operation</span></a></li>
                     <li class="aui-list-item"><a id="subtasks-open-issue-navigator" href="/jira/issues/?jql=parent%3DDERBY-2872" class="aui-list-checked aui-list-item-link" title="Open issue navigator"><span>Open issue navigator</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Sub-Tasks</h2>
               </div>
               <div class="mod-content">
                <div class="mod-content intform subtask-table-container"> 
                 <issuetable-web-component> 
                  <table id="issuetable"> 
                   <tbody>
                    <tr id="issuerow12373496" rel="12373496" data-issuekey="DERBY-2921" class="issuerow"> 
                     <td class="stsequence">
                      <div rel="0" class="subtask-done">
                       1.
                      </div> </td> 
                     <td class="stsummary"><a class="issue-link" data-issue-key="DERBY-2921" href="/jira/browse/DERBY-2921">Replication: Add a network service that connects the master and slave Derby instances</a></td> 
                     <td class="issuetype"> <a class="issue-link" data-issue-key="DERBY-2921" href="/jira/browse/DERBY-2921"> <img src="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue"> </a> </td> 
                     <td class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </td> 
                     <td class="assignee"> <span class="tinylink"><a class="user-hover" rel="narayanan" id="assignee_narayanan" href="/jira/secure/ViewProfile.jspa?name=narayanan">V.Narayanan</a></span> </td> 
                    </tr> 
                    <tr id="issuerow12374145" rel="12374145" data-issuekey="DERBY-2954" class="issuerow"> 
                     <td class="stsequence">
                      <div rel="1" class="subtask-done">
                       2.
                      </div> </td> 
                     <td class="stsummary"><a class="issue-link" data-issue-key="DERBY-2954" href="/jira/browse/DERBY-2954">Add commands to NetworkServerControl for interacting with the replication functionality</a></td> 
                     <td class="issuetype"> <a class="issue-link" data-issue-key="DERBY-2954" href="/jira/browse/DERBY-2954"> <img src="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue"> </a> </td> 
                     <td class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </td> 
                     <td class="assignee"> <span class="tinylink"><a class="user-hover" rel="narayanan" id="assignee_narayanan" href="/jira/secure/ViewProfile.jspa?name=narayanan">V.Narayanan</a></span> </td> 
                    </tr> 
                    <tr id="issuerow12382092" rel="12382092" data-issuekey="DERBY-3189" class="issuerow"> 
                     <td class="stsequence">
                      <div rel="2" class="subtask-done">
                       3.
                      </div> </td> 
                     <td class="stsummary"><a class="issue-link" data-issue-key="DERBY-3189" href="/jira/browse/DERBY-3189">Replication: Add connection url command options for starting and stopping master</a></td> 
                     <td class="issuetype"> <a class="issue-link" data-issue-key="DERBY-3189" href="/jira/browse/DERBY-3189"> <img src="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue"> </a> </td> 
                     <td class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </td> 
                     <td class="assignee"> <span class="tinylink"><a class="user-hover" rel="narayanan" id="assignee_narayanan" href="/jira/secure/ViewProfile.jspa?name=narayanan">V.Narayanan</a></span> </td> 
                    </tr> 
                    <tr id="issuerow12382570" rel="12382570" data-issuekey="DERBY-3205" class="issuerow"> 
                     <td class="stsequence">
                      <div rel="3" class="subtask-done">
                       4.
                      </div> </td> 
                     <td class="stsummary"><a class="issue-link" data-issue-key="DERBY-3205" href="/jira/browse/DERBY-3205">Replication: Add connection url command options for starting, stopping slave and for failover</a></td> 
                     <td class="issuetype"> <a class="issue-link" data-issue-key="DERBY-3205" href="/jira/browse/DERBY-3205"> <img src="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue"> </a> </td> 
                     <td class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </td> 
                     <td class="assignee"> <span class="tinylink"><a class="user-hover" rel="jorgenlo" id="assignee_jorgenlo" href="/jira/secure/ViewProfile.jspa?name=jorgenlo">Jørgen Løland</a></span> </td> 
                    </tr> 
                    <tr id="issuerow12382576" rel="12382576" data-issuekey="DERBY-3206" class="issuerow"> 
                     <td class="stsequence">
                      <div rel="4" class="subtask-done">
                       5.
                      </div> </td> 
                     <td class="stsummary"><a class="issue-link" data-issue-key="DERBY-3206" href="/jira/browse/DERBY-3206">Replication: Add functionality to send various commands from master to slave using the replication network connection</a></td> 
                     <td class="issuetype"> <a class="issue-link" data-issue-key="DERBY-3206" href="/jira/browse/DERBY-3206"> <img src="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue"> </a> </td> 
                     <td class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </td> 
                     <td class="assignee"> <span class="tinylink"><a class="user-hover" rel="narayanan" id="assignee_narayanan" href="/jira/secure/ViewProfile.jspa?name=narayanan">V.Narayanan</a></span> </td> 
                    </tr> 
                    <tr id="issuerow12383494" rel="12383494" data-issuekey="DERBY-3235" class="issuerow"> 
                     <td class="stsequence">
                      <div rel="5" class="subtask-done">
                       6.
                      </div> </td> 
                     <td class="stsummary"><a class="issue-link" data-issue-key="DERBY-3235" href="/jira/browse/DERBY-3235">Implement the replication stop functionality</a></td> 
                     <td class="issuetype"> <a class="issue-link" data-issue-key="DERBY-3235" href="/jira/browse/DERBY-3235"> <img src="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue"> </a> </td> 
                     <td class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </td> 
                     <td class="assignee"> <span class="tinylink"><a class="user-hover" rel="narayanan" id="assignee_narayanan" href="/jira/secure/ViewProfile.jspa?name=narayanan">V.Narayanan</a></span> </td> 
                    </tr> 
                    <tr id="issuerow12383943" rel="12383943" data-issuekey="DERBY-3254" class="issuerow"> 
                     <td class="stsequence">
                      <div rel="6" class="subtask-done">
                       7.
                      </div> </td> 
                     <td class="stsummary"><a class="issue-link" data-issue-key="DERBY-3254" href="/jira/browse/DERBY-3254">Implement the replication failover functionality</a></td> 
                     <td class="issuetype"> <a class="issue-link" data-issue-key="DERBY-3254" href="/jira/browse/DERBY-3254"> <img src="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21146&amp;avatarType=issuetype" height="16" width="16" border="0" align="absmiddle" alt="Sub-task" title="Sub-task - The sub-task of the issue"> </a> </td> 
                     <td class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </td> 
                     <td class="assignee"> <span class="tinylink"><a class="user-hover" rel="narayanan" id="assignee_narayanan" href="/jira/secure/ViewProfile.jspa?name=narayanan">V.Narayanan</a></span> </td> 
                    </tr> 
                   </tbody> 
                  </table> 
                 </issuetable-web-component> 
                 <div class="end-of-stable-message"></div> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_jorgenlo" rel="jorgenlo" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Jørgen Løland&quot;,&quot;emailAddress&quot;:&quot;jorgen.loland@sun.com&quot;,&quot;username&quot;:&quot;jorgenlo&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="jorgenlo"></span></span> Jørgen Løland </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_jorgenlo" rel="jorgenlo" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Jørgen Løland&quot;,&quot;emailAddress&quot;:&quot;jorgen.loland@sun.com&quot;,&quot;username&quot;:&quot;jorgenlo&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="jorgenlo"></span></span> Jørgen Løland </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">4</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="26/Jun/07 09:55"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2007-06-26T09:55:17+0000">26/Jun/07 09:55</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="02/May/13 02:29"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-05-02T02:29:09+0000">02/May/13 02:29</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="28/Apr/08 06:42"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-04-28T06:42:49+0000">28/Apr/08 06:42</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for n/a, Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2872?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-2872?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12509522\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12509522&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12509522\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12509522_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509522_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/07 09:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-02T09:20:32+0000\'\u003e02\\/Jul\\/07 09:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"J\\u00F8rgen L\\u00F8land - 02\\/Jul\\/07 09:28\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA proof of concept patch is attached. It demonstrates that shipping derby log records from the master to the slave and redoing them at the slave, as described in the functional specification, works.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch modifies classes in the LogFactory service in rawstore so that the derby log records are sent from the master to the slave and written to the log file on the slave. When the slave is rebooted, the operations that were performed on the master are reflected at the slave as well.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have tried a few combinations of insert\\/update\\/delete\\/create table operations with only one transaction at a time on the master. The test cases have run successfull, meaning that the slave state has been equal to the master.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch has many shortcomings that need to be addressed. Some important ones are \u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003ethe slave has to be rebooted before the shipped log is applied\u003c\\/li\u003e\\n\\t\u003cli\u003einitially, the master database has to be copied to the slave location using file system copy\u003c\\/li\u003e\\n\\t\u003cli\u003ereplication is started for all databases controlled by the derby instances in question\u003c\\/li\u003e\\n\\t\u003cli\u003elog shipping is done in a blocking way, one log record at a time\u003c\\/li\u003e\\n\\t\u003cli\u003eRMI is used to ship the log records\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eAttachements:\u003cbr\\/\u003e\\nproof_of_concept_master* - patch for the Derby that will have the master role. ant all fails (toursdb); workaround: use ant buildsource instead\u003cbr\\/\u003e\\nproof_of_concept_slave* - patch for the Derby that will have the slave role\u003cbr\\/\u003e\\nreplication_script.txt - a few insert\\/update\\/delete\\/create scenarios that have successfully demonstrated the concept.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12509522_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509522_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/07 09:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-02T09:20:32+0000\'\u003e02\\/Jul\\/07 09:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"J\\u00F8rgen L\\u00F8land - 02\\/Jul\\/07 09:28\\\"\u003eedited\u003c\\/span\u003e                   A proof of concept patch is attached. It demonstrates that shipping derby log records from the master to the slave and redoing them at the slave, as described in the functional specification, works. \\n\\n The patch modifies classes in the LogFactory service in rawstore so that the derby log records are sent from the master to the slave and written to the log file on the slave. When the slave is rebooted, the operations that were performed on the master are reflected at the slave as well. \\n\\n I have tried a few combinations of insert\\/update\\/delete\\/create table operations with only one transaction at a time on the master. The test cases have run successfull, meaning that the slave state has been equal to the master. \\n\\n The patch has many shortcomings that need to be addressed. Some important ones are  \\n\\n \\n\\t the slave has to be rebooted before the shipped log is applied \\n\\t initially, the master database has to be copied to the slave location using file system copy \\n\\t replication is started for all databases controlled by the derby instances in question \\n\\t log shipping is done in a blocking way, one log record at a time \\n\\t RMI is used to ship the log records \\n \\n\\n\\n Attachements: \\nproof_of_concept_master* - patch for the Derby that will have the master role. ant all fails (toursdb); workaround: use ant buildsource instead \\nproof_of_concept_slave* - patch for the Derby that will have the slave role \\nreplication_script.txt - a few insert\\/update\\/delete\\/create scenarios that have successfully demonstrated the concept.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12509604\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12509604&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12509604\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12509604_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509604_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/07 16:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-02T16:03:49+0000\'\u003e02\\/Jul\\/07 16:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi J\\u00F8rgen,\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for tackling this important feature. I have some comments on the functional spec. It would be great if you could specify the customer experience in greater detail:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) How does the customer turn replication on and off? For instance, is this done by calling a system procedure?\u003c\\/p\u003e\\n\\n\u003cp\u003e2) Who has permission to turn replication on and off? E.g., the database owner?\u003c\\/p\u003e\\n\\n\u003cp\u003e3) After failover, when the slave is promoted to be the new master, presumably the customer will want replication to resume. What is the customer experience here? Does replication automatically begin to some default database? Alternatively, is a notification sent to some registered listener who can then restart replication?\u003c\\/p\u003e\\n\\n\u003cp\u003e4) Similarly, what\'s the customer experience when the slave fails? Does replication begin from the master to a new default database? Is a notification sent to a listener who can then restart replication?\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12509604_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509604_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jul\\/07 16:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-02T16:03:49+0000\'\u003e02\\/Jul\\/07 16:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi J\\u00F8rgen, \\n\\n Thanks for tackling this important feature. I have some comments on the functional spec. It would be great if you could specify the customer experience in greater detail: \\n\\n 1) How does the customer turn replication on and off? For instance, is this done by calling a system procedure? \\n\\n 2) Who has permission to turn replication on and off? E.g., the database owner? \\n\\n 3) After failover, when the slave is promoted to be the new master, presumably the customer will want replication to resume. What is the customer experience here? Does replication automatically begin to some default database? Alternatively, is a notification sent to some registered listener who can then restart replication? \\n\\n 4) Similarly, what\'s the customer experience when the slave fails? Does replication begin from the master to a new default database? Is a notification sent to a listener who can then restart replication? \\n\\n Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12509788\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12509788&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12509788\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12509788_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509788_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jul\\/07 08:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-03T08:21:01+0000\'\u003e03\\/Jul\\/07 08:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for your comments, Rick. I will attach a new func spec in a few days. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; 1) How does the customer turn replication on and off? For instance, is this done by calling a system procedure?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe slave is kept in recovery mode until it becomes a master (see answer to 3 and 4). This means that calling connect on the slave will never return a connection, and stored procedures can therefore not be used on the slave.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe user interaction required to start a master and a slave should be as similar as possible. Adding a few commands to NetworkServerControl seems like a viable solution:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eThe command used to start the slave role for \'x\' should make Derby listen on a specified port for a connection with the master of \'x\'.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eThe command used to start the master role for \'x\' should make Derby connect to a URL, and start replication of DB \'x\' once a connection is established.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eSimilar commands to stop replication, make slave become master etc are also needed.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e&gt; 2) Who has permission to turn replication on and off? E.g., the database owner?\u003c\\/p\u003e\\n\\n\u003cp\u003eI think DB owner sounds reasonable.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e&gt; 3) After failover, when the slave is promoted to be the new master, presumably the customer will want replication to resume. What is the customer experience here? Does replication automatically begin to some default database? Alternatively, is a notification sent to some registered listener who can then restart replication?\u003cbr\\/\u003e\\n&gt; 4) Similarly, what\'s the customer experience when the slave fails? Does replication begin from the master to a new default database? Is a notification sent to a listener who can then restart replication?\u003c\\/p\u003e\\n\\n\u003cp\u003eBasically, the two derby instances forming a replication pair can be in the following states:\u003c\\/p\u003e\\n\\n\u003cp\u003eMaster:\u003cbr\\/\u003e\\nm1: connect (including create DB)\u003cbr\\/\u003e\\nm2: run in normal Derby mode\u003cbr\\/\u003e\\nm3: become master (set up nw communication, ship DB to slave)\u003cbr\\/\u003e\\nm4: run in master mode, which is similar to m2 for normal users\u003cbr\\/\u003e\\nm5a: slave fails? go to m2\u003cbr\\/\u003e\\nm5b: master (this Derby instance) fails? done\u003c\\/p\u003e\\n\\n\u003cp\u003eSlave:\u003cbr\\/\u003e\\ns1: start (listen on a port for connections, receive a DB over nw)\u003cbr\\/\u003e\\ns2: slave is kept in recovery mode, which lets us forward recover received log records for \\\"free\\\". Receives log records from master and performs forward recovery on these\u003cbr\\/\u003e\\ns3a: master fails? complete the booting and go to m2\u003cbr\\/\u003e\\ns3a: slave (this Derby instance) fails? done\u003c\\/p\u003e\\n\\n\u003cp\u003eHence, the behavior is the same regardless of whether the \\\"old slave\\\" or \\\"old master\\\" is the instance that is still alive when one of the instances failed. In both cases, new replication must be started manually on the surviving Derby instance. So far, I have not considered restarting replication automatically after an instance has failed.\u003c\\/p\u003e\\n\\n\u003cp\u003e(Note that the presented states are not accurate enough to describe everything that happens. For example, if the connection between the master and slave fails temporarily when the pair is in state m4\\/s2, the pair will try to reconnect for some time.)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12509788_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12509788_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jul\\/07 08:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-03T08:21:01+0000\'\u003e03\\/Jul\\/07 08:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for your comments, Rick. I will attach a new func spec in a few days.  \\n\\n &gt; 1) How does the customer turn replication on and off? For instance, is this done by calling a system procedure? \\n\\n The slave is kept in recovery mode until it becomes a master (see answer to 3 and 4). This means that calling connect on the slave will never return a connection, and stored procedures can therefore not be used on the slave. \\n\\n The user interaction required to start a master and a slave should be as similar as possible. Adding a few commands to NetworkServerControl seems like a viable solution: \\n\\n \\n\\t The command used to start the slave role for \'x\' should make Derby listen on a specified port for a connection with the master of \'x\'. \\n \\n\\n\\n \\n\\t The command used to start the master role for \'x\' should make Derby connect to a URL, and start replication of DB \'x\' once a connection is established. \\n \\n\\n\\n Similar commands to stop replication, make slave become master etc are also needed. \\n\\n\\n &gt; 2) Who has permission to turn replication on and off? E.g., the database owner? \\n\\n I think DB owner sounds reasonable. \\n\\n\\n &gt; 3) After failover, when the slave is promoted to be the new master, presumably the customer will want replication to resume. What is the customer experience here? Does replication automatically begin to some default database? Alternatively, is a notification sent to some registered listener who can then restart replication? \\n&gt; 4) Similarly, what\'s the customer experience when the slave fails? Does replication begin from the master to a new default database? Is a notification sent to a listener who can then restart replication? \\n\\n Basically, the two derby instances forming a replication pair can be in the following states: \\n\\n Master: \\nm1: connect (including create DB) \\nm2: run in normal Derby mode \\nm3: become master (set up nw communication, ship DB to slave) \\nm4: run in master mode, which is similar to m2 for normal users \\nm5a: slave fails? go to m2 \\nm5b: master (this Derby instance) fails? done \\n\\n Slave: \\ns1: start (listen on a port for connections, receive a DB over nw) \\ns2: slave is kept in recovery mode, which lets us forward recover received log records for \\\"free\\\". Receives log records from master and performs forward recovery on these \\ns3a: master fails? complete the booting and go to m2 \\ns3a: slave (this Derby instance) fails? done \\n\\n Hence, the behavior is the same regardless of whether the \\\"old slave\\\" or \\\"old master\\\" is the instance that is still alive when one of the instances failed. In both cases, new replication must be started manually on the surviving Derby instance. So far, I have not considered restarting replication automatically after an instance has failed. \\n\\n (Note that the presented states are not accurate enough to describe everything that happens. For example, if the connection between the master and slave fails temporarily when the pair is in state m4\\/s2, the pair will try to reconnect for some time.)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510166\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12510166&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510166\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12510166_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510166_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jul\\/07 12:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-04T12:53:50+0000\'\u003e04\\/Jul\\/07 12:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLink to the thread where Dag describes his proof-of-concept code: \u003ca href=\\\"http:\\/\\/www.mailinglistarchive.com\\/derby-dev@db.apache.org\\/msg25546.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.mailinglistarchive.com\\/derby-dev@db.apache.org\\/msg25546.html\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eA difference between the proof of concept codes: While Dag\'s code ships whole log files, the poc attached to this issue ships individual log records.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12510166_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510166_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jul\\/07 12:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-04T12:53:50+0000\'\u003e04\\/Jul\\/07 12:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Link to the thread where Dag describes his proof-of-concept code:  http:\\/\\/www.mailinglistarchive.com\\/derby-dev@db.apache.org\\/msg25546.html  \\n\\n A difference between the proof of concept codes: While Dag\'s code ships whole log files, the poc attached to this issue ships individual log records.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510664\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12510664&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510664\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12510664_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510664_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 11:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T11:54:58+0000\'\u003e06\\/Jul\\/07 11:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have had a good look at the code in the store layer now. The design sketches for this feature are currently like this:\u003c\\/p\u003e\\n\\n\u003cp\u003eMaster role:\u003cbr\\/\u003e\\n-----------\u003cbr\\/\u003e\\nWhen a Derby instance is told to be the master of a db \'repli_db\', a replication service is booted in the store layer. This service will set up a replication log buffer and network communication with the slave. The db is then sent to the slave. From this point on, all log records that are added to the log of \'repli_db\' are also added to the replication log buffer. \u003c\\/p\u003e\\n\\n\u003cp\u003eA replication log shipper (part of the replication service) will read log records from the replication buffer and send these to the slave, e.g. at given time intervals. \u003c\\/p\u003e\\n\\n\u003cp\u003eSlave role:\u003cbr\\/\u003e\\n----------\u003cbr\\/\u003e\\nAs for the master role, a replication service will be booted in the store layer when a Derby is told to be the slave of a db. The replication slave service will set up a network connection with the master and receive a db backup. Recovery is started, and the slave will not leave recovery until it is told to transform into a normal Derby. While in recovery mode, the slave will redo all log records that are received from the master.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eComments on this preliminary design are very much welcome! \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12510664_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510664_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 11:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T11:54:58+0000\'\u003e06\\/Jul\\/07 11:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have had a good look at the code in the store layer now. The design sketches for this feature are currently like this: \\n\\n Master role: \\n----------- \\nWhen a Derby instance is told to be the master of a db \'repli_db\', a replication service is booted in the store layer. This service will set up a replication log buffer and network communication with the slave. The db is then sent to the slave. From this point on, all log records that are added to the log of \'repli_db\' are also added to the replication log buffer.  \\n\\n A replication log shipper (part of the replication service) will read log records from the replication buffer and send these to the slave, e.g. at given time intervals.  \\n\\n Slave role: \\n---------- \\nAs for the master role, a replication service will be booted in the store layer when a Derby is told to be the slave of a db. The replication slave service will set up a network connection with the master and receive a db backup. Recovery is started, and the slave will not leave recovery until it is told to transform into a normal Derby. While in recovery mode, the slave will redo all log records that are received from the master. \\n\\n\\n Comments on this preliminary design are very much welcome!               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510672\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12510672&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510672\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12510672_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510672_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 12:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T12:43:23+0000\'\u003e06\\/Jul\\/07 12:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNew functional specification including the details requested by Rick Hillegas.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12510672_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510672_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 12:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T12:43:23+0000\'\u003e06\\/Jul\\/07 12:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    New functional specification including the details requested by Rick Hillegas.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510674\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12510674&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510674\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12510674_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510674_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 12:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T12:48:29+0000\'\u003e06\\/Jul\\/07 12:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis time with correct modification date\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12510674_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510674_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 12:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T12:48:29+0000\'\u003e06\\/Jul\\/07 12:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This time with correct modification date              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12510725\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12510725&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12510725\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12510725_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510725_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 16:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T16:17:56+0000\'\u003e06\\/Jul\\/07 16:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for rev 2 of the spec, J\\u00F8rgen.\u003c\\/p\u003e\\n\\n\u003cp\u003eLooks like you have addressed issue (1). I see in your comments above, that you are in agreement about how to address issue (2), but I don\'t see this reflected in the new spec itself. I\'m getting the impression that the answer to (3) and (4) is that the first rev of replication won\'t handle these issues; instead, they will be addressed in a later rev. Is that right?\u003c\\/p\u003e\\n\\n\u003cp\u003eI have some more comments:\u003c\\/p\u003e\\n\\n\u003cp\u003e5) A heads-up about the user\\/password options on the new server commands. There has been some discussion about authenticating server shutdown operations and general agreement that the current situation is confusing. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2109\\\" title=\\\"System privileges\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2109\\\"\u003eDERBY-2109\u003c\\/a\u003e intends to add credentials to the server shutdown command. I think that the same api should be used to specify username and password for all of our server commands--whatever that api turns out to be.\u003c\\/p\u003e\\n\\n\u003cp\u003e6) I think it would be clearer if the url option were called slaveurl. Do we need a symmetric masterurl option for the startslave command? How does the slave know that it is receiving records from the correct master? What  happens if two masters try to replicate to the same slave?\u003c\\/p\u003e\\n\\n\u003cp\u003e7) Is the startmaster command restricted to a server running on the same machine as the master database? Similarly, is the startslave command restricted to a server on the slave database machine? What about failover and stop?\u003c\\/p\u003e\\n\\n\u003cp\u003e8) I am confused about the startslave command. Does this create a new database? If so, how are the credentials enforced in the case that credentials are stored in the database? If not, what happens if there is already a database by that name? Is the database destroyed and replaced after authentication?\u003c\\/p\u003e\\n\\n\u003cp\u003e9) If you have stopped replication, can you resume it later on?\u003c\\/p\u003e\\n\\n\u003cp\u003e10)  What is the sequence of these commands? Do you first issue a startmaster and then issue a startslave? What happens if the commands occur out of sequence? Similarly for \u003c\\/p\u003e\\n\\n\u003cp\u003e11) It would be nice to understand how we insulate replication from man-in-the-middle attacks--even if we don\'t implement these protections in this first version.\u003c\\/p\u003e\\n\\n\u003cp\u003e12) What happens if someone tries to connect to an active slave? What happens if someone tries to shutdown an active slave without first stopping replication at the master\'s end?\u003c\\/p\u003e\\n\\n\u003cp\u003e13) What happens if the slave is shut down and then, later on, someone tries to boot the slave as an embedded database?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12510725_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12510725_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/07 16:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-06T16:17:56+0000\'\u003e06\\/Jul\\/07 16:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for rev 2 of the spec, J\\u00F8rgen. \\n\\n Looks like you have addressed issue (1). I see in your comments above, that you are in agreement about how to address issue (2), but I don\'t see this reflected in the new spec itself. I\'m getting the impression that the answer to (3) and (4) is that the first rev of replication won\'t handle these issues; instead, they will be addressed in a later rev. Is that right? \\n\\n I have some more comments: \\n\\n 5) A heads-up about the user\\/password options on the new server commands. There has been some discussion about authenticating server shutdown operations and general agreement that the current situation is confusing.  DERBY-2109  intends to add credentials to the server shutdown command. I think that the same api should be used to specify username and password for all of our server commands--whatever that api turns out to be. \\n\\n 6) I think it would be clearer if the url option were called slaveurl. Do we need a symmetric masterurl option for the startslave command? How does the slave know that it is receiving records from the correct master? What  happens if two masters try to replicate to the same slave? \\n\\n 7) Is the startmaster command restricted to a server running on the same machine as the master database? Similarly, is the startslave command restricted to a server on the slave database machine? What about failover and stop? \\n\\n 8) I am confused about the startslave command. Does this create a new database? If so, how are the credentials enforced in the case that credentials are stored in the database? If not, what happens if there is already a database by that name? Is the database destroyed and replaced after authentication? \\n\\n 9) If you have stopped replication, can you resume it later on? \\n\\n 10)  What is the sequence of these commands? Do you first issue a startmaster and then issue a startslave? What happens if the commands occur out of sequence? Similarly for  \\n\\n 11) It would be nice to understand how we insulate replication from man-in-the-middle attacks--even if we don\'t implement these protections in this first version. \\n\\n 12) What happens if someone tries to connect to an active slave? What happens if someone tries to shutdown an active slave without first stopping replication at the master\'s end? \\n\\n 13) What happens if the slave is shut down and then, later on, someone tries to boot the slave as an embedded database?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511062\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12511062&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511062\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12511062_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511062_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 09:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T09:08:52+0000\'\u003e09\\/Jul\\/07 09:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;Looks like you have addressed issue (1). I see in your comments above, \u003cbr\\/\u003e\\n&gt;that you are in agreement about how to address issue (2), but I don\'t \u003cbr\\/\u003e\\n&gt;see this reflected in the new spec itself\u003c\\/p\u003e\\n\\n\u003cp\u003eUnder the section Interacting with the replication feature the spec says \u003cbr\\/\u003e\\nhow to Start Master, Start Slave, failover and stop replication.\u003c\\/p\u003e\\n\\n\u003cp\u003eBelow the table is mentioned the following\u003c\\/p\u003e\\n\\n\u003cp\u003e\\\"These commands apply only to the database specified, and \u003cbr\\/\u003e\\nonly the database owner will be allowed to execute them.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;I\'m getting the impression that the answer to (3) and (4) is that the \u003cbr\\/\u003e\\n&gt;first rev of replication won\'t handle these issues; instead, they will \u003cbr\\/\u003e\\n&gt;be addressed in a later rev. Is that right? \u003c\\/p\u003e\\n\\n\u003cp\u003eI found some answers from Jorgen\'s comment\u003c\\/p\u003e\\n\\n\u003cp\u003e\\\"Hence, the behavior is the same regardless of whether the \\\"old slave\\\" or \\\"old master\\\" \u003cbr\\/\u003e\\nis the instance that is still alive when one of the instances failed. In both cases, \u003cbr\\/\u003e\\nnew replication must be started manually on the surviving Derby instance. So far, I \u003cbr\\/\u003e\\nhave not considered restarting replication automatically after an instance has failed.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eI interpret it that a manual startup is planned for now. Is a auto startup on the cards?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;A heads-up about the user\\/password options on the new server commands. There has been \u003cbr\\/\u003e\\n&gt;some discussion about authenticating server shutdown operations and general agreement \u003cbr\\/\u003e\\n&gt;that the current situation is confusing. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2109\\\" title=\\\"System privileges\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2109\\\"\u003eDERBY-2109\u003c\\/a\u003e intends to add credentials to the \u003cbr\\/\u003e\\n&gt;server shutdown command. I think that the same api should be used to specify username \u003cbr\\/\u003e\\n&gt;and password for all of our server commands--whatever that api turns out to be.\u003c\\/p\u003e\\n\\n\u003cp\u003eThank you for this pointer. I guess taking the same lines as 2109 is the thing to do here.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;Do we need a symmetric masterurl option for the startslave command?\u003cbr\\/\u003e\\n&gt;How does the slave know that it is receiving records from the correct master? \u003c\\/p\u003e\\n\\n\u003cp\u003eThe slave basically starts a server to receive records from the master\u003cbr\\/\u003e\\nand the master connects to it to send the records. Even if we were to use the\u003cbr\\/\u003e\\nurl to ensure that the slave is receiving records from the correct master\u003cbr\\/\u003e\\nthere could be two senders on the same machine url. Guess we wouldn\'t need\u003cbr\\/\u003e\\nthe slaveurl.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut we need to do  \u003c\\/p\u003e\\n\\n\u003cp\u003ejava org.apache.derby.drda.NetworkServerControl replication -startslave \u003cbr\\/\u003e\\n-db=&lt;dbname&gt; -port=&lt;port&gt; -user=&lt;name&gt; -pass=&lt;pass&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003efor each database that want replicated. So we could as well mention the master\u003cbr\\/\u003e\\nurl also. But I am not sure how we would use this.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;What happens if two masters try to replicate to the same slave?\u003c\\/p\u003e\\n\\n\u003cp\u003eI guess you mean what happens if they try to connect using the same\u003cbr\\/\u003e\\nslaveurl. \u003c\\/p\u003e\\n\\n\u003cp\u003eThis would be an issue I guess because the slave would assume\u003cbr\\/\u003e\\nboth to be legitimate unless we send the database name each time. \u003c\\/p\u003e\\n\\n\u003cp\u003eBut what would happen if both use the same database also.\u003c\\/p\u003e\\n\\n\u003cp\u003eCan this be eliminated by having a handshake phase before the actual\u003cbr\\/\u003e\\nlog transfer occurs. So if the same url is being used for a second handshake\u003cbr\\/\u003e\\nwe would reject this unless this is a reconnect attempt after the master has\u003cbr\\/\u003e\\ncrashed. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;Is the startmaster command restricted to a server running on the same \u003cbr\\/\u003e\\n&gt;machine as the master database? Similarly, is the startslave command restricted to a \u003cbr\\/\u003e\\n&gt;server on the slave database machine? What about failover and stop?\u003c\\/p\u003e\\n\\n\u003cp\u003eI think issuing the startslave on a machine would just mean that\u003cbr\\/\u003e\\nthe server is started on the machine that the NetworkServerControl class\u003cbr\\/\u003e\\nsince we would depend on this to start the agent Jorgen has mentioned in\u003cbr\\/\u003e\\nhis comments. I guess the same applies to the other commands. I concluded this\u003cbr\\/\u003e\\nalso because in the proof of concept code attached the RMI code that tranafers the\u003cbr\\/\u003e\\nlog records is called from inside FileLoggerPrimary which writes into the log on\u003cbr\\/\u003e\\nthe disk as well as through the network. Wouldn\'t this class take care of the\u003cbr\\/\u003e\\ncase when the server is not running on the same machine as the slave database for\u003cbr\\/\u003e\\nlogging?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;If you have stopped replication, can you resume it later on?\u003c\\/p\u003e\\n\\n\u003cp\u003eIf stopping replication means that we will not archive logs anymore\u003cbr\\/\u003e\\nI guess this will not be possible. If the logs are still archived we\u003cbr\\/\u003e\\ncan transmit from the log after replication has been stopped and the slave\u003cbr\\/\u003e\\ncan still redo from there and replication from continue. That is we should\u003cbr\\/\u003e\\nnot call SYSCS_UTIL.SYSCS_DISABLE_LOG_ARCHIVE_MODE system procedure after\u003cbr\\/\u003e\\nstopping replication. Guess the user should be able to decide this.\u003c\\/p\u003e\\n\\n\u003cp\u003eDoes this mean that the stopping API has to be modified?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;What is the sequence of these commands? Do you first issue a startmaster and then issue a startslave? \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eSince the startslave starts a listener this should be done first before\u003cbr\\/\u003e\\nstartmaster. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;What happens if the commands occur out of sequence?\u003c\\/p\u003e\\n\\n\u003cp\u003eSince we mention the slaveurl to the startmaster command this will fail\u003cbr\\/\u003e\\nsaying that the slave was not found at the url mentioned.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;It would be nice to understand how we insulate replication from man-in-the-middle attacks--\u003cbr\\/\u003e\\n&gt;even if we don\'t implement these protections in this first version. \u003c\\/p\u003e\\n\\n\u003cp\u003eI guess you want the interfaces to be designed in such a way that will enable\u003cbr\\/\u003e\\nsecurity to be plugged in at a later time. I think this is a very good suggestion.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;What happens if someone tries to connect to an active slave? What happens if someone \u003cbr\\/\u003e\\n&gt;tries to shutdown an active slave without first stopping replication at the master\'s end?\u003c\\/p\u003e\\n\\n\u003cp\u003eA connect attempt from the master would fail and the master would report that the\u003cbr\\/\u003e\\nconnection has been terminated due to the slave not being able to be reached or that a\u003cbr\\/\u003e\\nslave could not be found. Would this case be different from trying to connect to a\u003cbr\\/\u003e\\nDerby NetworkServer when it has been shutdown?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;What happens if the slave is shut down and then, later on, someone tries to boot the slave \u003cbr\\/\u003e\\n&gt;as an embedded database? \u003c\\/p\u003e\\n\\n\u003cp\u003eShould this be similar to creating a database using the NetworkServer shutting it down\u003cbr\\/\u003e\\nand later trying to connect to it in the embedded mode?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12511062_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511062_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 09:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T09:08:52+0000\'\u003e09\\/Jul\\/07 09:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;Looks like you have addressed issue (1). I see in your comments above,  \\n&gt;that you are in agreement about how to address issue (2), but I don\'t  \\n&gt;see this reflected in the new spec itself \\n\\n Under the section Interacting with the replication feature the spec says  \\nhow to Start Master, Start Slave, failover and stop replication. \\n\\n Below the table is mentioned the following \\n\\n \\\"These commands apply only to the database specified, and  \\nonly the database owner will be allowed to execute them.\\\" \\n\\n &gt;I\'m getting the impression that the answer to (3) and (4) is that the  \\n&gt;first rev of replication won\'t handle these issues; instead, they will  \\n&gt;be addressed in a later rev. Is that right?  \\n\\n I found some answers from Jorgen\'s comment \\n\\n \\\"Hence, the behavior is the same regardless of whether the \\\"old slave\\\" or \\\"old master\\\"  \\nis the instance that is still alive when one of the instances failed. In both cases,  \\nnew replication must be started manually on the surviving Derby instance. So far, I  \\nhave not considered restarting replication automatically after an instance has failed.\\\" \\n\\n I interpret it that a manual startup is planned for now. Is a auto startup on the cards? \\n\\n &gt;A heads-up about the user\\/password options on the new server commands. There has been  \\n&gt;some discussion about authenticating server shutdown operations and general agreement  \\n&gt;that the current situation is confusing.  DERBY-2109  intends to add credentials to the  \\n&gt;server shutdown command. I think that the same api should be used to specify username  \\n&gt;and password for all of our server commands--whatever that api turns out to be. \\n\\n Thank you for this pointer. I guess taking the same lines as 2109 is the thing to do here. \\n\\n &gt;Do we need a symmetric masterurl option for the startslave command? \\n&gt;How does the slave know that it is receiving records from the correct master?  \\n\\n The slave basically starts a server to receive records from the master \\nand the master connects to it to send the records. Even if we were to use the \\nurl to ensure that the slave is receiving records from the correct master \\nthere could be two senders on the same machine url. Guess we wouldn\'t need \\nthe slaveurl. \\n\\n But we need to do   \\n\\n java org.apache.derby.drda.NetworkServerControl replication -startslave  \\n-db=&lt;dbname&gt; -port=&lt;port&gt; -user=&lt;name&gt; -pass=&lt;pass&gt; \\n\\n for each database that want replicated. So we could as well mention the master \\nurl also. But I am not sure how we would use this. \\n\\n &gt;What happens if two masters try to replicate to the same slave? \\n\\n I guess you mean what happens if they try to connect using the same \\nslaveurl.  \\n\\n This would be an issue I guess because the slave would assume \\nboth to be legitimate unless we send the database name each time.  \\n\\n But what would happen if both use the same database also. \\n\\n Can this be eliminated by having a handshake phase before the actual \\nlog transfer occurs. So if the same url is being used for a second handshake \\nwe would reject this unless this is a reconnect attempt after the master has \\ncrashed.  \\n\\n &gt;Is the startmaster command restricted to a server running on the same  \\n&gt;machine as the master database? Similarly, is the startslave command restricted to a  \\n&gt;server on the slave database machine? What about failover and stop? \\n\\n I think issuing the startslave on a machine would just mean that \\nthe server is started on the machine that the NetworkServerControl class \\nsince we would depend on this to start the agent Jorgen has mentioned in \\nhis comments. I guess the same applies to the other commands. I concluded this \\nalso because in the proof of concept code attached the RMI code that tranafers the \\nlog records is called from inside FileLoggerPrimary which writes into the log on \\nthe disk as well as through the network. Wouldn\'t this class take care of the \\ncase when the server is not running on the same machine as the slave database for \\nlogging? \\n\\n &gt;If you have stopped replication, can you resume it later on? \\n\\n If stopping replication means that we will not archive logs anymore \\nI guess this will not be possible. If the logs are still archived we \\ncan transmit from the log after replication has been stopped and the slave \\ncan still redo from there and replication from continue. That is we should \\nnot call SYSCS_UTIL.SYSCS_DISABLE_LOG_ARCHIVE_MODE system procedure after \\nstopping replication. Guess the user should be able to decide this. \\n\\n Does this mean that the stopping API has to be modified? \\n\\n &gt;What is the sequence of these commands? Do you first issue a startmaster and then issue a startslave?  \\n\\n\\n Since the startslave starts a listener this should be done first before \\nstartmaster.  \\n\\n &gt;What happens if the commands occur out of sequence? \\n\\n Since we mention the slaveurl to the startmaster command this will fail \\nsaying that the slave was not found at the url mentioned. \\n\\n &gt;It would be nice to understand how we insulate replication from man-in-the-middle attacks-- \\n&gt;even if we don\'t implement these protections in this first version.  \\n\\n I guess you want the interfaces to be designed in such a way that will enable \\nsecurity to be plugged in at a later time. I think this is a very good suggestion. \\n\\n &gt;What happens if someone tries to connect to an active slave? What happens if someone  \\n&gt;tries to shutdown an active slave without first stopping replication at the master\'s end? \\n\\n A connect attempt from the master would fail and the master would report that the \\nconnection has been terminated due to the slave not being able to be reached or that a \\nslave could not be found. Would this case be different from trying to connect to a \\nDerby NetworkServer when it has been shutdown? \\n\\n &gt;What happens if the slave is shut down and then, later on, someone tries to boot the slave  \\n&gt;as an embedded database?  \\n\\n Should this be similar to creating a database using the NetworkServer shutting it down \\nand later trying to connect to it in the embedded mode?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511066\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12511066&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511066\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12511066_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511066_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 09:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T09:57:01+0000\'\u003e09\\/Jul\\/07 09:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you for the extensive comments from both Rick and Narayanan. I have a few supplementary comments to those from Narayanan.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;Looks like you have addressed issue (1). I see in your comments above, that you are in agreement about how to address issue (2), but I don\'t see this reflected in the new spec itself. I\'m getting the impression that the answer to (3) and (4) is that the first rev of replication won\'t handle these issues; instead, they will be addressed in a later rev. Is that right?\u003cbr\\/\u003e\\n&gt;I interpret it that a manual startup is planned for now. Is a auto startup on the cards? \u003c\\/p\u003e\\n\\n\u003cp\u003eRe 2: It says so below the table of NetworkServerControl commands, but I will make it clearer in the next version of the spec.\u003cbr\\/\u003e\\nRe 3 and 4: That\'s correct; in the first rev, there will be no automatic restart of replication when one of the instances have failed. The DB owner will have to manually restart replication. A later improvement may automate this step; this is a good candidate for extending the functionality later.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;5) A heads-up about the user\\/password options on the new server commands. There has been some discussion about authenticating server shutdown operations and general agreement that the current situation is confusing. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2109\\\" title=\\\"System privileges\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2109\\\"\u003eDERBY-2109\u003c\\/a\u003e intends to add credentials to the server shutdown command. I think that the same api should be used to specify username and password for all of our server commands--whatever that api turns out to be.\u003cbr\\/\u003e\\n&gt;Thank you for this pointer. I guess taking the same lines as 2109 is the thing to do here. \u003c\\/p\u003e\\n\\n\u003cp\u003eI agree. There is no reason why authentication for replication should differ from other commands. The NetworkServerControl commands I wrote in the func spec show what information is needed. I will modify the next version of the func spec to state that authentication is needed, and should be performed in the same manner as other NetworkServerControl commands.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;6) I think it would be clearer if the url option were called slaveurl. Do we need a symmetric masterurl option for the startslave command? How does the slave know that it is receiving records from the correct master? What  happens if two masters try to replicate to the same slave?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;This would be an issue I guess because the slave would assume both to be legitimate unless we send the database name each time.\u003cbr\\/\u003e\\n&gt;But what would happen if both use the same database also.\u003cbr\\/\u003e\\n&gt;Can this be eliminated by having a handshake phase before the actual log transfer occurs. So if the same url is being used for a second handshake we would reject this unless this is a reconnect attempt after the master has\u003cbr\\/\u003e\\ncrashed. \u003c\\/p\u003e\\n\\n\u003cp\u003eWe should only allow one connection to a slave database. A handshake sounds like a good idea. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;7) Is the startmaster command restricted to a server running on the same machine as the master database? Similarly, is the startslave command restricted to a server on the slave database machine? What about failover and stop?\u003c\\/p\u003e\\n\\n\u003cp\u003eI think the start and failover commands needs to be restricted to the same machine as the database resides, but this depends on the NetworkServerControl security. Again, this should be equal to the policy for other NetworkServerControl commands. See 12) for how to stop replication.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;8) I am confused about the startslave command. Does this create a new database? If so, how are the credentials enforced in the case that credentials are stored in the database? If not, what happens if there is already a database by that name? Is the database destroyed and replaced after authentication?\u003c\\/p\u003e\\n\\n\u003cp\u003eSince this has not been implemented yet, the solution may have to change later. However, the current intention is that the first thing that happens on the slave is that it receives the database \'x\' from the master. When \'x\' has been received, the slave starts the boot process of \'x\'. So, the slave does not create \'x\', even though it did not exist on the slave when the startslave command was issued. \u003c\\/p\u003e\\n\\n\u003cp\u003eWe will have to check that a database with the same name does not exist on the slave. Furthermore, we should probably ensure that the owner of \'x\' is allowed to create a database on the slave. Did you think of any other permissions we should check for? Maybe a allowedToReplicate credential would be needed?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;9) If you have stopped replication, can you resume it later on?\u003cbr\\/\u003e\\n&gt;If stopping replication means that we will not archive logs anymore I guess this will not be possible. If the logs are still archived we can transmit from the log after replication has been stopped and the slave can still redo from there and replication from continue. That is we should not call SYSCS_UTIL.SYSCS_DISABLE_LOG_ARCHIVE_MODE system procedure after stopping replication. Guess the user should be able to decide this.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not sure about this. If a failover was performed, the answer is definately \'no\' because the repliaction method assumes that the physical layout of the databases are equal. A failover will not preserve this exactly equal physical layout since the failover process will undo uncommitted transactions. If the replication was simply turned off, Narayanans suggestion of starting log shipment from some defined log record will probably work. \u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, I think we have to be restrictive in the first version of the functionality. For now, I think the answer will be \'no\', i.e., you have to restart replication by first deleting the database (on the slave), and then send the entire database to the slave. Resuming replication makes a good candidate for extending the functionality.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;10)  What is the sequence of these commands? Do you first issue a startmaster and then issue a startslave? What happens if the commands occur out of sequence? Similarly for \u003cbr\\/\u003e\\n&gt;Since the startslave starts a listener this should be done first before startmaster. \u003c\\/p\u003e\\n\\n\u003cp\u003eIt is correct that the slave will be listening for the master and therefore must be started before replication can start. However, I see no reason why the connection attempts should not be retried every now and then until the slave is ready to accept the connection.\u003c\\/p\u003e\\n\\n\u003cp\u003eHence, I don\'t think we need a defined sequence of commands. When the slave starts, it does nothing until a master connects to it (except write some messages to derby.log). When the master is started, it continues as normal (also writes some messages to derby.log) until it is able to get a connection to the slave. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;11) It would be nice to understand how we insulate replication from man-in-the-middle attacks--even if we don\'t implement these protections in this first version.\u003c\\/p\u003e\\n\\n\u003cp\u003eThat is a good point. It would, e.g., be possible to use a signature. The slave could send a hashed username to the master, and the master could respond by sending the hashed password. It should not be possible to \\\"unhash\\\" the username\\/password. But I am no security expert, hence input on this issue is appreciated. And you are right; this will not be handled in the first version.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;12) What happens if someone tries to connect to an active slave? What happens if someone tries to shutdown an active slave without first stopping replication at the master\'s end?\u003c\\/p\u003e\\n\\n\u003cp\u003eIf someone tries to connect to a db \'x\' that has the slave role in derby instance \'i\', the connection is refused. Note that the derby instance \'i\' may manage other databases at the same time. Making a connection to these other databases is unaffected by replication.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;A connect attempt from the master would fail and the master would report that the connection has been terminated due to the slave not being able to be reached or that a slave could not be found. Would this case be different from trying to connect to a Derby NetworkServer when it has been shutdown? \u003c\\/p\u003e\\n\\n\u003cp\u003eThe initial plan was to allow shutdown at both ends. Now that you mention it, however, stopping replication from the master seems to be more clean. Hence, I think the revised plan should be as follows: Stopping replication will be performed by issuing the stopreplication command at the master. The master then sends a stop replication message over the network connection to the slave.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;13) What happens if the slave is shut down and then, later on, someone tries to boot the slave as an embedded database?\u003c\\/p\u003e\\n\\n\u003cp\u003eThat will be allowed. In this case, the database will then boot to a transaction consistent state that includes all transactions that were committed (and sent, of course) before the shutdown.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12511066_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511066_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 09:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T09:57:01+0000\'\u003e09\\/Jul\\/07 09:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you for the extensive comments from both Rick and Narayanan. I have a few supplementary comments to those from Narayanan. \\n\\n &gt;&gt;Looks like you have addressed issue (1). I see in your comments above, that you are in agreement about how to address issue (2), but I don\'t see this reflected in the new spec itself. I\'m getting the impression that the answer to (3) and (4) is that the first rev of replication won\'t handle these issues; instead, they will be addressed in a later rev. Is that right? \\n&gt;I interpret it that a manual startup is planned for now. Is a auto startup on the cards?  \\n\\n Re 2: It says so below the table of NetworkServerControl commands, but I will make it clearer in the next version of the spec. \\nRe 3 and 4: That\'s correct; in the first rev, there will be no automatic restart of replication when one of the instances have failed. The DB owner will have to manually restart replication. A later improvement may automate this step; this is a good candidate for extending the functionality later. \\n\\n &gt;&gt;5) A heads-up about the user\\/password options on the new server commands. There has been some discussion about authenticating server shutdown operations and general agreement that the current situation is confusing.  DERBY-2109  intends to add credentials to the server shutdown command. I think that the same api should be used to specify username and password for all of our server commands--whatever that api turns out to be. \\n&gt;Thank you for this pointer. I guess taking the same lines as 2109 is the thing to do here.  \\n\\n I agree. There is no reason why authentication for replication should differ from other commands. The NetworkServerControl commands I wrote in the func spec show what information is needed. I will modify the next version of the func spec to state that authentication is needed, and should be performed in the same manner as other NetworkServerControl commands. \\n\\n &gt;&gt;6) I think it would be clearer if the url option were called slaveurl. Do we need a symmetric masterurl option for the startslave command? How does the slave know that it is receiving records from the correct master? What  happens if two masters try to replicate to the same slave? \\n\\n &gt;This would be an issue I guess because the slave would assume both to be legitimate unless we send the database name each time. \\n&gt;But what would happen if both use the same database also. \\n&gt;Can this be eliminated by having a handshake phase before the actual log transfer occurs. So if the same url is being used for a second handshake we would reject this unless this is a reconnect attempt after the master has \\ncrashed.  \\n\\n We should only allow one connection to a slave database. A handshake sounds like a good idea.  \\n\\n &gt;&gt;7) Is the startmaster command restricted to a server running on the same machine as the master database? Similarly, is the startslave command restricted to a server on the slave database machine? What about failover and stop? \\n\\n I think the start and failover commands needs to be restricted to the same machine as the database resides, but this depends on the NetworkServerControl security. Again, this should be equal to the policy for other NetworkServerControl commands. See 12) for how to stop replication. \\n\\n &gt;&gt;8) I am confused about the startslave command. Does this create a new database? If so, how are the credentials enforced in the case that credentials are stored in the database? If not, what happens if there is already a database by that name? Is the database destroyed and replaced after authentication? \\n\\n Since this has not been implemented yet, the solution may have to change later. However, the current intention is that the first thing that happens on the slave is that it receives the database \'x\' from the master. When \'x\' has been received, the slave starts the boot process of \'x\'. So, the slave does not create \'x\', even though it did not exist on the slave when the startslave command was issued.  \\n\\n We will have to check that a database with the same name does not exist on the slave. Furthermore, we should probably ensure that the owner of \'x\' is allowed to create a database on the slave. Did you think of any other permissions we should check for? Maybe a allowedToReplicate credential would be needed? \\n\\n &gt;&gt;9) If you have stopped replication, can you resume it later on? \\n&gt;If stopping replication means that we will not archive logs anymore I guess this will not be possible. If the logs are still archived we can transmit from the log after replication has been stopped and the slave can still redo from there and replication from continue. That is we should not call SYSCS_UTIL.SYSCS_DISABLE_LOG_ARCHIVE_MODE system procedure after stopping replication. Guess the user should be able to decide this. \\n\\n I am not sure about this. If a failover was performed, the answer is definately \'no\' because the repliaction method assumes that the physical layout of the databases are equal. A failover will not preserve this exactly equal physical layout since the failover process will undo uncommitted transactions. If the replication was simply turned off, Narayanans suggestion of starting log shipment from some defined log record will probably work.  \\n\\n However, I think we have to be restrictive in the first version of the functionality. For now, I think the answer will be \'no\', i.e., you have to restart replication by first deleting the database (on the slave), and then send the entire database to the slave. Resuming replication makes a good candidate for extending the functionality. \\n\\n &gt;&gt;10)  What is the sequence of these commands? Do you first issue a startmaster and then issue a startslave? What happens if the commands occur out of sequence? Similarly for  \\n&gt;Since the startslave starts a listener this should be done first before startmaster.  \\n\\n It is correct that the slave will be listening for the master and therefore must be started before replication can start. However, I see no reason why the connection attempts should not be retried every now and then until the slave is ready to accept the connection. \\n\\n Hence, I don\'t think we need a defined sequence of commands. When the slave starts, it does nothing until a master connects to it (except write some messages to derby.log). When the master is started, it continues as normal (also writes some messages to derby.log) until it is able to get a connection to the slave.  \\n\\n &gt;&gt;11) It would be nice to understand how we insulate replication from man-in-the-middle attacks--even if we don\'t implement these protections in this first version. \\n\\n That is a good point. It would, e.g., be possible to use a signature. The slave could send a hashed username to the master, and the master could respond by sending the hashed password. It should not be possible to \\\"unhash\\\" the username\\/password. But I am no security expert, hence input on this issue is appreciated. And you are right; this will not be handled in the first version. \\n\\n &gt;&gt;12) What happens if someone tries to connect to an active slave? What happens if someone tries to shutdown an active slave without first stopping replication at the master\'s end? \\n\\n If someone tries to connect to a db \'x\' that has the slave role in derby instance \'i\', the connection is refused. Note that the derby instance \'i\' may manage other databases at the same time. Making a connection to these other databases is unaffected by replication. \\n\\n &gt;A connect attempt from the master would fail and the master would report that the connection has been terminated due to the slave not being able to be reached or that a slave could not be found. Would this case be different from trying to connect to a Derby NetworkServer when it has been shutdown?  \\n\\n The initial plan was to allow shutdown at both ends. Now that you mention it, however, stopping replication from the master seems to be more clean. Hence, I think the revised plan should be as follows: Stopping replication will be performed by issuing the stopreplication command at the master. The master then sends a stop replication message over the network connection to the slave. \\n\\n &gt;&gt;13) What happens if the slave is shut down and then, later on, someone tries to boot the slave as an embedded database? \\n\\n That will be allowed. In this case, the database will then boot to a transaction consistent state that includes all transactions that were committed (and sent, of course) before the shutdown.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511244\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12511244&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511244\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12511244_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511244_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 20:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T20:13:20+0000\'\u003e09\\/Jul\\/07 20:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the responses, J\\u00F8rgen and Narayanan. Some more comments follow:\u003c\\/p\u003e\\n\\n\u003cp\u003eAbout (2): Thanks, now that you point out the line, I can see it. I don\'t think further clarification is needed, just some formatting. The problem for me is that the text flanking the table isn\'t enclosed in paragraph tags and this causes my browser to crush the text against the bottom of the table, where I failed to see it. If you just bracket the two chunks of text with &lt;p&gt; and &lt;\\/p&gt; then that solves the problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m going to be giving a lightning talk at OSCON on the state of Derby and I want to know what if anything I can say about this feature. It sounds as though some increment of functionality will be delivered in the 10.4 timeframe. Will this functionality be complete enough that someone can use it? If so, can you characterize the kind of application that will benefit from the 10.4 increment?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12511244_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511244_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/07 20:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-09T20:13:20+0000\'\u003e09\\/Jul\\/07 20:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the responses, J\\u00F8rgen and Narayanan. Some more comments follow: \\n\\n About (2): Thanks, now that you point out the line, I can see it. I don\'t think further clarification is needed, just some formatting. The problem for me is that the text flanking the table isn\'t enclosed in paragraph tags and this causes my browser to crush the text against the bottom of the table, where I failed to see it. If you just bracket the two chunks of text with &lt;p&gt; and &lt;\\/p&gt; then that solves the problem. \\n\\n I\'m going to be giving a lightning talk at OSCON on the state of Derby and I want to know what if anything I can say about this feature. It sounds as though some increment of functionality will be delivered in the 10.4 timeframe. Will this functionality be complete enough that someone can use it? If so, can you characterize the kind of application that will benefit from the 10.4 increment?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511368\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12511368&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511368\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12511368_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511368_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/07 09:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-10T09:39:37+0000\'\u003e10\\/Jul\\/07 09:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached new functional specification that incorporate the last few days of comments from Rick and Narayanan.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12511368_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511368_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/07 09:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-10T09:39:37+0000\'\u003e10\\/Jul\\/07 09:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached new functional specification that incorporate the last few days of comments from Rick and Narayanan.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12511386\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12511386&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12511386\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12511386_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511386_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/07 11:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-10T11:06:25+0000\'\u003e10\\/Jul\\/07 11:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;I\'m going to be giving a lightning talk at OSCON on the state of Derby and I want to know what if anything I can say about this feature. It sounds as though some increment of functionality will be delivered in the 10.4 timeframe. Will this functionality be complete enough that someone can use it? If so, can you characterize the kind of application that will benefit from the 10.4 increment?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe intention is definitely to have working replication functionality in 10.4. Exactly what will be implemented and how depends heavily on what the community wants, so the guesses below may have to be changed. Also, if more people want to contribute to this task, more functionality will make it into 10.4 \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eI think it is very likely that in 10.4, replication will work. Some manual steps will probably be required, e.g. to start the fail-over logic. The replication functionality will be usable by all applications that want higher availability than a single (point of failure) server can provide. However, having to manually start fail-over may be unacceptable (take too much time) for applications with the highest availability requirements. Furthermore, the application should not contain super-secret data since security issues are likely to not make it into this release. But again, the priorities may change as community discussions progress.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12511386_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12511386_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jul\\/07 11:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-10T11:06:25+0000\'\u003e10\\/Jul\\/07 11:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;I\'m going to be giving a lightning talk at OSCON on the state of Derby and I want to know what if anything I can say about this feature. It sounds as though some increment of functionality will be delivered in the 10.4 timeframe. Will this functionality be complete enough that someone can use it? If so, can you characterize the kind of application that will benefit from the 10.4 increment? \\n\\n The intention is definitely to have working replication functionality in 10.4. Exactly what will be implemented and how depends heavily on what the community wants, so the guesses below may have to be changed. Also, if more people want to contribute to this task, more functionality will make it into 10.4   \\n\\n I think it is very likely that in 10.4, replication will work. Some manual steps will probably be required, e.g. to start the fail-over logic. The replication functionality will be usable by all applications that want higher availability than a single (point of failure) server can provide. However, having to manually start fail-over may be unacceptable (take too much time) for applications with the highest availability requirements. Furthermore, the application should not contain super-secret data since security issues are likely to not make it into this release. But again, the priorities may change as community discussions progress.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512531\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12512531&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512531\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12512531_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512531_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T16:38:24+0000\'\u003e13\\/Jul\\/07 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGreat that you guys are running with this one! Some comments to the\u003cbr\\/\u003e\\nfunctional specification:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eDerby doesn\'t log all operations by default, e.g. bulk\u003cbr\\/\u003e\\n  import, deleting all records from a table, creating an index.  These\u003cbr\\/\u003e\\n  issues were addressed in the work on online backup (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-239\\\" title=\\\"Need a online backup feature  that does not block update operations   when online backup is in progress.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-239\\\"\u003e\u003cdel\u003eDERBY-239\u003c\\/del\u003e\u003c\\/a\u003e),\u003cbr\\/\u003e\\n  partially by denying online backup if non-logged operations are not\u003cbr\\/\u003e\\n  yet committed, and partly by making them do logging when online\u003cbr\\/\u003e\\n  backup is in effect (the reason for not logging some operations is\u003cbr\\/\u003e\\n  performance). I guess for replication you would need to make them\u003cbr\\/\u003e\\n  do logging for the duration.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eOverview of characteristics: you mention the network line as a\u003cbr\\/\u003e\\n  single point of failure, that\'s fine in a first version. One could\u003cbr\\/\u003e\\n  imagine having the replication service support more network interfaces \u003cbr\\/\u003e\\n  to alleviate this vulnerability.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eFail-over: When fail-over is performed (with a command on the\u003cbr\\/\u003e\\n  slave), I assume will the master be told to stop its replication so\u003cbr\\/\u003e\\n  it can tidy up? Since you describe the semantics of the stop\u003cbr\\/\u003e\\n  replication command as shutting down the slave database, I assume\u003cbr\\/\u003e\\n  failover can be performed without requiring a prior stop replication\u003cbr\\/\u003e\\n  command on the master.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e  If reaching master is not possible (lost connection), can the stop\u003cbr\\/\u003e\\n  replication command be used against the master to tidy up even when\u003cbr\\/\u003e\\n  connection has been lost?\u003c\\/p\u003e\\n\\n\u003cp\u003e  Perhaps it would be good to include in your table of commands any\u003cbr\\/\u003e\\n  preconditions for the commands. BTW, It seems a good idea to not\u003cbr\\/\u003e\\n  impose an order on starting server or slave first.\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003ePresumably, the master will time out if it is unable to send logs to\u003cbr\\/\u003e\\n  the slave for some (configurable?) period. It could keep trying for\u003cbr\\/\u003e\\n  some time but eventually it would need to stop or overflow the\u003cbr\\/\u003e\\n  buffer mechanism you suggest in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2926\\\" title=\\\"Replication: Add a log buffer for log records that should be shipped to the slave\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2926\\\"\u003e\u003cdel\u003eDERBY-2926\u003c\\/del\u003e\u003c\\/a\u003e. Will you require that\u003cbr\\/\u003e\\n  the user has LOG_ARCHIVE_MODE enabled? If you do, it would seem a\u003cbr\\/\u003e\\n  nice addition to later be able to resume replication even if the\u003cbr\\/\u003e\\n  buffer had to be abandoned (as you suggest). \u003cb\u003eBefore\u003c\\/b\u003e the buffer is\u003cbr\\/\u003e\\n  abandoned, if the network becomes available again, it would be\u003cbr\\/\u003e\\n  trivial to resume shipping of logs I expect?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eGiven that the system privileges work of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2109\\\" title=\\\"System privileges\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2109\\\"\u003eDERBY-2109\u003c\\/a\u003e provides us with\u003cbr\\/\u003e\\n  necessary security, I would hope we can lift the restriction that\u003cbr\\/\u003e\\n  administration commands can only be run from the same machine as the\u003cbr\\/\u003e\\n  server is started on, but for the time being the restriction makes\u003cbr\\/\u003e\\n  sense.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eYou describe the replication commands as CLI commands against\u003cbr\\/\u003e\\n  NetworkServerControl; will you be making the commands available in\u003cbr\\/\u003e\\n  API form as well, so replication can be embedded in an application?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003etypos: \\\"enclypted\\\", \\\"it\'s local log\\\"\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12512531_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512531_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jul\\/07 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-13T16:38:24+0000\'\u003e13\\/Jul\\/07 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Great that you guys are running with this one! Some comments to the \\nfunctional specification: \\n\\n \\n\\t Derby doesn\'t log all operations by default, e.g. bulk \\n  import, deleting all records from a table, creating an index.  These \\n  issues were addressed in the work on online backup (  DERBY-239  ), \\n  partially by denying online backup if non-logged operations are not \\n  yet committed, and partly by making them do logging when online \\n  backup is in effect (the reason for not logging some operations is \\n  performance). I guess for replication you would need to make them \\n  do logging for the duration. \\n \\n\\n\\n \\n\\t Overview of characteristics: you mention the network line as a \\n  single point of failure, that\'s fine in a first version. One could \\n  imagine having the replication service support more network interfaces  \\n  to alleviate this vulnerability. \\n \\n\\n\\n \\n\\t Fail-over: When fail-over is performed (with a command on the \\n  slave), I assume will the master be told to stop its replication so \\n  it can tidy up? Since you describe the semantics of the stop \\n  replication command as shutting down the slave database, I assume \\n  failover can be performed without requiring a prior stop replication \\n  command on the master. \\n \\n\\n\\n   If reaching master is not possible (lost connection), can the stop \\n  replication command be used against the master to tidy up even when \\n  connection has been lost? \\n\\n   Perhaps it would be good to include in your table of commands any \\n  preconditions for the commands. BTW, It seems a good idea to not \\n  impose an order on starting server or slave first. \\n\\n \\n\\t Presumably, the master will time out if it is unable to send logs to \\n  the slave for some (configurable?) period. It could keep trying for \\n  some time but eventually it would need to stop or overflow the \\n  buffer mechanism you suggest in   DERBY-2926  . Will you require that \\n  the user has LOG_ARCHIVE_MODE enabled? If you do, it would seem a \\n  nice addition to later be able to resume replication even if the \\n  buffer had to be abandoned (as you suggest).  Before  the buffer is \\n  abandoned, if the network becomes available again, it would be \\n  trivial to resume shipping of logs I expect? \\n \\n\\n\\n \\n\\t Given that the system privileges work of  DERBY-2109  provides us with \\n  necessary security, I would hope we can lift the restriction that \\n  administration commands can only be run from the same machine as the \\n  server is started on, but for the time being the restriction makes \\n  sense. \\n \\n\\n\\n \\n\\t You describe the replication commands as CLI commands against \\n  NetworkServerControl; will you be making the commands available in \\n  API form as well, so replication can be embedded in an application? \\n \\n\\n\\n \\n\\t typos: \\\"enclypted\\\", \\\"it\'s local log\\\" \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512911\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12512911&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512911\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12512911_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512911_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/07 11:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-16T11:02:10+0000\'\u003e16\\/Jul\\/07 11:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;Great that you guys are running with this one! Some comments to the\u003cbr\\/\u003e\\n&gt;functional specification:\u003c\\/p\u003e\\n\\n\u003cp\u003eThank you for the reviews and comments Dag.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;* Derby doesn\'t log all operations by default, e.g. bulk\u003cbr\\/\u003e\\n&gt;  import, deleting all records from a table, creating an index.  These\u003cbr\\/\u003e\\n&gt;  issues were addressed in the work on online backup (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-239\\\" title=\\\"Need a online backup feature  that does not block update operations   when online backup is in progress.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-239\\\"\u003e\u003cdel\u003eDERBY-239\u003c\\/del\u003e\u003c\\/a\u003e),\u003cbr\\/\u003e\\n&gt;  partially by denying online backup if non-logged operations are not\u003cbr\\/\u003e\\n&gt;  yet committed, and partly by making them do logging when online\u003cbr\\/\u003e\\n&gt;  backup is in effect (the reason for not logging some operations is\u003cbr\\/\u003e\\n&gt;  performance). I guess for replication you would need to make them\u003cbr\\/\u003e\\n&gt;  do logging for the duration.\u003c\\/p\u003e\\n\\n\u003cp\u003eI agree you are very correct. \u003c\\/p\u003e\\n\\n\u003cp\u003eI thought I could get some idea as to how this could be done by going through \u003cbr\\/\u003e\\nthe patches Derby-239.\u003c\\/p\u003e\\n\\n\u003cp\u003eI read through Derby-239 and found patches\u003cbr\\/\u003e\\nonlinebackup(3&amp;7).diff to be of interest to us.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe primary motivation of 3 was the following \u003c\\/p\u003e\\n\\n\u003cp\u003e\\\"To make a consistent online backup in this scenario, this patch:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) blocks online backup until all the transactions with unlogged operation are\u003cbr\\/\u003e\\n    committed\\/aborted.\u003cbr\\/\u003e\\n2) implicitly converts all unlogged operations to logged mode for the duration\u003cbr\\/\u003e\\n    of the online backup, if they are started when backup is in progress. \\\"\u003c\\/p\u003e\\n\\n\u003cp\u003e7 addressed comments on 3.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;* Overview of characteristics: you mention the network line as a\u003cbr\\/\u003e\\n&gt;  single point of failure, that\'s fine in a first version. One could\u003cbr\\/\u003e\\n&gt;  imagine having the replication service support more network interfaces \u003cbr\\/\u003e\\n&gt;  to alleviate this vulnerability.\u003c\\/p\u003e\\n\\n\u003cp\u003eI agree!\u003c\\/p\u003e\\n\\n\u003cp\u003eSome random thoughts on the modifications that would be required.\u003c\\/p\u003e\\n\\n\u003cp\u003ewhen the master or slave has multiple network interfaces each of them\u003cbr\\/\u003e\\ncan be accessed using different IP Addresses to which the network interfaces\u003cbr\\/\u003e\\nwould be bound. \u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eThe start replication command on the master and slave\u003cbr\\/\u003e\\n  will have to be modified to accept the multiple IP addresses\u003cbr\\/\u003e\\n  of the peer.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eThe log sender should be capable of detecting failure to send\u003cbr\\/\u003e\\n  to one and switch to sending to the other.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eThe log receiver should be modified to be able to listen at both\u003cbr\\/\u003e\\n  the interfaces.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003e&gt;* Fail-over: When fail-over is performed (with a command on the\u003cbr\\/\u003e\\n&gt;  slave), I assume will the master be told to stop its replication so\u003cbr\\/\u003e\\n&gt;  it can tidy up? Since you describe the semantics of the stop\u003cbr\\/\u003e\\n&gt;  replication command as shutting down the slave database, I assume\u003cbr\\/\u003e\\n&gt;  failover can be performed without requiring a prior stop replication\u003cbr\\/\u003e\\n&gt;  command on the master.\u003c\\/p\u003e\\n\\n\u003cp\u003eyou are correct. We would not issue a stop on the master to complete a\u003cbr\\/\u003e\\nfail-over.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;  If reaching master is not possible (lost connection), can the stop\u003cbr\\/\u003e\\n&gt;  replication command be used against the master to tidy up even when\u003cbr\\/\u003e\\n&gt;  connection has been lost?\u003c\\/p\u003e\\n\\n\u003cp\u003eNot being able to reach the master would mean that the replication process\u003cbr\\/\u003e\\nshould automatically stop. The sender should quit trying to send logs.\u003cbr\\/\u003e\\nBut this case would arise when you try the stop command between the time the\u003cbr\\/\u003e\\nmaster tries to connect to the slave and the master automatically stops \u003cbr\\/\u003e\\nreplication.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn this case a stop command should close down all replication behaviour, \u003cbr\\/\u003e\\nindependently of whether a connection is actually established. the only \u003cbr\\/\u003e\\ndifference is that if the connection is ok, the slave is shut down as well\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Perhaps it would be good to include in your table of commands any\u003cbr\\/\u003e\\n&gt; preconditions for the commands. BTW, It seems a good idea to not\u003cbr\\/\u003e\\n&gt; impose an order on starting server or slave first.\u003c\\/p\u003e\\n\\n\u003cp\u003eWill add a column preconditions for each command and will fill-up the\u003cbr\\/\u003e\\ninformation for them. I will submit a v4 of the func spec for this.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;* Presumably, the master will time out if it is unable to send logs to\u003cbr\\/\u003e\\n&gt;  the slave for some (configurable?) period. It could keep trying for\u003cbr\\/\u003e\\n&gt;  some time but eventually it would need to stop or overflow the\u003cbr\\/\u003e\\n&gt;  buffer mechanism you suggest in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2926\\\" title=\\\"Replication: Add a log buffer for log records that should be shipped to the slave\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2926\\\"\u003e\u003cdel\u003eDERBY-2926\u003c\\/del\u003e\u003c\\/a\u003e. Will you require that\u003cbr\\/\u003e\\n&gt;  the user has LOG_ARCHIVE_MODE enabled? If you do, it would seem a\u003cbr\\/\u003e\\n&gt;  nice addition to later be able to resume replication even if the\u003cbr\\/\u003e\\n&gt;  buffer had to be abandoned (as you suggest). \u003cb\u003eBefore\u003c\\/b\u003e the buffer is\u003cbr\\/\u003e\\n&gt;  abandoned, if the network becomes available again, it would be\u003cbr\\/\u003e\\n&gt;  trivial to resume shipping of logs I expect?\u003c\\/p\u003e\\n\\n\u003cp\u003eI agree this could be a great addition, because if the buffer overflow did result\u003cbr\\/\u003e\\nwe could resume sending logs from the backed up logs. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003e&gt;* Given that the system privileges work of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2109\\\" title=\\\"System privileges\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2109\\\"\u003eDERBY-2109\u003c\\/a\u003e provides us with\u003cbr\\/\u003e\\n&gt;  necessary security, I would hope we can lift the restriction that\u003cbr\\/\u003e\\n&gt;  administration commands can only be run from the same machine as the\u003cbr\\/\u003e\\n&gt;  server is started on, but for the time being the restriction makes\u003cbr\\/\u003e\\n&gt;  sense.\u003c\\/p\u003e\\n\\n\u003cp\u003eI agree.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;* You describe the replication commands as CLI commands against\u003cbr\\/\u003e\\n&gt;  NetworkServerControl; will you be making the commands available in\u003cbr\\/\u003e\\n&gt;  API form as well, so replication can be embedded in an application?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe slave is never booted during the time it is receiving logs. Hence \u003cbr\\/\u003e\\nwe would not be able to actually use a stored procedure here. This was \u003cbr\\/\u003e\\nthe reason we had earlier decided on a CLI command agains NetworkServerControl. \u003c\\/p\u003e\\n\\n\u003cp\u003eHowever if by public API you mean public methods in NetworkServerControl that \u003cbr\\/\u003e\\ncan be reached from outside if anyone wants to code an admin program at a later \u003cbr\\/\u003e\\nstage, I think this is a great idea and can be easily done.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;* typos: \\\"enclypted\\\", \\\"it\'s local log\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003e  Will fix this in the next version.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12512911_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512911_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/07 11:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-16T11:02:10+0000\'\u003e16\\/Jul\\/07 11:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;Great that you guys are running with this one! Some comments to the \\n&gt;functional specification: \\n\\n Thank you for the reviews and comments Dag. \\n\\n &gt;* Derby doesn\'t log all operations by default, e.g. bulk \\n&gt;  import, deleting all records from a table, creating an index.  These \\n&gt;  issues were addressed in the work on online backup (  DERBY-239  ), \\n&gt;  partially by denying online backup if non-logged operations are not \\n&gt;  yet committed, and partly by making them do logging when online \\n&gt;  backup is in effect (the reason for not logging some operations is \\n&gt;  performance). I guess for replication you would need to make them \\n&gt;  do logging for the duration. \\n\\n I agree you are very correct.  \\n\\n I thought I could get some idea as to how this could be done by going through  \\nthe patches Derby-239. \\n\\n I read through Derby-239 and found patches \\nonlinebackup(3&amp;7).diff to be of interest to us. \\n\\n The primary motivation of 3 was the following  \\n\\n \\\"To make a consistent online backup in this scenario, this patch: \\n\\n 1) blocks online backup until all the transactions with unlogged operation are \\n    committed\\/aborted. \\n2) implicitly converts all unlogged operations to logged mode for the duration \\n    of the online backup, if they are started when backup is in progress. \\\" \\n\\n 7 addressed comments on 3. \\n\\n &gt;* Overview of characteristics: you mention the network line as a \\n&gt;  single point of failure, that\'s fine in a first version. One could \\n&gt;  imagine having the replication service support more network interfaces  \\n&gt;  to alleviate this vulnerability. \\n\\n I agree! \\n\\n Some random thoughts on the modifications that would be required. \\n\\n when the master or slave has multiple network interfaces each of them \\ncan be accessed using different IP Addresses to which the network interfaces \\nwould be bound.  \\n\\n \\n\\t The start replication command on the master and slave \\n  will have to be modified to accept the multiple IP addresses \\n  of the peer. \\n \\n\\n\\n \\n\\t The log sender should be capable of detecting failure to send \\n  to one and switch to sending to the other. \\n \\n\\n\\n \\n\\t The log receiver should be modified to be able to listen at both \\n  the interfaces. \\n \\n\\n\\n\\n &gt;* Fail-over: When fail-over is performed (with a command on the \\n&gt;  slave), I assume will the master be told to stop its replication so \\n&gt;  it can tidy up? Since you describe the semantics of the stop \\n&gt;  replication command as shutting down the slave database, I assume \\n&gt;  failover can be performed without requiring a prior stop replication \\n&gt;  command on the master. \\n\\n you are correct. We would not issue a stop on the master to complete a \\nfail-over. \\n\\n &gt;  If reaching master is not possible (lost connection), can the stop \\n&gt;  replication command be used against the master to tidy up even when \\n&gt;  connection has been lost? \\n\\n Not being able to reach the master would mean that the replication process \\nshould automatically stop. The sender should quit trying to send logs. \\nBut this case would arise when you try the stop command between the time the \\nmaster tries to connect to the slave and the master automatically stops  \\nreplication. \\n\\n In this case a stop command should close down all replication behaviour,  \\nindependently of whether a connection is actually established. the only  \\ndifference is that if the connection is ok, the slave is shut down as well \\n\\n &gt; Perhaps it would be good to include in your table of commands any \\n&gt; preconditions for the commands. BTW, It seems a good idea to not \\n&gt; impose an order on starting server or slave first. \\n\\n Will add a column preconditions for each command and will fill-up the \\ninformation for them. I will submit a v4 of the func spec for this. \\n\\n &gt;* Presumably, the master will time out if it is unable to send logs to \\n&gt;  the slave for some (configurable?) period. It could keep trying for \\n&gt;  some time but eventually it would need to stop or overflow the \\n&gt;  buffer mechanism you suggest in   DERBY-2926  . Will you require that \\n&gt;  the user has LOG_ARCHIVE_MODE enabled? If you do, it would seem a \\n&gt;  nice addition to later be able to resume replication even if the \\n&gt;  buffer had to be abandoned (as you suggest).  Before  the buffer is \\n&gt;  abandoned, if the network becomes available again, it would be \\n&gt;  trivial to resume shipping of logs I expect? \\n\\n I agree this could be a great addition, because if the buffer overflow did result \\nwe could resume sending logs from the backed up logs.  \\n\\n\\n &gt;* Given that the system privileges work of  DERBY-2109  provides us with \\n&gt;  necessary security, I would hope we can lift the restriction that \\n&gt;  administration commands can only be run from the same machine as the \\n&gt;  server is started on, but for the time being the restriction makes \\n&gt;  sense. \\n\\n I agree. \\n\\n &gt;* You describe the replication commands as CLI commands against \\n&gt;  NetworkServerControl; will you be making the commands available in \\n&gt;  API form as well, so replication can be embedded in an application? \\n\\n The slave is never booted during the time it is receiving logs. Hence  \\nwe would not be able to actually use a stored procedure here. This was  \\nthe reason we had earlier decided on a CLI command agains NetworkServerControl.  \\n\\n However if by public API you mean public methods in NetworkServerControl that  \\ncan be reached from outside if anyone wants to code an admin program at a later  \\nstage, I think this is a great idea and can be easily done. \\n\\n &gt;* typos: \\\"enclypted\\\", \\\"it\'s local log\\\" \\n\\n   Will fix this in the next version.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512921\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12512921&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512921\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12512921_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512921_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/07 11:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-16T11:33:26+0000\'\u003e16\\/Jul\\/07 11:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;&gt;* Derby doesn\'t log all operations by default, e.g. bulk\u003cbr\\/\u003e\\n&gt;&gt; import, deleting all records from a table, creating an index. \u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt;\\\"To make a consistent online backup in this scenario, this patch:\u003cbr\\/\u003e\\n&gt;1) blocks online backup until all the transactions with unlogged operation are\u003cbr\\/\u003e\\n&gt;    committed\\/aborted.\u003cbr\\/\u003e\\n&gt;2) implicitly converts all unlogged operations to logged mode for the duration\u003cbr\\/\u003e\\n&gt;    of the online backup, if they are started when backup is in progress. \\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for investigating this Narayanan. Just to be sure: does\u003cbr\\/\u003e\\nthis mean that all operations are logged if we turn the\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-239\\\" title=\\\"Need a online backup feature  that does not block update operations   when online backup is in progress.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-239\\\"\u003e\u003cdel\u003eDERBY-239\u003c\\/del\u003e\u003c\\/a\u003e mechanism on?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;* Presumably, the master will time out if it is unable to send logs to\u003cbr\\/\u003e\\n&gt;&gt; the slave for some (configurable?) period. It could keep trying for\u003cbr\\/\u003e\\n&gt;&gt; some time but eventually it would need to stop or overflow the\u003cbr\\/\u003e\\n&gt;&gt; buffer mechanism you suggest in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2926\\\" title=\\\"Replication: Add a log buffer for log records that should be shipped to the slave\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2926\\\"\u003e\u003cdel\u003eDERBY-2926\u003c\\/del\u003e\u003c\\/a\u003e. Will you require that\u003cbr\\/\u003e\\n&gt;&gt; the user has LOG_ARCHIVE_MODE enabled? If you do, it would seem a\u003cbr\\/\u003e\\n&gt;&gt; nice addition to later be able to resume replication even if the\u003cbr\\/\u003e\\n&gt;&gt; buffer had to be abandoned (as you suggest). \u003cb\u003eBefore\u003c\\/b\u003e the buffer is\u003cbr\\/\u003e\\n&gt;&gt; abandoned, if the network becomes available again, it would be\u003cbr\\/\u003e\\n&gt;&gt; trivial to resume shipping of logs I expect?\u003c\\/p\u003e\\n\\n\u003cp\u003eI think this functionality will have to be added as a later\u003cbr\\/\u003e\\nextension to replication. When the issue is addressed, I do not\u003cbr\\/\u003e\\nthink we have to run with LOG_ARCHIVE_MODE enabled until a buffer\u003cbr\\/\u003e\\noverflow occurs, however. When an overflow happens, the database should\u003cbr\\/\u003e\\nbe frozen, the existing replication buffer content written to\u003cbr\\/\u003e\\ndisk, and LOG_ARCHIVE_MODE be started. The database can then be \u003cbr\\/\u003e\\nunfrozen. This way, we do not need to store log files are written when \u003cbr\\/\u003e\\nreplication works as it should.\u003c\\/p\u003e\\n\\n\u003cp\u003eI answered a related question in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2926\\\" title=\\\"Replication: Add a log buffer for log records that should be shipped to the slave\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2926\\\"\u003e\u003cdel\u003eDERBY-2926\u003c\\/del\u003e\u003c\\/a\u003e; I\'ll just cut\'n paste the\u003cbr\\/\u003e\\nanswer here for easy access:\u003cbr\\/\u003e\\n---\u003cdel\u003e8&lt;\u003c\\/del\u003e---\u003cbr\\/\u003e\\n&gt;How do you imagine flow control if the network gets slow? Would you\u003cbr\\/\u003e\\n&gt;block a transaction whose record would overflow the buffer?\u003c\\/p\u003e\\n\\n\u003cp\u003eThere are at least two simple alternatives for how to handle a\u003cbr\\/\u003e\\nfull replication buffer:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eStop replication\u003c\\/li\u003e\\n\\t\u003cli\u003eBlock transactions\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI think the first alternative would be the better one since\u003cbr\\/\u003e\\nblocking transactions would mean no availability. This is the\u003cbr\\/\u003e\\nexact opposite of what we want to achieve with replication.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe functional spec of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2872\\\" title=\\\"Add Replication functionality to Derby\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2872\\\"\u003e\u003cdel\u003eDERBY-2872\u003c\\/del\u003e\u003c\\/a\u003e states that resuming\u003cbr\\/\u003e\\nreplication after it has been stopped is a good candidate for\u003cbr\\/\u003e\\nextending the functionality. Once that issue has been addressed,\u003cbr\\/\u003e\\nwe have a third alternative if the buffer gets full:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eStop replication for now, but store the log files so that\u003cbr\\/\u003e\\n  replication can be resumed later.\u003cbr\\/\u003e\\n---\u003cdel\u003e&gt;8\u003c\\/del\u003e---\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12512921_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512921_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/07 11:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-16T11:33:26+0000\'\u003e16\\/Jul\\/07 11:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;&gt;* Derby doesn\'t log all operations by default, e.g. bulk \\n&gt;&gt; import, deleting all records from a table, creating an index.  \\n&gt; \\n&gt;\\\"To make a consistent online backup in this scenario, this patch: \\n&gt;1) blocks online backup until all the transactions with unlogged operation are \\n&gt;    committed\\/aborted. \\n&gt;2) implicitly converts all unlogged operations to logged mode for the duration \\n&gt;    of the online backup, if they are started when backup is in progress. \\\" \\n\\n Thanks for investigating this Narayanan. Just to be sure: does \\nthis mean that all operations are logged if we turn the \\n  DERBY-239   mechanism on? \\n\\n &gt;&gt;* Presumably, the master will time out if it is unable to send logs to \\n&gt;&gt; the slave for some (configurable?) period. It could keep trying for \\n&gt;&gt; some time but eventually it would need to stop or overflow the \\n&gt;&gt; buffer mechanism you suggest in   DERBY-2926  . Will you require that \\n&gt;&gt; the user has LOG_ARCHIVE_MODE enabled? If you do, it would seem a \\n&gt;&gt; nice addition to later be able to resume replication even if the \\n&gt;&gt; buffer had to be abandoned (as you suggest).  Before  the buffer is \\n&gt;&gt; abandoned, if the network becomes available again, it would be \\n&gt;&gt; trivial to resume shipping of logs I expect? \\n\\n I think this functionality will have to be added as a later \\nextension to replication. When the issue is addressed, I do not \\nthink we have to run with LOG_ARCHIVE_MODE enabled until a buffer \\noverflow occurs, however. When an overflow happens, the database should \\nbe frozen, the existing replication buffer content written to \\ndisk, and LOG_ARCHIVE_MODE be started. The database can then be  \\nunfrozen. This way, we do not need to store log files are written when  \\nreplication works as it should. \\n\\n I answered a related question in   DERBY-2926  ; I\'ll just cut\'n paste the \\nanswer here for easy access: \\n--- 8&lt; --- \\n&gt;How do you imagine flow control if the network gets slow? Would you \\n&gt;block a transaction whose record would overflow the buffer? \\n\\n There are at least two simple alternatives for how to handle a \\nfull replication buffer: \\n\\n \\n\\t Stop replication \\n\\t Block transactions \\n \\n\\n\\n I think the first alternative would be the better one since \\nblocking transactions would mean no availability. This is the \\nexact opposite of what we want to achieve with replication. \\n\\n The functional spec of   DERBY-2872   states that resuming \\nreplication after it has been stopped is a good candidate for \\nextending the functionality. Once that issue has been addressed, \\nwe have a third alternative if the buffer gets full: \\n\\n \\n\\t Stop replication for now, but store the log files so that \\n  replication can be resumed later. \\n--- &gt;8 --- \\n \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12512932\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12512932&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12512932\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12512932_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512932_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/07 12:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-16T12:42:07+0000\'\u003e16\\/Jul\\/07 12:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;Thanks for investigating this Narayanan. Just to be sure: does\u003cbr\\/\u003e\\n&gt;this mean that all operations are logged if we turn the\u003cbr\\/\u003e\\n&gt;\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-239\\\" title=\\\"Need a online backup feature  that does not block update operations   when online backup is in progress.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-239\\\"\u003e\u003cdel\u003eDERBY-239\u003c\\/del\u003e\u003c\\/a\u003e mechanism on? \u003c\\/p\u003e\\n\\n\u003cp\u003eI guess you mean if we do the same thing being done in \u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-239\\\" title=\\\"Need a online backup feature  that does not block update operations   when online backup is in progress.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-239\\\"\u003e\u003cdel\u003eDERBY-239\u003c\\/del\u003e\u003c\\/a\u003e would it log all operations. Seems like it at first\u003cbr\\/\u003e\\nlook. I however will dig deeper here and revert back.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12512932_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12512932_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jul\\/07 12:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-16T12:42:07+0000\'\u003e16\\/Jul\\/07 12:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;Thanks for investigating this Narayanan. Just to be sure: does \\n&gt;this mean that all operations are logged if we turn the \\n&gt;  DERBY-239   mechanism on?  \\n\\n I guess you mean if we do the same thing being done in  \\n  DERBY-239   would it log all operations. Seems like it at first \\nlook. I however will dig deeper here and revert back.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514203\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514203&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514203\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514203_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514203_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/07 13:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-20T13:38:07+0000\'\u003e20\\/Jul\\/07 13:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think the functional spec looks very good.  A few minor comments:\u003c\\/p\u003e\\n\\n\u003cp\u003e1. You say, \\\"the database is only booted, not created, on the slave\\\".\u003cbr\\/\u003e\\n   I think I understand how things will be done, but the booting part\u003cbr\\/\u003e\\n   is a bit confusing.\u003c\\/p\u003e\\n\\n\u003cp\u003e2. I guess you will add a connection attribute that is used to get the\u003cbr\\/\u003e\\n   a database booted in \\\"slave mode\\\".  I think this should be\u003cbr\\/\u003e\\n   specified in the functional spec.  Even if people will normally not\u003cbr\\/\u003e\\n   use that directly, it will be part of the public API, and I think\u003cbr\\/\u003e\\n   it should be specified in a funcspec.\u003c\\/p\u003e\\n\\n\u003cp\u003e3. You say, \\\"The master can now continue to process transaction\\\", but\u003cbr\\/\u003e\\n   you do not say anything about when such processing is stopped.\u003cbr\\/\u003e\\n   What advatange does pausing the transaction processing give? \u003c\\/p\u003e\\n\\n\u003cp\u003e4. What will happen if the failover command is executed while the\u003cbr\\/\u003e\\n   master is alive and doing replication?  \u003c\\/p\u003e\\n\\n\u003cp\u003e5. I have already commented on the command syntax in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2954\\\" title=\\\"Add commands to NetworkServerControl for interacting with the replication functionality\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2954\\\"\u003e\u003cdel\u003eDERBY-2954\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514203_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514203_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/07 13:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-20T13:38:07+0000\'\u003e20\\/Jul\\/07 13:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think the functional spec looks very good.  A few minor comments: \\n\\n 1. You say, \\\"the database is only booted, not created, on the slave\\\". \\n   I think I understand how things will be done, but the booting part \\n   is a bit confusing. \\n\\n 2. I guess you will add a connection attribute that is used to get the \\n   a database booted in \\\"slave mode\\\".  I think this should be \\n   specified in the functional spec.  Even if people will normally not \\n   use that directly, it will be part of the public API, and I think \\n   it should be specified in a funcspec. \\n\\n 3. You say, \\\"The master can now continue to process transaction\\\", but \\n   you do not say anything about when such processing is stopped. \\n   What advatange does pausing the transaction processing give?  \\n\\n 4. What will happen if the failover command is executed while the \\n   master is alive and doing replication?   \\n\\n 5. I have already commented on the command syntax in   DERBY-2954  .              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514590\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514590&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514590\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12514590_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514590_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 08:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T08:47:59+0000\'\u003e23\\/Jul\\/07 08:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;2. I guess you will add a connection attribute that is used to get the\u003cbr\\/\u003e\\n&gt;   a database booted in \\\"slave mode\\\". I think this should be\u003cbr\\/\u003e\\n&gt;   specified in the functional spec. Even if people will normally not\u003cbr\\/\u003e\\n&gt;   use that directly, it will be part of the public API, and I think\u003cbr\\/\u003e\\n&gt;   it should be specified in a funcspec. \u003c\\/p\u003e\\n\\n\u003cp\u003eSomething like this? \u003c\\/p\u003e\\n\\n\u003cp\u003eij&gt; connect \'jdbc:derby:db;replicationslave;...\';\u003c\\/p\u003e\\n\\n\u003cp\u003eIf so, I do not think we should add this connection attribute. The reason is that the replication idea is to prevent the slave from completing the database booting; it is supposed to stay in recovery and redo log records as they arrive until stop or failover is requested. Since the slave gets stuck in recovery, the statement above would never return a connection - it would just hang. As far as I know, this also means that the connection can not be used to stop replication or perform failover either.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12514590_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514590_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 08:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T08:47:59+0000\'\u003e23\\/Jul\\/07 08:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;2. I guess you will add a connection attribute that is used to get the \\n&gt;   a database booted in \\\"slave mode\\\". I think this should be \\n&gt;   specified in the functional spec. Even if people will normally not \\n&gt;   use that directly, it will be part of the public API, and I think \\n&gt;   it should be specified in a funcspec.  \\n\\n Something like this?  \\n\\n ij&gt; connect \'jdbc:derby:db;replicationslave;...\'; \\n\\n If so, I do not think we should add this connection attribute. The reason is that the replication idea is to prevent the slave from completing the database booting; it is supposed to stay in recovery and redo log records as they arrive until stop or failover is requested. Since the slave gets stuck in recovery, the statement above would never return a connection - it would just hang. As far as I know, this also means that the connection can not be used to stop replication or perform failover either.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514606\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514606&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514606\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12514606_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514606_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 11:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T11:38:08+0000\'\u003e23\\/Jul\\/07 11:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;1. You say, \\\"the database is only booted, not created, on the slave\\\".\u003cbr\\/\u003e\\n&gt;   I think I understand how things will be done, but the booting part\u003cbr\\/\u003e\\n&gt;   is a bit confusing.\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt;3. You say, \\\"The master can now continue to process transaction\\\", but\u003cbr\\/\u003e\\n&gt;   you do not say anything about when such processing is stopped.\u003cbr\\/\u003e\\n&gt;   What advatange does pausing the transaction processing give? \u003cbr\\/\u003e\\n&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eThe functional spec will be modified to better describe these. \u003c\\/p\u003e\\n\\n\u003cp\u003eRegarding 3) - Processing on the master must be paused while the\u003cbr\\/\u003e\\nfollowing happens: \u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003ebuffered log records and buffered data pages are forced to\u003cbr\\/\u003e\\n  disk. Actually, forcing the data pages is not strictly\u003cbr\\/\u003e\\n  necessary, but we might as well ship all write operations that\u003cbr\\/\u003e\\n  have been performed to the slave.\u003c\\/li\u003e\\n\\t\u003cli\u003ethe entire database directory is sent to the slave (or copied\u003cbr\\/\u003e\\n  to a backup location, from where it can be sent to the slave)\u003c\\/li\u003e\\n\\t\u003cli\u003ethe replication log buffer has been started and the logFactory\u003cbr\\/\u003e\\n  has been informed to append log records to the buffer as well\u003cbr\\/\u003e\\n  as to disk.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThe reason for this is that the slave requires a copy of the\u003cbr\\/\u003e\\ndatabase that is exactly equal to that on the master when log\u003cbr\\/\u003e\\nshipment starts. When we start sending log records to the slave,\u003cbr\\/\u003e\\nwe need to know that the slave has a database that includes all\u003cbr\\/\u003e\\nlog records up to a LogInstant \'i\'. The first log record that is\u003cbr\\/\u003e\\nsent to the slave must be the one immediately following \'i\'.\u003cbr\\/\u003e\\nHence the pause.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;4. What will happen if the failover command is executed while the\u003cbr\\/\u003e\\n&gt;   master is alive and doing replication?  \u003c\\/p\u003e\\n\\n\u003cp\u003eI can think of at least three alternatives: 1) stop the master,\u003cbr\\/\u003e\\nand make the old slave a normal Derby instance for the database.\u003cbr\\/\u003e\\n2) not allow failover to be executed on a slave when the master\u003cbr\\/\u003e\\nis alive. 3) perform a \\\"switch\\\", i.e., make the old slave the new\u003cbr\\/\u003e\\nmaster, and the old master the new slave.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor now, I think 1) is the best alternative to keep the amount of\u003cbr\\/\u003e\\nwork down while alternative 3) would make a good extension\u003cbr\\/\u003e\\ncandidate to the functionality.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12514606_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514606_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 11:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T11:38:08+0000\'\u003e23\\/Jul\\/07 11:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;1. You say, \\\"the database is only booted, not created, on the slave\\\". \\n&gt;   I think I understand how things will be done, but the booting part \\n&gt;   is a bit confusing. \\n&gt; \\n&gt;3. You say, \\\"The master can now continue to process transaction\\\", but \\n&gt;   you do not say anything about when such processing is stopped. \\n&gt;   What advatange does pausing the transaction processing give?  \\n&gt; \\n\\n The functional spec will be modified to better describe these.  \\n\\n Regarding 3) - Processing on the master must be paused while the \\nfollowing happens:  \\n\\n \\n\\t buffered log records and buffered data pages are forced to \\n  disk. Actually, forcing the data pages is not strictly \\n  necessary, but we might as well ship all write operations that \\n  have been performed to the slave. \\n\\t the entire database directory is sent to the slave (or copied \\n  to a backup location, from where it can be sent to the slave) \\n\\t the replication log buffer has been started and the logFactory \\n  has been informed to append log records to the buffer as well \\n  as to disk. \\n \\n\\n\\n The reason for this is that the slave requires a copy of the \\ndatabase that is exactly equal to that on the master when log \\nshipment starts. When we start sending log records to the slave, \\nwe need to know that the slave has a database that includes all \\nlog records up to a LogInstant \'i\'. The first log record that is \\nsent to the slave must be the one immediately following \'i\'. \\nHence the pause. \\n\\n &gt;4. What will happen if the failover command is executed while the \\n&gt;   master is alive and doing replication?   \\n\\n I can think of at least three alternatives: 1) stop the master, \\nand make the old slave a normal Derby instance for the database. \\n2) not allow failover to be executed on a slave when the master \\nis alive. 3) perform a \\\"switch\\\", i.e., make the old slave the new \\nmaster, and the old master the new slave. \\n\\n For now, I think 1) is the best alternative to keep the amount of \\nwork down while alternative 3) would make a good extension \\ncandidate to the functionality.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514613\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514613&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514613\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514613_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514613_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 12:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T12:38:42+0000\'\u003e23\\/Jul\\/07 12:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJ\\u00F8rgen L\\u00F8land (JIRA) wrote:\u003cbr\\/\u003e\\n&gt; Regarding 3) - Processing on the master must be paused while the\u003cbr\\/\u003e\\n&gt; following happens: \u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; * buffered log records and buffered data pages are forced to\u003cbr\\/\u003e\\n&gt;   disk. Actually, forcing the data pages is not strictly\u003cbr\\/\u003e\\n&gt;   necessary, but we might as well ship all write operations that\u003cbr\\/\u003e\\n&gt;   have been performed to the slave.\u003cbr\\/\u003e\\n&gt; * the entire database directory is sent to the slave (or copied\u003cbr\\/\u003e\\n&gt;   to a backup location, from where it can be sent to the slave)\u003cbr\\/\u003e\\n&gt; * the replication log buffer has been started and the logFactory\u003cbr\\/\u003e\\n&gt;   has been informed to append log records to the buffer as well\u003cbr\\/\u003e\\n&gt;   as to disk.\u003c\\/p\u003e\\n\\n\u003cp\u003eI would think the online backup mechanism has already solved some these issues.  Have you consider using an online backup to get a copy of the database and existing log?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; \u003cbr\\/\u003e\\n&gt; The reason for this is that the slave requires a copy of the\u003cbr\\/\u003e\\n&gt; database that is exactly equal to that on the master when log\u003cbr\\/\u003e\\n&gt; shipment starts. When we start sending log records to the slave,\u003cbr\\/\u003e\\n&gt; we need to know that the slave has a database that includes all\u003cbr\\/\u003e\\n&gt; log records up to a LogInstant \'i\'. The first log record that is\u003cbr\\/\u003e\\n&gt; sent to the slave must be the one immediately following \'i\'.\u003cbr\\/\u003e\\n&gt; Hence the pause.\u003c\\/p\u003e\\n\\n\u003cp\u003eI do not understand why it needs to be exactly the same database.  Recovery already handles redo of log records that are already reflected in the database.  What harm would it make if you sent log records with LogInstant less than \'i\'?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; \u003cbr\\/\u003e\\n&gt;&gt; 4. What will happen if the failover command is executed while the\u003cbr\\/\u003e\\n&gt;&gt;   master is alive and doing replication?  \u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; I can think of at least three alternatives: 1) stop the master,\u003cbr\\/\u003e\\n&gt; and make the old slave a normal Derby instance for the database.\u003cbr\\/\u003e\\n&gt; 2) not allow failover to be executed on a slave when the master\u003cbr\\/\u003e\\n&gt; is alive. 3) perform a \\\"switch\\\", i.e., make the old slave the new\u003cbr\\/\u003e\\n&gt; master, and the old master the new slave.\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; For now, I think 1) is the best alternative to keep the amount of\u003cbr\\/\u003e\\n&gt; work down while alternative 3) would make a good extension\u003cbr\\/\u003e\\n&gt; candidate to the functionality.\u003c\\/p\u003e\\n\\n\u003cp\u003eI assume the failover command is sent to the slave.  Both 1) and 3)  will then require some mechanism where the slave sends commands to the master.  If you want keep the work down, another alternative could be\u003cbr\\/\u003e\\n4) take down the connection to the master and perform failover. But maybe that creates a too high risk for inconsistencies since you may end up with two masters that both will serve clients.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think an important use-case is to be able to switch to another master during planned maintenance.  That could be done without loosing any transactions if the sequence of operations are as follows:\u003cbr\\/\u003e\\n1. Stop new transaction on master\u003cbr\\/\u003e\\n2. Flush all existing log to slave\u003cbr\\/\u003e\\n3. Redo all log on slave\u003cbr\\/\u003e\\n4. Do failover\u003c\\/p\u003e\\n\\n\u003cp\u003eThere is already a mechanism for 1.  I guess 3. is part of 4.  So it is really about being able make sure existing  log is flushed to disk sending the failover command.  Do we need a separate command for that, or could it be part of the stop replication command.  That is, when stop replication is received, existing log is sent before replication is stopped.  Then the three steps of a \\\"planned failover\\\" would be:\u003cbr\\/\u003e\\n1. freeze database on master\u003cbr\\/\u003e\\n2. stop replication on master\u003cbr\\/\u003e\\n3. failover on slave\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514613_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514613_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 12:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T12:38:42+0000\'\u003e23\\/Jul\\/07 12:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    J\\u00F8rgen L\\u00F8land (JIRA) wrote: \\n&gt; Regarding 3) - Processing on the master must be paused while the \\n&gt; following happens:  \\n&gt;  \\n&gt; * buffered log records and buffered data pages are forced to \\n&gt;   disk. Actually, forcing the data pages is not strictly \\n&gt;   necessary, but we might as well ship all write operations that \\n&gt;   have been performed to the slave. \\n&gt; * the entire database directory is sent to the slave (or copied \\n&gt;   to a backup location, from where it can be sent to the slave) \\n&gt; * the replication log buffer has been started and the logFactory \\n&gt;   has been informed to append log records to the buffer as well \\n&gt;   as to disk. \\n\\n I would think the online backup mechanism has already solved some these issues.  Have you consider using an online backup to get a copy of the database and existing log? \\n\\n &gt;  \\n&gt; The reason for this is that the slave requires a copy of the \\n&gt; database that is exactly equal to that on the master when log \\n&gt; shipment starts. When we start sending log records to the slave, \\n&gt; we need to know that the slave has a database that includes all \\n&gt; log records up to a LogInstant \'i\'. The first log record that is \\n&gt; sent to the slave must be the one immediately following \'i\'. \\n&gt; Hence the pause. \\n\\n I do not understand why it needs to be exactly the same database.  Recovery already handles redo of log records that are already reflected in the database.  What harm would it make if you sent log records with LogInstant less than \'i\'? \\n\\n &gt;  \\n&gt;&gt; 4. What will happen if the failover command is executed while the \\n&gt;&gt;   master is alive and doing replication?   \\n&gt;  \\n&gt; I can think of at least three alternatives: 1) stop the master, \\n&gt; and make the old slave a normal Derby instance for the database. \\n&gt; 2) not allow failover to be executed on a slave when the master \\n&gt; is alive. 3) perform a \\\"switch\\\", i.e., make the old slave the new \\n&gt; master, and the old master the new slave. \\n&gt;  \\n&gt; For now, I think 1) is the best alternative to keep the amount of \\n&gt; work down while alternative 3) would make a good extension \\n&gt; candidate to the functionality. \\n\\n I assume the failover command is sent to the slave.  Both 1) and 3)  will then require some mechanism where the slave sends commands to the master.  If you want keep the work down, another alternative could be \\n4) take down the connection to the master and perform failover. But maybe that creates a too high risk for inconsistencies since you may end up with two masters that both will serve clients. \\n\\n I think an important use-case is to be able to switch to another master during planned maintenance.  That could be done without loosing any transactions if the sequence of operations are as follows: \\n1. Stop new transaction on master \\n2. Flush all existing log to slave \\n3. Redo all log on slave \\n4. Do failover \\n\\n There is already a mechanism for 1.  I guess 3. is part of 4.  So it is really about being able make sure existing  log is flushed to disk sending the failover command.  Do we need a separate command for that, or could it be part of the stop replication command.  That is, when stop replication is received, existing log is sent before replication is stopped.  Then the three steps of a \\\"planned failover\\\" would be: \\n1. freeze database on master \\n2. stop replication on master \\n3. failover on slave              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514630\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514630&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514630\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12514630_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514630_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 13:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T13:46:36+0000\'\u003e23\\/Jul\\/07 13:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;&gt; Regarding 3) - Processing on the master must be paused while the\u003cbr\\/\u003e\\n&gt;&gt; following happens: \u003cbr\\/\u003e\\n&gt;&gt; * buffered log records and buffered data pages are forced to\u003cbr\\/\u003e\\n&gt;&gt;   disk. Actually, forcing the data pages is not strictly\u003cbr\\/\u003e\\n&gt;&gt;   necessary, but we might as well ship all write operations that\u003cbr\\/\u003e\\n&gt;&gt;   have been performed to the slave.\u003cbr\\/\u003e\\n&gt;&gt; * the entire database directory is sent to the slave (or copied\u003cbr\\/\u003e\\n&gt;&gt;   to a backup location, from where it can be sent to the slave)\u003cbr\\/\u003e\\n&gt;&gt; * the replication log buffer has been started and the logFactory\u003cbr\\/\u003e\\n&gt;&gt;   has been informed to append log records to the buffer as well\u003cbr\\/\u003e\\n&gt;&gt;   as to disk.\u003cbr\\/\u003e\\n&gt; I would think the online backup mechanism has already solved some these issues.  Have you consider using an online backup to get a copy of the database and existing log?\u003c\\/p\u003e\\n\\n\u003cp\u003eI had a brief look at backup a few weeks ago. If I remember\u003cbr\\/\u003e\\ncorrectly, it does more or less the same as described above: It\u003cbr\\/\u003e\\npauses the database while flushing data and log to disk, and\u003cbr\\/\u003e\\ncopies the entire database directory to a backup location.\u003cbr\\/\u003e\\nProcessing is not resumed until this copying has completed.\u003cbr\\/\u003e\\nFunctionality to pause (freeze) the database \u003cbr\\/\u003e\\nis likely to be reused, and the strategy follows in the same steps as\u003cbr\\/\u003e\\nbackup.\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom the adminguide, topic \\\"Online backups\\\":\u003cbr\\/\u003e\\n\\\"The SYSCS_UTIL.SYSCS_BACKUP_DATABASE() procedure puts the database into a state in which it can be safely copied, then copies the entire original database directory (including data files, online transaction log files, and jar files) to the specified backup directory. Files that are not within the original database directory (for example, derby.properties) are not copied.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eIf this is the mechanism you are referring to, we can use backup\u003cbr\\/\u003e\\nto do the \\\"or copied to a backup location, from where it can be\u003cbr\\/\u003e\\nsent to the slave\\\" part. That strategy will freeze the database\u003cbr\\/\u003e\\nfor a shorter time iff the disk is faster than the network. On\u003cbr\\/\u003e\\nthe other hand, it will require 2x diskspace and potentially much\u003cbr\\/\u003e\\nmemory because log records will accumulate while the backed-up\u003cbr\\/\u003e\\ndatabase is being sent to the slave. \u003c\\/p\u003e\\n\\n\u003cp\u003eIf there is another, nonblocking backup mechanism that I don\'t know \u003cbr\\/\u003e\\nof, please refer me to it. If so, we may have to rework our plans.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt; The reason for this is that the slave requires a copy of the\u003cbr\\/\u003e\\n&gt;&gt; database that is exactly equal to that on the master when log\u003cbr\\/\u003e\\n&gt;&gt; shipment starts. When we start sending log records to the slave,\u003cbr\\/\u003e\\n&gt;&gt; we need to know that the slave has a database that includes all\u003cbr\\/\u003e\\n&gt;&gt; log records up to a LogInstant \'i\'. The first log record that is\u003cbr\\/\u003e\\n&gt;&gt; sent to the slave must be the one immediately following \'i\'.\u003cbr\\/\u003e\\n&gt;&gt; Hence the pause.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I do not understand why it needs to be exactly the same database.  Recovery already handles redo of log records that are already reflected in the database.  What harm would it make if you sent log records with LogInstant less than \'i\'?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem is caused by us writing the log record to the slave\u003cbr\\/\u003e\\nlog file \u003cb\u003ebefore\u003c\\/b\u003e recovering it.\u003c\\/p\u003e\\n\\n\u003cp\u003eUnfortunately (in this case), the LSN in\u003cbr\\/\u003e\\nDerby (LogInstant) is the byte position where the log record\u003cbr\\/\u003e\\nstarts in the log file. Since undo operations seem to identify\u003cbr\\/\u003e\\ntheir respective do operations using the LogInstant (seems to me\u003cbr\\/\u003e\\nto be \\\"hidden\\\" inside an undo log record\'s byte[] data), all log\u003cbr\\/\u003e\\nrecords must be found exactly the same place in the master and\u003cbr\\/\u003e\\nslave log files. Hence, duplicates of log records cannot exist on\u003cbr\\/\u003e\\nfile without invalidating the LSNs. \u003c\\/p\u003e\\n\\n\u003cp\u003eWe could, of course, start sending log records &lt; i, and let the\u003cbr\\/\u003e\\nslave ignore these. Even if we decide to send a backup of the \u003cbr\\/\u003e\\ndatabase, it would still be simple to start log shipping at exactly \u003cbr\\/\u003e\\n\'i\', however. I see no reason for not using exactly \'i\'...\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt;&gt; 4. What will happen if the failover command is executed while the\u003cbr\\/\u003e\\n&gt;&gt;&gt;   master is alive and doing replication?  \u003cbr\\/\u003e\\n&gt;&gt; \u003cbr\\/\u003e\\n&gt;&gt; I can think of at least three alternatives: 1) stop the master,\u003cbr\\/\u003e\\n&gt;&gt; and make the old slave a normal Derby instance for the database.\u003cbr\\/\u003e\\n&gt;&gt; 2) not allow failover to be executed on a slave when the master\u003cbr\\/\u003e\\n&gt;&gt; is alive. 3) perform a \\\"switch\\\", i.e., make the old slave the new\u003cbr\\/\u003e\\n&gt;&gt; master, and the old master the new slave.\u003cbr\\/\u003e\\n&gt;&gt; \u003cbr\\/\u003e\\n&gt;&gt; For now, I think 1) is the best alternative to keep the amount of\u003cbr\\/\u003e\\n&gt;&gt; work down while alternative 3) would make a good extension\u003cbr\\/\u003e\\n&gt;&gt; candidate to the functionality.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;I assume the failover command is sent to the slave.  Both 1) and 3)  will then require some mechanism where the slave sends commands to the master.  If you want keep the work down, another alternative could be\u003cbr\\/\u003e\\n&gt;4) take down the connection to the master and perform failover. But maybe that creates a too high risk for inconsistencies since you may end up with two masters that both will serve clients.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;I think an important use-case is to be able to switch to another master during planned maintenance.  \u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;snip&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eGood point. This scenario should be added to the funcspec.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12514630_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514630_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 13:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T13:46:36+0000\'\u003e23\\/Jul\\/07 13:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;&gt; Regarding 3) - Processing on the master must be paused while the \\n&gt;&gt; following happens:  \\n&gt;&gt; * buffered log records and buffered data pages are forced to \\n&gt;&gt;   disk. Actually, forcing the data pages is not strictly \\n&gt;&gt;   necessary, but we might as well ship all write operations that \\n&gt;&gt;   have been performed to the slave. \\n&gt;&gt; * the entire database directory is sent to the slave (or copied \\n&gt;&gt;   to a backup location, from where it can be sent to the slave) \\n&gt;&gt; * the replication log buffer has been started and the logFactory \\n&gt;&gt;   has been informed to append log records to the buffer as well \\n&gt;&gt;   as to disk. \\n&gt; I would think the online backup mechanism has already solved some these issues.  Have you consider using an online backup to get a copy of the database and existing log? \\n\\n I had a brief look at backup a few weeks ago. If I remember \\ncorrectly, it does more or less the same as described above: It \\npauses the database while flushing data and log to disk, and \\ncopies the entire database directory to a backup location. \\nProcessing is not resumed until this copying has completed. \\nFunctionality to pause (freeze) the database  \\nis likely to be reused, and the strategy follows in the same steps as \\nbackup. \\n\\n From the adminguide, topic \\\"Online backups\\\": \\n\\\"The SYSCS_UTIL.SYSCS_BACKUP_DATABASE() procedure puts the database into a state in which it can be safely copied, then copies the entire original database directory (including data files, online transaction log files, and jar files) to the specified backup directory. Files that are not within the original database directory (for example, derby.properties) are not copied.\\\" \\n\\n If this is the mechanism you are referring to, we can use backup \\nto do the \\\"or copied to a backup location, from where it can be \\nsent to the slave\\\" part. That strategy will freeze the database \\nfor a shorter time iff the disk is faster than the network. On \\nthe other hand, it will require 2x diskspace and potentially much \\nmemory because log records will accumulate while the backed-up \\ndatabase is being sent to the slave.  \\n\\n If there is another, nonblocking backup mechanism that I don\'t know  \\nof, please refer me to it. If so, we may have to rework our plans. \\n\\n &gt;&gt; The reason for this is that the slave requires a copy of the \\n&gt;&gt; database that is exactly equal to that on the master when log \\n&gt;&gt; shipment starts. When we start sending log records to the slave, \\n&gt;&gt; we need to know that the slave has a database that includes all \\n&gt;&gt; log records up to a LogInstant \'i\'. The first log record that is \\n&gt;&gt; sent to the slave must be the one immediately following \'i\'. \\n&gt;&gt; Hence the pause. \\n\\n &gt; I do not understand why it needs to be exactly the same database.  Recovery already handles redo of log records that are already reflected in the database.  What harm would it make if you sent log records with LogInstant less than \'i\'? \\n\\n The problem is caused by us writing the log record to the slave \\nlog file  before  recovering it. \\n\\n Unfortunately (in this case), the LSN in \\nDerby (LogInstant) is the byte position where the log record \\nstarts in the log file. Since undo operations seem to identify \\ntheir respective do operations using the LogInstant (seems to me \\nto be \\\"hidden\\\" inside an undo log record\'s byte[] data), all log \\nrecords must be found exactly the same place in the master and \\nslave log files. Hence, duplicates of log records cannot exist on \\nfile without invalidating the LSNs.  \\n\\n We could, of course, start sending log records &lt; i, and let the \\nslave ignore these. Even if we decide to send a backup of the  \\ndatabase, it would still be simple to start log shipping at exactly  \\n\'i\', however. I see no reason for not using exactly \'i\'... \\n\\n &gt;&gt;&gt; 4. What will happen if the failover command is executed while the \\n&gt;&gt;&gt;   master is alive and doing replication?   \\n&gt;&gt;  \\n&gt;&gt; I can think of at least three alternatives: 1) stop the master, \\n&gt;&gt; and make the old slave a normal Derby instance for the database. \\n&gt;&gt; 2) not allow failover to be executed on a slave when the master \\n&gt;&gt; is alive. 3) perform a \\\"switch\\\", i.e., make the old slave the new \\n&gt;&gt; master, and the old master the new slave. \\n&gt;&gt;  \\n&gt;&gt; For now, I think 1) is the best alternative to keep the amount of \\n&gt;&gt; work down while alternative 3) would make a good extension \\n&gt;&gt; candidate to the functionality. \\n\\n &gt;I assume the failover command is sent to the slave.  Both 1) and 3)  will then require some mechanism where the slave sends commands to the master.  If you want keep the work down, another alternative could be \\n&gt;4) take down the connection to the master and perform failover. But maybe that creates a too high risk for inconsistencies since you may end up with two masters that both will serve clients. \\n\\n &gt;I think an important use-case is to be able to switch to another master during planned maintenance.   \\n\\n &lt;snip&gt; \\n\\n Good point. This scenario should be added to the funcspec.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514656\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514656&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514656\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514656_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514656_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 15:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T15:32:24+0000\'\u003e23\\/Jul\\/07 15:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Something like this? \u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; ij&gt; connect \'jdbc:derby:db;replicationslave;...\';\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; If so, I do not think we should add this connection attribute. The\u003cbr\\/\u003e\\n&gt; reason is that the replication idea is to prevent the slave from\u003cbr\\/\u003e\\n&gt; completing the database booting; it is supposed to stay in recovery\u003cbr\\/\u003e\\n&gt; and redo log records as they arrive until stop or failover is\u003cbr\\/\u003e\\n&gt; requested. Since the slave gets stuck in recovery, the statement\u003cbr\\/\u003e\\n&gt; above would never return a connection - it would just hang. As far\u003cbr\\/\u003e\\n&gt; as I know, this also means that the connection can not be used to\u003cbr\\/\u003e\\n&gt; stop replication or perform failover either.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe normal way to initiate recovery is to boot a database by opening a\u003cbr\\/\u003e\\nconnection to it.  Will you use another mechanism to boot a slave\u003cbr\\/\u003e\\ndatabase?\u003c\\/p\u003e\\n\\n\u003cp\u003eDoing a connect that boots the database and blocks until failover is\u003cbr\\/\u003e\\ndone, could be a useful mechanism for users who want to embed a slave\u003cbr\\/\u003e\\nin their own solution (instead of using the Derby network server).\u003cbr\\/\u003e\\nThen the return of this call, will indicate that connections may\u003cbr\\/\u003e\\nopened towards the database (it has become master).\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not sure that it is a problem that you will need to use other\u003cbr\\/\u003e\\nconnections to stop replication or perform failover.  That will be\u003cbr\\/\u003e\\nsimilar to how the network server is managed.  The command that start\u003cbr\\/\u003e\\nthe server blocks, and you will need to use other connections to\u003cbr\\/\u003e\\nmanage (e.g., stop) the server.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514656_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514656_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 15:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T15:32:24+0000\'\u003e23\\/Jul\\/07 15:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Something like this?  \\n&gt;  \\n&gt; ij&gt; connect \'jdbc:derby:db;replicationslave;...\'; \\n&gt;  \\n&gt; If so, I do not think we should add this connection attribute. The \\n&gt; reason is that the replication idea is to prevent the slave from \\n&gt; completing the database booting; it is supposed to stay in recovery \\n&gt; and redo log records as they arrive until stop or failover is \\n&gt; requested. Since the slave gets stuck in recovery, the statement \\n&gt; above would never return a connection - it would just hang. As far \\n&gt; as I know, this also means that the connection can not be used to \\n&gt; stop replication or perform failover either. \\n\\n The normal way to initiate recovery is to boot a database by opening a \\nconnection to it.  Will you use another mechanism to boot a slave \\ndatabase? \\n\\n Doing a connect that boots the database and blocks until failover is \\ndone, could be a useful mechanism for users who want to embed a slave \\nin their own solution (instead of using the Derby network server). \\nThen the return of this call, will indicate that connections may \\nopened towards the database (it has become master). \\n\\n I am not sure that it is a problem that you will need to use other \\nconnections to stop replication or perform failover.  That will be \\nsimilar to how the network server is managed.  The command that start \\nthe server blocks, and you will need to use other connections to \\nmanage (e.g., stop) the server.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514657\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514657&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514657\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514657_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514657_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 15:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T15:49:46+0000\'\u003e23\\/Jul\\/07 15:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJ\\u00F8rgen L\\u00F8land (JIRA) wrote:\u003cbr\\/\u003e\\n&gt; From the adminguide, topic \\\"Online backups\\\":\u003cbr\\/\u003e\\n&gt; \\\"The SYSCS_UTIL.SYSCS_BACKUP_DATABASE() procedure puts the database\u003cbr\\/\u003e\\n&gt; into a state in which it can be safely copied, then copies the\u003cbr\\/\u003e\\n&gt; entire original database directory (including data files, online\u003cbr\\/\u003e\\n&gt; transaction log files, and jar files) to the specified backup\u003cbr\\/\u003e\\n&gt; directory. Files that are not within the original database directory\u003cbr\\/\u003e\\n&gt; (for example, derby.properties) are not copied.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eThis citation is from the 10.1 version of the guide.  If you look at\u003cbr\\/\u003e\\nthe 10.2 guide, you will see that it has been changed and that the\u003cbr\\/\u003e\\nbackup is now non-blocking.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; \u003cbr\\/\u003e\\n&gt; If this is the mechanism you are referring to, we can use backup\u003cbr\\/\u003e\\n&gt; to do the \\\"or copied to a backup location, from where it can be\u003cbr\\/\u003e\\n&gt; sent to the slave\\\" part. That strategy will freeze the database\u003cbr\\/\u003e\\n&gt; for a shorter time iff the disk is faster than the network. On\u003cbr\\/\u003e\\n&gt; the other hand, it will require 2x diskspace and potentially much\u003cbr\\/\u003e\\n&gt; memory because log records will accumulate while the backed-up\u003cbr\\/\u003e\\n&gt; database is being sent to the slave. \u003c\\/p\u003e\\n\\n\u003cp\u003eIf you use the non-blocking backup mechanism, you will have to copy\u003cbr\\/\u003e\\nboth database and log files and you will probably want to delay\u003cbr\\/\u003e\\nswitching to replication of individual log records until the backup\u003cbr\\/\u003e\\nis completed.\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514657_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514657_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 15:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T15:49:46+0000\'\u003e23\\/Jul\\/07 15:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    J\\u00F8rgen L\\u00F8land (JIRA) wrote: \\n&gt; From the adminguide, topic \\\"Online backups\\\": \\n&gt; \\\"The SYSCS_UTIL.SYSCS_BACKUP_DATABASE() procedure puts the database \\n&gt; into a state in which it can be safely copied, then copies the \\n&gt; entire original database directory (including data files, online \\n&gt; transaction log files, and jar files) to the specified backup \\n&gt; directory. Files that are not within the original database directory \\n&gt; (for example, derby.properties) are not copied.\\\" \\n\\n This citation is from the 10.1 version of the guide.  If you look at \\nthe 10.2 guide, you will see that it has been changed and that the \\nbackup is now non-blocking. \\n\\n &gt;  \\n&gt; If this is the mechanism you are referring to, we can use backup \\n&gt; to do the \\\"or copied to a backup location, from where it can be \\n&gt; sent to the slave\\\" part. That strategy will freeze the database \\n&gt; for a shorter time iff the disk is faster than the network. On \\n&gt; the other hand, it will require 2x diskspace and potentially much \\n&gt; memory because log records will accumulate while the backed-up \\n&gt; database is being sent to the slave.  \\n\\n If you use the non-blocking backup mechanism, you will have to copy \\nboth database and log files and you will probably want to delay \\nswitching to replication of individual log records until the backup \\nis completed. \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514661\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514661&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514661\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514661_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514661_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 16:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T16:10:26+0000\'\u003e23\\/Jul\\/07 16:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJ\\u00F8rgen L\\u00F8land (JIRA) wrote:\u003cbr\\/\u003e\\n&gt;&gt; I do not understand why it needs to be exactly the same database.\u003cbr\\/\u003e\\n&gt;&gt; Recovery already handles redo of log records that are already\u003cbr\\/\u003e\\n&gt;&gt; reflected in the database.  What harm would it make if you sent log\u003cbr\\/\u003e\\n&gt;&gt; records with LogInstant less than \'i\'?\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; The problem is caused by us writing the log record to the slave\u003cbr\\/\u003e\\n&gt; log file \u003cb\u003ebefore\u003c\\/b\u003e recovering it.\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; Unfortunately (in this case), the LSN in\u003cbr\\/\u003e\\n&gt; Derby (LogInstant) is the byte position where the log record\u003cbr\\/\u003e\\n&gt; starts in the log file. Since undo operations seem to identify\u003cbr\\/\u003e\\n&gt; their respective do operations using the LogInstant (seems to me\u003cbr\\/\u003e\\n&gt; to be \\\"hidden\\\" inside an undo log record\'s byte[] data), all log\u003cbr\\/\u003e\\n&gt; records must be found exactly the same place in the master and\u003cbr\\/\u003e\\n&gt; slave log files. Hence, duplicates of log records cannot exist on\u003cbr\\/\u003e\\n&gt; file without invalidating the LSNs. \u003c\\/p\u003e\\n\\n\u003cp\u003eI do not understand what avoiding duplicate log records has to do with\u003cbr\\/\u003e\\nrequiring a specific state of the database.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith respect to having log records appear in the same place in the log\u003cbr\\/\u003e\\nfiles, you could consider forcing a log file switch on the master\u003cbr\\/\u003e\\nbefore sending the first log record.  Then, the first log record will\u003cbr\\/\u003e\\nbe at the start of a log file both on the master and the slave.  Could\u003cbr\\/\u003e\\nthat simplify things?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; We could, of course, start sending log records &lt; i, and let the\u003cbr\\/\u003e\\n&gt; slave ignore these. Even if we decide to send a backup of the \u003cbr\\/\u003e\\n&gt; database, it would still be simple to start log shipping at exactly \u003cbr\\/\u003e\\n&gt; \'i\', however. I see no reason for not using exactly \'i\'...\u003c\\/p\u003e\\n\\n\u003cp\u003eI think you said that one reason for the starting of replication to be\u003cbr\\/\u003e\\nblocking was that you needed to identify a specific log record \'i\'.\u003cbr\\/\u003e\\nIn other words, if you did not need to identify \'i\', there would be\u003cbr\\/\u003e\\none less reason to make the start of the replication be blocking.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514661_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514661_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 16:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T16:10:26+0000\'\u003e23\\/Jul\\/07 16:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    J\\u00F8rgen L\\u00F8land (JIRA) wrote: \\n&gt;&gt; I do not understand why it needs to be exactly the same database. \\n&gt;&gt; Recovery already handles redo of log records that are already \\n&gt;&gt; reflected in the database.  What harm would it make if you sent log \\n&gt;&gt; records with LogInstant less than \'i\'? \\n&gt;  \\n&gt; The problem is caused by us writing the log record to the slave \\n&gt; log file  before  recovering it. \\n&gt;  \\n&gt; Unfortunately (in this case), the LSN in \\n&gt; Derby (LogInstant) is the byte position where the log record \\n&gt; starts in the log file. Since undo operations seem to identify \\n&gt; their respective do operations using the LogInstant (seems to me \\n&gt; to be \\\"hidden\\\" inside an undo log record\'s byte[] data), all log \\n&gt; records must be found exactly the same place in the master and \\n&gt; slave log files. Hence, duplicates of log records cannot exist on \\n&gt; file without invalidating the LSNs.  \\n\\n I do not understand what avoiding duplicate log records has to do with \\nrequiring a specific state of the database. \\n\\n With respect to having log records appear in the same place in the log \\nfiles, you could consider forcing a log file switch on the master \\nbefore sending the first log record.  Then, the first log record will \\nbe at the start of a log file both on the master and the slave.  Could \\nthat simplify things? \\n\\n &gt; We could, of course, start sending log records &lt; i, and let the \\n&gt; slave ignore these. Even if we decide to send a backup of the  \\n&gt; database, it would still be simple to start log shipping at exactly  \\n&gt; \'i\', however. I see no reason for not using exactly \'i\'... \\n\\n I think you said that one reason for the starting of replication to be \\nblocking was that you needed to identify a specific log record \'i\'. \\nIn other words, if you did not need to identify \'i\', there would be \\none less reason to make the start of the replication be blocking. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514669\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514669&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514669\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514669_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514669_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 16:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T16:26:29+0000\'\u003e23\\/Jul\\/07 16:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnother issue to think about:\u003c\\/p\u003e\\n\\n\u003cp\u003eIf an transaction has been open since before replication was started, a\u003cbr\\/\u003e\\nslave may need log from before log shipping started to be able to undo\u003cbr\\/\u003e\\nthe transaction at failover time.  In order to be sure that failover\u003cbr\\/\u003e\\nwill succeed, I think there are two alternatives:\u003cbr\\/\u003e\\n 1) Let the master abort\\/rollback such transactions before it\u003cbr\\/\u003e\\n    acknowledges that replication has started.\u003cbr\\/\u003e\\n 2) Send old log records to the slave to make sure it has all\u003cbr\\/\u003e\\n    necessary log to do failover.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think the approach of non-blocking backup is similar to alternative\u003cbr\\/\u003e\\n2). That is, it copies all log files that may be necessary in order to\u003cbr\\/\u003e\\nperform undo at restore.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514669_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514669_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jul\\/07 16:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-23T16:26:29+0000\'\u003e23\\/Jul\\/07 16:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Another issue to think about: \\n\\n If an transaction has been open since before replication was started, a \\nslave may need log from before log shipping started to be able to undo \\nthe transaction at failover time.  In order to be sure that failover \\nwill succeed, I think there are two alternatives: \\n 1) Let the master abort\\/rollback such transactions before it \\n    acknowledges that replication has started. \\n 2) Send old log records to the slave to make sure it has all \\n    necessary log to do failover. \\n\\n I think the approach of non-blocking backup is similar to alternative \\n2). That is, it copies all log files that may be necessary in order to \\nperform undo at restore.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514907\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514907&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514907\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12514907_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514907_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jul\\/07 08:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-24T08:09:36+0000\'\u003e24\\/Jul\\/07 08:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;Doing a connect that boots the database and blocks until failover is\u003cbr\\/\u003e\\n&gt;done, could be a useful mechanism for users who want to embed a slave\u003cbr\\/\u003e\\n&gt;in their own solution (instead of using the Derby network server).\u003cbr\\/\u003e\\n&gt;Then the return of this call, will indicate that connections may\u003cbr\\/\u003e\\n&gt;opened towards the database (it has become master).\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;I am not sure that it is a problem that you will need to use other\u003cbr\\/\u003e\\n&gt;connections to stop replication or perform failover. That will be\u003cbr\\/\u003e\\n&gt;similar to how the network server is managed. The command that start\u003cbr\\/\u003e\\n&gt;the server blocks, and you will need to use other connections to\u003cbr\\/\u003e\\n&gt;manage (e.g., stop) the server.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe use case pointed out here seems very valid and qualifies as good\u003cbr\\/\u003e\\nenough for this startup mechanism. At first look this seems very doable.\u003c\\/p\u003e\\n\\n\u003cp\u003eI was trying to imagine what would be the changes we would need to do\u003cbr\\/\u003e\\nto the replication mechanism to accomodate this. I guess there wouldn\'t\u003cbr\\/\u003e\\nbe anything other than being able to start the basic replication functionality\u003cbr\\/\u003e\\nupon doing a connect with the replicatino attribute set.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;If you use the non-blocking backup mechanism, you will have to copy\u003cbr\\/\u003e\\n&gt;both database and log files and you will probably want to delay\u003cbr\\/\u003e\\n&gt;switching to replication of individual log records until the backup\u003cbr\\/\u003e\\n&gt;is completed.\u003c\\/p\u003e\\n\\n\u003cp\u003eSwitching between two different messages sent across the network seems\u003cbr\\/\u003e\\nlike additional complication which we can avoid if we do not use online\u003cbr\\/\u003e\\nbackup. But then there is the additional complexity of handling unlogged\u003cbr\\/\u003e\\noperation which online backup has already solved.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am undecided about this, I even tried to imagine how much switching\u003cbr\\/\u003e\\nbetween using single log records and using a log buffer would complicate\u003cbr\\/\u003e\\nthe Network code, but the overhead is not much.\u003c\\/p\u003e\\n\\n\u003cp\u003eWould the requirement of 2x space qualify not using online backup?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;With respect to having log records appear in the same place in the log\u003cbr\\/\u003e\\n&gt;files, you could consider forcing a log file switch on the master\u003cbr\\/\u003e\\n&gt;before sending the first log record. Then, the first log record will\u003cbr\\/\u003e\\n&gt;be at the start of a log file both on the master and the slave. Could\u003cbr\\/\u003e\\n&gt;that simplify things?\u003c\\/p\u003e\\n\\n\u003cp\u003eI the comments above a case has been pointed out\u003c\\/p\u003e\\n\\n\u003cp\u003e\\\"If an transaction has been open since before replication was started, a\u003cbr\\/\u003e\\nslave may need log from before log shipping started to be able to undo\u003cbr\\/\u003e\\nthe transaction at failover time.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eWould it be easy in this case too? How would the switching happen in this\u003cbr\\/\u003e\\ncase?\u003c\\/p\u003e\\n\\n\u003cp\u003eI will have to dig deeper here, I do not have an answer for this now.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;If an transaction has been open since before replication was started, a\u003cbr\\/\u003e\\n&gt;slave may need log from before log shipping started to be able to undo\u003cbr\\/\u003e\\n&gt;the transaction at failover time. In order to be sure that failover\u003cbr\\/\u003e\\n&gt;will succeed, I think there are two alternatives:\u003cbr\\/\u003e\\n&gt;2) Send old log records to the slave to make sure it has all\u003cbr\\/\u003e\\n&gt;    necessary log to do failover.\u003cbr\\/\u003e\\nI agree with 2) and think it is the right approach.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12514907_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514907_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jul\\/07 08:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-24T08:09:36+0000\'\u003e24\\/Jul\\/07 08:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;Doing a connect that boots the database and blocks until failover is \\n&gt;done, could be a useful mechanism for users who want to embed a slave \\n&gt;in their own solution (instead of using the Derby network server). \\n&gt;Then the return of this call, will indicate that connections may \\n&gt;opened towards the database (it has become master). \\n\\n &gt;I am not sure that it is a problem that you will need to use other \\n&gt;connections to stop replication or perform failover. That will be \\n&gt;similar to how the network server is managed. The command that start \\n&gt;the server blocks, and you will need to use other connections to \\n&gt;manage (e.g., stop) the server. \\n\\n The use case pointed out here seems very valid and qualifies as good \\nenough for this startup mechanism. At first look this seems very doable. \\n\\n I was trying to imagine what would be the changes we would need to do \\nto the replication mechanism to accomodate this. I guess there wouldn\'t \\nbe anything other than being able to start the basic replication functionality \\nupon doing a connect with the replicatino attribute set. \\n\\n &gt;If you use the non-blocking backup mechanism, you will have to copy \\n&gt;both database and log files and you will probably want to delay \\n&gt;switching to replication of individual log records until the backup \\n&gt;is completed. \\n\\n Switching between two different messages sent across the network seems \\nlike additional complication which we can avoid if we do not use online \\nbackup. But then there is the additional complexity of handling unlogged \\noperation which online backup has already solved. \\n\\n I am undecided about this, I even tried to imagine how much switching \\nbetween using single log records and using a log buffer would complicate \\nthe Network code, but the overhead is not much. \\n\\n Would the requirement of 2x space qualify not using online backup? \\n\\n &gt;With respect to having log records appear in the same place in the log \\n&gt;files, you could consider forcing a log file switch on the master \\n&gt;before sending the first log record. Then, the first log record will \\n&gt;be at the start of a log file both on the master and the slave. Could \\n&gt;that simplify things? \\n\\n I the comments above a case has been pointed out \\n\\n \\\"If an transaction has been open since before replication was started, a \\nslave may need log from before log shipping started to be able to undo \\nthe transaction at failover time.\\\" \\n\\n Would it be easy in this case too? How would the switching happen in this \\ncase? \\n\\n I will have to dig deeper here, I do not have an answer for this now. \\n\\n &gt;If an transaction has been open since before replication was started, a \\n&gt;slave may need log from before log shipping started to be able to undo \\n&gt;the transaction at failover time. In order to be sure that failover \\n&gt;will succeed, I think there are two alternatives: \\n&gt;2) Send old log records to the slave to make sure it has all \\n&gt;    necessary log to do failover. \\nI agree with 2) and think it is the right approach.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514921\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514921&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514921\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514921_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514921_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jul\\/07 08:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-24T08:58:39+0000\'\u003e24\\/Jul\\/07 08:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eV.Narayanan (JIRA) wrote:\u003cbr\\/\u003e\\n&gt;&gt; If you use the non-blocking backup mechanism, you will have to copy\u003cbr\\/\u003e\\n&gt;&gt; both database and log files and you will probably want to delay\u003cbr\\/\u003e\\n&gt;&gt; switching to replication of individual log records until the backup\u003cbr\\/\u003e\\n&gt;&gt; is completed.\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; Switching between two different messages sent across the network seems\u003cbr\\/\u003e\\n&gt; like additional complication which we can avoid if we do not use online\u003cbr\\/\u003e\\n&gt; backup. But then there is the additional complexity of handling unlogged\u003cbr\\/\u003e\\n&gt; operation which online backup has already solved.\u003c\\/p\u003e\\n\\n\u003cp\u003eMy thouhgt was that you could use the same mechanism to send both data files and log files from the backup. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Would the requirement of 2x space qualify not using online backup?\u003c\\/p\u003e\\n\\n\u003cp\u003eI do not think so. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I the comments above a case has been pointed out\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; \\\"If an transaction has been open since before replication was started, a\u003cbr\\/\u003e\\n&gt; slave may need log from before log shipping started to be able to undo\u003cbr\\/\u003e\\n&gt; the transaction at failover time.\\\"\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; Would it be easy in this case too? How would the switching happen in this\u003cbr\\/\u003e\\n&gt; case?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe switch will be the point where you switch from sending log files to sending individual log records.  The issue about old transaction only affects how old log files you need to send, not when to switch.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514921_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514921_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jul\\/07 08:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-24T08:58:39+0000\'\u003e24\\/Jul\\/07 08:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    V.Narayanan (JIRA) wrote: \\n&gt;&gt; If you use the non-blocking backup mechanism, you will have to copy \\n&gt;&gt; both database and log files and you will probably want to delay \\n&gt;&gt; switching to replication of individual log records until the backup \\n&gt;&gt; is completed. \\n&gt;  \\n&gt; Switching between two different messages sent across the network seems \\n&gt; like additional complication which we can avoid if we do not use online \\n&gt; backup. But then there is the additional complexity of handling unlogged \\n&gt; operation which online backup has already solved. \\n\\n My thouhgt was that you could use the same mechanism to send both data files and log files from the backup.  \\n\\n &gt; Would the requirement of 2x space qualify not using online backup? \\n\\n I do not think so.  \\n\\n &gt; I the comments above a case has been pointed out \\n&gt;  \\n&gt; \\\"If an transaction has been open since before replication was started, a \\n&gt; slave may need log from before log shipping started to be able to undo \\n&gt; the transaction at failover time.\\\" \\n&gt;  \\n&gt; Would it be easy in this case too? How would the switching happen in this \\n&gt; case? \\n\\n The switch will be the point where you switch from sending log files to sending individual log records.  The issue about old transaction only affects how old log files you need to send, not when to switch. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514927\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514927&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514927\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514927_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514927_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jul\\/07 09:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-24T09:10:54+0000\'\u003e24\\/Jul\\/07 09:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDerby allows a user to specify that the log file directory are to be placed in a separate directory from the database directory.  How will you handle that when you create the slave database?  It is probably OK to say that in the first version it is not possible store the log separately from the database.  Whatever you decide, it would be nice if your decision is reflected in the func spec.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"oysteing\\\" id=\\\"commentauthor_12514927_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=oysteing\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"oysteing\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e \\u00D8ystein Gr\\u00F8vlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514927_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jul\\/07 09:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-24T09:10:54+0000\'\u003e24\\/Jul\\/07 09:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Derby allows a user to specify that the log file directory are to be placed in a separate directory from the database directory.  How will you handle that when you create the slave database?  It is probably OK to say that in the first version it is not possible store the log separately from the database.  Whatever you decide, it would be nice if your decision is reflected in the func spec.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12514942\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12514942&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12514942\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12514942_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514942_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jul\\/07 11:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-24T11:29:17+0000\'\u003e24\\/Jul\\/07 11:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;&gt; From the adminguide, topic \\\"Online backups\\\":\u003cbr\\/\u003e\\n&gt; &lt;snip&gt;\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt;This citation is from the 10.1 version of the guide.  If you look at\u003cbr\\/\u003e\\n&gt;the 10.2 guide, you will see that it has been changed and that the\u003cbr\\/\u003e\\n&gt;backup is now non-blocking.\u003c\\/p\u003e\\n\\n\u003cp\u003eActually, that was from the 10.2 documentation. I also checked the alpha manuals, and could not find anything about non-blocking. However, that does not change the fact that backup IS performed non-blocking (searching the web revealed a few presentations stating so). \u003c\\/p\u003e\\n\\n\u003cp\u003eSince I was not previously aware of non-blocking backup, some adjustments will probably be made to our development plan and the funcspec. More precisely, it would be great if non-blocking online backup would provide us the tool to avoid freezing the database. I also agree that it should not be necessary to freeze the database only to start at the correct log instant \'i\'.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;Another issue to think about:\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt;If an transaction has been open since before replication was started, a\u003cbr\\/\u003e\\n&gt;slave may need log from before log shipping started to be able to undo\u003cbr\\/\u003e\\n&gt;the transaction at failover time.  In order to be sure that failover\u003cbr\\/\u003e\\n&gt;will succeed, I think there are two alternatives:\u003cbr\\/\u003e\\n&gt; 1) Let the master abort\\/rollback such transactions before it\u003cbr\\/\u003e\\n&gt;    acknowledges that replication has started.\u003cbr\\/\u003e\\n&gt; 2) Send old log records to the slave to make sure it has all\u003cbr\\/\u003e\\n&gt;    necessary log to do failover.\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt;I think the approach of non-blocking backup is similar to alternative\u003cbr\\/\u003e\\n&gt;2). That is, it copies all log files that may be necessary in order to\u003cbr\\/\u003e\\n&gt;perform undo at restore.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have not had the time to figure out how non-blocking backup works, but a shot in the dark would be that it works in a similar way as fuzzy checkpointing. As you say, the non-blocking backup mechanism has to ensure a solution to this problem. Using the same solution is probably a good thing.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith this new information, I think the revised plan will be something like this:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) A Derby is informed that it will become master for db \'x\'. \u003cbr\\/\u003e\\n2) The master starts making an online, non-blocking backup. The location of this backup may be disk or even sent over the network to the slave. This has not been decided.\u003cbr\\/\u003e\\n3) Online backup completes. From this point on, all operations are logged both to disk and to the replication buffer. \u003cbr\\/\u003e\\n4) If the backup location was disk, the entire backup is sent to the slave. The disk-version can then be deleted.\u003cbr\\/\u003e\\n5) When the backup has been sent to the slave, the master starts sending log from the log buffer. Once the slave has received enough log to be \\\"up to date\\\" (depends on how tightly synchronized the master and slave is), repliation is reported to have started. Since we are currently working on asynchronous replication, we can report that replication has started when we start shipping buffered log records.\u003c\\/p\u003e\\n\\n\u003cp\u003eNote that this does not require any database freeze as long as backup can be performed without freeze.\u003c\\/p\u003e\\n\\n\u003cp\u003ePros and cons versus the previous plan:\u003cbr\\/\u003e\\n+ Non-blocking\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eRequires 2x diskspace during steps 2-4\u003c\\/li\u003e\\n\\t\u003cli\u003eRequires more memory from step 3 to the point where the slave has caught up with the master.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12514942_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12514942_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jul\\/07 11:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-07-24T11:29:17+0000\'\u003e24\\/Jul\\/07 11:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;&gt; From the adminguide, topic \\\"Online backups\\\": \\n&gt; &lt;snip&gt; \\n&gt; \\n&gt;This citation is from the 10.1 version of the guide.  If you look at \\n&gt;the 10.2 guide, you will see that it has been changed and that the \\n&gt;backup is now non-blocking. \\n\\n Actually, that was from the 10.2 documentation. I also checked the alpha manuals, and could not find anything about non-blocking. However, that does not change the fact that backup IS performed non-blocking (searching the web revealed a few presentations stating so).  \\n\\n Since I was not previously aware of non-blocking backup, some adjustments will probably be made to our development plan and the funcspec. More precisely, it would be great if non-blocking online backup would provide us the tool to avoid freezing the database. I also agree that it should not be necessary to freeze the database only to start at the correct log instant \'i\'. \\n\\n &gt;Another issue to think about: \\n&gt; \\n&gt;If an transaction has been open since before replication was started, a \\n&gt;slave may need log from before log shipping started to be able to undo \\n&gt;the transaction at failover time.  In order to be sure that failover \\n&gt;will succeed, I think there are two alternatives: \\n&gt; 1) Let the master abort\\/rollback such transactions before it \\n&gt;    acknowledges that replication has started. \\n&gt; 2) Send old log records to the slave to make sure it has all \\n&gt;    necessary log to do failover. \\n&gt; \\n&gt;I think the approach of non-blocking backup is similar to alternative \\n&gt;2). That is, it copies all log files that may be necessary in order to \\n&gt;perform undo at restore. \\n\\n I have not had the time to figure out how non-blocking backup works, but a shot in the dark would be that it works in a similar way as fuzzy checkpointing. As you say, the non-blocking backup mechanism has to ensure a solution to this problem. Using the same solution is probably a good thing. \\n\\n With this new information, I think the revised plan will be something like this: \\n\\n 1) A Derby is informed that it will become master for db \'x\'.  \\n2) The master starts making an online, non-blocking backup. The location of this backup may be disk or even sent over the network to the slave. This has not been decided. \\n3) Online backup completes. From this point on, all operations are logged both to disk and to the replication buffer.  \\n4) If the backup location was disk, the entire backup is sent to the slave. The disk-version can then be deleted. \\n5) When the backup has been sent to the slave, the master starts sending log from the log buffer. Once the slave has received enough log to be \\\"up to date\\\" (depends on how tightly synchronized the master and slave is), repliation is reported to have started. Since we are currently working on asynchronous replication, we can report that replication has started when we start shipping buffered log records. \\n\\n Note that this does not require any database freeze as long as backup can be performed without freeze. \\n\\n Pros and cons versus the previous plan: \\n+ Non-blocking \\n \\n\\t Requires 2x diskspace during steps 2-4 \\n\\t Requires more memory from step 3 to the point where the slave has caught up with the master. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12520644\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12520644&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12520644\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12520644_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12520644_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/07 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-17T19:05:55+0000\'\u003e17\\/Aug\\/07 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am attaching a new version of the functional spec that contains\u003cbr\\/\u003e\\nthe following changes\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eModified the new commands added to NetworkServerControl to match the\u003cbr\\/\u003e\\n      existing pattern\u003c\\/li\u003e\\n\\t\u003cli\u003eAdded pre-conditions to each of the NetworkServerControl commands.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI have incorporated here feedback I received from Dag and Oystein.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have further received feedback on the handling of Upgrade which\u003cbr\\/\u003e\\nI shall update in the functional specification and submit in a subsequent\u003cbr\\/\u003e\\nrevision.\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12520644_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12520644_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/07 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-08-17T19:05:55+0000\'\u003e17\\/Aug\\/07 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am attaching a new version of the functional spec that contains \\nthe following changes \\n\\n \\n\\t Modified the new commands added to NetworkServerControl to match the \\n      existing pattern \\n\\t Added pre-conditions to each of the NetworkServerControl commands. \\n \\n\\n\\n I have incorporated here feedback I received from Dag and Oystein. \\n\\n I have further received feedback on the handling of Upgrade which \\nI shall update in the functional specification and submit in a subsequent \\nrevision. \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12524652\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12524652&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12524652\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"olesolberg\\\" id=\\\"commentauthor_12524652_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=olesolberg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"olesolberg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ole Solberg\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12524652_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Sep\\/07 09:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-04T09:52:15+0000\'\u003e04\\/Sep\\/07 09:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have a few comments to the\u003c\\/p\u003e\\n\\n\u003cp\u003eFunctional Specification for Derby Replication - rev. 4.0 - table in \\\"Interacting with the replication feature\\\":\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e1) As I understand it \'Start Master\' is only allowed on the host which will serve as master, \u003cbr\\/\u003e\\nand \'Start Slave\' is only allowed on the host to serve as slave, \u003cbr\\/\u003e\\nthus the I think the \\\"operation field\\\" in the table should state this (as for \'Failover\' and \'Stop Replication\').\u003c\\/p\u003e\\n\\n\u003cp\u003e2) I think the \\\"pre-conditions\\\" field should say something like \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\'Start Master\':\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eA database with the name &lt;dbname&gt; must exist on the (master) host where\u003cbr\\/\u003e\\n     this command is issued. \u003cbr\\/\u003e\\n     (was: \'Restricted to the same machine that the database resides.\')\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\\t\u003cli\u003e\'Start Slave\':\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eThe (slave) host, where this command is issued,\u003cbr\\/\u003e\\n     must not already be serving a database named &lt;dbname&gt; as slave. \u003cbr\\/\u003e\\n     (was: \'Restricted to the same machine that the database resides.\')\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\\t\u003cli\u003e\'Failover\':\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eThe (slave) host, where this command is issued,\u003cbr\\/\u003e\\n     must be serving a database named &lt;dbname&gt; as slave.\u003cbr\\/\u003e\\n     (was: \'Restricted to the same machine that the database resides.\')\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\\t\u003cli\u003e\'Stop Replication\':\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eThe (master) host, where this command is issued,\u003cbr\\/\u003e\\n     must be serving a database named &lt;dbname&gt; as master.\u003cbr\\/\u003e\\n     (was: \'Can be issued only on the master and the master in turn ...\u003cbr\\/\u003e\\n      ... the slave is shut down as well\')\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003eThe current text in \'Stop Replication\'\\/\\\"pre-conditions\\\" is, I think, rather part of \u003cbr\\/\u003e\\nthe functional specification of the command and should be put elsewhere? e.g. \u003cbr\\/\u003e\\nin a subchapter giving more details on \'Stop Replication\'?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"olesolberg\\\" id=\\\"commentauthor_12524652_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=olesolberg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"olesolberg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ole Solberg\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12524652_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Sep\\/07 09:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-04T09:52:15+0000\'\u003e04\\/Sep\\/07 09:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have a few comments to the \\n\\n Functional Specification for Derby Replication - rev. 4.0 - table in \\\"Interacting with the replication feature\\\": \\n\\n\\n 1) As I understand it \'Start Master\' is only allowed on the host which will serve as master,  \\nand \'Start Slave\' is only allowed on the host to serve as slave,  \\nthus the I think the \\\"operation field\\\" in the table should state this (as for \'Failover\' and \'Stop Replication\'). \\n\\n 2) I think the \\\"pre-conditions\\\" field should say something like  \\n \\n\\t \'Start Master\':\\n\\t \\n\\t\\t A database with the name &lt;dbname&gt; must exist on the (master) host where \\n     this command is issued.  \\n     (was: \'Restricted to the same machine that the database resides.\') \\n\\t \\n\\t \\n\\t \'Start Slave\':\\n\\t \\n\\t\\t The (slave) host, where this command is issued, \\n     must not already be serving a database named &lt;dbname&gt; as slave.  \\n     (was: \'Restricted to the same machine that the database resides.\') \\n\\t \\n\\t \\n\\t \'Failover\':\\n\\t \\n\\t\\t The (slave) host, where this command is issued, \\n     must be serving a database named &lt;dbname&gt; as slave. \\n     (was: \'Restricted to the same machine that the database resides.\') \\n\\t \\n\\t \\n\\t \'Stop Replication\':\\n\\t \\n\\t\\t The (master) host, where this command is issued, \\n     must be serving a database named &lt;dbname&gt; as master. \\n     (was: \'Can be issued only on the master and the master in turn ... \\n      ... the slave is shut down as well\') \\n\\t \\n\\t \\n \\n\\n\\n\\n The current text in \'Stop Replication\'\\/\\\"pre-conditions\\\" is, I think, rather part of  \\nthe functional specification of the command and should be put elsewhere? e.g.  \\nin a subchapter giving more details on \'Stop Replication\'? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12524714\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12524714&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12524714\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12524714_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12524714_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Sep\\/07 12:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-04T12:55:35+0000\'\u003e04\\/Sep\\/07 12:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOle,\u003c\\/p\u003e\\n\\n\u003cp\u003ethank you for reviewing the func spec.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m attaching a new version, v5,  of the functional specification that incorporates the feedback. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12524714_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12524714_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Sep\\/07 12:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-04T12:55:35+0000\'\u003e04\\/Sep\\/07 12:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ole, \\n\\n thank you for reviewing the func spec. \\n\\n I\'m attaching a new version, v5,  of the functional specification that incorporates the feedback.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12526441\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12526441&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12526441\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12526441_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12526441_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Sep\\/07 12:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-11T12:19:30+0000\'\u003e11\\/Sep\\/07 12:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a class diagram, master_classes_1.pdf, illustrating the interfaces and classes used in replication master mode. The diagram is not 100% accurate (details left out), so it should only be used to get an overview of the replication design.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12526441_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12526441_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Sep\\/07 12:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-11T12:19:30+0000\'\u003e11\\/Sep\\/07 12:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a class diagram, master_classes_1.pdf, illustrating the interfaces and classes used in replication master mode. The diagram is not 100% accurate (details left out), so it should only be used to get an overview of the replication design.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12526454\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12526454&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12526454\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12526454_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12526454_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Sep\\/07 13:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-11T13:35:03+0000\'\u003e11\\/Sep\\/07 13:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached slave_classes_1.pdf, a class diagram for the slave instance with similar limitations (lack of detail) as the master diagram. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12526454_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12526454_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Sep\\/07 13:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-11T13:35:03+0000\'\u003e11\\/Sep\\/07 13:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached slave_classes_1.pdf, a class diagram for the slave instance with similar limitations (lack of detail) as the master diagram.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12529804\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12529804&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12529804\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12529804_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529804_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Sep\\/07 08:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-24T08:54:39+0000\'\u003e24\\/Sep\\/07 08:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching new proof of concept patches for the replication functionality. These use the replication patches committed so far (current revision: 578099)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12529804_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12529804_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Sep\\/07 08:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-24T08:54:39+0000\'\u003e24\\/Sep\\/07 08:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching new proof of concept patches for the replication functionality. These use the replication patches committed so far (current revision: 578099)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12530965\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12530965&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12530965\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12530965_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530965_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Sep\\/07 09:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-28T09:57:20+0000\'\u003e28\\/Sep\\/07 09:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eWant to take the new Derby Asynchronous Replication Feature for a spin? ***\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThe newly attached proof of concept code, poc_\u003c\\/p\u003e\\n{master|slave}\\n\u003cp\u003e_v2b.diff can now be tested by anyone interested. Read the attached howto for instructions. Note: we are far from done with this,  but the current poc seems to work. Good luck \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12530965_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12530965_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Sep\\/07 09:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-09-28T09:57:20+0000\'\u003e28\\/Sep\\/07 09:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t Want to take the new Derby Asynchronous Replication Feature for a spin? *** \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n The newly attached proof of concept code, poc_ \\n{master|slave}\\n _v2b.diff can now be tested by anyone interested. Read the attached howto for instructions. Note: we are far from done with this,  but the current poc seems to work. Good luck                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12532591\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12532591&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12532591\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"olesolberg\\\" id=\\\"commentauthor_12532591_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=olesolberg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"olesolberg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ole Solberg\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532591_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Oct\\/07 08:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-05T08:11:10+0000\'\u003e05\\/Oct\\/07 08:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ole Solberg - 05\\/Oct\\/07 08:13\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have experimented with the \'proof-of-concept_v2b\' code running several derby tests (ij and junit) as \\\"load\\\" against the master server.\u003cbr\\/\u003e\\nWhen running the ....tests.derbynet.PrepareStatementTest I get a \'.Something wrong with the instants!\' message and the slave server dies:\u003c\\/p\u003e\\n\\n\u003cp\u003e.\u003cbr\\/\u003e\\n.\u003cbr\\/\u003e\\nrunUserCommand runUserCommandRemotely runTest   testBasicPrepare used 340 ms .\u003cbr\\/\u003e\\nstartServer@atum02:4527 pDoR ..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n..........................................................................................................................................................................................................\\\\\u003cbr\\/\u003e\\n.................................................................Something wrong with the instants!\u003cbr\\/\u003e\\nstartServer@atum02:4527 pDoR (RPlR) Log instant:          2, 410117\u003cbr\\/\u003e\\nstartServer@atum02:4527 pDoR (RPlR) ... returned instant: 2, 311861\u003cbr\\/\u003e\\nstartServer@atum02:4527 pDoR (RPlR) ... diff:             98256\u003cbr\\/\u003e\\nstartServer@atum02:4527 pDoR \u003cbr\\/\u003e\\nstartServer@atum02:4527 pDoR - - - - - - next log record - - - - - -\u003cbr\\/\u003e\\n.\u003cbr\\/\u003e\\n.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"olesolberg\\\" id=\\\"commentauthor_12532591_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=olesolberg\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"olesolberg\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ole Solberg\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532591_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Oct\\/07 08:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-05T08:11:10+0000\'\u003e05\\/Oct\\/07 08:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ole Solberg - 05\\/Oct\\/07 08:13\\\"\u003eedited\u003c\\/span\u003e                   I have experimented with the \'proof-of-concept_v2b\' code running several derby tests (ij and junit) as \\\"load\\\" against the master server. \\nWhen running the ....tests.derbynet.PrepareStatementTest I get a \'.Something wrong with the instants!\' message and the slave server dies: \\n\\n . \\n. \\nrunUserCommand runUserCommandRemotely runTest   testBasicPrepare used 340 ms . \\nstartServer@atum02:4527 pDoR ..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n..........................................................................................................................................................................................................\\\\ \\n.................................................................Something wrong with the instants! \\nstartServer@atum02:4527 pDoR (RPlR) Log instant:          2, 410117 \\nstartServer@atum02:4527 pDoR (RPlR) ... returned instant: 2, 311861 \\nstartServer@atum02:4527 pDoR (RPlR) ... diff:             98256 \\nstartServer@atum02:4527 pDoR  \\nstartServer@atum02:4527 pDoR - - - - - - next log record - - - - - - \\n. \\n.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12532755\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12532755&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12532755\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12532755_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532755_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Oct\\/07 19:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-05T19:25:42+0000\'\u003e05\\/Oct\\/07 19:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you for testing this, Ole. I guess you\'ll find many odd errors if you try to test this...\u003c\\/p\u003e\\n\\n\u003cp\u003e\\\"Something wrong with the instants\\\" is one of the error messages I added as part of the prototype code. It indicates that the log instant (log file + offset) is not the same on the master and slave, either because the log file sizes are not the same on the slave and master, or because you just found a bug I wasn\'t aware of. I\'ll have a look at this next week. \u003c\\/p\u003e\\n\\n\u003cp\u003eWas this test by any chance run with a log file size &gt; 1MB on the master? \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12532755_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12532755_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Oct\\/07 19:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-05T19:25:42+0000\'\u003e05\\/Oct\\/07 19:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you for testing this, Ole. I guess you\'ll find many odd errors if you try to test this... \\n\\n \\\"Something wrong with the instants\\\" is one of the error messages I added as part of the prototype code. It indicates that the log instant (log file + offset) is not the same on the master and slave, either because the log file sizes are not the same on the slave and master, or because you just found a bug I wasn\'t aware of. I\'ll have a look at this next week.  \\n\\n Was this test by any chance run with a log file size &gt; 1MB on the master?               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12533090\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12533090&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12533090\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12533090_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533090_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Oct\\/07 10:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-08T10:49:12+0000\'\u003e08\\/Oct\\/07 10:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFrom the functional spec\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;The NetworkServerCommand commands are executed by the main thread,\u003cbr\\/\u003e\\n&gt;which means that it is not possible to connect to the server acting\u003cbr\\/\u003e\\n&gt;as slave before failover has taken place. Will, of course, be fixed\u003cbr\\/\u003e\\n&gt;later.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem occurs because we are booting the slave as part of the\u003cbr\\/\u003e\\nsame thread and it is held up in recovery. Starting it in a separate\u003cbr\\/\u003e\\nthread should solve this issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12533090_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533090_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Oct\\/07 10:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-08T10:49:12+0000\'\u003e08\\/Oct\\/07 10:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    From the functional spec \\n\\n &gt;The NetworkServerCommand commands are executed by the main thread, \\n&gt;which means that it is not possible to connect to the server acting \\n&gt;as slave before failover has taken place. Will, of course, be fixed \\n&gt;later. \\n\\n The problem occurs because we are booting the slave as part of the \\nsame thread and it is held up in recovery. Starting it in a separate \\nthread should solve this issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12533698\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12533698&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12533698\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12533698_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533698_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Oct\\/07 11:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-10T11:01:19+0000\'\u003e10\\/Oct\\/07 11:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePls find attached a new version of the poc slave\u003c\\/p\u003e\\n\\n\u003cp\u003echanges between v2b and v2c\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003epoc now handles failover before the first log switch\u003c\\/li\u003e\\n\\t\u003cli\u003edb in slave mode is now booted by a seperate slave thread so that\u003cbr\\/\u003e\\n   the network server does not get blocked.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12533698_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12533698_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Oct\\/07 11:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-10T11:01:19+0000\'\u003e10\\/Oct\\/07 11:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Pls find attached a new version of the poc slave \\n\\n changes between v2b and v2c \\n\\n \\n\\t poc now handles failover before the first log switch \\n\\t db in slave mode is now booted by a seperate slave thread so that \\n   the network server does not get blocked. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12535230\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12535230&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12535230\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12535230_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535230_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Oct\\/07 11:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-16T11:52:26+0000\'\u003e16\\/Oct\\/07 11:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe func spec for replication does not describe the behavior for replication failure on the master side. Since replication is intended to \u003cb\u003eincrease\u003c\\/b\u003e availability, I think the best solution is to allow users to continue to access the database when replication fails on the master side. I\'ll add this to the func spec in a few days unless I hear objections: \u003c\\/p\u003e\\n\\n\u003cp\u003eIn the case that the master controller finds that replication has failed, and it is not able to correct the problem (e.g. because the slave has crashed), the master replication role will be stopped. The database will still be accessable for users as if replication was never started.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12535230_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12535230_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Oct\\/07 11:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-10-16T11:52:26+0000\'\u003e16\\/Oct\\/07 11:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The func spec for replication does not describe the behavior for replication failure on the master side. Since replication is intended to  increase  availability, I think the best solution is to allow users to continue to access the database when replication fails on the master side. I\'ll add this to the func spec in a few days unless I hear objections:  \\n\\n In the case that the master controller finds that replication has failed, and it is not able to correct the problem (e.g. because the slave has crashed), the master replication role will be stopped. The database will still be accessable for users as if replication was never started.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12539332\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12539332&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12539332\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12539332_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12539332_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/07 10:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-01T10:33:20+0000\'\u003e01\\/Nov\\/07 10:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a new functional spec, v6, mainly targeting how failure scenarios will be handled. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12539332_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12539332_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/07 10:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-01T10:33:20+0000\'\u003e01\\/Nov\\/07 10:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a new functional spec, v6, mainly targeting how failure scenarios will be handled.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12539429\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12539429&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12539429\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12539429_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12539429_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/07 18:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-01T18:17:51+0000\'\u003e01\\/Nov\\/07 18:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe startslave command\'s syntax does not include a -slavehost option, but the comments seem to indicate one is available.\u003c\\/p\u003e\\n\\n\u003cp\u003eDo stopslave and startfailover need options to define the slavehost and port, otherwise how do they communicate with the slave?\u003c\\/p\u003e\\n\\n\u003cp\u003eHow do startmaster and stopmaster connect to the master database?\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s unclear exactly what the startmaster and stopmaster do, especially wrt to the state of the database. Can a database be booted and active when startmaster is called, or does startmaster boot the database? Similar for stopmaster, does it shutdown the database?\u003c\\/p\u003e\\n\\n\u003cp\u003eIs there any reason to put these replications commands on the class\\/command used to control the network server? They don\'t fit naturally there, why not a replication specific class\\/command? From the functional spec I can\'t see any requirement that the master or slave are running the network server, so I assume I can have replication working with embedded only systems.\u003c\\/p\u003e\\n\\n\u003cp\u003eHow big is this main-memory log buffer, can it be configured?\u003c\\/p\u003e\\n\\n\u003cp\u003eextract - \\\"the response time of transactions may increase for as long as log shipment has trouble keeping up with the amount of generated log records.\\\"\u003cbr\\/\u003e\\nCould you explain this more, I don\'t see the connection between the log buffer filling up and response times of other transactions.  The spec says the replication is asynchronous, so won\'t user transactions still be only limited by the speed at which the transaction log is written to disk?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe spec seems to imply that the slave can connect with the master, but the startmaster command doesn\'t specify its own hostname or portnumber so how is this connection made?\u003c\\/p\u003e\\n\\n\u003cp\u003eWhy if the master loses its connection to the slave will the replication stop, while if the slave loses its connection to the master it keeps retrying? It seems that any temporary glitch in the network connectivity has a huge chance of rendering the replication useless. I can\'t see the logic behind this, what\'s stopping the master from keeping retrying. The log buffer being full shouldn\'t matter should it, the log records are still on disk, or is it that this scheme never reads the transaction log from disk, only from memory as log records are created?\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom reading between the lines, I think this scheme requires that the master database stay booted while replicating, if so I think that\'s a key piece of information that should be clearly stated in the functional spec. If not, then I think that the how to shutdown a master database and restart replication(without the initial copy)  should be documented.\u003c\\/p\u003e\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12539429_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12539429_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/07 18:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-01T18:17:51+0000\'\u003e01\\/Nov\\/07 18:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The startslave command\'s syntax does not include a -slavehost option, but the comments seem to indicate one is available. \\n\\n Do stopslave and startfailover need options to define the slavehost and port, otherwise how do they communicate with the slave? \\n\\n How do startmaster and stopmaster connect to the master database? \\n\\n It\'s unclear exactly what the startmaster and stopmaster do, especially wrt to the state of the database. Can a database be booted and active when startmaster is called, or does startmaster boot the database? Similar for stopmaster, does it shutdown the database? \\n\\n Is there any reason to put these replications commands on the class\\/command used to control the network server? They don\'t fit naturally there, why not a replication specific class\\/command? From the functional spec I can\'t see any requirement that the master or slave are running the network server, so I assume I can have replication working with embedded only systems. \\n\\n How big is this main-memory log buffer, can it be configured? \\n\\n extract - \\\"the response time of transactions may increase for as long as log shipment has trouble keeping up with the amount of generated log records.\\\" \\nCould you explain this more, I don\'t see the connection between the log buffer filling up and response times of other transactions.  The spec says the replication is asynchronous, so won\'t user transactions still be only limited by the speed at which the transaction log is written to disk? \\n\\n The spec seems to imply that the slave can connect with the master, but the startmaster command doesn\'t specify its own hostname or portnumber so how is this connection made? \\n\\n Why if the master loses its connection to the slave will the replication stop, while if the slave loses its connection to the master it keeps retrying? It seems that any temporary glitch in the network connectivity has a huge chance of rendering the replication useless. I can\'t see the logic behind this, what\'s stopping the master from keeping retrying. The log buffer being full shouldn\'t matter should it, the log records are still on disk, or is it that this scheme never reads the transaction log from disk, only from memory as log records are created? \\n\\n From reading between the lines, I think this scheme requires that the master database stay booted while replicating, if so I think that\'s a key piece of information that should be clearly stated in the functional spec. If not, then I think that the how to shutdown a master database and restart replication(without the initial copy)  should be documented. \\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12540400\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12540400&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12540400\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12540400_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540400_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Nov\\/07 10:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-06T10:39:15+0000\'\u003e06\\/Nov\\/07 10:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDan,\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for showing interest in replication. I\'ll answer your questions inline, and will update the func spec with the results of the discussion later.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; The startslave command\'s syntax does not include a -slavehost option, but the comments seem to indicate one is available.\u003c\\/p\u003e\\n\\n\u003cp\u003eYou are right; will fix.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; How do startmaster and stopmaster connect to the master database?\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the current prototype implementation, all commands are processed in NetworkServerCommandImpl by calling Monitor.startPersistentService(dbname, ...) and Monitor.findService(dbname,...). The plan is to change this to connection url options later, i.e. \'jdbc:derby:\\/\\/host\\/db;startMaster=true\'; Note that since startslave is blocking, the connection \'jdbc:...;startslave=true\' call will hang.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Do stopslave and startfailover need options to define the slavehost and port, otherwise how do they communicate with the slave?\u003c\\/p\u003e\\n\\n\u003cp\u003eSince \\\"startslave\\\" is blocked during LogToFile.recover, Monitor.startPersistentService does not complete for this command. Calling Monitor.findService on the slave database does therefore not work. \u003c\\/p\u003e\\n\\n\u003cp\u003eA way around this is to let the thread that receives log from the master and writes it to log file, check for a flag value every X second. A Hashtable could, e.g., be added to Monitor with setFlag(dbname, flagvalue) and getFlag(dbname) methods. The stopslave\\/failover commands then call Monitor.setFlag(slaveDBName, \\\"failover\\\"\\/\\\"stopslave\\\"). \u003c\\/p\u003e\\n\\n\u003cp\u003eA potential problem with this is to authenticate the caller of the command since the AuthenticationService of the slave database is not reachable. I think the best solution would be to only accept failover\\/stopslave flags if the connection with the master is down. Otherwise, if the connection is working, stop and failover commands should only be accepted from the master.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e&gt; It\'s unclear exactly what the startmaster and stopmaster do, especially wrt to the state of the database. Can a database be booted and active when startmaster is called, or does startmaster boot the database? Similar for stopmaster, does it shutdown the database?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe \\\"startmaster\\\" command can only be run against an existing database \'X\'. If \'X\' has already been booted by the Derby instance that will have the master role, \\\"startmaster\\\" will connect to it and:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) copy the files of \'X\' to the slave (other transactions will be blocked during this step in the first version of replication -\u003cbr\\/\u003e\\n   may be improved later by exploiting online backup)\u003cbr\\/\u003e\\n2) create a replication log buffer and make sure all log records are added to this buffer\u003cbr\\/\u003e\\n3) start a log shipment thread that sends the log asynchronously.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf \'X\' has not already been booted, \\\"startmaster\\\" will boot it and then do the above.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe \\\"stopmaster\\\" command will\u003c\\/p\u003e\\n\\n\u003cp\u003e1) stop log records from being appended to the replication log buffer\u003cbr\\/\u003e\\n2) stop the log shipper thread from sending more log to the slave\u003cbr\\/\u003e\\n3) send a message to the slave that replication for database \'X\' has been stopped.\u003cbr\\/\u003e\\n4) close down all replication related functionality without shutting down \'X\'\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Is there any reason to put these replications commands on the class\\/command used to control the network server? They don\'t fit naturally there, why not a replication specific class\\/command? From the functional spec I can\'t see any requirement that the master or slave are running the network server, so I assume I can have replication working with embedded only systems.\u003c\\/p\u003e\\n\\n\u003cp\u003eImplementing this in the network server means that the blocking startslave command will run in a thread on the same vm as the server. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; How big is this main-memory log buffer, can it be configured?\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the initial version we use 10 buffers with size 32KB. 32K was chosen because this is the buffer size used in LogAccessFileBuffer.buffer byte[], which are the units copied to the replication buffer. We need multiple buffers so that it is possible to append log while the log shipper is sleeping and when it is busy shipping an older chunk of log. The number of buffers will probably be modified once we get a chance to actually test the funtionality. It will be configurable.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; extract - \\\"the response time of transactions may increase for as long as log shipment has trouble keeping up with the amount of generated log records.\\\"\u003cbr\\/\u003e\\n&gt; Could you explain this more, I don\'t see the connection between the log buffer filling up and response times of other transactions. The spec says the replication is asynchronous, so won\'t user transactions still be only limited by the speed at which the transaction log is written to disk?\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the current design, log records that need to be shipped to the slave are appended to the replication log buffer at the same time they are written to disk. If the replication log buffer is full, the transaction requesting this disk write has to wait for a chunk of log to be shipped before the log can be added to it. I realize that it is possible to read the log from disk if the buffer overflows. This is a planned improvement, but is delayed for now due to limited developer resources.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; The spec seems to imply that the slave can connect with the master, but the startmaster command doesn\'t specify its own hostname or portnumber so how is this connection made?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe connection between the pairs will be set up by\u003c\\/p\u003e\\n\\n\u003cp\u003e1) the slave sets up a ServerSocket\u003cbr\\/\u003e\\n2) the master connects to the socket on the specified slave\u003cbr\\/\u003e\\n   location (i.e. host:port)\u003cbr\\/\u003e\\n3) the socket connection can be used to send messages in both\u003cbr\\/\u003e\\n   directions.\u003c\\/p\u003e\\n\\n\u003cp\u003eThus, the slave does not contact the master - it only sends a message using the existing connection. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Why if the master loses its connection to the slave will the replication stop, while if the slave loses its connection to the master it keeps retrying? It seems that any temporary glitch in the network connectivity has a huge chance of rendering the replication useless. I can\'t see the logic behind this, what\'s stopping the master from keeping retrying. The log buffer being full shouldn\'t matter should it, the log records are still on disk, or is it that this scheme never reads the transaction log from disk, only from memory as log records are created?\u003c\\/p\u003e\\n\\n\u003cp\u003eSee answer to response time above. Reading log from disk in case of replication buffer overflow is definitely an improvement, but we delay that improvement for now. It will be high priority on the improvement todo-list.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; From reading between the lines, I think this scheme requires that the master database stay booted while replicating, if so I think that\'s a key piece of information that should be clearly stated in the functional spec. If not, then I think that the how to shutdown a master database and restart replication(without the initial copy) should be documented.\u003c\\/p\u003e\\n\\n\u003cp\u003eAgain, a correct observation. The master database has to stay booted while replicated.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12540400_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540400_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Nov\\/07 10:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-06T10:39:15+0000\'\u003e06\\/Nov\\/07 10:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dan, \\n\\n Thanks for showing interest in replication. I\'ll answer your questions inline, and will update the func spec with the results of the discussion later. \\n\\n &gt; The startslave command\'s syntax does not include a -slavehost option, but the comments seem to indicate one is available. \\n\\n You are right; will fix. \\n\\n &gt; How do startmaster and stopmaster connect to the master database? \\n\\n In the current prototype implementation, all commands are processed in NetworkServerCommandImpl by calling Monitor.startPersistentService(dbname, ...) and Monitor.findService(dbname,...). The plan is to change this to connection url options later, i.e. \'jdbc:derby:\\/\\/host\\/db;startMaster=true\'; Note that since startslave is blocking, the connection \'jdbc:...;startslave=true\' call will hang. \\n\\n &gt; Do stopslave and startfailover need options to define the slavehost and port, otherwise how do they communicate with the slave? \\n\\n Since \\\"startslave\\\" is blocked during LogToFile.recover, Monitor.startPersistentService does not complete for this command. Calling Monitor.findService on the slave database does therefore not work.  \\n\\n A way around this is to let the thread that receives log from the master and writes it to log file, check for a flag value every X second. A Hashtable could, e.g., be added to Monitor with setFlag(dbname, flagvalue) and getFlag(dbname) methods. The stopslave\\/failover commands then call Monitor.setFlag(slaveDBName, \\\"failover\\\"\\/\\\"stopslave\\\").  \\n\\n A potential problem with this is to authenticate the caller of the command since the AuthenticationService of the slave database is not reachable. I think the best solution would be to only accept failover\\/stopslave flags if the connection with the master is down. Otherwise, if the connection is working, stop and failover commands should only be accepted from the master. \\n\\n\\n &gt; It\'s unclear exactly what the startmaster and stopmaster do, especially wrt to the state of the database. Can a database be booted and active when startmaster is called, or does startmaster boot the database? Similar for stopmaster, does it shutdown the database? \\n\\n The \\\"startmaster\\\" command can only be run against an existing database \'X\'. If \'X\' has already been booted by the Derby instance that will have the master role, \\\"startmaster\\\" will connect to it and: \\n\\n 1) copy the files of \'X\' to the slave (other transactions will be blocked during this step in the first version of replication - \\n   may be improved later by exploiting online backup) \\n2) create a replication log buffer and make sure all log records are added to this buffer \\n3) start a log shipment thread that sends the log asynchronously. \\n\\n If \'X\' has not already been booted, \\\"startmaster\\\" will boot it and then do the above. \\n\\n The \\\"stopmaster\\\" command will \\n\\n 1) stop log records from being appended to the replication log buffer \\n2) stop the log shipper thread from sending more log to the slave \\n3) send a message to the slave that replication for database \'X\' has been stopped. \\n4) close down all replication related functionality without shutting down \'X\' \\n\\n &gt; Is there any reason to put these replications commands on the class\\/command used to control the network server? They don\'t fit naturally there, why not a replication specific class\\/command? From the functional spec I can\'t see any requirement that the master or slave are running the network server, so I assume I can have replication working with embedded only systems. \\n\\n Implementing this in the network server means that the blocking startslave command will run in a thread on the same vm as the server.  \\n\\n &gt; How big is this main-memory log buffer, can it be configured? \\n\\n In the initial version we use 10 buffers with size 32KB. 32K was chosen because this is the buffer size used in LogAccessFileBuffer.buffer byte[], which are the units copied to the replication buffer. We need multiple buffers so that it is possible to append log while the log shipper is sleeping and when it is busy shipping an older chunk of log. The number of buffers will probably be modified once we get a chance to actually test the funtionality. It will be configurable. \\n\\n &gt; extract - \\\"the response time of transactions may increase for as long as log shipment has trouble keeping up with the amount of generated log records.\\\" \\n&gt; Could you explain this more, I don\'t see the connection between the log buffer filling up and response times of other transactions. The spec says the replication is asynchronous, so won\'t user transactions still be only limited by the speed at which the transaction log is written to disk? \\n\\n In the current design, log records that need to be shipped to the slave are appended to the replication log buffer at the same time they are written to disk. If the replication log buffer is full, the transaction requesting this disk write has to wait for a chunk of log to be shipped before the log can be added to it. I realize that it is possible to read the log from disk if the buffer overflows. This is a planned improvement, but is delayed for now due to limited developer resources. \\n\\n &gt; The spec seems to imply that the slave can connect with the master, but the startmaster command doesn\'t specify its own hostname or portnumber so how is this connection made? \\n\\n The connection between the pairs will be set up by \\n\\n 1) the slave sets up a ServerSocket \\n2) the master connects to the socket on the specified slave \\n   location (i.e. host:port) \\n3) the socket connection can be used to send messages in both \\n   directions. \\n\\n Thus, the slave does not contact the master - it only sends a message using the existing connection.  \\n\\n &gt; Why if the master loses its connection to the slave will the replication stop, while if the slave loses its connection to the master it keeps retrying? It seems that any temporary glitch in the network connectivity has a huge chance of rendering the replication useless. I can\'t see the logic behind this, what\'s stopping the master from keeping retrying. The log buffer being full shouldn\'t matter should it, the log records are still on disk, or is it that this scheme never reads the transaction log from disk, only from memory as log records are created? \\n\\n See answer to response time above. Reading log from disk in case of replication buffer overflow is definitely an improvement, but we delay that improvement for now. It will be high priority on the improvement todo-list. \\n\\n &gt; From reading between the lines, I think this scheme requires that the master database stay booted while replicating, if so I think that\'s a key piece of information that should be clearly stated in the functional spec. If not, then I think that the how to shutdown a master database and restart replication(without the initial copy) should be documented. \\n\\n Again, a correct observation. The master database has to stay booted while replicated.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12540509\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12540509&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12540509\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12540509_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540509_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Nov\\/07 18:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-06T18:06:18+0000\'\u003e06\\/Nov\\/07 18:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;&gt; Is there any reason to put these replications commands on the class\\/command used to control the network server? They don\'t fit naturally there, why not a replication specific class\\/command? From the functional spec I can\'t see any requirement that the master or slave are running the network server, so I assume I can have replication working with embedded only systems.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Implementing this in the network server means that the blocking startslave command will run in a thread on the same vm as the server.\u003c\\/p\u003e\\n\\n\u003cp\u003eThat\'s an implementation detail, wouldn\'t it be better to have a separate class for replication commands, even if they use the same implementation code?\u003cbr\\/\u003e\\nDoes that mean that this replication does not supported embedded only use, a network server must be booted? Good to state that in the spec, if so.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e&gt; Thus, the slave does not contact the master - it only sends a message using the existing connection. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe functional spec says \\\"The slave tries to reestablish the connection with the master. \\\" - I guess this really means the slave waits for a master to re-connect to it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12540509_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540509_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Nov\\/07 18:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-06T18:06:18+0000\'\u003e06\\/Nov\\/07 18:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;&gt; Is there any reason to put these replications commands on the class\\/command used to control the network server? They don\'t fit naturally there, why not a replication specific class\\/command? From the functional spec I can\'t see any requirement that the master or slave are running the network server, so I assume I can have replication working with embedded only systems. \\n\\n &gt; Implementing this in the network server means that the blocking startslave command will run in a thread on the same vm as the server. \\n\\n That\'s an implementation detail, wouldn\'t it be better to have a separate class for replication commands, even if they use the same implementation code? \\nDoes that mean that this replication does not supported embedded only use, a network server must be booted? Good to state that in the spec, if so. \\n\\n\\n &gt; Thus, the slave does not contact the master - it only sends a message using the existing connection.  \\n\\n The functional spec says \\\"The slave tries to reestablish the connection with the master. \\\" - I guess this really means the slave waits for a master to re-connect to it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12540703\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12540703&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12540703\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12540703_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540703_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Nov\\/07 08:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-07T08:57:04+0000\'\u003e07\\/Nov\\/07 08:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReplication will be supported in both modes once we get the \\\"connection url\\\" working. At that point, there should be two ways to start replication:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) \'jdbc:derby:...;&lt;replicationcommand&gt;\'\u003cbr\\/\u003e\\n2) A command line interface that uses 1) internally. This will probably not be useful for embedded. Could be implemented somewhere else than the network layer.\u003c\\/p\u003e\\n\\n\u003cp\u003eEmbedded will use 1, client will use 1 or 2. The main reason for supporting alternative 2 is to hide that startslave hangs.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12540703_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12540703_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Nov\\/07 08:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-07T08:57:04+0000\'\u003e07\\/Nov\\/07 08:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Replication will be supported in both modes once we get the \\\"connection url\\\" working. At that point, there should be two ways to start replication: \\n\\n 1) \'jdbc:derby:...;&lt;replicationcommand&gt;\' \\n2) A command line interface that uses 1) internally. This will probably not be useful for embedded. Could be implemented somewhere else than the network layer. \\n\\n Embedded will use 1, client will use 1 or 2. The main reason for supporting alternative 2 is to hide that startslave hangs.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12541712\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12541712&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12541712\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12541712_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12541712_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/07 08:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-12T08:44:40+0000\'\u003e12\\/Nov\\/07 08:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching v7 of the funcspec, incorporating feedback from Dan.\u003c\\/p\u003e\\n\\n\u003cp\u003eDan, it would be great it you had a quick look at the latest rev to verify that we are on the same page here.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12541712_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12541712_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/07 08:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-12T08:44:40+0000\'\u003e12\\/Nov\\/07 08:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching v7 of the funcspec, incorporating feedback from Dan. \\n\\n Dan, it would be great it you had a quick look at the latest rev to verify that we are on the same page here.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12541790\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12541790&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12541790\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12541790_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12541790_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/07 14:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-12T14:47:16+0000\'\u003e12\\/Nov\\/07 14:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhile working on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3189\\\" title=\\\"Replication: Add connection url command options for starting and stopping master\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3189\\\"\u003e\u003cdel\u003eDERBY-3189\u003c\\/del\u003e\u003c\\/a\u003e, I realized that the functional specification is not 100% clear when it comes to security measures for replication.\u003c\\/p\u003e\\n\\n\u003cp\u003eI plan to update the funcspec with the following information in a few days unless there are comments:\u003c\\/p\u003e\\n\\n\u003cp\u003eMaster side:\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eAuthentication is turned on: Normal Derby connection policy - the user and password must be valid.\u003c\\/li\u003e\\n\\t\u003cli\u003eAuthorization is turned on: The user must be valid and be the database owner of the database that will be replicated.\u003c\\/li\u003e\\n\\t\u003cli\u003eSystem privileges (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2109\\\" title=\\\"System privileges\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2109\\\"\u003eDERBY-2109\u003c\\/a\u003e) is turned on: The user must be valid and have the \\\"replication\\\" system privilege.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eSlave side - start slave:\u003cbr\\/\u003e\\nAs for master, but with the two-phase strategy used for encryption of databases. This means first booting the slave database for authentication and authorization, shut the slave database down and reboot it in slave mode.\u003c\\/p\u003e\\n\\n\u003cp\u003eSlave side - stop slave and failover: \u003cbr\\/\u003e\\nCannot get the authentication service from the slave database since it is not fully booted yet. Can authenticate users on system level only. Authorization cannot be checked. If system privileges is turned on, the user must have the \\\"replication\\\" system privilege. \u003c\\/p\u003e\\n\\n\u003cp\u003eSince we are not able to check authorization while in slave mode, stop slave and failover commands will only be accepted from the master while the master-slave connection is working. If the slave-master connection is down, any authenticated\\/properly system-privileged user can issue the commands on the Derby serving the slave database.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12541790_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12541790_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/07 14:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-11-12T14:47:16+0000\'\u003e12\\/Nov\\/07 14:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    While working on   DERBY-3189  , I realized that the functional specification is not 100% clear when it comes to security measures for replication. \\n\\n I plan to update the funcspec with the following information in a few days unless there are comments: \\n\\n Master side: \\n \\n\\t Authentication is turned on: Normal Derby connection policy - the user and password must be valid. \\n\\t Authorization is turned on: The user must be valid and be the database owner of the database that will be replicated. \\n\\t System privileges ( DERBY-2109 ) is turned on: The user must be valid and have the \\\"replication\\\" system privilege. \\n \\n\\n\\n Slave side - start slave: \\nAs for master, but with the two-phase strategy used for encryption of databases. This means first booting the slave database for authentication and authorization, shut the slave database down and reboot it in slave mode. \\n\\n Slave side - stop slave and failover:  \\nCannot get the authentication service from the slave database since it is not fully booted yet. Can authenticate users on system level only. Authorization cannot be checked. If system privileges is turned on, the user must have the \\\"replication\\\" system privilege.  \\n\\n Since we are not able to check authorization while in slave mode, stop slave and failover commands will only be accepted from the master while the master-slave connection is working. If the slave-master connection is down, any authenticated\\/properly system-privileged user can issue the commands on the Derby serving the slave database.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12553940\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12553940&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12553940\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12553940_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12553940_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Dec\\/07 13:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-12-21T13:12:59+0000\'\u003e21\\/Dec\\/07 13:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching v8 of the funcspec. Includes details for authentication\\/authorization and a behavior change in that replicated databases now are allowed to be shut down. Shutting down a database in replication mode will notify the other replication peer what is happening.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12553940_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12553940_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Dec\\/07 13:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2007-12-21T13:12:59+0000\'\u003e21\\/Dec\\/07 13:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching v8 of the funcspec. Includes details for authentication\\/authorization and a behavior change in that replicated databases now are allowed to be shut down. Shutting down a database in replication mode will notify the other replication peer what is happening.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12555632\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12555632&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12555632\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_12555632_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555632_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/08 18:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-03T18:23:12+0000\'\u003e03\\/Jan\\/08 18:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have a question about the startMaster attribute. Can it can be used \u003cb\u003ewhen\u003c\\/b\u003e a database is created (that is, in conjunction with the create=true attribute), or must it be used \u003cb\u003eafter\u003c\\/b\u003e the database has been created? \u003c\\/p\u003e\\n\\n\u003cp\u003eThe spec (v8) is not absolutely clear on this, because it says both\u003c\\/p\u003e\\n\\n\u003cp\u003e  \\\"a master database must be created before it can be replicated.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eand\u003c\\/p\u003e\\n\\n\u003cp\u003e  \\\"...replication does not need to be specified when the database is created; it can be initiated at any time after the database is created.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eThe first part of the second sentence implies that replication \u003cb\u003ecould\u003c\\/b\u003e be started when the database is created &#8211; that is, in conjunction with create=true. But maybe it means only that you don\'t have to start it \u003cb\u003eimmediately\u003c\\/b\u003e after creating the database &#8211; you can replicate a database that\'s been around for a long time.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne of the sections in the reference topics on connection attributes is \\\"Combining with other attributes\\\", so it would be helpful to have this information &#8211; and any other information you have on which attribute combinations are allowed and which are not. For example, I\'m sure you can combine these with the username and password attributes, and I\'m sure you can\'t specify two of the replication commands at the same time. About others, I\'m not certain.)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_12555632_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555632_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/08 18:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-03T18:23:12+0000\'\u003e03\\/Jan\\/08 18:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have a question about the startMaster attribute. Can it can be used  when  a database is created (that is, in conjunction with the create=true attribute), or must it be used  after  the database has been created?  \\n\\n The spec (v8) is not absolutely clear on this, because it says both \\n\\n   \\\"a master database must be created before it can be replicated.\\\" \\n\\n and \\n\\n   \\\"...replication does not need to be specified when the database is created; it can be initiated at any time after the database is created.\\\" \\n\\n The first part of the second sentence implies that replication  could  be started when the database is created &#8211; that is, in conjunction with create=true. But maybe it means only that you don\'t have to start it  immediately  after creating the database &#8211; you can replicate a database that\'s been around for a long time. \\n\\n One of the sections in the reference topics on connection attributes is \\\"Combining with other attributes\\\", so it would be helpful to have this information &#8211; and any other information you have on which attribute combinations are allowed and which are not. For example, I\'m sure you can combine these with the username and password attributes, and I\'m sure you can\'t specify two of the replication commands at the same time. About others, I\'m not certain.)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12555645\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12555645&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12555645\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_12555645_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555645_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/08 19:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-03T19:28:23+0000\'\u003e03\\/Jan\\/08 19:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSorry, something else in the spec is not quite clear to me. \u003c\\/p\u003e\\n\\n\u003cp\u003eIs it correct that to start replication, all you need to do is specify the startMaster\\/slavehost\\/\u003cspan class=\\\"error\\\"\u003e&#91;slaveport&#93;\u003c\\/span\u003e attributes on the master database? It appears from the description that this command gets things going on both the master and the slave without your having to explicitly run startSlave on the slave system. It appears that something like this happens when you stop the master, so I\'m assuming it happens when you start it too.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf that is the case, what is the startSlave attribute used for? Is it only used if the slave-to-master connection is lost? But in that case, according to the Failure Scenarios section, the slave automatically tries to reestablish the connection, unless I\'ve misunderstood.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for any clarifications.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_12555645_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555645_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/08 19:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-03T19:28:23+0000\'\u003e03\\/Jan\\/08 19:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sorry, something else in the spec is not quite clear to me.  \\n\\n Is it correct that to start replication, all you need to do is specify the startMaster\\/slavehost\\/ &#91;slaveport&#93;  attributes on the master database? It appears from the description that this command gets things going on both the master and the slave without your having to explicitly run startSlave on the slave system. It appears that something like this happens when you stop the master, so I\'m assuming it happens when you start it too. \\n\\n If that is the case, what is the startSlave attribute used for? Is it only used if the slave-to-master connection is lost? But in that case, according to the Failure Scenarios section, the slave automatically tries to reestablish the connection, unless I\'ve misunderstood. \\n\\n Thanks for any clarifications.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12555667\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12555667&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12555667\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_12555667_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555667_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/08 20:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-03T20:18:31+0000\'\u003e03\\/Jan\\/08 20:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnother question: at several points the spec says that the slave \\\"redoes\\\" the transaction log sent by the master. What does that mean exactly? Does it perform the operations that are recorded in the transaction log? The last paragraph in \\\"Starting and running replication\\\" implies that, but I just wanted to be sure.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks very much.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_12555667_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555667_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jan\\/08 20:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-03T20:18:31+0000\'\u003e03\\/Jan\\/08 20:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Another question: at several points the spec says that the slave \\\"redoes\\\" the transaction log sent by the master. What does that mean exactly? Does it perform the operations that are recorded in the transaction log? The last paragraph in \\\"Starting and running replication\\\" implies that, but I just wanted to be sure. \\n\\n Thanks very much.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12555938\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12555938&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12555938\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12555938_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555938_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 14:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T14:56:48+0000\'\u003e04\\/Jan\\/08 14:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Kim,\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll try to sort out the ambiguities in the func spec: \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I have a question about the startMaster attribute. Can it can be\u003cbr\\/\u003e\\n&gt; used \u003cb\u003ewhen\u003c\\/b\u003e a database is created (that is, in conjunction with\u003cbr\\/\u003e\\n&gt; the create=true attribute), or must it be used \u003cb\u003eafter\u003c\\/b\u003e the\u003cbr\\/\u003e\\n&gt; database has been created?\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the first implementation of replication, the master database\u003cbr\\/\u003e\\nmust be booted (also implies created) before startMaster is\u003cbr\\/\u003e\\nspecified. This may be improved in Derby 10.5.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; But maybe it means only that you don\'t have to start it\u003cbr\\/\u003e\\n&gt; \u003cb\u003eimmediately\u003c\\/b\u003e after creating the database &#8211; you can replicate\u003cbr\\/\u003e\\n&gt; a database that\'s been around for a long time.\u003c\\/p\u003e\\n\\n\u003cp\u003eJust to be clear - you can replicate a database that\'s been\u003cbr\\/\u003e\\naround for a long time.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I\'m sure you can combine these with the username and password\u003cbr\\/\u003e\\n&gt; attributes, and I\'m sure you can\'t specify two of the replication\u003cbr\\/\u003e\\n&gt; commands at the same time. About others, I\'m not certain.)\u003c\\/p\u003e\\n\\n\u003cp\u003eLooking at Connection URL Attributes in the reference manual, the\u003cbr\\/\u003e\\nreplication attributes can be combined with \'user\' and \'password\'\u003cbr\\/\u003e\\nonly. Username and password attributes are required if\u003cbr\\/\u003e\\nauthentication\\/authorization is turned on.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe replication attributes start*, stop* and failover can not be\u003cbr\\/\u003e\\nused at the same time, whereas slavehost\\/slaveport can be used in\u003cbr\\/\u003e\\ncombination with these as specified in the funcspec. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Is it correct that to start replication, all you need to do is\u003cbr\\/\u003e\\n&gt; specify the startMaster\\/slavehost\\/\u003cspan class=\\\"error\\\"\u003e&#91;slaveport&#93;\u003c\\/span\u003e attributes on the\u003cbr\\/\u003e\\n&gt; master database? It appears from the description that this\u003cbr\\/\u003e\\n&gt; command gets things going on both the master and the slave\u003cbr\\/\u003e\\n&gt; without your having to explicitly run startSlave on the slave\u003cbr\\/\u003e\\n&gt; system. It appears that something like this happens when you stop\u003cbr\\/\u003e\\n&gt; the master, so I\'m assuming it happens when you start it too.\u003c\\/p\u003e\\n\\n\u003cp\u003eI can see why you would assume this, but it is not correct. I\u003cbr\\/\u003e\\nwill update the funcspec soon to clearify this. The answer: No,\u003cbr\\/\u003e\\nyou have to run startSlave on the slave host in addition to\u003cbr\\/\u003e\\nstartMaster on the master host. \u003c\\/p\u003e\\n\\n\u003cp\u003eRegarding lost connection: there are no commands to fix a lost\u003cbr\\/\u003e\\nconnection between the master and slave. The replication\u003cbr\\/\u003e\\nfunctionality will try to reestablish the connection\u003cbr\\/\u003e\\ninternally (no user interaction), but may eventually have to give\u003cbr\\/\u003e\\nup. If replication is stopped because of a lost connection (or\u003cbr\\/\u003e\\nany other reason, like issuing a stopMaster command), replication\u003cbr\\/\u003e\\nmust be started over again from scratch.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Another question: at several points the spec says that the\u003cbr\\/\u003e\\n&gt; slave \\\"redoes\\\" the transaction log sent by the master. What does\u003cbr\\/\u003e\\n&gt; that mean exactly? Does it perform the operations that are\u003cbr\\/\u003e\\n&gt; recorded in the transaction log?\u003c\\/p\u003e\\n\\n\u003cp\u003eCorrect - the slave applies the operations found in the log. \u003c\\/p\u003e\\n\\n\u003cp\u003eOnce again, thanks for documenting replication!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12555938_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555938_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 14:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T14:56:48+0000\'\u003e04\\/Jan\\/08 14:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Kim, \\n\\n I\'ll try to sort out the ambiguities in the func spec:  \\n\\n &gt; I have a question about the startMaster attribute. Can it can be \\n&gt; used  when  a database is created (that is, in conjunction with \\n&gt; the create=true attribute), or must it be used  after  the \\n&gt; database has been created? \\n\\n In the first implementation of replication, the master database \\nmust be booted (also implies created) before startMaster is \\nspecified. This may be improved in Derby 10.5. \\n\\n &gt; But maybe it means only that you don\'t have to start it \\n&gt;  immediately  after creating the database &#8211; you can replicate \\n&gt; a database that\'s been around for a long time. \\n\\n Just to be clear - you can replicate a database that\'s been \\naround for a long time. \\n\\n &gt; I\'m sure you can combine these with the username and password \\n&gt; attributes, and I\'m sure you can\'t specify two of the replication \\n&gt; commands at the same time. About others, I\'m not certain.) \\n\\n Looking at Connection URL Attributes in the reference manual, the \\nreplication attributes can be combined with \'user\' and \'password\' \\nonly. Username and password attributes are required if \\nauthentication\\/authorization is turned on. \\n\\n The replication attributes start*, stop* and failover can not be \\nused at the same time, whereas slavehost\\/slaveport can be used in \\ncombination with these as specified in the funcspec.  \\n\\n &gt; Is it correct that to start replication, all you need to do is \\n&gt; specify the startMaster\\/slavehost\\/ &#91;slaveport&#93;  attributes on the \\n&gt; master database? It appears from the description that this \\n&gt; command gets things going on both the master and the slave \\n&gt; without your having to explicitly run startSlave on the slave \\n&gt; system. It appears that something like this happens when you stop \\n&gt; the master, so I\'m assuming it happens when you start it too. \\n\\n I can see why you would assume this, but it is not correct. I \\nwill update the funcspec soon to clearify this. The answer: No, \\nyou have to run startSlave on the slave host in addition to \\nstartMaster on the master host.  \\n\\n Regarding lost connection: there are no commands to fix a lost \\nconnection between the master and slave. The replication \\nfunctionality will try to reestablish the connection \\ninternally (no user interaction), but may eventually have to give \\nup. If replication is stopped because of a lost connection (or \\nany other reason, like issuing a stopMaster command), replication \\nmust be started over again from scratch. \\n\\n &gt; Another question: at several points the spec says that the \\n&gt; slave \\\"redoes\\\" the transaction log sent by the master. What does \\n&gt; that mean exactly? Does it perform the operations that are \\n&gt; recorded in the transaction log? \\n\\n Correct - the slave applies the operations found in the log.  \\n\\n Once again, thanks for documenting replication!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12555939\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12555939&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12555939\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_12555939_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555939_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 15:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T15:08:41+0000\'\u003e04\\/Jan\\/08 15:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you so much, J\\u00F8rgen, for the quick and very clear replies. That should keep me going!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chaase3\\\" id=\\\"commentauthor_12555939_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chaase3\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chaase3\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kim Haase\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555939_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 15:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T15:08:41+0000\'\u003e04\\/Jan\\/08 15:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you so much, J\\u00F8rgen, for the quick and very clear replies. That should keep me going!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564977\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12564977&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564977\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dibyendumajumdar\\\" id=\\\"commentauthor_12564977_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dibyendumajumdar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dibyendumajumdar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dibyendu Majumdar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564977_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/08 23:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-01T23:38:28+0000\'\u003e01\\/Feb\\/08 23:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi J\\u00F8rgen,\u003c\\/p\u003e\\n\\n\u003cp\u003eI would be grateful if you would let me know the answers to following:\u003c\\/p\u003e\\n\\n\u003cp\u003ea) I notice that there are a couple of replication factories under org.apache.derby.iapi.services.replication.\u003cbr\\/\u003e\\nI would have expected that replication is a feature of the Store - and not a service. In particular, I am interested in knowing if replication has a dependency on functionality outside the Store. \u003c\\/p\u003e\\n\\n\u003cp\u003eb) I also noticed some logic related to startup and shutdown of slave database in EmbedConnection. Does this mean that there is a dependency on the language layer for starting\\/stopping replication? \u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for your help.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dibyendumajumdar\\\" id=\\\"commentauthor_12564977_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dibyendumajumdar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dibyendumajumdar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dibyendu Majumdar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564977_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/08 23:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-01T23:38:28+0000\'\u003e01\\/Feb\\/08 23:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi J\\u00F8rgen, \\n\\n I would be grateful if you would let me know the answers to following: \\n\\n a) I notice that there are a couple of replication factories under org.apache.derby.iapi.services.replication. \\nI would have expected that replication is a feature of the Store - and not a service. In particular, I am interested in knowing if replication has a dependency on functionality outside the Store.  \\n\\n b) I also noticed some logic related to startup and shutdown of slave database in EmbedConnection. Does this mean that there is a dependency on the language layer for starting\\/stopping replication?  \\n\\n Thanks for your help.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12565747\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12565747&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12565747\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12565747_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12565747_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/08 13:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-05T13:50:43+0000\'\u003e05\\/Feb\\/08 13:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"J\\u00F8rgen L\\u00F8land - 05\\/Feb\\/08 13:51\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Dibyendu,\u003c\\/p\u003e\\n\\n\u003cp\u003eThe replication factories depend on functionality in \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003estore (mainly store.raw.RawStore and store.raw.log.LogToFile and LogAccessFile)\u003c\\/li\u003e\\n\\t\u003cli\u003ethe database modules (BasicDatabase and SlaveDatabase).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThe replication functionality in EmbedConnection is only related to processing connection attempts with replication commands ( \u003c\\/p\u003e\\n{start|stop}\\n{Master|Slave}\\n\u003cp\u003e and failover - see funcspec)\u003c\\/p\u003e\\n\\n\u003cp\u003eIn retrospect, I think o.a.d.i.store.raw.replication or maybe o.a.d.i.store.replication would be a better place for the replication factories than services.  \u003c\\/p\u003e\\n\\n\u003cp\u003eHope this helps\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12565747_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12565747_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/08 13:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-05T13:50:43+0000\'\u003e05\\/Feb\\/08 13:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"J\\u00F8rgen L\\u00F8land - 05\\/Feb\\/08 13:51\\\"\u003eedited\u003c\\/span\u003e                   Hi Dibyendu, \\n\\n The replication factories depend on functionality in  \\n \\n\\t store (mainly store.raw.RawStore and store.raw.log.LogToFile and LogAccessFile) \\n\\t the database modules (BasicDatabase and SlaveDatabase). \\n \\n\\n\\n The replication functionality in EmbedConnection is only related to processing connection attempts with replication commands (  \\n{start|stop}\\n{Master|Slave}\\n  and failover - see funcspec) \\n\\n In retrospect, I think o.a.d.i.store.raw.replication or maybe o.a.d.i.store.replication would be a better place for the replication factories than services.   \\n\\n Hope this helps              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12568577\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12568577&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12568577\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12568577_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568577_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Feb\\/08 15:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-13T15:13:15+0000\'\u003e13\\/Feb\\/08 15:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCode freeze for 10.4 is getting closer by the minute. It would be good to evaluate the funcspec at this point and be explicit about which replication features will make it into this release and which will be delayed for the next. As I see it, the following will have to be delayed until 10.5:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eCLI for NetworkServerControl (this has already been mentioned in the funcspec)\u003c\\/li\u003e\\n\\t\u003cli\u003eDepending on ETA of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2109\\\" title=\\\"System privileges\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2109\\\"\u003eDERBY-2109\u003c\\/a\u003e, the system privilege for replication may or may not make it into 10.4\u003c\\/li\u003e\\n\\t\u003cli\u003eCopy the database from the master to the slave inside Derby by using the master-slave network connection. Instead, a file system copy of the database to the slave location will be required before replication can be started. This has the implication that startup of replication requires these steps:\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e1) boot database \'x\' on master\u003cbr\\/\u003e\\n2) freeze \'x\' (force log and data to disk and block write operations)\u003cbr\\/\u003e\\n3) copy \'x\' to slave location using file system copy\u003cbr\\/\u003e\\n4) connect to \'x\' with startSlave option on Derby serving slave\u003cbr\\/\u003e\\n5) connect to \'x\' with startMaster option on Derby serving master (includes unfreeze of \'x\')\u003c\\/p\u003e\\n\\n\u003cp\u003e...as opposed to only doing the originally intended steps 4 and 5. FWIW, startup of replication in MySQL requires a similar file system copy of the database.\u003c\\/p\u003e\\n\\n\u003cp\u003eOf course, both these issues can be addressed in 10.4 if someone volunteers to work on them.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will update the funcspec with this information in a few days unless I hear objections.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12568577_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12568577_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Feb\\/08 15:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-13T15:13:15+0000\'\u003e13\\/Feb\\/08 15:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Code freeze for 10.4 is getting closer by the minute. It would be good to evaluate the funcspec at this point and be explicit about which replication features will make it into this release and which will be delayed for the next. As I see it, the following will have to be delayed until 10.5: \\n\\n \\n\\t CLI for NetworkServerControl (this has already been mentioned in the funcspec) \\n\\t Depending on ETA of  DERBY-2109 , the system privilege for replication may or may not make it into 10.4 \\n\\t Copy the database from the master to the slave inside Derby by using the master-slave network connection. Instead, a file system copy of the database to the slave location will be required before replication can be started. This has the implication that startup of replication requires these steps: \\n \\n\\n\\n 1) boot database \'x\' on master \\n2) freeze \'x\' (force log and data to disk and block write operations) \\n3) copy \'x\' to slave location using file system copy \\n4) connect to \'x\' with startSlave option on Derby serving slave \\n5) connect to \'x\' with startMaster option on Derby serving master (includes unfreeze of \'x\') \\n\\n ...as opposed to only doing the originally intended steps 4 and 5. FWIW, startup of replication in MySQL requires a similar file system copy of the database. \\n\\n Of course, both these issues can be addressed in 10.4 if someone volunteers to work on them. \\n\\n I will update the funcspec with this information in a few days unless I hear objections.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12569861\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12569861&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12569861\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12569861_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569861_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 11:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T11:40:18+0000\'\u003e18\\/Feb\\/08 11:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching revised funcspec. Added section on how replication is started since the master to slave database shipping will not make it in 10.4, and some other minor changes.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12569861_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569861_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 11:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T11:40:18+0000\'\u003e18\\/Feb\\/08 11:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching revised funcspec. Added section on how replication is started since the master to slave database shipping will not make it in 10.4, and some other minor changes.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571021\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12571021&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571021\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"scheur\\\" id=\\\"commentauthor_12571021_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=scheur\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"scheur\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Henri van de Scheur\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571021_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 11:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T11:36:54+0000\'\u003e21\\/Feb\\/08 11:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have a few comments\\/questions to the Functional Specification for Derby Replication - rev. 9.0.\u003c\\/p\u003e\\n\\n\u003cp\u003eGreat to see a chapter \'Handling Failure Scenarios\', but as stated here, there are numerous failure scenarios which can be encountered. As a follow-up,  I would like to raise the following questions\\/comments:\u003cbr\\/\u003e\\n1. Would be nice to also describe a scenario where the slave Derby instance crashes\u003cbr\\/\u003e\\n2. Please confirm the following statement: \'Since the slave database is in recovery-mode, no data in the slave database can be changed at all by any means\'. If this wouldn\'t be the case, a lot of consistency-problems and scenarios should be taken into account.\u003cbr\\/\u003e\\n3. Is the relation Master-Slave really an N:M-relation and if so, are N and\\/or M somehow limited?\u003cbr\\/\u003e\\n4. Master has still connection with Slave, but for some reason the Slave does not process the received logrecords: will this be seen as \'unexpected failure\'?\u003cbr\\/\u003e\\n5. Network issue: what to do in case of missing packages?\u003cbr\\/\u003e\\n6. Network issue: will a multipath-configuration be supported? This will lead to a Slave receiving records in a wrong sequence\u003cbr\\/\u003e\\n7. Network issue: multiple-network-interfaces: question as for 6). In addition: special scenario(s) if one such interface is dropped?\u003cbr\\/\u003e\\n8. If 1 Master replicates to 2 different Slaves and one of these Slaves has a lower \'bandwidth\' to receive\\/process the logs, will this one then determine the total (replication)transactional processes, thus also limit sending to the other Slave?\u003cbr\\/\u003e\\n9. If Derby instance I1 contains database D1 as Master, database D2 as Slave, instance I2 contains the same but with opposite roles: isn\'t there a big risk for a \'dead\' race in case of problems with main memory log buffer? \u003c\\/p\u003e\\n\\n\u003cp\u003eThanks!\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"scheur\\\" id=\\\"commentauthor_12571021_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=scheur\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"scheur\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Henri van de Scheur\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571021_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/08 11:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-21T11:36:54+0000\'\u003e21\\/Feb\\/08 11:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have a few comments\\/questions to the Functional Specification for Derby Replication - rev. 9.0. \\n\\n Great to see a chapter \'Handling Failure Scenarios\', but as stated here, there are numerous failure scenarios which can be encountered. As a follow-up,  I would like to raise the following questions\\/comments: \\n1. Would be nice to also describe a scenario where the slave Derby instance crashes \\n2. Please confirm the following statement: \'Since the slave database is in recovery-mode, no data in the slave database can be changed at all by any means\'. If this wouldn\'t be the case, a lot of consistency-problems and scenarios should be taken into account. \\n3. Is the relation Master-Slave really an N:M-relation and if so, are N and\\/or M somehow limited? \\n4. Master has still connection with Slave, but for some reason the Slave does not process the received logrecords: will this be seen as \'unexpected failure\'? \\n5. Network issue: what to do in case of missing packages? \\n6. Network issue: will a multipath-configuration be supported? This will lead to a Slave receiving records in a wrong sequence \\n7. Network issue: multiple-network-interfaces: question as for 6). In addition: special scenario(s) if one such interface is dropped? \\n8. If 1 Master replicates to 2 different Slaves and one of these Slaves has a lower \'bandwidth\' to receive\\/process the logs, will this one then determine the total (replication)transactional processes, thus also limit sending to the other Slave? \\n9. If Derby instance I1 contains database D1 as Master, database D2 as Slave, instance I2 contains the same but with opposite roles: isn\'t there a big risk for a \'dead\' race in case of problems with main memory log buffer?  \\n\\n Thanks! \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571306\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12571306&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571306\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12571306_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571306_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 08:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T08:27:04+0000\'\u003e22\\/Feb\\/08 08:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for reviewing the funcspec. I\'ll answer your questions inline. \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; 1. Would be nice to also describe a scenario where the slave Derby instance crashes\u003c\\/p\u003e\\n\\n\u003cp\u003eI agree - I\'ll add the following information in the next rev of the funcspec:\u003c\\/p\u003e\\n\\n\u003cp\u003eIf the slave crashes, the master will try to reestablish the connection (but will not make it) until the replication log buffer is full or until the master is told to stop replication (stopMaster). \u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; 2. Please confirm the following statement: \'Since the slave database is in recovery-mode, no data in the slave database can be changed at all by any means\'. If this wouldn\'t be the case, a lot of consistency-problems and scenarios should be taken into account.\u003c\\/p\u003e\\n\\n\u003cp\u003eConfirmed. We do not allow any operation on the slave instance of the database, not even reads. (Although reads may me allowed in a later (post 10.4) improvement.)\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; 3. Is the relation Master-Slave really an N:M-relation and if so, are N and\\/or M somehow limited?\u003c\\/p\u003e\\n\\n\u003cp\u003e1:1 - There will be exactly one master and one slave for each replicated database \'x\'. However, one Derby instance may act as a master or a slave for many different databases. \u003c\\/p\u003e\\n\\n\u003cp\u003eIn the following example, there are three Derby instances managing a total of five databases. The databases are either booted the normal non-replicated way, in master mode or in slave mode. There is exactly one master and one slave per replicated db:\u003c\\/p\u003e\\n\\n\u003cp\u003eDerby Inst 1      Derby Inst 2      Derby Inst 3\u003cbr\\/\u003e\\nNormal: \'db1\'  \u003cbr\\/\u003e\\nMaster: \'db2\'     Slave:  \'db2\'\u003cbr\\/\u003e\\nMaster: \'db3\'                                Slave:  \'db3\'\u003cbr\\/\u003e\\nSlave:  \'db4\'       Master: \'db4\'\u003cbr\\/\u003e\\n                                                       Normal: \'db5\'\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; 4. Master has still connection with Slave, but for some reason the Slave does not process the received logrecords: will this be seen as \'unexpected failure\'?\u003c\\/p\u003e\\n\\n\u003cp\u003eYes. That would be a code bug, and considered failsafe because the slave code checks that each and every log record it applies to the local log has the exact same byte-position as it had on the master side. If a single log record is lost somewhere, the slave will notice. Of course, there could be other bugs like the slave acting as a black hole (receiving packages and replying with an ack (implicitly through TCP), but not adding the received log records to the local log). That kind of bug would not be noticed until failover\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; 5. Network issue: what to do in case of missing packages?\u003cbr\\/\u003e\\n&gt; 6. Network issue: will a multipath-configuration be supported? This will lead to a Slave receiving records in a wrong sequence\u003cbr\\/\u003e\\n&gt; 7. Network issue: multiple-network-interfaces: question as for 6). In addition: special scenario(s) if one such interface is dropped?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe network communication is based on a TCP on one single socket. The connection ensures correct ordering of packages since the TCP protocol confirms that each package is delivered. A new package is not sent before the previous has been acked.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; 8. If 1 Master replicates to 2 different Slaves and one of these Slaves has a lower \'bandwidth\' to receive\\/process the logs, will this one then determine the total (replication)transactional processes, thus also limit sending to the other Slave?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe \'one master, one slave\' configuration prevents this.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; 9. If Derby instance I1 contains database D1 as Master, database D2 as Slave, instance I2 contains the same but with opposite roles: isn\'t there a big risk for a \'dead\' race in case of problems with main memory log buffer?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe replication log buffers are not shared. Each master will have it\'s own main memory replication log buffer. (Could you please rephrase the question if this answer was gibberish?)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12571306_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571306_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 08:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T08:27:04+0000\'\u003e22\\/Feb\\/08 08:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for reviewing the funcspec. I\'ll answer your questions inline.  \\n\\n &gt; 1. Would be nice to also describe a scenario where the slave Derby instance crashes \\n\\n I agree - I\'ll add the following information in the next rev of the funcspec: \\n\\n If the slave crashes, the master will try to reestablish the connection (but will not make it) until the replication log buffer is full or until the master is told to stop replication (stopMaster).  \\n\\n &gt; 2. Please confirm the following statement: \'Since the slave database is in recovery-mode, no data in the slave database can be changed at all by any means\'. If this wouldn\'t be the case, a lot of consistency-problems and scenarios should be taken into account. \\n\\n Confirmed. We do not allow any operation on the slave instance of the database, not even reads. (Although reads may me allowed in a later (post 10.4) improvement.) \\n\\n &gt; 3. Is the relation Master-Slave really an N:M-relation and if so, are N and\\/or M somehow limited? \\n\\n 1:1 - There will be exactly one master and one slave for each replicated database \'x\'. However, one Derby instance may act as a master or a slave for many different databases.  \\n\\n In the following example, there are three Derby instances managing a total of five databases. The databases are either booted the normal non-replicated way, in master mode or in slave mode. There is exactly one master and one slave per replicated db: \\n\\n Derby Inst 1      Derby Inst 2      Derby Inst 3 \\nNormal: \'db1\'   \\nMaster: \'db2\'     Slave:  \'db2\' \\nMaster: \'db3\'                                Slave:  \'db3\' \\nSlave:  \'db4\'       Master: \'db4\' \\n                                                       Normal: \'db5\' \\n\\n &gt; 4. Master has still connection with Slave, but for some reason the Slave does not process the received logrecords: will this be seen as \'unexpected failure\'? \\n\\n Yes. That would be a code bug, and considered failsafe because the slave code checks that each and every log record it applies to the local log has the exact same byte-position as it had on the master side. If a single log record is lost somewhere, the slave will notice. Of course, there could be other bugs like the slave acting as a black hole (receiving packages and replying with an ack (implicitly through TCP), but not adding the received log records to the local log). That kind of bug would not be noticed until failover \\n\\n &gt; 5. Network issue: what to do in case of missing packages? \\n&gt; 6. Network issue: will a multipath-configuration be supported? This will lead to a Slave receiving records in a wrong sequence \\n&gt; 7. Network issue: multiple-network-interfaces: question as for 6). In addition: special scenario(s) if one such interface is dropped? \\n\\n The network communication is based on a TCP on one single socket. The connection ensures correct ordering of packages since the TCP protocol confirms that each package is delivered. A new package is not sent before the previous has been acked. \\n\\n &gt; 8. If 1 Master replicates to 2 different Slaves and one of these Slaves has a lower \'bandwidth\' to receive\\/process the logs, will this one then determine the total (replication)transactional processes, thus also limit sending to the other Slave? \\n\\n The \'one master, one slave\' configuration prevents this. \\n\\n &gt; 9. If Derby instance I1 contains database D1 as Master, database D2 as Slave, instance I2 contains the same but with opposite roles: isn\'t there a big risk for a \'dead\' race in case of problems with main memory log buffer? \\n\\n The replication log buffers are not shared. Each master will have it\'s own main memory replication log buffer. (Could you please rephrase the question if this answer was gibberish?)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571307\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12571307&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571307\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12571307_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571307_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 08:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T08:34:06+0000\'\u003e22\\/Feb\\/08 08:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRetrying example in answer to Q3 - (probably not looking good, but at least readable):\u003c\\/p\u003e\\n\\n\u003cp\u003eDerby Inst 1.....Derby Inst 2.....Derby Inst 3\u003cbr\\/\u003e\\nNormal: \'db1\'\u003cbr\\/\u003e\\nMaster: \'db2\'...Slave: \'db2\'\u003cbr\\/\u003e\\nMaster: \'db3\'..............................Slave: \'db3\'\u003cbr\\/\u003e\\nSlave: \'db4\'.....Master: \'db4\'\u003cbr\\/\u003e\\n....................................................Normal: \'db5\' \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12571307_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571307_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 08:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T08:34:06+0000\'\u003e22\\/Feb\\/08 08:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Retrying example in answer to Q3 - (probably not looking good, but at least readable): \\n\\n Derby Inst 1.....Derby Inst 2.....Derby Inst 3 \\nNormal: \'db1\' \\nMaster: \'db2\'...Slave: \'db2\' \\nMaster: \'db3\'..............................Slave: \'db3\' \\nSlave: \'db4\'.....Master: \'db4\' \\n....................................................Normal: \'db5\'               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571330\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12571330&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571330\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"scheur\\\" id=\\\"commentauthor_12571330_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=scheur\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"scheur\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Henri van de Scheur\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571330_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 09:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T09:42:42+0000\'\u003e22\\/Feb\\/08 09:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks a lot J\\u00F8rgen for your quick and descriptive replies!\u003c\\/p\u003e\\n\\n\u003cp\u003eI regard all of my questions answered, apart from the last one, but that was more due to a bad formulated question. I will try to explain it through an example.\u003cbr\\/\u003e\\nEspecially the fact having \'1 Master, 1 Slave\', reduces a lot of possible failure scenarios and makes it a lot easier. I just hadn\'t interpreted the spec this way. \u003cbr\\/\u003e\\nLimited network communication to only 1 single socket, also limits possible failure scenarios.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo to question 9. \u003cbr\\/\u003e\\nLet\'s say that Instance I1 is not able to send log for database D1 to the slave in Instance I2 at the required pace. I1 will then try to increase the speed of log shipment. The latter might lead to reduced capacity in receiving log from Instance I2 and database D2. This then might lead to increasing speed of log shipment from instance I2, again leading to the same symptom: reduced capacity of receiving log shipments from Instance I1, etc.....\u003c\\/p\u003e\\n\\n\u003cp\u003eI hope this example makes my point more clear. But I guess response times will increase avoiding this situation.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"scheur\\\" id=\\\"commentauthor_12571330_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=scheur\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"scheur\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Henri van de Scheur\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571330_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 09:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T09:42:42+0000\'\u003e22\\/Feb\\/08 09:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks a lot J\\u00F8rgen for your quick and descriptive replies! \\n\\n I regard all of my questions answered, apart from the last one, but that was more due to a bad formulated question. I will try to explain it through an example. \\nEspecially the fact having \'1 Master, 1 Slave\', reduces a lot of possible failure scenarios and makes it a lot easier. I just hadn\'t interpreted the spec this way.  \\nLimited network communication to only 1 single socket, also limits possible failure scenarios. \\n\\n So to question 9.  \\nLet\'s say that Instance I1 is not able to send log for database D1 to the slave in Instance I2 at the required pace. I1 will then try to increase the speed of log shipment. The latter might lead to reduced capacity in receiving log from Instance I2 and database D2. This then might lead to increasing speed of log shipment from instance I2, again leading to the same symptom: reduced capacity of receiving log shipments from Instance I1, etc..... \\n\\n I hope this example makes my point more clear. But I guess response times will increase avoiding this situation.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12571333\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12571333&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12571333\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12571333_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571333_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 09:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T09:54:54+0000\'\u003e22\\/Feb\\/08 09:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRe Q9: \u003cbr\\/\u003e\\nAs you indicate, this situation will eventually increase the response time for both databases. I would consider this a special case of the failure scenario described as \\\"The master Derby instance is not able to send log to the slave at the same pace as log is generated....\\\"\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12571333_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12571333_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Feb\\/08 09:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-22T09:54:54+0000\'\u003e22\\/Feb\\/08 09:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Re Q9:  \\nAs you indicate, this situation will eventually increase the response time for both databases. I would consider this a special case of the failure scenario described as \\\"The master Derby instance is not able to send log to the slave at the same pace as log is generated....\\\"              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12574235\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12574235&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12574235\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12574235_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12574235_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Mar\\/08 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-02T17:26:32+0000\'\u003e02\\/Mar\\/08 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI started working on a replication wiki over the weekend. I spent the weekend writing down the\u003cbr\\/\u003e\\ninitial set of details that I thought the wiki should contain and which would be relevant to a\u003cbr\\/\u003e\\nnew user of the replication feature. I wrote these details in the form of a text file. \u003c\\/p\u003e\\n\\n\u003cp\u003eI would be converting the text file into a replication wiki over the next week. \u003c\\/p\u003e\\n\\n\u003cp\u003eSince this issue deals with the replication design and tries to identify issues that are relevant \u003cbr\\/\u003e\\nto this feature I am attaching whatever information I have assimilated to this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eNote that the attached pdf contains a very simplified block diagram of the main modules involved\u003cbr\\/\u003e\\nin replication. I purposely made this simplified to enable the easy understanding of the replication\u003cbr\\/\u003e\\ndesign.\u003c\\/p\u003e\\n\\n\u003cp\u003eMore detailed descriptions of the feature can be got by following the JIRA pointers that are mentioned\u003cbr\\/\u003e\\nin the explanations of the various blocks of this simplified block diagram, and going through the\u003cbr\\/\u003e\\nspecific JIRA issues.\u003c\\/p\u003e\\n\\n\u003cp\u003eI have tried to organize the information I have collected or re-collected so that it will be easy\u003cbr\\/\u003e\\nfor reviewers to point out places in which I have gone wrong.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will be making further updates, improvements and modifications directly to the wiki and will not\u003cbr\\/\u003e\\nbe attaching it to this issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12574235_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12574235_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Mar\\/08 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-02T17:26:32+0000\'\u003e02\\/Mar\\/08 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I started working on a replication wiki over the weekend. I spent the weekend writing down the \\ninitial set of details that I thought the wiki should contain and which would be relevant to a \\nnew user of the replication feature. I wrote these details in the form of a text file.  \\n\\n I would be converting the text file into a replication wiki over the next week.  \\n\\n Since this issue deals with the replication design and tries to identify issues that are relevant  \\nto this feature I am attaching whatever information I have assimilated to this issue. \\n\\n Note that the attached pdf contains a very simplified block diagram of the main modules involved \\nin replication. I purposely made this simplified to enable the easy understanding of the replication \\ndesign. \\n\\n More detailed descriptions of the feature can be got by following the JIRA pointers that are mentioned \\nin the explanations of the various blocks of this simplified block diagram, and going through the \\nspecific JIRA issues. \\n\\n I have tried to organize the information I have collected or re-collected so that it will be easy \\nfor reviewers to point out places in which I have gone wrong. \\n\\n I will be making further updates, improvements and modifications directly to the wiki and will not \\nbe attaching it to this issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12576921\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12576921&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12576921\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12576921_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12576921_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/08 09:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-10T09:57:20+0000\'\u003e10\\/Mar\\/08 09:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached new funcspec (v10). It includes \'slave crashes\' failure scenario, new default replication port (4851) and camel-cased slaveHost\\/slavePort \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12576921_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12576921_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/08 09:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-10T09:57:20+0000\'\u003e10\\/Mar\\/08 09:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached new funcspec (v10). It includes \'slave crashes\' failure scenario, new default replication port (4851) and camel-cased slaveHost\\/slavePort               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12576931\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12576931&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12576931\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12576931_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12576931_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/08 10:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-10T10:21:11+0000\'\u003e10\\/Mar\\/08 10:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFuncspec v10: Replication system privilege not included in 10.4\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12576931_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12576931_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Mar\\/08 10:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-10T10:21:11+0000\'\u003e10\\/Mar\\/08 10:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Funcspec v10: Replication system privilege not included in 10.4              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12592629\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12592629&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12592629\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12592629_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592629_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/08 09:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-27T09:23:47+0000\'\u003e27\\/Apr\\/08 09:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIs there anything preventing this issue from being marked as resolved? After all, 10.4.1.3 has been released including the replication feature.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12592629_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592629_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Apr\\/08 09:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-27T09:23:47+0000\'\u003e27\\/Apr\\/08 09:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Is there anything preventing this issue from being marked as resolved? After all, 10.4.1.3 has been released including the replication feature.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12592750\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2872?focusedCommentId=12592750&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12592750\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12592750_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592750_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/08 06:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-28T06:42:49+0000\'\u003e28\\/Apr\\/08 06:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAll subtasks completed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12592750_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592750_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Apr\\/08 06:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-28T06:42:49+0000\'\u003e28\\/Apr\\/08 06:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    All subtasks completed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1516198290707"> 
    <input type="hidden" title="jira.request.server.time" value="568"> 
    <input type="hidden" title="jira.request.id" value="851x7488147x10"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="8"> 
    <input type="hidden" title="db.reads.time.in.ms" value="84"> 
    <input type="hidden" title="db.conns.time.in.ms" value="91"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 851x7488147x10
	          REQUEST TIMESTAMP : [17/Jan/2018:14:11:30 +0000]
	               REQUEST TIME : 0.5690
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 8

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=39, elapsedTotal=84989880, elapsedMin=463643, elapsedMax=34430260, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=43, elapsedTotal=91671646, elapsedMin=492498, elapsedMax=34488493, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>