<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|e28de1f629a756959947b8ce748f83006c8b3a69|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"28b9de4acae09e\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-1338"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-1338] Client tests DerbyNetNewServer and NSinSameVM fail with NoClassDefFoundError: DRDAProtocolExceptionInfo when run from classes dir - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-1338] Client tests DerbyNetNewServer and NSinSameVM fail with NoClassDefFoundError: DRDAProtocolExceptionInfo when run from classes dir - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-1338">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-1338" href="/jira/browse/DERBY-1338" id="key-val" rel="12343348">DERBY-1338</a></li>
                </ol>
                <h1 id="summary-val">Client tests DerbyNetNewServer and NSinSameVM fail with NoClassDefFoundError: DRDAProtocolExceptionInfo when run from classes dir</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-1338"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-1338/DERBY-1338.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-1338/DERBY-1338.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-1338/DERBY-1338.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-1338/DERBY-1338.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/minor.svg" title="Minor - Minor loss of function, or other problem where easy workaround is present." width="16"> Minor </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.2.1.6 ">10.2.1.6</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.2.1.6" title="10.2.1.6 ">10.2.1.6</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+%22Network+Server%22" title="Network Server ">Network Server</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12343348-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value">
                     Sun JDK 1.4.2, Sun JDK 1.5 on Solaris
                    <br> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>When run from Sun JDK 1.4.2 and Sun JDK 1.5, these two tests fail when run from the<br> classes directory. They work, though, when run from jars.</p> 
                  <p>Running NSinSameVM in my sandbox:</p> 
                  <p>bash-3.00$ java -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest derbynet/NSinSameJVM.java</p> 
                  <ul> 
                   <li> 
                    <ul> 
                     <li> 
                      <ul> 
                       <li>Start: NSinSameJVM jdk1.4.2_05 DerbyNetClient 2006-05-22 14:49:05 ***<br> Initialize for framework: DerbyNetClient<br> startServer = false. Bypass server startup<br> 6 add<br> &gt; java.lang.NoClassDefFoundError: org/apache/derby/impl/drda/DRDAProtocolExceptionInfo<br> Test Failed.</li> 
                       <li>End: NSinSameJVM jdk1.4.2_05 DerbyNetClient 2006-05-22 14:49:27 ***</li> 
                      </ul> </li> 
                    </ul> </li> 
                  </ul> 
                  <p>I get similar behavior for DerbyNetNewServer. I ran this on a Solaris 10/i86x box. Davis has seen it too, see <br> initial discusson on this thread: <a href="http://www.nabble.com/forum/ViewPost.jtp?post=4477600&amp;framed=y" class="external-link" rel="nofollow">http://www.nabble.com/forum/ViewPost.jtp?post=4477600&amp;framed=y</a></p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-1338?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-1338?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-1338?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-1338?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12335635" data-issue-id="12343348" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12335635/derby-1338.diff" draggable="true" data-downloadurl="text/x-patch:derby-1338.diff:https://issues.apache.org/jira/secure/attachment/12335635/derby-1338.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12335635/derby-1338.diff" title="Latest  20/Jun/06 06:03 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-patch:derby-1338.diff:https://issues.apache.org/jira/secure/attachment/12335635/derby-1338.diff">derby-1338.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-06-20T06:03:26.000Z">20/Jun/06 06:03</time>
                   </dd>
                   <dd class="attachment-size">
                    0.7 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12335634" data-issue-id="12343348" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12335634/derby-1338.stat" draggable="true" data-downloadurl="application/octet-stream:derby-1338.stat:https://issues.apache.org/jira/secure/attachment/12335634/derby-1338.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12335634/derby-1338.stat" title="Latest  20/Jun/06 06:03 - Dag H. Wanvik" draggable="true" data-downloadurl="application/octet-stream:derby-1338.stat:https://issues.apache.org/jira/secure/attachment/12335634/derby-1338.stat">derby-1338.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-06-20T06:03:26.000Z">20/Jun/06 06:03</time>
                   </dd>
                   <dd class="attachment-size">
                    0.1 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_dagw" rel="dagw" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Dag H. Wanvik&quot;,&quot;emailAddress&quot;:&quot;dag.wanvik@oracle.com&quot;,&quot;username&quot;:&quot;dagw&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="dagw"></span></span> Dag H. Wanvik </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_dagw" rel="dagw" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Dag H. Wanvik&quot;,&quot;emailAddress&quot;:&quot;dag.wanvik@oracle.com&quot;,&quot;username&quot;:&quot;dagw&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="dagw"></span></span> Dag H. Wanvik </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="22/May/06 20:16"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-05-22T20:16:51+0000">22/May/06 20:16</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="10/Oct/06 16:55"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-10-10T16:55:22+0000">10/Oct/06 16:55</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="21/Jun/06 22:51"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-06-21T22:51:32+0000">21/Jun/06 22:51</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1338?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-1338?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12412772\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12412772&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12412772\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12412772_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412772_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/06 20:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-22T20:18:49+0000\'\u003e22\\/May\\/06 20:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e(quote from mail thread)\u003c\\/p\u003e\\n\\n\u003cp\u003eDag says:\u003c\\/p\u003e\\n\\n\u003cp\u003eI looked at this again: This is my understanding so far.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think this is a problem with the test and\\/or the server code.\u003cbr\\/\u003e\\nApperently there is a race condition between the connection being\u003cbr\\/\u003e\\nclosed and the shutdown of the server.  This test starts its own\u003cbr\\/\u003e\\nserver and then opens and closes a connection to it, in this case via\u003cbr\\/\u003e\\nthe derby client driver.  Skeleton code:\u003c\\/p\u003e\\n\\n\u003cp\u003e  server.start\u003cbr\\/\u003e\\n  conn = DriverManager.getConnection(&lt;derby client&gt;)\u003cbr\\/\u003e\\n  conn.close\u003cbr\\/\u003e\\n         &lt;inserting a small sleep here makes problem go away&gt;\u003cbr\\/\u003e\\n  server.shutdown\u003c\\/p\u003e\\n\\n\u003cp\u003eBy inserting a small sleep between the close and the shutdown, the\u003cbr\\/\u003e\\ntest works in my environment. I would guess the problem appears\u003cbr\\/\u003e\\nbecause the server gets to (start) shut down \u003cb\u003ebefore\u003c\\/b\u003e the close\u003cbr\\/\u003e\\nmessage process is started\\/completed, and when the server DRDA\u003cbr\\/\u003e\\nprotocol code is in the process of handling the close, the server is\u003cbr\\/\u003e\\ngoing down, hence the class not found exceptions.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe larger question is: Is there any way to avoid this in the server?\u003cbr\\/\u003e\\nUsers can hit this one, too, and it would be nice if the server were\u003cbr\\/\u003e\\nmore rubust. I think is possibly related to the problem discussed\u003cbr\\/\u003e\\nunder JIRA-1219 and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1326\\\" title=\\\"Network server may abandon sessions when Derby system is shutdown and this causes intermittent hangs in the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1326\\\"\u003e\u003cdel\u003eDERBY-1326\u003c\\/del\u003e\u003c\\/a\u003e, although in those cases, the problems\u003cbr\\/\u003e\\noccur further down the line: ghost sessions remain after shutdown\u003cbr\\/\u003e\\ncausing trouble on restart. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12412772_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412772_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/06 20:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-22T20:18:49+0000\'\u003e22\\/May\\/06 20:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    (quote from mail thread) \\n\\n Dag says: \\n\\n I looked at this again: This is my understanding so far. \\n\\n I think this is a problem with the test and\\/or the server code. \\nApperently there is a race condition between the connection being \\nclosed and the shutdown of the server.  This test starts its own \\nserver and then opens and closes a connection to it, in this case via \\nthe derby client driver.  Skeleton code: \\n\\n   server.start \\n  conn = DriverManager.getConnection(&lt;derby client&gt;) \\n  conn.close \\n         &lt;inserting a small sleep here makes problem go away&gt; \\n  server.shutdown \\n\\n By inserting a small sleep between the close and the shutdown, the \\ntest works in my environment. I would guess the problem appears \\nbecause the server gets to (start) shut down  before  the close \\nmessage process is started\\/completed, and when the server DRDA \\nprotocol code is in the process of handling the close, the server is \\ngoing down, hence the class not found exceptions. \\n\\n The larger question is: Is there any way to avoid this in the server? \\nUsers can hit this one, too, and it would be nice if the server were \\nmore rubust. I think is possibly related to the problem discussed \\nunder JIRA-1219 and   DERBY-1326  , although in those cases, the problems \\noccur further down the line: ghost sessions remain after shutdown \\ncausing trouble on restart.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12412773\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12412773&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12412773\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12412773_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412773_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/06 20:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-22T20:20:20+0000\'\u003e22\\/May\\/06 20:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDag.Wanvik@Sun.COM (Dag H. Wanvik) writes:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Hi,\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt; I looked at this again: This is my understanding so far.\u003c\\/p\u003e\\n\\n\u003cp\u003eOoops. The analysis in my previous post was for the test\u003cbr\\/\u003e\\nDerbyNetNewServer.java, which has a similar symptom in my\u003cbr\\/\u003e\\nenvironment. For NSinSameVM.java, I found that the connection is\u003cbr\\/\u003e\\nactually \u003cb\u003enot\u003c\\/b\u003e closed prior to shutdown:\u003c\\/p\u003e\\n\\n\u003cp\u003e :\u003cbr\\/\u003e\\n \\/\\/ Leave the connection open before shutdown to make \u003cbr\\/\u003e\\n \\/\\/ sure the thread closes down. \u003cbr\\/\u003e\\n \\/\\/ connection.close();\u003cbr\\/\u003e\\n :\u003cbr\\/\u003e\\n serverControl.shutdown();\u003c\\/p\u003e\\n\\n\u003cp\u003eBy uncommenting the close, the test passed. I am not sure what the\u003cbr\\/\u003e\\nmeaning of the above comment is.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnyway, it would seem my explanation in my previous post is not the\u003cbr\\/\u003e\\nwhole story here. One hypothesis might be that the error occurs at\u003cbr\\/\u003e\\nshutdown when the connection is not closed, but then, I don\'t\u003cbr\\/\u003e\\nunderstand why it works if run from jars. Can anyone shed some light\u003cbr\\/\u003e\\non this?\u003c\\/p\u003e\\n\\n\u003cp\u003eDag\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12412773_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412773_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/06 20:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-22T20:20:20+0000\'\u003e22\\/May\\/06 20:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dag.Wanvik@Sun.COM (Dag H. Wanvik) writes: \\n\\n &gt; Hi, \\n&gt; \\n&gt; I looked at this again: This is my understanding so far. \\n\\n Ooops. The analysis in my previous post was for the test \\nDerbyNetNewServer.java, which has a similar symptom in my \\nenvironment. For NSinSameVM.java, I found that the connection is \\nactually  not  closed prior to shutdown: \\n\\n  : \\n \\/\\/ Leave the connection open before shutdown to make  \\n \\/\\/ sure the thread closes down.  \\n \\/\\/ connection.close(); \\n : \\n serverControl.shutdown(); \\n\\n By uncommenting the close, the test passed. I am not sure what the \\nmeaning of the above comment is. \\n\\n Anyway, it would seem my explanation in my previous post is not the \\nwhole story here. One hypothesis might be that the error occurs at \\nshutdown when the connection is not closed, but then, I don\'t \\nunderstand why it works if run from jars. Can anyone shed some light \\non this? \\n\\n Dag              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12412775\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12412775&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12412775\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12412775_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412775_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/06 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-22T20:21:34+0000\'\u003e22\\/May\\/06 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBryan Pendleton &lt;bpendleton@amberpoint.com&gt; writes:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; This is very interesting! I don\'t know what is going on here, either, but\u003cbr\\/\u003e\\n&gt; it sounds very similar to the issues that I\'ve been investigating with\u003cbr\\/\u003e\\n&gt; Deepa and Kathey under \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1326\\\" title=\\\"Network server may abandon sessions when Derby system is shutdown and this causes intermittent hangs in the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1326\\\"\u003e\u003cdel\u003eDERBY-1326\u003c\\/del\u003e\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1219\\\" title=\\\"jdbcapi\\/checkDataSource.java and jdbcapi\\/checkDataSource30.java hang intermittently with client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1219\\\"\u003e\u003cdel\u003eDERBY-1219\u003c\\/del\u003e\u003c\\/a\u003e.\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt; I\'m hoping to put some effort into Network Server session\\/connection\u003cbr\\/\u003e\\n&gt; management in the context of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1326\\\" title=\\\"Network server may abandon sessions when Derby system is shutdown and this causes intermittent hangs in the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1326\\\"\u003e\u003cdel\u003eDERBY-1326\u003c\\/del\u003e\u003c\\/a\u003e.\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt; I think it is too soon to tell whether the problems you are seeing\u003cbr\\/\u003e\\n&gt; are identical to those of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1326\\\" title=\\\"Network server may abandon sessions when Derby system is shutdown and this causes intermittent hangs in the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1326\\\"\u003e\u003cdel\u003eDERBY-1326\u003c\\/del\u003e\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1219\\\" title=\\\"jdbcapi\\/checkDataSource.java and jdbcapi\\/checkDataSource30.java hang intermittently with client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1219\\\"\u003e\u003cdel\u003eDERBY-1219\u003c\\/del\u003e\u003c\\/a\u003e, but I certainly\u003cbr\\/\u003e\\n&gt; think that this part of the system will benefit from having a number\u003cbr\\/\u003e\\n&gt; of contributors carefully analyzing it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12412775_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412775_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/06 20:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-22T20:21:34+0000\'\u003e22\\/May\\/06 20:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bryan Pendleton &lt;bpendleton@amberpoint.com&gt; writes: \\n\\n &gt; This is very interesting! I don\'t know what is going on here, either, but \\n&gt; it sounds very similar to the issues that I\'ve been investigating with \\n&gt; Deepa and Kathey under   DERBY-1326   and   DERBY-1219  . \\n&gt; \\n&gt; I\'m hoping to put some effort into Network Server session\\/connection \\n&gt; management in the context of   DERBY-1326  . \\n&gt; \\n&gt; I think it is too soon to tell whether the problems you are seeing \\n&gt; are identical to those of   DERBY-1326   and   DERBY-1219  , but I certainly \\n&gt; think that this part of the system will benefit from having a number \\n&gt; of contributors carefully analyzing it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12412791\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12412791&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12412791\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12412791_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412791_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/06 22:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-22T22:24:46+0000\'\u003e22\\/May\\/06 22:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have looked at this some more and I think I understand\u003cbr\\/\u003e\\nmore of what\'s happening, although the root cause is still \u003cbr\\/\u003e\\nan open question. Here are my findings so far:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eWhen I run this with JDK1.6 the test works.\u003c\\/li\u003e\\n\\t\u003cli\u003eRunning without security manager did not impact the error.\u003c\\/li\u003e\\n\\t\u003cli\u003eI ran the test with -Duseprocess=false and the error still occurs,\u003cbr\\/\u003e\\n  so I can see what happens in jdb. In jdb, I was able to find where\u003cbr\\/\u003e\\n  the exception occurs: \u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e  As the NetworkServerStarter#blockingStart, released from its wait on\u003cbr\\/\u003e\\n  shutdownSync, is dowing the actual shutdown (interrupting threads,\u003cbr\\/\u003e\\n  closing server socket), the connection thread is blocked on a read:\u003c\\/p\u003e\\n\\n\u003cp\u003eDRDAConnThread_4\u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e where\u003cbr\\/\u003e\\n  \u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e java.net.SocketInputStream.socketRead0 (native method)\u003cbr\\/\u003e\\n  \u003cspan class=\\\"error\\\"\u003e&#91;2&#93;\u003c\\/span\u003e java.net.SocketInputStream.read (SocketInputStream.java:129)\u003cbr\\/\u003e\\n  \u003cspan class=\\\"error\\\"\u003e&#91;3&#93;\u003c\\/span\u003e org.apache.derby.impl.drda.DDMReader.fill (DDMReader.java:1,720)\u003cbr\\/\u003e\\n  \u003cspan class=\\\"error\\\"\u003e&#91;4&#93;\u003c\\/span\u003e org.apache.derby.impl.drda.DDMReader.ensureALayerDataInBuffer (DDMReader.java:1,473)\u003cbr\\/\u003e\\n  \u003cspan class=\\\"error\\\"\u003e&#91;5&#93;\u003c\\/span\u003e org.apache.derby.impl.drda.DDMReader.readDssHeader (DDMReader.java:315)\u003cbr\\/\u003e\\n  \u003cspan class=\\\"error\\\"\u003e&#91;6&#93;\u003c\\/span\u003e org.apache.derby.impl.drda.DRDAConnThread.processCommands (DRDAConnThread.java:628)\u003cbr\\/\u003e\\n  \u003cspan class=\\\"error\\\"\u003e&#91;7&#93;\u003c\\/span\u003e org.apache.derby.impl.drda.DRDAConnThread.run (DRDAConnThread.java:238)\u003c\\/p\u003e\\n\\n\u003cp\u003eThe read then fails when socket is closed, and gives an IOException\u003cbr\\/\u003e\\nhere:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; breakpoint hit: \\\"thread=DRDAConnThread_4\\\",\u003cbr\\/\u003e\\n&gt; org.apache.derby.impl.drda.DDMReader.fill(), line=1,724 bci=43\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; DRDAConnThread_4\u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e print ioe\u003cbr\\/\u003e\\n&gt;  ioe = \\\"java.net.SocketException: Socket closed\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eAt this point the method markCommunicationsFailure is called, which\u003cbr\\/\u003e\\ntries to create an exception of class DRDAProtocolException. This is\u003cbr\\/\u003e\\nwhere the class loader gives the error. I used jdb to check which\u003cbr\\/\u003e\\nclasses were loaded \u003cb\u003ebefore\u003c\\/b\u003e this line:\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tthrow DRDAProtocolException.newDisconnectException(this,oa);\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd I could see that \u003cb\u003eboth\u003c\\/b\u003e DRDAProtocolException and\u003cbr\\/\u003e\\nDRDAProtocolExceptionInfo were unknown to the VM. After I step this\u003cbr\\/\u003e\\nstatement in jdb, DRDAProtocolException is known, but \u003cb\u003enot\u003c\\/b\u003e\u003cbr\\/\u003e\\nDRDAProtocolExceptionInfo, hence the error. Why it cannot load it, I\u003cbr\\/\u003e\\ndon\'t know.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf I make a dummy DRDAProtocolExceptionInfo object in\u003cbr\\/\u003e\\nNetworkServerControlImpl, the error goes away.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis all leads me to believe that the Derby code is ok, and that this\u003cbr\\/\u003e\\nis a class loader issue, all the more so, since the problem goes away\u003cbr\\/\u003e\\nwhen the test is run with jars or with the newer JDK1.6.\u003c\\/p\u003e\\n\\n\u003cp\u003eI did run the test inside jdb with JDK1.6 and could see that both\u003cbr\\/\u003e\\nclasses got loaded correctly at this point in the code.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12412791_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412791_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/06 22:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-22T22:24:46+0000\'\u003e22\\/May\\/06 22:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have looked at this some more and I think I understand \\nmore of what\'s happening, although the root cause is still  \\nan open question. Here are my findings so far: \\n\\n \\n\\t When I run this with JDK1.6 the test works. \\n\\t Running without security manager did not impact the error. \\n\\t I ran the test with -Duseprocess=false and the error still occurs, \\n  so I can see what happens in jdb. In jdb, I was able to find where \\n  the exception occurs:  \\n \\n\\n\\n   As the NetworkServerStarter#blockingStart, released from its wait on \\n  shutdownSync, is dowing the actual shutdown (interrupting threads, \\n  closing server socket), the connection thread is blocked on a read: \\n\\n DRDAConnThread_4 &#91;1&#93;  where \\n   &#91;1&#93;  java.net.SocketInputStream.socketRead0 (native method) \\n   &#91;2&#93;  java.net.SocketInputStream.read (SocketInputStream.java:129) \\n   &#91;3&#93;  org.apache.derby.impl.drda.DDMReader.fill (DDMReader.java:1,720) \\n   &#91;4&#93;  org.apache.derby.impl.drda.DDMReader.ensureALayerDataInBuffer (DDMReader.java:1,473) \\n   &#91;5&#93;  org.apache.derby.impl.drda.DDMReader.readDssHeader (DDMReader.java:315) \\n   &#91;6&#93;  org.apache.derby.impl.drda.DRDAConnThread.processCommands (DRDAConnThread.java:628) \\n   &#91;7&#93;  org.apache.derby.impl.drda.DRDAConnThread.run (DRDAConnThread.java:238) \\n\\n The read then fails when socket is closed, and gives an IOException \\nhere: \\n\\n &gt; breakpoint hit: \\\"thread=DRDAConnThread_4\\\", \\n&gt; org.apache.derby.impl.drda.DDMReader.fill(), line=1,724 bci=43 \\n&gt;  \\n&gt; DRDAConnThread_4 &#91;1&#93;  print ioe \\n&gt;  ioe = \\\"java.net.SocketException: Socket closed\\\" \\n\\n At this point the method markCommunicationsFailure is called, which \\ntries to create an exception of class DRDAProtocolException. This is \\nwhere the class loader gives the error. I used jdb to check which \\nclasses were loaded  before  this line: \\n\\n \\tthrow DRDAProtocolException.newDisconnectException(this,oa); \\n\\n And I could see that  both  DRDAProtocolException and \\nDRDAProtocolExceptionInfo were unknown to the VM. After I step this \\nstatement in jdb, DRDAProtocolException is known, but  not  \\nDRDAProtocolExceptionInfo, hence the error. Why it cannot load it, I \\ndon\'t know. \\n\\n If I make a dummy DRDAProtocolExceptionInfo object in \\nNetworkServerControlImpl, the error goes away. \\n\\n This all leads me to believe that the Derby code is ok, and that this \\nis a class loader issue, all the more so, since the problem goes away \\nwhen the test is run with jars or with the newer JDK1.6. \\n\\n I did run the test inside jdb with JDK1.6 and could see that both \\nclasses got loaded correctly at this point in the code.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12412841\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12412841&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12412841\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12412841_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412841_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/May\\/06 05:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-23T05:46:11+0000\'\u003e23\\/May\\/06 05:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you for filing the bug, and for posting the results of your\u003cbr\\/\u003e\\ndebugging. Your analysis is very interesting, and I can\'t think\u003cbr\\/\u003e\\nof a reason why the class would fail to be loaded.\u003c\\/p\u003e\\n\\n\u003cp\u003eI was wondering if there was a way to figure out whether this\u003cbr\\/\u003e\\nproblem \u003cb\u003eonly\u003c\\/b\u003e happens at server shutdown, or whether it could\u003cbr\\/\u003e\\nhappen earlier in the server\'s lifetime as well.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor example, would it be possible to run a test in which you\u003cbr\\/\u003e\\ncause a client to break a connection with the server during\u003cbr\\/\u003e\\n\\\"normal\\\" server processing, because it seems like in that case\u003cbr\\/\u003e\\nthe server should go through a similar path (calling the\u003cbr\\/\u003e\\nmarkCommunicationsFailure routine to handle the IOException),\u003cbr\\/\u003e\\nand in that case does the DRDAProtocolExceptionInfo class get\u003cbr\\/\u003e\\nloaded successfully?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12412841_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12412841_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/May\\/06 05:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-23T05:46:11+0000\'\u003e23\\/May\\/06 05:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you for filing the bug, and for posting the results of your \\ndebugging. Your analysis is very interesting, and I can\'t think \\nof a reason why the class would fail to be loaded. \\n\\n I was wondering if there was a way to figure out whether this \\nproblem  only  happens at server shutdown, or whether it could \\nhappen earlier in the server\'s lifetime as well. \\n\\n For example, would it be possible to run a test in which you \\ncause a client to break a connection with the server during \\n\\\"normal\\\" server processing, because it seems like in that case \\nthe server should go through a similar path (calling the \\nmarkCommunicationsFailure routine to handle the IOException), \\nand in that case does the DRDAProtocolExceptionInfo class get \\nloaded successfully?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12413021\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12413021&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12413021\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12413021_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12413021_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/May\\/06 05:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-24T05:44:44+0000\'\u003e24\\/May\\/06 05:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the suggestion Bryan. I tried it, but in that case the socket read \u003cbr\\/\u003e\\nreturns -1 (end of data) and all is well. So i had to do some more digging.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems clear that this is bug in the classloader.  I suggest a\u003cbr\\/\u003e\\nsimple workaround, see below.\u003c\\/p\u003e\\n\\n\u003cp\u003eI compiled my own version of URLClassLoader so I could see what\u003cbr\\/\u003e\\nhappens when the class fails to load and I found that the reading of\u003cbr\\/\u003e\\nthe actual bytes of the class fails with java.io.InterruptedIOException:\u003c\\/p\u003e\\n\\n\u003cp\u003ejava\\/net\\/URLClassLoader.java (JDK 1.5)\u003cbr\\/\u003e\\n                    :\u003cbr\\/\u003e\\nline 214           private Class defineClass(String name, Resource res) throws IOException {\u003cbr\\/\u003e\\n                       :\u003cbr\\/\u003e\\nline 256               byte[] b = res.getBytes();\u003cbr\\/\u003e\\n                                      **\u003cbr\\/\u003e\\nWe get java.io.InterruptedIOException here. This in turn causes\u003cbr\\/\u003e\\nURLClassLoader#findClass to throw ClassNotFoundException:\u003c\\/p\u003e\\n\\n\u003cp\u003eline 184           protected Class&lt;?&gt; findClass(final String name) \u003cbr\\/\u003e\\n                       throws ClassNotFoundException\u003cbr\\/\u003e\\n                       :\u003cbr\\/\u003e\\nline 194                    try \u003c\\/p\u003e\\n{\\n                                return defineClass(name, res);\\n                            }\\n\u003cp\u003e catch (IOException e) \u003c\\/p\u003e\\n{\\n                                throw new ClassNotFoundException(name, e);\\n                            }\\n\\n\\n\u003cp\u003eThe shutdown of the server \u003cb\u003ehas\u003c\\/b\u003e interrupted the thread, in\u003cbr\\/\u003e\\nNetworkServerStarter#blockingStart. So, is this the reason we get this\u003cbr\\/\u003e\\nexception? Most likely. I googled and found relevant these bug\u003cbr\\/\u003e\\nreports:\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4549130\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4549130\u003c\\/a\u003e\u003cbr\\/\u003e\\n\\tURLClassLoader: NoClassDefFoundError thrown when not using rt.jar\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4764778\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4764778\u003c\\/a\u003e\u003cbr\\/\u003e\\n\\tInterrupted thread can\'t load classes from classes directory (sol)\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4385444\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4385444\u003c\\/a\u003e\u003cbr\\/\u003e\\n        (spec) InterruptedIOException should not be required by platform specification (sol)\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=6375934\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=6375934\u003c\\/a\u003e\u003cbr\\/\u003e\\n        thread interruption interferes with classloading (sol)\u003c\\/p\u003e\\n\\n\u003cp\u003eI quote from the first:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; On Solaris java.io is interruptible. Therefore, if you\u003cbr\\/\u003e\\n&gt; read class from a classfile and the thread gets interrupted,\u003cbr\\/\u003e\\n&gt; one gets an InterruptedIOException.\u003cbr\\/\u003e\\n&gt; One needs to catch InterruptedIOException in defineClass\u003cbr\\/\u003e\\n&gt; of URLClassLoader and then retry.\u003c\\/p\u003e\\n\\n\u003cp\u003eA simple repro is enclosed:\u003c\\/p\u003e\\n\\n\u003cp\u003e----------------------------------------\u003cbr\\/\u003e\\npublic class Test {\u003cbr\\/\u003e\\n    public static void main(String[] args) \u003c\\/p\u003e\\n{\\n        new HappyClass();\\n        Thread.currentThread().interrupt();\\n        new UnhappyClass();\\n    }\\n\u003cp\u003e}\u003c\\/p\u003e\\n\\n\u003cp\u003eclass HappyClass {}\u003cbr\\/\u003e\\nclass UnhappyClass {}\u003cbr\\/\u003e\\n----------------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eThe second issue indicates that this has been fixed for Mustang. \u003c\\/p\u003e\\n\\n\u003cp\u003eIn deed, when I run this repro, it fails on JDK1.5, but \u003cb\u003enot\u003c\\/b\u003e on JDK\u003cbr\\/\u003e\\n1.6. It would seem this is the root cause of our problem, and that\u003cbr\\/\u003e\\nJDK1.6 does not have this problem. I checked the source for 1.6,\u003cbr\\/\u003e\\nthough, and the code in URLCLassLoader is unchanged, so presumably it\u003cbr\\/\u003e\\nhas been fixed somewhere else, the bug issue doesn\'t say how. \u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, \u003ca href=\\\"http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=6375934\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=6375934\u003c\\/a\u003e\u003cbr\\/\u003e\\ndated Jan 2006, seems to say it has not been fully fixed, even in\u003cbr\\/\u003e\\n1.6 - it seems to be gone, though \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eIt is a Solaris specific problem, according to CR 4385444, since under\u003cbr\\/\u003e\\nother OSes, the interrupting of a Java thread goes not give rise to\u003cbr\\/\u003e\\nthe InterruptedIOException.\u003c\\/p\u003e\\n\\n\u003cp\u003eAgain, this has not been seen when running from jars, but I think it\u003cbr\\/\u003e\\nis sufficiently annoying\\/risky that it would be nice to fix it, since\u003cbr\\/\u003e\\nit will be some time before we only run on 1.6 \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eAs I mentioned before, we can make sure the classes in question\u003cbr\\/\u003e\\n(DRDAProtocolExceptionInfo and DRDAProtocolException) are already\u003cbr\\/\u003e\\nloaded (by creating a dummy object) before the thread is interrupted,\u003cbr\\/\u003e\\nthus sidestepping the issue.  If nobody objects, I will post a patch\u003cbr\\/\u003e\\nwith this solution.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12413021_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12413021_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/May\\/06 05:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-05-24T05:44:44+0000\'\u003e24\\/May\\/06 05:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the suggestion Bryan. I tried it, but in that case the socket read  \\nreturns -1 (end of data) and all is well. So i had to do some more digging. \\n\\n It seems clear that this is bug in the classloader.  I suggest a \\nsimple workaround, see below. \\n\\n I compiled my own version of URLClassLoader so I could see what \\nhappens when the class fails to load and I found that the reading of \\nthe actual bytes of the class fails with java.io.InterruptedIOException: \\n\\n java\\/net\\/URLClassLoader.java (JDK 1.5) \\n                    : \\nline 214           private Class defineClass(String name, Resource res) throws IOException { \\n                       : \\nline 256               byte[] b = res.getBytes(); \\n                                      ** \\nWe get java.io.InterruptedIOException here. This in turn causes \\nURLClassLoader#findClass to throw ClassNotFoundException: \\n\\n line 184           protected Class&lt;?&gt; findClass(final String name)  \\n                       throws ClassNotFoundException \\n                       : \\nline 194                    try  \\n{\\n                                return defineClass(name, res);\\n                            }\\n  catch (IOException e)  \\n{\\n                                throw new ClassNotFoundException(name, e);\\n                            }\\n\\n\\n The shutdown of the server  has  interrupted the thread, in \\nNetworkServerStarter#blockingStart. So, is this the reason we get this \\nexception? Most likely. I googled and found relevant these bug \\nreports: \\n\\n  http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4549130  \\n\\tURLClassLoader: NoClassDefFoundError thrown when not using rt.jar \\n http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4764778  \\n\\tInterrupted thread can\'t load classes from classes directory (sol) \\n http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=4385444  \\n        (spec) InterruptedIOException should not be required by platform specification (sol) \\n http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=6375934  \\n        thread interruption interferes with classloading (sol) \\n\\n I quote from the first: \\n\\n &gt; On Solaris java.io is interruptible. Therefore, if you \\n&gt; read class from a classfile and the thread gets interrupted, \\n&gt; one gets an InterruptedIOException. \\n&gt; One needs to catch InterruptedIOException in defineClass \\n&gt; of URLClassLoader and then retry. \\n\\n A simple repro is enclosed: \\n\\n ---------------------------------------- \\npublic class Test { \\n    public static void main(String[] args)  \\n{\\n        new HappyClass();\\n        Thread.currentThread().interrupt();\\n        new UnhappyClass();\\n    }\\n } \\n\\n class HappyClass {} \\nclass UnhappyClass {} \\n---------------------------------------- \\n\\n The second issue indicates that this has been fixed for Mustang.  \\n\\n In deed, when I run this repro, it fails on JDK1.5, but  not  on JDK \\n1.6. It would seem this is the root cause of our problem, and that \\nJDK1.6 does not have this problem. I checked the source for 1.6, \\nthough, and the code in URLCLassLoader is unchanged, so presumably it \\nhas been fixed somewhere else, the bug issue doesn\'t say how.  \\n\\n However,  http:\\/\\/bugs.sun.com\\/bugdatabase\\/view_bug.do?bug_id=6375934  \\ndated Jan 2006, seems to say it has not been fully fixed, even in \\n1.6 - it seems to be gone, though   \\n\\n It is a Solaris specific problem, according to CR 4385444, since under \\nother OSes, the interrupting of a Java thread goes not give rise to \\nthe InterruptedIOException. \\n\\n Again, this has not been seen when running from jars, but I think it \\nis sufficiently annoying\\/risky that it would be nice to fix it, since \\nit will be some time before we only run on 1.6   \\n\\n As I mentioned before, we can make sure the classes in question \\n(DRDAProtocolExceptionInfo and DRDAProtocolException) are already \\nloaded (by creating a dummy object) before the thread is interrupted, \\nthus sidestepping the issue.  If nobody objects, I will post a patch \\nwith this solution. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12416817\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12416817&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12416817\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12416817_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12416817_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/06 05:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-20T05:56:52+0000\'\u003e20\\/Jun\\/06 05:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFrom: Bryan Pendleton, Date: Tue, 23 May 2006 16:17:59 -0700\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; The shutdown of the server \u003cb\u003ehas\u003c\\/b\u003e interrupted the thread, in\u003cbr\\/\u003e\\n&gt; NetworkServerStarter#blockingStart. So, is this the reason we get this\u003cbr\\/\u003e\\n&gt; exception? \u003c\\/p\u003e\\n\\n\u003cp\u003eThis is \u003cb\u003every\u003c\\/b\u003e interesting &#8211; thank you for doing this great research!\u003c\\/p\u003e\\n\\n\u003cp\u003eThis sort of thing is exactly why I\'ve been so scared to add more\u003cbr\\/\u003e\\ncalls to interrupt() as part of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1219\\\" title=\\\"jdbcapi\\/checkDataSource.java and jdbcapi\\/checkDataSource30.java hang intermittently with client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1219\\\"\u003e\u003cdel\u003eDERBY-1219\u003c\\/del\u003e\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1326\\\" title=\\\"Network server may abandon sessions when Derby system is shutdown and this causes intermittent hangs in the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1326\\\"\u003e\u003cdel\u003eDERBY-1326\u003c\\/del\u003e\u003c\\/a\u003e &#8211; interrupt()\u003cbr\\/\u003e\\nis a very scary call to make.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe good news is that this does mean that this is purely a shutdown\u003cbr\\/\u003e\\nproblem, as the only place that we interrupt the DRDAConnThread instances\u003cbr\\/\u003e\\nright now is at the very end of the blockingStart() method.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut it certainly means we\'ll have to be even more careful about whatever\u003cbr\\/\u003e\\nfix we eventually make for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1326\\\" title=\\\"Network server may abandon sessions when Derby system is shutdown and this causes intermittent hangs in the client\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1326\\\"\u003e\u003cdel\u003eDERBY-1326\u003c\\/del\u003e\u003c\\/a\u003e, as we definitely don\'t want to\u003cbr\\/\u003e\\ncasually add any more interrupt() calls, given the possibility of horrible\u003cbr\\/\u003e\\nside effects like this.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; As I mentioned before, we can make sure the classes in question\u003cbr\\/\u003e\\n&gt; (DRDAProtocolExceptionInfo and DRDAProtocolException) are already\u003cbr\\/\u003e\\n&gt; loaded (by creating a dummy object) before the thread is interrupted,\u003cbr\\/\u003e\\n&gt; thus sidestepping the issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlternatively, we could remove the interrupt() call in Network Server shutdown.\u003c\\/p\u003e\\n\\n\u003cp\u003eSince we are shutting down the server anyway, I don\'t know how crucial it\u003cbr\\/\u003e\\nis to clean up those background threads. We have called close() on them already,\u003cbr\\/\u003e\\nso if they try to run again, they will quickly detect that they have been closed\u003cbr\\/\u003e\\nand exit themselves. And, so long as they have been marked as \\\"daemon\\\" threads,\u003cbr\\/\u003e\\ntheir mere presence won\'t prevent the server from shutting down.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut I\'m also fine with pre-loading the classes if that seems to help.\u003c\\/p\u003e\\n\\n\u003cp\u003eThese sorts of startup\\/shutdown bugs always seem very hard to me: trying to\u003cbr\\/\u003e\\nshut down a complex piece of server software while all sorts of complicated\u003cbr\\/\u003e\\nprocessing may be still underway has always been a dicey business.\u003c\\/p\u003e\\n\\n\u003cp\u003ethanks,\u003c\\/p\u003e\\n\\n\u003cp\u003ebryan\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12416817_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12416817_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/06 05:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-20T05:56:52+0000\'\u003e20\\/Jun\\/06 05:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    From: Bryan Pendleton, Date: Tue, 23 May 2006 16:17:59 -0700 \\n\\n &gt; The shutdown of the server  has  interrupted the thread, in \\n&gt; NetworkServerStarter#blockingStart. So, is this the reason we get this \\n&gt; exception?  \\n\\n This is  very  interesting &#8211; thank you for doing this great research! \\n\\n This sort of thing is exactly why I\'ve been so scared to add more \\ncalls to interrupt() as part of   DERBY-1219   and   DERBY-1326   &#8211; interrupt() \\nis a very scary call to make. \\n\\n The good news is that this does mean that this is purely a shutdown \\nproblem, as the only place that we interrupt the DRDAConnThread instances \\nright now is at the very end of the blockingStart() method. \\n\\n But it certainly means we\'ll have to be even more careful about whatever \\nfix we eventually make for   DERBY-1326  , as we definitely don\'t want to \\ncasually add any more interrupt() calls, given the possibility of horrible \\nside effects like this. \\n\\n &gt; As I mentioned before, we can make sure the classes in question \\n&gt; (DRDAProtocolExceptionInfo and DRDAProtocolException) are already \\n&gt; loaded (by creating a dummy object) before the thread is interrupted, \\n&gt; thus sidestepping the issue. \\n\\n Alternatively, we could remove the interrupt() call in Network Server shutdown. \\n\\n Since we are shutting down the server anyway, I don\'t know how crucial it \\nis to clean up those background threads. We have called close() on them already, \\nso if they try to run again, they will quickly detect that they have been closed \\nand exit themselves. And, so long as they have been marked as \\\"daemon\\\" threads, \\ntheir mere presence won\'t prevent the server from shutting down. \\n\\n But I\'m also fine with pre-loading the classes if that seems to help. \\n\\n These sorts of startup\\/shutdown bugs always seem very hard to me: trying to \\nshut down a complex piece of server software while all sorts of complicated \\nprocessing may be still underway has always been a dicey business. \\n\\n thanks, \\n\\n bryan \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12416818\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12416818&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12416818\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12416818_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12416818_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/06 06:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-20T06:03:26+0000\'\u003e20\\/Jun\\/06 06:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is a simple patch which preloads the class causing the problem.\u003cbr\\/\u003e\\nIt makes the tests run correctly - derbyall ran without errors on the classes\u003cbr\\/\u003e\\ndirectory on my Solaris 10\\/x86 box).\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t have to time to work on getting rid of the thread interrupts right now; although\u003cbr\\/\u003e\\nI would prefer that solution.  I can leave this issue open or we could file another\u003cbr\\/\u003e\\none.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12416818_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12416818_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/06 06:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-20T06:03:26+0000\'\u003e20\\/Jun\\/06 06:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is a simple patch which preloads the class causing the problem. \\nIt makes the tests run correctly - derbyall ran without errors on the classes \\ndirectory on my Solaris 10\\/x86 box). \\n\\n I don\'t have to time to work on getting rid of the thread interrupts right now; although \\nI would prefer that solution.  I can leave this issue open or we could file another \\none.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12416840\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12416840&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12416840\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12416840_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12416840_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/06 10:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-20T10:17:25+0000\'\u003e20\\/Jun\\/06 10:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Dag,\u003c\\/p\u003e\\n\\n\u003cp\u003eI looked at your patch. Unless anybody else has a better suggestion, I think we\u003cbr\\/\u003e\\nshould go ahead and use your patch, since it clearly improves the behavior\u003cbr\\/\u003e\\nin your environment.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that we should put a more complete comment in the code itself, though,\u003cbr\\/\u003e\\nso that people aren\'t required to visit JIRA unless they really need the detailed\u003cbr\\/\u003e\\nbackground. What do you think about the following comment &#8211; is it accurate?\u003c\\/p\u003e\\n\\n\u003cp\u003e  \\/\\/ Work around a classloader bug involving interrupt handling during\u003cbr\\/\u003e\\n  \\/\\/ class loading. If the first request to load the DRDAProtocolException\u003cbr\\/\u003e\\n  \\/\\/ class occurs during shutdown, the loading of the class may be aborted\u003cbr\\/\u003e\\n  \\/\\/ when the Network Server calls Thread.interrupt() on the DRDAConnThread.\u003cbr\\/\u003e\\n  \\/\\/ By including a static reference to the DRDAProtocolException class here,\u003cbr\\/\u003e\\n  \\/\\/ we ensure that it is loaded as soon as the DRDAConnThread class is loaded,\u003cbr\\/\u003e\\n  \\/\\/ and therefore we know we won\'t be trying to load the class during shutdown.\u003cbr\\/\u003e\\n  \\/\\/ See \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1338\\\" title=\\\"Client tests DerbyNetNewServer and NSinSameVM fail with NoClassDefFoundError: DRDAProtocolExceptionInfo when run from classes dir\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1338\\\"\u003e\u003cdel\u003eDERBY-1338\u003c\\/del\u003e\u003c\\/a\u003e for more background, including pointers to the apparent\u003cbr\\/\u003e\\n  \\/\\/ classloader bug in the JVM.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf this comment seems reasonable to you, and if the community doesn\'t come up\u003cbr\\/\u003e\\nwith any better suggestions, I can commit this change later this week.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12416840_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12416840_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jun\\/06 10:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-20T10:17:25+0000\'\u003e20\\/Jun\\/06 10:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Dag, \\n\\n I looked at your patch. Unless anybody else has a better suggestion, I think we \\nshould go ahead and use your patch, since it clearly improves the behavior \\nin your environment. \\n\\n I think that we should put a more complete comment in the code itself, though, \\nso that people aren\'t required to visit JIRA unless they really need the detailed \\nbackground. What do you think about the following comment &#8211; is it accurate? \\n\\n   \\/\\/ Work around a classloader bug involving interrupt handling during \\n  \\/\\/ class loading. If the first request to load the DRDAProtocolException \\n  \\/\\/ class occurs during shutdown, the loading of the class may be aborted \\n  \\/\\/ when the Network Server calls Thread.interrupt() on the DRDAConnThread. \\n  \\/\\/ By including a static reference to the DRDAProtocolException class here, \\n  \\/\\/ we ensure that it is loaded as soon as the DRDAConnThread class is loaded, \\n  \\/\\/ and therefore we know we won\'t be trying to load the class during shutdown. \\n  \\/\\/ See   DERBY-1338   for more background, including pointers to the apparent \\n  \\/\\/ classloader bug in the JVM. \\n\\n If this comment seems reasonable to you, and if the community doesn\'t come up \\nwith any better suggestions, I can commit this change later this week.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12416942\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12416942&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12416942\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12416942_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12416942_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/06 00:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-21T00:21:27+0000\'\u003e21\\/Jun\\/06 00:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Bryan, \u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for quick feed-back!\u003cbr\\/\u003e\\nI did consider including a longer comment - I agree it is better. The\u003cbr\\/\u003e\\ncomment is fine, except it should be DRDAProtocolExceptionInfo in all\u003cbr\\/\u003e\\ncases, not plain DRDAProtocolException. \u003c\\/p\u003e\\n\\n\u003cp\u003e  \\/\\/ Work around a classloader bug involving interrupt handling during\u003cbr\\/\u003e\\n  \\/\\/ class loading. If the first request to load the\u003cbr\\/\u003e\\n  \\/\\/ DRDAProtocolExceptionInfo class occurs during shutdown, the\u003cbr\\/\u003e\\n  \\/\\/ loading of the class may be aborted when the Network Server calls\u003cbr\\/\u003e\\n  \\/\\/ Thread.interrupt() on the DRDAConnThread.  By including a static\u003cbr\\/\u003e\\n  \\/\\/ reference to the DRDAProtocolExceptionInfo class here, we ensure\u003cbr\\/\u003e\\n  \\/\\/ that it is loaded as soon as the DRDAConnThread class is loaded,\u003cbr\\/\u003e\\n  \\/\\/ and therefore we know we won\'t be trying to load the class during\u003cbr\\/\u003e\\n  \\/\\/ shutdown.  See \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1338\\\" title=\\\"Client tests DerbyNetNewServer and NSinSameVM fail with NoClassDefFoundError: DRDAProtocolExceptionInfo when run from classes dir\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1338\\\"\u003e\u003cdel\u003eDERBY-1338\u003c\\/del\u003e\u003c\\/a\u003e for more background, including pointers\u003cbr\\/\u003e\\n  \\/\\/ to the apparent classloader bug in the JVM.\u003c\\/p\u003e\\n\\n\u003cp\u003eI made a minimal patch; to be safe, one could preload\u003cbr\\/\u003e\\nDRDAProtocolException as well, since that class did not seem to be\u003cbr\\/\u003e\\nloaded at the time of the protocol exception either, but every time\u003cbr\\/\u003e\\nthe loader succeed with its loading, but failed on\u003cbr\\/\u003e\\nDRDAProtocolExceptionInfo.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12416942_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12416942_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/06 00:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-21T00:21:27+0000\'\u003e21\\/Jun\\/06 00:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Bryan,  \\n\\n Thanks for quick feed-back! \\nI did consider including a longer comment - I agree it is better. The \\ncomment is fine, except it should be DRDAProtocolExceptionInfo in all \\ncases, not plain DRDAProtocolException.  \\n\\n   \\/\\/ Work around a classloader bug involving interrupt handling during \\n  \\/\\/ class loading. If the first request to load the \\n  \\/\\/ DRDAProtocolExceptionInfo class occurs during shutdown, the \\n  \\/\\/ loading of the class may be aborted when the Network Server calls \\n  \\/\\/ Thread.interrupt() on the DRDAConnThread.  By including a static \\n  \\/\\/ reference to the DRDAProtocolExceptionInfo class here, we ensure \\n  \\/\\/ that it is loaded as soon as the DRDAConnThread class is loaded, \\n  \\/\\/ and therefore we know we won\'t be trying to load the class during \\n  \\/\\/ shutdown.  See   DERBY-1338   for more background, including pointers \\n  \\/\\/ to the apparent classloader bug in the JVM. \\n\\n I made a minimal patch; to be safe, one could preload \\nDRDAProtocolException as well, since that class did not seem to be \\nloaded at the time of the protocol exception either, but every time \\nthe loader succeed with its loading, but failed on \\nDRDAProtocolExceptionInfo. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12417136\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1338?focusedCommentId=12417136&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12417136\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12417136_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12417136_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/06 22:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-21T22:51:32+0000\'\u003e21\\/Jun\\/06 22:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the patch, Dag! In addition to your testing, derbynetclientmats runs\u003cbr\\/\u003e\\nclean for me. I edited in the revised comment to the code and submitted it\u003cbr\\/\u003e\\nto subversion: \u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc?view=rev&amp;revision=416012\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc?view=rev&amp;revision=416012\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12417136_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12417136_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jun\\/06 22:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-06-21T22:51:32+0000\'\u003e21\\/Jun\\/06 22:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the patch, Dag! In addition to your testing, derbynetclientmats runs \\nclean for me. I edited in the revised comment to the code and submitted it \\nto subversion:  http:\\/\\/svn.apache.org\\/viewvc?view=rev&amp;revision=416012               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520238300105"> 
    <input type="hidden" title="jira.request.server.time" value="163"> 
    <input type="hidden" title="jira.request.id" value="505x94353573x3"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="3"> 
    <input type="hidden" title="db.reads.time.in.ms" value="17"> 
    <input type="hidden" title="db.conns.time.in.ms" value="21"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 505x94353573x3
	          REQUEST TIMESTAMP : [05/Mar/2018:08:25:00 +0000]
	               REQUEST TIME : 0.1630
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 3

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=22, elapsedTotal=17692948, elapsedMin=336384, elapsedMax=6353918, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=26, elapsedTotal=21971566, elapsedMin=358895, elapsedMax=6375485, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>