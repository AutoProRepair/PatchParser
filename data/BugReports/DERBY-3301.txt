<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|6c9e14f2a8cde1618a49b3da40c7550a2c05af0b|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"60122e41ab3947\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-3301"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-3301] Incorrect result from query with nested EXIST - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-3301] Incorrect result from query with nested EXIST - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3301">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-3301" href="/jira/browse/DERBY-3301" id="key-val" rel="12385521">DERBY-3301</a></li>
                </ol>
                <h1 id="summary-val">Incorrect result from query with nested EXIST</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3301"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-3301/DERBY-3301.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-3301/DERBY-3301.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-3301/DERBY-3301.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-3301/DERBY-3301.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.1.3.1 ">10.1.3.1</span>, <span title="10.2.1.6 ">10.2.1.6</span>, <span title="10.3.2.1 ">10.3.2.1</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.3.0" title="10.3.3.0 ">10.3.3.0</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.1.3" title="10.4.1.3 ">10.4.1.3</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12385521-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310050" class="item"> 
                     <div class="wrap"> 
                      <strong title="Urgency" class="name">Urgency:</strong> 
                      <div id="customfield_12310050-val" class="value type-select" data-fieldtype="select" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        Urgent 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>Release Note Needed</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Derby returns unexpected results from a query with embedded EXIST clauses. The query SQL is generated by the JPOX jdo implementation and is supposed to return all of the PERSONS and PROJECTS where there is an entry in the join table. This query works as expected when using MySQL.</p> 
                  <p>Here's the query:</p> 
                  <p>SELECT UNBOUND_E.PERSONID, UNBOUND_P.PROJID <br> FROM applicationidentity0.DEPARTMENTS THIS, <br> applicationidentity0.PERSONS UNBOUND_E, <br> applicationidentity0.PROJECTS UNBOUND_P <br> WHERE EXISTS ( <br> SELECT 1 FROM applicationidentity0.PERSONS THIS_EMPLOYEES_E <br> WHERE EXISTS ( <br> SELECT 1 FROM applicationidentity0.PROJECT_MEMBER THIS_EMPLOYEES_E_PROJECTS_P <br> WHERE THIS_EMPLOYEES_E_PROJECTS_P."MEMBER" = THIS_EMPLOYEES_E.PERSONID <br> AND THIS_EMPLOYEES_E_PROJECTS_P."MEMBER" = THIS_EMPLOYEES_E.PERSONID <br> AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID <br> AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID <br> AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID <br> AND UNBOUND_E.PERSONID = THIS_EMPLOYEES_E.PERSONID) <br> );<br> PERSONID |PROJID <br> -----------------------<br> 3 |1 <br> 5 |3 <br> 4 |3 <br> 2 |1 <br> 1 |1 <br> 5 rows selected</p> 
                  <p>I'm expecting 7 rows to be returned here, one row for each row in the join table. </p> 
                  <p>Here's the schema:<br> CREATE TABLE departments (<br> ID INTEGER NOT NULL,<br> NAME VARCHAR(32) NOT NULL,<br> EMP_OF_THE_MONTH INTEGER,<br> COMPANYID INTEGER,<br> DISCRIMINATOR VARCHAR(255),<br> CONSTRAINT DEPTS_COMP_FK FOREIGN KEY (COMPANYID) REFERENCES companies,<br> CONSTRAINT DEPTS_PK PRIMARY KEY (ID)<br> );</p> 
                  <p>CREATE TABLE persons (<br> PERSONID INTEGER NOT NULL,<br> FIRSTNAME VARCHAR(32) NOT NULL,<br> LASTNAME VARCHAR(32) NOT NULL,<br> MIDDLENAME VARCHAR(32),<br> BIRTHDATE TIMESTAMP NOT NULL,<br> ADDRID INTEGER,<br> STREET VARCHAR(64),<br> CITY VARCHAR(64),<br> STATE CHAR(2),<br> ZIPCODE CHAR(5),<br> COUNTRY VARCHAR(64),<br> HIREDATE TIMESTAMP,<br> WEEKLYHOURS REAL,<br> DEPARTMENT INTEGER,<br> FUNDINGDEPT INTEGER,<br> MANAGER INTEGER,<br> MENTOR INTEGER,<br> HRADVISOR INTEGER,<br> SALARY REAL,<br> WAGE REAL,<br> DISCRIMINATOR varchar(255) NOT NULL,<br> CONSTRAINT PERS_DEPT_FK FOREIGN KEY (DEPARTMENT) REFERENCES departments,<br> CONSTRAINT PERS_FUNDDEPT_FK FOREIGN KEY (FUNDINGDEPT) REFERENCES departments,<br> CONSTRAINT PERS_MANAGER_FK FOREIGN KEY (MANAGER) REFERENCES persons,<br> CONSTRAINT PERS_MENTOR_FK FOREIGN KEY (MENTOR) REFERENCES persons,<br> CONSTRAINT PERS_HRADVISOR_FK FOREIGN KEY (HRADVISOR) REFERENCES persons,<br> CONSTRAINT EMPS_PK PRIMARY KEY (PERSONID)<br> );</p> 
                  <p>CREATE TABLE projects (<br> PROJID INTEGER NOT NULL,<br> NAME VARCHAR(32) NOT NULL,<br> BUDGET DECIMAL(11,2) NOT NULL,<br> DISCRIMINATOR VARCHAR(255),<br> CONSTRAINT PROJS_PK PRIMARY KEY (PROJID)<br> );<br> CREATE TABLE project_member (<br> PROJID INTEGER REFERENCES projects NOT NULL,<br> MEMBER INTEGER REFERENCES persons NOT NULL<br> );</p> 
                  <p>ij&gt; connect 'jdbc:derby:/Users/clr/apache/jdo/trunk/tck2/target/database/derby/jdotckdb';<br> ij&gt; set schema applicationidentity0;<br> 0 rows inserted/updated/deleted<br> ij&gt; select * from persons;<br> PERSONID |FIRSTNAME |LASTNAME |MIDDLENAME |BIRTHDATE |ADDRID |STREET |CITY |STA&amp;|ZIPC&amp;|COUNTRY |HIREDATE |WEEKLYHOURS |DEPARTMENT |FUNDINGDEPT|MANAGER |MENTOR |HRADVISOR |SALARY |WAGE |DISCRIMINATOR <br> -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br> 1 |emp1First |emp1Last |emp1Middle |1970-06-09 21:00:00.0 |NULL |NULL |NULL |NULL|NULL |NULL |1998-12-31 21:00:00.0 |40.0 |NULL |NULL |NULL |NULL |NULL |20000.0 |NULL |org.apache.jdo.tck.pc.company.FullTimeEmployee <br> 2 |emp2First |emp2Last |emp2Middle |1975-12-21 21:00:00.0 |NULL |NULL |NULL |NULL|NULL |NULL |2003-06-30 21:00:00.0 |40.0 |NULL |NULL |NULL |NULL |NULL |10000.0 |NULL |org.apache.jdo.tck.pc.company.FullTimeEmployee <br> 3 |emp3First |emp3Last |emp3Middle |1972-09-04 21:00:00.0 |NULL |NULL |NULL |NULL|NULL |NULL |2002-08-14 21:00:00.0 |19.0 |NULL |NULL |NULL |NULL |NULL |NULL |15.0 |org.apache.jdo.tck.pc.company.PartTimeEmployee <br> 4 |emp4First |emp4Last |emp4Middle |1973-09-05 21:00:00.0 |NULL |NULL |NULL |NULL|NULL |NULL |2001-04-14 21:00:00.0 |0.0 |NULL |NULL |NULL |NULL |NULL |NULL |13.0 |org.apache.jdo.tck.pc.company.PartTimeEmployee <br> 5 |emp5First |emp5Last |emp5Middle |1962-07-04 21:00:00.0 |NULL |NULL |NULL |NULL|NULL |NULL |1998-08-14 21:00:00.0 |0.0 |NULL |NULL |NULL |NULL |NULL |45000.0 |NULL |org.apache.jdo.tck.pc.company.FullTimeEmployee </p> 
                  <p>5 rows selected<br> ij&gt; select * from projects;<br> PROJID |NAME |BUDGET |DISCRIMINATOR <br> -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br> 1 |orange |2500000.99 |org.apache.jdo.tck.pc.company.Project <br> 2 |blue |50000.00 |org.apache.jdo.tck.pc.company.Project <br> 3 |green |2000.99 |org.apache.jdo.tck.pc.company.Project </p> 
                  <p>3 rows selected<br> ij&gt; select * from project_member;<br> PROJID |MEMBER <br> -----------------------<br> 2 |3 <br> 1 |3 <br> 2 |2 <br> 3 |5 <br> 3 |4 <br> 1 |2 <br> 1 |1 </p> 
                  <p>7 rows selected</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-3301?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-3301?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-3301?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-3301?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373496" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373496/d3301-queryplan.log" draggable="true" data-downloadurl="text/x-log:d3301-queryplan.log:https://issues.apache.org/jira/secure/attachment/12373496/d3301-queryplan.log"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373496/d3301-queryplan.log" title="Latest  18/Jan/08 10:14 - Thomas Nielsen" draggable="true" data-downloadurl="text/x-log:d3301-queryplan.log:https://issues.apache.org/jira/secure/attachment/12373496/d3301-queryplan.log">d3301-queryplan.log</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-18T10:14:41.575Z">18/Jan/08 10:14</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12378272" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12378272/Derby-3301.html" draggable="true" data-downloadurl="text/html:Derby-3301.html:https://issues.apache.org/jira/secure/attachment/12378272/Derby-3301.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12378272/Derby-3301.html" title="Latest  19/Mar/08 21:36 - Craig L Russell" draggable="true" data-downloadurl="text/html:Derby-3301.html:https://issues.apache.org/jira/secure/attachment/12378272/Derby-3301.html">Derby-3301.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-19T21:36:01.623Z">19/Mar/08 21:36</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Craig L Russell
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12372638" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12372638/derby-3301.sql" draggable="true" data-downloadurl="application/octet-stream:derby-3301.sql:https://issues.apache.org/jira/secure/attachment/12372638/derby-3301.sql"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12372638/derby-3301.sql" title="Latest  07/Jan/08 17:51 - Craig L Russell" draggable="true" data-downloadurl="application/octet-stream:derby-3301.sql:https://issues.apache.org/jira/secure/attachment/12372638/derby-3301.sql">derby-3301.sql</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-07T17:51:03.289Z">07/Jan/08 17:51</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Craig L Russell
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373726" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373726/derby-3301-1.diff" draggable="true" data-downloadurl="text/x-patch:derby-3301-1.diff:https://issues.apache.org/jira/secure/attachment/12373726/derby-3301-1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373726/derby-3301-1.diff" title="Latest  22/Jan/08 08:48 - Thomas Nielsen" draggable="true" data-downloadurl="text/x-patch:derby-3301-1.diff:https://issues.apache.org/jira/secure/attachment/12373726/derby-3301-1.diff">derby-3301-1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-22T08:48:35.758Z">22/Jan/08 08:48</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373727" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373727/derby-3301-1.stat" draggable="true" data-downloadurl="application/octet-stream:derby-3301-1.stat:https://issues.apache.org/jira/secure/attachment/12373727/derby-3301-1.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373727/derby-3301-1.stat" title="Latest  22/Jan/08 08:48 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-1.stat:https://issues.apache.org/jira/secure/attachment/12373727/derby-3301-1.stat">derby-3301-1.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-22T08:48:35.927Z">22/Jan/08 08:48</time>
                   </dd>
                   <dd class="attachment-size">
                    0.2 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373812" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373812/derby-3301-2.diff" draggable="true" data-downloadurl="text/x-diff:derby-3301-2.diff:https://issues.apache.org/jira/secure/attachment/12373812/derby-3301-2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373812/derby-3301-2.diff" title="Latest  23/Jan/08 09:13 - Thomas Nielsen" draggable="true" data-downloadurl="text/x-diff:derby-3301-2.diff:https://issues.apache.org/jira/secure/attachment/12373812/derby-3301-2.diff">derby-3301-2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-23T09:13:27.131Z">23/Jan/08 09:13</time>
                   </dd>
                   <dd class="attachment-size">
                    5 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373869" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373869/derby-3301-3.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-3.diff:https://issues.apache.org/jira/secure/attachment/12373869/derby-3301-3.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373869/derby-3301-3.diff" title="Latest  23/Jan/08 20:34 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-3.diff:https://issues.apache.org/jira/secure/attachment/12373869/derby-3301-3.diff">derby-3301-3.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-23T20:34:33.545Z">23/Jan/08 20:34</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373872" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373872/derby-3301-3b.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-3b.diff:https://issues.apache.org/jira/secure/attachment/12373872/derby-3301-3b.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373872/derby-3301-3b.diff" title="Latest  23/Jan/08 21:32 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-3b.diff:https://issues.apache.org/jira/secure/attachment/12373872/derby-3301-3b.diff">derby-3301-3b.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-23T21:32:19.462Z">23/Jan/08 21:32</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374037" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374037/derby-3301-4.diff" draggable="true" data-downloadurl="application/x-download:derby-3301-4.diff:https://issues.apache.org/jira/secure/attachment/12374037/derby-3301-4.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374037/derby-3301-4.diff" title="Latest  25/Jan/08 13:35 - Thomas Nielsen" draggable="true" data-downloadurl="application/x-download:derby-3301-4.diff:https://issues.apache.org/jira/secure/attachment/12374037/derby-3301-4.diff">derby-3301-4.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-25T13:35:32.678Z">25/Jan/08 13:35</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374127" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374127/derby-3301-4b.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-4b.diff:https://issues.apache.org/jira/secure/attachment/12374127/derby-3301-4b.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374127/derby-3301-4b.diff" title="Latest  26/Jan/08 19:20 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-4b.diff:https://issues.apache.org/jira/secure/attachment/12374127/derby-3301-4b.diff">derby-3301-4b.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-26T19:20:40.563Z">26/Jan/08 19:20</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374128" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374128/derby-3301-4b.stat" draggable="true" data-downloadurl="application/octet-stream:derby-3301-4b.stat:https://issues.apache.org/jira/secure/attachment/12374128/derby-3301-4b.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374128/derby-3301-4b.stat" title="Latest  26/Jan/08 19:20 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-4b.stat:https://issues.apache.org/jira/secure/attachment/12374128/derby-3301-4b.stat">derby-3301-4b.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-26T19:20:40.677Z">26/Jan/08 19:20</time>
                   </dd>
                   <dd class="attachment-size">
                    0.2 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374199" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374199/derby-3301-4c.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-4c.diff:https://issues.apache.org/jira/secure/attachment/12374199/derby-3301-4c.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374199/derby-3301-4c.diff" title="Latest  28/Jan/08 18:19 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-4c.diff:https://issues.apache.org/jira/secure/attachment/12374199/derby-3301-4c.diff">derby-3301-4c.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-28T18:19:38.381Z">28/Jan/08 18:19</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374404" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374404/derby-3301-5.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-5.diff:https://issues.apache.org/jira/secure/attachment/12374404/derby-3301-5.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374404/derby-3301-5.diff" title="Latest  30/Jan/08 19:57 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-5.diff:https://issues.apache.org/jira/secure/attachment/12374404/derby-3301-5.diff">derby-3301-5.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-30T19:57:21.172Z">30/Jan/08 19:57</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374449" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374449/derby-3301-6.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-6.diff:https://issues.apache.org/jira/secure/attachment/12374449/derby-3301-6.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374449/derby-3301-6.diff" title="Latest  31/Jan/08 08:32 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-6.diff:https://issues.apache.org/jira/secure/attachment/12374449/derby-3301-6.diff">derby-3301-6.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-31T08:32:22.445Z">31/Jan/08 08:32</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374491" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374491/derby-3301-7.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-7.diff:https://issues.apache.org/jira/secure/attachment/12374491/derby-3301-7.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374491/derby-3301-7.diff" title="Latest  31/Jan/08 19:22 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-7.diff:https://issues.apache.org/jira/secure/attachment/12374491/derby-3301-7.diff">derby-3301-7.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-31T19:22:26.236Z">31/Jan/08 19:22</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374504" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374504/derby-3301-8.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-8.diff:https://issues.apache.org/jira/secure/attachment/12374504/derby-3301-8.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374504/derby-3301-8.diff" title="Latest  31/Jan/08 21:32 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-8.diff:https://issues.apache.org/jira/secure/attachment/12374504/derby-3301-8.diff">derby-3301-8.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-31T21:32:02.321Z">31/Jan/08 21:32</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374448" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374448/derby-3301-extra.sql" draggable="true" data-downloadurl="application/octet-stream:derby-3301-extra.sql:https://issues.apache.org/jira/secure/attachment/12374448/derby-3301-extra.sql"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374448/derby-3301-extra.sql" title="Latest  31/Jan/08 08:32 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-extra.sql:https://issues.apache.org/jira/secure/attachment/12374448/derby-3301-extra.sql">derby-3301-extra.sql</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-31T08:32:22.266Z">31/Jan/08 08:32</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373943" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373943/derby-3301-test-1.diff" draggable="true" data-downloadurl="application/x-download:derby-3301-test-1.diff:https://issues.apache.org/jira/secure/attachment/12373943/derby-3301-test-1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373943/derby-3301-test-1.diff" title="Latest  24/Jan/08 17:14 - Thomas Nielsen" draggable="true" data-downloadurl="application/x-download:derby-3301-test-1.diff:https://issues.apache.org/jira/secure/attachment/12373943/derby-3301-test-1.diff">derby-3301-test-1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-24T17:14:39.057Z">24/Jan/08 17:14</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373942" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373942/derby-3301-test-1.stat" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-1.stat:https://issues.apache.org/jira/secure/attachment/12373942/derby-3301-test-1.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373942/derby-3301-test-1.stat" title="Latest  24/Jan/08 17:14 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-1.stat:https://issues.apache.org/jira/secure/attachment/12373942/derby-3301-test-1.stat">derby-3301-test-1.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-24T17:14:38.863Z">24/Jan/08 17:14</time>
                   </dd>
                   <dd class="attachment-size">
                    0.2 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374129" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374129/derby-3301-test-2.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-2.diff:https://issues.apache.org/jira/secure/attachment/12374129/derby-3301-test-2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374129/derby-3301-test-2.diff" title="Latest  26/Jan/08 19:20 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-2.diff:https://issues.apache.org/jira/secure/attachment/12374129/derby-3301-test-2.diff">derby-3301-test-2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-26T19:20:40.697Z">26/Jan/08 19:20</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374216" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374216/derby-3301-test-3.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-3.diff:https://issues.apache.org/jira/secure/attachment/12374216/derby-3301-test-3.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374216/derby-3301-test-3.diff" title="Latest  28/Jan/08 20:37 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-3.diff:https://issues.apache.org/jira/secure/attachment/12374216/derby-3301-test-3.diff">derby-3301-test-3.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-28T20:37:54.077Z">28/Jan/08 20:37</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374208" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374208/derby-3301-test-3.stat" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-3.stat:https://issues.apache.org/jira/secure/attachment/12374208/derby-3301-test-3.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374208/derby-3301-test-3.stat" title="Latest  28/Jan/08 19:22 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-3.stat:https://issues.apache.org/jira/secure/attachment/12374208/derby-3301-test-3.stat">derby-3301-test-3.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-28T19:22:50.493Z">28/Jan/08 19:22</time>
                   </dd>
                   <dd class="attachment-size">
                    0.2 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374412" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374412/derby-3301-test-master.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-master.diff:https://issues.apache.org/jira/secure/attachment/12374412/derby-3301-test-master.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374412/derby-3301-test-master.diff" title="Latest  30/Jan/08 21:31 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-master.diff:https://issues.apache.org/jira/secure/attachment/12374412/derby-3301-test-master.diff">derby-3301-test-master.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-30T21:31:26.792Z">30/Jan/08 21:31</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374413" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374413/derby-3301-test-master.stat" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-master.stat:https://issues.apache.org/jira/secure/attachment/12374413/derby-3301-test-master.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374413/derby-3301-test-master.stat" title="Latest  30/Jan/08 21:31 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-master.stat:https://issues.apache.org/jira/secure/attachment/12374413/derby-3301-test-master.stat">derby-3301-test-master.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-30T21:31:26.907Z">30/Jan/08 21:31</time>
                   </dd>
                   <dd class="attachment-size">
                    0.1 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12374505" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12374505/derby-3301-test-master-2.diff" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-master-2.diff:https://issues.apache.org/jira/secure/attachment/12374505/derby-3301-test-master-2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12374505/derby-3301-test-master-2.diff" title="Latest  31/Jan/08 21:32 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-master-2.diff:https://issues.apache.org/jira/secure/attachment/12374505/derby-3301-test-master-2.diff">derby-3301-test-master-2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-31T21:32:02.458Z">31/Jan/08 21:32</time>
                   </dd>
                   <dd class="attachment-size">
                    14 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12375010" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12375010/derby-3301-test-master-3.diff" draggable="true" data-downloadurl="text/x-patch:derby-3301-test-master-3.diff:https://issues.apache.org/jira/secure/attachment/12375010/derby-3301-test-master-3.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12375010/derby-3301-test-master-3.diff" title="Latest  07/Feb/08 18:54 - Thomas Nielsen" draggable="true" data-downloadurl="text/x-patch:derby-3301-test-master-3.diff:https://issues.apache.org/jira/secure/attachment/12375010/derby-3301-test-master-3.diff">derby-3301-test-master-3.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-07T18:54:34.934Z">07/Feb/08 18:54</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12375011" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12375011/derby-3301-test-master-3.stat" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-master-3.stat:https://issues.apache.org/jira/secure/attachment/12375011/derby-3301-test-master-3.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12375011/derby-3301-test-master-3.stat" title="Latest  07/Feb/08 18:54 - Thomas Nielsen" draggable="true" data-downloadurl="application/octet-stream:derby-3301-test-master-3.stat:https://issues.apache.org/jira/secure/attachment/12375011/derby-3301-test-master-3.stat">derby-3301-test-master-3.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-07T18:54:35.117Z">07/Feb/08 18:54</time>
                   </dd>
                   <dd class="attachment-size">
                    0.2 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12378552" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12378552/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12378552/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12378552/releaseNote.html" title="Latest  25/Mar/08 09:45 - Thomas Nielsen" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12378552/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-25T09:45:37.689Z">25/Mar/08 09:45</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Thomas Nielsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12378274" data-issue-id="12385521" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12378274/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12378274/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12378274/releaseNote.html" title=" 19/Mar/08 21:58 - Craig L Russell" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12378274/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-19T21:58:44.569Z">19/Mar/08 21:58</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Craig L Russell
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is depended upon by">
                   is depended upon by
                  </dt> 
                  <dd id="internal-12353092_10001"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="JDO-435: Query with projected variables returns duplicates and extra results that do not satisfy filter"> <a href="/jira/browse/JDO-435" data-issue-key="JDO-435" class="issue-link link-title resolution">JDO-435</a> <span class="link-summary">Query with projected variables returns duplicates and extra results that do not satisfy filter</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is part of">
                   is part of
                  </dt> 
                  <dd id="internal-12354628_12310010"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype" width="16" height="16" title="Task - A task that needs to be done." alt="Task - A task that needs to be done."> <span title="DERBY-2034: Tracking of bugs that lead to incorrect results being stored or returned to the client"> <a href="/jira/browse/DERBY-2034" data-issue-key="DERBY-2034" class="issue-link link-title resolution">DERBY-2034</a> <span class="link-summary">Tracking of bugs that lead to incorrect results being stored or returned to the client</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/trivial.svg" width="16" height="16" title="Trivial - Cosmetic problem like misspelt words or misaligned text." alt="Trivial - Cosmetic problem like misspelt words or misaligned text."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12459261_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-4585: IndexChanger.doDelete throws NullPointerException"> <a href="/jira/browse/DERBY-4585" data-issue-key="DERBY-4585" class="issue-link link-title resolution">DERBY-4585</a> <span class="link-summary">IndexChanger.doDelete throws NullPointerException</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12386370_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3321: NullPointerException for 'NOT EXISTS' with nested subquery"> <a href="/jira/browse/DERBY-3321" data-issue-key="DERBY-3321" class="issue-link link-title resolution">DERBY-3321</a> <span class="link-summary">NullPointerException for 'NOT EXISTS' with nested subquery</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12387028_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-3349: Nested WHERE EXISTS queries need improved testing"> <a href="/jira/browse/DERBY-3349" data-issue-key="DERBY-3349" class="issue-link link-title resolution">DERBY-3349</a> <span class="link-summary">Nested WHERE EXISTS queries need improved testing</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_thomanie" rel="thomanie" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Thomas Nielsen&quot;,&quot;emailAddress&quot;:&quot;thomas.nielsen@sun.com&quot;,&quot;username&quot;:&quot;thomanie&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="thomanie"></span></span> Thomas Nielsen </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_clr" rel="clr" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Craig L Russell&quot;,&quot;emailAddress&quot;:&quot;clr@apache.org&quot;,&quot;username&quot;:&quot;clr&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="clr"></span></span> Craig L Russell </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">2</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="03/Jan/08 18:51"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-01-03T18:51:53+0000">03/Jan/08 18:51</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="02/May/13 02:29"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-05-02T02:29:11+0000">02/May/13 02:29</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="15/Feb/08 08:23"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-02-15T08:23:01+0000">15/Feb/08 08:23</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3301?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-3301?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12555725\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12555725&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12555725\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12555725_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555725_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 00:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T00:02:13+0000\'\u003e04\\/Jan\\/08 00:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI just tried this with 10.3.2.1 and the same error occurs.\u003c\\/p\u003e\\n\\n\u003cp\u003eI changed the fix version from 10.2.1.6 to unknown (oops).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12555725_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555725_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 00:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T00:02:13+0000\'\u003e04\\/Jan\\/08 00:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I just tried this with 10.3.2.1 and the same error occurs. \\n\\n I changed the fix version from 10.2.1.6 to unknown (oops).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12555739\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12555739&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12555739\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12555739_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555739_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 00:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T00:29:23+0000\'\u003e04\\/Jan\\/08 00:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAny chance you could a) post a fully reproducing script or Java program, and\\/or b) try it out\u003cbr\\/\u003e\\nwith the 10.1.3.1 release?  I\'m wondering if this might be the same underlying issue as\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3288\\\" title=\\\"wrong query result in presence of a unique index\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3288\\\"\u003e\u003cdel\u003eDERBY-3288\u003c\\/del\u003e\u003c\\/a\u003e--if it is, then it should work with 10.1.3.1.  Trying it out there might help\u003cbr\\/\u003e\\ndetermine when the problem was introduced...(esp. is it a regression?)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12555739_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555739_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 00:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T00:29:23+0000\'\u003e04\\/Jan\\/08 00:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Any chance you could a) post a fully reproducing script or Java program, and\\/or b) try it out \\nwith the 10.1.3.1 release?  I\'m wondering if this might be the same underlying issue as \\n  DERBY-3288  --if it is, then it should work with 10.1.3.1.  Trying it out there might help \\ndetermine when the problem was introduced...(esp. is it a regression?)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12555985\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12555985&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12555985\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12555985_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555985_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 17:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T17:03:16+0000\'\u003e04\\/Jan\\/08 17:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReproduced also on 10.1.3.1. There is a slight difference in behavior (of a similar query) that I will have to check into, and update this report.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12555985_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12555985_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 17:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T17:03:16+0000\'\u003e04\\/Jan\\/08 17:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reproduced also on 10.1.3.1. There is a slight difference in behavior (of a similar query) that I will have to check into, and update this report.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12556033\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12556033&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12556033\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12556033_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12556033_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 19:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T19:42:29+0000\'\u003e04\\/Jan\\/08 19:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Craig L Russell - 04\\/Jan\\/08 19:43\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere is a similar query that sometimes returns the expected result and sometimes returns a single row.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe difference in the query is that there is an extra clause in the WHERE clause: \u003cbr\\/\u003e\\nAND UNBOUND_P.NAME = \'orange\'\u003c\\/p\u003e\\n\\n\u003cp\u003eThis query is expected to return three rows\u003cbr\\/\u003e\\nPERSONID |PROJID \u003cbr\\/\u003e\\n----------------------- \u003cbr\\/\u003e\\n3 |1 \u003cbr\\/\u003e\\n2 |1 \u003cbr\\/\u003e\\n1 |1 \u003cbr\\/\u003e\\n3 rows selected\u003c\\/p\u003e\\n\\n\u003cp\u003ebut sometimes only one row is returned\u003cbr\\/\u003e\\nPERSONID |PROJID \u003cbr\\/\u003e\\n----------------------- \u003cbr\\/\u003e\\n1 |1 \u003cbr\\/\u003e\\n1 rows selected\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12556033_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12556033_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Jan\\/08 19:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-04T19:42:29+0000\'\u003e04\\/Jan\\/08 19:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Craig L Russell - 04\\/Jan\\/08 19:43\\\"\u003eedited\u003c\\/span\u003e                   There is a similar query that sometimes returns the expected result and sometimes returns a single row. \\n\\n The difference in the query is that there is an extra clause in the WHERE clause:  \\nAND UNBOUND_P.NAME = \'orange\' \\n\\n This query is expected to return three rows \\nPERSONID |PROJID  \\n-----------------------  \\n3 |1  \\n2 |1  \\n1 |1  \\n3 rows selected \\n\\n but sometimes only one row is returned \\nPERSONID |PROJID  \\n-----------------------  \\n1 |1  \\n1 rows selected \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12556637\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12556637&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12556637\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12556637_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12556637_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/08 17:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-07T17:51:03+0000\'\u003e07\\/Jan\\/08 17:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe attached patch demonstrates the problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe expected result of the last query in the file is the 7 rows corresponding to the rows in the join table.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo duplicate the problem, run ij &lt; derby-3301.sql\u003c\\/p\u003e\\n\\n\u003cp\u003eAny suggestions are welcome.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12556637_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12556637_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/08 17:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-07T17:51:03+0000\'\u003e07\\/Jan\\/08 17:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The attached patch demonstrates the problem. \\n\\n The expected result of the last query in the file is the 7 rows corresponding to the rows in the join table. \\n\\n To duplicate the problem, run ij &lt; derby-3301.sql \\n\\n Any suggestions are welcome.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560280\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560280&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560280\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12560280_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560280_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 08:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T08:06:42+0000\'\u003e18\\/Jan\\/08 08:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLinking issue to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3321\\\" title=\\\"NullPointerException for &#39;NOT EXISTS&#39; with nested subquery\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3321\\\"\u003e\u003cdel\u003eDERBY-3321\u003c\\/del\u003e\u003c\\/a\u003e: NPE if \'exists\' is followed by a nested subquery.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jorgenlo\\\" id=\\\"commentauthor_12560280_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jorgenlo\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jorgenlo\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F8rgen L\\u00F8land\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560280_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 08:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T08:06:42+0000\'\u003e18\\/Jan\\/08 08:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Linking issue to   DERBY-3321  : NPE if \'exists\' is followed by a nested subquery.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560326\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560326&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560326\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560326_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560326_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 10:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T10:14:41+0000\'\u003e18\\/Jan\\/08 10:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTook the liberty to generate and attach the queryplan for the reproscript.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560326_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560326_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 10:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T10:14:41+0000\'\u003e18\\/Jan\\/08 10:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Took the liberty to generate and attach the queryplan for the reproscript.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560330\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560330&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560330\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560330_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560330_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 10:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T10:34:59+0000\'\u003e18\\/Jan\\/08 10:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m not very familiar with tracking down these bugs, but it seems to me that the RH side of the \u003cbr\\/\u003e\\n\\\"Hash Exists Join ResultSet\\\", a \\\"Hash Scan ResultSet\\\" for PROJECT_EMPLOYEES see (returns) only 3 rows, \u003cbr\\/\u003e\\neven though the underlying scan produces 7 rows?\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8212; snip &#8211;\u003cbr\\/\u003e\\n                                        Rows seen = 3\u003cbr\\/\u003e\\n                                        Rows filtered = 0\u003c\\/p\u003e\\n\\n\u003cp\u003e...\u003cbr\\/\u003e\\n                                        scan information:\u003cbr\\/\u003e\\n                                                Bit set of columns fetched=All\u003cbr\\/\u003e\\n                                                Number of columns fetched=2\u003cbr\\/\u003e\\n                                                Number of pages visited=1\u003cbr\\/\u003e\\n                                                Number of rows qualified=7\u003cbr\\/\u003e\\n                                                Number of rows visited=7\u003cbr\\/\u003e\\n&#8212; snip &#8212;\u003c\\/p\u003e\\n\\n\u003cp\u003eHopefully this will help the well versed to track this one down \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560330_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560330_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 10:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T10:34:59+0000\'\u003e18\\/Jan\\/08 10:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m not very familiar with tracking down these bugs, but it seems to me that the RH side of the  \\n\\\"Hash Exists Join ResultSet\\\", a \\\"Hash Scan ResultSet\\\" for PROJECT_EMPLOYEES see (returns) only 3 rows,  \\neven though the underlying scan produces 7 rows? \\n\\n &#8212; snip &#8211; \\n                                        Rows seen = 3 \\n                                        Rows filtered = 0 \\n\\n ... \\n                                        scan information: \\n                                                Bit set of columns fetched=All \\n                                                Number of columns fetched=2 \\n                                                Number of pages visited=1 \\n                                                Number of rows qualified=7 \\n                                                Number of rows visited=7 \\n&#8212; snip &#8212; \\n\\n Hopefully this will help the well versed to track this one down                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560414\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560414&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560414\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560414_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560414_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 14:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T14:47:25+0000\'\u003e18\\/Jan\\/08 14:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 18\\/Jan\\/08 14:52\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA little further investigation shows that HashScanResultSet.getNextRowCore() is acutally doing what it is supposed to do.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe underlying ResultSets build a HashMap based on a key, and puts all rows matching this key into the map with that key.\u003cbr\\/\u003e\\nFor the repro this means a HashMap with 3 keys with 3, 2 and 3 rows for the map entries respectively as seen in the debugger.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn getNextRow() we pick the first element for a given key from the map, then move on to the next key, even though \u003cbr\\/\u003e\\nthere are unfetched entries left in the map. This is where the code is flawed at the moment.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor each invocation of getNextRowCore(), a call is done to reopenCore() as well. This looks suspicious. reopenCore() is a good citizen \u003cbr\\/\u003e\\nand resets any reference variables with a call to resetProbeVariables(). This call resets the indexing we use in getNextRowCore() to \u003cbr\\/\u003e\\nkeep track of the index into the map entries, and force us to move on to the next key in the HashMap instead of the next entry in the HashMap. \u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s right there in the queryplan as well with \\\"Number of opens = 3\\\" for the lower HashScanResultSet \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\nThere\'s the reason for the three, and not seven, rows.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe big question right now is who calls, and why is, reopenCore() called twice? \u003c\\/p\u003e\\n\\n\u003cp\u003eI probably won\'t have time to investigate until Monday. If someone else feels like fixing this, please go ahead.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560414_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560414_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 14:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T14:47:25+0000\'\u003e18\\/Jan\\/08 14:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 18\\/Jan\\/08 14:52\\\"\u003eedited\u003c\\/span\u003e                   A little further investigation shows that HashScanResultSet.getNextRowCore() is acutally doing what it is supposed to do. \\n\\n The underlying ResultSets build a HashMap based on a key, and puts all rows matching this key into the map with that key. \\nFor the repro this means a HashMap with 3 keys with 3, 2 and 3 rows for the map entries respectively as seen in the debugger. \\n\\n In getNextRow() we pick the first element for a given key from the map, then move on to the next key, even though  \\nthere are unfetched entries left in the map. This is where the code is flawed at the moment. \\n\\n For each invocation of getNextRowCore(), a call is done to reopenCore() as well. This looks suspicious. reopenCore() is a good citizen  \\nand resets any reference variables with a call to resetProbeVariables(). This call resets the indexing we use in getNextRowCore() to  \\nkeep track of the index into the map entries, and force us to move on to the next key in the HashMap instead of the next entry in the HashMap.  \\n\\n It\'s right there in the queryplan as well with \\\"Number of opens = 3\\\" for the lower HashScanResultSet   \\nThere\'s the reason for the three, and not seven, rows. \\n\\n The big question right now is who calls, and why is, reopenCore() called twice?  \\n\\n I probably won\'t have time to investigate until Monday. If someone else feels like fixing this, please go ahead.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560462\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560462&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560462\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12560462_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560462_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 16:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T16:59:46+0000\'\u003e18\\/Jan\\/08 16:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Thomas, thanks for having a look at this.\u003c\\/p\u003e\\n\\n\u003cp\u003eI agree with your analysis of that portion of the query plan: there are\u003cbr\\/\u003e\\n7 total rows that are seen in the project_employees table, but they\u003cbr\\/\u003e\\nare being organized into 3 hash buckets based on the projid field.\u003cbr\\/\u003e\\nThe rows in the table have projid values 101, 102, and 103, so this seems ok.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat seems to be happening to me is that we are \\\"collapsing\\\" the\u003cbr\\/\u003e\\nresults. The actual values that the query returns (with the current trunk) are:\u003c\\/p\u003e\\n\\n\u003cp\u003eEMPID      |PROJID\u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n13         |101\u003cbr\\/\u003e\\n13         |102\u003cbr\\/\u003e\\n15         |103\u003c\\/p\u003e\\n\\n\u003cp\u003eNote that we are getting \u003cb\u003eone\u003c\\/b\u003e of the employees for \u003cb\u003eeach\u003c\\/b\u003e of the 3 projects,\u003cbr\\/\u003e\\nwhereas I think Craig expects us to be fetching \u003cb\u003eall\u003c\\/b\u003e of the employees for\u003cbr\\/\u003e\\n\u003cb\u003eeach\u003c\\/b\u003e of the projects.\u003c\\/p\u003e\\n\\n\u003cp\u003eI suspect this means that the flattening of the exists queries was performed\u003cbr\\/\u003e\\nincorrectly, but beyond that I don\'t have anything brilliant to say. I looked at\u003cbr\\/\u003e\\nsome of this logic when I was studying \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3033\\\" title=\\\"select query results in nullpointer exception in skipScan()\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3033\\\"\u003e\u003cdel\u003eDERBY-3033\u003c\\/del\u003e\u003c\\/a\u003e, but I don\'t think that\u003cbr\\/\u003e\\nissue is extremely relevant to this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eStill, you might spend some time stepping through FromList.preprocess()\u003cbr\\/\u003e\\nand FromList.flattenFromTables() for the query in question, and see if\u003cbr\\/\u003e\\nyou notice any logic that seems particularly relevant for this query.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12560462_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560462_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 16:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T16:59:46+0000\'\u003e18\\/Jan\\/08 16:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Thomas, thanks for having a look at this. \\n\\n I agree with your analysis of that portion of the query plan: there are \\n7 total rows that are seen in the project_employees table, but they \\nare being organized into 3 hash buckets based on the projid field. \\nThe rows in the table have projid values 101, 102, and 103, so this seems ok. \\n\\n What seems to be happening to me is that we are \\\"collapsing\\\" the \\nresults. The actual values that the query returns (with the current trunk) are: \\n\\n EMPID      |PROJID \\n----------------------- \\n13         |101 \\n13         |102 \\n15         |103 \\n\\n Note that we are getting  one  of the employees for  each  of the 3 projects, \\nwhereas I think Craig expects us to be fetching  all  of the employees for \\n each  of the projects. \\n\\n I suspect this means that the flattening of the exists queries was performed \\nincorrectly, but beyond that I don\'t have anything brilliant to say. I looked at \\nsome of this logic when I was studying   DERBY-3033  , but I don\'t think that \\nissue is extremely relevant to this issue. \\n\\n Still, you might spend some time stepping through FromList.preprocess() \\nand FromList.flattenFromTables() for the query in question, and see if \\nyou notice any logic that seems particularly relevant for this query.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560582\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560582&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560582\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560582_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560582_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 22:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T22:49:40+0000\'\u003e18\\/Jan\\/08 22:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 18\\/Jan\\/08 22:53\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the pointers Bryan.\u003c\\/p\u003e\\n\\n\u003cp\u003eAbove the HashScanResultSet, there is a NestedLoopJoinResultSet pulling rows from both left and right childs in getNextRowCore().\u003cbr\\/\u003e\\nNesteLoopJoinResultSet.getNextRowCore() will stop pulling rows if its member oneRowRightSide is true. oneRowRightSide is supplied to the constructor, so it\'s set at ResultSet generation time.\u003c\\/p\u003e\\n\\n\u003cp\u003eNestedLoopJoinResultSet is generated by GenericResultSetFactory.getNestedLoopJoinResult(), which again is only called from JoinNode.generate().\u003cbr\\/\u003e\\nTo see this you first have to find the getter to the NestedLoopJoinResultSet in GenericResultSetFactory, then do a text\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/warning.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e search for use of the getter method. In this case it\'s only used once - in \u003cbr\\/\u003e\\nNesteLoopJoinStrategy.joinResultSetMethodName(), which again is only used in JoinNode.generate.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo why is it setting oneRowRightSide to true?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe arguments to the NestedLoopJoinResultSet constructor is pushed to the stack by JoinNode.getJoinArguments(), where one calls JoinNode.oneRowRightSide().\u003cbr\\/\u003e\\noneRowRightSide() simply pushes rightResultSet.isOneRowResultSet() to the stack and continues along merrily (JoinNode.java @ 1691)\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the debugger we see that the first hit of a breakpoint in JoinNode.java @1691 is the interesting one.\u003cbr\\/\u003e\\nrightResultSet is a ProjectRestrictNode over a FromBaseTable. That is the select we want to look at.\u003c\\/p\u003e\\n\\n\u003cp\u003eProjectRestrictNode.isOneRowResult() simply calls its childResult.isOneRowResult(), so we end up in FromBaseTable.isOneRowResult().\u003c\\/p\u003e\\n\\n\u003cp\u003eFromBaseTable.isOneRowResult() start off with this comment and code: \u003cbr\\/\u003e\\n   \\/\\/ EXISTS FBT will only return a single row\u003cbr\\/\u003e\\n   if (existsBaseTable)\u003c\\/p\u003e\\n   {\\n       return true;\\n    }\\n\\n\u003cp\u003eexistsBaseTable is true in the failing query.\u003c\\/p\u003e\\n\\n\u003cp\u003eexistsBaseTable is only set in FromBaseTable.setExistsBaseTable(), and this method is only called form FromList.genExistsBaseTables()\u003cbr\\/\u003e\\nwhere it is explicitly set to true.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems to me that the assumption made in FromBaseTable.isOneRowResultI() is wrong?\u003cbr\\/\u003e\\nIt\'s been there ever since derby code was donated. That\'s most likely the reason for all previous versions showing identical behaviour.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith those 4 lines making the single row assumption for exists commented out, and letting the rest of the isOneRowResult() logic make the decision, \u003cbr\\/\u003e\\nit returns false as expected in this case. The query returns 7 rows as Craig expects.\u003c\\/p\u003e\\n\\n\u003cp\u003eEMPID      |PROJID     \u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n13         |101        \u003cbr\\/\u003e\\n12         |101        \u003cbr\\/\u003e\\n11         |101        \u003cbr\\/\u003e\\n13         |102        \u003cbr\\/\u003e\\n12         |102        \u003cbr\\/\u003e\\n15         |103        \u003cbr\\/\u003e\\n14         |103        \u003c\\/p\u003e\\n\\n\u003cp\u003eAny one care to comment on my analysis and especially on the exists assumption made?\u003c\\/p\u003e\\n\\n\u003cp\u003eIf this is correct, any query involving and EXISTS \u003cb\u003epotentially\u003c\\/b\u003e will produce wrong results, and this could be the root cause for a couple of the other EXISTS issues?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560582_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560582_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 22:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T22:49:40+0000\'\u003e18\\/Jan\\/08 22:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 18\\/Jan\\/08 22:53\\\"\u003eedited\u003c\\/span\u003e                   Thanks for the pointers Bryan. \\n\\n Above the HashScanResultSet, there is a NestedLoopJoinResultSet pulling rows from both left and right childs in getNextRowCore(). \\nNesteLoopJoinResultSet.getNextRowCore() will stop pulling rows if its member oneRowRightSide is true. oneRowRightSide is supplied to the constructor, so it\'s set at ResultSet generation time. \\n\\n NestedLoopJoinResultSet is generated by GenericResultSetFactory.getNestedLoopJoinResult(), which again is only called from JoinNode.generate(). \\nTo see this you first have to find the getter to the NestedLoopJoinResultSet in GenericResultSetFactory, then do a text  search for use of the getter method. In this case it\'s only used once - in  \\nNesteLoopJoinStrategy.joinResultSetMethodName(), which again is only used in JoinNode.generate. \\n\\n So why is it setting oneRowRightSide to true? \\n\\n The arguments to the NestedLoopJoinResultSet constructor is pushed to the stack by JoinNode.getJoinArguments(), where one calls JoinNode.oneRowRightSide(). \\noneRowRightSide() simply pushes rightResultSet.isOneRowResultSet() to the stack and continues along merrily (JoinNode.java @ 1691) \\n\\n In the debugger we see that the first hit of a breakpoint in JoinNode.java @1691 is the interesting one. \\nrightResultSet is a ProjectRestrictNode over a FromBaseTable. That is the select we want to look at. \\n\\n ProjectRestrictNode.isOneRowResult() simply calls its childResult.isOneRowResult(), so we end up in FromBaseTable.isOneRowResult(). \\n\\n FromBaseTable.isOneRowResult() start off with this comment and code:  \\n   \\/\\/ EXISTS FBT will only return a single row \\n   if (existsBaseTable) \\n   {\\n       return true;\\n    }\\n\\n existsBaseTable is true in the failing query. \\n\\n existsBaseTable is only set in FromBaseTable.setExistsBaseTable(), and this method is only called form FromList.genExistsBaseTables() \\nwhere it is explicitly set to true. \\n\\n It seems to me that the assumption made in FromBaseTable.isOneRowResultI() is wrong? \\nIt\'s been there ever since derby code was donated. That\'s most likely the reason for all previous versions showing identical behaviour. \\n\\n With those 4 lines making the single row assumption for exists commented out, and letting the rest of the isOneRowResult() logic make the decision,  \\nit returns false as expected in this case. The query returns 7 rows as Craig expects. \\n\\n EMPID      |PROJID      \\n----------------------- \\n13         |101         \\n12         |101         \\n11         |101         \\n13         |102         \\n12         |102         \\n15         |103         \\n14         |103         \\n\\n Any one care to comment on my analysis and especially on the exists assumption made? \\n\\n If this is correct, any query involving and EXISTS  potentially  will produce wrong results, and this could be the root cause for a couple of the other EXISTS issues?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560592\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560592&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560592\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560592_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560592_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 23:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T23:09:08+0000\'\u003e18\\/Jan\\/08 23:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eToo late to keep working - EXIST should return only one row.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560592_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560592_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 23:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T23:09:08+0000\'\u003e18\\/Jan\\/08 23:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Too late to keep working - EXIST should return only one row.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560732\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560732&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560732\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12560732_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560732_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jan\\/08 21:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-19T21:38:13+0000\'\u003e19\\/Jan\\/08 21:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Thomas, looks like you\'ve been busy (even though it is the weekend). \u003cbr\\/\u003e\\nAre you saying that the query behaves correctly? \u003c\\/p\u003e\\n\\n\u003cp\u003eSELECT &lt;something&gt; FROM &lt;tables&gt; WHERE EXISTS &lt;subquery&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003emust still evaluate subquery for all rows, right? And just return those for which the subquery produces at least one row? Or am I totally mis-understanding?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12560732_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560732_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jan\\/08 21:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-19T21:38:13+0000\'\u003e19\\/Jan\\/08 21:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Thomas, looks like you\'ve been busy (even though it is the weekend).  \\nAre you saying that the query behaves correctly?  \\n\\n SELECT &lt;something&gt; FROM &lt;tables&gt; WHERE EXISTS &lt;subquery&gt; \\n\\n must still evaluate subquery for all rows, right? And just return those for which the subquery produces at least one row? Or am I totally mis-understanding?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560902\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560902&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560902\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12560902_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560902_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jan\\/08 23:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-20T23:44:20+0000\'\u003e20\\/Jan\\/08 23:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Too late to keep working - EXIST should return only one row.\u003cbr\\/\u003e\\nThere are many ways to evaluate the query, depending on the strategy. Yes, each of the EXISTS clauses should return either zero or one row, depending on whether the EXISTS condition is true for the specific row of the outermost FROM clause.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor each row of the outer product of the outermost FROM clause (DEPARTMENTS, EMPLOYEES, PROJECTS), the middle WHERE EXISTS should return true when there is a match between the EMPLOYEES and PROJECTS in the join table. As an optimization, you could invert the scan and look at all of the rows of the join table. It\'s hard to tell from the analysis here whether Derby is inverting the scan.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12560902_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560902_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jan\\/08 23:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-20T23:44:20+0000\'\u003e20\\/Jan\\/08 23:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Too late to keep working - EXIST should return only one row. \\nThere are many ways to evaluate the query, depending on the strategy. Yes, each of the EXISTS clauses should return either zero or one row, depending on whether the EXISTS condition is true for the specific row of the outermost FROM clause. \\n\\n For each row of the outer product of the outermost FROM clause (DEPARTMENTS, EMPLOYEES, PROJECTS), the middle WHERE EXISTS should return true when there is a match between the EMPLOYEES and PROJECTS in the join table. As an optimization, you could invert the scan and look at all of the rows of the join table. It\'s hard to tell from the analysis here whether Derby is inverting the scan.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560953\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12560953&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560953\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560953_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560953_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 08:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T08:35:09+0000\'\u003e21\\/Jan\\/08 08:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDyre&gt; Are you saying that the query behaves correctly?\u003cbr\\/\u003e\\nNo, it does not on the current trunk. And your understanding of how this should be evaluated is correct I believe. Also see Craigs comment above.\u003c\\/p\u003e\\n\\n\u003cp\u003eCraig&gt; As an optimization, you could invert the scan and look at all of the rows of the join table. \u003cbr\\/\u003e\\nLooking at the queryplan I think this is what Derby does, and during this optimization something goes wrong.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs Bryan suggests, flattening of the exists query could be what goes wrong. I didn\'t see any obvious errors in the methods he suggested though.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem appears since the NestedLoopJoinResultSet above the HashScanResultSet that returns 3 out of 7 rows, incorrectly has its right side \u003cbr\\/\u003e\\n\\\"optimized\\\" to expect a single row since it\'s flagged as an EXISTS query. This causes NestedLoopJoinResultSet to retrieve 1 row, then close and reopen the \u003cbr\\/\u003e\\nHashScanResultSet subquery which then returns from the next hash bucket like it\'s supposed to. This way we continue through the 3 hash buckets returning 3 out of 7 rows.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs I stated in my last comment (the long one), if the NestedLoopJoinResultSet has it\'s right child (correctly) flagged as \u003cb\u003enot\u003c\\/b\u003e being an EXISTS query \u003cbr\\/\u003e\\nand expected to return a single row, the query returns the expected 7 rows. So we need to figure out the root cause of why the NesteLoopJoinResultSet \u003cbr\\/\u003e\\nthinks its right child will return only one row.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12560953_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560953_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 08:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T08:35:09+0000\'\u003e21\\/Jan\\/08 08:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dyre&gt; Are you saying that the query behaves correctly? \\nNo, it does not on the current trunk. And your understanding of how this should be evaluated is correct I believe. Also see Craigs comment above. \\n\\n Craig&gt; As an optimization, you could invert the scan and look at all of the rows of the join table.  \\nLooking at the queryplan I think this is what Derby does, and during this optimization something goes wrong. \\n\\n As Bryan suggests, flattening of the exists query could be what goes wrong. I didn\'t see any obvious errors in the methods he suggested though. \\n\\n The problem appears since the NestedLoopJoinResultSet above the HashScanResultSet that returns 3 out of 7 rows, incorrectly has its right side  \\n\\\"optimized\\\" to expect a single row since it\'s flagged as an EXISTS query. This causes NestedLoopJoinResultSet to retrieve 1 row, then close and reopen the  \\nHashScanResultSet subquery which then returns from the next hash bucket like it\'s supposed to. This way we continue through the 3 hash buckets returning 3 out of 7 rows. \\n\\n As I stated in my last comment (the long one), if the NestedLoopJoinResultSet has it\'s right child (correctly) flagged as  not  being an EXISTS query  \\nand expected to return a single row, the query returns the expected 7 rows. So we need to figure out the root cause of why the NesteLoopJoinResultSet  \\nthinks its right child will return only one row.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561036\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561036&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561036\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12561036_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561036_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 15:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T15:26:24+0000\'\u003e21\\/Jan\\/08 15:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePerhaps there are some clues in this section of the manual:\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform13699.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform13699.html\u003c\\/a\u003e\u003cbr\\/\u003e\\nIn particular, this section:\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform36368.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform36368.html\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eI find it interesting that there are two levels of subquery flattening\u003cbr\\/\u003e\\ngoing on here; that is, we have a subquery in the where clause of\u003cbr\\/\u003e\\na subquery which is itself in the where clause of the top-level query.\u003cbr\\/\u003e\\nPerhaps the flattening logic is evaluating the correctness rules properly\u003cbr\\/\u003e\\nfor a single level of flattening but isn\'t handling flattening-within-flattening?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12561036_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561036_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 15:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T15:26:24+0000\'\u003e21\\/Jan\\/08 15:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Perhaps there are some clues in this section of the manual: \\n http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform13699.html  \\nIn particular, this section: \\n http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform36368.html  \\n\\n I find it interesting that there are two levels of subquery flattening \\ngoing on here; that is, we have a subquery in the where clause of \\na subquery which is itself in the where clause of the top-level query. \\nPerhaps the flattening logic is evaluating the correctness rules properly \\nfor a single level of flattening but isn\'t handling flattening-within-flattening?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561037\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561037&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561037\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12561037_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561037_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 15:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T15:39:58+0000\'\u003e21\\/Jan\\/08 15:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis slight variation of the query seems to return the correct 7 rows. The\u003cbr\\/\u003e\\nchange is that I removed the extra join of this_employees_e, and just\u003cbr\\/\u003e\\nused unbound_e throughout:\u003c\\/p\u003e\\n\\n\u003cp\u003eij&gt; select unbound_e.empid, unbound_p.projid\u003cbr\\/\u003e\\nfrom departments this,\u003cbr\\/\u003e\\n     employees unbound_e,\u003cbr\\/\u003e\\n     projects unbound_p\u003cbr\\/\u003e\\n    where exists (\u003cbr\\/\u003e\\n        select 1 from project_employees this_employees_e_projects_p\u003cbr\\/\u003e\\n        where this_employees_e_projects_p.empid = unbound_e.empid\u003cbr\\/\u003e\\n        and unbound_e.department = this.id\u003cbr\\/\u003e\\n        and unbound_p.projid = this_employees_e_projects_p.projid\u003cbr\\/\u003e\\n        and unbound_e.empid = unbound_e.empid) ;\u003c\\/p\u003e\\n\\n\u003cp\u003eEMPID      |PROJID\u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n11         |101\u003cbr\\/\u003e\\n12         |101\u003cbr\\/\u003e\\n12         |102\u003cbr\\/\u003e\\n13         |101\u003cbr\\/\u003e\\n13         |102\u003cbr\\/\u003e\\n14         |103\u003cbr\\/\u003e\\n15         |103\u003c\\/p\u003e\\n\\n\u003cp\u003e7 rows selected\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12561037_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561037_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 15:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T15:39:58+0000\'\u003e21\\/Jan\\/08 15:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This slight variation of the query seems to return the correct 7 rows. The \\nchange is that I removed the extra join of this_employees_e, and just \\nused unbound_e throughout: \\n\\n ij&gt; select unbound_e.empid, unbound_p.projid \\nfrom departments this, \\n     employees unbound_e, \\n     projects unbound_p \\n    where exists ( \\n        select 1 from project_employees this_employees_e_projects_p \\n        where this_employees_e_projects_p.empid = unbound_e.empid \\n        and unbound_e.department = this.id \\n        and unbound_p.projid = this_employees_e_projects_p.projid \\n        and unbound_e.empid = unbound_e.empid) ; \\n\\n EMPID      |PROJID \\n----------------------- \\n11         |101 \\n12         |101 \\n12         |102 \\n13         |101 \\n13         |102 \\n14         |103 \\n15         |103 \\n\\n 7 rows selected              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561054\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561054&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561054\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12561054_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561054_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 16:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T16:41:10+0000\'\u003e21\\/Jan\\/08 16:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBryan&gt; This slight variation of the query seems to return the correct 7 rows. \u003c\\/p\u003e\\n\\n\u003cp\u003eSo the intermediate flattening of the query is probably causing the problem. Note that for more complex mappings from JDOQL to SQL, there will be even more intermediate EXISTS expressions.\u003c\\/p\u003e\\n\\n\u003cp\u003eI also found \u003ca href=\\\"http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html\u003c\\/a\u003e that goes into some detail of the EXISTS join flattening.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12561054_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561054_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 16:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T16:41:10+0000\'\u003e21\\/Jan\\/08 16:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bryan&gt; This slight variation of the query seems to return the correct 7 rows.  \\n\\n So the intermediate flattening of the query is probably causing the problem. Note that for more complex mappings from JDOQL to SQL, there will be even more intermediate EXISTS expressions. \\n\\n I also found  http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html  that goes into some detail of the EXISTS join flattening.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561073\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561073&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561073\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12561073_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561073_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 17:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T17:21:53+0000\'\u003e21\\/Jan\\/08 17:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"A B - 21\\/Jan\\/08 17:35\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ebryan&gt; Perhaps the flattening logic is evaluating the correctness rules properly\u003cbr\\/\u003e\\nbryan&gt; for a single level of flattening but isn\'t handling flattening-within-flattening? \u003c\\/p\u003e\\n\\n\u003cp\u003eWithout having done any explicit tracing myself, this is what I would guess is the \u003cbr\\/\u003e\\nproblem.  Perhaps the inner-most EXISTS subquery can be considered an \\\"exists \u003cbr\\/\u003e\\nbase table\\\" (and thus only returns a single row) w.r.t. it\'s parent query, but if it is then \u003cbr\\/\u003e\\nflattened \u003cem\u003eagain\u003c\\/em\u003e to the outer-most query, maybe it should no longer be marked as \u003cbr\\/\u003e\\nan \\\"exists base table\\\"?  I don\'t if that\'s actually true, I\'m just speculating.\u003c\\/p\u003e\\n\\n\u003cp\u003ecraig&gt; I also found \u003ca href=\\\"http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html\u003c\\/a\u003e that\u003cbr\\/\u003e\\ncraig&gt; goes into some detail of the EXISTS join flattening\u003c\\/p\u003e\\n\\n\u003cp\u003eSomething from that page which stands out to me is the following condition:\u003c\\/p\u003e\\n\\n\u003cp\u003e  \\\"None of the predicates in the subquery, including the additional one formed\u003cbr\\/\u003e\\n  between the left side of the subquery operator and the column in the subquery\'s\u003cbr\\/\u003e\\n  SELECT list (for IN or ANY subqueries), include any subqueries, method calls,\u003cbr\\/\u003e\\n  or field accesses.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003eIf an EXISTS clause is considered a \\\"predicate\\\", then the query \u003c\\/p\u003e\\n\\n\u003cp\u003e  select &lt;...&gt;  from &lt;...&gt;\u003cbr\\/\u003e\\n  where exists (\u003cbr\\/\u003e\\n    select 1 from &lt;...&gt;\u003cbr\\/\u003e\\n    where exists (\u003cbr\\/\u003e\\n        select 1 from &lt;...&gt;\u003cbr\\/\u003e\\n          ...\u003c\\/p\u003e\\n\\n\u003cp\u003eseems to violate the condition quoted above from the documentation.  That is, the\u003cbr\\/\u003e\\nsubquery for the first EXISTS has a predicate (in this case another EXISTS query) \u003cbr\\/\u003e\\nwhich includes another subquery (\\\"select 1 from ...\\\"), and therefore the first \u003cbr\\/\u003e\\nsubquery should not be flattened.  If this is the correct reading then the bug would \u003cbr\\/\u003e\\nappear to be in the logic that checks for the aforementioned condition--presumably \u003cbr\\/\u003e\\nbecause that check occurs after the inner-most subquery has itself been flattened?  \u003cbr\\/\u003e\\nAgain, I\'m just guessing, I haven\'t done much examination of the actual codepath...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12561073_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561073_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 17:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T17:21:53+0000\'\u003e21\\/Jan\\/08 17:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"A B - 21\\/Jan\\/08 17:35\\\"\u003eedited\u003c\\/span\u003e                   bryan&gt; Perhaps the flattening logic is evaluating the correctness rules properly \\nbryan&gt; for a single level of flattening but isn\'t handling flattening-within-flattening?  \\n\\n Without having done any explicit tracing myself, this is what I would guess is the  \\nproblem.  Perhaps the inner-most EXISTS subquery can be considered an \\\"exists  \\nbase table\\\" (and thus only returns a single row) w.r.t. it\'s parent query, but if it is then  \\nflattened  again  to the outer-most query, maybe it should no longer be marked as  \\nan \\\"exists base table\\\"?  I don\'t if that\'s actually true, I\'m just speculating. \\n\\n craig&gt; I also found  http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html  that \\ncraig&gt; goes into some detail of the EXISTS join flattening \\n\\n Something from that page which stands out to me is the following condition: \\n\\n   \\\"None of the predicates in the subquery, including the additional one formed \\n  between the left side of the subquery operator and the column in the subquery\'s \\n  SELECT list (for IN or ANY subqueries), include any subqueries, method calls, \\n  or field accesses.\\\" \\n\\n If an EXISTS clause is considered a \\\"predicate\\\", then the query  \\n\\n   select &lt;...&gt;  from &lt;...&gt; \\n  where exists ( \\n    select 1 from &lt;...&gt; \\n    where exists ( \\n        select 1 from &lt;...&gt; \\n          ... \\n\\n seems to violate the condition quoted above from the documentation.  That is, the \\nsubquery for the first EXISTS has a predicate (in this case another EXISTS query)  \\nwhich includes another subquery (\\\"select 1 from ...\\\"), and therefore the first  \\nsubquery should not be flattened.  If this is the correct reading then the bug would  \\nappear to be in the logic that checks for the aforementioned condition--presumably  \\nbecause that check occurs after the inner-most subquery has itself been flattened?   \\nAgain, I\'m just guessing, I haven\'t done much examination of the actual codepath...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561138\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561138&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561138\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561138_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561138_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 21:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T21:54:18+0000\'\u003e21\\/Jan\\/08 21:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 21\\/Jan\\/08 21:55\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks a lot for all the pointers folks. I think both Army and Bryan nailed it on where\\/why this query fails on the trunk.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo check the hypothesis, I tried marking any subquery in the wherePredicates as such and skip flattening if this is a subquery in a whereClause. \u003cbr\\/\u003e\\nThe happens to be exactly what Kathey did in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3257\\\" title=\\\"SELECT with HAVING clause containing OR conditional incorrectly return 1 row - should return 2 rows - works correctly with 10.2 DB\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3257\\\"\u003e\u003cdel\u003eDERBY-3257\u003c\\/del\u003e\u003c\\/a\u003e for havingSubqueries. With the mark-and-skip fix the correct 7 rows are returned as the flattening is skipped.\u003c\\/p\u003e\\n\\n\u003cp\u003eMy approach is possibly too brute, and might be relaxed, but I\'ll post a proper patch tomorrow morning.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561138_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561138_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 21:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T21:54:18+0000\'\u003e21\\/Jan\\/08 21:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 21\\/Jan\\/08 21:55\\\"\u003eedited\u003c\\/span\u003e                   Thanks a lot for all the pointers folks. I think both Army and Bryan nailed it on where\\/why this query fails on the trunk. \\n\\n To check the hypothesis, I tried marking any subquery in the wherePredicates as such and skip flattening if this is a subquery in a whereClause.  \\nThe happens to be exactly what Kathey did in   DERBY-3257   for havingSubqueries. With the mark-and-skip fix the correct 7 rows are returned as the flattening is skipped. \\n\\n My approach is possibly too brute, and might be relaxed, but I\'ll post a proper patch tomorrow morning.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561141\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561141&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561141\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12561141_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561141_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T21:58:07+0000\'\u003e21\\/Jan\\/08 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGreat! I\'m looking forward to trying the patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12561141_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561141_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T21:58:07+0000\'\u003e21\\/Jan\\/08 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Great! I\'m looking forward to trying the patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561262\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561262&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561262\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561262_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561262_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 08:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T08:48:35+0000\'\u003e22\\/Jan\\/08 08:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe attached diff \'derby-3301-1.diff\' works in similar fashion as Katheys diff for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3257\\\" title=\\\"SELECT with HAVING clause containing OR conditional incorrectly return 1 row - should return 2 rows - works correctly with 10.2 DB\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3257\\\"\u003e\u003cdel\u003eDERBY-3257\u003c\\/del\u003e\u003c\\/a\u003e by\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003emarking any subquery in a WHERE clause as such\u003c\\/li\u003e\\n\\t\u003cli\u003eskip flattening of the subquery on the where subquery condition\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThis diff produces the correct results:\u003cbr\\/\u003e\\n---- snip &#8212;\u003cbr\\/\u003e\\nij(CONNECTION1)&gt; select unbound_e.empid, unbound_p.projid \u003cbr\\/\u003e\\nfrom departments this, \u003cbr\\/\u003e\\n     employees unbound_e, \u003cbr\\/\u003e\\n     projects unbound_p \u003cbr\\/\u003e\\nwhere exists ( \u003cbr\\/\u003e\\n    select 1 from employees this_employees_e \u003cbr\\/\u003e\\n    where exists ( \u003cbr\\/\u003e\\n        select 1 from project_employees this_employees_e_projects_p \u003cbr\\/\u003e\\n        where this_employees_e_projects_p.empid = this_employees_e.empid \u003cbr\\/\u003e\\n        and this_employees_e.department = this.id \u003cbr\\/\u003e\\n        and unbound_p.projid = this_employees_e_projects_p.projid \u003cbr\\/\u003e\\n        and unbound_e.empid = this_employees_e.empid) \u003cbr\\/\u003e\\n    );\u003cbr\\/\u003e\\nEMPID      |PROJID     \u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n11         |101        \u003cbr\\/\u003e\\n12         |101        \u003cbr\\/\u003e\\n13         |101        \u003cbr\\/\u003e\\n12         |102        \u003cbr\\/\u003e\\n13         |102        \u003cbr\\/\u003e\\n14         |103        \u003cbr\\/\u003e\\n15         |103        \u003c\\/p\u003e\\n\\n\u003cp\u003e7 rows selected\u003cbr\\/\u003e\\n---- snip &#8212;\u003c\\/p\u003e\\n\\n\u003cp\u003eEven though the diff works, the condition for skipping flattening should be relaxed to only apply to EXISTS subqueries in a WHERE clause, not \u003cb\u003eall\u003c\\/b\u003e subqueries in a where clause as is done in \'derby-3301-1.diff\'.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561262_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561262_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 08:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T08:48:35+0000\'\u003e22\\/Jan\\/08 08:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The attached diff \'derby-3301-1.diff\' works in similar fashion as Katheys diff for   DERBY-3257   by \\n \\n\\t marking any subquery in a WHERE clause as such \\n\\t skip flattening of the subquery on the where subquery condition \\n \\n\\n\\n This diff produces the correct results: \\n---- snip &#8212; \\nij(CONNECTION1)&gt; select unbound_e.empid, unbound_p.projid  \\nfrom departments this,  \\n     employees unbound_e,  \\n     projects unbound_p  \\nwhere exists (  \\n    select 1 from employees this_employees_e  \\n    where exists (  \\n        select 1 from project_employees this_employees_e_projects_p  \\n        where this_employees_e_projects_p.empid = this_employees_e.empid  \\n        and this_employees_e.department = this.id  \\n        and unbound_p.projid = this_employees_e_projects_p.projid  \\n        and unbound_e.empid = this_employees_e.empid)  \\n    ); \\nEMPID      |PROJID      \\n----------------------- \\n11         |101         \\n12         |101         \\n13         |101         \\n12         |102         \\n13         |102         \\n14         |103         \\n15         |103         \\n\\n 7 rows selected \\n---- snip &#8212; \\n\\n Even though the diff works, the condition for skipping flattening should be relaxed to only apply to EXISTS subqueries in a WHERE clause, not  all  subqueries in a where clause as is done in \'derby-3301-1.diff\'.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561383\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561383&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561383\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12561383_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561383_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 17:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T17:20:55+0000\'\u003e22\\/Jan\\/08 17:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"A B - 22\\/Jan\\/08 17:39\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Even though the diff works, the condition for skipping flattening should be relaxed\u003cbr\\/\u003e\\n&gt; to only apply to EXISTS subqueries in a WHERE clause\u003c\\/p\u003e\\n\\n\u003cp\u003eI think the condition may need to be narrowed down even further: EXISTS\u003cbr\\/\u003e\\nsubqueries \u003cem\u003eare\u003c\\/em\u003e allowed to be flattened from a WHERE clause \u003cem\u003eif\u003c\\/em\u003e that \u003cbr\\/\u003e\\nsubquery\'s WHERE clause does not itself contain another subquery.  As an \u003cbr\\/\u003e\\nexample, take a look at the last query on the doc page mentioned above,\u003cbr\\/\u003e\\nnamely:\u003c\\/p\u003e\\n\\n\u003cp\u003e  SELECT t1.* FROM t1, t2\u003cbr\\/\u003e\\n  WHERE EXISTS (SELECT * FROM t3 WHERE t1.c1 = t3.c1)\u003c\\/p\u003e\\n\\n\u003cp\u003e    gets flattened into\u003c\\/p\u003e\\n\\n\u003cp\u003e  SELECT t1.* FROM t1, t2, t3 WHERE t1.c1 = t3.c1\u003c\\/p\u003e\\n\\n\u003cp\u003eIf changes are made to completely avoid flattening of EXISTS subqueries in \u003cbr\\/\u003e\\nWHERE clauses, then the above query will \u003cb\u003enot\u003c\\/b\u003e be flattened into an exists join,\u003cbr\\/\u003e\\neven though it\'s perfectly valid to perform flattening in that case.  With the approach \u003cbr\\/\u003e\\nthat you\'ve outlined the exists join optimization as a whole will be disabled (I think?).  \u003cbr\\/\u003e\\nI think that has the potential to cause a performance regression for users whose \u003cbr\\/\u003e\\nqueries benefit from the EXISTS join optimization today.\u003c\\/p\u003e\\n\\n\u003cp\u003eA similar discussion was held for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3231\\\" title=\\\"Sorting on COUNT with OR and GROUP BY delivers wrong results.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3231\\\"\u003e\u003cdel\u003eDERBY-3231\u003c\\/del\u003e\u003c\\/a\u003e and in that case a decision was \u003cbr\\/\u003e\\nmade to deliberately remove an optimization for the sake of correctness.  But the \u003cbr\\/\u003e\\nuse cases affected by that particular optimization were (most likely) few and far\u003cbr\\/\u003e\\nbetween.  With this issue, though, I think removing EXISTS subquery flattening \u003cbr\\/\u003e\\nacross the board will affect far more users, so I worry about committing such a fix.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch as posted does not apply to the current trunk, but from what I can tell, if \u003cbr\\/\u003e\\nyou run a query like the one mentioned in the documentation, ex.:\u003c\\/p\u003e\\n\\n\u003cp\u003ecreate table t1 (c1 int, c2 int, c3 int);\u003cbr\\/\u003e\\ncreate table t2 (i int, j int);\u003cbr\\/\u003e\\ncreate table t3 (c1 int, vc varchar(10));\u003c\\/p\u003e\\n\\n\u003cp\u003einsert into t1 values (1, -1, 1), (3, -3, 9), (2, -2, 4);\u003cbr\\/\u003e\\ninsert into t2 values (2, 4);\u003cbr\\/\u003e\\ninsert into t3 values (1, \'one\'), (3, \'three\');\u003c\\/p\u003e\\n\\n\u003cp\u003eselect t1.* from t1, t2 where exists (select * from t3 where t1.c1 = t3.c1);\u003c\\/p\u003e\\n\\n\u003cp\u003eI think derby-3301-1.diff will cause the SELECT to skip flattening of the EXISTS\u003cbr\\/\u003e\\nsubquery.  Is that correct?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe core problem for this issue appears to be the specific case where we have a\u003cbr\\/\u003e\\nsubquery SQ1 that appears in the whereClause of \u003cb\u003eanother\u003c\\/b\u003e subquery SQ0.  In that\u003cbr\\/\u003e\\ncase disabling the flattening of SQ0 would be appropriate--as the documentation\u003cbr\\/\u003e\\nstates.  But if subquery SQ1 appears in the whereClause of an \u003cb\u003eOUTER\u003c\\/b\u003e query--as\u003cbr\\/\u003e\\nshown above--I don\'t think we should disable flattening altogether.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf at all possible, I think it\'d be better to fix the flattening condition for the specific\u003cbr\\/\u003e\\nsituation of nested subqueries than to completely disable WHERE clause flattening\u003cbr\\/\u003e\\nfor EXISTS subqueries.\u003c\\/p\u003e\\n\\n\u003cp\u003eOr put differently: if the documentation is correct, the \u003cem\u003eintent\u003c\\/em\u003e is to skip flattening of\u003cbr\\/\u003e\\nan EXISTS subquery that has predicates which in turn contain other subqueries.\u003cbr\\/\u003e\\nBut the current code does not correctly implement that intent.  So I think it\'d be\u003cbr\\/\u003e\\ngood to figure out \u003cem\u003ewhy\u003c\\/em\u003e the current code is wrong for the case of nested \u003cbr\\/\u003e\\nsubqueries, and then try to make a change that addresses that specific problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eOn a slightly different note, have you had a chance to run the regression suites\u003cbr\\/\u003e\\nwith this change?  I\'m curious to know if any of the existing tests actually test\u003cbr\\/\u003e\\nfor EXISTS join flattening--and if so, do those tests still pass with the proposed\u003cbr\\/\u003e\\nchange?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12561383_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561383_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 17:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T17:20:55+0000\'\u003e22\\/Jan\\/08 17:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"A B - 22\\/Jan\\/08 17:39\\\"\u003eedited\u003c\\/span\u003e                   &gt; Even though the diff works, the condition for skipping flattening should be relaxed \\n&gt; to only apply to EXISTS subqueries in a WHERE clause \\n\\n I think the condition may need to be narrowed down even further: EXISTS \\nsubqueries  are  allowed to be flattened from a WHERE clause  if  that  \\nsubquery\'s WHERE clause does not itself contain another subquery.  As an  \\nexample, take a look at the last query on the doc page mentioned above, \\nnamely: \\n\\n   SELECT t1.* FROM t1, t2 \\n  WHERE EXISTS (SELECT * FROM t3 WHERE t1.c1 = t3.c1) \\n\\n     gets flattened into \\n\\n   SELECT t1.* FROM t1, t2, t3 WHERE t1.c1 = t3.c1 \\n\\n If changes are made to completely avoid flattening of EXISTS subqueries in  \\nWHERE clauses, then the above query will  not  be flattened into an exists join, \\neven though it\'s perfectly valid to perform flattening in that case.  With the approach  \\nthat you\'ve outlined the exists join optimization as a whole will be disabled (I think?).   \\nI think that has the potential to cause a performance regression for users whose  \\nqueries benefit from the EXISTS join optimization today. \\n\\n A similar discussion was held for   DERBY-3231   and in that case a decision was  \\nmade to deliberately remove an optimization for the sake of correctness.  But the  \\nuse cases affected by that particular optimization were (most likely) few and far \\nbetween.  With this issue, though, I think removing EXISTS subquery flattening  \\nacross the board will affect far more users, so I worry about committing such a fix. \\n\\n The patch as posted does not apply to the current trunk, but from what I can tell, if  \\nyou run a query like the one mentioned in the documentation, ex.: \\n\\n create table t1 (c1 int, c2 int, c3 int); \\ncreate table t2 (i int, j int); \\ncreate table t3 (c1 int, vc varchar(10)); \\n\\n insert into t1 values (1, -1, 1), (3, -3, 9), (2, -2, 4); \\ninsert into t2 values (2, 4); \\ninsert into t3 values (1, \'one\'), (3, \'three\'); \\n\\n select t1.* from t1, t2 where exists (select * from t3 where t1.c1 = t3.c1); \\n\\n I think derby-3301-1.diff will cause the SELECT to skip flattening of the EXISTS \\nsubquery.  Is that correct? \\n\\n The core problem for this issue appears to be the specific case where we have a \\nsubquery SQ1 that appears in the whereClause of  another  subquery SQ0.  In that \\ncase disabling the flattening of SQ0 would be appropriate--as the documentation \\nstates.  But if subquery SQ1 appears in the whereClause of an  OUTER  query--as \\nshown above--I don\'t think we should disable flattening altogether. \\n\\n If at all possible, I think it\'d be better to fix the flattening condition for the specific \\nsituation of nested subqueries than to completely disable WHERE clause flattening \\nfor EXISTS subqueries. \\n\\n Or put differently: if the documentation is correct, the  intent  is to skip flattening of \\nan EXISTS subquery that has predicates which in turn contain other subqueries. \\nBut the current code does not correctly implement that intent.  So I think it\'d be \\ngood to figure out  why  the current code is wrong for the case of nested  \\nsubqueries, and then try to make a change that addresses that specific problem. \\n\\n On a slightly different note, have you had a chance to run the regression suites \\nwith this change?  I\'m curious to know if any of the existing tests actually test \\nfor EXISTS join flattening--and if so, do those tests still pass with the proposed \\nchange?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561614\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561614&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561614\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561614_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561614_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 09:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T09:13:27+0000\'\u003e23\\/Jan\\/08 09:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching updated patch \'derby-3301-2.diff\'.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe condition for skipping flattening should be even more specific than what is implemented in \'derby-3301-2.diff\' as per the discussion, so I\'m still not marking this with patch available. This updated patch will skip flattening if the WHERE EXISTS subquery is a select with a where subquery. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe issue I\'m facing is that flatteing of the lower\\/child WHERE EXISTS removes it from the whereSubquerys as it\'s supposed to. When we later preprocess the upper\\/parent WHERE EXISTS we lack information about what the lower whereSubquery originally was. It seems a similar issue was once seen for a normal whereClause as a copy of the original clause is kept in the SelectNode.originalWhereClause member.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561614_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561614_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 09:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T09:13:27+0000\'\u003e23\\/Jan\\/08 09:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching updated patch \'derby-3301-2.diff\'. \\n\\n The condition for skipping flattening should be even more specific than what is implemented in \'derby-3301-2.diff\' as per the discussion, so I\'m still not marking this with patch available. This updated patch will skip flattening if the WHERE EXISTS subquery is a select with a where subquery.  \\n\\n The issue I\'m facing is that flatteing of the lower\\/child WHERE EXISTS removes it from the whereSubquerys as it\'s supposed to. When we later preprocess the upper\\/parent WHERE EXISTS we lack information about what the lower whereSubquery originally was. It seems a similar issue was once seen for a normal whereClause as a copy of the original clause is kept in the SelectNode.originalWhereClause member.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561634\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561634&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561634\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561634_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561634_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 11:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T11:08:18+0000\'\u003e23\\/Jan\\/08 11:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRunning the query on a faster, dual-core machine actually produce the correct results \u003cb\u003ewithout\u003c\\/b\u003e running down the path provided by the last patch.\u003cbr\\/\u003e\\nThe queryplan looks totally different on the faster machine. Need to verify it still runs the problematic path with a slower machine.\u003cbr\\/\u003e\\nEither different statistics cause the change in queryplan, or (more likely as we still are in preprocessing) something else has changed on trunk as well.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561634_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561634_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 11:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T11:08:18+0000\'\u003e23\\/Jan\\/08 11:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Running the query on a faster, dual-core machine actually produce the correct results  without  running down the path provided by the last patch. \\nThe queryplan looks totally different on the faster machine. Need to verify it still runs the problematic path with a slower machine. \\nEither different statistics cause the change in queryplan, or (more likely as we still are in preprocessing) something else has changed on trunk as well.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561811\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561811&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561811\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561811_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561811_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 20:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T20:34:33+0000\'\u003e23\\/Jan\\/08 20:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching updated patch with correct condition checks for skipping flattening of WHERE EXISTS subquerys with nested WHERE EXISTS subqueries.\u003cbr\\/\u003e\\n\'derby-3301-3.diff\' also takes SubqueryNodes in the where clause, not only where subqueries into consideration.\u003c\\/p\u003e\\n\\n\u003cp\u003eWill run derbyAll and suites.All on this patch and report the results.\u003c\\/p\u003e\\n\\n\u003cp\u003eChecking patch available, and assigning it to me.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561811_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561811_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 20:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T20:34:33+0000\'\u003e23\\/Jan\\/08 20:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching updated patch with correct condition checks for skipping flattening of WHERE EXISTS subquerys with nested WHERE EXISTS subqueries. \\n\'derby-3301-3.diff\' also takes SubqueryNodes in the where clause, not only where subqueries into consideration. \\n\\n Will run derbyAll and suites.All on this patch and report the results. \\n\\n Checking patch available, and assigning it to me.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561813\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561813&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561813\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561813_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561813_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 20:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T20:37:24+0000\'\u003e23\\/Jan\\/08 20:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI should probably add that I got it reproduced on the faster box as well. Environmental issue caused breakpoints to not trigger.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561813_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561813_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 20:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T20:37:24+0000\'\u003e23\\/Jan\\/08 20:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I should probably add that I got it reproduced on the faster box as well. Environmental issue caused breakpoints to not trigger.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561825\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561825&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561825\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561825_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561825_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 21:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T21:32:19+0000\'\u003e23\\/Jan\\/08 21:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\'derby-3301-3b.diff\' fixes NPE seen in suites.All with the last patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561825_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561825_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 21:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T21:32:19+0000\'\u003e23\\/Jan\\/08 21:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \'derby-3301-3b.diff\' fixes NPE seen in suites.All with the last patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561998\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12561998&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561998\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561998_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561998_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 10:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T10:06:58+0000\'\u003e24\\/Jan\\/08 10:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 24\\/Jan\\/08 11:39\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003esuites.All and derbyall passes with \'derby-3301-3b.diff\'\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12561998_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561998_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 10:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T10:06:58+0000\'\u003e24\\/Jan\\/08 10:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 24\\/Jan\\/08 11:39\\\"\u003eedited\u003c\\/span\u003e                   suites.All and derbyall passes with \'derby-3301-3b.diff\'              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562021\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562021&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562021\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562021_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562021_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 11:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T11:52:27+0000\'\u003e24\\/Jan\\/08 11:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3349\\\" title=\\\"Nested WHERE EXISTS queries need improved testing\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3349\\\"\u003e\u003cdel\u003eDERBY-3349\u003c\\/del\u003e\u003c\\/a\u003e for improved testing for nested WHERE EXISTS clauses\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562021_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562021_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 11:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T11:52:27+0000\'\u003e24\\/Jan\\/08 11:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created   DERBY-3349   for improved testing for nested WHERE EXISTS clauses              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562029\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562029&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562029\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12562029_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562029_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 12:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T12:10:53+0000\'\u003e24\\/Jan\\/08 12:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI would like commit this fairly soon, but given the complexity of the issue, I would feel more at ease if someone else could also look at the 3b patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12562029_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562029_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 12:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T12:10:53+0000\'\u003e24\\/Jan\\/08 12:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I would like commit this fairly soon, but given the complexity of the issue, I would feel more at ease if someone else could also look at the 3b patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562090\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562090&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562090\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12562090_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562090_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 15:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T15:06:01+0000\'\u003e24\\/Jan\\/08 15:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDoes the 3b patch contain new regression tests?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12562090_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562090_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 15:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T15:06:01+0000\'\u003e24\\/Jan\\/08 15:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Does the 3b patch contain new regression tests?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562095\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562095&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562095\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562095_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562095_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T15:20:52+0000\'\u003e24\\/Jan\\/08 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNo, 3b does not include any new regression tests or extentions.\u003c\\/p\u003e\\n\\n\u003cp\u003eAn email comment from Army on derby-dev suggested I create a separate jira flagging the need for testing this issue. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3349\\\" title=\\\"Nested WHERE EXISTS queries need improved testing\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3349\\\"\u003e\u003cdel\u003eDERBY-3349\u003c\\/del\u003e\u003c\\/a\u003e was filed for this.\u003cbr\\/\u003e\\nMaybe I misinterpreted his comment?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562095_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562095_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 15:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T15:20:52+0000\'\u003e24\\/Jan\\/08 15:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    No, 3b does not include any new regression tests or extentions. \\n\\n An email comment from Army on derby-dev suggested I create a separate jira flagging the need for testing this issue.   DERBY-3349   was filed for this. \\nMaybe I misinterpreted his comment?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562097\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562097&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562097\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12562097_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562097_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 15:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T15:25:29+0000\'\u003e24\\/Jan\\/08 15:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think that we should at least include the basic repro script\u003cbr\\/\u003e\\nas a regression test in this patch, then as part of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3349\\\" title=\\\"Nested WHERE EXISTS queries need improved testing\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3349\\\"\u003e\u003cdel\u003eDERBY-3349\u003c\\/del\u003e\u003c\\/a\u003e\u003cbr\\/\u003e\\nwe could construct additional tests in this area.\u003c\\/p\u003e\\n\\n\u003cp\u003eCraig, you mentioned that your O\\/R tool generates lots of\u003cbr\\/\u003e\\nqueries like this; is it possible for you to contribute some\u003cbr\\/\u003e\\nadditional test cases, so that we can explore some other\u003cbr\\/\u003e\\nvarieties of flattenable and non-flattenable subqueries?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12562097_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562097_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 15:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T15:25:29+0000\'\u003e24\\/Jan\\/08 15:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think that we should at least include the basic repro script \\nas a regression test in this patch, then as part of   DERBY-3349   \\nwe could construct additional tests in this area. \\n\\n Craig, you mentioned that your O\\/R tool generates lots of \\nqueries like this; is it possible for you to contribute some \\nadditional test cases, so that we can explore some other \\nvarieties of flattenable and non-flattenable subqueries?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562106\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562106&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562106\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562106_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562106_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T15:44:40+0000\'\u003e24\\/Jan\\/08 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI can make the attached repro into a junit test that can be extended by \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3349\\\" title=\\\"Nested WHERE EXISTS queries need improved testing\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3349\\\"\u003e\u003cdel\u003eDERBY-3349\u003c\\/del\u003e\u003c\\/a\u003e later. \u003cbr\\/\u003e\\nOr is there an existing junit test the repro should go into?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562106_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562106_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 15:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T15:44:40+0000\'\u003e24\\/Jan\\/08 15:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I can make the attached repro into a junit test that can be extended by   DERBY-3349   later.  \\nOr is there an existing junit test the repro should go into?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562121\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562121&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562121\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12562121_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562121_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 16:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T16:26:23+0000\'\u003e24\\/Jan\\/08 16:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Maybe I misinterpreted his comment?\u003c\\/p\u003e\\n\\n\u003cp\u003eYes, I think so.  But probably more my fault than anything.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I meant to say was that I expect any patch which completely disables EXISTS\u003cbr\\/\u003e\\nsubquery flattening to theoretically cause at least one test in the regression suite\u003cbr\\/\u003e\\nto fail.  If that\'s not true-\u003cdel\u003ei.e. if all tests pass with such a patch\u003c\\/del\u003e-then it means that\u003cbr\\/\u003e\\nthere are no existing test cases to verify that EXISTS subquery flattening is actually\u003cbr\\/\u003e\\noccuring, and that would warrant a separate (testing) issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut for your 3b patch, you are \u003cb\u003eNOT\u003c\\/b\u003e disabling EXISTS subquery flattening altogether (as\u003cbr\\/\u003e\\ndiscussed earlier), so it\'s not surprising that existing tests run without error.  That said,\u003cbr\\/\u003e\\nI do think it would be good to add a new regression test to correspond to the specific\u003cbr\\/\u003e\\npatch that you\'ve posted--ex. a new test case based on the attached repro would be\u003cbr\\/\u003e\\ngood.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf that\'s still unclear, then the short version is \\\"Yes, I think a new test case (or set of\u003cbr\\/\u003e\\ntest cases) should be added for this issue\\\".  A JUnit test based on the repro would be\u003cbr\\/\u003e\\nideal.\u003c\\/p\u003e\\n\\n\u003cp\u003eApologies for any confusion cause by my earlier comment.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12562121_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562121_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 16:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T16:26:23+0000\'\u003e24\\/Jan\\/08 16:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Maybe I misinterpreted his comment? \\n\\n Yes, I think so.  But probably more my fault than anything. \\n\\n What I meant to say was that I expect any patch which completely disables EXISTS \\nsubquery flattening to theoretically cause at least one test in the regression suite \\nto fail.  If that\'s not true- i.e. if all tests pass with such a patch -then it means that \\nthere are no existing test cases to verify that EXISTS subquery flattening is actually \\noccuring, and that would warrant a separate (testing) issue. \\n\\n But for your 3b patch, you are  NOT  disabling EXISTS subquery flattening altogether (as \\ndiscussed earlier), so it\'s not surprising that existing tests run without error.  That said, \\nI do think it would be good to add a new regression test to correspond to the specific \\npatch that you\'ve posted--ex. a new test case based on the attached repro would be \\ngood. \\n\\n If that\'s still unclear, then the short version is \\\"Yes, I think a new test case (or set of \\ntest cases) should be added for this issue\\\".  A JUnit test based on the repro would be \\nideal. \\n\\n Apologies for any confusion cause by my earlier comment.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562135\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562135&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562135\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562135_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562135_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 17:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T17:14:39+0000\'\u003e24\\/Jan\\/08 17:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 24\\/Jan\\/08 17:22\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching \'derby-3301-test-1.diff\', a junit version of Craigs original \'derby-3301.sql\' reproscript.\u003cbr\\/\u003e\\nThe new regression test called WhereExistsTest.java can be used as a starting point for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3349\\\" title=\\\"Nested WHERE EXISTS queries need improved testing\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3349\\\"\u003e\u003cdel\u003eDERBY-3349\u003c\\/del\u003e\u003c\\/a\u003e.\u003cbr\\/\u003e\\nThe test-1 patch also adds the new test to functionTests\\/tests\\/lang\\/_Suite.java.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe test-1 patch runs successfully with the 3b patch applied, both as a single test and when run through the lang-suite.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562135_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562135_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 17:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T17:14:39+0000\'\u003e24\\/Jan\\/08 17:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Thomas Nielsen - 24\\/Jan\\/08 17:22\\\"\u003eedited\u003c\\/span\u003e                   Attaching \'derby-3301-test-1.diff\', a junit version of Craigs original \'derby-3301.sql\' reproscript. \\nThe new regression test called WhereExistsTest.java can be used as a starting point for   DERBY-3349  . \\nThe test-1 patch also adds the new test to functionTests\\/tests\\/lang\\/_Suite.java. \\n\\n The test-1 patch runs successfully with the 3b patch applied, both as a single test and when run through the lang-suite. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562169\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562169&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562169\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12562169_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562169_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T18:58:58+0000\'\u003e24\\/Jan\\/08 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTwo comments on the 3b patch.\u003c\\/p\u003e\\n\\n\u003cp\u003e1) The additional comments in SubqueryNode that describe the new condition for a flattenable\u003cbr\\/\u003e\\nsubquery seem like they might be slightly inverted.  The comments say:\u003c\\/p\u003e\\n\\n\u003cp\u003e   \\/* Values subquery is flattenable if:\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e...\u003c\\/li\u003e\\n\\t\u003cli\u003eo It is not a nested WHERE EXISTS subquery in a WHERE EXISTS clause (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3301\\\" title=\\\"Incorrect result from query with nested EXIST\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3301\\\"\u003e\u003cdel\u003eDERBY-3301\u003c\\/del\u003e\u003c\\/a\u003e)\u003cbr\\/\u003e\\n    *\\/\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eIgnoring the conditions which were already there, I read this as:\u003c\\/p\u003e\\n\\n\u003cp\u003e  \\\"A subquery SQ1 is flattenable if it is not a nested WHERE EXISTS subquery in the WHERE\u003cbr\\/\u003e\\n  EXISTS clause of another subquery, SQ2\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eIs that a correct reading?  If so, I think that if SQ1 \u003cb\u003eis\u003c\\/b\u003e a nested WHERE EXISTS subquery in\u003cbr\\/\u003e\\nthe WHERE EXISTS clause of SQ2, then it\'s technically \u003cem\u003eSQ2\u003c\\/em\u003e that is not flattenable, not SQ1.\u003cbr\\/\u003e\\nThat said, the actual code changes in the new \\\"hasNestedWhereExistsClause()\\\" look correct,\u003cbr\\/\u003e\\nso I think this is just a comment issue, not a code one.  Maybe a better condition would be:\u003c\\/p\u003e\\n\\n\u003cp\u003e  o Either a) it (the subquery) does not appear within a WHERE clause, or b) it appears within\u003cbr\\/\u003e\\n    a WHERE clause but does not itself contain a WHERE clause with other subqueries in it.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis definition is quite a bit more wordy, but it matches the documentation and it also matches\u003cbr\\/\u003e\\nthe code in hasNestedWhereExistsClause a bit more closely--though not exactly.  See #2\u003cbr\\/\u003e\\ncomment below...\u003c\\/p\u003e\\n\\n\u003cp\u003e2) The logic that exists in hasNestedWhereExistsClause() does exactly what its name implies,\u003cbr\\/\u003e\\ni.e. it checks specifically for \\\"nested WHERE EXISTS clauses\\\".  That in itself is good since it\u003cbr\\/\u003e\\naddresses the issue reported.  But I did notice that the documentation for EXISTS join flattening\u003cbr\\/\u003e\\nsuggests a slightly more general condition:\u003c\\/p\u003e\\n\\n\u003cp\u003e \u003ca href=\\\"http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eNamely, it seems like a more complete approach would be check to see if the subquery\'s\u003cbr\\/\u003e\\nWHERE clause \\\"includes \u003cem\u003eany\u003c\\/em\u003e subqueries\\\"--not just WHERE EXISTS subqueries.  For\u003cbr\\/\u003e\\nexample: if the inner-most WHERE EXISTS query was replaced with a WHERE IN or WHERE\u003cbr\\/\u003e\\nANY clause, would we still get the correct results?\u003c\\/p\u003e\\n\\n\u003cp\u003eAs an example, I re-wrote the inner-most WHERE EXISTS subquery from derby-3301.sql to use a\u003cbr\\/\u003e\\nWHERE IN clause that effectively duplicates one of the (already-existing) equality predicate, and\u003cbr\\/\u003e\\nso should in theory return the same results...I think? (I could be wrong here):\u003c\\/p\u003e\\n\\n\u003cp\u003eselect unbound_e.empid, unbound_p.projid\u003cbr\\/\u003e\\nfrom departments this,\u003cbr\\/\u003e\\n     employees unbound_e,\u003cbr\\/\u003e\\n     projects unbound_p\u003cbr\\/\u003e\\nwhere exists (\u003cbr\\/\u003e\\n    select 1 from employees this_employees_e\u003cbr\\/\u003e\\n    where this_employees_e.empid in (                           &#8211; *** Army changed this\u003cbr\\/\u003e\\n        select this_employees_e_projects_p.empid        &#8211; *** Army changed this\u003cbr\\/\u003e\\n        from project_employees this_employees_e_projects_p\u003cbr\\/\u003e\\n        where this_employees_e_projects_p.empid = this_employees_e.empid\u003cbr\\/\u003e\\n        and this_employees_e.department = this.id\u003cbr\\/\u003e\\n        and unbound_p.projid = this_employees_e_projects_p.projid\u003cbr\\/\u003e\\n        and unbound_e.empid = this_employees_e.empid)\u003c\\/p\u003e\\n\\n\u003cp\u003eThis returns three rows:\u003c\\/p\u003e\\n\\n\u003cp\u003eEMPID      |PROJID\u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n13         |101\u003cbr\\/\u003e\\n13         |102\u003cbr\\/\u003e\\n15         |103\u003c\\/p\u003e\\n\\n\u003cp\u003eIs that correct?  Or should that query be returning 7 rows, as well?  What about if\u003cbr\\/\u003e\\nthe first WHERE EXISTS query is changed to a \\\"WHERE IN\\\" query, as well--will\u003cbr\\/\u003e\\nthat behave correctly?\u003c\\/p\u003e\\n\\n\u003cp\u003eIf it should return seven rows, as well, then perhaps the new method in SubqueryNode\u003cbr\\/\u003e\\ncould be expanded to check for the existence of \u003cem\u003eany\u003c\\/em\u003e subquery, not just a WHERE\u003cbr\\/\u003e\\nEXISTS subquery?\u003c\\/p\u003e\\n\\n\u003cp\u003eOne way to do that might be to use a CollectNodesVisitor to collect all instances of\u003cbr\\/\u003e\\nSubqueryNode.class that appear in \\\"sn.originalWhereSubquerys\\\" and\\/or in\u003cbr\\/\u003e\\n\\\"sn.originalWhereClause()\\\"--and if that visitor returns any matches, then the method\u003cbr\\/\u003e\\nreturns \\\"false\\\".  I\'m not entirely sure that will work, but it seems like it could...?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12562169_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562169_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/08 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-24T18:58:58+0000\'\u003e24\\/Jan\\/08 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Two comments on the 3b patch. \\n\\n 1) The additional comments in SubqueryNode that describe the new condition for a flattenable \\nsubquery seem like they might be slightly inverted.  The comments say: \\n\\n    \\/* Values subquery is flattenable if: \\n \\n\\t ... \\n\\t o It is not a nested WHERE EXISTS subquery in a WHERE EXISTS clause (  DERBY-3301  ) \\n    *\\/ \\n \\n\\n\\n Ignoring the conditions which were already there, I read this as: \\n\\n   \\\"A subquery SQ1 is flattenable if it is not a nested WHERE EXISTS subquery in the WHERE \\n  EXISTS clause of another subquery, SQ2\\\". \\n\\n Is that a correct reading?  If so, I think that if SQ1  is  a nested WHERE EXISTS subquery in \\nthe WHERE EXISTS clause of SQ2, then it\'s technically  SQ2  that is not flattenable, not SQ1. \\nThat said, the actual code changes in the new \\\"hasNestedWhereExistsClause()\\\" look correct, \\nso I think this is just a comment issue, not a code one.  Maybe a better condition would be: \\n\\n   o Either a) it (the subquery) does not appear within a WHERE clause, or b) it appears within \\n    a WHERE clause but does not itself contain a WHERE clause with other subqueries in it. \\n\\n This definition is quite a bit more wordy, but it matches the documentation and it also matches \\nthe code in hasNestedWhereExistsClause a bit more closely--though not exactly.  See #2 \\ncomment below... \\n\\n 2) The logic that exists in hasNestedWhereExistsClause() does exactly what its name implies, \\ni.e. it checks specifically for \\\"nested WHERE EXISTS clauses\\\".  That in itself is good since it \\naddresses the issue reported.  But I did notice that the documentation for EXISTS join flattening \\nsuggests a slightly more general condition: \\n\\n   http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html  \\n\\n Namely, it seems like a more complete approach would be check to see if the subquery\'s \\nWHERE clause \\\"includes  any  subqueries\\\"--not just WHERE EXISTS subqueries.  For \\nexample: if the inner-most WHERE EXISTS query was replaced with a WHERE IN or WHERE \\nANY clause, would we still get the correct results? \\n\\n As an example, I re-wrote the inner-most WHERE EXISTS subquery from derby-3301.sql to use a \\nWHERE IN clause that effectively duplicates one of the (already-existing) equality predicate, and \\nso should in theory return the same results...I think? (I could be wrong here): \\n\\n select unbound_e.empid, unbound_p.projid \\nfrom departments this, \\n     employees unbound_e, \\n     projects unbound_p \\nwhere exists ( \\n    select 1 from employees this_employees_e \\n    where this_employees_e.empid in (                           &#8211; *** Army changed this \\n        select this_employees_e_projects_p.empid        &#8211; *** Army changed this \\n        from project_employees this_employees_e_projects_p \\n        where this_employees_e_projects_p.empid = this_employees_e.empid \\n        and this_employees_e.department = this.id \\n        and unbound_p.projid = this_employees_e_projects_p.projid \\n        and unbound_e.empid = this_employees_e.empid) \\n\\n This returns three rows: \\n\\n EMPID      |PROJID \\n----------------------- \\n13         |101 \\n13         |102 \\n15         |103 \\n\\n Is that correct?  Or should that query be returning 7 rows, as well?  What about if \\nthe first WHERE EXISTS query is changed to a \\\"WHERE IN\\\" query, as well--will \\nthat behave correctly? \\n\\n If it should return seven rows, as well, then perhaps the new method in SubqueryNode \\ncould be expanded to check for the existence of  any  subquery, not just a WHERE \\nEXISTS subquery? \\n\\n One way to do that might be to use a CollectNodesVisitor to collect all instances of \\nSubqueryNode.class that appear in \\\"sn.originalWhereSubquerys\\\" and\\/or in \\n\\\"sn.originalWhereClause()\\\"--and if that visitor returns any matches, then the method \\nreturns \\\"false\\\".  I\'m not entirely sure that will work, but it seems like it could...?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562427\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562427&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562427\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562427_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562427_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jan\\/08 10:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-25T10:34:15+0000\'\u003e25\\/Jan\\/08 10:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the input Army.\u003c\\/p\u003e\\n\\n\u003cp\u003eAd 1)\u003cbr\\/\u003e\\nI agree, the 3b comments miss the point slightly, and may be seen as \'inverted\'.\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt; I think that if SQ1 \u003cb\u003eis\u003c\\/b\u003e a nested WHERE EXISTS subquery in the WHERE EXISTS clause of SQ2, then it\'s technically \u003cem\u003eSQ2\u003c\\/em\u003e that is not flattenable, not SQ1.\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\nThis is correct, to my understanding. Your comment suggestion is a lot better, even if it is more elaborate.\u003c\\/p\u003e\\n\\n\u003cp\u003eAd 2)\u003cbr\\/\u003e\\nTrue, 3b only takes the actual problem reported into consideration.\u003cbr\\/\u003e\\nI reread the last bullet on the flattening criteria list (\u003ca href=\\\"http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html\u003c\\/a\u003e) again. You are once again correct Army. \u003cbr\\/\u003e\\nIf SQ2 a has \u003cb\u003eany\u003c\\/b\u003e subquery SQ1 in its WHERE EXISTS clause, flattening of SQ2 should be skipped. Not flattening in the case where SQ2 is an ANY or IN query\u003cbr\\/\u003e\\nis already handled in the existing code.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll look into CollectNodesVisitor and post an updated patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562427_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562427_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jan\\/08 10:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-25T10:34:15+0000\'\u003e25\\/Jan\\/08 10:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the input Army. \\n\\n Ad 1) \\nI agree, the 3b comments miss the point slightly, and may be seen as \'inverted\'. \\n&gt; \\n&gt; I think that if SQ1  is  a nested WHERE EXISTS subquery in the WHERE EXISTS clause of SQ2, then it\'s technically  SQ2  that is not flattenable, not SQ1. \\n&gt; \\nThis is correct, to my understanding. Your comment suggestion is a lot better, even if it is more elaborate. \\n\\n Ad 2) \\nTrue, 3b only takes the actual problem reported into consideration. \\nI reread the last bullet on the flattening criteria list ( http:\\/\\/db.apache.org\\/derby\\/docs\\/10.3\\/tuning\\/ctuntransform25868.html ) again. You are once again correct Army.  \\nIf SQ2 a has  any  subquery SQ1 in its WHERE EXISTS clause, flattening of SQ2 should be skipped. Not flattening in the case where SQ2 is an ANY or IN query \\nis already handled in the existing code. \\n\\n I\'ll look into CollectNodesVisitor and post an updated patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562492\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562492&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562492\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562492_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562492_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jan\\/08 13:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-25T13:35:32+0000\'\u003e25\\/Jan\\/08 13:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching \'derby-3301-4.diff\' \u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ecomments changed\u003c\\/li\u003e\\n\\t\u003cli\u003econdition for flattening changed to exclude all where subquerys in a WHERE EXISTS subquery from flattening and renamed the helper method accordingly.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI have not touched flattening of IN at all with derby-3301-4.diff.\u003c\\/p\u003e\\n\\n\u003cp\u003esuites.All and derbyall pass \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562492_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562492_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jan\\/08 13:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-25T13:35:32+0000\'\u003e25\\/Jan\\/08 13:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching \'derby-3301-4.diff\'  \\n \\n\\t comments changed \\n\\t condition for flattening changed to exclude all where subquerys in a WHERE EXISTS subquery from flattening and renamed the helper method accordingly. \\n \\n\\n\\n I have not touched flattening of IN at all with derby-3301-4.diff. \\n\\n suites.All and derbyall pass  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562582\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562582&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562582\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12562582_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562582_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jan\\/08 17:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-25T17:11:10+0000\'\u003e25\\/Jan\\/08 17:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you for your continued work on this, Thomas, and for your patience with my feedback.\u003cbr\\/\u003e\\nA couple of follow-up comments...\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; 1 &#8211;\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Not flattening in the case where SQ2 is an ANY or IN query\u003cbr\\/\u003e\\n&gt; is already handled in the existing code.\u003c\\/p\u003e\\n\\n\u003cp\u003eCan you point me to the place in the code where this check currently occurs?  Note how if I replace\u003cbr\\/\u003e\\nall occurrences of \\\"WHERE EXISTS\\\" from derby-3301.sql with \\\"WHERE ... IN\\\", the query returns 5 rows\u003cbr\\/\u003e\\nafter applying your patch--but I think it should return 7 like the others?  So it seems the existing\u003cbr\\/\u003e\\ncode to handle ANY or IN queries may be incorrect, as well...\u003c\\/p\u003e\\n\\n\u003cp\u003eij&gt; select unbound_e.empid, unbound_p.projid\u003cbr\\/\u003e\\nfrom departments this,\u003cbr\\/\u003e\\n     employees unbound_e,\u003cbr\\/\u003e\\n     projects unbound_p\u003cbr\\/\u003e\\nwhere this.id in (\u003cbr\\/\u003e\\n    select this_employees_e.department from employees this_employees_e\u003cbr\\/\u003e\\n    where this_employees_e.empid in (\u003cbr\\/\u003e\\n        select this_employees_e_projects_p.empid\u003cbr\\/\u003e\\n          from project_employees this_employees_e_projects_p\u003cbr\\/\u003e\\n        where this_employees_e_projects_p.empid = this_employees_e.empid\u003cbr\\/\u003e\\n        and this_employees_e.department = this.id\u003cbr\\/\u003e\\n        and unbound_p.projid = this_employees_e_projects_p.projid\u003cbr\\/\u003e\\n        and unbound_e.empid = this_employees_e.empid)\u003cbr\\/\u003e\\n    );\u003c\\/p\u003e\\n\\n\u003cp\u003eEMPID      |PROJID\u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n11         |101\u003cbr\\/\u003e\\n12         |102\u003cbr\\/\u003e\\n13         |102\u003cbr\\/\u003e\\n14         |103\u003cbr\\/\u003e\\n15         |103\u003c\\/p\u003e\\n\\n\u003cp\u003e5 rows selected\u003c\\/p\u003e\\n\\n\u003cp\u003eIf I make the following change w.r.t your patch:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eif ( isWhereSubquery() &amp;&amp; isEXISTS() ) {\u003cbr\\/\u003e\\n+        if ( isWhereSubquery() &amp;&amp; (isEXISTS() || isANY() || isIN()) ) {\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003ethen the above query returns 7 rows, as I think it should.\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; 2 &#8211;\u003c\\/p\u003e\\n\\n\u003cp\u003eWith respect to derby-3301-4.diff, I noticed that we still check for an EXISTS WHERE subquery for the\u003cbr\\/\u003e\\nsecond if statement, i.e.: at line 2382 (with your patch applied):\u003c\\/p\u003e\\n\\n\u003cp\u003e                if (sn.originalWhereClause != null &amp;&amp;\u003cbr\\/\u003e\\n                    sn.originalWhereClause instanceof SubqueryNode){\u003cbr\\/\u003e\\n                        SubqueryNode tmp = (SubqueryNode) sn.originalWhereClause;\u003cbr\\/\u003e\\n                        if ( tmp.isWhereSubquery() &amp;&amp; tmp.isEXISTS() ) { &#8211; *** Note the \\\"isExists()\\\" check...\u003c\\/p\u003e\\n\\n\u003cp\u003eIs there any reason not to remove \\\"tmp.isEXISTS()\\\" from inner \\\"if\\\" statement, similar to what you\u003cbr\\/\u003e\\ndid in the first half of this method?    Note how the query I posted yesterday with \\\"WHERE ... IN\\\" still\u003cbr\\/\u003e\\nlooks to return incorrect results (3 rows, when I think it should return 7?)--but if I remove the\u003cbr\\/\u003e\\n\\\"tmp.isEXISTS()\\\" check from the \\\"if\\\" statement, that query returns 7 rows.  I.e.\u003c\\/p\u003e\\n\\n\u003cp\u003e                        SubqueryNode tmp = (SubqueryNode) sn.originalWhereClause;\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eif ( tmp.isWhereSubquery() &amp;&amp; tmp.isEXISTS() ) {\u003cbr\\/\u003e\\n+                       if ( tmp.isWhereSubquery() ) {\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eYields:\u003c\\/p\u003e\\n\\n\u003cp\u003eij&gt; select unbound_e.empid, unbound_p.projid\u003cbr\\/\u003e\\nfrom departments this,\u003cbr\\/\u003e\\n     employees unbound_e,\u003cbr\\/\u003e\\n     projects unbound_p\u003cbr\\/\u003e\\nwhere exists (\u003cbr\\/\u003e\\n    select 1 from employees this_employees_e\u003cbr\\/\u003e\\n    where this_employees_e.empid in (\u003cbr\\/\u003e\\n        select this_employees_e_projects_p.empid\u003cbr\\/\u003e\\n          from project_employees this_employees_e_projects_p\u003cbr\\/\u003e\\n        where this_employees_e_projects_p.empid = this_employees_e.empid\u003cbr\\/\u003e\\n        and this_employees_e.department = this.id\u003cbr\\/\u003e\\n        and unbound_p.projid = this_employees_e_projects_p.projid\u003cbr\\/\u003e\\n        and unbound_e.empid = this_employees_e.empid)\u003cbr\\/\u003e\\n    );\u003c\\/p\u003e\\n\\n\u003cp\u003eEMPID      |PROJID\u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n11         |101\u003cbr\\/\u003e\\n12         |101\u003cbr\\/\u003e\\n13         |101\u003cbr\\/\u003e\\n12         |102\u003cbr\\/\u003e\\n13         |102\u003cbr\\/\u003e\\n14         |103\u003cbr\\/\u003e\\n15         |103\u003c\\/p\u003e\\n\\n\u003cp\u003e7 rows selected\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom what I can tell, the two modifications to your patch mentioned above make the method\u003cbr\\/\u003e\\nagree fully with the documentation, and appear to make all of the queries in question return\u003cbr\\/\u003e\\nthe correct number of rows.  Do they seem like reasonable modifications to you?\u003c\\/p\u003e\\n\\n\u003cp\u003eOf course this entire comment is based on the assumption that the two queries I wrote above\u003cbr\\/\u003e\\nwith \\\"WHERE ... IN\\\" are in fact supposed to return 7 rows.  If that\'s not true, then you can pretty\u003cbr\\/\u003e\\nmuch ignore everything in this particular comment...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12562582_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562582_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jan\\/08 17:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-25T17:11:10+0000\'\u003e25\\/Jan\\/08 17:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you for your continued work on this, Thomas, and for your patience with my feedback. \\nA couple of follow-up comments... \\n\\n &#8211; 1 &#8211; \\n\\n &gt; Not flattening in the case where SQ2 is an ANY or IN query \\n&gt; is already handled in the existing code. \\n\\n Can you point me to the place in the code where this check currently occurs?  Note how if I replace \\nall occurrences of \\\"WHERE EXISTS\\\" from derby-3301.sql with \\\"WHERE ... IN\\\", the query returns 5 rows \\nafter applying your patch--but I think it should return 7 like the others?  So it seems the existing \\ncode to handle ANY or IN queries may be incorrect, as well... \\n\\n ij&gt; select unbound_e.empid, unbound_p.projid \\nfrom departments this, \\n     employees unbound_e, \\n     projects unbound_p \\nwhere this.id in ( \\n    select this_employees_e.department from employees this_employees_e \\n    where this_employees_e.empid in ( \\n        select this_employees_e_projects_p.empid \\n          from project_employees this_employees_e_projects_p \\n        where this_employees_e_projects_p.empid = this_employees_e.empid \\n        and this_employees_e.department = this.id \\n        and unbound_p.projid = this_employees_e_projects_p.projid \\n        and unbound_e.empid = this_employees_e.empid) \\n    ); \\n\\n EMPID      |PROJID \\n----------------------- \\n11         |101 \\n12         |102 \\n13         |102 \\n14         |103 \\n15         |103 \\n\\n 5 rows selected \\n\\n If I make the following change w.r.t your patch: \\n\\n \\n\\t if ( isWhereSubquery() &amp;&amp; isEXISTS() ) { \\n+        if ( isWhereSubquery() &amp;&amp; (isEXISTS() || isANY() || isIN()) ) { \\n \\n\\n\\n then the above query returns 7 rows, as I think it should. \\n\\n &#8211; 2 &#8211; \\n\\n With respect to derby-3301-4.diff, I noticed that we still check for an EXISTS WHERE subquery for the \\nsecond if statement, i.e.: at line 2382 (with your patch applied): \\n\\n                 if (sn.originalWhereClause != null &amp;&amp; \\n                    sn.originalWhereClause instanceof SubqueryNode){ \\n                        SubqueryNode tmp = (SubqueryNode) sn.originalWhereClause; \\n                        if ( tmp.isWhereSubquery() &amp;&amp; tmp.isEXISTS() ) { &#8211; *** Note the \\\"isExists()\\\" check... \\n\\n Is there any reason not to remove \\\"tmp.isEXISTS()\\\" from inner \\\"if\\\" statement, similar to what you \\ndid in the first half of this method?    Note how the query I posted yesterday with \\\"WHERE ... IN\\\" still \\nlooks to return incorrect results (3 rows, when I think it should return 7?)--but if I remove the \\n\\\"tmp.isEXISTS()\\\" check from the \\\"if\\\" statement, that query returns 7 rows.  I.e. \\n\\n                         SubqueryNode tmp = (SubqueryNode) sn.originalWhereClause; \\n \\n\\t if ( tmp.isWhereSubquery() &amp;&amp; tmp.isEXISTS() ) { \\n+                       if ( tmp.isWhereSubquery() ) { \\n \\n\\n\\n Yields: \\n\\n ij&gt; select unbound_e.empid, unbound_p.projid \\nfrom departments this, \\n     employees unbound_e, \\n     projects unbound_p \\nwhere exists ( \\n    select 1 from employees this_employees_e \\n    where this_employees_e.empid in ( \\n        select this_employees_e_projects_p.empid \\n          from project_employees this_employees_e_projects_p \\n        where this_employees_e_projects_p.empid = this_employees_e.empid \\n        and this_employees_e.department = this.id \\n        and unbound_p.projid = this_employees_e_projects_p.projid \\n        and unbound_e.empid = this_employees_e.empid) \\n    ); \\n\\n EMPID      |PROJID \\n----------------------- \\n11         |101 \\n12         |101 \\n13         |101 \\n12         |102 \\n13         |102 \\n14         |103 \\n15         |103 \\n\\n 7 rows selected \\n\\n From what I can tell, the two modifications to your patch mentioned above make the method \\nagree fully with the documentation, and appear to make all of the queries in question return \\nthe correct number of rows.  Do they seem like reasonable modifications to you? \\n\\n Of course this entire comment is based on the assumption that the two queries I wrote above \\nwith \\\"WHERE ... IN\\\" are in fact supposed to return 7 rows.  If that\'s not true, then you can pretty \\nmuch ignore everything in this particular comment...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562907\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562907&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562907\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562907_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562907_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jan\\/08 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-26T19:05:05+0000\'\u003e26\\/Jan\\/08 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m the one to thank for your continued comments Army \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eAd 1) \u003cbr\\/\u003e\\nThe IN variant of the query should return 7 rows as well I think. To verify I checked with another opensource database, and it does indeed return 7 rows too.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt; Not flattening in the case where SQ2 is an ANY or IN query\u003cbr\\/\u003e\\n&gt;&gt; is already handled in the existing code.\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt;Can you point me to the place in the code where this check currently occurs?\u003c\\/p\u003e\\n\\n\u003cp\u003eThere are checks in SubqueryNode @698, @757 that I at writing thought would handle this - obviously not so.\u003c\\/p\u003e\\n\\n\u003cp\u003eAd 2)\u003cbr\\/\u003e\\nThe inner most tmp.isEXISTS() was not intentional :\\/ Thanks for spotting that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562907_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562907_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jan\\/08 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-26T19:05:05+0000\'\u003e26\\/Jan\\/08 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m the one to thank for your continued comments Army   \\n\\n Ad 1)  \\nThe IN variant of the query should return 7 rows as well I think. To verify I checked with another opensource database, and it does indeed return 7 rows too. \\n\\n &gt;&gt; Not flattening in the case where SQ2 is an ANY or IN query \\n&gt;&gt; is already handled in the existing code. \\n&gt; \\n&gt;Can you point me to the place in the code where this check currently occurs? \\n\\n There are checks in SubqueryNode @698, @757 that I at writing thought would handle this - obviously not so. \\n\\n Ad 2) \\nThe inner most tmp.isEXISTS() was not intentional :\\/ Thanks for spotting that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12562909\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12562909&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12562909\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562909_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562909_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jan\\/08 19:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-26T19:20:40+0000\'\u003e26\\/Jan\\/08 19:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching \'derby-3301-4b.diff\' based on Armys latest comments.\u003cbr\\/\u003e\\nI renamed the helper function to better describe what it checks.\u003c\\/p\u003e\\n\\n\u003cp\u003eAttaching \'derby-3301-test-2.diff\' which includes the IN variant of the query.\u003c\\/p\u003e\\n\\n\u003cp\u003ederbyall passes. \u003cbr\\/\u003e\\nsuites.All has 7 errors off todays head of trunk, but they seem unrelated (StringIndexOutOfBounds in SecureServerTest). I\'ll look into it on monday.\u003cbr\\/\u003e\\nThe new WhereExistsTest pass with 4b applied.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12562909_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12562909_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jan\\/08 19:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-26T19:20:40+0000\'\u003e26\\/Jan\\/08 19:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching \'derby-3301-4b.diff\' based on Armys latest comments. \\nI renamed the helper function to better describe what it checks. \\n\\n Attaching \'derby-3301-test-2.diff\' which includes the IN variant of the query. \\n\\n derbyall passes.  \\nsuites.All has 7 errors off todays head of trunk, but they seem unrelated (StringIndexOutOfBounds in SecureServerTest). I\'ll look into it on monday. \\nThe new WhereExistsTest pass with 4b applied.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563214\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563214&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563214\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12563214_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563214_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 17:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T17:29:51+0000\'\u003e28\\/Jan\\/08 17:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you for the 4b patch, Thomas.\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom what I can tell, the changes now look functionally good to me--thank you for incorporating\u003cbr\\/\u003e\\nmy feedback.\u003c\\/p\u003e\\n\\n\u003cp\u003eI did notice that some of the code comments still reference \\\"WHERE EXISTS\\\" predicates only,\u003cbr\\/\u003e\\nwhen in fact the new method (now) coveres IN and ANY predicates, as well.  But that\'s just a\u003cbr\\/\u003e\\nnit--it shouldn\'t block commit of the patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eMy only remaining minor comment is that I think it would be good to add test cases for\u003cbr\\/\u003e\\nthe various IN, ANY, and EXISTS combinations that are not currently tested.  As an example,\u003cbr\\/\u003e\\nthe query I posted previously that replaces \u003cem\u003eboth\u003c\\/em\u003e instances of \\\"EXISTS\\\" with \\\"IN\\\" would be a\u003cbr\\/\u003e\\ngood test case to add.  I see that you added a new test case for \\\"EXISTS ... IN\\\", which was\u003cbr\\/\u003e\\ngreat--thanks for doing that.  I think a minimal list of combinations to check should be:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eWHERE EXISTS ... WHERE EXISTS (done with test-1.diff &#8211; thanks!)\u003c\\/li\u003e\\n\\t\u003cli\u003eWHERE EXISTS ... WHERE IN (done with test-2.diff &#8211; thanks!)\u003c\\/li\u003e\\n\\t\u003cli\u003eWHERE EXISTS .. WHERE ANY\u003c\\/li\u003e\\n\\t\u003cli\u003eWHERE IN ... WHERE IN (I posted an example in my previous post, but it\'s not included in the tests)\u003c\\/li\u003e\\n\\t\u003cli\u003eWHERE ANY ... WHERE ANY\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eBut again, the additional test cases could come as a separate patch later, or perhaps even\u003cbr\\/\u003e\\nas a patch for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3349\\\" title=\\\"Nested WHERE EXISTS queries need improved testing\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3349\\\"\u003e\u003cdel\u003eDERBY-3349\u003c\\/del\u003e\u003c\\/a\u003e.  I.e. I don\'t think this should block commit of the 4b patch nor the\u003cbr\\/\u003e\\ntest-2 patch.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; suites.All has 7 errors off todays head of trunk\u003c\\/p\u003e\\n\\n\u003cp\u003eI haven\'t seen these errors in the tinderbox runs.  Do you see them in a clean codeline?  And\u003cbr\\/\u003e\\nif so, were you able to track down the cause?\u003c\\/p\u003e\\n\\n\u003cp\u003eThank you for all of your work on this, Thomas!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12563214_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563214_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 17:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T17:29:51+0000\'\u003e28\\/Jan\\/08 17:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you for the 4b patch, Thomas. \\n\\n From what I can tell, the changes now look functionally good to me--thank you for incorporating \\nmy feedback. \\n\\n I did notice that some of the code comments still reference \\\"WHERE EXISTS\\\" predicates only, \\nwhen in fact the new method (now) coveres IN and ANY predicates, as well.  But that\'s just a \\nnit--it shouldn\'t block commit of the patch. \\n\\n My only remaining minor comment is that I think it would be good to add test cases for \\nthe various IN, ANY, and EXISTS combinations that are not currently tested.  As an example, \\nthe query I posted previously that replaces  both  instances of \\\"EXISTS\\\" with \\\"IN\\\" would be a \\ngood test case to add.  I see that you added a new test case for \\\"EXISTS ... IN\\\", which was \\ngreat--thanks for doing that.  I think a minimal list of combinations to check should be: \\n\\n \\n\\t WHERE EXISTS ... WHERE EXISTS (done with test-1.diff &#8211; thanks!) \\n\\t WHERE EXISTS ... WHERE IN (done with test-2.diff &#8211; thanks!) \\n\\t WHERE EXISTS .. WHERE ANY \\n\\t WHERE IN ... WHERE IN (I posted an example in my previous post, but it\'s not included in the tests) \\n\\t WHERE ANY ... WHERE ANY \\n \\n\\n\\n But again, the additional test cases could come as a separate patch later, or perhaps even \\nas a patch for   DERBY-3349  .  I.e. I don\'t think this should block commit of the 4b patch nor the \\ntest-2 patch. \\n\\n &gt; suites.All has 7 errors off todays head of trunk \\n\\n I haven\'t seen these errors in the tinderbox runs.  Do you see them in a clean codeline?  And \\nif so, were you able to track down the cause? \\n\\n Thank you for all of your work on this, Thomas!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563227\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563227&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563227\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563227_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563227_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 18:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T18:19:38+0000\'\u003e28\\/Jan\\/08 18:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI agree that all the listed combinations should be tested, but let\'s leave the test extension to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3349\\\" title=\\\"Nested WHERE EXISTS queries need improved testing\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3349\\\"\u003e\u003cdel\u003eDERBY-3349\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eReran suites.All with the 4b and test-2 patches on two different machines, and it passed on both. Most likely the failure was caused by test folder that wasn\'t clean before starting the test.\u003c\\/p\u003e\\n\\n\u003cp\u003eAttaching derby-3301-4c with updated comments in SubqueryNode.isWhereExistsAnyInWithWhereSubquery() according to Armys commnets.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563227_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563227_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 18:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T18:19:38+0000\'\u003e28\\/Jan\\/08 18:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I agree that all the listed combinations should be tested, but let\'s leave the test extension to   DERBY-3349  . \\n\\n Reran suites.All with the 4b and test-2 patches on two different machines, and it passed on both. Most likely the failure was caused by test folder that wasn\'t clean before starting the test. \\n\\n Attaching derby-3301-4c with updated comments in SubqueryNode.isWhereExistsAnyInWithWhereSubquery() according to Armys commnets.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563231\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563231&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563231\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563231_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563231_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 18:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T18:28:03+0000\'\u003e28\\/Jan\\/08 18:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWould it be a good idea to rename the new test in test-2 from WhereExistsTest.java to something like WhereExistsAnyInTest.java?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563231_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563231_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 18:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T18:28:03+0000\'\u003e28\\/Jan\\/08 18:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Would it be a good idea to rename the new test in test-2 from WhereExistsTest.java to something like WhereExistsAnyInTest.java?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563241\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563241&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563241\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12563241_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563241_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 18:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T18:46:22+0000\'\u003e28\\/Jan\\/08 18:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Would it be a good idea to rename the new test in test-2 from\u003cbr\\/\u003e\\n&gt; WhereExistsTest.java to something like WhereExistsAnyInTest.java?\u003c\\/p\u003e\\n\\n\u003cp\u003eOr maybe NestedWhereSubqueryTest.java would be a more general but still appropriate name?\u003c\\/p\u003e\\n\\n\u003cp\u003eDyre, if you\'re still looking to commit the changes for this issue, I have no further comments\u003cbr\\/\u003e\\nto make on the 4c nor the test-2 patch.  Many thanks again to Thomas for his persistence on\u003cbr\\/\u003e\\nthis one...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12563241_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563241_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 18:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T18:46:22+0000\'\u003e28\\/Jan\\/08 18:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Would it be a good idea to rename the new test in test-2 from \\n&gt; WhereExistsTest.java to something like WhereExistsAnyInTest.java? \\n\\n Or maybe NestedWhereSubqueryTest.java would be a more general but still appropriate name? \\n\\n Dyre, if you\'re still looking to commit the changes for this issue, I have no further comments \\nto make on the 4c nor the test-2 patch.  Many thanks again to Thomas for his persistence on \\nthis one...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563254\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563254&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563254\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563254_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563254_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 19:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T19:22:50+0000\'\u003e28\\/Jan\\/08 19:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching \'derby-3301-test-3.diff\' with renamed test.\u003c\\/p\u003e\\n\\n\u003cp\u003eTest passes when run standalone, and is running as part of the lang suite now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563254_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563254_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 19:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T19:22:50+0000\'\u003e28\\/Jan\\/08 19:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching \'derby-3301-test-3.diff\' with renamed test. \\n\\n Test passes when run standalone, and is running as part of the lang suite now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563266\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563266&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563266\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563266_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563266_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 19:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T19:56:55+0000\'\u003e28\\/Jan\\/08 19:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003etest-3 passed as part of the suite as well.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks a lot for all your guidance Army!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563266_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563266_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 19:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T19:56:55+0000\'\u003e28\\/Jan\\/08 19:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    test-3 passed as part of the suite as well. \\n\\n Thanks a lot for all your guidance Army!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563280\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563280&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563280\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563280_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563280_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 20:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T20:37:54+0000\'\u003e28\\/Jan\\/08 20:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReattaching derby-3301-test-3.diff\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12563280_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563280_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/08 20:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-28T20:37:54+0000\'\u003e28\\/Jan\\/08 20:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reattaching derby-3301-test-3.diff              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563476\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563476&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563476\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12563476_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563476_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 11:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T11:46:08+0000\'\u003e29\\/Jan\\/08 11:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAB&gt; Dyre, if you\'re still looking to commit the changes for this issue,\u003c\\/p\u003e\\n\\n\u003cp\u003eAnyone should feel free to commit it \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e But yes, I do think it is an important and complex fix which will benefit from being run in the nightly regression tests for a while before the next release. \u003cbr\\/\u003e\\nI have applied the patches successfully and I\'m running the tests. I plan to commit them later this afternoon. \u003c\\/p\u003e\\n\\n\u003cp\u003eOn a related note; this is not a regression, but would it still make sense to merge it to 10.3. ?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12563476_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563476_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 11:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T11:46:08+0000\'\u003e29\\/Jan\\/08 11:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    AB&gt; Dyre, if you\'re still looking to commit the changes for this issue, \\n\\n Anyone should feel free to commit it   But yes, I do think it is an important and complex fix which will benefit from being run in the nightly regression tests for a while before the next release.  \\nI have applied the patches successfully and I\'m running the tests. I plan to commit them later this afternoon.  \\n\\n On a related note; this is not a regression, but would it still make sense to merge it to 10.3. ?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563566\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563566&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563566\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12563566_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563566_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 16:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T16:30:19+0000\'\u003e29\\/Jan\\/08 16:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith the two patches I get a failure in lang\\/subqueryFlattening.sql. \u003cbr\\/\u003e\\nFrom a quick look at the diff it seems like the test dumps a query plan that is different with the patch. I guessing that the master file needs to be updated, \u003cbr\\/\u003e\\nbut it would be nice if someone could confirm it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12563566_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563566_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 16:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T16:30:19+0000\'\u003e29\\/Jan\\/08 16:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With the two patches I get a failure in lang\\/subqueryFlattening.sql.  \\nFrom a quick look at the diff it seems like the test dumps a query plan that is different with the patch. I guessing that the master file needs to be updated,  \\nbut it would be nice if someone could confirm it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563575\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563575&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563575\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12563575_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563575_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 17:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T17:10:09+0000\'\u003e29\\/Jan\\/08 17:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'d like to summarize my understanding of the patch.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf you have an EXISTS nested inside an EXISTS, the optimized inversion of the query execution plan does not occur. Instead, the natural execution plan is performed. That is, the outer tables are iterated and for each candidate tuple of the joined tables, the EXISTS is performed. \u003c\\/p\u003e\\n\\n\u003cp\u003eFor each EXISTS check, the scans are reinitialized and there might not be any clues as to exactly where in the outer scan the EXISTS is being invoked. This might yield sub-optimal performance compared to an optimized inverted scan.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, I\'m trying to get some more test cases by putting additional criteria into the EXISTS and running the query in debug mode and filtering the output. It\'s slower than I expected but I\'ll continue if it will help.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12563575_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563575_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 17:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T17:10:09+0000\'\u003e29\\/Jan\\/08 17:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'d like to summarize my understanding of the patch. \\n\\n If you have an EXISTS nested inside an EXISTS, the optimized inversion of the query execution plan does not occur. Instead, the natural execution plan is performed. That is, the outer tables are iterated and for each candidate tuple of the joined tables, the EXISTS is performed.  \\n\\n For each EXISTS check, the scans are reinitialized and there might not be any clues as to exactly where in the outer scan the EXISTS is being invoked. This might yield sub-optimal performance compared to an optimized inverted scan. \\n\\n Also, I\'m trying to get some more test cases by putting additional criteria into the EXISTS and running the query in debug mode and filtering the output. It\'s slower than I expected but I\'ll continue if it will help.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563581\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563581&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563581\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12563581_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563581_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T17:26:30+0000\'\u003e29\\/Jan\\/08 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; With the two patches I get a failure in lang\\/subqueryFlattening.sql. \u003c\\/p\u003e\\n\\n\u003cp\u003eGood catch, Dyre.  I was operating on the assumption that derbyall ran cleanly with\u003cbr\\/\u003e\\nthe 4c patch; I hadn\'t run it myself.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; From a quick look at the diff it seems like the test dumps a query plan that is different\u003cbr\\/\u003e\\n&gt; with the patch\u003c\\/p\u003e\\n\\n\u003cp\u003eI confirmed that there is one query for which the query plan is different--and for that specific query,\u003cbr\\/\u003e\\nI think the difference is correct.  Namely, the query has nested WHERE EXISTS subqueries and so,\u003cbr\\/\u003e\\naccording to the findings for this issue, cannot be safely flattened.  So that part seems okay.\u003c\\/p\u003e\\n\\n\u003cp\u003eI then noticed that another query further down in the test \u003cem\u003ealso\u003c\\/em\u003e has nested WHERE EXISTS\u003cbr\\/\u003e\\nsubqueries, but that query \u003cem\u003eis\u003c\\/em\u003e in fact flattened into an exists join--which runs counter to the\u003cbr\\/\u003e\\nfindings so far for this issue (i.e. it shouldn\'t be flattened into an EXISTS due to the nested\u003cbr\\/\u003e\\nEXISTS subqueries).  The fact that the query in subqueryFlattening still returns correct rows\u003cbr\\/\u003e\\nsuggests that maybe there are cases where flattening of EXISTS subqueries is \\\"safe\\\"--but\u003cbr\\/\u003e\\nthat seems beyond the scope of this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eI played around with the repro for this issue and was able to write the following query:\u003c\\/p\u003e\\n\\n\u003cp\u003eselect unbound_e.empid, unbound_p.projid\u003cbr\\/\u003e\\nfrom departments this,\u003cbr\\/\u003e\\n     employees unbound_e,\u003cbr\\/\u003e\\n     projects unbound_p\u003cbr\\/\u003e\\nwhere exists (\u003cbr\\/\u003e\\n    select 1 from employees this_employees_e\u003cbr\\/\u003e\\n    where 1 = 1 and exists (\u003cbr\\/\u003e\\n        select 1 from project_employees this_employees_e_projects_p\u003cbr\\/\u003e\\n        where this_employees_e_projects_p.empid = this_employees_e.empid\u003cbr\\/\u003e\\n        and this_employees_e.department = this.id\u003cbr\\/\u003e\\n        and unbound_p.projid = this_employees_e_projects_p.projid\u003cbr\\/\u003e\\n        and unbound_e.empid = this_employees_e.empid)\u003cbr\\/\u003e\\n    );\u003c\\/p\u003e\\n\\n\u003cp\u003eThe only difference between this query and the one in derby-3301.sql is that I\'ve\u003cbr\\/\u003e\\nadded a (no-op) predicate \\\"1 = 1\\\" alongside the inner-most EXISTS clause.\u003cbr\\/\u003e\\nSince this creates an AndNode whose left operand is a relational op (\\\"1 = 1\\\") and\u003cbr\\/\u003e\\nwhose right operand is a SubqueryNode, the code in the 4c patch that checks\u003cbr\\/\u003e\\nspecifically for a SubqueryNode will not detect it:\u003c\\/p\u003e\\n\\n\u003cp\u003e+               if (sn.originalWhereClause != null &amp;&amp;\u003cbr\\/\u003e\\n+                   sn.originalWhereClause instanceof SubqueryNode)  {\u003cbr\\/\u003e\\n+                       ...\u003c\\/p\u003e\\n\\n\u003cp\u003eSince whereClause here is actually an AndNode, not a SubqueryNode, the \\\"if\\\" statement\u003cbr\\/\u003e\\nabove is not triggered, thus the query is incorrectly flattened into an EXISTS joins.  The\u003cbr\\/\u003e\\nend result is that the query only returns 5 rows when it should return 7 (the extra \\\"1 = 1\\\"\u003cbr\\/\u003e\\npredicate shouldn\'t affect the results).\u003c\\/p\u003e\\n\\n\u003cp\u003eI think I mentioned a few comments ago that it might be possible to use a CollectNodesVisitor\u003cbr\\/\u003e\\nto search the whereClause for any SubqueryNodes.  The above example demonstrates why\u003cbr\\/\u003e\\nsuch a visitor would be helpful, as opposed to just checking directly for a SubqueryNode...\u003c\\/p\u003e\\n\\n\u003cp\u003eSo to answer Dyre\'s question, yes, I think a master update will be needed.  But further\u003cbr\\/\u003e\\ninspection of subqueryFlattening.sql shows that the 4c patch may need a few more\u003cbr\\/\u003e\\ntweaks, after all...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12563581_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563581_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 17:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T17:26:30+0000\'\u003e29\\/Jan\\/08 17:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; With the two patches I get a failure in lang\\/subqueryFlattening.sql.  \\n\\n Good catch, Dyre.  I was operating on the assumption that derbyall ran cleanly with \\nthe 4c patch; I hadn\'t run it myself. \\n\\n &gt; From a quick look at the diff it seems like the test dumps a query plan that is different \\n&gt; with the patch \\n\\n I confirmed that there is one query for which the query plan is different--and for that specific query, \\nI think the difference is correct.  Namely, the query has nested WHERE EXISTS subqueries and so, \\naccording to the findings for this issue, cannot be safely flattened.  So that part seems okay. \\n\\n I then noticed that another query further down in the test  also  has nested WHERE EXISTS \\nsubqueries, but that query  is  in fact flattened into an exists join--which runs counter to the \\nfindings so far for this issue (i.e. it shouldn\'t be flattened into an EXISTS due to the nested \\nEXISTS subqueries).  The fact that the query in subqueryFlattening still returns correct rows \\nsuggests that maybe there are cases where flattening of EXISTS subqueries is \\\"safe\\\"--but \\nthat seems beyond the scope of this issue. \\n\\n I played around with the repro for this issue and was able to write the following query: \\n\\n select unbound_e.empid, unbound_p.projid \\nfrom departments this, \\n     employees unbound_e, \\n     projects unbound_p \\nwhere exists ( \\n    select 1 from employees this_employees_e \\n    where 1 = 1 and exists ( \\n        select 1 from project_employees this_employees_e_projects_p \\n        where this_employees_e_projects_p.empid = this_employees_e.empid \\n        and this_employees_e.department = this.id \\n        and unbound_p.projid = this_employees_e_projects_p.projid \\n        and unbound_e.empid = this_employees_e.empid) \\n    ); \\n\\n The only difference between this query and the one in derby-3301.sql is that I\'ve \\nadded a (no-op) predicate \\\"1 = 1\\\" alongside the inner-most EXISTS clause. \\nSince this creates an AndNode whose left operand is a relational op (\\\"1 = 1\\\") and \\nwhose right operand is a SubqueryNode, the code in the 4c patch that checks \\nspecifically for a SubqueryNode will not detect it: \\n\\n +               if (sn.originalWhereClause != null &amp;&amp; \\n+                   sn.originalWhereClause instanceof SubqueryNode)  { \\n+                       ... \\n\\n Since whereClause here is actually an AndNode, not a SubqueryNode, the \\\"if\\\" statement \\nabove is not triggered, thus the query is incorrectly flattened into an EXISTS joins.  The \\nend result is that the query only returns 5 rows when it should return 7 (the extra \\\"1 = 1\\\" \\npredicate shouldn\'t affect the results). \\n\\n I think I mentioned a few comments ago that it might be possible to use a CollectNodesVisitor \\nto search the whereClause for any SubqueryNodes.  The above example demonstrates why \\nsuch a visitor would be helpful, as opposed to just checking directly for a SubqueryNode... \\n\\n So to answer Dyre\'s question, yes, I think a master update will be needed.  But further \\ninspection of subqueryFlattening.sql shows that the 4c patch may need a few more \\ntweaks, after all...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563660\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563660&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563660\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12563660_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563660_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 20:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T20:50:42+0000\'\u003e29\\/Jan\\/08 20:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere are more queries, just slightly modified from the original queries. I\'ve done little editing of the queries to avoid introducing copy\\/paste errors. \u003c\\/p\u003e\\n\\n\u003cp\u003eThis one works:\u003cbr\\/\u003e\\nSELECT UNBOUND_E.PERSONID FROM applicationidentity0.DEPARTMENTS THIS , applicationidentity0.PERSONS UNBOUND_E \u003cbr\\/\u003e\\n  WHERE EXISTS (\u003cbr\\/\u003e\\n    SELECT 1 FROM applicationidentity0.PERSONS THIS_EMPLOYEES_E \u003cbr\\/\u003e\\n      WHERE THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID AND UNBOUND_E.PERSONID = THIS_EMPLOYEES_E.PERSONID AND THIS.ID = &lt;2&gt;)\u003c\\/p\u003e\\n\\n\u003cp\u003eThis fails, returns 5 rows where 7 are expected. The difference between this and the original query is that THIS.ID is also returned in the outer select:\u003cbr\\/\u003e\\nSELECT THIS.ID,UNBOUND_E.PERSONID,UNBOUND_P.PROJID FROM applicationidentity0.DEPARTMENTS THIS , applicationidentity0.PERSONS UNBOUND_E , applicationidentity0.PROJECTS UNBOUND_P \u003cbr\\/\u003e\\n  WHERE EXISTS (\u003cbr\\/\u003e\\n    SELECT 1 FROM applicationidentity0.PERSONS THIS_EMPLOYEES_E \u003cbr\\/\u003e\\n      WHERE EXISTS (\u003cbr\\/\u003e\\n        SELECT 1 FROM applicationidentity0.PROJECT_MEMBER THIS_EMPLOYEES_E_PROJECTS_P \u003cbr\\/\u003e\\n         WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"MEMBER\\\" = THIS_EMPLOYEES_E.PERSONID \u003cbr\\/\u003e\\n           AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID \u003cbr\\/\u003e\\n           AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID \u003cbr\\/\u003e\\n           AND UNBOUND_E.PERSONID = THIS_EMPLOYEES_E.PERSONID\u003cbr\\/\u003e\\n))\u003c\\/p\u003e\\n\\n\u003cp\u003eThis fails, returns 3 rows where 5 are expected. \u003cbr\\/\u003e\\nSELECT UNBOUND_E.PERSONID,UNBOUND_P.PROJID FROM applicationidentity0.DEPARTMENTS THIS , applicationidentity0.PERSONS UNBOUND_E , applicationidentity0.PROJECTS UNBOUND_P \u003cbr\\/\u003e\\n  WHERE EXISTS (\u003cbr\\/\u003e\\n    SELECT 1 FROM applicationidentity0.PERSONS THIS_EMPLOYEES_E \u003cbr\\/\u003e\\n      WHERE EXISTS (\u003cbr\\/\u003e\\n        SELECT 1 FROM applicationidentity0.PROJECT_MEMBER THIS_EMPLOYEES_E_PROJECTS_P \u003cbr\\/\u003e\\n          WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"MEMBER\\\" = THIS_EMPLOYEES_E.PERSONID \u003cbr\\/\u003e\\n          AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID \u003cbr\\/\u003e\\n          AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID \u003cbr\\/\u003e\\n          AND UNBOUND_E.PERSONID = THIS_EMPLOYEES_E.PERSONID \u003cbr\\/\u003e\\n          AND THIS.ID = &lt;1&gt;))\u003c\\/p\u003e\\n\\n\u003cp\u003eThis fails, returning 5 rows where 7 are expected.\u003cbr\\/\u003e\\nSELECT UNBOUND_E.PERSONID,UNBOUND_P.PROJID FROM applicationidentity0.DEPARTMENTS THIS , applicationidentity0.PERSONS UNBOUND_E , applicationidentity0.PROJECTS UNBOUND_P \u003cbr\\/\u003e\\n  WHERE EXISTS (\u003cbr\\/\u003e\\n    SELECT 1 FROM applicationidentity0.PERSONS THIS_EMPLOYEES_E \u003cbr\\/\u003e\\n      WHERE EXISTS (\u003cbr\\/\u003e\\n        SELECT 1 FROM applicationidentity0.PROJECT_MEMBER THIS_EMPLOYEES_E_PROJECTS_P \u003cbr\\/\u003e\\n          WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"MEMBER\\\" = THIS_EMPLOYEES_E.PERSONID \u003cbr\\/\u003e\\n          AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID \u003cbr\\/\u003e\\n          AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID \u003cbr\\/\u003e\\n          AND UNBOUND_E.PERSONID = THIS_EMPLOYEES_E.PERSONID \u003cbr\\/\u003e\\n          AND THIS.COMPANYID = &lt;1&gt;))\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12563660_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563660_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jan\\/08 20:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-29T20:50:42+0000\'\u003e29\\/Jan\\/08 20:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here are more queries, just slightly modified from the original queries. I\'ve done little editing of the queries to avoid introducing copy\\/paste errors.  \\n\\n This one works: \\nSELECT UNBOUND_E.PERSONID FROM applicationidentity0.DEPARTMENTS THIS , applicationidentity0.PERSONS UNBOUND_E  \\n  WHERE EXISTS ( \\n    SELECT 1 FROM applicationidentity0.PERSONS THIS_EMPLOYEES_E  \\n      WHERE THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID AND UNBOUND_E.PERSONID = THIS_EMPLOYEES_E.PERSONID AND THIS.ID = &lt;2&gt;) \\n\\n This fails, returns 5 rows where 7 are expected. The difference between this and the original query is that THIS.ID is also returned in the outer select: \\nSELECT THIS.ID,UNBOUND_E.PERSONID,UNBOUND_P.PROJID FROM applicationidentity0.DEPARTMENTS THIS , applicationidentity0.PERSONS UNBOUND_E , applicationidentity0.PROJECTS UNBOUND_P  \\n  WHERE EXISTS ( \\n    SELECT 1 FROM applicationidentity0.PERSONS THIS_EMPLOYEES_E  \\n      WHERE EXISTS ( \\n        SELECT 1 FROM applicationidentity0.PROJECT_MEMBER THIS_EMPLOYEES_E_PROJECTS_P  \\n         WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"MEMBER\\\" = THIS_EMPLOYEES_E.PERSONID  \\n           AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID  \\n           AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID  \\n           AND UNBOUND_E.PERSONID = THIS_EMPLOYEES_E.PERSONID \\n)) \\n\\n This fails, returns 3 rows where 5 are expected.  \\nSELECT UNBOUND_E.PERSONID,UNBOUND_P.PROJID FROM applicationidentity0.DEPARTMENTS THIS , applicationidentity0.PERSONS UNBOUND_E , applicationidentity0.PROJECTS UNBOUND_P  \\n  WHERE EXISTS ( \\n    SELECT 1 FROM applicationidentity0.PERSONS THIS_EMPLOYEES_E  \\n      WHERE EXISTS ( \\n        SELECT 1 FROM applicationidentity0.PROJECT_MEMBER THIS_EMPLOYEES_E_PROJECTS_P  \\n          WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"MEMBER\\\" = THIS_EMPLOYEES_E.PERSONID  \\n          AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID  \\n          AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID  \\n          AND UNBOUND_E.PERSONID = THIS_EMPLOYEES_E.PERSONID  \\n          AND THIS.ID = &lt;1&gt;)) \\n\\n This fails, returning 5 rows where 7 are expected. \\nSELECT UNBOUND_E.PERSONID,UNBOUND_P.PROJID FROM applicationidentity0.DEPARTMENTS THIS , applicationidentity0.PERSONS UNBOUND_E , applicationidentity0.PROJECTS UNBOUND_P  \\n  WHERE EXISTS ( \\n    SELECT 1 FROM applicationidentity0.PERSONS THIS_EMPLOYEES_E  \\n      WHERE EXISTS ( \\n        SELECT 1 FROM applicationidentity0.PROJECT_MEMBER THIS_EMPLOYEES_E_PROJECTS_P  \\n          WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"MEMBER\\\" = THIS_EMPLOYEES_E.PERSONID  \\n          AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID  \\n          AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID  \\n          AND UNBOUND_E.PERSONID = THIS_EMPLOYEES_E.PERSONID  \\n          AND THIS.COMPANYID = &lt;1&gt;)) \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12563914\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12563914&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12563914\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12563914_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563914_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T09:12:20+0000\'\u003e30\\/Jan\\/08 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAB&gt; I was operating on the assumption that derbyall ran cleanly with the 4c patch; I hadn\'t run it myself.\u003c\\/p\u003e\\n\\n\u003cp\u003eI talked to Thomas offline yesterday and he was adamant that he HAD run derbyall with 0 failed tests. Which was true, except that when he looked closer at derbyall_report.txt it turned out that\u003cbr\\/\u003e\\nan environment problem also had caused 0 tests to be run...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12563914_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12563914_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T09:12:20+0000\'\u003e30\\/Jan\\/08 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    AB&gt; I was operating on the assumption that derbyall ran cleanly with the 4c patch; I hadn\'t run it myself. \\n\\n I talked to Thomas offline yesterday and he was adamant that he HAD run derbyall with 0 failed tests. Which was true, except that when he looked closer at derbyall_report.txt it turned out that \\nan environment problem also had caused 0 tests to be run...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564157\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564157&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564157\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564157_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564157_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 19:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T19:57:21+0000\'\u003e30\\/Jan\\/08 19:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eVery sorry for the derbyall hickup :|\u003c\\/p\u003e\\n\\n\u003cp\u003eAttaching \u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eupdated patch \'derby-3301-5.diff\'  which uses a CollectNodesVisitor to find all lower SubqueryNodes as pointed out by Army.\u003c\\/li\u003e\\n\\t\u003cli\u003eextra sql script in \'derby-3301-extra.sql\' containig Craigs additional queries modified to work with the original repro script schema sql\'.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eWith the 5 patch applied both the original query and the additional queries Craig posted return as expected. See output below.\u003cbr\\/\u003e\\nI still need to \u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ehave another look at Armys latest variant, as it doesn\'t seem to end up with a similar querytree to the others (i.e no SubqueryNodes in the WHERE clause).\u003c\\/li\u003e\\n\\t\u003cli\u003emodify the master output for lang\\/subqueryFlattening.sql.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eij&gt; \u003cbr\\/\u003e\\nselect unbound_e.empid, unbound_p.projid \u003cbr\\/\u003e\\nfrom departments this, \u003cbr\\/\u003e\\n     employees unbound_e, \u003cbr\\/\u003e\\n     projects unbound_p \u003cbr\\/\u003e\\nwhere exists ( \u003cbr\\/\u003e\\n    select 1 from employees this_employees_e \u003cbr\\/\u003e\\n    where exists ( \u003cbr\\/\u003e\\n        select 1 from project_employees this_employees_e_projects_p \u003cbr\\/\u003e\\n        where this_employees_e_projects_p.empid = this_employees_e.empid \u003cbr\\/\u003e\\n        and this_employees_e.department = this.id \u003cbr\\/\u003e\\n        and unbound_p.projid = this_employees_e_projects_p.projid \u003cbr\\/\u003e\\n        and unbound_e.empid = this_employees_e.empid) \u003cbr\\/\u003e\\n    ); \u003c\\/p\u003e\\n\\n\u003cp\u003eEMPID      |PROJID     \u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n11         |101        \u003cbr\\/\u003e\\n12         |101        \u003cbr\\/\u003e\\n13         |101        \u003cbr\\/\u003e\\n12         |102        \u003cbr\\/\u003e\\n13         |102        \u003cbr\\/\u003e\\n14         |103        \u003cbr\\/\u003e\\n15         |103        \u003c\\/p\u003e\\n\\n\u003cp\u003e7 rows selected\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8212;\u003c\\/p\u003e\\n\\n\u003cp\u003eCraigs additional queries:\u003cbr\\/\u003e\\nij&gt;\u003cbr\\/\u003e\\nSELECT UNBOUND_E.empid FROM DEPARTMENTS THIS , employees UNBOUND_E\u003cbr\\/\u003e\\n  WHERE EXISTS (\u003cbr\\/\u003e\\n    SELECT 1 FROM employees THIS_EMPLOYEES_E\u003cbr\\/\u003e\\n      WHERE THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID AND UNBOUND_E.empid = THIS_EMPLOYEES_E.empid AND THIS.ID = 2);\u003cbr\\/\u003e\\nEMPID      \u003cbr\\/\u003e\\n-----------\u003cbr\\/\u003e\\n14         \u003cbr\\/\u003e\\n15         \u003c\\/p\u003e\\n\\n\u003cp\u003e2 rows selected \u003cbr\\/\u003e\\nij&gt; \u003cbr\\/\u003e\\nSELECT THIS.ID,UNBOUND_E.empid,UNBOUND_P.PROJID FROM DEPARTMENTS THIS , employees UNBOUND_E , projects UNBOUND_P\u003cbr\\/\u003e\\n  WHERE EXISTS (\u003cbr\\/\u003e\\n    SELECT 1 FROM employees THIS_EMPLOYEES_E\u003cbr\\/\u003e\\n      WHERE EXISTS (\u003cbr\\/\u003e\\n        SELECT 1 FROM project_employees THIS_EMPLOYEES_E_PROJECTS_P\u003cbr\\/\u003e\\n         WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"EMPID\\\" = THIS_EMPLOYEES_E.empid\u003cbr\\/\u003e\\n           AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID\u003cbr\\/\u003e\\n           AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID\u003cbr\\/\u003e\\n           AND UNBOUND_E.empid = THIS_EMPLOYEES_E.empid\u003cbr\\/\u003e\\n));\u003cbr\\/\u003e\\nID         |EMPID      |PROJID     \u003cbr\\/\u003e\\n-----------------------------------\u003cbr\\/\u003e\\n1          |11         |101        \u003cbr\\/\u003e\\n1          |12         |101        \u003cbr\\/\u003e\\n1          |13         |101        \u003cbr\\/\u003e\\n1          |12         |102        \u003cbr\\/\u003e\\n1          |13         |102        \u003cbr\\/\u003e\\n2          |14         |103        \u003cbr\\/\u003e\\n2          |15         |103        \u003c\\/p\u003e\\n\\n\u003cp\u003e7 rows selected\u003cbr\\/\u003e\\nij&gt; \u003cbr\\/\u003e\\nSELECT UNBOUND_E.empid,UNBOUND_P.PROJID FROM DEPARTMENTS THIS , employees UNBOUND_E , PROJECTS UNBOUND_P\u003cbr\\/\u003e\\n  WHERE EXISTS (\u003cbr\\/\u003e\\n    SELECT 1 FROM employees THIS_EMPLOYEES_E\u003cbr\\/\u003e\\n      WHERE EXISTS (\u003cbr\\/\u003e\\n        SELECT 1 FROM project_employees THIS_EMPLOYEES_E_PROJECTS_P\u003cbr\\/\u003e\\n          WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"EMPID\\\" = THIS_EMPLOYEES_E.empid\u003cbr\\/\u003e\\n          AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID\u003cbr\\/\u003e\\n          AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID\u003cbr\\/\u003e\\n          AND UNBOUND_E.empid = THIS_EMPLOYEES_E.empid\u003cbr\\/\u003e\\n          AND THIS.ID = 1));\u003cbr\\/\u003e\\nEMPID      |PROJID     \u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n11         |101        \u003cbr\\/\u003e\\n12         |101        \u003cbr\\/\u003e\\n13         |101        \u003cbr\\/\u003e\\n12         |102        \u003cbr\\/\u003e\\n13         |102        \u003c\\/p\u003e\\n\\n\u003cp\u003e5 rows selected\u003cbr\\/\u003e\\nij&gt;\u003cbr\\/\u003e\\nSELECT UNBOUND_E.empid,UNBOUND_P.PROJID FROM DEPARTMENTS THIS , employees UNBOUND_E , PROJECTS UNBOUND_P\u003cbr\\/\u003e\\n  WHERE EXISTS (\u003cbr\\/\u003e\\n    SELECT 1 FROM employees THIS_EMPLOYEES_E\u003cbr\\/\u003e\\n      WHERE EXISTS (\u003cbr\\/\u003e\\n        SELECT 1 FROM project_employees THIS_EMPLOYEES_E_PROJECTS_P\u003cbr\\/\u003e\\n          WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"EMPID\\\" = THIS_EMPLOYEES_E.empid\u003cbr\\/\u003e\\n          AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID\u003cbr\\/\u003e\\n          AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID\u003cbr\\/\u003e\\n          AND UNBOUND_E.empid = THIS_EMPLOYEES_E.empid\u003cbr\\/\u003e\\n          AND THIS.COMPANYID = 1));\u003cbr\\/\u003e\\nEMPID      |PROJID     \u003cbr\\/\u003e\\n-----------------------\u003cbr\\/\u003e\\n11         |101        \u003cbr\\/\u003e\\n12         |101        \u003cbr\\/\u003e\\n13         |101        \u003cbr\\/\u003e\\n12         |102        \u003cbr\\/\u003e\\n13         |102        \u003cbr\\/\u003e\\n14         |103        \u003cbr\\/\u003e\\n15         |103        \u003c\\/p\u003e\\n\\n\u003cp\u003e7 rows selected\u003cbr\\/\u003e\\nij&gt;\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564157_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564157_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 19:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T19:57:21+0000\'\u003e30\\/Jan\\/08 19:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Very sorry for the derbyall hickup :| \\n\\n Attaching  \\n \\n\\t updated patch \'derby-3301-5.diff\'  which uses a CollectNodesVisitor to find all lower SubqueryNodes as pointed out by Army. \\n\\t extra sql script in \'derby-3301-extra.sql\' containig Craigs additional queries modified to work with the original repro script schema sql\'. \\n \\n\\n\\n With the 5 patch applied both the original query and the additional queries Craig posted return as expected. See output below. \\nI still need to  \\n \\n\\t have another look at Armys latest variant, as it doesn\'t seem to end up with a similar querytree to the others (i.e no SubqueryNodes in the WHERE clause). \\n\\t modify the master output for lang\\/subqueryFlattening.sql. \\n \\n\\n\\n ij&gt;  \\nselect unbound_e.empid, unbound_p.projid  \\nfrom departments this,  \\n     employees unbound_e,  \\n     projects unbound_p  \\nwhere exists (  \\n    select 1 from employees this_employees_e  \\n    where exists (  \\n        select 1 from project_employees this_employees_e_projects_p  \\n        where this_employees_e_projects_p.empid = this_employees_e.empid  \\n        and this_employees_e.department = this.id  \\n        and unbound_p.projid = this_employees_e_projects_p.projid  \\n        and unbound_e.empid = this_employees_e.empid)  \\n    );  \\n\\n EMPID      |PROJID      \\n----------------------- \\n11         |101         \\n12         |101         \\n13         |101         \\n12         |102         \\n13         |102         \\n14         |103         \\n15         |103         \\n\\n 7 rows selected \\n\\n &#8212; \\n\\n Craigs additional queries: \\nij&gt; \\nSELECT UNBOUND_E.empid FROM DEPARTMENTS THIS , employees UNBOUND_E \\n  WHERE EXISTS ( \\n    SELECT 1 FROM employees THIS_EMPLOYEES_E \\n      WHERE THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID AND UNBOUND_E.empid = THIS_EMPLOYEES_E.empid AND THIS.ID = 2); \\nEMPID       \\n----------- \\n14          \\n15          \\n\\n 2 rows selected  \\nij&gt;  \\nSELECT THIS.ID,UNBOUND_E.empid,UNBOUND_P.PROJID FROM DEPARTMENTS THIS , employees UNBOUND_E , projects UNBOUND_P \\n  WHERE EXISTS ( \\n    SELECT 1 FROM employees THIS_EMPLOYEES_E \\n      WHERE EXISTS ( \\n        SELECT 1 FROM project_employees THIS_EMPLOYEES_E_PROJECTS_P \\n         WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"EMPID\\\" = THIS_EMPLOYEES_E.empid \\n           AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID \\n           AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID \\n           AND UNBOUND_E.empid = THIS_EMPLOYEES_E.empid \\n)); \\nID         |EMPID      |PROJID      \\n----------------------------------- \\n1          |11         |101         \\n1          |12         |101         \\n1          |13         |101         \\n1          |12         |102         \\n1          |13         |102         \\n2          |14         |103         \\n2          |15         |103         \\n\\n 7 rows selected \\nij&gt;  \\nSELECT UNBOUND_E.empid,UNBOUND_P.PROJID FROM DEPARTMENTS THIS , employees UNBOUND_E , PROJECTS UNBOUND_P \\n  WHERE EXISTS ( \\n    SELECT 1 FROM employees THIS_EMPLOYEES_E \\n      WHERE EXISTS ( \\n        SELECT 1 FROM project_employees THIS_EMPLOYEES_E_PROJECTS_P \\n          WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"EMPID\\\" = THIS_EMPLOYEES_E.empid \\n          AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID \\n          AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID \\n          AND UNBOUND_E.empid = THIS_EMPLOYEES_E.empid \\n          AND THIS.ID = 1)); \\nEMPID      |PROJID      \\n----------------------- \\n11         |101         \\n12         |101         \\n13         |101         \\n12         |102         \\n13         |102         \\n\\n 5 rows selected \\nij&gt; \\nSELECT UNBOUND_E.empid,UNBOUND_P.PROJID FROM DEPARTMENTS THIS , employees UNBOUND_E , PROJECTS UNBOUND_P \\n  WHERE EXISTS ( \\n    SELECT 1 FROM employees THIS_EMPLOYEES_E \\n      WHERE EXISTS ( \\n        SELECT 1 FROM project_employees THIS_EMPLOYEES_E_PROJECTS_P \\n          WHERE THIS_EMPLOYEES_E_PROJECTS_P.\\\"EMPID\\\" = THIS_EMPLOYEES_E.empid \\n          AND UNBOUND_P.PROJID = THIS_EMPLOYEES_E_PROJECTS_P.PROJID \\n          AND THIS_EMPLOYEES_E.DEPARTMENT = THIS.ID \\n          AND UNBOUND_E.empid = THIS_EMPLOYEES_E.empid \\n          AND THIS.COMPANYID = 1)); \\nEMPID      |PROJID      \\n----------------------- \\n11         |101         \\n12         |101         \\n13         |101         \\n12         |102         \\n13         |102         \\n14         |103         \\n15         |103         \\n\\n 7 rows selected \\nij&gt;              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564176\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564176&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564176\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564176_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564176_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 21:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T21:31:26+0000\'\u003e30\\/Jan\\/08 21:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching updated master file for lang\\/subqueryFlattening. Diffs only in qyeryplans, so the changes in patch 5 produce identical results for the tested queries. \u003cbr\\/\u003e\\nWhen run standalone the updated lang\\/subqueryFlattening test pass.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564176_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564176_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 21:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T21:31:26+0000\'\u003e30\\/Jan\\/08 21:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching updated master file for lang\\/subqueryFlattening. Diffs only in qyeryplans, so the changes in patch 5 produce identical results for the tested queries.  \\nWhen run standalone the updated lang\\/subqueryFlattening test pass.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564224\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564224&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564224\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12564224_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564224_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 23:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T23:42:49+0000\'\u003e30\\/Jan\\/08 23:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; I still need to have another look at Armys latest variant, as it doesn\'t seem to end\u003cbr\\/\u003e\\n&gt; up with a similar querytree to the others\u003c\\/p\u003e\\n\\n\u003cp\u003eActually, I think the query does fit the general shape. In your v5 patch you iterate through each of\u003cbr\\/\u003e\\nthe SubqueryNode\'s that are found by CollectNodesVisitor and check to see if any of them was\u003cbr\\/\u003e\\nmarked as a \\\"whereSubquery()\\\". For some reason that check fails in the query that I posted--i.e.\u003cbr\\/\u003e\\nthe one where I include the \\\"1 = 1\\\" predicate. While I don\'t know why the call to whereSubquery()\u003cbr\\/\u003e\\nreturns false, I also don\'t think that it\'s necessary at this particular point.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe code that calls CollectNodesVisitor is this line:\u003c\\/p\u003e\\n\\n\u003cp\u003e          sn.originalWhereClause.accept(cnv);\u003c\\/p\u003e\\n\\n\u003cp\u003eSince we\'re visiting the original WHERE clause, any SubqueryNodes that we find are necessarily\u003cbr\\/\u003e\\ngoing to be \\\"WHERE subqueries\\\" because we found them in a WHERE clause. So it seems like\u003cbr\\/\u003e\\nwe shouldn\'t have to call \\\"isWhereSubquery()\\\" on any of them--we just need to check to see if the\u003cbr\\/\u003e\\nCollectNodesVisitor found at least one, and if so, we\'re done. I changed your version 5 patch to\u003cbr\\/\u003e\\nlook like this:\u003c\\/p\u003e\\n\\n\u003cp\u003e  ....\u003cbr\\/\u003e\\n                if (sn.originalWhereClause != null)\u003c\\/p\u003e\\n                {\\n                    \\/* Second instance of SubqueryNode.class effectively means \\\"don\'t bother\\n                     * searching beneath SubqueryNodes since if we found one, we\'re done.\\\"\\n                     *\\/\\n                    CollectNodesVisitor cnv =\\n                        new CollectNodesVisitor(\\n                            SubqueryNode.class, SubqueryNode.class);\\n\\n                    sn.originalWhereClause.accept(cnv);\\n                    return cnv.getList().isEmpty();\\n                }\\n\u003cp\u003e  ....\u003c\\/p\u003e\\n\\n\u003cp\u003eand with that change (everything else the same), the query with \\\"1 = 1\\\" returns 7 rows, as it should. The\u003cbr\\/\u003e\\nother queries mentioned by Craig also return the correct results (assuming the first one is supposed to\u003cbr\\/\u003e\\nreturn 2 rows, which I assume it is...?)\u003c\\/p\u003e\\n\\n\u003cp\u003eSo it looks like the use of CollectNodesVisitor does help. As for the issue of why the SubqueryNode\'s\u003cbr\\/\u003e\\nfound in originalWhereClause return false for \\\"isWhereSubquery()\\\", I haven\'t looked at that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12564224_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564224_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 23:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T23:42:49+0000\'\u003e30\\/Jan\\/08 23:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; I still need to have another look at Armys latest variant, as it doesn\'t seem to end \\n&gt; up with a similar querytree to the others \\n\\n Actually, I think the query does fit the general shape. In your v5 patch you iterate through each of \\nthe SubqueryNode\'s that are found by CollectNodesVisitor and check to see if any of them was \\nmarked as a \\\"whereSubquery()\\\". For some reason that check fails in the query that I posted--i.e. \\nthe one where I include the \\\"1 = 1\\\" predicate. While I don\'t know why the call to whereSubquery() \\nreturns false, I also don\'t think that it\'s necessary at this particular point. \\n\\n The code that calls CollectNodesVisitor is this line: \\n\\n           sn.originalWhereClause.accept(cnv); \\n\\n Since we\'re visiting the original WHERE clause, any SubqueryNodes that we find are necessarily \\ngoing to be \\\"WHERE subqueries\\\" because we found them in a WHERE clause. So it seems like \\nwe shouldn\'t have to call \\\"isWhereSubquery()\\\" on any of them--we just need to check to see if the \\nCollectNodesVisitor found at least one, and if so, we\'re done. I changed your version 5 patch to \\nlook like this: \\n\\n   .... \\n                if (sn.originalWhereClause != null) \\n                {\\n                    \\/* Second instance of SubqueryNode.class effectively means \\\"don\'t bother\\n                     * searching beneath SubqueryNodes since if we found one, we\'re done.\\\"\\n                     *\\/\\n                    CollectNodesVisitor cnv =\\n                        new CollectNodesVisitor(\\n                            SubqueryNode.class, SubqueryNode.class);\\n\\n                    sn.originalWhereClause.accept(cnv);\\n                    return cnv.getList().isEmpty();\\n                }\\n   .... \\n\\n and with that change (everything else the same), the query with \\\"1 = 1\\\" returns 7 rows, as it should. The \\nother queries mentioned by Craig also return the correct results (assuming the first one is supposed to \\nreturn 2 rows, which I assume it is...?) \\n\\n So it looks like the use of CollectNodesVisitor does help. As for the issue of why the SubqueryNode\'s \\nfound in originalWhereClause return false for \\\"isWhereSubquery()\\\", I haven\'t looked at that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564225\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564225&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564225\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12564225_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564225_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 23:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T23:46:03+0000\'\u003e30\\/Jan\\/08 23:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOn a complete unrelated note, I think the preference for Derby codeline is to keep lines\u003cbr\\/\u003e\\nshorter than 80 characters (where possible).  Some of the lines in the latest patch look\u003cbr\\/\u003e\\nto exceed that.  Not a big deal, but thought I\'d mention it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12564225_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564225_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Jan\\/08 23:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-30T23:46:03+0000\'\u003e30\\/Jan\\/08 23:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    On a complete unrelated note, I think the preference for Derby codeline is to keep lines \\nshorter than 80 characters (where possible).  Some of the lines in the latest patch look \\nto exceed that.  Not a big deal, but thought I\'d mention it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564256\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564256&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564256\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12564256_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564256_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 01:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T01:19:06+0000\'\u003e31\\/Jan\\/08 01:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; and with that change (everything else the same), the query with \\\"1 = 1\\\" returns 7 rows, as it should. The other queries mentioned by Craig also return the correct results (assuming the first one is supposed to return 2 rows, which I assume it is...?) \u003c\\/p\u003e\\n\\n\u003cp\u003eYes, it is supposed to return 2 rows. It\'s not a particularly interesting query since it works with or without the patch, but I included it because it also uses the EXISTS pattern.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd let me say again I appreciate all the effort you all are putting into this.\u003c\\/p\u003e\\n\\n\u003cp\u003eCraig\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12564256_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564256_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 01:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T01:19:06+0000\'\u003e31\\/Jan\\/08 01:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; and with that change (everything else the same), the query with \\\"1 = 1\\\" returns 7 rows, as it should. The other queries mentioned by Craig also return the correct results (assuming the first one is supposed to return 2 rows, which I assume it is...?)  \\n\\n Yes, it is supposed to return 2 rows. It\'s not a particularly interesting query since it works with or without the patch, but I included it because it also uses the EXISTS pattern. \\n\\n And let me say again I appreciate all the effort you all are putting into this. \\n\\n Craig              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564312\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564312&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564312\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12564312_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564312_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 06:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T06:11:40+0000\'\u003e31\\/Jan\\/08 06:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve applied the patch derby-3301-5.diff and rebuilt the derby and derbytools jars.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe JDO TCK tests that fail on the released jars now pass with the patch applied.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks so much for getting this bug resolved to this point. This is no longer a blocker for me, assuming that the changes can be committed to the code line and a patch release made in due course.\u003c\\/p\u003e\\n\\n\u003cp\u003eCraig\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12564312_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564312_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 06:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T06:11:40+0000\'\u003e31\\/Jan\\/08 06:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve applied the patch derby-3301-5.diff and rebuilt the derby and derbytools jars. \\n\\n The JDO TCK tests that fail on the released jars now pass with the patch applied. \\n\\n Thanks so much for getting this bug resolved to this point. This is no longer a blocker for me, assuming that the changes can be committed to the code line and a patch release made in due course. \\n\\n Craig \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564337\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564337&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564337\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564337_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564337_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 08:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T08:32:22+0000\'\u003e31\\/Jan\\/08 08:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReattaching the derby-3301-extra.sql script with Armys 1=1 variant included as well.\u003c\\/p\u003e\\n\\n\u003cp\u003eAttaching derby-3301-6.diff with Armys latest comments\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003efixed length of some lines\u003c\\/li\u003e\\n\\t\u003cli\u003eCollectNodesVisitor stops when finding the first SubqueryNode.\u003c\\/li\u003e\\n\\t\u003cli\u003eno need to check for isWhereSubquery() when using the CNV on the original where clause, we already know it is\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eAll reported queries work as expected with the 6 patch.\u003c\\/p\u003e\\n\\n\u003cp\u003esuites.All and derbyall are running.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for all your help Army, and to Craig for the positive feedback!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564337_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564337_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 08:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T08:32:22+0000\'\u003e31\\/Jan\\/08 08:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reattaching the derby-3301-extra.sql script with Armys 1=1 variant included as well. \\n\\n Attaching derby-3301-6.diff with Armys latest comments \\n \\n\\t fixed length of some lines \\n\\t CollectNodesVisitor stops when finding the first SubqueryNode. \\n\\t no need to check for isWhereSubquery() when using the CNV on the original where clause, we already know it is \\n \\n\\n\\n All reported queries work as expected with the 6 patch. \\n\\n suites.All and derbyall are running. \\n\\n Thanks for all your help Army, and to Craig for the positive feedback!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564441\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564441&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564441\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12564441_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564441_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 18:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T18:14:03+0000\'\u003e31\\/Jan\\/08 18:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Thomas,\u003c\\/p\u003e\\n\\n\u003cp\u003eI really hate to keep bringing up more issues, but as I was about to sign off on patch 6, the\u003cbr\\/\u003e\\nfollowing caught my eye:\u003c\\/p\u003e\\n\\n\u003cp\u003e                   \\/*\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eThis WHERE EXISTS | ANY | IN subquery has another\u003c\\/li\u003e\\n\\t\u003cli\u003esubquery in its own WHERE \u003cb\u003eclause\u003c\\/b\u003e if the CNV is not\u003c\\/li\u003e\\n\\t\u003cli\u003eempty.\u003cbr\\/\u003e\\n                    *\\/\u003cbr\\/\u003e\\n                   return cnv.getList().isEmpty();\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eNote how the code comments don\'t match the code--there\'s a missing \\\"!\\\" operator in the\u003cbr\\/\u003e\\nactual code.  This is how I wrote it in my previous comment, but that was wrong.  The\u003cbr\\/\u003e\\nmethod is supposed to return \\\"true\\\" if the SubqueryNode has a WHERE clause with\u003cbr\\/\u003e\\nanother subquery in it--which will be true if cnv.getList() is NOT empty.  So I missed\u003cbr\\/\u003e\\nthe negation (sorry).\u003c\\/p\u003e\\n\\n\u003cp\u003eWith this fix in place all of Craigs queries still run correctly--but the queries with\u003cbr\\/\u003e\\n\\\"1 = 1\\\" in them start failing again.  In tracing it turns out that, for those cases,\u003cbr\\/\u003e\\nthe CollectNodesVisitor does not find the SubqueryNodes in \\\"sn.originalWhereClause\\\".\u003cbr\\/\u003e\\nI think it comes down to something you mentioned earlier, namely:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I still need to have another look at \u003cspan class=\\\"error\\\"\u003e&#91;the &quot;1 = 1&quot;&#93;\u003c\\/span\u003e variant, as it doesn\'t seem\u003cbr\\/\u003e\\n&gt; to end up with a similar querytree to the others\u003c\\/p\u003e\\n\\n\u003cp\u003eUpon further inspection, I think you are right about this.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor reference, this is the query in question.  Note the tags on the right for\u003cbr\\/\u003e\\nthe sake of discussion, where \\\"SN\\\" implies \\\"SelectNode\\\":\u003c\\/p\u003e\\n\\n\u003cp\u003eselect unbound_e.empid, unbound_p.projid                             &#8211; SN_OUTER\u003cbr\\/\u003e\\nfrom departments this,\u003cbr\\/\u003e\\n     employees unbound_e,\u003cbr\\/\u003e\\n     projects unbound_p\u003cbr\\/\u003e\\nwhere exists (\u003cbr\\/\u003e\\n    select 1 from employees this_employees_e                         &#8211; SN_INNER_1\u003cbr\\/\u003e\\n    where 1 = 1 and exists (\u003cbr\\/\u003e\\n        select 1 from project_employees this_employees_e_projects_p  &#8211; SN_INNER_2\u003cbr\\/\u003e\\n        where this_employees_e_projects_p.empid = this_employees_e.empid\u003cbr\\/\u003e\\n        and this_employees_e.department = this.id\u003cbr\\/\u003e\\n        and unbound_p.projid = this_employees_e_projects_p.projid\u003cbr\\/\u003e\\n        and unbound_e.empid = this_employees_e.empid)\u003cbr\\/\u003e\\n    );\u003c\\/p\u003e\\n\\n\u003cp\u003eBy the time we reach SubqueryNode.isWhereExistsAnyInWithWhereSubquery() for the\u003cbr\\/\u003e\\nSubqueryNode wrapping SN_INNER_1, the clause:\u003c\\/p\u003e\\n\\n\u003cp\u003e  where 1 = 1 and exists ( ... )\u003c\\/p\u003e\\n\\n\u003cp\u003eends up as an AndNode whose left operand is \\\"1 = 1\\\" but whose right operand is the\u003cbr\\/\u003e\\nconstant literal TRUE--which is not what we expect.  We expect the AndNode\'s right\u003cbr\\/\u003e\\noperand to be the SubqueryNode corresponding to SN_INNER_2.  That is, if \\\"sn\\\" is the\u003cbr\\/\u003e\\nSelectNode for SN_INNER_1 then sn.originalWhereClause should include the SubqueryNode\u003cbr\\/\u003e\\nthat wraps SN_INNER_2.  That is true when we first set sn.originalWhereClause in the\u003cbr\\/\u003e\\ninit() method of SelectNode--but by the time we get to preprocessing for the SubqueryNode\u003cbr\\/\u003e\\nwrapping SN_INNER_1, the SubqueryNode for SN_INNER_2 is no longer in SN_INNER_1\'s\u003cbr\\/\u003e\\noriginalWhereClause.\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom what I can tell, this is because sn.originalWhereClause for SN_INNER_1 points to\u003cbr\\/\u003e\\nthe same object as sn.whereClause.  So when sn.whereClause is itself transformed due to\u003cbr\\/\u003e\\nflattening of the subquery SN_INNER_2 (which is legal), sn.originalWhereClause() sees\u003cbr\\/\u003e\\nthe same transformation.  Thus the SubqueryNode wrapping SN_INNER_2 disappears from\u003cbr\\/\u003e\\nsn.whereClause, which is good--but it also disappears from sn.originalWhereClause(),\u003cbr\\/\u003e\\nwhich is bad.  The fact that it disappears means that CollectNodesVisitor for SN_INNER_1\u003cbr\\/\u003e\\nwill not find it, and thus SN_INNER_1 will be flattened, which is not legal.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith the negation operator gone (as in patch 6), the fact that we can\'t find the SubqueryNode\u003cbr\\/\u003e\\nfor SN_INNER_2 causes the method to incorrectly return \\\"true\\\" (because CNV\'s list is empty),\u003cbr\\/\u003e\\nwhich is then negated by the caller and thus flattening of SN_INNER_1 is accidentally (but\u003cbr\\/\u003e\\ncorrectly) avoided.  I think it\'s clear that the negation operator should be there, though.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m not sure what the best way to address that would be--but before you go there,\u003cbr\\/\u003e\\ncan you double-check these findings to see if you agree?  Maybe I\'m just missing\u003cbr\\/\u003e\\nsomething obvious...\u003c\\/p\u003e\\n\\n\u003cp\u003eApologies for the negation slip-up to begin with.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12564441_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564441_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 18:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T18:14:03+0000\'\u003e31\\/Jan\\/08 18:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Thomas, \\n\\n I really hate to keep bringing up more issues, but as I was about to sign off on patch 6, the \\nfollowing caught my eye: \\n\\n                    \\/* \\n \\n\\t This WHERE EXISTS | ANY | IN subquery has another \\n\\t subquery in its own WHERE  clause  if the CNV is not \\n\\t empty. \\n                    *\\/ \\n                   return cnv.getList().isEmpty(); \\n \\n\\n\\n Note how the code comments don\'t match the code--there\'s a missing \\\"!\\\" operator in the \\nactual code.  This is how I wrote it in my previous comment, but that was wrong.  The \\nmethod is supposed to return \\\"true\\\" if the SubqueryNode has a WHERE clause with \\nanother subquery in it--which will be true if cnv.getList() is NOT empty.  So I missed \\nthe negation (sorry). \\n\\n With this fix in place all of Craigs queries still run correctly--but the queries with \\n\\\"1 = 1\\\" in them start failing again.  In tracing it turns out that, for those cases, \\nthe CollectNodesVisitor does not find the SubqueryNodes in \\\"sn.originalWhereClause\\\". \\nI think it comes down to something you mentioned earlier, namely: \\n\\n &gt; I still need to have another look at  &#91;the &quot;1 = 1&quot;&#93;  variant, as it doesn\'t seem \\n&gt; to end up with a similar querytree to the others \\n\\n Upon further inspection, I think you are right about this. \\n\\n For reference, this is the query in question.  Note the tags on the right for \\nthe sake of discussion, where \\\"SN\\\" implies \\\"SelectNode\\\": \\n\\n select unbound_e.empid, unbound_p.projid                             &#8211; SN_OUTER \\nfrom departments this, \\n     employees unbound_e, \\n     projects unbound_p \\nwhere exists ( \\n    select 1 from employees this_employees_e                         &#8211; SN_INNER_1 \\n    where 1 = 1 and exists ( \\n        select 1 from project_employees this_employees_e_projects_p  &#8211; SN_INNER_2 \\n        where this_employees_e_projects_p.empid = this_employees_e.empid \\n        and this_employees_e.department = this.id \\n        and unbound_p.projid = this_employees_e_projects_p.projid \\n        and unbound_e.empid = this_employees_e.empid) \\n    ); \\n\\n By the time we reach SubqueryNode.isWhereExistsAnyInWithWhereSubquery() for the \\nSubqueryNode wrapping SN_INNER_1, the clause: \\n\\n   where 1 = 1 and exists ( ... ) \\n\\n ends up as an AndNode whose left operand is \\\"1 = 1\\\" but whose right operand is the \\nconstant literal TRUE--which is not what we expect.  We expect the AndNode\'s right \\noperand to be the SubqueryNode corresponding to SN_INNER_2.  That is, if \\\"sn\\\" is the \\nSelectNode for SN_INNER_1 then sn.originalWhereClause should include the SubqueryNode \\nthat wraps SN_INNER_2.  That is true when we first set sn.originalWhereClause in the \\ninit() method of SelectNode--but by the time we get to preprocessing for the SubqueryNode \\nwrapping SN_INNER_1, the SubqueryNode for SN_INNER_2 is no longer in SN_INNER_1\'s \\noriginalWhereClause. \\n\\n From what I can tell, this is because sn.originalWhereClause for SN_INNER_1 points to \\nthe same object as sn.whereClause.  So when sn.whereClause is itself transformed due to \\nflattening of the subquery SN_INNER_2 (which is legal), sn.originalWhereClause() sees \\nthe same transformation.  Thus the SubqueryNode wrapping SN_INNER_2 disappears from \\nsn.whereClause, which is good--but it also disappears from sn.originalWhereClause(), \\nwhich is bad.  The fact that it disappears means that CollectNodesVisitor for SN_INNER_1 \\nwill not find it, and thus SN_INNER_1 will be flattened, which is not legal. \\n\\n With the negation operator gone (as in patch 6), the fact that we can\'t find the SubqueryNode \\nfor SN_INNER_2 causes the method to incorrectly return \\\"true\\\" (because CNV\'s list is empty), \\nwhich is then negated by the caller and thus flattening of SN_INNER_1 is accidentally (but \\ncorrectly) avoided.  I think it\'s clear that the negation operator should be there, though. \\n\\n I\'m not sure what the best way to address that would be--but before you go there, \\ncan you double-check these findings to see if you agree?  Maybe I\'m just missing \\nsomething obvious... \\n\\n Apologies for the negation slip-up to begin with.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564465\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564465&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564465\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564465_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564465_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T19:21:46+0000\'\u003e31\\/Jan\\/08 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnother excellent catch Army! I\'m very glad you\'re helping out, so do not feel bad about bringing these things up!\u003c\\/p\u003e\\n\\n\u003cp\u003eI didn\'t report back on the testing of the 6 patch - due to fact that my updated derbyall test failed. It fails for that exact reason - missing negation on \u003cbr\\/\u003e\\n   return cnv.getList().isEmpty();\u003c\\/p\u003e\\n\\n\u003cp\u003eFixed the missing negation in derby-3301-7.diff.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith the 7 patch\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eall of Craigs queries work as expected\u003c\\/li\u003e\\n\\t\u003cli\u003eupdated lang\\/subqueryFlattening.sql (part of derbyall) pass\u003c\\/li\u003e\\n\\t\u003cli\u003enew NestedWhereSubqueryTest (part of suites.All)\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI\'ll rerun derbyall and suites.All with the 7 patch to verify nothing else broke.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith the 7 patch the 1=1 variant returns only 3 rows, and I\'ll need to have a further look into this. From what I found at last glance, I think you are onto it with your explaination. If I remember correctly I had the \u003cbr\\/\u003e\\nAndNode in the whereClause with the 1=1 as its left node and a TRUE as its right node (as you describe). The where subqueries had ended up in the wherePredicates list. But this needs a more thorough look.\u003c\\/p\u003e\\n\\n\u003cp\u003eGiven Craigs urgency with getting this fixed, do you think we can commit the 7 patch, and leave the 1=1 for a later commit?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564465_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564465_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T19:21:46+0000\'\u003e31\\/Jan\\/08 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Another excellent catch Army! I\'m very glad you\'re helping out, so do not feel bad about bringing these things up! \\n\\n I didn\'t report back on the testing of the 6 patch - due to fact that my updated derbyall test failed. It fails for that exact reason - missing negation on  \\n   return cnv.getList().isEmpty(); \\n\\n Fixed the missing negation in derby-3301-7.diff. \\n\\n With the 7 patch \\n \\n\\t all of Craigs queries work as expected \\n\\t updated lang\\/subqueryFlattening.sql (part of derbyall) pass \\n\\t new NestedWhereSubqueryTest (part of suites.All) \\n \\n\\n\\n I\'ll rerun derbyall and suites.All with the 7 patch to verify nothing else broke. \\n\\n With the 7 patch the 1=1 variant returns only 3 rows, and I\'ll need to have a further look into this. From what I found at last glance, I think you are onto it with your explaination. If I remember correctly I had the  \\nAndNode in the whereClause with the 1=1 as its left node and a TRUE as its right node (as you describe). The where subqueries had ended up in the wherePredicates list. But this needs a more thorough look. \\n\\n Given Craigs urgency with getting this fixed, do you think we can commit the 7 patch, and leave the 1=1 for a later commit?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564474\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564474&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564474\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12564474_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564474_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T19:45:01+0000\'\u003e31\\/Jan\\/08 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; With the 7 patch the 1=1 variant returns only 3 rows, and I\'ll need to have a further\u003cbr\\/\u003e\\n&gt; look into this. \u003c\\/p\u003e\\n\\n\u003cp\u003eOne thing that occurred me: would it be possible to replace the originalWhereSubquerys field\u003cbr\\/\u003e\\nin SelectNode with a simple boolean, something like origWhereClauseHadSubqueries.  Then\u003cbr\\/\u003e\\nin the init() method of SelectNode you could invoke the CollectNodeVisitor on whereClause\u003cbr\\/\u003e\\nand set the boolean to true if you find any SubqueryNodes.  That way the boolean would not\u003cbr\\/\u003e\\nbe affected by subsequent binding\\/preprocessing transformations.  If you do that, then the code\u003cbr\\/\u003e\\nin SubqueryNode.isWhereExistsAnyInWithWhereSubquery() could theoretically replace the\u003cbr\\/\u003e\\nsn.origWhereClause and sn.origWhereSubquerys processing with a simple check of\u003cbr\\/\u003e\\nsn.origWhereClauseHadSubqueries.  I haven\'t actually tried it, but I wonder if that might be\u003cbr\\/\u003e\\na simple way to get things working...\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; With the 7 patch\u003cbr\\/\u003e\\n&gt; - updated lang\\/subqueryFlattening.sql (part of derbyall) pass\u003cbr\\/\u003e\\n&gt; - new NestedWhereSubqueryTest (part of suites.All) \u003c\\/p\u003e\\n\\n\u003cp\u003eAre these intended to be part of the 7 patch, or are these going to be attached separately?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Given Craigs urgency with getting this fixed, do you think we can commit the 7 patch, and\u003cbr\\/\u003e\\n&gt; leave the 1=1 for a later commit?\u003c\\/p\u003e\\n\\n\u003cp\u003eIf the 7 patch passes the regression tests, and if you understand all of the updates that were necessary\u003cbr\\/\u003e\\nfor subqueryFlattening.sql, then yes, I think this would be fine.  Incremental development is a good thing \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12564474_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564474_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 19:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T19:45:01+0000\'\u003e31\\/Jan\\/08 19:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; With the 7 patch the 1=1 variant returns only 3 rows, and I\'ll need to have a further \\n&gt; look into this.  \\n\\n One thing that occurred me: would it be possible to replace the originalWhereSubquerys field \\nin SelectNode with a simple boolean, something like origWhereClauseHadSubqueries.  Then \\nin the init() method of SelectNode you could invoke the CollectNodeVisitor on whereClause \\nand set the boolean to true if you find any SubqueryNodes.  That way the boolean would not \\nbe affected by subsequent binding\\/preprocessing transformations.  If you do that, then the code \\nin SubqueryNode.isWhereExistsAnyInWithWhereSubquery() could theoretically replace the \\nsn.origWhereClause and sn.origWhereSubquerys processing with a simple check of \\nsn.origWhereClauseHadSubqueries.  I haven\'t actually tried it, but I wonder if that might be \\na simple way to get things working... \\n\\n &gt; With the 7 patch \\n&gt; - updated lang\\/subqueryFlattening.sql (part of derbyall) pass \\n&gt; - new NestedWhereSubqueryTest (part of suites.All)  \\n\\n Are these intended to be part of the 7 patch, or are these going to be attached separately? \\n\\n &gt; Given Craigs urgency with getting this fixed, do you think we can commit the 7 patch, and \\n&gt; leave the 1=1 for a later commit? \\n\\n If the 7 patch passes the regression tests, and if you understand all of the updates that were necessary \\nfor subqueryFlattening.sql, then yes, I think this would be fine.  Incremental development is a good thing                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564481\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564481&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564481\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564481_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564481_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 20:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T20:11:27+0000\'\u003e31\\/Jan\\/08 20:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThat sounds like a doable approach Army - I\'ll give it a go and let you know how it works out.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt;&gt; - updated lang\\/subqueryFlattening.sql (part of derbyall) pass\u003cbr\\/\u003e\\n&gt;&gt; - new NestedWhereSubqueryTest (part of suites.All)\u003cbr\\/\u003e\\n&gt;\u003cbr\\/\u003e\\n&gt; Are these intended to be part of the 7 patch, or are these going to be attached separately?\u003c\\/p\u003e\\n\\n\u003cp\u003eThey are already attached derby-3301-master.diff and derby-3301-test-4.diff respectively \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e I agree the names of the test patches could be a lot better...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564481_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564481_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 20:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T20:11:27+0000\'\u003e31\\/Jan\\/08 20:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    That sounds like a doable approach Army - I\'ll give it a go and let you know how it works out. \\n\\n &gt;&gt; - updated lang\\/subqueryFlattening.sql (part of derbyall) pass \\n&gt;&gt; - new NestedWhereSubqueryTest (part of suites.All) \\n&gt; \\n&gt; Are these intended to be part of the 7 patch, or are these going to be attached separately? \\n\\n They are already attached derby-3301-master.diff and derby-3301-test-4.diff respectively   I agree the names of the test patches could be a lot better...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564509\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564509&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564509\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564509_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564509_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 21:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T21:32:02+0000\'\u003e31\\/Jan\\/08 21:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eArmys suggestion of flagging the SelectNode as having subqueries in its where clause in init() using a ColletNodesVisitor seems to work like a charm \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\nAttaching \'derby-3301-8.diff\' which implements this change to the 7 diff.\u003c\\/p\u003e\\n\\n\u003cp\u003eHad to revisit my subqueryFlattening.sql master diff with this change though, so I\'m attaching an updated master in \'derby-3301-test-master-2.diff. The changes to the master are correct to my knowledge - replace some of the PRNs and Hash Exists Joins with subqueries and Index Scan nodes. Just what we want \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThe 8 patch works for\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eall reported queries, including the 1=1 variant.\u003c\\/li\u003e\\n\\t\u003cli\u003enew NestedWhereSubqueryTest with test-4 patch applied\u003c\\/li\u003e\\n\\t\u003cli\u003elang\\/subqueryFlattening.sql with test-master-2 patch applied\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI\'ll rerun derbyall and suites.All on the 8 patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564509_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564509_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/08 21:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-31T21:32:02+0000\'\u003e31\\/Jan\\/08 21:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Armys suggestion of flagging the SelectNode as having subqueries in its where clause in init() using a ColletNodesVisitor seems to work like a charm   \\nAttaching \'derby-3301-8.diff\' which implements this change to the 7 diff. \\n\\n Had to revisit my subqueryFlattening.sql master diff with this change though, so I\'m attaching an updated master in \'derby-3301-test-master-2.diff. The changes to the master are correct to my knowledge - replace some of the PRNs and Hash Exists Joins with subqueries and Index Scan nodes. Just what we want   \\n\\n The 8 patch works for \\n \\n\\t all reported queries, including the 1=1 variant. \\n\\t new NestedWhereSubqueryTest with test-4 patch applied \\n\\t lang\\/subqueryFlattening.sql with test-master-2 patch applied \\n \\n\\n\\n I\'ll rerun derbyall and suites.All on the 8 patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564722\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564722&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564722\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564722_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564722_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/08 11:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-01T11:02:01+0000\'\u003e01\\/Feb\\/08 11:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated derbyall pass and lang._Suite runs successfully with the 8 code patch, and the master-2 and test-4 test patches applied.\u003c\\/p\u003e\\n\\n\u003cp\u003eI still get some unrelated errors in SecureServerTest in suites.All on Windows, but not on Solaris - I believe it\'s an environment issue and has nothing to do with the code patch.\u003c\\/p\u003e\\n\\n\u003cp\u003ePatches should hopefully be ready for final review, and commit \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564722_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564722_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/08 11:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-01T11:02:01+0000\'\u003e01\\/Feb\\/08 11:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated derbyall pass and lang._Suite runs successfully with the 8 code patch, and the master-2 and test-4 test patches applied. \\n\\n I still get some unrelated errors in SecureServerTest in suites.All on Windows, but not on Solaris - I believe it\'s an environment issue and has nothing to do with the code patch. \\n\\n Patches should hopefully be ready for final review, and commit                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564885\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564885&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564885\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12564885_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564885_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/08 19:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-01T19:10:45+0000\'\u003e01\\/Feb\\/08 19:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Thomas, thank you for your continued hard work on this. \u003cbr\\/\u003e\\nJust to clarify: In your last comment you mention a test-4 patch, but there is no test-4 patch, only a test-3 patch (dated 28. Jan). I can apply the test-3 patch, but it results\u003cbr\\/\u003e\\nin compilation errors:\u003c\\/p\u003e\\n\\n\u003cp\u003ecompilet1:\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;javac&#93;\u003c\\/span\u003e Compiling 95 source files to \\/export\\/home\\/tmp\\/derby\\/derby-scratch\\/classes\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;javac&#93;\u003c\\/span\u003e \\/export\\/home\\/tmp\\/derby\\/derby-scratch\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/NestedWhereSubqueryTest.java:229: class or interface expected\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;javac&#93;\u003c\\/span\u003e package org.apache.derbyTesting.functionTests.tests.lang;\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;javac&#93;\u003c\\/span\u003e ^\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;javac&#93;\u003c\\/span\u003e \\/export\\/home\\/tmp\\/derby\\/derby-scratch\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/NestedWhereSubqueryTest.java:231: class or interface expected\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;javac&#93;\u003c\\/span\u003e import java.sql.ResultSet;\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;javac&#93;\u003c\\/span\u003e ^\u003c\\/p\u003e\\n\\n\u003cp\u003e...\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12564885_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564885_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/08 19:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-01T19:10:45+0000\'\u003e01\\/Feb\\/08 19:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Thomas, thank you for your continued hard work on this.  \\nJust to clarify: In your last comment you mention a test-4 patch, but there is no test-4 patch, only a test-3 patch (dated 28. Jan). I can apply the test-3 patch, but it results \\nin compilation errors: \\n\\n compilet1: \\n     &#91;javac&#93;  Compiling 95 source files to \\/export\\/home\\/tmp\\/derby\\/derby-scratch\\/classes \\n     &#91;javac&#93;  \\/export\\/home\\/tmp\\/derby\\/derby-scratch\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/NestedWhereSubqueryTest.java:229: class or interface expected \\n     &#91;javac&#93;  package org.apache.derbyTesting.functionTests.tests.lang; \\n     &#91;javac&#93;  ^ \\n     &#91;javac&#93;  \\/export\\/home\\/tmp\\/derby\\/derby-scratch\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/NestedWhereSubqueryTest.java:231: class or interface expected \\n     &#91;javac&#93;  import java.sql.ResultSet; \\n     &#91;javac&#93;  ^ \\n\\n ... \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12564955\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12564955&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12564955\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564955_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564955_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/08 22:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-01T22:08:24+0000\'\u003e01\\/Feb\\/08 22:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOh dear... test-4 is a typo, it should say test-3 in my latest comments.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe new test in test-3 is only 209 lines long, and your build error happens at 229.\u003cbr\\/\u003e\\nI think your environment managed to duplicate the contents of the new file? NB 6.0 seems to do that if you apply a diff with a newly created file twice btw.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12564955_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12564955_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Feb\\/08 22:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-01T22:08:24+0000\'\u003e01\\/Feb\\/08 22:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Oh dear... test-4 is a typo, it should say test-3 in my latest comments. \\n\\n The new test in test-3 is only 209 lines long, and your build error happens at 229. \\nI think your environment managed to duplicate the contents of the new file? NB 6.0 seems to do that if you apply a diff with a newly created file twice btw.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12565419\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12565419&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12565419\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12565419_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12565419_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Feb\\/08 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-04T16:50:35+0000\'\u003e04\\/Feb\\/08 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI applied patch 8 and verified that the reported queries return correct results.\u003c\\/p\u003e\\n\\n\u003cp\u003eI haven\'t applied the test\\/master patches, nor have I run the regression tests, but based on\u003cbr\\/\u003e\\ninspection, I think it might be nice to update the comments preceding the affected query plans\u003cbr\\/\u003e\\nin derby-3301-test-master-2.diff so that they agree with the new results--i.e. indicate which parts\u003cbr\\/\u003e\\nof the query should\\/should not be flattened, and explain why.  But that can come as cleanup,\u003cbr\\/\u003e\\nit doesn\'t need to block commit of the current patches.\u003c\\/p\u003e\\n\\n\u003cp\u003eNo other comments to make; thanks again, Thomas!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12565419_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12565419_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Feb\\/08 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-04T16:50:35+0000\'\u003e04\\/Feb\\/08 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I applied patch 8 and verified that the reported queries return correct results. \\n\\n I haven\'t applied the test\\/master patches, nor have I run the regression tests, but based on \\ninspection, I think it might be nice to update the comments preceding the affected query plans \\nin derby-3301-test-master-2.diff so that they agree with the new results--i.e. indicate which parts \\nof the query should\\/should not be flattened, and explain why.  But that can come as cleanup, \\nit doesn\'t need to block commit of the current patches. \\n\\n No other comments to make; thanks again, Thomas!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12565671\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12565671&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12565671\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12565671_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12565671_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/08 09:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-05T09:32:30+0000\'\u003e05\\/Feb\\/08 09:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted revision 618586.\u003c\\/p\u003e\\n\\n\u003cp\u003eYes Thomas, the test-3 patch compiled cleanly when i manually deleted the old version of that file. (svn revert will not delete added files). All tests passed too.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12565671_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12565671_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/08 09:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-05T09:32:30+0000\'\u003e05\\/Feb\\/08 09:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed revision 618586. \\n\\n Yes Thomas, the test-3 patch compiled cleanly when i manually deleted the old version of that file. (svn revert will not delete added files). All tests passed too.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12565805\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12565805&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12565805\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12565805_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12565805_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/08 16:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-05T16:49:05+0000\'\u003e05\\/Feb\\/08 16:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHooray. Thanks everyone for your efforts on this.\u003c\\/p\u003e\\n\\n\u003cp\u003eCraig\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12565805_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12565805_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Feb\\/08 16:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-05T16:49:05+0000\'\u003e05\\/Feb\\/08 16:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hooray. Thanks everyone for your efforts on this. \\n\\n Craig              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12566742\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12566742&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12566742\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12566742_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566742_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 18:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T18:54:35+0000\'\u003e07\\/Feb\\/08 18:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eArmy&gt; I think it might be nice to update the comments preceding the affected query plans\u003cbr\\/\u003e\\nArmy&gt; in derby-3301-test-master-2.diff so that they agree with the new results\u003c\\/p\u003e\\n\\n\u003cp\u003eAttaching derby-3301-test-master-3.diff with updates to the two comments preceeding the changed queryplans.\u003cbr\\/\u003e\\nThe updated test pass.\u003c\\/p\u003e\\n\\n\u003cp\u003eCraig, can you confirm the current trunk works for you, and if so can we close the issue once the last comment patch has been comitted?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12566742_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566742_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 18:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T18:54:35+0000\'\u003e07\\/Feb\\/08 18:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Army&gt; I think it might be nice to update the comments preceding the affected query plans \\nArmy&gt; in derby-3301-test-master-2.diff so that they agree with the new results \\n\\n Attaching derby-3301-test-master-3.diff with updates to the two comments preceeding the changed queryplans. \\nThe updated test pass. \\n\\n Craig, can you confirm the current trunk works for you, and if so can we close the issue once the last comment patch has been comitted?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12566747\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12566747&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12566747\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12566747_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566747_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 19:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T19:13:39+0000\'\u003e07\\/Feb\\/08 19:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Attaching derby-3301-test-master-3.diff with updates to the two comments preceeding\u003cbr\\/\u003e\\n&gt; the changed queryplans.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks, Thomas.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12566747_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566747_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 19:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T19:13:39+0000\'\u003e07\\/Feb\\/08 19:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Attaching derby-3301-test-master-3.diff with updates to the two comments preceeding \\n&gt; the changed queryplans. \\n\\n Thanks, Thomas.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12566752\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12566752&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12566752\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12566752_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566752_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 19:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T19:35:52+0000\'\u003e07\\/Feb\\/08 19:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted derby-3301-test-master-3.diff with svn # 619591.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12566752_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566752_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 19:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T19:35:52+0000\'\u003e07\\/Feb\\/08 19:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed derby-3301-test-master-3.diff with svn # 619591.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12566805\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12566805&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12566805\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12566805_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566805_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 21:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T21:27:43+0000\'\u003e07\\/Feb\\/08 21:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for committing, Army.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12566805_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12566805_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/08 21:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-07T21:27:43+0000\'\u003e07\\/Feb\\/08 21:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for committing, Army.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12569203\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12569203&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12569203\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12569203_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569203_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Feb\\/08 08:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-15T08:23:01+0000\'\u003e15\\/Feb\\/08 08:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMarking as resolved for 10.4.0.0.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis fix should probably be merged to 10.3 too?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12569203_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569203_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Feb\\/08 08:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-15T08:23:01+0000\'\u003e15\\/Feb\\/08 08:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Marking as resolved for 10.4.0.0. \\n\\n This fix should probably be merged to 10.3 too?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12569506\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12569506&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12569506\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12569506_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569506_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Feb\\/08 03:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-16T03:57:05+0000\'\u003e16\\/Feb\\/08 03:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m convinced that this issue is resolved. I think it should stay open until a release containing the fix is made. Is that correct?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12569506_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569506_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Feb\\/08 03:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-16T03:57:05+0000\'\u003e16\\/Feb\\/08 03:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m convinced that this issue is resolved. I think it should stay open until a release containing the fix is made. Is that correct?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12569508\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12569508&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12569508\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12569508_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569508_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Feb\\/08 04:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-16T04:07:40+0000\'\u003e16\\/Feb\\/08 04:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think you can find more information about what to do here\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/wiki.apache.org\\/db-derby\\/DerbyCommitProcess\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/wiki.apache.org\\/db-derby\\/DerbyCommitProcess\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"narayanan\\\" id=\\\"commentauthor_12569508_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=narayanan\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"narayanan\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e V.Narayanan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569508_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Feb\\/08 04:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-16T04:07:40+0000\'\u003e16\\/Feb\\/08 04:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think you can find more information about what to do here \\n\\n  http:\\/\\/wiki.apache.org\\/db-derby\\/DerbyCommitProcess               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12569559\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12569559&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12569559\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12569559_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569559_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Feb\\/08 13:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-16T13:33:33+0000\'\u003e16\\/Feb\\/08 13:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for confirming Craig. I\'m planning to merge it to 10.3. I just need to run the tests before I can commit the merge. After that I think it is OK to close it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12569559_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569559_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Feb\\/08 13:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-16T13:33:33+0000\'\u003e16\\/Feb\\/08 13:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for confirming Craig. I\'m planning to merge it to 10.3. I just need to run the tests before I can commit the merge. After that I think it is OK to close it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12569820\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12569820&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12569820\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12569820_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569820_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 09:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T09:26:54+0000\'\u003e18\\/Feb\\/08 09:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMerged main fix to 10.3 in revision 628661.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12569820_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569820_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 09:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T09:26:54+0000\'\u003e18\\/Feb\\/08 09:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Merged main fix to 10.3 in revision 628661.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12569825\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12569825&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12569825\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12569825_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569825_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 09:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T09:43:46+0000\'\u003e18\\/Feb\\/08 09:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMerged the subqueryFlattening fix to 10.3 with revision 628669.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12569825_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569825_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 09:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T09:43:46+0000\'\u003e18\\/Feb\\/08 09:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Merged the subqueryFlattening fix to 10.3 with revision 628669.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12569829\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12569829&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12569829\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12569829_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569829_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 09:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T09:51:34+0000\'\u003e18\\/Feb\\/08 09:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Dyre\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12569829_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569829_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 09:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T09:51:34+0000\'\u003e18\\/Feb\\/08 09:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Dyre              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580135\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12580135&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580135\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12580135_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580135_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Mar\\/08 22:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-18T22:13:20+0000\'\u003e18\\/Mar\\/08 22:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis issue has fix version 10.4 and is marked with either \'Release note needed\' or \'Existing application impact\', but does not have a releaseNote.html attached to it. Should it?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12580135_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580135_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Mar\\/08 22:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-18T22:13:20+0000\'\u003e18\\/Mar\\/08 22:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This issue has fix version 10.4 and is marked with either \'Release note needed\' or \'Existing application impact\', but does not have a releaseNote.html attached to it. Should it?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580146\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12580146&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580146\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mcaisse\\\" id=\\\"commentauthor_12580146_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mcaisse\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mcaisse\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michelle Caisse\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580146_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Mar\\/08 22:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-18T22:33:24+0000\'\u003e18\\/Mar\\/08 22:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m not sure. I forwarded the question to Craig. I was not following the \u003cbr\\/\u003e\\nimplication of this issue beyond the fact that if caused a JDO TCK test \u003cbr\\/\u003e\\nto fail.\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; Michelle\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mcaisse\\\" id=\\\"commentauthor_12580146_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mcaisse\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mcaisse\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michelle Caisse\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580146_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Mar\\/08 22:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-18T22:33:24+0000\'\u003e18\\/Mar\\/08 22:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m not sure. I forwarded the question to Craig. I was not following the  \\nimplication of this issue beyond the fact that if caused a JDO TCK test  \\nto fail. \\n\\n &#8211; Michelle \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580155\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12580155&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580155\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12580155_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580155_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Mar\\/08 22:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-18T22:46:20+0000\'\u003e18\\/Mar\\/08 22:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSeems like a release note might be appropriate. I could try to put together a description from the body of this JIRA if someone can give me a clue as to the format of a releaseNote.html attachment.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12580155_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580155_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Mar\\/08 22:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-18T22:46:20+0000\'\u003e18\\/Mar\\/08 22:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Seems like a release note might be appropriate. I could try to put together a description from the body of this JIRA if someone can give me a clue as to the format of a releaseNote.html attachment.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580514\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12580514&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580514\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12580514_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580514_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 19:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T19:40:45+0000\'\u003e19\\/Mar\\/08 19:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe following Wiki page \u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/wiki.apache.org\\/db-derby\\/ReleaseNoteProcess\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/wiki.apache.org\\/db-derby\\/ReleaseNoteProcess\u003c\\/a\u003e\u003cbr\\/\u003e\\nhas some info about how to format releaseNote.html\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12580514_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580514_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 19:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T19:40:45+0000\'\u003e19\\/Mar\\/08 19:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The following Wiki page  \\n http:\\/\\/wiki.apache.org\\/db-derby\\/ReleaseNoteProcess  \\nhas some info about how to format releaseNote.html              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580572\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12580572&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580572\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12580572_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580572_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 21:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T21:36:01+0000\'\u003e19\\/Mar\\/08 21:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve tried to summarize the issue with the attached release note.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12580572_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580572_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 21:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T21:36:01+0000\'\u003e19\\/Mar\\/08 21:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve tried to summarize the issue with the attached release note.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580576\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12580576&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580576\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12580576_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580576_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 21:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T21:44:27+0000\'\u003e19\\/Mar\\/08 21:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think the release note has its sections or tenses mixed up:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Applications that execute SQL statements containing nested EXISTS clauses can see fewer rows than satisfy the query.\u003c\\/p\u003e\\n\\n\u003cp\u003eHopefully Derby returns the correct results, not fewer rows than the query is meant to return.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12580576_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580576_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 21:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T21:44:27+0000\'\u003e19\\/Mar\\/08 21:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think the release note has its sections or tenses mixed up: \\n\\n &gt; Applications that execute SQL statements containing nested EXISTS clauses can see fewer rows than satisfy the query. \\n\\n Hopefully Derby returns the correct results, not fewer rows than the query is meant to return.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580578\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12580578&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580578\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12580578_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580578_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 21:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T21:53:23+0000\'\u003e19\\/Mar\\/08 21:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think also the file needs to be called releaseNote.html for it to work with the\u003cbr\\/\u003e\\nrelease note generator.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12580578_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580578_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 21:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T21:53:23+0000\'\u003e19\\/Mar\\/08 21:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think also the file needs to be called releaseNote.html for it to work with the \\nrelease note generator.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580580\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12580580&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580580\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12580580_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580580_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T21:58:44+0000\'\u003e19\\/Mar\\/08 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve changed the description to address the tense issue, and changed the name of the file.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12580580_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580580_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 21:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T21:58:44+0000\'\u003e19\\/Mar\\/08 21:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve changed the description to address the tense issue, and changed the name of the file.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12580586\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12580586&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12580586\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12580586_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580586_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 22:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T22:14:26+0000\'\u003e19\\/Mar\\/08 22:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooks better, I think the \\\"Summary of the Change\\\" section is incorrect:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Derby can return fewer rows than expected.\u003c\\/p\u003e\\n\\n\u003cp\u003eThat describes the old bug not a change, well it doesn\'t really describe anything since it\'s so vague. \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eIs the summary more along the lines of:\u003c\\/p\u003e\\n\\n\u003cp\u003eQueries with nested EXIST clauses now return correct results.\u003c\\/p\u003e\\n\\n\u003cp\u003e???\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe someone more familiar with the issue could come up with the correct wording?\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m not really sure that such changes require release notes, looking at this:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Applications that depended on the previous incorrect behavior will need to be updated.\u003c\\/p\u003e\\n\\n\u003cp\u003ewhat does that really mean? How would such an application be updated?\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe a release note is good, but not suggesting application changes. More along the\u003cbr\\/\u003e\\nlines of:\u003c\\/p\u003e\\n\\n\u003cp\u003e &gt; Applications using nested EXISTS may have previously returned incorrect results.\u003c\\/p\u003e\\n\\n\u003cp\u003ewhich is what the Symptoms section is for (and says) so maybe these two sections are\u003cbr\\/\u003e\\nnot required for wrong result fixes:\u003c\\/p\u003e\\n\\n\u003cp\u003eIncompatibilities with Previous Release\u003cbr\\/\u003e\\nApplication Changes Required\u003c\\/p\u003e\\n\\n\u003cp\u003eTo reduce to a simple case, if the expression x + 2 actually returned x + 3 for any x, then would it make sense\u003cbr\\/\u003e\\nto have a release note that effectively said \\\"applications that depended on the incorrect addition of 2 need to be updated\\\"?? \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12580586_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12580586_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Mar\\/08 22:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-19T22:14:26+0000\'\u003e19\\/Mar\\/08 22:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Looks better, I think the \\\"Summary of the Change\\\" section is incorrect: \\n\\n &gt; Derby can return fewer rows than expected. \\n\\n That describes the old bug not a change, well it doesn\'t really describe anything since it\'s so vague.   \\n\\n Is the summary more along the lines of: \\n\\n Queries with nested EXIST clauses now return correct results. \\n\\n ??? \\n\\n Maybe someone more familiar with the issue could come up with the correct wording? \\n\\n I\'m not really sure that such changes require release notes, looking at this: \\n\\n &gt; Applications that depended on the previous incorrect behavior will need to be updated. \\n\\n what does that really mean? How would such an application be updated? \\n\\n Maybe a release note is good, but not suggesting application changes. More along the \\nlines of: \\n\\n  &gt; Applications using nested EXISTS may have previously returned incorrect results. \\n\\n which is what the Symptoms section is for (and says) so maybe these two sections are \\nnot required for wrong result fixes: \\n\\n Incompatibilities with Previous Release \\nApplication Changes Required \\n\\n To reduce to a simple case, if the expression x + 2 actually returned x + 3 for any x, then would it make sense \\nto have a release note that effectively said \\\"applications that depended on the incorrect addition of 2 need to be updated\\\"??               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12581854\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12581854&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12581854\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12581854_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12581854_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Mar\\/08 09:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-25T09:45:37+0000\'\u003e25\\/Mar\\/08 09:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for having a go at the RN Craig \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eTaking the liberty to attach an updated version of the releaseNotes.html based on my knowledge of the issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thomanie\\\" id=\\\"commentauthor_12581854_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thomanie\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thomanie\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Thomas Nielsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12581854_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Mar\\/08 09:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-25T09:45:37+0000\'\u003e25\\/Mar\\/08 09:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for having a go at the RN Craig   \\n\\n Taking the liberty to attach an updated version of the releaseNotes.html based on my knowledge of the issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12581994\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12581994&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12581994\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12581994_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12581994_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Mar\\/08 16:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-25T16:03:21+0000\'\u003e25\\/Mar\\/08 16:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the update, Thomas. I could feel death by a thousand cuts coming...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"clr\\\" id=\\\"commentauthor_12581994_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=clr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"clr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Craig L Russell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12581994_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Mar\\/08 16:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-25T16:03:21+0000\'\u003e25\\/Mar\\/08 16:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the update, Thomas. I could feel death by a thousand cuts coming...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12584454\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12584454&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12584454\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12584454_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584454_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 08:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T08:28:26+0000\'\u003e02\\/Apr\\/08 08:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChecking \'release note needed\' so the release note filter can pick it up.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12584454_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584454_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 08:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T08:28:26+0000\'\u003e02\\/Apr\\/08 08:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Checking \'release note needed\' so the release note filter can pick it up.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12592422\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3301?focusedCommentId=12592422&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12592422\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592422_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592422_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/08 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-25T16:13:12+0000\'\u003e25\\/Apr\\/08 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eupdating fix version to include 10.3.2.2 as this fix was ported to the 10.3 branch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12592422_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12592422_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Apr\\/08 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-25T16:13:12+0000\'\u003e25\\/Apr\\/08 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    updating fix version to include 10.3.2.2 as this fix was ported to the 10.3 branch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239267048"> 
    <input type="hidden" title="jira.request.server.time" value="464"> 
    <input type="hidden" title="jira.request.id" value="521x94384494x9"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="12"> 
    <input type="hidden" title="db.reads.time.in.ms" value="70"> 
    <input type="hidden" title="db.conns.time.in.ms" value="79"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 521x94384494x9
	          REQUEST TIMESTAMP : [05/Mar/2018:08:41:07 +0000]
	               REQUEST TIME : 0.4640
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 12

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=35, elapsedTotal=70961594, elapsedMin=486404, elapsedMax=19805004, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=39, elapsedTotal=79029267, elapsedMin=465900, elapsedMax=20384500, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>