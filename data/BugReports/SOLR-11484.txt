<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|4b8e14e1917f844c356928273a0a17696e5ed43e|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"646c11d7f23f90\"";
WRM._unparsedData["project-id"]="12310230";
WRM._unparsedData["project-key"]="\"SOLR\"";
WRM._unparsedData["project-name"]="\"Solr\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310230";
WRM._unparsedData["projectKey"]="\"SOLR\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="SOLR-11484"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[SOLR-11484] CloudSolrClient's cache of collection clusterstate can cause RouteExceptions when attempting directUpdates after collection modifications - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[SOLR-11484] CloudSolrClient's cache of collection clusterstate can cause RouteExceptions when attempting directUpdates after collection modifications - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/SOLR" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-11484">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310230" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Solr'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310230&amp;avatarId=22151"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/SOLR">Solr</a></li>
                 <li><a class="issue-link" data-issue-key="SOLR-11484" href="/jira/browse/SOLR-11484" id="key-val" rel="13109096">SOLR-11484</a></li>
                </ol>
                <h1 id="summary-val">CloudSolrClient's cache of collection clusterstate can cause RouteExceptions when attempting directUpdates after collection modifications</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-11484"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/SOLR-11484/SOLR-11484.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/SOLR-11484/SOLR-11484.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/SOLR-11484/SOLR-11484.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/SOLR-11484/SOLR-11484.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+7.2" title="7.2 Minor release after 7.1">7.2</a>, <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+%22master+%288.0%29%22" title="master (8.0) Current unstable dev">master (8.0)</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Security Level:</strong> 
                   <span id="security-val" class="value"> <span class="note">Public</span> (Default Security Level. Issues are Public) </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-13109096-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>This was discovered while auditing jenkins failures from <br> <tt>TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete</tt> (where a test explicitly deletes and then recreates a collection with the same name), but as noted in a comment below, <a href="https://issues.apache.org/jira/browse/SOLR-11392" title="StreamExpressionTest.testParallelExecutorStream fails too frequently" class="issue-link" data-issue-key="SOLR-11392">SOLR-11392</a> is another example of non-obvious test failures that can pop up because of this bug.</p> 
                  <p>In practice, it can affect any CloudSolrClient user after changes have been made to a collection (to add/move replicas, etc...)</p> 
                  <hr> 
                  <p>Original jira notes...</p> 
                  <p><tt>TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete</tt><br> seems to fail with non-trivial frequency, so I grabbed the logs from a recent failure and starting trying to follow along with the actions to figure out what exactly is happening....</p> 
                  <p><a href="https://jenkins.thetaphi.de/job/Lucene-Solr-master-Linux/20662/" class="external-link" rel="nofollow">https://jenkins.thetaphi.de/job/Lucene-Solr-master-Linux/20662/</a></p> 
                  <div class="preformatted panel" style="border-width: 1px;">
                   <div class="preformattedContent panelContent"> 
                    <pre>   [junit4] ERROR   20.3s J1 | TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete &lt;&lt;&lt;
   [junit4]    &gt; Throwable #1: org.apache.solr.client.solrj.impl.CloudSolrClient$RouteException: Error from server at https://127.0.0.1:42959/solr/testcollection_shard1_replica_n3: Expected mime type a
pplication/octet-stream but got text/html. &lt;html&gt;
   [junit4]    &gt; &lt;head&gt;
   [junit4]    &gt; &lt;meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1"/&gt;
   [junit4]    &gt; &lt;title&gt;Error 404 &lt;/title&gt;
</pre> 
                   </div>
                  </div> 
                  <p>The crux of this failure appears to be a genuine bug in how CloudSolrClient uses it's cached ClusterState info when doing (direct) updates. The key bits seem to be:</p> 
                  <ul> 
                   <li>CloudSolrClient does <em>something</em> (update,query,etc...) with a collection causing the current cluster state for the collection to be cached</li> 
                   <li>The actual collection changes such that a Solr node/core no longer exists as part of the collection</li> 
                   <li>CloudSolrClient is asked to process an UpdateRequest which triggers the code paths for the <tt>directUpdate()</tt> method – which attempts to route the updates directly to a replica of the appropriate shard using the (cache) collection state info</li> 
                   <li>CloudSolrClient (may) attempt to send that UpdateRequest to a node/core that doesn't exist, getting a 404 – which does not (seem to) trigger a state refresh, or retry to find a correct URL to resend the update to.</li> 
                  </ul> 
                  <p>Details to follow in comment....</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/SOLR-11484?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/SOLR-11484?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/SOLR-11484?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/SOLR-11484?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12891864" data-issue-id="13109096" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12891864/jenkins.thetaphi.20662.txt" draggable="true" data-downloadurl="text/plain:jenkins.thetaphi.20662.txt:https://issues.apache.org/jira/secure/attachment/12891864/jenkins.thetaphi.20662.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12891864/jenkins.thetaphi.20662.txt" title="Latest  13/Oct/17 00:20 - Hoss Man" draggable="true" data-downloadurl="text/plain:jenkins.thetaphi.20662.txt:https://issues.apache.org/jira/secure/attachment/12891864/jenkins.thetaphi.20662.txt">jenkins.thetaphi.20662.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2017-10-13T00:20:01.093Z">13/Oct/17 00:20</time>
                   </dd>
                   <dd class="attachment-size">
                    3.83 MB
                   </dd>
                   <dd class="attachment-author">
                    Hoss Man
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12894118" data-issue-id="13109096" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12894118/SOLR-11484.patch" draggable="true" data-downloadurl="text/plain:SOLR-11484.patch:https://issues.apache.org/jira/secure/attachment/12894118/SOLR-11484.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12894118/SOLR-11484.patch" title="Latest  26/Oct/17 12:22 - Noble Paul" draggable="true" data-downloadurl="text/plain:SOLR-11484.patch:https://issues.apache.org/jira/secure/attachment/12894118/SOLR-11484.patch">SOLR-11484.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2017-10-26T12:22:48.693Z">26/Oct/17 12:22</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Noble Paul
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12892649" data-issue-id="13109096" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12892649/SOLR-11484.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-11484.patch:https://issues.apache.org/jira/secure/attachment/12892649/SOLR-11484.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12892649/SOLR-11484.patch" title=" 17/Oct/17 17:09 - Hoss Man" draggable="true" data-downloadurl="text/x-patch:SOLR-11484.patch:https://issues.apache.org/jira/secure/attachment/12892649/SOLR-11484.patch">SOLR-11484.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2017-10-17T17:09:10.348Z">17/Oct/17 17:09</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Hoss Man
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="breaks">
                   breaks
                  </dt> 
                  <dd id="internal-13104531_12310050"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype" width="16" height="16" title="New Feature - A new feature of the product, which has yet to be developed." alt="New Feature - A new feature of the product, which has yet to be developed."> <span title="SOLR-11392: StreamExpressionTest.testParallelExecutorStream fails too frequently"> <a href="/jira/browse/SOLR-11392" data-issue-key="SOLR-11392" class="issue-link link-title">SOLR-11392</a> <span class="link-summary">StreamExpressionTest.testParallelExecutorStream fails too frequently</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="links to">
                   links to
                  </dt> 
                  <dd id="remote-100949" data-remote-link-id="100949" class="
                        remote-link                                            "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/images/icons/generic_link_16.png" width="16" height="16" title="Web Link" alt="Web Link"> <span title="GitHub Pull Request #264"> <a href="https://github.com/apache/lucene-solr/pull/264" class="link-title">GitHub Pull Request #264</a> <span class="link-summary"></span> </span> </p> 
                    <ul class="link-snapshot"> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_noble.paul" rel="noble.paul" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Noble Paul&quot;,&quot;emailAddress&quot;:&quot;noble.paul@gmail.com&quot;,&quot;username&quot;:&quot;noble.paul&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="noble.paul"></span></span> Noble Paul </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_hossman" rel="hossman" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Hoss Man&quot;,&quot;emailAddress&quot;:&quot;hossman_apachejira@fucit.org&quot;,&quot;username&quot;:&quot;hossman&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="hossman"></span></span> Hoss Man </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">11</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="13/Oct/17 00:19"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-10-13T00:19:34+0000">13/Oct/17 00:19</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="31/Dec/17 03:09"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-12-31T03:09:46+0000">31/Dec/17 03:09</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="28/Oct/17 01:38"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-10-28T01:38:19+0000">28/Oct/17 01:38</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-11484?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/SOLR-11484?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-16202862\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16202862&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16202862\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"hossman\\\" id=\\\"commentauthor_16202862_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=hossman\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"hossman\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Hoss Man\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16202862_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Oct\\/17 00:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-13T00:22:17+0000\'\u003e13\\/Oct\\/17 00:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve attached the log from \u003ca href=\\\"https:\\/\\/jenkins.thetaphi.de\\/job\\/Lucene-Solr-master-Linux\\/20662\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/jenkins.thetaphi.de\\/job\\/Lucene-Solr-master-Linux\\/20662\\/\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eA quick walk through of some of the key bits of logging from testCollectionCreateSearchDelete ...\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTest Creates a 2x2 collection, resulting in 4 SolrCores...\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e   \\r\\n   [junit4]   2&gt; 334246 INFO  (parallelCoreAdminExecutor-1592-thread-1-processing-n:127.0.0.1:42959_solr aecb57e9-be15-41b4-892b-269c3ef4df623724636310642455 CREATE) [n:127.0.0.1:42959_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;async=aecb57e9-be15-41b4-892b-269c3ef4df623724636310642455&amp;coreNodeName=core_node4&amp;name=testcollection_shard1_replica_n3&amp;action=CREATE&amp;numShards=2&amp;shard=shard1&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 334261 INFO  (parallelCoreAdminExecutor-1581-thread-1-processing-n:127.0.0.1:34827_solr aecb57e9-be15-41b4-892b-269c3ef4df623724636321671098 CREATE) [n:127.0.0.1:34827_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;async=aecb57e9-be15-41b4-892b-269c3ef4df623724636321671098&amp;coreNodeName=core_node8&amp;name=testcollection_shard2_replica_n6&amp;action=CREATE&amp;numShards=2&amp;shard=shard2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 334272 INFO  (parallelCoreAdminExecutor-1579-thread-1-processing-n:127.0.0.1:38927_solr aecb57e9-be15-41b4-892b-269c3ef4df623724636317202530 CREATE) [n:127.0.0.1:38927_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;async=aecb57e9-be15-41b4-892b-269c3ef4df623724636317202530&amp;coreNodeName=core_node7&amp;name=testcollection_shard2_replica_n5&amp;action=CREATE&amp;numShards=2&amp;shard=shard2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 334272 INFO  (parallelCoreAdminExecutor-1577-thread-1-processing-n:127.0.0.1:36233_solr aecb57e9-be15-41b4-892b-269c3ef4df623724636304239736 CREATE) [n:127.0.0.1:36233_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;async=aecb57e9-be15-41b4-892b-269c3ef4df623724636304239736&amp;coreNodeName=core_node2&amp;name=testcollection_shard1_replica_n1&amp;action=CREATE&amp;numShards=2&amp;shard=shard1&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eNote that these initial Cores are:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003etestcollection_shard1_replica_n3\u003c\\/li\u003e\\n\\t\u003cli\u003etestcollection_shard2_replica_n6\u003c\\/li\u003e\\n\\t\u003cli\u003etestcollection_shard2_replica_n5\u003c\\/li\u003e\\n\\t\u003cli\u003etestcollection_shard1_replica_n1\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e...the test then does some searching of this collection, and a few other things, before ultimately deleting this collection, and verifies the delete worked correctly...\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e   ....\\r\\n   [junit4]   2&gt; 340530 INFO  (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.AbstractDistribZkTestBase Wait for collection to disappear - collection: testcollection failOnTimeout:true timeout (sec):330\\r\\n   [junit4]   1&gt; -\\r\\n   [junit4]   2&gt; 340530 INFO  (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.AbstractDistribZkTestBase Collection has disappeared - collection: testcollection\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003e...at which point it recreates the collection, and we get 4 completely new SolrCores...\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e   [junit4]   2&gt; 340531 INFO  (qtp6784903-4183) [n:127.0.0.1:38927_solr    ] o.a.s.h.a.CollectionsHandler Invoked Collection Action :create with params replicationFactor=2&amp;collection.configName=solrCloudCollectionConfig&amp;maxShardsPerNode=1&amp;name=testcollection&amp;nrtReplicas=2&amp;action=CREATE&amp;numShards=2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin&amp;version=2 and sendToOCPQueue=true\\r\\n   [junit4]   2&gt; 340533 INFO  (OverseerThreadFactory-1587-thread-3-processing-n:127.0.0.1:34827_solr) [n:127.0.0.1:34827_solr    ] o.a.s.c.CreateCollectionCmd Create collection testcollection\\r\\n   ....\\r\\n   [junit4]   2&gt; 340948 INFO  (qtp13197426-4184) [n:127.0.0.1:36233_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;coreNodeName=core_node8&amp;name=testcollection_shard2_replica_n6&amp;action=CREATE&amp;numShards=2&amp;shard=shard2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 340948 INFO  (qtp13767699-4323) [n:127.0.0.1:42959_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;coreNodeName=core_node5&amp;name=testcollection_shard1_replica_n2&amp;action=CREATE&amp;numShards=2&amp;shard=shard1&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 340949 INFO  (qtp18576982-4232) [n:127.0.0.1:34827_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;coreNodeName=core_node3&amp;name=testcollection_shard1_replica_n1&amp;action=CREATE&amp;numShards=2&amp;shard=shard1&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 341020 INFO  (qtp1638616-4379) [n:127.0.0.1:40813_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;coreNodeName=core_node7&amp;name=testcollection_shard2_replica_n4&amp;action=CREATE&amp;numShards=2&amp;shard=shard2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eNote the new SolrCore names\\/paths...\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003etestcollection_shard1_replica_n1\u003c\\/li\u003e\\n\\t\u003cli\u003etestcollection_shard1_replica_n2\u003c\\/li\u003e\\n\\t\u003cli\u003etestcollection_shard2_replica_n4\u003c\\/li\u003e\\n\\t\u003cli\u003etestcollection_shard2_replica_n6\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e...note in particular that there is \u003cb\u003eNOT\u003c\\/b\u003e a \\\"testcollection_shard1_replica_n3\\\" core in the \\\"new\\\" instance of this collection ... that was only the \u003cb\u003eprior\u003c\\/b\u003e (instance) of this collection.\u003c\\/p\u003e\\n\\n\u003cp\u003eCollection creation finishes...\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e   [junit4]   2&gt; 344142 INFO  (qtp6784903-4183) [n:127.0.0.1:38927_solr    ] o.a.s.s.HttpSolrCall [admin] webapp=null path=\\/admin\\/collections params={replicationFactor=2&amp;collection.configName=solrCloudCollectionConfig&amp;maxShardsPerNode=1&amp;name=testcollection&amp;nrtReplicas=2&amp;action=CREATE&amp;numShards=2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin&amp;version=2} status=0 QTime=3610\\r\\n   [junit4]   2&gt; 344143 INFO  (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.AbstractDistribZkTestBase Wait for recoveries to finish - collection: testcollection failOnTimeout:true timeout (sec):330\\r\\n   ...\\r\\n   [junit4]   2&gt; 344144 INFO  (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.AbstractDistribZkTestBase Recoveries finished - collection: testcollection\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003e...now the test does a \\\"\u003cb\u003e:\u003c\\/b\u003e\\\" query over the colleciton &#8211; to ensure no docs found...\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e   [junit4]   2&gt; 344168 INFO  (qtp13767699-4319) [n:127.0.0.1:42959_solr c:testcollection s:shard1 r:core_node5 x:testcollection_shard1_replica_n2] o.a.s.c.S.Request [testcollection_shard1_replica_n2]  webapp=\\/solr path=\\/select params={df=text&amp;distrib=false&amp;_stateVer_=testcollection:7&amp;fl=id&amp;fl=score&amp;shards.purpose=4&amp;start=0&amp;fsv=true&amp;shard.url=https:\\/\\/127.0.0.1:42959\\/solr\\/testcollection_shard1_replica_n2\\/|https:\\/\\/127.0.0.1:34827\\/solr\\/testcollection_shard1_replica_n1\\/&amp;rows=10&amp;version=2&amp;q=*:*&amp;NOW=1507805797249&amp;isShard=true&amp;wt=javabin} hits=0 status=0 QTime=0\\r\\n   [junit4]   2&gt; 344168 INFO  (qtp1638616-4384) [n:127.0.0.1:40813_solr c:testcollection s:shard2 r:core_node7 x:testcollection_shard2_replica_n4] o.a.s.c.S.Request [testcollection_shard2_replica_n4]  webapp=\\/solr path=\\/select params={df=text&amp;distrib=false&amp;_stateVer_=testcollection:7&amp;fl=id&amp;fl=score&amp;shards.purpose=4&amp;start=0&amp;fsv=true&amp;shard.url=https:\\/\\/127.0.0.1:40813\\/solr\\/testcollection_shard2_replica_n4\\/|https:\\/\\/127.0.0.1:36233\\/solr\\/testcollection_shard2_replica_n6\\/&amp;rows=10&amp;version=2&amp;q=*:*&amp;NOW=1507805797249&amp;isShard=true&amp;wt=javabin} hits=0 status=0 QTime=0\\r\\n   [junit4]   2&gt; 344169 INFO  (qtp18576982-4231) [n:127.0.0.1:34827_solr c:testcollection s:shard1 r:core_node3 x:testcollection_shard1_replica_n1] o.a.s.c.S.Request [testcollection_shard1_replica_n1]  webapp=\\/solr path=\\/select params={q=*:*&amp;_stateVer_=testcollection:7&amp;wt=javabin&amp;version=2} hits=0 status=0 QTime=2\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003e...that request was directed to \\\"testcollection_shard1_replica_n1\\\" (a core name that just so happened to exist in both instances of the \\\"testcollection\\\") and that works and we get the correct response of numFound=0.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut the next line in the test\\/lots is an attempt to add a document &#8211; and this is what fails...\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e   [junit4]   2&gt; 344173 ERROR (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.s.i.CloudSolrClient Request to collection testcollection failed due to (404) org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at https:\\/\\/127.0.0.1:42959\\/solr\\/testcollection_shard1_replica_n3: Expected mime type application\\/octet-stream but got text\\/html. &lt;html&gt;\\r\\n   [junit4]   2&gt; &lt;head&gt;\\r\\n   [junit4]   2&gt; &lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text\\/html;charset=ISO-8859-1\\\"\\/&gt;\\r\\n   [junit4]   2&gt; &lt;title&gt;Error 404 &lt;\\/title&gt;\\r\\n   [junit4]   2&gt; &lt;\\/head&gt;\\r\\n   [junit4]   2&gt; &lt;body&gt;\\r\\n   [junit4]   2&gt; &lt;h2&gt;HTTP ERROR: 404&lt;\\/h2&gt;\\r\\n   [junit4]   2&gt; &lt;p&gt;Problem accessing \\/solr\\/testcollection_shard1_replica_n3\\/update. Reason:\\r\\n   [junit4]   2&gt; &lt;pre&gt;    Can not find: \\/solr\\/testcollection_shard1_replica_n3\\/update&lt;\\/pre&gt;&lt;\\/p&gt;\\r\\n   [junit4]   2&gt; &lt;hr \\/&gt;&lt;a href=\\\"http:\\/\\/eclipse.org\\/jetty\\\"&gt;Powered by Jetty:\\/\\/ 9.3.20.v20170531&lt;\\/a&gt;&lt;hr\\/&gt;\\r\\n   [junit4]   2&gt; &lt;\\/body&gt;\\r\\n   [junit4]   2&gt; &lt;\\/html&gt;\\r\\n   [junit4]   2&gt; , retry? 0\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003e...the key problem being that \u003ctt\u003eCloudSolrClient.directUpdate\u003c\\/tt\u003e is using (stale) ClusterState info about the collection to try and route that update directly to \\\"testcollection_shard1_replica_n3\\\" which doesn\'t exist in the collection &#8211; it hasn\'t existed since the \u003cb\u003elast\u003c\\/b\u003e time this collection existed.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd once this 404 is returned, CloudSolrClient does not (or can not? not sure what the rules are for Updates) make any attempt to retry this update.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe stale collection info and the resulting 404 are ultimately what fails the test...\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e   [junit4] ERROR   20.3s J1 | TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete &lt;&lt;&lt;\\r\\n   [junit4]    &gt; Throwable #1: org.apache.solr.client.solrj.impl.CloudSolrClient$RouteException: Error from server at https:\\/\\/127.0.0.1:42959\\/solr\\/testcollection_shard1_replica_n3: Expected mime type a\\r\\npplication\\/octet-stream but got text\\/html. &lt;html&gt;\\r\\n   [junit4]    &gt; &lt;head&gt;\\r\\n   [junit4]    &gt; &lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text\\/html;charset=ISO-8859-1\\\"\\/&gt;\\r\\n   [junit4]    &gt; &lt;title&gt;Error 404 &lt;\\/title&gt;\\r\\n   [junit4]    &gt; &lt;\\/head&gt;\\r\\n   [junit4]    &gt; &lt;body&gt;\\r\\n   [junit4]    &gt; &lt;h2&gt;HTTP ERROR: 404&lt;\\/h2&gt;\\r\\n   [junit4]    &gt; &lt;p&gt;Problem accessing \\/solr\\/testcollection_shard1_replica_n3\\/update. Reason:\\r\\n   [junit4]    &gt; &lt;pre&gt;    Can not find: \\/solr\\/testcollection_shard1_replica_n3\\/update&lt;\\/pre&gt;&lt;\\/p&gt;\\r\\n   [junit4]    &gt; &lt;hr \\/&gt;&lt;a href=\\\"http:\\/\\/eclipse.org\\/jetty\\\"&gt;Powered by Jetty:\\/\\/ 9.3.20.v20170531&lt;\\/a&gt;&lt;hr\\/&gt;\\r\\n   [junit4]    &gt; &lt;\\/body&gt;\\r\\n   [junit4]    &gt; &lt;\\/html&gt;\\r\\n   [junit4]    &gt;        at __randomizedtesting.SeedInfo.seed([DC2FFDE51D1E4138:7FD553409AF6AB9D]:0)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:539)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:993)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:862)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:793)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:178)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:233)\\r\\n   [junit4]    &gt;        at org.apache.solr.cloud.TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete(TestCollectionsAPIViaSolrCloudCluster.java:167)\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\\n\u003cp\u003e...shouldn\'t this type of failure cause the (stale) collection info in CloudSolrClient to be refreshed, and then retry the update?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"hossman\\\" id=\\\"commentauthor_16202862_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=hossman\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"hossman\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Hoss Man\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16202862_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Oct\\/17 00:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-13T00:22:17+0000\'\u003e13\\/Oct\\/17 00:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve attached the log from  https:\\/\\/jenkins.thetaphi.de\\/job\\/Lucene-Solr-master-Linux\\/20662\\/  \\n\\n A quick walk through of some of the key bits of logging from testCollectionCreateSearchDelete ... \\n\\n\\n Test Creates a 2x2 collection, resulting in 4 SolrCores... \\n\\n  \\n    \\r\\n   [junit4]   2&gt; 334246 INFO  (parallelCoreAdminExecutor-1592-thread-1-processing-n:127.0.0.1:42959_solr aecb57e9-be15-41b4-892b-269c3ef4df623724636310642455 CREATE) [n:127.0.0.1:42959_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;async=aecb57e9-be15-41b4-892b-269c3ef4df623724636310642455&amp;coreNodeName=core_node4&amp;name=testcollection_shard1_replica_n3&amp;action=CREATE&amp;numShards=2&amp;shard=shard1&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 334261 INFO  (parallelCoreAdminExecutor-1581-thread-1-processing-n:127.0.0.1:34827_solr aecb57e9-be15-41b4-892b-269c3ef4df623724636321671098 CREATE) [n:127.0.0.1:34827_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;async=aecb57e9-be15-41b4-892b-269c3ef4df623724636321671098&amp;coreNodeName=core_node8&amp;name=testcollection_shard2_replica_n6&amp;action=CREATE&amp;numShards=2&amp;shard=shard2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 334272 INFO  (parallelCoreAdminExecutor-1579-thread-1-processing-n:127.0.0.1:38927_solr aecb57e9-be15-41b4-892b-269c3ef4df623724636317202530 CREATE) [n:127.0.0.1:38927_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;async=aecb57e9-be15-41b4-892b-269c3ef4df623724636317202530&amp;coreNodeName=core_node7&amp;name=testcollection_shard2_replica_n5&amp;action=CREATE&amp;numShards=2&amp;shard=shard2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 334272 INFO  (parallelCoreAdminExecutor-1577-thread-1-processing-n:127.0.0.1:36233_solr aecb57e9-be15-41b4-892b-269c3ef4df623724636304239736 CREATE) [n:127.0.0.1:36233_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;async=aecb57e9-be15-41b4-892b-269c3ef4df623724636304239736&amp;coreNodeName=core_node2&amp;name=testcollection_shard1_replica_n1&amp;action=CREATE&amp;numShards=2&amp;shard=shard1&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n \\n  \\n\\n Note that these initial Cores are: \\n\\n \\n\\t testcollection_shard1_replica_n3 \\n\\t testcollection_shard2_replica_n6 \\n\\t testcollection_shard2_replica_n5 \\n\\t testcollection_shard1_replica_n1 \\n \\n\\n\\n ...the test then does some searching of this collection, and a few other things, before ultimately deleting this collection, and verifies the delete worked correctly... \\n\\n  \\n    ....\\r\\n   [junit4]   2&gt; 340530 INFO  (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.AbstractDistribZkTestBase Wait for collection to disappear - collection: testcollection failOnTimeout:true timeout (sec):330\\r\\n   [junit4]   1&gt; -\\r\\n   [junit4]   2&gt; 340530 INFO  (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.AbstractDistribZkTestBase Collection has disappeared - collection: testcollection\\r\\n \\n  \\n\\n ...at which point it recreates the collection, and we get 4 completely new SolrCores... \\n\\n  \\n    [junit4]   2&gt; 340531 INFO  (qtp6784903-4183) [n:127.0.0.1:38927_solr    ] o.a.s.h.a.CollectionsHandler Invoked Collection Action :create with params replicationFactor=2&amp;collection.configName=solrCloudCollectionConfig&amp;maxShardsPerNode=1&amp;name=testcollection&amp;nrtReplicas=2&amp;action=CREATE&amp;numShards=2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin&amp;version=2 and sendToOCPQueue=true\\r\\n   [junit4]   2&gt; 340533 INFO  (OverseerThreadFactory-1587-thread-3-processing-n:127.0.0.1:34827_solr) [n:127.0.0.1:34827_solr    ] o.a.s.c.CreateCollectionCmd Create collection testcollection\\r\\n   ....\\r\\n   [junit4]   2&gt; 340948 INFO  (qtp13197426-4184) [n:127.0.0.1:36233_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;coreNodeName=core_node8&amp;name=testcollection_shard2_replica_n6&amp;action=CREATE&amp;numShards=2&amp;shard=shard2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 340948 INFO  (qtp13767699-4323) [n:127.0.0.1:42959_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;coreNodeName=core_node5&amp;name=testcollection_shard1_replica_n2&amp;action=CREATE&amp;numShards=2&amp;shard=shard1&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 340949 INFO  (qtp18576982-4232) [n:127.0.0.1:34827_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;coreNodeName=core_node3&amp;name=testcollection_shard1_replica_n1&amp;action=CREATE&amp;numShards=2&amp;shard=shard1&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n   [junit4]   2&gt; 341020 INFO  (qtp1638616-4379) [n:127.0.0.1:40813_solr    ] o.a.s.h.a.CoreAdminOperation core create command qt=\\/admin\\/cores&amp;collection.configName=solrCloudCollectionConfig&amp;newCollection=true&amp;collection=testcollection&amp;version=2&amp;replicaType=NRT&amp;coreNodeName=core_node7&amp;name=testcollection_shard2_replica_n4&amp;action=CREATE&amp;numShards=2&amp;shard=shard2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin\\r\\n \\n  \\n\\n Note the new SolrCore names\\/paths... \\n\\n \\n\\t testcollection_shard1_replica_n1 \\n\\t testcollection_shard1_replica_n2 \\n\\t testcollection_shard2_replica_n4 \\n\\t testcollection_shard2_replica_n6 \\n \\n\\n\\n ...note in particular that there is  NOT  a \\\"testcollection_shard1_replica_n3\\\" core in the \\\"new\\\" instance of this collection ... that was only the  prior  (instance) of this collection. \\n\\n Collection creation finishes... \\n\\n  \\n    [junit4]   2&gt; 344142 INFO  (qtp6784903-4183) [n:127.0.0.1:38927_solr    ] o.a.s.s.HttpSolrCall [admin] webapp=null path=\\/admin\\/collections params={replicationFactor=2&amp;collection.configName=solrCloudCollectionConfig&amp;maxShardsPerNode=1&amp;name=testcollection&amp;nrtReplicas=2&amp;action=CREATE&amp;numShards=2&amp;property.solr.directoryFactory=solr.StandardDirectoryFactory&amp;wt=javabin&amp;version=2} status=0 QTime=3610\\r\\n   [junit4]   2&gt; 344143 INFO  (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.AbstractDistribZkTestBase Wait for recoveries to finish - collection: testcollection failOnTimeout:true timeout (sec):330\\r\\n   ...\\r\\n   [junit4]   2&gt; 344144 INFO  (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.AbstractDistribZkTestBase Recoveries finished - collection: testcollection\\r\\n \\n  \\n\\n ...now the test does a \\\" : \\\" query over the colleciton &#8211; to ensure no docs found... \\n\\n  \\n    [junit4]   2&gt; 344168 INFO  (qtp13767699-4319) [n:127.0.0.1:42959_solr c:testcollection s:shard1 r:core_node5 x:testcollection_shard1_replica_n2] o.a.s.c.S.Request [testcollection_shard1_replica_n2]  webapp=\\/solr path=\\/select params={df=text&amp;distrib=false&amp;_stateVer_=testcollection:7&amp;fl=id&amp;fl=score&amp;shards.purpose=4&amp;start=0&amp;fsv=true&amp;shard.url=https:\\/\\/127.0.0.1:42959\\/solr\\/testcollection_shard1_replica_n2\\/|https:\\/\\/127.0.0.1:34827\\/solr\\/testcollection_shard1_replica_n1\\/&amp;rows=10&amp;version=2&amp;q=*:*&amp;NOW=1507805797249&amp;isShard=true&amp;wt=javabin} hits=0 status=0 QTime=0\\r\\n   [junit4]   2&gt; 344168 INFO  (qtp1638616-4384) [n:127.0.0.1:40813_solr c:testcollection s:shard2 r:core_node7 x:testcollection_shard2_replica_n4] o.a.s.c.S.Request [testcollection_shard2_replica_n4]  webapp=\\/solr path=\\/select params={df=text&amp;distrib=false&amp;_stateVer_=testcollection:7&amp;fl=id&amp;fl=score&amp;shards.purpose=4&amp;start=0&amp;fsv=true&amp;shard.url=https:\\/\\/127.0.0.1:40813\\/solr\\/testcollection_shard2_replica_n4\\/|https:\\/\\/127.0.0.1:36233\\/solr\\/testcollection_shard2_replica_n6\\/&amp;rows=10&amp;version=2&amp;q=*:*&amp;NOW=1507805797249&amp;isShard=true&amp;wt=javabin} hits=0 status=0 QTime=0\\r\\n   [junit4]   2&gt; 344169 INFO  (qtp18576982-4231) [n:127.0.0.1:34827_solr c:testcollection s:shard1 r:core_node3 x:testcollection_shard1_replica_n1] o.a.s.c.S.Request [testcollection_shard1_replica_n1]  webapp=\\/solr path=\\/select params={q=*:*&amp;_stateVer_=testcollection:7&amp;wt=javabin&amp;version=2} hits=0 status=0 QTime=2\\r\\n \\n  \\n\\n ...that request was directed to \\\"testcollection_shard1_replica_n1\\\" (a core name that just so happened to exist in both instances of the \\\"testcollection\\\") and that works and we get the correct response of numFound=0. \\n\\n But the next line in the test\\/lots is an attempt to add a document &#8211; and this is what fails... \\n\\n  \\n    [junit4]   2&gt; 344173 ERROR (TEST-TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete-seed#[DC2FFDE51D1E4138]) [    ] o.a.s.c.s.i.CloudSolrClient Request to collection testcollection failed due to (404) org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at https:\\/\\/127.0.0.1:42959\\/solr\\/testcollection_shard1_replica_n3: Expected mime type application\\/octet-stream but got text\\/html. &lt;html&gt;\\r\\n   [junit4]   2&gt; &lt;head&gt;\\r\\n   [junit4]   2&gt; &lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text\\/html;charset=ISO-8859-1\\\"\\/&gt;\\r\\n   [junit4]   2&gt; &lt;title&gt;Error 404 &lt;\\/title&gt;\\r\\n   [junit4]   2&gt; &lt;\\/head&gt;\\r\\n   [junit4]   2&gt; &lt;body&gt;\\r\\n   [junit4]   2&gt; &lt;h2&gt;HTTP ERROR: 404&lt;\\/h2&gt;\\r\\n   [junit4]   2&gt; &lt;p&gt;Problem accessing \\/solr\\/testcollection_shard1_replica_n3\\/update. Reason:\\r\\n   [junit4]   2&gt; &lt;pre&gt;    Can not find: \\/solr\\/testcollection_shard1_replica_n3\\/update&lt;\\/pre&gt;&lt;\\/p&gt;\\r\\n   [junit4]   2&gt; &lt;hr \\/&gt;&lt;a href=\\\"http:\\/\\/eclipse.org\\/jetty\\\"&gt;Powered by Jetty:\\/\\/ 9.3.20.v20170531&lt;\\/a&gt;&lt;hr\\/&gt;\\r\\n   [junit4]   2&gt; &lt;\\/body&gt;\\r\\n   [junit4]   2&gt; &lt;\\/html&gt;\\r\\n   [junit4]   2&gt; , retry? 0\\r\\n \\n  \\n\\n ...the key problem being that  CloudSolrClient.directUpdate  is using (stale) ClusterState info about the collection to try and route that update directly to \\\"testcollection_shard1_replica_n3\\\" which doesn\'t exist in the collection &#8211; it hasn\'t existed since the  last  time this collection existed. \\n\\n And once this 404 is returned, CloudSolrClient does not (or can not? not sure what the rules are for Updates) make any attempt to retry this update. \\n\\n The stale collection info and the resulting 404 are ultimately what fails the test... \\n\\n  \\n    [junit4] ERROR   20.3s J1 | TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete &lt;&lt;&lt;\\r\\n   [junit4]    &gt; Throwable #1: org.apache.solr.client.solrj.impl.CloudSolrClient$RouteException: Error from server at https:\\/\\/127.0.0.1:42959\\/solr\\/testcollection_shard1_replica_n3: Expected mime type a\\r\\npplication\\/octet-stream but got text\\/html. &lt;html&gt;\\r\\n   [junit4]    &gt; &lt;head&gt;\\r\\n   [junit4]    &gt; &lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text\\/html;charset=ISO-8859-1\\\"\\/&gt;\\r\\n   [junit4]    &gt; &lt;title&gt;Error 404 &lt;\\/title&gt;\\r\\n   [junit4]    &gt; &lt;\\/head&gt;\\r\\n   [junit4]    &gt; &lt;body&gt;\\r\\n   [junit4]    &gt; &lt;h2&gt;HTTP ERROR: 404&lt;\\/h2&gt;\\r\\n   [junit4]    &gt; &lt;p&gt;Problem accessing \\/solr\\/testcollection_shard1_replica_n3\\/update. Reason:\\r\\n   [junit4]    &gt; &lt;pre&gt;    Can not find: \\/solr\\/testcollection_shard1_replica_n3\\/update&lt;\\/pre&gt;&lt;\\/p&gt;\\r\\n   [junit4]    &gt; &lt;hr \\/&gt;&lt;a href=\\\"http:\\/\\/eclipse.org\\/jetty\\\"&gt;Powered by Jetty:\\/\\/ 9.3.20.v20170531&lt;\\/a&gt;&lt;hr\\/&gt;\\r\\n   [junit4]    &gt; &lt;\\/body&gt;\\r\\n   [junit4]    &gt; &lt;\\/html&gt;\\r\\n   [junit4]    &gt;        at __randomizedtesting.SeedInfo.seed([DC2FFDE51D1E4138:7FD553409AF6AB9D]:0)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:539)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:993)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:862)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:793)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:178)\\r\\n   [junit4]    &gt;        at org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:233)\\r\\n   [junit4]    &gt;        at org.apache.solr.cloud.TestCollectionsAPIViaSolrCloudCluster.testCollectionCreateSearchDelete(TestCollectionsAPIViaSolrCloudCluster.java:167)\\r\\n \\n  \\n\\n\\n ...shouldn\'t this type of failure cause the (stale) collection info in CloudSolrClient to be refreshed, and then retry the update?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16202881\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16202881&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16202881\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joel.bernstein\\\" id=\\\"commentauthor_16202881_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joel.bernstein\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joel.bernstein\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Joel Bernstein\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16202881_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Oct\\/17 00:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-13T00:49:49+0000\'\u003e13\\/Oct\\/17 00:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Joel Bernstein - 13\\/Oct\\/17 00:50\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=hossman\\\" class=\\\"user-hover\\\" rel=\\\"hossman\\\"\u003eHoss Man\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\" class=\\\"user-hover\\\" rel=\\\"noble.paul\\\"\u003eNoble Paul\u003c\\/a\u003e, this is related I believe to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-11392\\\" title=\\\"StreamExpressionTest.testParallelExecutorStream fails too frequently\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-11392\\\"\u003eSOLR-11392\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=romseygeek\\\" class=\\\"user-hover\\\" rel=\\\"romseygeek\\\"\u003eAlan Woodward\u003c\\/a\u003e, discusses the issue in the ticket.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joel.bernstein\\\" id=\\\"commentauthor_16202881_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joel.bernstein\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joel.bernstein\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Joel Bernstein\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16202881_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Oct\\/17 00:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-13T00:49:49+0000\'\u003e13\\/Oct\\/17 00:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Joel Bernstein - 13\\/Oct\\/17 00:50\\\"\u003eedited\u003c\\/span\u003e                    Hoss Man ,  Noble Paul , this is related I believe to  SOLR-11392 . \\n\\n  Alan Woodward , discusses the issue in the ticket.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16203289\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16203289&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16203289\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16203289_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16203289_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Oct\\/17 09:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-13T09:27:02+0000\'\u003e13\\/Oct\\/17 09:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=hossman\\\" class=\\\"user-hover\\\" rel=\\\"hossman\\\"\u003eHoss Man\u003c\\/a\u003e \u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\\r\\n \u003cspan class=\\\"code-object\\\"\u003eboolean\u003c\\/span\u003e wasCommError =\\r\\n          (rootCause \u003cspan class=\\\"code-keyword\\\"\u003einstanceof\u003c\\/span\u003e ConnectException ||\\r\\n              rootCause \u003cspan class=\\\"code-keyword\\\"\u003einstanceof\u003c\\/span\u003e ConnectTimeoutException ||\\r\\n              rootCause \u003cspan class=\\\"code-keyword\\\"\u003einstanceof\u003c\\/span\u003e NoHttpResponseException ||\\r\\n              rootCause \u003cspan class=\\\"code-keyword\\\"\u003einstanceof\u003c\\/span\u003e SocketException);\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003eI think we should add \u003ctt\u003eRouteException\u003c\\/tt\u003e to this list\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16203289_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16203289_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Oct\\/17 09:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-13T09:27:02+0000\'\u003e13\\/Oct\\/17 09:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Hoss Man   \\n  \\n \\r\\n  boolean  wasCommError =\\r\\n          (rootCause  instanceof  ConnectException ||\\r\\n              rootCause  instanceof  ConnectTimeoutException ||\\r\\n              rootCause  instanceof  NoHttpResponseException ||\\r\\n              rootCause  instanceof  SocketException);\\r\\n \\n  \\n I think we should add  RouteException  to this list              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16207928\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16207928&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16207928\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"hossman\\\" id=\\\"commentauthor_16207928_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=hossman\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"hossman\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Hoss Man\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16207928_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Oct\\/17 17:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-17T17:11:23+0000\'\u003e17\\/Oct\\/17 17:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\" class=\\\"user-hover\\\" rel=\\\"noble.paul\\\"\u003eNoble Paul\u003c\\/a\u003e:  IIUC you\'re saying &#8211; at a broader level &#8211; that you think this is a bug in CloudSolrClient, and not a mistake in the affected test(s), correct?\u003c\\/p\u003e\\n\\n\u003cp\u003eIn that case, I\'m attaching a patch with test explicitly targeted at this caching problem in CloudSolrClient that fails reliably (for me) 100% of the time, and i\'ll re-word the summary\\/description to more specificaly describe the underlying problem.\u003c\\/p\u003e\\n\\n\u003cp\u003eThat said: I don\'t really understand all the possible code paths well enough to be confident of your suggested fix:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eis adding \u003ctt\u003eRouteException\u003c\\/tt\u003e to the \u003ctt\u003ewasCommError\u003c\\/tt\u003e logic safe?\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eit\'s not clear to me that every possible reason for a \u003ctt\u003eRouteException\u003c\\/tt\u003e is actually a \\\"communication error\\\" that should trigger all the affected downstream logic that comes with setting that boolean\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\\t\u003cli\u003eis setting \u003ctt\u003ewasCommError\u003c\\/tt\u003e enough to actually fix this bug?\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003eIt doesn\'t seem like setting that is sufficient, because I don\'t think the \u003ctt\u003edirectUpdate()\u003c\\/tt\u003e code paths will (currently) attempt a retry even if \u003ctt\u003etrue==wasCommError\u003c\\/tt\u003e  ?\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"hossman\\\" id=\\\"commentauthor_16207928_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=hossman\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"hossman\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Hoss Man\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16207928_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Oct\\/17 17:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-17T17:11:23+0000\'\u003e17\\/Oct\\/17 17:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                   \\n  Noble Paul :  IIUC you\'re saying &#8211; at a broader level &#8211; that you think this is a bug in CloudSolrClient, and not a mistake in the affected test(s), correct? \\n\\n In that case, I\'m attaching a patch with test explicitly targeted at this caching problem in CloudSolrClient that fails reliably (for me) 100% of the time, and i\'ll re-word the summary\\/description to more specificaly describe the underlying problem. \\n\\n That said: I don\'t really understand all the possible code paths well enough to be confident of your suggested fix: \\n\\n \\n\\t is adding  RouteException  to the  wasCommError  logic safe?\\n\\t \\n\\t\\t it\'s not clear to me that every possible reason for a  RouteException  is actually a \\\"communication error\\\" that should trigger all the affected downstream logic that comes with setting that boolean \\n\\t \\n\\t \\n\\t is setting  wasCommError  enough to actually fix this bug?\\n\\t \\n\\t\\t It doesn\'t seem like setting that is sufficient, because I don\'t think the  directUpdate()  code paths will (currently) attempt a retry even if  true==wasCommError   ? \\n\\t \\n\\t \\n \\n\\n\\n ?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16208006\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16208006&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16208006\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ab\\\" id=\\\"commentauthor_16208006_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ab\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ab\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrzej Bialecki \u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16208006_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Oct\\/17 17:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-17T17:40:59+0000\'\u003e17\\/Oct\\/17 17:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eEffects of this bug may be also combined with effects of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-9440\\\" title=\\\"ZkStateReader on a client can cache collection state and never refresh it\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-9440\\\"\u003e\u003cdel\u003eSOLR-9440\u003c\\/del\u003e\u003c\\/a\u003e, so fixing the caching at this level may not completely solve the issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ab\\\" id=\\\"commentauthor_16208006_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ab\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ab\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrzej Bialecki \u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16208006_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Oct\\/17 17:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-17T17:40:59+0000\'\u003e17\\/Oct\\/17 17:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Effects of this bug may be also combined with effects of   SOLR-9440  , so fixing the caching at this level may not completely solve the issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16216583\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16216583&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16216583\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"caomanhdat\\\" id=\\\"commentauthor_16216583_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=caomanhdat\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"caomanhdat\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Cao Manh Dat\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16216583_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/17 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-24T09:12:58+0000\'\u003e24\\/Oct\\/17 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have an idea for this problem. The node responds a proper error ( like the node cannot find this core or collection, including clusterstate version), therefore cloudclient can know about it stale state and do retry.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"caomanhdat\\\" id=\\\"commentauthor_16216583_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=caomanhdat\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"caomanhdat\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Cao Manh Dat\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16216583_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/17 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-24T09:12:58+0000\'\u003e24\\/Oct\\/17 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have an idea for this problem. The node responds a proper error ( like the node cannot find this core or collection, including clusterstate version), therefore cloudclient can know about it stale state and do retry.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16218227\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16218227&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16218227\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16218227_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16218227_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Oct\\/17 07:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-25T07:50:00+0000\'\u003e25\\/Oct\\/17 07:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe exceptions are used to invalidate cache and retry. \u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=caomanhdat\\\" class=\\\"user-hover\\\" rel=\\\"caomanhdat\\\"\u003eCao Manh Dat\u003c\\/a\u003e, the node is supposed to respond with the new \u003ctt\u003estate.json\u003c\\/tt\u003e version in every response.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16218227_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16218227_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Oct\\/17 07:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-25T07:50:00+0000\'\u003e25\\/Oct\\/17 07:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The exceptions are used to invalidate cache and retry.  \\n Cao Manh Dat , the node is supposed to respond with the new  state.json  version in every response.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16220377\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16220377&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16220377\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16220377_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16220377_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/17 12:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-26T12:26:05+0000\'\u003e26\\/Oct\\/17 12:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere were 2 bugs\u003c\\/p\u003e\\n\\n\u003col\u003e\\n\\t\u003cli\u003eWhen there is a RouteException, CSC never invalidated it\'s state cache\u003c\\/li\u003e\\n\\t\u003cli\u003eWhen \u003ctt\u003edirectUpdatesToLeadersOnly==true\u003c\\/tt\u003e, it errors out if the \u003ctt\u003estate.json\u003c\\/tt\u003e doesn\'t have a node marked as leader. If there is no leader to be found, it\'s safer to just send the request to any \u003ctt\u003elive\u003c\\/tt\u003e \u003ctt\u003eNRT\u003c\\/tt\u003e replica instead of throwing an \u003ctt\u003eException\u003c\\/tt\u003e\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16220377_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16220377_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Oct\\/17 12:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-26T12:26:05+0000\'\u003e26\\/Oct\\/17 12:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There were 2 bugs \\n\\n \\n\\t When there is a RouteException, CSC never invalidated it\'s state cache \\n\\t When  directUpdatesToLeadersOnly==true , it errors out if the  state.json  doesn\'t have a node marked as leader. If there is no leader to be found, it\'s safer to just send the request to any  live   NRT  replica instead of throwing an  Exception  \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16221714\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16221714&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16221714\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16221714_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16221714_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Oct\\/17 04:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-27T04:58:36+0000\'\u003e27\\/Oct\\/17 04:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 0d29f7a1a24c98149485bb96f835fe0d35df8f7f in lucene-solr\'s branch refs\\/heads\\/master from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\" class=\\\"user-hover\\\" rel=\\\"noble.paul\\\"\u003eNoble Paul\u003c\\/a\u003e\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=0d29f7a\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=0d29f7a\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-11484\\\" title=\\\"CloudSolrClient&#39;s cache of collection clusterstate can cause RouteExceptions when attempting directUpdates after collection modifications\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-11484\\\"\u003e\u003cdel\u003eSOLR-11484\u003c\\/del\u003e\u003c\\/a\u003e: CloudSolrClient does not invalidate cache or retry for RouteException\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16221714_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16221714_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Oct\\/17 04:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-27T04:58:36+0000\'\u003e27\\/Oct\\/17 04:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 0d29f7a1a24c98149485bb96f835fe0d35df8f7f in lucene-solr\'s branch refs\\/heads\\/master from  Noble Paul  \\n[  https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=0d29f7a  ] \\n\\n   SOLR-11484  : CloudSolrClient does not invalidate cache or retry for RouteException              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16221742\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16221742&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16221742\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16221742_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16221742_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Oct\\/17 05:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-27T05:46:17+0000\'\u003e27\\/Oct\\/17 05:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 59109e1b15f0ab8fd4cf980880282bc820315c79 in lucene-solr\'s branch refs\\/heads\\/branch_7x from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\" class=\\\"user-hover\\\" rel=\\\"noble.paul\\\"\u003eNoble Paul\u003c\\/a\u003e\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=59109e1\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=59109e1\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-11484\\\" title=\\\"CloudSolrClient&#39;s cache of collection clusterstate can cause RouteExceptions when attempting directUpdates after collection modifications\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-11484\\\"\u003e\u003cdel\u003eSOLR-11484\u003c\\/del\u003e\u003c\\/a\u003e: CloudSolrClient does not invalidate cache or retry for RouteException\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16221742_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16221742_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Oct\\/17 05:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-27T05:46:17+0000\'\u003e27\\/Oct\\/17 05:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 59109e1b15f0ab8fd4cf980880282bc820315c79 in lucene-solr\'s branch refs\\/heads\\/branch_7x from  Noble Paul  \\n[  https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=59109e1  ] \\n\\n   SOLR-11484  : CloudSolrClient does not invalidate cache or retry for RouteException              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16223062\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16223062&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16223062\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"steve_rowe\\\" id=\\\"commentauthor_16223062_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=steve_rowe\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"steve_rowe\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Steve Rowe\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223062_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Oct\\/17 23:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-27T23:54:37+0000\'\u003e27\\/Oct\\/17 23:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReopening to address a 100% reproducing \u003ctt\u003eCloudSolrClient\u003c\\/tt\u003e NPE that begins at commit 59109e1b1 on this issue, from \u003ca href=\\\"https:\\/\\/jenkins.thetaphi.de\\/job\\/Lucene-Solr-7.x-Linux\\/685\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/jenkins.thetaphi.de\\/job\\/Lucene-Solr-7.x-Linux\\/685\u003c\\/a\u003e:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eChecking out Revision 14bb48e3268c8e2f4aa509b1a71a9fb3e361b082 (refs\\/remotes\\/origin\\/branch_7x)\\r\\n[...]\\r\\n   [junit4]   2&gt; NOTE: reproduce with: ant test  -Dtestcase=TestCloudSchemaless -Dtests.method=test -Dtests.seed=2542B6AD904A6296 -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=th-TH-u-nu-thai-x-lvariant-TH -Dtests.timezone=America\\/Nipigon -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\\r\\n   [junit4] ERROR   48.2s J0 | TestCloudSchemaless.test &lt;&lt;&lt;\\r\\n   [junit4]    &gt; Throwable #1: java.lang.NullPointerException\\r\\n   [junit4]    &gt; \\tat __randomizedtesting.SeedInfo.seed([2542B6AD904A6296:AD1689773EB60F6E]:0)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:925)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:808)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:178)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:106)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:71)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:85)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.schema.TestCloudSchemaless.test(TestCloudSchemaless.java:171)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:993)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:968)\\r\\n[...]\\r\\n   [junit4]   2&gt; NOTE: test params are: codec=Asserting(Lucene70): {}, docValues:{}, maxPointsInLeafNode=350, maxMBSortInHeap=6.677333545717319, sim=RandomSimilarity(queryNorm=true): {}, locale=th-TH-u-nu-thai-x-lvariant-TH, timezone=America\\/Nipigon\\r\\n   [junit4]   2&gt; NOTE: Linux 4.10.0-33-generic i386\\/Oracle Corporation 1.8.0_144 (32-bit)\\/cpus=8,threads=1,free=305236536,total=523501568\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"steve_rowe\\\" id=\\\"commentauthor_16223062_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=steve_rowe\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"steve_rowe\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Steve Rowe\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223062_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Oct\\/17 23:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-27T23:54:37+0000\'\u003e27\\/Oct\\/17 23:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reopening to address a 100% reproducing  CloudSolrClient  NPE that begins at commit 59109e1b1 on this issue, from  https:\\/\\/jenkins.thetaphi.de\\/job\\/Lucene-Solr-7.x-Linux\\/685 : \\n\\n  \\n Checking out Revision 14bb48e3268c8e2f4aa509b1a71a9fb3e361b082 (refs\\/remotes\\/origin\\/branch_7x)\\r\\n[...]\\r\\n   [junit4]   2&gt; NOTE: reproduce with: ant test  -Dtestcase=TestCloudSchemaless -Dtests.method=test -Dtests.seed=2542B6AD904A6296 -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=th-TH-u-nu-thai-x-lvariant-TH -Dtests.timezone=America\\/Nipigon -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1\\r\\n   [junit4] ERROR   48.2s J0 | TestCloudSchemaless.test &lt;&lt;&lt;\\r\\n   [junit4]    &gt; Throwable #1: java.lang.NullPointerException\\r\\n   [junit4]    &gt; \\tat __randomizedtesting.SeedInfo.seed([2542B6AD904A6296:AD1689773EB60F6E]:0)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:925)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:808)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:178)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:106)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:71)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:85)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.schema.TestCloudSchemaless.test(TestCloudSchemaless.java:171)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:993)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:968)\\r\\n[...]\\r\\n   [junit4]   2&gt; NOTE: test params are: codec=Asserting(Lucene70): {}, docValues:{}, maxPointsInLeafNode=350, maxMBSortInHeap=6.677333545717319, sim=RandomSimilarity(queryNorm=true): {}, locale=th-TH-u-nu-thai-x-lvariant-TH, timezone=America\\/Nipigon\\r\\n   [junit4]   2&gt; NOTE: Linux 4.10.0-33-generic i386\\/Oracle Corporation 1.8.0_144 (32-bit)\\/cpus=8,threads=1,free=305236536,total=523501568\\r\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16223129\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16223129&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16223129\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16223129_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223129_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/17 01:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-28T01:27:56+0000\'\u003e28\\/Oct\\/17 01:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit cf75e14e41f9c670c1346974693b9706325bec63 in lucene-solr\'s branch refs\\/heads\\/branch_7x from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\" class=\\\"user-hover\\\" rel=\\\"noble.paul\\\"\u003eNoble Paul\u003c\\/a\u003e\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=cf75e14\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=cf75e14\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-11484\\\" title=\\\"CloudSolrClient&#39;s cache of collection clusterstate can cause RouteExceptions when attempting directUpdates after collection modifications\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-11484\\\"\u003e\u003cdel\u003eSOLR-11484\u003c\\/del\u003e\u003c\\/a\u003e: fixing NPE\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16223129_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223129_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/17 01:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-28T01:27:56+0000\'\u003e28\\/Oct\\/17 01:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit cf75e14e41f9c670c1346974693b9706325bec63 in lucene-solr\'s branch refs\\/heads\\/branch_7x from  Noble Paul  \\n[  https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=cf75e14  ] \\n\\n   SOLR-11484  : fixing NPE              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16223132\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16223132&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16223132\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16223132_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223132_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/17 01:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-28T01:34:33+0000\'\u003e28\\/Oct\\/17 01:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit f1a6b68d75e58f464b2ed4ee3702a6c1b14511a0 in lucene-solr\'s branch refs\\/heads\\/master from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\" class=\\\"user-hover\\\" rel=\\\"noble.paul\\\"\u003eNoble Paul\u003c\\/a\u003e\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=f1a6b68\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=f1a6b68\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-11484\\\" title=\\\"CloudSolrClient&#39;s cache of collection clusterstate can cause RouteExceptions when attempting directUpdates after collection modifications\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-11484\\\"\u003e\u003cdel\u003eSOLR-11484\u003c\\/del\u003e\u003c\\/a\u003e: fixing NPE\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16223132_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223132_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/17 01:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-28T01:34:33+0000\'\u003e28\\/Oct\\/17 01:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit f1a6b68d75e58f464b2ed4ee3702a6c1b14511a0 in lucene-solr\'s branch refs\\/heads\\/master from  Noble Paul  \\n[  https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=f1a6b68  ] \\n\\n   SOLR-11484  : fixing NPE              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16223608\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16223608&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16223608\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"varunthacker\\\" id=\\\"commentauthor_16223608_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=varunthacker\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"varunthacker\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Varun Thacker\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223608_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/17 15:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-28T15:51:02+0000\'\u003e28\\/Oct\\/17 15:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAfter this commit what\'s the definition of {{directUpdatesToLeadersOnly?\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\\r\\n       Replica leader = slice.getLeader();\\r\\n+      \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (directUpdatesToLeadersOnly &amp;&amp; leader == \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e) {\\r\\n+        \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e (Replica replica : slice.getReplicas(\\r\\n+            replica -&gt; replica.isActive(getClusterStateProvider().getLiveNodes())\\r\\n+                &amp;&amp; replica.getType() == Replica.Type.NRT)) {\\r\\n+          leader = replica;\\r\\n+          \u003cspan class=\\\"code-keyword\\\"\u003ebreak\u003c\\/span\u003e;\\r\\n+        }\\r\\n+      }\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"varunthacker\\\" id=\\\"commentauthor_16223608_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=varunthacker\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"varunthacker\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Varun Thacker\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223608_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/17 15:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-28T15:51:02+0000\'\u003e28\\/Oct\\/17 15:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    After this commit what\'s the definition of {{directUpdatesToLeadersOnly? \\n\\n  \\n \\r\\n       Replica leader = slice.getLeader();\\r\\n+       if  (directUpdatesToLeadersOnly &amp;&amp; leader ==  null ) {\\r\\n+         for  (Replica replica : slice.getReplicas(\\r\\n+            replica -&gt; replica.isActive(getClusterStateProvider().getLiveNodes())\\r\\n+                &amp;&amp; replica.getType() == Replica.Type.NRT)) {\\r\\n+          leader = replica;\\r\\n+           break ;\\r\\n+        }\\r\\n+      }\\r\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16223767\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16223767&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16223767\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16223767_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223767_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/17 22:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-28T22:55:06+0000\'\u003e28\\/Oct\\/17 22:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIf there is no leader, send the request to any live NRT node\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16223767_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223767_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/17 22:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-28T22:55:06+0000\'\u003e28\\/Oct\\/17 22:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    If there is no leader, send the request to any live NRT node              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16223821\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16223821&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16223821\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"varunthacker\\\" id=\\\"commentauthor_16223821_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=varunthacker\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"varunthacker\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Varun Thacker\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223821_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/17 03:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-29T03:17:56+0000\'\u003e29\\/Oct\\/17 03:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBut then why have the directUpdatesToLeadersOnly flag? Shouldn\'t that be just the default behaviour? \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"varunthacker\\\" id=\\\"commentauthor_16223821_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=varunthacker\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"varunthacker\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Varun Thacker\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223821_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/17 03:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-29T03:17:56+0000\'\u003e29\\/Oct\\/17 03:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    But then why have the directUpdatesToLeadersOnly flag? Shouldn\'t that be just the default behaviour?               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16223822\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16223822&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16223822\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16223822_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223822_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/17 03:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-29T03:22:07+0000\'\u003e29\\/Oct\\/17 03:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have to agree with you on that\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16223822_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16223822_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/17 03:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-10-29T03:22:07+0000\'\u003e29\\/Oct\\/17 03:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have to agree with you on that              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16234311\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16234311&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16234311\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"varunthacker\\\" id=\\\"commentauthor_16234311_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=varunthacker\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"varunthacker\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Varun Thacker\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16234311_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/17 16:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-11-01T16:15:17+0000\'\u003e01\\/Nov\\/17 16:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Everyone,\u003c\\/p\u003e\\n\\n\u003cp\u003e \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\" class=\\\"user-hover\\\" rel=\\\"cpoerschke\\\"\u003eChristine Poerschke\u003c\\/a\u003e what are your thoughts on this? I guess the work \\\"Only\\\" in the flag would mean that the update should fail if there are no leaders?\u003c\\/p\u003e\\n\\n\u003cp\u003eIn which case our tests should not set this flag and use the default behaviour which is \\\"If there is no leader, send the request to any live NRT node\\\"\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"varunthacker\\\" id=\\\"commentauthor_16234311_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=varunthacker\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"varunthacker\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Varun Thacker\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16234311_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/17 16:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-11-01T16:15:17+0000\'\u003e01\\/Nov\\/17 16:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Everyone, \\n\\n   Christine Poerschke  what are your thoughts on this? I guess the work \\\"Only\\\" in the flag would mean that the update should fail if there are no leaders? \\n\\n In which case our tests should not set this flag and use the default behaviour which is \\\"If there is no leader, send the request to any live NRT node\\\"              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16238555\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16238555&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16238555\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16238555_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16238555_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Nov\\/17 23:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-11-03T23:11:17+0000\'\u003e03\\/Nov\\/17 23:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=varunthacker\\\" class=\\\"user-hover\\\" rel=\\\"varunthacker\\\"\u003eVarun Thacker\u003c\\/a\u003e - thanks for including me here.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e... I guess the work \\\"Only\\\" in the flag would mean that the update should fail if there are no leaders? ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eCorrect, that was the intention. For convenience \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-9512?focusedCommentId=15506019&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15506019\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ecopy\\/pasting\u003c\\/a\u003e a \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-9512\\\" title=\\\"CloudSolrClient&#39;s cluster state cache can break direct updates to leaders\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-9512\\\"\u003e\u003cdel\u003eSOLR-9512\u003c\\/del\u003e\u003c\\/a\u003e comment here:\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eThe \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-9090\\\" title=\\\"solrj CloudSolrClient: add directUpdatesToLeadersOnly support\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-9090\\\"\u003e\u003cdel\u003eSOLR-9090\u003c\\/del\u003e\u003c\\/a\u003e \u003ctt\u003edirectUpdatesToLeadersOnly\u003c\\/tt\u003e motivation\\/intention was for the flag to be not a hint but a directive and for updates to \'fail fast\' if there is (temporarily or otherwise) no shard leader. Fail fast (and let the caller of the \u003ctt\u003eCloudSolrClient\u003c\\/tt\u003e handle alarming and retries as it sees fit) as opposed to sending or retry-sending to a non-leader which would then forward to the leader (and potentially still fail eventually, eventually\\/not-fast-slowly).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAs far as the\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e... In which case our tests should not set this flag and use the default behaviour ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003ealternative is concerned, hmm, i\'m not sure, wouldn\'t that reduce test coverage in general, though yes perhaps for very specific tests a test could opt-out of randomising the value of the flag.\u003c\\/p\u003e\\n\\n\u003cp\u003eticket cross-reference: \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-11507\\\" title=\\\"simplify and extend SolrTestCaseJ4.CloudSolrClientBuilder randomisation\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-11507\\\"\u003e\u003cdel\u003eSOLR-11507\u003c\\/del\u003e\u003c\\/a\u003e concerns flag randomisation in the test CloudSolrClient - \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\" class=\\\"user-hover\\\" rel=\\\"dsmiley\\\"\u003eDavid Smiley\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=gerlowskija\\\" class=\\\"user-hover\\\" rel=\\\"gerlowskija\\\"\u003eJason Gerlowski\u003c\\/a\u003e any thoughts on this?\u003c\\/p\u003e\\n\\n\u003cp\u003e(I should also mention that the \u003ctt\u003edirectUpdatesToLeadersOnly\u003c\\/tt\u003e flag\'s addition predates the new replica types and I haven\'t yet considered if\\/how that might change the meaning of the flag.)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16238555_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16238555_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Nov\\/17 23:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-11-03T23:11:17+0000\'\u003e03\\/Nov\\/17 23:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi  Varun Thacker  - thanks for including me here. \\n\\n  ... I guess the work \\\"Only\\\" in the flag would mean that the update should fail if there are no leaders? ...  \\n\\n Correct, that was the intention. For convenience  copy\\/pasting  a   SOLR-9512   comment here: \\n\\n  The   SOLR-9090    directUpdatesToLeadersOnly  motivation\\/intention was for the flag to be not a hint but a directive and for updates to \'fail fast\' if there is (temporarily or otherwise) no shard leader. Fail fast (and let the caller of the  CloudSolrClient  handle alarming and retries as it sees fit) as opposed to sending or retry-sending to a non-leader which would then forward to the leader (and potentially still fail eventually, eventually\\/not-fast-slowly).  \\n\\n As far as the \\n\\n  ... In which case our tests should not set this flag and use the default behaviour ...  \\n\\n alternative is concerned, hmm, i\'m not sure, wouldn\'t that reduce test coverage in general, though yes perhaps for very specific tests a test could opt-out of randomising the value of the flag. \\n\\n ticket cross-reference:   SOLR-11507   concerns flag randomisation in the test CloudSolrClient -  David Smiley  and  Jason Gerlowski  any thoughts on this? \\n\\n (I should also mention that the  directUpdatesToLeadersOnly  flag\'s addition predates the new replica types and I haven\'t yet considered if\\/how that might change the meaning of the flag.)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16238569\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16238569&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16238569\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16238569_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16238569_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Nov\\/17 23:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-11-03T23:24:28+0000\'\u003e03\\/Nov\\/17 23:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere are two possibilities\u003cbr\\/\u003e\\n1) the state.json had no leader\u003cbr\\/\u003e\\n2) there is no leader at all\u003c\\/p\u003e\\n\\n\u003cp\u003eMost often it\'s because of #1. In case of #1 it\'s better to try a random node than fail fast\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"noble.paul\\\" id=\\\"commentauthor_16238569_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=noble.paul\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"noble.paul\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Noble Paul\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16238569_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Nov\\/17 23:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-11-03T23:24:28+0000\'\u003e03\\/Nov\\/17 23:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    There are two possibilities \\n1) the state.json had no leader \\n2) there is no leader at all \\n\\n Most often it\'s because of #1. In case of #1 it\'s better to try a random node than fail fast              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16248775\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16248775&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16248775\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"steve_rowe\\\" id=\\\"commentauthor_16248775_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=steve_rowe\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"steve_rowe\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Steve Rowe\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16248775_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/17 03:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-11-12T03:50:26+0000\'\u003e12\\/Nov\\/17 03:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReproducing failure of a test added on this issue, from \u003ca href=\\\"https:\\/\\/jenkins.thetaphi.de\\/job\\/Lucene-Solr-7.x-MacOSX\\/302\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/jenkins.thetaphi.de\\/job\\/Lucene-Solr-7.x-MacOSX\\/302\\/\u003c\\/a\u003e (reproduces for me on master branch on Linux):\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003eChecking out Revision 6b5fbd3265e6819469e1b70a68908767fc14dd87 (refs\\/remotes\\/origin\\/branch_7x)\\r\\n[...]\\r\\n   [junit4]   2&gt; NOTE: reproduce with: ant test  -Dtestcase=CloudSolrClientTest -Dtests.method=testRetryUpdatesWhenClusterStateIsStale -Dtests.seed=3D8409F14A788F1 -Dtests.slow=true -Dtests.locale=fr-BL -Dtests.timezone=MET -Dtests.asserts=true -Dtests.file.encoding=UTF-8\\r\\n   [junit4] ERROR   5.59s J1 | CloudSolrClientTest.testRetryUpdatesWhenClusterStateIsStale &lt;&lt;&lt;\\r\\n   [junit4]    &gt; Throwable #1: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http:\\/\\/127.0.0.1:65235\\/solr\\/stale_state_test_col_shard1_replica_n1: Expected mime type application\\/octet-stream but got text\\/html. &lt;html&gt;\\r\\n   [junit4]    &gt; &lt;head&gt;\\r\\n   [junit4]    &gt; &lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text\\/html;charset=ISO-8859-1\\\"\\/&gt;\\r\\n   [junit4]    &gt; &lt;title&gt;Error 404 &lt;\\/title&gt;\\r\\n   [junit4]    &gt; &lt;\\/head&gt;\\r\\n   [junit4]    &gt; &lt;body&gt;\\r\\n   [junit4]    &gt; &lt;h2&gt;HTTP ERROR: 404&lt;\\/h2&gt;\\r\\n   [junit4]    &gt; &lt;p&gt;Problem accessing \\/solr\\/stale_state_test_col_shard1_replica_n1\\/update. Reason:\\r\\n   [junit4]    &gt; &lt;pre&gt;    Can not find: \\/solr\\/stale_state_test_col_shard1_replica_n1\\/update&lt;\\/pre&gt;&lt;\\/p&gt;\\r\\n   [junit4]    &gt; &lt;hr \\/&gt;&lt;a href=\\\"http:\\/\\/eclipse.org\\/jetty\\\"&gt;Powered by Jetty:\\/\\/ 9.3.20.v20170531&lt;\\/a&gt;&lt;hr\\/&gt;\\r\\n   [junit4]    &gt; &lt;\\/body&gt;\\r\\n   [junit4]    &gt; &lt;\\/html&gt;\\r\\n   [junit4]    &gt; \\tat __randomizedtesting.SeedInfo.seed([3D8409F14A788F1:B7E9D877F74EFEDD]:0)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:607)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:483)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:413)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:559)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1016)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:883)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:816)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:233)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClientTest.testRetryUpdatesWhenClusterStateIsStale(CloudSolrClientTest.java:844)\\r\\n   [junit4]    &gt; \\tat java.base\\/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\\r\\n   [junit4]    &gt; \\tat java.base\\/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\\r\\n   [junit4]    &gt; \\tat java.base\\/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\\r\\n   [junit4]    &gt; \\tat java.base\\/java.lang.reflect.Method.invoke(Method.java:564)\\r\\n   [junit4]    &gt; \\tat java.base\\/java.lang.Thread.run(Thread.java:844)\\r\\n[...]\\r\\n   [junit4]   2&gt; NOTE: test params are: codec=CheapBastard, sim=RandomSimilarity(queryNorm=false): {}, locale=fr-BL, timezone=MET\\r\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"steve_rowe\\\" id=\\\"commentauthor_16248775_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=steve_rowe\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"steve_rowe\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Steve Rowe\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16248775_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/17 03:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-11-12T03:50:26+0000\'\u003e12\\/Nov\\/17 03:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reproducing failure of a test added on this issue, from  https:\\/\\/jenkins.thetaphi.de\\/job\\/Lucene-Solr-7.x-MacOSX\\/302\\/  (reproduces for me on master branch on Linux): \\n\\n  \\n Checking out Revision 6b5fbd3265e6819469e1b70a68908767fc14dd87 (refs\\/remotes\\/origin\\/branch_7x)\\r\\n[...]\\r\\n   [junit4]   2&gt; NOTE: reproduce with: ant test  -Dtestcase=CloudSolrClientTest -Dtests.method=testRetryUpdatesWhenClusterStateIsStale -Dtests.seed=3D8409F14A788F1 -Dtests.slow=true -Dtests.locale=fr-BL -Dtests.timezone=MET -Dtests.asserts=true -Dtests.file.encoding=UTF-8\\r\\n   [junit4] ERROR   5.59s J1 | CloudSolrClientTest.testRetryUpdatesWhenClusterStateIsStale &lt;&lt;&lt;\\r\\n   [junit4]    &gt; Throwable #1: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http:\\/\\/127.0.0.1:65235\\/solr\\/stale_state_test_col_shard1_replica_n1: Expected mime type application\\/octet-stream but got text\\/html. &lt;html&gt;\\r\\n   [junit4]    &gt; &lt;head&gt;\\r\\n   [junit4]    &gt; &lt;meta http-equiv=\\\"Content-Type\\\" content=\\\"text\\/html;charset=ISO-8859-1\\\"\\/&gt;\\r\\n   [junit4]    &gt; &lt;title&gt;Error 404 &lt;\\/title&gt;\\r\\n   [junit4]    &gt; &lt;\\/head&gt;\\r\\n   [junit4]    &gt; &lt;body&gt;\\r\\n   [junit4]    &gt; &lt;h2&gt;HTTP ERROR: 404&lt;\\/h2&gt;\\r\\n   [junit4]    &gt; &lt;p&gt;Problem accessing \\/solr\\/stale_state_test_col_shard1_replica_n1\\/update. Reason:\\r\\n   [junit4]    &gt; &lt;pre&gt;    Can not find: \\/solr\\/stale_state_test_col_shard1_replica_n1\\/update&lt;\\/pre&gt;&lt;\\/p&gt;\\r\\n   [junit4]    &gt; &lt;hr \\/&gt;&lt;a href=\\\"http:\\/\\/eclipse.org\\/jetty\\\"&gt;Powered by Jetty:\\/\\/ 9.3.20.v20170531&lt;\\/a&gt;&lt;hr\\/&gt;\\r\\n   [junit4]    &gt; &lt;\\/body&gt;\\r\\n   [junit4]    &gt; &lt;\\/html&gt;\\r\\n   [junit4]    &gt; \\tat __randomizedtesting.SeedInfo.seed([3D8409F14A788F1:B7E9D877F74EFEDD]:0)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:607)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:255)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:244)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:483)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:413)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:559)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1016)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:883)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:816)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:194)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.request.UpdateRequest.commit(UpdateRequest.java:233)\\r\\n   [junit4]    &gt; \\tat org.apache.solr.client.solrj.impl.CloudSolrClientTest.testRetryUpdatesWhenClusterStateIsStale(CloudSolrClientTest.java:844)\\r\\n   [junit4]    &gt; \\tat java.base\\/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\\r\\n   [junit4]    &gt; \\tat java.base\\/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\\r\\n   [junit4]    &gt; \\tat java.base\\/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\\r\\n   [junit4]    &gt; \\tat java.base\\/java.lang.reflect.Method.invoke(Method.java:564)\\r\\n   [junit4]    &gt; \\tat java.base\\/java.lang.Thread.run(Thread.java:844)\\r\\n[...]\\r\\n   [junit4]   2&gt; NOTE: test params are: codec=CheapBastard, sim=RandomSimilarity(queryNorm=false): {}, locale=fr-BL, timezone=MET\\r\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16307051\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-11484?focusedCommentId=16307051&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16307051\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_16307051_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16307051_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/17 03:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-12-31T03:09:46+0000\'\u003e31\\/Dec\\/17 03:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user SerCeMan commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/264\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/264\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    Closing as this might be fixed by \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-11484\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-11484\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_16307051_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16307051_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Dec\\/17 03:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-12-31T03:09:46+0000\'\u003e31\\/Dec\\/17 03:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user SerCeMan commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/264  \\n\\n     Closing as this might be fixed by  https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-11484               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310230";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310230&amp;avatarId=22151\\\" alt=\\\"Solr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\"\u003eSolr\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520343369966"> 
    <input type="hidden" title="jira.request.server.time" value="151"> 
    <input type="hidden" title="jira.request.id" value="816x97555098x7"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="7"> 
    <input type="hidden" title="db.reads.time.in.ms" value="48"> 
    <input type="hidden" title="db.conns.time.in.ms" value="53"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 816x97555098x7
	          REQUEST TIMESTAMP : [06/Mar/2018:13:36:09 +0000]
	               REQUEST TIME : 0.1510
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 7

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=39, elapsedTotal=48258832, elapsedMin=428801, elapsedMax=16257405, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=43, elapsedTotal=53284098, elapsedMin=445454, elapsedMax=16298185, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>