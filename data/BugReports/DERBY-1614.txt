<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|21033f6e63403d17b29a70160f3d40377e91840a|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"ae1303f03c6185\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-1614"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-1614] Test harness overrides heap size settings when starting Network Server - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-1614] Test harness overrides heap size settings when starting Network Server - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-1614">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-1614" href="/jira/browse/DERBY-1614" id="key-val" rel="12346946">DERBY-1614</a></li>
                </ol>
                <h1 id="summary-val">Test harness overrides heap size settings when starting Network Server</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-1614"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-1614/DERBY-1614.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-1614/DERBY-1614.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-1614/DERBY-1614.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-1614/DERBY-1614.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.2.1.6 ">10.2.1.6</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.2.1.6" title="10.2.1.6 ">10.2.1.6</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+Test" title="Test ">Test</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12346946-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value">
                     Test frameworks DerbyNet and DerbyNetClient 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310050" class="item"> 
                     <div class="wrap"> 
                      <strong title="Urgency" class="name">Urgency:</strong> 
                      <div id="customfield_12310050-val" class="value type-select" data-fieldtype="select" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        Urgent 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Test specific heap size settings can be passed to the test harness using the jvmflags system property, for example in a &lt;testname&gt;_app.properties file or at the command line when starting a test, e.g "-Djvmflags=-Xms32m^-Xmx32m".</p> 
                  <p>The test harness almost always overrides such settings when starting a new Network Server using the org.apache.derbyTesting.functionTests.harness.NetServer class of the test harness. Currently, if <em>either</em> -ms <em>or</em> -Xms is missing from the jvmflags, NetServer.start() adds -ms16777216. Also, if <em>either</em> -mx <em>or</em> -Xmx is missing from the jvmflags, NetServer.start() adds -ms33554432. This has been the case since SVN revision 420048 (July 8, 2006).</p> 
                  <p>Earlier revisions did not override the heap settings unless the newer -Xms or -Xmx flags were used instead of the -ms and -mx flags. A patch for <a href="https://issues.apache.org/jira/browse/DERBY-1091" title="Test harness does not pass jvm flags properly if there are more than 1 property in jvm flags" class="issue-link" data-issue-key="DERBY-1091"><del>DERBY-1091</del></a> attempted (among other things) to make the harness recognize the newer flags as well as the older flags, but the resulting behavior is (most likely) not as intended. </p> 
                  <p>If a test is run in either the DerbyNet framework or the DerbyNetClient framework, the test-specific JVM flags should (probably) be used for the Network Server JVM as well as the test JVM. Currently, even if non-default heap size flags are passed to the harness, the server JVM will ignore these settings since the harness adds -ms and/or -mx flags <em>after</em> all other heap flags. The exception is if both new and old versions of heap flags are passed to the harness, e.g:</p> 
                  <p>jvmflags=-ms32m^-Xms32m^-mx128m^-Xmx128m</p> 
                  <p>Here is the code causing this behaviour:</p> 
                  <p>if (setJvmFlags &amp;&amp; ((jvmflags.indexOf("-ms") == -1) || (jvmflags.indexOf("-Xms") == -1)))<br> // only setMs if no starting memory was given<br> jvm.setMs(16*1024*1024); // -ms16m<br> if (setJvmFlags &amp;&amp; ((jvmflags.indexOf("-mx") == -1) || (jvmflags.indexOf("-Xmx") == -1)))<br> // only setMx if no max memory was given<br> jvm.setMx(32*1024*1024); // -mx32m</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-1614?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-1614?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-1614?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-1614?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12337993" data-issue-id="12346946" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12337993/DERBY-1614_v1.diff" draggable="true" data-downloadurl="text/plain:DERBY-1614_v1.diff:https://issues.apache.org/jira/secure/attachment/12337993/DERBY-1614_v1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12337993/DERBY-1614_v1.diff" title="Latest  02/Aug/06 12:03 - John H. Embretsen" draggable="true" data-downloadurl="text/plain:DERBY-1614_v1.diff:https://issues.apache.org/jira/secure/attachment/12337993/DERBY-1614_v1.diff">DERBY-1614_v1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-08-02T12:03:27.000Z">02/Aug/06 12:03</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    John H. Embretsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12338054" data-issue-id="12346946" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12338054/DERBY-1614_v2.diff" draggable="true" data-downloadurl="text/plain:DERBY-1614_v2.diff:https://issues.apache.org/jira/secure/attachment/12338054/DERBY-1614_v2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12338054/DERBY-1614_v2.diff" title="Latest  03/Aug/06 10:55 - John H. Embretsen" draggable="true" data-downloadurl="text/plain:DERBY-1614_v2.diff:https://issues.apache.org/jira/secure/attachment/12338054/DERBY-1614_v2.diff">DERBY-1614_v2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-08-03T10:55:00.000Z">03/Aug/06 10:55</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    John H. Embretsen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12338189" data-issue-id="12346946" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12338189/DERBY-1614_v3.diff" draggable="true" data-downloadurl="application/octet-stream:DERBY-1614_v3.diff:https://issues.apache.org/jira/secure/attachment/12338189/DERBY-1614_v3.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12338189/DERBY-1614_v3.diff" title="Latest  04/Aug/06 21:50 - John H. Embretsen" draggable="true" data-downloadurl="application/octet-stream:DERBY-1614_v3.diff:https://issues.apache.org/jira/secure/attachment/12338189/DERBY-1614_v3.diff">DERBY-1614_v3.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-08-04T21:50:25.000Z">04/Aug/06 21:50</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    John H. Embretsen
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12330003_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-1091: Test harness does not pass jvm flags properly if there are more than 1 property in jvm flags"> <a href="/jira/browse/DERBY-1091" data-issue-key="DERBY-1091" class="issue-link link-title resolution">DERBY-1091</a> <span class="link-summary">Test harness does not pass jvm flags properly if there are more than 1 property in jvm flags</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_johnemb" rel="johnemb" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;John H. Embretsen&quot;,&quot;emailAddress&quot;:&quot;johnemb@gmail.com&quot;,&quot;username&quot;:&quot;johnemb&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="johnemb"></span></span> John H. Embretsen </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_johnemb" rel="johnemb" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;John H. Embretsen&quot;,&quot;emailAddress&quot;:&quot;johnemb@gmail.com&quot;,&quot;username&quot;:&quot;johnemb&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="johnemb"></span></span> John H. Embretsen </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Due:
                   </dt> 
                   <dd class="date " title="09/Aug/06"> 
                    <span data-name="Due" id="due-date" data-fieldtype="datepicker"> <time datetime="2006-08-09">09/Aug/06</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="31/Jul/06 12:46"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-07-31T12:46:25+0000">31/Jul/06 12:46</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="08/Aug/06 11:07"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-08-08T11:07:44+0000">08/Aug/06 11:07</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="08/Aug/06 03:16"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-08-08T03:16:35+0000">08/Aug/06 03:16</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-1614?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-1614?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12424534\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12424534&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12424534\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12424534_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424534_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jul\\/06 13:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-07-31T13:19:01+0000\'\u003e31\\/Jul\\/06 13:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eExample impact of this bug:\u003c\\/p\u003e\\n\\n\u003cp\u003eThe \'wisconsin_app.properties\' file includes the following:\u003c\\/p\u003e\\n\\n\u003col\u003e\\n\\t\u003cli\u003eflags specific to this test: it runs out of memory on jdk118 sometimes\u003c\\/li\u003e\\n\\t\u003cli\u003eso give the JVM more memory always:\u003cbr\\/\u003e\\njvmflags=-ms32M^-mx128M\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003cp\u003eRunning the lang\\/wisconsin.java test with default heap size results in the flags from the wisconsin_app.properties file being overridden by the test harness:\u003c\\/p\u003e\\n\\n\u003cp\u003e$ java -Dverbose=true -Dframework=DerbyNet org.apache.derbyTesting.functionTests.harness.RunTest lang\\/wisconsin.java\u003c\\/p\u003e\\n\\n\u003cp\u003eOutput:\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; listing properties &#8211;\u003cbr\\/\u003e\\nderby.debug.true=\u003cbr\\/\u003e\\nderby.storage.checkpointInterval=100000\u003cbr\\/\u003e\\nderby.optimizer.noTimeout=true\u003cbr\\/\u003e\\nderby.language.preloadClasses=true\u003cbr\\/\u003e\\nconsole.encoding:null file.encoding:ISO8859-1 derby.ui.codeset: null\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eStart: wisconsin jdk1.5.0_06 DerbyNet 2006-07-27 13:35:41 ***\u003cbr\\/\u003e\\nInitialize for framework: DerbyNet\u003cbr\\/\u003e\\njava -ms32M -mx128M -ms16777216 -mx33554432 \u003cspan class=\\\"error\\\"\u003e&#91;SNIP various system properties&#93;\u003c\\/span\u003e org.apache.derby.drda.NetworkServerControl start\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;SNIP rest of output&#93;\u003c\\/span\u003e\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003eThe Network Server JVM pics up the last value for each heap setting (-ms and -Xms set the initial (minimum) heap size. -mx and -Xmx set the maximum heap size). This was (partly) verified by running the jmap tool (part of Sun\'s JDK 1.5 or newer) with the \\\"-heap\\\" option against the server JVM and looking for \\\"MaxHeapSize\\\", which was 32 MB, not 128 MB.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt is likely that during 10.2.0.4 snapshot testing (more precisely: All testing on trunk since July 8, 2006), tests using non-default heap size flags in DerbyNet or DerbyNetClient frameworks were run with different server heap sizes than previous testing.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12424534_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424534_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jul\\/06 13:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-07-31T13:19:01+0000\'\u003e31\\/Jul\\/06 13:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Example impact of this bug: \\n\\n The \'wisconsin_app.properties\' file includes the following: \\n\\n \\n\\t flags specific to this test: it runs out of memory on jdk118 sometimes \\n\\t so give the JVM more memory always: \\njvmflags=-ms32M^-mx128M \\n \\n\\n\\n Running the lang\\/wisconsin.java test with default heap size results in the flags from the wisconsin_app.properties file being overridden by the test harness: \\n\\n $ java -Dverbose=true -Dframework=DerbyNet org.apache.derbyTesting.functionTests.harness.RunTest lang\\/wisconsin.java \\n\\n Output: \\n\\n &#8211; listing properties &#8211; \\nderby.debug.true= \\nderby.storage.checkpointInterval=100000 \\nderby.optimizer.noTimeout=true \\nderby.language.preloadClasses=true \\nconsole.encoding:null file.encoding:ISO8859-1 derby.ui.codeset: null \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t Start: wisconsin jdk1.5.0_06 DerbyNet 2006-07-27 13:35:41 *** \\nInitialize for framework: DerbyNet \\njava -ms32M -mx128M -ms16777216 -mx33554432  &#91;SNIP various system properties&#93;  org.apache.derby.drda.NetworkServerControl start \\n &#91;SNIP rest of output&#93;  \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n\\n The Network Server JVM pics up the last value for each heap setting (-ms and -Xms set the initial (minimum) heap size. -mx and -Xmx set the maximum heap size). This was (partly) verified by running the jmap tool (part of Sun\'s JDK 1.5 or newer) with the \\\"-heap\\\" option against the server JVM and looking for \\\"MaxHeapSize\\\", which was 32 MB, not 128 MB. \\n\\n It is likely that during 10.2.0.4 snapshot testing (more precisely: All testing on trunk since July 8, 2006), tests using non-default heap size flags in DerbyNet or DerbyNetClient frameworks were run with different server heap sizes than previous testing.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12424539\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12424539&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12424539\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12424539_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424539_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jul\\/06 13:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-07-31T13:28:15+0000\'\u003e31\\/Jul\\/06 13:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis issue is related to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1091\\\" title=\\\"Test harness does not pass jvm flags properly if there are more than 1 property in jvm flags\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1091\\\"\u003e\u003cdel\u003eDERBY-1091\u003c\\/del\u003e\u003c\\/a\u003e since flags specifying initial and maximum heap sizes are part of the jvmflags property in the test harness. Proper parsing of jvmflags is essential for this functionality (setting Network Server heap size values during testing) to work as intended.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12424539_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12424539_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jul\\/06 13:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-07-31T13:28:15+0000\'\u003e31\\/Jul\\/06 13:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This issue is related to   DERBY-1091   since flags specifying initial and maximum heap sizes are part of the jvmflags property in the test harness. Proper parsing of jvmflags is essential for this functionality (setting Network Server heap size values during testing) to work as intended.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425207\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425207&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425207\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425207_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425207_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 12:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T12:03:27+0000\'\u003e02\\/Aug\\/06 12:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttatching patch \'\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e_v1.diff\', which fixes the following issues:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eharness\\/NetServer.java: Changes harness behaviour so that no heap settings for the Network Server are set if either initial or max heap size has already been set in the jvmflags argument of the NetServer constructor. Prior to this change, the harness would override heap size settings from the command line or test property files unless both old heap flags (-ms or -mx) AND \\\"new\\\" heap flags (-Xms or -Xmx) had been set. The harness would also treat initial and max sizes independently, which caused incompatibilities in some situations (see \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1564\\\" title=\\\"wisconsin.java test failed in DerbyNet or DerbyNetClient frameworks, VM for network server got OutOfMemoryError\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1564\\\"\u003e\u003cdel\u003eDERBY-1564\u003c\\/del\u003e\u003c\\/a\u003e).\u003c\\/li\u003e\\n\\t\u003cli\u003eBehavior has \u003cb\u003enot\u003c\\/b\u003e changed in scenarios where jvmflags (when passed to NetServer) is null or empty, in which case no extra flags are added.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003etesting\\/README.htm:\u003c\\/li\u003e\\n\\t\u003cli\u003efixed small bug in jvmflags example (missing \'-\' in front of first flag).\u003c\\/li\u003e\\n\\t\u003cli\u003echanged jvmflags example from using -ms and -mx to using -Xms and -Xmx, since the latter flags are documented non-standard jvm options, while the former flags are deprecated (at least in Sun\'s current Java launchers...), and we are just lucky that they still work.\u003c\\/li\u003e\\n\\t\u003cli\u003eadded comment about possible consequences of setting only initial or only max heap size using jvmflags.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003esvn stat:\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/testing\\/README.htm\u003cbr\\/\u003e\\nM      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/harness\\/NetServer.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch has been tested with individual test runs of lang\\/wisconsin.java and lang\\/forupdate.java. Derbyall is still running at the time of writing this...\u003c\\/p\u003e\\n\\n\u003cp\u003ePlease review this patch.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eOther patch comments:\u003cbr\\/\u003e\\n------------------------------------------\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eIf only initial or only max heap size is set using the jvmflags harness property, no extra flags will be added by NetServer. This reduces the risk of incompatibilities between initial and max values, but it is still possible (which is also the case with any other Java application). For Sun\'s HotSpot JVM version 1.5, the default initial heap size is 2 MB, and the default max heap size is 64 MB \u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e. Hence:\u003c\\/li\u003e\\n\\t\u003cli\u003eif jvmflags specifies a max value that is smaller than 2 MB\u003cbr\\/\u003e\\n     (or whatever is the default for a particular JVM), without also \u003cbr\\/\u003e\\n     setting an initial heap size, or\u003c\\/li\u003e\\n\\t\u003cli\u003eif jvmflags specifies an initial value that is larger than the\u003cbr\\/\u003e\\n     default max heap size for a particular JVM (e.g. 64 MB),\u003cbr\\/\u003e\\n     without also setting a max heap size,\u003c\\/li\u003e\\n\\t\u003cli\u003ethe Java launcher will fail with the message like this:\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e&gt; Error occurred during initialization of VM\u003cbr\\/\u003e\\n&gt; Incompatible initial and maximum heap sizes specified\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eCurrent behavior depends on the JVM behavior described in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1091\\\" title=\\\"Test harness does not pass jvm flags properly if there are more than 1 property in jvm flags\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1091\\\"\u003e\u003cdel\u003eDERBY-1091\u003c\\/del\u003e\u003c\\/a\u003e. Specifically, this means that as long as all test JVMs use the \u003cem\u003elast\u003c\\/em\u003e value of each heap setting if multiple values are specified, and old and new versions of heap flags are treated equally, we are all good.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eI was tempted to remove the following line in NetServer.java (but didn\'t):\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e     jvm.setNoasyncgc(true); \\/\\/ -noasyncgc\u003c\\/p\u003e\\n\\n\u003cp\u003e  since no JVM that I know of supports the -noasyncgc option anymore. The last HotSpot VM where that option was supported was supposedly version 1.1 \u003cspan class=\\\"error\\\"\u003e&#91;2&#93;\u003c\\/span\u003e. Besides, I do not see any reason why we would want to turn of dynamic garbage collection for the server when running tests. Anyway, I\'ll let it be, since most jdk* classes in the harness ignore the setting anyway.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e \u003ca href=\\\"http:\\/\\/java.sun.com\\/j2se\\/1.5.0\\/docs\\/tooldocs\\/solaris\\/java.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/java.sun.com\\/j2se\\/1.5.0\\/docs\\/tooldocs\\/solaris\\/java.html\u003c\\/a\u003e and\u003cbr\\/\u003e\\n      \u003ca href=\\\"http:\\/\\/java.sun.com\\/j2se\\/1.5.0\\/docs\\/tooldocs\\/windows\\/java.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/java.sun.com\\/j2se\\/1.5.0\\/docs\\/tooldocs\\/windows\\/java.html\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;2&#93;\u003c\\/span\u003e \u003ca href=\\\"http:\\/\\/forums.java.net\\/jive\\/thread.jspa?threadID=16315&amp;tstart=0\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/forums.java.net\\/jive\\/thread.jspa?threadID=16315&amp;tstart=0\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425207_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425207_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 12:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T12:03:27+0000\'\u003e02\\/Aug\\/06 12:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attatching patch \'  DERBY-1614  _v1.diff\', which fixes the following issues: \\n\\n \\n\\t harness\\/NetServer.java: Changes harness behaviour so that no heap settings for the Network Server are set if either initial or max heap size has already been set in the jvmflags argument of the NetServer constructor. Prior to this change, the harness would override heap size settings from the command line or test property files unless both old heap flags (-ms or -mx) AND \\\"new\\\" heap flags (-Xms or -Xmx) had been set. The harness would also treat initial and max sizes independently, which caused incompatibilities in some situations (see   DERBY-1564  ). \\n\\t Behavior has  not  changed in scenarios where jvmflags (when passed to NetServer) is null or empty, in which case no extra flags are added. \\n \\n\\n\\n \\n\\t testing\\/README.htm: \\n\\t fixed small bug in jvmflags example (missing \'-\' in front of first flag). \\n\\t changed jvmflags example from using -ms and -mx to using -Xms and -Xmx, since the latter flags are documented non-standard jvm options, while the former flags are deprecated (at least in Sun\'s current Java launchers...), and we are just lucky that they still work. \\n\\t added comment about possible consequences of setting only initial or only max heap size using jvmflags. \\n \\n\\n\\n\\n svn stat: \\n\\n M      java\\/testing\\/README.htm \\nM      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/harness\\/NetServer.java \\n\\n The patch has been tested with individual test runs of lang\\/wisconsin.java and lang\\/forupdate.java. Derbyall is still running at the time of writing this... \\n\\n Please review this patch. \\n\\n\\n Other patch comments: \\n------------------------------------------ \\n\\n \\n\\t If only initial or only max heap size is set using the jvmflags harness property, no extra flags will be added by NetServer. This reduces the risk of incompatibilities between initial and max values, but it is still possible (which is also the case with any other Java application). For Sun\'s HotSpot JVM version 1.5, the default initial heap size is 2 MB, and the default max heap size is 64 MB  &#91;1&#93; . Hence: \\n\\t if jvmflags specifies a max value that is smaller than 2 MB \\n     (or whatever is the default for a particular JVM), without also  \\n     setting an initial heap size, or \\n\\t if jvmflags specifies an initial value that is larger than the \\n     default max heap size for a particular JVM (e.g. 64 MB), \\n     without also setting a max heap size, \\n\\t the Java launcher will fail with the message like this: \\n \\n\\n\\n &gt; Error occurred during initialization of VM \\n&gt; Incompatible initial and maximum heap sizes specified \\n\\n \\n\\t Current behavior depends on the JVM behavior described in   DERBY-1091  . Specifically, this means that as long as all test JVMs use the  last  value of each heap setting if multiple values are specified, and old and new versions of heap flags are treated equally, we are all good. \\n \\n\\n\\n \\n\\t I was tempted to remove the following line in NetServer.java (but didn\'t): \\n \\n\\n\\n      jvm.setNoasyncgc(true); \\/\\/ -noasyncgc \\n\\n   since no JVM that I know of supports the -noasyncgc option anymore. The last HotSpot VM where that option was supported was supposedly version 1.1  &#91;2&#93; . Besides, I do not see any reason why we would want to turn of dynamic garbage collection for the server when running tests. Anyway, I\'ll let it be, since most jdk* classes in the harness ignore the setting anyway. \\n\\n\\n  &#91;1&#93;   http:\\/\\/java.sun.com\\/j2se\\/1.5.0\\/docs\\/tooldocs\\/solaris\\/java.html  and \\n       http:\\/\\/java.sun.com\\/j2se\\/1.5.0\\/docs\\/tooldocs\\/windows\\/java.html  \\n\\n  &#91;2&#93;   http:\\/\\/forums.java.net\\/jive\\/thread.jspa?threadID=16315&amp;tstart=0               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425214\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425214&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425214\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425214_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425214_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 12:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T12:25:57+0000\'\u003e02\\/Aug\\/06 12:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is an illustration of how the NetServer class handles heap size settings when \'\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e_v1.diff\' is applied:\u003c\\/p\u003e\\n\\n\u003cp\u003eInput = the value of jvmflags when passed to NetServer\u003cbr\\/\u003e\\nOutput = heap flags set when starting the Network Server via NetServer\u003cbr\\/\u003e\\nOld = 10.1.* and trunk SVN 420047 and earlier\u003cbr\\/\u003e\\nCurrent = current trunk, i.e. SVN 420048 and later\u003cbr\\/\u003e\\nNew = current trunk if the above mentioned patch is applied\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eInput:            -ms11m -mx12m\u003cbr\\/\u003e\\nOld output:       -ms11m -mx12m\u003cbr\\/\u003e\\nCurrent output:   -ms11m -mx12m -ms16777216 -mx33554432\u003cbr\\/\u003e\\nNew output:       -ms11m -mx12m\u003c\\/p\u003e\\n\\n\u003cp\u003eInput:            -Xms11m -Xmx12m\u003cbr\\/\u003e\\nOld output:       -Xms11m -Xmx12m -ms16777216 -mx33554432\u003cbr\\/\u003e\\nCurrent output:   -Xms11m -Xmx12m -ms16777216 -mx33554432\u003cbr\\/\u003e\\nNew output:       -Xms11m -Xmx12m\u003c\\/p\u003e\\n\\n\u003cp\u003eInput:            -ms11m\u003cbr\\/\u003e\\nOld output:       -ms11m -mx33554432\u003cbr\\/\u003e\\nCurrent output:   -ms11m -ms16777216 -mx33554432\u003cbr\\/\u003e\\nNew output:       -ms11m\u003c\\/p\u003e\\n\\n\u003cp\u003eInput:            -mx12m\u003cbr\\/\u003e\\nOld output:       -mx12m -ms16777216\u003cbr\\/\u003e\\nCurrent output:   -mx12m -ms16777216 -mx33554432\u003cbr\\/\u003e\\nNew output:       -mx12m\u003c\\/p\u003e\\n\\n\u003cp\u003eInput:            -Xms11m\u003cbr\\/\u003e\\nOld output:       -Xms11m -ms16777216 -mx33554432\u003cbr\\/\u003e\\nCurrent output:   -Xms11m -ms16777216 -mx33554432\u003cbr\\/\u003e\\nNew output:       -Xms11m\u003c\\/p\u003e\\n\\n\u003cp\u003eInput:            -Xmx12m\u003cbr\\/\u003e\\nOld output:       -Xmx12m -ms16777216 -mx33554432\u003cbr\\/\u003e\\nCurrent output:   -Xmx12m -ms16777216 -mx33554432\u003cbr\\/\u003e\\nNew output:       -Xmx12m\u003c\\/p\u003e\\n\\n\u003cp\u003eInput:            -ms11m -Xms12m -mx11m -Xmx12m\u003cbr\\/\u003e\\nOld output:       -ms11m -Xms12m -mx11m -Xmx12m\u003cbr\\/\u003e\\nCurrent output:   -ms11m -Xms12m -mx11m -Xmx12m\u003cbr\\/\u003e\\nNew output:       -ms11m -Xms12m -mx11m -Xmx12m\u003c\\/p\u003e\\n\\n\u003cp\u003eInput:            null or \\\"\\\"\u003cbr\\/\u003e\\nOld output:       \u003cbr\\/\u003e\\nCurrent output:   \u003cbr\\/\u003e\\nNew output:       \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425214_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425214_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 12:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T12:25:57+0000\'\u003e02\\/Aug\\/06 12:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here is an illustration of how the NetServer class handles heap size settings when \'  DERBY-1614  _v1.diff\' is applied: \\n\\n Input = the value of jvmflags when passed to NetServer \\nOutput = heap flags set when starting the Network Server via NetServer \\nOld = 10.1.* and trunk SVN 420047 and earlier \\nCurrent = current trunk, i.e. SVN 420048 and later \\nNew = current trunk if the above mentioned patch is applied \\n\\n\\n Input:            -ms11m -mx12m \\nOld output:       -ms11m -mx12m \\nCurrent output:   -ms11m -mx12m -ms16777216 -mx33554432 \\nNew output:       -ms11m -mx12m \\n\\n Input:            -Xms11m -Xmx12m \\nOld output:       -Xms11m -Xmx12m -ms16777216 -mx33554432 \\nCurrent output:   -Xms11m -Xmx12m -ms16777216 -mx33554432 \\nNew output:       -Xms11m -Xmx12m \\n\\n Input:            -ms11m \\nOld output:       -ms11m -mx33554432 \\nCurrent output:   -ms11m -ms16777216 -mx33554432 \\nNew output:       -ms11m \\n\\n Input:            -mx12m \\nOld output:       -mx12m -ms16777216 \\nCurrent output:   -mx12m -ms16777216 -mx33554432 \\nNew output:       -mx12m \\n\\n Input:            -Xms11m \\nOld output:       -Xms11m -ms16777216 -mx33554432 \\nCurrent output:   -Xms11m -ms16777216 -mx33554432 \\nNew output:       -Xms11m \\n\\n Input:            -Xmx12m \\nOld output:       -Xmx12m -ms16777216 -mx33554432 \\nCurrent output:   -Xmx12m -ms16777216 -mx33554432 \\nNew output:       -Xmx12m \\n\\n Input:            -ms11m -Xms12m -mx11m -Xmx12m \\nOld output:       -ms11m -Xms12m -mx11m -Xmx12m \\nCurrent output:   -ms11m -Xms12m -mx11m -Xmx12m \\nNew output:       -ms11m -Xms12m -mx11m -Xmx12m \\n\\n Input:            null or \\\"\\\" \\nOld output:        \\nCurrent output:    \\nNew output:        \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425391\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425391&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425391\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12425391_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425391_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 22:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T22:14:49+0000\'\u003e02\\/Aug\\/06 22:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI reviewed the patch, and the testing described. (Did not do any testing myself).\u003c\\/p\u003e\\n\\n\u003cp\u003eI think this section of code originally just meant to ensure networkserver had enough juice to get going with.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf I summarize correctly, this patch, apart from fixing up the flawed logic of my change in this area for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1091\\\" title=\\\"Test harness does not pass jvm flags properly if there are more than 1 property in jvm flags\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1091\\\"\u003e\u003cdel\u003eDERBY-1091\u003c\\/del\u003e\u003c\\/a\u003e, implements code to not interfere with the heap settings whenever it looks like specific settings in either ms or mx are passed in. I think this is a good improvement.\u003c\\/p\u003e\\n\\n\u003cp\u003eOnce derbyall results are in I think this can be committed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12425391_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425391_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 22:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T22:14:49+0000\'\u003e02\\/Aug\\/06 22:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I reviewed the patch, and the testing described. (Did not do any testing myself). \\n\\n I think this section of code originally just meant to ensure networkserver had enough juice to get going with. \\n\\n If I summarize correctly, this patch, apart from fixing up the flawed logic of my change in this area for   DERBY-1091  , implements code to not interfere with the heap settings whenever it looks like specific settings in either ms or mx are passed in. I think this is a good improvement. \\n\\n Once derbyall results are in I think this can be committed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425396\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425396&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425396\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12425396_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425396_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 23:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T23:07:30+0000\'\u003e02\\/Aug\\/06 23:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis looks good to me as well. My only comment is that the !jvmName.equals(\\\"jview\\\") can be removed. I don\'t think we need to be worrying about whether or not the test harness runs with jview anymore. \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12425396_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425396_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Aug\\/06 23:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-02T23:07:30+0000\'\u003e02\\/Aug\\/06 23:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This looks good to me as well. My only comment is that the !jvmName.equals(\\\"jview\\\") can be removed. I don\'t think we need to be worrying about whether or not the test harness runs with jview anymore.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425491\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425491&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425491\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425491_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425491_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/06 10:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-03T10:55:00+0000\'\u003e03\\/Aug\\/06 10:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e(NEED ADVICE ON HOW TO PROCEED WITH RELATED HARNESS \\\"DEFECT\\\", SEE BELOW)\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for reviewing!\u003c\\/p\u003e\\n\\n\u003cp\u003eAttaching \'\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e_v2.diff\', which replaces \'\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e_v1.diff\'.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe only change from the previous patch is that the check for !jvmName.equals(\\\"jview\\\") has been removed.\u003c\\/p\u003e\\n\\n\u003cp\u003ePLEASE NOTE: Harness decision about setting heap size flags should change even more, see below!\u003c\\/p\u003e\\n\\n\u003cp\u003eI found a number of other references to jview in the harness code, but I have not removed them (this is outside the scope of this Jira description):\u003c\\/p\u003e\\n\\n\u003cp\u003e.\\/harness\\/RunList.java:726:             else if (javaCmd.equals(\\\"jview\\\"))\u003cbr\\/\u003e\\n.\\/harness\\/RunList.java:727:                 jvmName = \\\"jview\\\";\u003cbr\\/\u003e\\n.\\/harness\\/RunList.java:743:             if ( (jvmName == null) || (jvmName.equals(\\\"jview\\\")) )\u003cbr\\/\u003e\\n.\\/harness\\/RunTest.java:973:             if ( (jvmName == null) || (jvmName.length()==0) || (jvmName.equals(\\\"jview\\\")))\u003cbr\\/\u003e\\n.\\/harness\\/RunTest.java:995:             if ( (jvmName == null) || (!jvmName.equals(\\\"jview\\\")) )\u003cbr\\/\u003e\\n.\\/harness\\/NetServer.java:158:           if (jvmName.equals(\\\"jview\\\"))\u003cbr\\/\u003e\\n.\\/harness\\/NetServer.java:159:               jvm.setJavaCmd(\\\"jview\\\");\u003cbr\\/\u003e\\n.\\/harness\\/jvm.java:39:  that is the reference point for all others.  Note some VMs (like jview)\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eAnyway, I would actually like to change the jvmflags behavior a little more. The reason is that the test harness is (and always has been, I guess) setting heap size flags for the server JVM only if the jvmflags property is not null or the empty string:\u003c\\/p\u003e\\n\\n\u003cp\u003e    boolean setJvmFlags = false;\u003cbr\\/\u003e\\n    if ( (jvmflags != null) &amp;&amp; (jvmflags.length()&gt;0) ) \u003c\\/p\u003e\\n{\\n        jvm.setFlags(jvmflags);\\n        setJvmFlags = true;\\n    }\\n\\n\u003cp\u003eThis means that if some JVM option other than -ms, -Xms, -mx or -Xmx is specified with the jvmflags property, \\\"harness-defaults\\\" will be used for min (16 MB) and max size (32 MB).  If jvmflags is not used, or empty, the harness will not set any heap size values. I do not see the logic behind this, unless the jvmflags property is never used for any jvm flags other than the heap flags mentioned above.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis behavior makes it impossible to accurately compare two test runs (in DerbyNet or DerbyNetClient frameworks) with different jvm flags, as long as no heap size flags are set. Consider the following example:\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThe lang\\/forupdate.sql test is chosen because there are no jvmflags associated with it by default, and it can be run in embedded, DerbyNet and DerbyNetClient frameworks.\u003c\\/p\u003e\\n\\n\u003cp\u003ea) Default behavior:\u003c\\/p\u003e\\n\\n\u003cp\u003eRun the following command:\u003c\\/p\u003e\\n\\n\u003cp\u003ejava -Dverbose=true -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest lang\\/forupdate.sql\u003c\\/p\u003e\\n\\n\u003cp\u003eLet\'s say the default JVM for this machine is the Java HotSpot Client VM.\u003cbr\\/\u003e\\nWith the latest patch for this issue, the harness starts the network server by doing:\u003c\\/p\u003e\\n\\n\u003cp\u003ejava -Duser.language=en -Duser.country=US -Dderby.system.home=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e\\/test\\/forupdate\\/DerbyNetClient\\/forupdate -Djava.security.manager -Djava.security.policy=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e\\/test\\/forupdate\\/derby_tests.policy -DderbyTesting.codejar=\u003ca href=\\\"file:\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/DERBY-1614\\/trunk\\/jars\\/sane\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003efile:\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/DERBY-1614\\/trunk\\/jars\\/sane\\/\u003c\\/a\u003e -DderbyTesting.codedir=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e\\/trunk\\/jars\\/sane -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost -DderbyTesting.codeclasses=\u003ca href=\\\"file:\\/\\/unused\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003efile:\\/\\/unused\\/\u003c\\/a\u003e org.apache.derby.drda.NetworkServerControl start\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eb) Run the test with some JVM option \u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e, for example -server (meaning: \\\"Select the Java HotSpot Server VM\\\"):\u003c\\/p\u003e\\n\\n\u003cp\u003ejava -Djvmflags=-server -Dverbose=true -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest lang\\/forupdate.sql\u003c\\/p\u003e\\n\\n\u003cp\u003eWith the latest patch for this issue, the harness starts the network server by doing:\u003c\\/p\u003e\\n\\n\u003cp\u003ejava -Duser.language=en -Duser.country=US -server -ms16777216 -mx33554432 -Dderby.system.home=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e\\/test\\/forupdate\\/DerbyNetClient\\/forupdate -Djava.security.manager -Djava.security.policy=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e\\/test\\/forupdate\\/derby_tests.policy -DderbyTesting.codejar=\u003ca href=\\\"file:\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/DERBY-1614\\/trunk\\/jars\\/sane\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003efile:\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/DERBY-1614\\/trunk\\/jars\\/sane\\/\u003c\\/a\u003e -DderbyTesting.codedir=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e\\/trunk\\/jars\\/sane -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost -DderbyTesting.codeclasses=\u003ca href=\\\"file:\\/\\/unused\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003efile:\\/\\/unused\\/\u003c\\/a\u003e org.apache.derby.drda.NetworkServerControl start\u003c\\/p\u003e\\n\\n\u003cp\u003eThe -server option is passed to the server JVM, but the harness also adds \\\"-ms16777216 -mx33554432\\\". This means that tests may fail in b) that did not fail in a), or vice versa, but not because of differences between the flags set in jvmflags, but because of the harness changing heap size settings automatically. Note that this has always been the behavior of the test harness; it is not caused by the above mentioned patch.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eNEW PROPOSAL:\u003c\\/p\u003e\\n\\n\u003cp\u003eI propose that the harness either\u003c\\/p\u003e\\n\\n\u003cp\u003eA) stops setting any heap size flags for the network server, unless they are specified by jvmflags. I.e. use the defaults of the JVM in which the server is run.\u003c\\/p\u003e\\n\\n\u003cp\u003eor\u003c\\/p\u003e\\n\\n\u003cp\u003eB) sets heap size flags for the network server every time neither of the flags -ms, -Xms, -mx or -Xmx are specified in jvmflags, including when no jvmflags are specified.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eI would like to see opinions from other community members before proceeding. \u003cbr\\/\u003e\\nIf there is no reason why the harness should set server heap size by default, I vote for option A).\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e All valid JVM options have the same effect, e.g. -d32, -d64, -Dderby.drda.logConnections=true or -Demma.verbosity.level=silent\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425491_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425491_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/06 10:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-03T10:55:00+0000\'\u003e03\\/Aug\\/06 10:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    (NEED ADVICE ON HOW TO PROCEED WITH RELATED HARNESS \\\"DEFECT\\\", SEE BELOW) \\n\\n Thanks for reviewing! \\n\\n Attaching \'  DERBY-1614  _v2.diff\', which replaces \'  DERBY-1614  _v1.diff\'. \\n\\n The only change from the previous patch is that the check for !jvmName.equals(\\\"jview\\\") has been removed. \\n\\n PLEASE NOTE: Harness decision about setting heap size flags should change even more, see below! \\n\\n I found a number of other references to jview in the harness code, but I have not removed them (this is outside the scope of this Jira description): \\n\\n .\\/harness\\/RunList.java:726:             else if (javaCmd.equals(\\\"jview\\\")) \\n.\\/harness\\/RunList.java:727:                 jvmName = \\\"jview\\\"; \\n.\\/harness\\/RunList.java:743:             if ( (jvmName == null) || (jvmName.equals(\\\"jview\\\")) ) \\n.\\/harness\\/RunTest.java:973:             if ( (jvmName == null) || (jvmName.length()==0) || (jvmName.equals(\\\"jview\\\"))) \\n.\\/harness\\/RunTest.java:995:             if ( (jvmName == null) || (!jvmName.equals(\\\"jview\\\")) ) \\n.\\/harness\\/NetServer.java:158:           if (jvmName.equals(\\\"jview\\\")) \\n.\\/harness\\/NetServer.java:159:               jvm.setJavaCmd(\\\"jview\\\"); \\n.\\/harness\\/jvm.java:39:  that is the reference point for all others.  Note some VMs (like jview) \\n\\n\\n Anyway, I would actually like to change the jvmflags behavior a little more. The reason is that the test harness is (and always has been, I guess) setting heap size flags for the server JVM only if the jvmflags property is not null or the empty string: \\n\\n     boolean setJvmFlags = false; \\n    if ( (jvmflags != null) &amp;&amp; (jvmflags.length()&gt;0) )  \\n{\\n        jvm.setFlags(jvmflags);\\n        setJvmFlags = true;\\n    }\\n\\n This means that if some JVM option other than -ms, -Xms, -mx or -Xmx is specified with the jvmflags property, \\\"harness-defaults\\\" will be used for min (16 MB) and max size (32 MB).  If jvmflags is not used, or empty, the harness will not set any heap size values. I do not see the logic behind this, unless the jvmflags property is never used for any jvm flags other than the heap flags mentioned above. \\n\\n This behavior makes it impossible to accurately compare two test runs (in DerbyNet or DerbyNetClient frameworks) with different jvm flags, as long as no heap size flags are set. Consider the following example: \\n\\n\\n The lang\\/forupdate.sql test is chosen because there are no jvmflags associated with it by default, and it can be run in embedded, DerbyNet and DerbyNetClient frameworks. \\n\\n a) Default behavior: \\n\\n Run the following command: \\n\\n java -Dverbose=true -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest lang\\/forupdate.sql \\n\\n Let\'s say the default JVM for this machine is the Java HotSpot Client VM. \\nWith the latest patch for this issue, the harness starts the network server by doing: \\n\\n java -Duser.language=en -Duser.country=US -Dderby.system.home=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/  DERBY-1614  \\/test\\/forupdate\\/DerbyNetClient\\/forupdate -Djava.security.manager -Djava.security.policy=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/  DERBY-1614  \\/test\\/forupdate\\/derby_tests.policy -DderbyTesting.codejar= file:\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/DERBY-1614\\/trunk\\/jars\\/sane\\/  -DderbyTesting.codedir=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/  DERBY-1614  \\/trunk\\/jars\\/sane -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost -DderbyTesting.codeclasses= file:\\/\\/unused\\/  org.apache.derby.drda.NetworkServerControl start \\n\\n\\n b) Run the test with some JVM option  &#91;1&#93; , for example -server (meaning: \\\"Select the Java HotSpot Server VM\\\"): \\n\\n java -Djvmflags=-server -Dverbose=true -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest lang\\/forupdate.sql \\n\\n With the latest patch for this issue, the harness starts the network server by doing: \\n\\n java -Duser.language=en -Duser.country=US -server -ms16777216 -mx33554432 -Dderby.system.home=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/  DERBY-1614  \\/test\\/forupdate\\/DerbyNetClient\\/forupdate -Djava.security.manager -Djava.security.policy=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/  DERBY-1614  \\/test\\/forupdate\\/derby_tests.policy -DderbyTesting.codejar= file:\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/DERBY-1614\\/trunk\\/jars\\/sane\\/  -DderbyTesting.codedir=\\/home\\/je159969\\/apache\\/Derby\\/sandBoxes\\/  DERBY-1614  \\/trunk\\/jars\\/sane -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost -DderbyTesting.codeclasses= file:\\/\\/unused\\/  org.apache.derby.drda.NetworkServerControl start \\n\\n The -server option is passed to the server JVM, but the harness also adds \\\"-ms16777216 -mx33554432\\\". This means that tests may fail in b) that did not fail in a), or vice versa, but not because of differences between the flags set in jvmflags, but because of the harness changing heap size settings automatically. Note that this has always been the behavior of the test harness; it is not caused by the above mentioned patch. \\n\\n\\n NEW PROPOSAL: \\n\\n I propose that the harness either \\n\\n A) stops setting any heap size flags for the network server, unless they are specified by jvmflags. I.e. use the defaults of the JVM in which the server is run. \\n\\n or \\n\\n B) sets heap size flags for the network server every time neither of the flags -ms, -Xms, -mx or -Xmx are specified in jvmflags, including when no jvmflags are specified. \\n\\n\\n I would like to see opinions from other community members before proceeding.  \\nIf there is no reason why the harness should set server heap size by default, I vote for option A). \\n\\n\\n  &#91;1&#93;  All valid JVM options have the same effect, e.g. -d32, -d64, -Dderby.drda.logConnections=true or -Demma.verbosity.level=silent              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425580\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425580&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425580\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12425580_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425580_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/06 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-03T17:48:41+0000\'\u003e03\\/Aug\\/06 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAssuming that things get put in for a reason and people would document (possibly) the reason I did some historical research.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe first incantation in source control of this harness server code that I could find already forces a setting of -sm16m -xm32 -noasyncgc for connecting through RmiJdbc to Weblogic Server - which was supported in version 1.5 of cloudscape.\u003c\\/p\u003e\\n\\n\u003cp\u003eCode to accept jvmflags was added in in 2001 in cloudscape, and this section looked then much like how it was contributed to apache. (see:  \u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/harness\\/NetServer.java?revision=57503&amp;view=markup\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/harness\\/NetServer.java?revision=57503&amp;view=markup\u003c\\/a\u003e)\u003c\\/p\u003e\\n\\n\u003cp\u003eThe present code, making this optional depending on jvmflags being set or not went in with revision 160372 for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-121\\\" title=\\\"Network Server reading blob\\/clob data size\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-121\\\"\u003e\u003cdel\u003eDERBY-121\u003c\\/del\u003e\u003c\\/a\u003e.\u003cbr\\/\u003e\\n(see: \u003ca href=\\\"http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/harness\\/NetServer.java?r1=160372&amp;r2=179859\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/harness\\/NetServer.java?r1=160372&amp;r2=179859\u003c\\/a\u003e)\u003cbr\\/\u003e\\nThere is no specific documentation for this part of the change, but I assume the intent was to just ensure the NetworkServer\'s heap size settings would get overwritten when set by jvmflags.\u003c\\/p\u003e\\n\\n\u003cp\u003eI keep going back and forth between A and B. \u003cbr\\/\u003e\\nI wonder whether the default heap sizes of jdk131 vs. jdk142 vs. jdk15 etc have changed. \u003cbr\\/\u003e\\nI also wonder if it\'s possible for certain jvms to have default sizes that differ from machine to machine (I know they do differ between Windows and Linux, for example).\u003cbr\\/\u003e\\nI worry about causing failures on machines where previously the tests ran fine.\u003c\\/p\u003e\\n\\n\u003cp\u003eOn the other hand, this change has been in for a while, so maybe it\'s not affected anyone. And also, the setting is hidden from view. And not working properly. And to get it working properly would take more effort, and we should also make sure it can\'t get overwritten by settings coming through on testSpecialProps or testJavaFlags. It would be clearer to leave the setting to the test and remove it from NetServer.java...\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, I cautiously vote for A. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_12425580_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425580_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Aug\\/06 17:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-03T17:48:41+0000\'\u003e03\\/Aug\\/06 17:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Assuming that things get put in for a reason and people would document (possibly) the reason I did some historical research. \\n\\n The first incantation in source control of this harness server code that I could find already forces a setting of -sm16m -xm32 -noasyncgc for connecting through RmiJdbc to Weblogic Server - which was supported in version 1.5 of cloudscape. \\n\\n Code to accept jvmflags was added in in 2001 in cloudscape, and this section looked then much like how it was contributed to apache. (see:   http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/harness\\/NetServer.java?revision=57503&amp;view=markup ) \\n\\n The present code, making this optional depending on jvmflags being set or not went in with revision 160372 for   DERBY-121  . \\n(see:  http:\\/\\/svn.apache.org\\/viewvc\\/db\\/derby\\/code\\/trunk\\/java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/harness\\/NetServer.java?r1=160372&amp;r2=179859 ) \\nThere is no specific documentation for this part of the change, but I assume the intent was to just ensure the NetworkServer\'s heap size settings would get overwritten when set by jvmflags. \\n\\n I keep going back and forth between A and B.  \\nI wonder whether the default heap sizes of jdk131 vs. jdk142 vs. jdk15 etc have changed.  \\nI also wonder if it\'s possible for certain jvms to have default sizes that differ from machine to machine (I know they do differ between Windows and Linux, for example). \\nI worry about causing failures on machines where previously the tests ran fine. \\n\\n On the other hand, this change has been in for a while, so maybe it\'s not affected anyone. And also, the setting is hidden from view. And not working properly. And to get it working properly would take more effort, and we should also make sure it can\'t get overwritten by settings coming through on testSpecialProps or testJavaFlags. It would be clearer to leave the setting to the test and remove it from NetServer.java... \\n\\n So, I cautiously vote for A.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425754\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425754&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425754\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425754_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425754_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Aug\\/06 14:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-04T14:17:12+0000\'\u003e04\\/Aug\\/06 14:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI really appreciate the historical information, Myrna, it is certainly useful in figuring out what the original intention must have been \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eI was not aware of the change to the jvmflags behavior in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-121\\\" title=\\\"Network Server reading blob\\/clob data size\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-121\\\"\u003e\u003cdel\u003eDERBY-121\u003c\\/del\u003e\u003c\\/a\u003e. It seems to me that this change was done \\\"because the test for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-121\\\" title=\\\"Network Server reading blob\\/clob data size\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-121\\\"\u003e\u003cdel\u003eDERBY-121\u003c\\/del\u003e\u003c\\/a\u003e requires extra heap memory for the server\'s JVM\\\", and that the intention was, as Myrna pointed out, to make sure that the \\\"default\\\" heap size settings (min 16 MB, max 32 MB) that had been there since before Derby\\/Cloudscape was open sourced were overridden by the test-specific settings set by jvmflags. \u003c\\/p\u003e\\n\\n\u003cp\u003eI think the people involved at that time failed to notice that the patch for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-121\\\" title=\\\"Network Server reading blob\\/clob data size\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-121\\\"\u003e\u003cdel\u003eDERBY-121\u003c\\/del\u003e\u003c\\/a\u003e also introduced a significant change to the behavior of the test harness; going from always setting the \\\"default\\\" heap size flags, to only setting them if jvmflags is not null and not the empty String (when a heap size flag was set in jvmflags, the \\\"default\\\" value for that flag was overridden). Please correct me if I am wrong...\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'d like to go through the two options (well, there is a third option: \\\"C) Don\'t change anything\\\") and look at some pros \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/add.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e and cons \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/forbidden.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e of each one.\u003cbr\\/\u003e\\nI am rephrasing A) and B) slightly...\u003c\\/p\u003e\\n\\n\u003cp\u003eA) Do not set any heap size flags for the network server apart from those specified in jvmflags\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eServer heap sizes will not be the same for every JVM, since the default sizes depends on JVM vendor, JVM version, OS, hardware etc. \u003cspan class=\\\"error\\\"\u003e&#91;1, 2, 3&#93;\u003c\\/span\u003e\u003cbr\\/\u003e\\n+ The fact that test results may depend on the JVM which is used (at least when it comes to OutOfMemoryErrors) is more in line with how the product is used in production. Here I assume that most users of Derby don\'t change the memory settings of the JVM they use for the Network Server. \u003cbr\\/\u003e\\n+ If a test fails with OutOfMemoryError on JVMs with a small default max heap size, but not on other JVMs, we immediately know that this particular test requires a certain amout of memory, and can take appropriate action.\u003cbr\\/\u003e\\n+ Network Server instances started by the test harness via NetServer have the same heap size values as server instances started directly from tests, by default.\u003cbr\\/\u003e\\n+ Test harness complexity is reduced\u003cbr\\/\u003e\\n+ Current default behavior when jvmflags is not used is not changed\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eB) Always set heap size flags (min and max size) for the network server, unless either -ms, -Xms, -mx or -Xmx has been specified in jvmflags\u003c\\/p\u003e\\n\\n\u003cp\u003e+ \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/help_16.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e All tests run with the same heap sizes on all platforms, unless jvmflags specifies non-default values - this may reduce the number of variables to consider when trying to figure out a test failure?\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eIt is hard to determine default heap size values that are suitable for all test platforms (from J2ME devices to multi-processor servers). The current values are min. 16 MB, max. 32 MB, but this has not been used by default since SVN 179859 (June 2005).\u003c\\/li\u003e\\n\\t\u003cli\u003eCurrent behavior (not setting any heap flags unless jvmflags is set) is changed back to old behavior (always setting heap flags), which may cause more tests to fail (since the harness default is smaller than the default of the most common test JVMs).\u003c\\/li\u003e\\n\\t\u003cli\u003eSee pros of option A)\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eC) Don\'t change anything\u003c\\/p\u003e\\n\\n\u003cp\u003e+ Nothing is changed\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eIt is simply not very useful that the harness sets heap size flags whenever any jvm option is set using the jvmflags property, but not otherwise. I see a trend in that we are becoming more interested in running derbyall with certain options, for example enabling 64-bit datamodel (-d64) or setting a property used by a code coverage analysis tool (-Demma.verbosity.level=silent). Using \\\"passive\\\" flags has undesirable consequences.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\\n\u003cp\u003eSo, with this I hope anyone interested has captured my thoughts around this issue. I intend to provide a patch implementing option A) soon. (If tests are not successful, I will recommend that the current (v2) patch is committed to trunk\\/10.2, and that we postpone further action until the 10.2 release is out.) \u003c\\/p\u003e\\n\\n\u003cp\u003ePlease comment if you have other opinions.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e \u003ca href=\\\"http:\\/\\/java.sun.com\\/docs\\/hotspot\\/gc5.0\\/gc_tuning_5.html#0.0.0.%20Total%20Heap%7Coutline\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/java.sun.com\\/docs\\/hotspot\\/gc5.0\\/gc_tuning_5.html#0.0.0.%20Total%20Heap%7Coutline\u003c\\/a\u003e \u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;2&#93;\u003c\\/span\u003e \u003ca href=\\\"http:\\/\\/java.sun.com\\/docs\\/hotspot\\/gc5.0\\/gc_tuning_5.html#0.0.0.0.%20Heap%20Size%7Coutline\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/java.sun.com\\/docs\\/hotspot\\/gc5.0\\/gc_tuning_5.html#0.0.0.0.%20Heap%20Size%7Coutline\u003c\\/a\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;3&#93;\u003c\\/span\u003e \u003ca href=\\\"http:\\/\\/java.sun.com\\/docs\\/hotspot\\/gc5.0\\/ergo5.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/java.sun.com\\/docs\\/hotspot\\/gc5.0\\/ergo5.html\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425754_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425754_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Aug\\/06 14:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-04T14:17:12+0000\'\u003e04\\/Aug\\/06 14:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I really appreciate the historical information, Myrna, it is certainly useful in figuring out what the original intention must have been   \\n\\n I was not aware of the change to the jvmflags behavior in   DERBY-121  . It seems to me that this change was done \\\"because the test for   DERBY-121   requires extra heap memory for the server\'s JVM\\\", and that the intention was, as Myrna pointed out, to make sure that the \\\"default\\\" heap size settings (min 16 MB, max 32 MB) that had been there since before Derby\\/Cloudscape was open sourced were overridden by the test-specific settings set by jvmflags.  \\n\\n I think the people involved at that time failed to notice that the patch for   DERBY-121   also introduced a significant change to the behavior of the test harness; going from always setting the \\\"default\\\" heap size flags, to only setting them if jvmflags is not null and not the empty String (when a heap size flag was set in jvmflags, the \\\"default\\\" value for that flag was overridden). Please correct me if I am wrong... \\n\\n I\'d like to go through the two options (well, there is a third option: \\\"C) Don\'t change anything\\\") and look at some pros   and cons   of each one. \\nI am rephrasing A) and B) slightly... \\n\\n A) Do not set any heap size flags for the network server apart from those specified in jvmflags \\n\\n \\n\\t Server heap sizes will not be the same for every JVM, since the default sizes depends on JVM vendor, JVM version, OS, hardware etc.  &#91;1, 2, 3&#93;  \\n+ The fact that test results may depend on the JVM which is used (at least when it comes to OutOfMemoryErrors) is more in line with how the product is used in production. Here I assume that most users of Derby don\'t change the memory settings of the JVM they use for the Network Server.  \\n+ If a test fails with OutOfMemoryError on JVMs with a small default max heap size, but not on other JVMs, we immediately know that this particular test requires a certain amout of memory, and can take appropriate action. \\n+ Network Server instances started by the test harness via NetServer have the same heap size values as server instances started directly from tests, by default. \\n+ Test harness complexity is reduced \\n+ Current default behavior when jvmflags is not used is not changed \\n \\n\\n\\n B) Always set heap size flags (min and max size) for the network server, unless either -ms, -Xms, -mx or -Xmx has been specified in jvmflags \\n\\n +   All tests run with the same heap sizes on all platforms, unless jvmflags specifies non-default values - this may reduce the number of variables to consider when trying to figure out a test failure? \\n \\n\\t It is hard to determine default heap size values that are suitable for all test platforms (from J2ME devices to multi-processor servers). The current values are min. 16 MB, max. 32 MB, but this has not been used by default since SVN 179859 (June 2005). \\n\\t Current behavior (not setting any heap flags unless jvmflags is set) is changed back to old behavior (always setting heap flags), which may cause more tests to fail (since the harness default is smaller than the default of the most common test JVMs). \\n\\t See pros of option A) \\n \\n\\n\\n C) Don\'t change anything \\n\\n + Nothing is changed \\n \\n\\t It is simply not very useful that the harness sets heap size flags whenever any jvm option is set using the jvmflags property, but not otherwise. I see a trend in that we are becoming more interested in running derbyall with certain options, for example enabling 64-bit datamodel (-d64) or setting a property used by a code coverage analysis tool (-Demma.verbosity.level=silent). Using \\\"passive\\\" flags has undesirable consequences. \\n \\n\\n\\n\\n So, with this I hope anyone interested has captured my thoughts around this issue. I intend to provide a patch implementing option A) soon. (If tests are not successful, I will recommend that the current (v2) patch is committed to trunk\\/10.2, and that we postpone further action until the 10.2 release is out.)  \\n\\n Please comment if you have other opinions. \\n\\n\\n  &#91;1&#93;   http:\\/\\/java.sun.com\\/docs\\/hotspot\\/gc5.0\\/gc_tuning_5.html#0.0.0.%20Total%20Heap%7Coutline   \\n &#91;2&#93;   http:\\/\\/java.sun.com\\/docs\\/hotspot\\/gc5.0\\/gc_tuning_5.html#0.0.0.0.%20Heap%20Size%7Coutline  \\n &#91;3&#93;   http:\\/\\/java.sun.com\\/docs\\/hotspot\\/gc5.0\\/ergo5.html               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425873\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425873&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425873\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425873_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425873_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Aug\\/06 21:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-04T21:50:25+0000\'\u003e04\\/Aug\\/06 21:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttatching \'\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1614\\\" title=\\\"Test harness overrides heap size settings when starting Network Server\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1614\\\"\u003e\u003cdel\u003eDERBY-1614\u003c\\/del\u003e\u003c\\/a\u003e_v3.diff\', which is a replacement for all previous patches, provided that the changes are accepted by the community.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch implements option A) as described in previous comments. In short, this means that the patch removes the test harness\' inclination to override any heap size (initial or max) flags for the Network Server JVM when started via the NetServer class of the test harness. \u003c\\/p\u003e\\n\\n\u003cp\u003ePrior to applying this patch, the Network server JVM will have a particular heap size (initial size 16 MB and\\/or max size 32 MB) if the initial size has not been specified by both -ms AND -Xms, or if the max size has not been specified by both -mx and -Xmx, in the jvmflags argument to NetServer.java\'s constructor.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch only affects harness behavior when the NetServer class is used to start a server instance in the DerbyNet and DerbyNetClient frameworks. Default behavior does not change for most tests; the patch only affects tests or test runs where any type of jvm flags are specified (usually by the jvmflags system property), either on the command line or in &lt;test&gt;_app.properties files.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eTesting:\u003cbr\\/\u003e\\n-----------\u003c\\/p\u003e\\n\\n\u003cp\u003eI have run derbyall on Solaris 10 x86, Sun\'s HotSpot client VM 1.5.0_06. The only test failure was XATest.java in the DerbyNetClient framework, which I assume is related to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1640\\\" title=\\\"Instability in XATest\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1640\\\"\u003e\u003cdel\u003eDERBY-1640\u003c\\/del\u003e\u003c\\/a\u003e. \u003c\\/p\u003e\\n\\n\u003cp\u003eI have also run the wisconsin test with no jvmflags, with \\\"-Djvmflags=-server\\\", and with \\\"-Djvmflags=-server^-Dderby.drda.logConnections=true\\\" in the DerbyNet and DerbyNetClient frameworks. All test runs were successful (tests passed and verbose output was as intended\\/expected). This verifies that:\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003ethe harness is able to parse both one and multiple jvm flags properly when specified on the command line by the jvmflags property\u003c\\/li\u003e\\n\\t\u003cli\u003ethe harness successfully merges jvm flags from an .._app.properties file with jvm flags from the command line\u003c\\/li\u003e\\n\\t\u003cli\u003ethe harness does no longer override heap size settings set in the ..._app.properties file\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI am currently running derbyall with the property -Djvmflags=-server, to see if this makes any difference.\u003c\\/p\u003e\\n\\n\u003cp\u003ePlease review this patch. I hope to get this in by the 10.2 \\\"code freeze\\\" date.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425873_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425873_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Aug\\/06 21:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-04T21:50:25+0000\'\u003e04\\/Aug\\/06 21:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attatching \'  DERBY-1614  _v3.diff\', which is a replacement for all previous patches, provided that the changes are accepted by the community. \\n\\n This patch implements option A) as described in previous comments. In short, this means that the patch removes the test harness\' inclination to override any heap size (initial or max) flags for the Network Server JVM when started via the NetServer class of the test harness.  \\n\\n Prior to applying this patch, the Network server JVM will have a particular heap size (initial size 16 MB and\\/or max size 32 MB) if the initial size has not been specified by both -ms AND -Xms, or if the max size has not been specified by both -mx and -Xmx, in the jvmflags argument to NetServer.java\'s constructor. \\n\\n This patch only affects harness behavior when the NetServer class is used to start a server instance in the DerbyNet and DerbyNetClient frameworks. Default behavior does not change for most tests; the patch only affects tests or test runs where any type of jvm flags are specified (usually by the jvmflags system property), either on the command line or in &lt;test&gt;_app.properties files. \\n\\n\\n Testing: \\n----------- \\n\\n I have run derbyall on Solaris 10 x86, Sun\'s HotSpot client VM 1.5.0_06. The only test failure was XATest.java in the DerbyNetClient framework, which I assume is related to   DERBY-1640  .  \\n\\n I have also run the wisconsin test with no jvmflags, with \\\"-Djvmflags=-server\\\", and with \\\"-Djvmflags=-server^-Dderby.drda.logConnections=true\\\" in the DerbyNet and DerbyNetClient frameworks. All test runs were successful (tests passed and verbose output was as intended\\/expected). This verifies that: \\n \\n\\t the harness is able to parse both one and multiple jvm flags properly when specified on the command line by the jvmflags property \\n\\t the harness successfully merges jvm flags from an .._app.properties file with jvm flags from the command line \\n\\t the harness does no longer override heap size settings set in the ..._app.properties file \\n \\n\\n\\n I am currently running derbyall with the property -Djvmflags=-server, to see if this makes any difference. \\n\\n Please review this patch. I hope to get this in by the 10.2 \\\"code freeze\\\" date.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425889\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425889&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425889\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12425889_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425889_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Aug\\/06 22:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-04T22:52:16+0000\'\u003e04\\/Aug\\/06 22:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI agree, I think this approach is better than setting a default, especially one which cannot be overridden. If there are no objections, I will commit the _v3 patch on Monday.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12425889_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425889_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Aug\\/06 22:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-04T22:52:16+0000\'\u003e04\\/Aug\\/06 22:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I agree, I think this approach is better than setting a default, especially one which cannot be overridden. If there are no objections, I will commit the _v3 patch on Monday.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12425949\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12425949&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12425949\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425949_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425949_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Aug\\/06 09:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-05T09:54:34+0000\'\u003e05\\/Aug\\/06 09:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI forgot to mention that the _v3 patch also removes the call to the jvm.setNoasyncgc() method (this is no longer a valid jvm option, and was only set if jvmflags was non-empty), and it fixes a small bug and adds a note about setting heap size flags in testing\\/README.htm, as mentioned in previous patch descriptions.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe derbyall run with -Djvmflags=-server had the same failure (XATest.java) as the previous run - no more, no less (same platform).\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks, Andrew, for putting this on your to-be-committed list!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12425949_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12425949_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Aug\\/06 09:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-05T09:54:34+0000\'\u003e05\\/Aug\\/06 09:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I forgot to mention that the _v3 patch also removes the call to the jvm.setNoasyncgc() method (this is no longer a valid jvm option, and was only set if jvmflags was non-empty), and it fixes a small bug and adds a note about setting heap size flags in testing\\/README.htm, as mentioned in previous patch descriptions. \\n\\n The derbyall run with -Djvmflags=-server had the same failure (XATest.java) as the previous run - no more, no less (same platform). \\n\\n Thanks, Andrew, for putting this on your to-be-committed list!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12426398\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12426398&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12426398\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12426398_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12426398_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/06 03:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-08T03:16:35+0000\'\u003e08\\/Aug\\/06 03:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted to trunk with revision 429550.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"fuzzylogic\\\" id=\\\"commentauthor_12426398_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=fuzzylogic\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"fuzzylogic\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Andrew McIntyre\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12426398_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/06 03:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-08T03:16:35+0000\'\u003e08\\/Aug\\/06 03:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed to trunk with revision 429550.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12426536\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-1614?focusedCommentId=12426536&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12426536\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12426536_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12426536_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/06 11:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-08T11:07:44+0000\'\u003e08\\/Aug\\/06 11:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThank you very much for committing!\u003c\\/p\u003e\\n\\n\u003cp\u003eI have verified that the fix is in the trunk, and that it seems to work as expected.\u003cbr\\/\u003e\\nI noticed a typo in the commit-message: \\\"or network server\\\" should be read as \\\"for network server\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eClosing the issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"johnemb\\\" id=\\\"commentauthor_12426536_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=johnemb\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"johnemb\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e John H. Embretsen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12426536_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Aug\\/06 11:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-08-08T11:07:44+0000\'\u003e08\\/Aug\\/06 11:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thank you very much for committing! \\n\\n I have verified that the fix is in the trunk, and that it seems to work as expected. \\nI noticed a typo in the commit-message: \\\"or network server\\\" should be read as \\\"for network server\\\". \\n\\n Closing the issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520238433188"> 
    <input type="hidden" title="jira.request.server.time" value="247"> 
    <input type="hidden" title="jira.request.id" value="507x94357397x3"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="1"> 
    <input type="hidden" title="db.reads.time.in.ms" value="26"> 
    <input type="hidden" title="db.conns.time.in.ms" value="33"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 507x94357397x3
	          REQUEST TIMESTAMP : [05/Mar/2018:08:27:13 +0000]
	               REQUEST TIME : 0.2470
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 1

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=26, elapsedTotal=26770171, elapsedMin=444895, elapsedMax=7041843, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=30, elapsedTotal=33668899, elapsedMin=468279, elapsedMax=7084015, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>