<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|9cf40aa3b9a451047238405aef0eb0f13b0f55c5|lout"> 
  <link rel="shortcut icon" href="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"sd.customer.profile.multi.languages\":true,\"sd.customer.portal.transitions\":true,\"sd.customer.portal.transitions.config\":true,\"sd.custom.email.stripping.rules\":false,\"sd.sla.lucene.issue.id.callback.performance\":true,\"sd.new.settings.sidebar.location\":true,\"sd.workload.report.paginator\":true,\"sd.experimental.portal.search.algorithm.default.1\":false,\"sd.customer.portal.help.center.agent.announcement\":true,\"sd.sla.improved.rendering\":false,\"sd.experimental.portal.search.algorithm.default.2\":false,\"sd.customer.feedback.validate.reporter.on.token\":true,\"sd.custom.email.notifications.utf8.csat.star\":true,\"sd.who.create.customers.by.email.setting\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.renderer.consider.variable.format\":true,\"sd.stats.event.tracking\":true,\"sd.password.helper.dialog\":true,\"sd.canned.responses\":false,\"sd.portal.help.center.customer.signup.secondary.email\":true,\"sd.custom.email.notifications.manage.language\":true,\"sd.use.search.by.permissions\":true,\"sd.slavalue.record.updated.date\":false,\"sd.report.custom.date.range\":false,\"sd.kb.article.helpfulness.report\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"sd.custom.email.notifications.styling\":true,\"sd.workinghours.new.page.bulldog.1\":false,\"sd.customer.portal.two.step.login\":false,\"sd.automation.psmq.async.executor\":true,\"sd.customer.org.list.page.lazy.search\":true,\"sd.approval.requested.when.handler\":true,\"sd.request.type.field.rest.api.filtering.bugfix\":true,\"sd.automation.then.action.auto.answer.approval\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"sla.will.only.be.paused.if.they.are.already.started\":true,\"sd.kb.comment.share.stats.collection\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"sd.customer.orgs.group.participants\":true,\"sd.portal.help.center.customer.signup\":true,\"sd.sla.agent.jql.security.restricted\":true,\"sd.test.feature.flag.x\":true,\"sd.test.feature.flag.y\":false,\"sd.cluster.safe.mail.channel.shutdown\":true,\"sd.email.channel.folders\":false,\"sd.email.analytics.open\":false,\"sd.kb.project.creation.create.link.space\":true,\"sd.workinghours.new.page\":false,\"sd.confluence.anonymous.permission.fix\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"sd.customer.portal.project.agent.announcement\":true,\"sd.automation.audit.log\":true,\"jira.jql.suggestrecentfields\":false,\"sd.canned.responses.check.index.startup\":false,\"sd.new.project.templates\":true,\"sd.custom.email.notifications.custom.rules.simple.ui\":false,\"sd.custom.email.notifications.cut.over\":true,\"sd.dismiss.all.misconfiguration.warnings.setting\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"sd.sla.configurations.export\":true,\"sd.canned.responses.variable.substitution\":true,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"sd.customer.portal.prioties.per.project.fix\":true,\"jira.instrumentation.laas\":false,\"sd.kb.self.service.report\":false,\"sla.improved.request.handling\":true,\"sd.no.schedule.async.upgrade.tasks\":true,\"sd.kb.primary.nav\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"sd.kb.issueview.panel.phase2\":true,\"sd.email.outsider.comments\":true,\"jira.create.linked.issue\":true,\"sd.kb.issueview.panel\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"sd.approvals.light.weight\":false,\"sd.automation.then.webhook\":true,\"sd.respect.inline.edit.issue.off\":true,\"jira.jql.smartautoselectfirst\":false,\"sd.global.portal.search.atlassian.only.tracking\":false,\"sd.automation.if.condition.comment.primary.action\":true,\"jira.priorities.per.project\":true,\"sd.inline.noformat.renderer\":true,\"sd.customer.request.type.create.edit.screens\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.servicedesk.servicedesk-canned-responses-plugin:canned-responses-data-provider.data"]="{\"substitutionVariables\":{\"issue.summary\":\"Issue summary\",\"issue.description\":\"Issue description\",\"issue.key\":\"Issue key\",\"issue.reporter.name\":\"Issue reporter\",\"issue.resolution\":\"Issue resolution\",\"request.url\":\"Request URL\",\"request.status\":\"Request status\"}}";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-help-links.help-links"]="{\"help\":{\"email.settings\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"managing.queues\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+queues+for+your+team\",\"email.setup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"request.settings.help.bubble\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\",\"email.settings.suitablerequest\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email#Receivingrequestsbyemail-suitablerequest\",\"sla.import.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Importing+SLAs\",\"documentation.home\":\"https://docs.atlassian.com/jira/jsd-docs-039/JIRA+Service+Desk+Documentation\",\"default\":\"https://docs.atlassian.com/jira/jsd-docs-039/\",\"create.space.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base#serving-customers-with-a-knowledge-base-createpermission\",\"email.settings.troubleshooting\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+the+email+channel\",\"admin.notifications.config\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+service+desk+notifications\",\"troubleshoot.requesttype\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+request+types\",\"approvals.configuration\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+JIRA+Service+Desk+approvals\",\"setting.up.reports\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+service+desk+reports\",\"public.signup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+public+signup\",\"knowledge.base\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base\",\"resolve.permission.scheme.errors\":\"https://docs.atlassian.com/jira/jsd-docs-039/Resolving+permission+scheme+errors\",\"getting.started\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+with+JIRA+Service+Desk\",\"getting.started.agent\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+for+service+desk+agents\",\"invite.customers\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\"},\"kb\":{\"default\":\"https://confluence.atlassian.com/display/SDKB/\",\"troubleshooting.user.management.issues\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\",\"legacytransition\":\"https://confluence.atlassian.com/display/SDKB/Replacing+legacy+automatic+transitions+with+automation+rules\",\"umtroubleshoot\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\"}}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-base-url.base-url"]="\"https://issues.apache.org/jira\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"a792084a5cb140\"";
WRM._unparsedData["project-id"]="12310230";
WRM._unparsedData["project-key"]="\"SOLR\"";
WRM._unparsedData["project-name"]="\"Solr\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310230";
WRM._unparsedData["projectKey"]="\"SOLR\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/1a6b21131945f6f49ff48336b49ca3fe-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/d8484c9183f546511a8e336a8779bcd9-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d3b35d835f8f46fc3b53bb4db7f85158-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/71d42e74136d842a3ef4d5d136484843-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/944bb39eced1b35cfc7194aa02eb5a5a/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/5a8f0f8b8aa8f96a4f0f7e9e248d62f3-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="SOLR-8220"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[SOLR-8220] Read field from docValues for non stored fields - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[SOLR-8220] Read field from docValues for non stored fields - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/SOLR" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-8220">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310230" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Solr'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310230&amp;avatarId=22151"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/SOLR">Solr</a></li>
                 <li><a class="issue-link" data-issue-key="SOLR-8220" href="/jira/browse/SOLR-8220" id="key-val" rel="12908420">SOLR-8220</a></li>
                </ol>
                <h1 id="summary-val">Read field from docValues for non stored fields</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-8220"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/SOLR-8220/SOLR-8220.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/SOLR-8220/SOLR-8220.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/SOLR-8220/SOLR-8220.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/SOLR-8220/SOLR-8220.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+5.5" title="5.5 Major release after 5.4">5.5</a>, <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+6.0" title="6.0 First 6.x release, Major release after 5.5">6.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12908420-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Many times a value will be both stored="true" and docValues="true" which requires redundant data to be stored on disk. Since reading from docValues is both efficient and a common practice (facets, analytics, streaming, etc), reading values from docValues when a stored version of the field does not exist would be a valuable disk usage optimization.</p> 
                  <p>The only caveat with this that I can see would be for multiValued fields as they would always be returned sorted in the docValues approach. I believe this is a fair compromise.</p> 
                  <p>I've done a rough implementation for this as a field transform, but I think it should live closer to where stored fields are loaded in the SolrIndexSearcher.</p> 
                  <p>Two open questions/observations:</p> 
                  <p>1) There doesn't seem to be a standard way to read values for docValues, facets, analytics, streaming, etc, all seem to be doing their own ways, perhaps some of this logic should be centralized.</p> 
                  <p>2) What will the API behavior be? (Below is my proposed implementation)<br> Parameters for fl:</p> 
                  <ul class="alternate" type="square"> 
                   <li>fl="docValueField" 
                    <ul class="alternate" type="square"> 
                     <li>return field from docValue if the field is not stored and in docValues, if the field is stored return it from stored fields</li> 
                    </ul> </li> 
                   <li>fl="*" 
                    <ul class="alternate" type="square"> 
                     <li>return only stored fields</li> 
                    </ul> </li> 
                   <li>fl="+" 
                    <ul class="alternate" type="square"> 
                     <li>return stored fields and docValue fields</li> 
                    </ul> </li> 
                  </ul> 
                  <p>2a - would be easiest implementation and might be sufficient for a first pass. 2b - is current behavior</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/SOLR-8220?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/SOLR-8220?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/SOLR-8220?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/SOLR-8220?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12779575" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779575/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779575/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779575/SOLR-8220.patch" title="Latest  27/Dec/15 09:00 - Shalin Shekhar Mangar" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779575/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-27T09:00:18.475Z">27/Dec/15 09:00</time>
                   </dd>
                   <dd class="attachment-size">
                    110 kB
                   </dd>
                   <dd class="attachment-author">
                    Shalin Shekhar Mangar
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12779573" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779573/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779573/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779573/SOLR-8220.patch" title=" 27/Dec/15 08:33 - Shalin Shekhar Mangar" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779573/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-27T08:33:41.623Z">27/Dec/15 08:33</time>
                   </dd>
                   <dd class="attachment-size">
                    111 kB
                   </dd>
                   <dd class="attachment-author">
                    Shalin Shekhar Mangar
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12779508" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779508/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779508/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779508/SOLR-8220.patch" title=" 25/Dec/15 10:34 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779508/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-25T10:34:54.607Z">25/Dec/15 10:34</time>
                   </dd>
                   <dd class="attachment-size">
                    104 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12779507" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779507/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779507/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779507/SOLR-8220.patch" title=" 25/Dec/15 09:53 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779507/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-25T09:53:43.636Z">25/Dec/15 09:53</time>
                   </dd>
                   <dd class="attachment-size">
                    104 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12779501" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779501/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779501/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779501/SOLR-8220.patch" title=" 25/Dec/15 08:25 - Shalin Shekhar Mangar" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779501/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-25T08:25:58.973Z">25/Dec/15 08:25</time>
                   </dd>
                   <dd class="attachment-size">
                    107 kB
                   </dd>
                   <dd class="attachment-author">
                    Shalin Shekhar Mangar
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12779497" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779497/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779497/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779497/SOLR-8220.patch" title=" 25/Dec/15 07:26 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779497/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-25T07:26:08.492Z">25/Dec/15 07:26</time>
                   </dd>
                   <dd class="attachment-size">
                    100 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12779448" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779448/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779448/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779448/SOLR-8220.patch" title=" 24/Dec/15 14:33 - Shalin Shekhar Mangar" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779448/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-24T14:33:49.209Z">24/Dec/15 14:33</time>
                   </dd>
                   <dd class="attachment-size">
                    97 kB
                   </dd>
                   <dd class="attachment-author">
                    Shalin Shekhar Mangar
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12779447" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779447/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779447/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779447/SOLR-8220.patch" title=" 24/Dec/15 14:13 - Shalin Shekhar Mangar" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779447/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-24T14:13:21.414Z">24/Dec/15 14:13</time>
                   </dd>
                   <dd class="attachment-size">
                    97 kB
                   </dd>
                   <dd class="attachment-author">
                    Shalin Shekhar Mangar
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12779446" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779446/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779446/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779446/SOLR-8220.patch" title=" 24/Dec/15 14:12 - Shalin Shekhar Mangar" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779446/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-24T14:12:32.823Z">24/Dec/15 14:12</time>
                   </dd>
                   <dd class="attachment-size">
                    97 kB
                   </dd>
                   <dd class="attachment-author">
                    Shalin Shekhar Mangar
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12779250" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779250/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779250/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779250/SOLR-8220.patch" title=" 23/Dec/15 15:02 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12779250/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-23T15:02:23.745Z">23/Dec/15 15:02</time>
                   </dd>
                   <dd class="attachment-size">
                    82 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12778457" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12778457/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12778457/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12778457/SOLR-8220.patch" title=" 18/Dec/15 09:01 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12778457/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-18T09:01:09.774Z">18/Dec/15 09:01</time>
                   </dd>
                   <dd class="attachment-size">
                    81 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12778159" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12778159/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12778159/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12778159/SOLR-8220.patch" title=" 17/Dec/15 01:49 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12778159/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-17T01:49:51.001Z">17/Dec/15 01:49</time>
                   </dd>
                   <dd class="attachment-size">
                    82 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12777659" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12777659/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12777659/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12777659/SOLR-8220.patch" title=" 15/Dec/15 04:07 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12777659/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-15T04:07:04.117Z">15/Dec/15 04:07</time>
                   </dd>
                   <dd class="attachment-size">
                    75 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12777395" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12777395/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12777395/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12777395/SOLR-8220.patch" title=" 14/Dec/15 05:37 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12777395/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-14T05:37:27.653Z">14/Dec/15 05:37</time>
                   </dd>
                   <dd class="attachment-size">
                    73 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12775268" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12775268/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775268/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12775268/SOLR-8220.patch" title=" 02/Dec/15 12:21 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775268/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-02T12:21:16.254Z">02/Dec/15 12:21</time>
                   </dd>
                   <dd class="attachment-size">
                    23 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12775266" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12775266/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775266/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12775266/SOLR-8220.patch" title=" 02/Dec/15 12:14 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775266/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-02T12:14:42.844Z">02/Dec/15 12:14</time>
                   </dd>
                   <dd class="attachment-size">
                    23 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12775212" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12775212/SOLR-8220.patch" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775212/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12775212/SOLR-8220.patch" title=" 02/Dec/15 05:13 - Keith Laban" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775212/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-02T05:13:01.231Z">02/Dec/15 05:13</time>
                   </dd>
                   <dd class="attachment-size">
                    23 kB
                   </dd>
                   <dd class="attachment-author">
                    Keith Laban
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12775210" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12775210/SOLR-8220.patch" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775210/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12775210/SOLR-8220.patch" title=" 02/Dec/15 04:42 - Keith Laban" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775210/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-02T04:42:42.902Z">02/Dec/15 04:42</time>
                   </dd>
                   <dd class="attachment-size">
                    23 kB
                   </dd>
                   <dd class="attachment-author">
                    Keith Laban
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12775208" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12775208/SOLR-8220.patch" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775208/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12775208/SOLR-8220.patch" title=" 02/Dec/15 04:13 - Keith Laban" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775208/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-02T04:13:47.286Z">02/Dec/15 04:13</time>
                   </dd>
                   <dd class="attachment-size">
                    23 kB
                   </dd>
                   <dd class="attachment-author">
                    Keith Laban
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12775070" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12775070/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775070/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12775070/SOLR-8220.patch" title=" 01/Dec/15 16:53 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775070/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-01T16:53:35.830Z">01/Dec/15 16:53</time>
                   </dd>
                   <dd class="attachment-size">
                    18 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12775054" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12775054/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775054/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12775054/SOLR-8220.patch" title=" 01/Dec/15 15:46 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12775054/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-01T15:46:55.058Z">01/Dec/15 15:46</time>
                   </dd>
                   <dd class="attachment-size">
                    18 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12774179" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12774179/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12774179/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12774179/SOLR-8220.patch" title=" 24/Nov/15 22:31 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12774179/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-24T22:31:34.191Z">24/Nov/15 22:31</time>
                   </dd>
                   <dd class="attachment-size">
                    18 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12773756" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12773756/SOLR-8220.patch" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12773756/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12773756/SOLR-8220.patch" title=" 23/Nov/15 01:32 - Keith Laban" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12773756/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-23T01:32:04.379Z">23/Nov/15 01:32</time>
                   </dd>
                   <dd class="attachment-size">
                    18 kB
                   </dd>
                   <dd class="attachment-author">
                    Keith Laban
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12773224" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12773224/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12773224/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12773224/SOLR-8220.patch" title=" 19/Nov/15 11:14 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12773224/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-19T11:14:53.696Z">19/Nov/15 11:14</time>
                   </dd>
                   <dd class="attachment-size">
                    20 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12773167" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12773167/SOLR-8220.patch" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12773167/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12773167/SOLR-8220.patch" title=" 19/Nov/15 04:34 - Keith Laban" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12773167/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-19T04:34:20.246Z">19/Nov/15 04:34</time>
                   </dd>
                   <dd class="attachment-size">
                    21 kB
                   </dd>
                   <dd class="attachment-author">
                    Keith Laban
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12773166" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12773166/SOLR-8220.patch" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12773166/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12773166/SOLR-8220.patch" title=" 19/Nov/15 04:11 - Keith Laban" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12773166/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-19T04:11:23.011Z">19/Nov/15 04:11</time>
                   </dd>
                   <dd class="attachment-size">
                    21 kB
                   </dd>
                   <dd class="attachment-author">
                    Keith Laban
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12772472" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12772472/SOLR-8220.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12772472/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12772472/SOLR-8220.patch" title=" 16/Nov/15 11:33 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12772472/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-16T11:33:52.808Z">16/Nov/15 11:33</time>
                   </dd>
                   <dd class="attachment-size">
                    8 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12772443" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12772443/SOLR-8220.patch" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12772443/SOLR-8220.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12772443/SOLR-8220.patch" title=" 16/Nov/15 04:16 - Keith Laban" draggable="true" data-downloadurl="text/plain:SOLR-8220.patch:https://issues.apache.org/jira/secure/attachment/12772443/SOLR-8220.patch">SOLR-8220.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-16T04:16:49.303Z">16/Nov/15 04:16</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Keith Laban
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12777612" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12777612/SOLR-8220-5x.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-5x.patch:https://issues.apache.org/jira/secure/attachment/12777612/SOLR-8220-5x.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12777612/SOLR-8220-5x.patch" title="Latest  14/Dec/15 23:32 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-5x.patch:https://issues.apache.org/jira/secure/attachment/12777612/SOLR-8220-5x.patch">SOLR-8220-5x.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-14T23:32:07.181Z">14/Dec/15 23:32</time>
                   </dd>
                   <dd class="attachment-size">
                    70 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12779586" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12779586/SOLR-8220-branch_5x.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-branch_5x.patch:https://issues.apache.org/jira/secure/attachment/12779586/SOLR-8220-branch_5x.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12779586/SOLR-8220-branch_5x.patch" title="Latest  27/Dec/15 16:11 - Shalin Shekhar Mangar" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-branch_5x.patch:https://issues.apache.org/jira/secure/attachment/12779586/SOLR-8220-branch_5x.patch">SOLR-8220-branch_5x.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-12-27T16:11:46.441Z">27/Dec/15 16:11</time>
                   </dd>
                   <dd class="attachment-size">
                    110 kB
                   </dd>
                   <dd class="attachment-author">
                    Shalin Shekhar Mangar
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12773080" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12773080/SOLR-8220-ishan.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-ishan.patch:https://issues.apache.org/jira/secure/attachment/12773080/SOLR-8220-ishan.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12773080/SOLR-8220-ishan.patch" title="Latest  18/Nov/15 21:17 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-ishan.patch:https://issues.apache.org/jira/secure/attachment/12773080/SOLR-8220-ishan.patch">SOLR-8220-ishan.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-18T21:17:44.131Z">18/Nov/15 21:17</time>
                   </dd>
                   <dd class="attachment-size">
                    18 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12773079" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12773079/SOLR-8220-ishan.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-ishan.patch:https://issues.apache.org/jira/secure/attachment/12773079/SOLR-8220-ishan.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12773079/SOLR-8220-ishan.patch" title=" 18/Nov/15 21:15 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-ishan.patch:https://issues.apache.org/jira/secure/attachment/12773079/SOLR-8220-ishan.patch">SOLR-8220-ishan.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-18T21:15:48.688Z">18/Nov/15 21:15</time>
                   </dd>
                   <dd class="attachment-size">
                    18 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12772665" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12772665/SOLR-8220-ishan.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-ishan.patch:https://issues.apache.org/jira/secure/attachment/12772665/SOLR-8220-ishan.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12772665/SOLR-8220-ishan.patch" title=" 17/Nov/15 05:37 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-ishan.patch:https://issues.apache.org/jira/secure/attachment/12772665/SOLR-8220-ishan.patch">SOLR-8220-ishan.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-17T05:37:21.510Z">17/Nov/15 05:37</time>
                   </dd>
                   <dd class="attachment-size">
                    17 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12772654" data-issue-id="12908420" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12772654/SOLR-8220-ishan.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-ishan.patch:https://issues.apache.org/jira/secure/attachment/12772654/SOLR-8220-ishan.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12772654/SOLR-8220-ishan.patch" title=" 17/Nov/15 05:06 - Ishan Chattopadhyaya" draggable="true" data-downloadurl="text/x-patch:SOLR-8220-ishan.patch:https://issues.apache.org/jira/secure/attachment/12772654/SOLR-8220-ishan.patch">SOLR-8220-ishan.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-11-17T05:06:46.955Z">17/Nov/15 05:06</time>
                   </dd>
                   <dd class="attachment-size">
                    16 kB
                   </dd>
                   <dd class="attachment-author">
                    Ishan Chattopadhyaya
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="depends upon">
                   depends upon
                  </dt> 
                  <dd id="internal-12915972_10001"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="SOLR-8339: SolrDocument and SolrInputDocument should have a common interface"> <a href="/jira/browse/SOLR-8339" data-issue-key="SOLR-8339" class="issue-link link-title resolution">SOLR-8339</a> <span class="link-summary">SolrDocument and SolrInputDocument should have a common interface</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is depended upon by">
                   is depended upon by
                  </dt> 
                  <dd id="internal-12912071_10001"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="SOLR-8276: Atomic updates &amp; RTG don't work with non-stored docvalues"> <a href="/jira/browse/SOLR-8276" data-issue-key="SOLR-8276" class="issue-link link-title resolution">SOLR-8276</a> <span class="link-summary">Atomic updates &amp; RTG don't work with non-stored docvalues</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12916484_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype" width="16" height="16" title="New Feature - A new feature of the product, which has yet to be developed." alt="New Feature - A new feature of the product, which has yet to be developed."> <span title="SOLR-8344: Decide default when requested fields are both column and row stored."> <a href="/jira/browse/SOLR-8344" data-issue-key="SOLR-8344" class="issue-link link-title resolution">SOLR-8344</a> <span class="link-summary">Decide default when requested fields are both column and row stored.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12680349_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="SOLR-5478: Optimization: Fetch all &quot;fl&quot; values from docValues instead of stored values if possible/equivalent"> <a href="/jira/browse/SOLR-5478" data-issue-key="SOLR-5478" class="issue-link link-title resolution">SOLR-5478</a> <span class="link-summary">Optimization: Fetch all "fl" values from docValues instead of stored values if possible/equivalent</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12914534_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="SOLR-8316: Allow a field to be stored=false indexed=false docValues=true"> <a href="/jira/browse/SOLR-8316" data-issue-key="SOLR-8316" class="issue-link link-title resolution">SOLR-8316</a> <span class="link-summary">Allow a field to be stored=false indexed=false docValues=true</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list collapsed-links-list"> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-13010694_10030" class="
                                                collapsed-link                    "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="SOLR-9612: Stored field access should be avoided when it's not needed"> <a href="/jira/browse/SOLR-9612" data-issue-key="SOLR-9612" class="issue-link link-title">SOLR-9612</a> <span class="link-summary">Stored field access should be avoided when it's not needed</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <div id="show-more-links"> 
                  <button class="aui-button aui-button-link" id="show-more-links-link">Show 1 more links</button> 
                  <span>(1 relates to)</span> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_shalinmangar" rel="shalinmangar" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Shalin Shekhar Mangar&quot;,&quot;emailAddress&quot;:&quot;shalin.mangar@lucidworks.com&quot;,&quot;username&quot;:&quot;shalinmangar&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="shalinmangar"></span></span> Shalin Shekhar Mangar </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_k317h" rel="k317h" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Keith Laban&quot;,&quot;emailAddress&quot;:&quot;kelaban17@gmail.com&quot;,&quot;username&quot;:&quot;k317h&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="k317h"></span></span> Keith Laban </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">2</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">12</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="28/Oct/15 01:25"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2015-10-28T01:25:41+0000">28/Oct/15 01:25</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="08/Oct/16 16:36"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2016-10-08T16:36:18+0000">08/Oct/16 16:36</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="27/Feb/16 08:31"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2016-02-27T08:31:56+0000">27/Feb/16 08:31</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for n/a, Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-8220?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/SOLR-8220?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-14977537\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14977537&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14977537\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14977537_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977537_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 01:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T01:33:38+0000\'\u003e28\\/Oct\\/15 01:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe only surprising behavior I see with this approach is that indexing 2.0 would return different values when returned from docValues and when returned from stored, the DV return might be something like 1.9999999999999999 or even 2.0000000000000 would be a \\\"surprise\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m not against the idea, just want this out there.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd one side benefit that\'s not entirely obvious. In sharded situations, the first pass returns the candidate list ID and \\\"sort criteria\\\". The way it\'s written last I knew was it returned stored values, which required decompression because it gets the stored field. If all the sort fields were DV, then we wouldn\'t have to do this.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis can\'t be the complete story since you can index but not store a sort field and distributed works, but it\'s one path I believe I\'ve seen. It\'s an open question how to wire that in to standard search for a field that\'s stored, and a DV field.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14977537_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977537_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 01:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T01:33:38+0000\'\u003e28\\/Oct\\/15 01:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The only surprising behavior I see with this approach is that indexing 2.0 would return different values when returned from docValues and when returned from stored, the DV return might be something like 1.9999999999999999 or even 2.0000000000000 would be a \\\"surprise\\\". \\n\\n I\'m not against the idea, just want this out there. \\n\\n And one side benefit that\'s not entirely obvious. In sharded situations, the first pass returns the candidate list ID and \\\"sort criteria\\\". The way it\'s written last I knew was it returned stored values, which required decompression because it gets the stored field. If all the sort fields were DV, then we wouldn\'t have to do this. \\n\\n This can\'t be the complete story since you can index but not store a sort field and distributed works, but it\'s one path I believe I\'ve seen. It\'s an open question how to wire that in to standard search for a field that\'s stored, and a DV field.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14977575\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14977575&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14977575\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14977575_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977575_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:11:52+0000\'\u003e28\\/Oct\\/15 02:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003ereading values from docValues when a stored version of the field does not exist would be a valuable disk usage optimization.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1, and I\'ve heard a number of users request this.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e1) There doesn\'t seem to be a standard way to read values for docValues, facets, analytics, streaming, etc, all seem to be doing their own ways, perhaps some of this logic should be centralized.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eSee ReturnFields \\/ ResultContext, that\'s currently where stored field handling is centralized, and handles anywhere a field list (or pseudo-fields \\/ transformers) is specified.\u003c\\/p\u003e\\n\\n\u003cp\u003e+1 for 2a as a first pass.\u003cbr\\/\u003e\\nFor bonus points, prevent stored fields from being loaded at all when not needed.  This gets us a big step closer to having the normal request handler have the same performance as \\\"\\/export\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eLooking beyond the first pass, it might be nice to use docValues as more of a first-class alternate \\\"stored\\\" mechanism, and consider them part of \\\"*\\\".  If for some reason it\'s desirable to treat some docValues fields as stored, and others not, we could introduce a flag on &lt;field&gt; in the schema.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eThe only caveat with this that I can see would be for multiValued fields as they would always be returned sorted in the docValues approach. I believe this is a fair compromise.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThis shouldn\'t be much of a concern for approach 2a, but another future option would be to add explicit set types, and also implement list-type multi-valued docValues fields... prob using binary docValues under the covers).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14977575_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977575_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:11:52+0000\'\u003e28\\/Oct\\/15 02:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     reading values from docValues when a stored version of the field does not exist would be a valuable disk usage optimization.  \\n\\n +1, and I\'ve heard a number of users request this. \\n\\n  1) There doesn\'t seem to be a standard way to read values for docValues, facets, analytics, streaming, etc, all seem to be doing their own ways, perhaps some of this logic should be centralized.  \\n\\n See ReturnFields \\/ ResultContext, that\'s currently where stored field handling is centralized, and handles anywhere a field list (or pseudo-fields \\/ transformers) is specified. \\n\\n +1 for 2a as a first pass. \\nFor bonus points, prevent stored fields from being loaded at all when not needed.  This gets us a big step closer to having the normal request handler have the same performance as \\\"\\/export\\\". \\n\\n Looking beyond the first pass, it might be nice to use docValues as more of a first-class alternate \\\"stored\\\" mechanism, and consider them part of \\\"*\\\".  If for some reason it\'s desirable to treat some docValues fields as stored, and others not, we could introduce a flag on &lt;field&gt; in the schema. \\n\\n  The only caveat with this that I can see would be for multiValued fields as they would always be returned sorted in the docValues approach. I believe this is a fair compromise.  \\n\\n This shouldn\'t be much of a concern for approach 2a, but another future option would be to add explicit set types, and also implement list-type multi-valued docValues fields... prob using binary docValues under the covers).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14977591\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14977591&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14977591\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14977591_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977591_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:17:16+0000\'\u003e28\\/Oct\\/15 02:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eThe way it\'s written last I knew was it returned stored values, which required decompression because it gets the stored field.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eRight, we should change this (and this issue may handle that out-of-the-box, if we chose not to store the \\\"id\\\" field).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eIf all the sort fields were DV, then we wouldn\'t have to do this.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThe sort field values returned in the first phase of distributed search aren\'t obtained from stored field values.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14977591_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977591_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:17:16+0000\'\u003e28\\/Oct\\/15 02:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     The way it\'s written last I knew was it returned stored values, which required decompression because it gets the stored field.  \\n Right, we should change this (and this issue may handle that out-of-the-box, if we chose not to store the \\\"id\\\" field). \\n\\n  If all the sort fields were DV, then we wouldn\'t have to do this.  \\n\\n The sort field values returned in the first phase of distributed search aren\'t obtained from stored field values.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14977592\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14977592&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14977592\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14977592_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977592_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:17:47+0000\'\u003e28\\/Oct\\/15 02:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m not talking about sorting here. The sorting during scoring certainly uses DV values.\u003c\\/p\u003e\\n\\n\u003cp\u003eHere\'s the sequence (two shards, no followers, rows=10, illustrating with just the action on shard2)\u003cbr\\/\u003e\\n1&gt; shard1 gets the incoming request\u003cbr\\/\u003e\\n2&gt; shard1 sends a sub-request for candidate top 10 to shard2\u003cbr\\/\u003e\\n3&gt; shard2 returns its candidate top 10 to shard1. This return packet has the top 10 doc IDs and sort criteria.\u003cbr\\/\u003e\\n4&gt;  shard1 combines the lists of candidate top 10 docs and picks the true top 10\u003cbr\\/\u003e\\n5&gt; shard1 asks shard2 for the docs that came from shard2 and made it into the sorted top 10 list.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I\'m talking about is step &lt;3&gt;. Last I knew, this did not use the DV fields, but pulled the stored value thus decompressing. \u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m not sure how this is resolved for fields that aren\'t stored, there must be a fallback. Or I\'m missing something here, wouldn\'t be the first time. Maybe Yonik\'s idea of making DV fields more \\\"first class citizens\\\" would just take care of the issue entirely.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14977592_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977592_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:17:47+0000\'\u003e28\\/Oct\\/15 02:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m not talking about sorting here. The sorting during scoring certainly uses DV values. \\n\\n Here\'s the sequence (two shards, no followers, rows=10, illustrating with just the action on shard2) \\n1&gt; shard1 gets the incoming request \\n2&gt; shard1 sends a sub-request for candidate top 10 to shard2 \\n3&gt; shard2 returns its candidate top 10 to shard1. This return packet has the top 10 doc IDs and sort criteria. \\n4&gt;  shard1 combines the lists of candidate top 10 docs and picks the true top 10 \\n5&gt; shard1 asks shard2 for the docs that came from shard2 and made it into the sorted top 10 list. \\n\\n What I\'m talking about is step &lt;3&gt;. Last I knew, this did not use the DV fields, but pulled the stored value thus decompressing.  \\n\\n I\'m not sure how this is resolved for fields that aren\'t stored, there must be a fallback. Or I\'m missing something here, wouldn\'t be the first time. Maybe Yonik\'s idea of making DV fields more \\\"first class citizens\\\" would just take care of the issue entirely.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14977601\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14977601&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14977601\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14977601_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977601_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:26:54+0000\'\u003e28\\/Oct\\/15 02:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Erick Erickson - 28\\/Oct\\/15 02:27\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ebq: The sort field values returned in the first phase of distributed search aren\'t obtained from stored field values.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks, I suspect I was inappropriately generalizing from the &lt;uniqueKey&gt;..... Which answers how sort values get returned from non-stored fields....\u003c\\/p\u003e\\n\\n\u003cp\u003eI suspect that practically it doesn\'t matter since to get a single field you have to decompress a 16K block, so getting the ID to be fetched from the DV field should be a win...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_14977601_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977601_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:26:54+0000\'\u003e28\\/Oct\\/15 02:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Erick Erickson - 28\\/Oct\\/15 02:27\\\"\u003eedited\u003c\\/span\u003e                   bq: The sort field values returned in the first phase of distributed search aren\'t obtained from stored field values. \\n\\n Thanks, I suspect I was inappropriately generalizing from the &lt;uniqueKey&gt;..... Which answers how sort values get returned from non-stored fields.... \\n\\n I suspect that practically it doesn\'t matter since to get a single field you have to decompress a 16K block, so getting the ID to be fetched from the DV field should be a win...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14977602\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14977602&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14977602\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14977602_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977602_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:27:33+0000\'\u003e28\\/Oct\\/15 02:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e3&gt; shard2 returns its candidate top 10 to shard1. This return packet has the top 10 doc IDs and sort criteria.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWe currently pull the sort criteria from the field comparators implementing the sort:\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/handler\\/component\\/QueryComponent.java#L638\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/handler\\/component\\/QueryComponent.java#L638\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14977602_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14977602_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/15 02:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-28T02:27:33+0000\'\u003e28\\/Oct\\/15 02:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     3&gt; shard2 returns its candidate top 10 to shard1. This return packet has the top 10 doc IDs and sort criteria.  \\n\\n We currently pull the sort criteria from the field comparators implementing the sort: \\n https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/handler\\/component\\/QueryComponent.java#L638               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14979837\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14979837&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14979837\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_14979837_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14979837_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/15 05:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-29T05:22:50+0000\'\u003e29\\/Oct\\/15 05:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFYI I have a patch in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-5478\\\" title=\\\"Optimization: Fetch all &quot;fl&quot; values from docValues instead of stored values if possible\\/equivalent\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-5478\\\"\u003e\u003cdel\u003eSOLR-5478\u003c\\/del\u003e\u003c\\/a\u003e, and I\'ve done it without patching Solr as well using a different technique.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_14979837_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14979837_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/15 05:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-29T05:22:50+0000\'\u003e29\\/Oct\\/15 05:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    FYI I have a patch in   SOLR-5478  , and I\'ve done it without patching Solr as well using a different technique.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14980449\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14980449&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14980449\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_14980449_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14980449_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/15 13:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-29T13:50:01+0000\'\u003e29\\/Oct\\/15 13:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e+1 to doing this. I think this will be useful for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-5944\\\" title=\\\"Support updates of numeric DocValues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-5944\\\"\u003e\u003cdel\u003eSOLR-5944\u003c\\/del\u003e\u003c\\/a\u003e, and was anyway planning to split this functionality out into its own issue. Also, if we go forward with &#95;version&#95; field as docvalues field, then this becomes important. In current Solr, the way to read non-stored docValues fields is to use a function query, field(mydvfield). \u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\" class=\\\"user-hover\\\" rel=\\\"k317h\\\"\u003eKeith Laban\u003c\\/a\u003e Are you planning to work on this \\/ have a patch for this? If not, then I can give it a try and have \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-5944\\\" title=\\\"Support updates of numeric DocValues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-5944\\\"\u003e\u003cdel\u003eSOLR-5944\u003c\\/del\u003e\u003c\\/a\u003e depend on it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_14980449_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14980449_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/15 13:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-29T13:50:01+0000\'\u003e29\\/Oct\\/15 13:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    +1 to doing this. I think this will be useful for   SOLR-5944  , and was anyway planning to split this functionality out into its own issue. Also, if we go forward with &#95;version&#95; field as docvalues field, then this becomes important. In current Solr, the way to read non-stored docValues fields is to use a function query, field(mydvfield).  \\n\\n  Keith Laban  Are you planning to work on this \\/ have a patch for this? If not, then I can give it a try and have   SOLR-5944   depend on it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14980479\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14980479&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14980479\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14980479_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14980479_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/15 14:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-29T14:10:05+0000\'\u003e29\\/Oct\\/15 14:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Yonik Seeley - 29\\/Oct\\/15 16:22\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e+1 to doing this. I think this will be useful for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-5944\\\" title=\\\"Support updates of numeric DocValues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-5944\\\"\u003e\u003cdel\u003eSOLR-5944\u003c\\/del\u003e\u003c\\/a\u003e, and was anyway planning to split this functionality out into its own issue.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAh, right, atomic updates needs this functionality as well if we are to allow docValues fields that aren\'t stored.\u003cbr\\/\u003e\\nIn that case I\'ll amend my previous comments around ResultContext... that\'s appropriate for decorating documents as they are being returned, but perhaps not low enough level for other use cases.\u003c\\/p\u003e\\n\\n\u003cp\u003eedit: I\'m basically agreeing with Keith\'s original observation - \\\"I think it should live closer to where stored fields are loaded in the SolrIndexSearcher.\\\"\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_14980479_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14980479_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/15 14:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-29T14:10:05+0000\'\u003e29\\/Oct\\/15 14:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Yonik Seeley - 29\\/Oct\\/15 16:22\\\"\u003eedited\u003c\\/span\u003e                    +1 to doing this. I think this will be useful for   SOLR-5944  , and was anyway planning to split this functionality out into its own issue.  \\n\\n Ah, right, atomic updates needs this functionality as well if we are to allow docValues fields that aren\'t stored. \\nIn that case I\'ll amend my previous comments around ResultContext... that\'s appropriate for decorating documents as they are being returned, but perhaps not low enough level for other use cases. \\n\\n edit: I\'m basically agreeing with Keith\'s original observation - \\\"I think it should live closer to where stored fields are loaded in the SolrIndexSearcher.\\\"              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14980731\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=14980731&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14980731\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_14980731_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14980731_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/15 16:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-29T16:34:05+0000\'\u003e29\\/Oct\\/15 16:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Keith Laban - 29\\/Oct\\/15 16:40\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere are two approaches I can see:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) implement a new type of StoredFieldReader which is aware of field type (i.e. does it have docValues, is it stored). This reader would delegate between reading from docValues or the stored fields\u003c\\/p\u003e\\n\\n\u003cp\u003e2) in the \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/solr\\/core\\/src\\/java\\/org\\/apache\\/solr\\/search\\/SolrIndexSearcher.java#L736\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003eSolrIndexSearcher.doc\u003c\\/a\u003e function do two passes. first pass to get stored fields, a second pass to get docValues. This can go a step further to make the SetNonLazyFieldSelector aware of docValues fields and instruct the the reader to not load fields which are known to be in docValues.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003ethoughts?\u003c\\/p\u003e\\n\\n\u003cp\u003eedit: Would approach number 2 effect how fields are loaded lazyily (LazyDocument)?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_14980731_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14980731_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/15 16:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-10-29T16:34:05+0000\'\u003e29\\/Oct\\/15 16:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Keith Laban - 29\\/Oct\\/15 16:40\\\"\u003eedited\u003c\\/span\u003e                   There are two approaches I can see: \\n\\n 1) implement a new type of StoredFieldReader which is aware of field type (i.e. does it have docValues, is it stored). This reader would delegate between reading from docValues or the stored fields \\n\\n 2) in the  SolrIndexSearcher.doc  function do two passes. first pass to get stored fields, a second pass to get docValues. This can go a step further to make the SetNonLazyFieldSelector aware of docValues fields and instruct the the reader to not load fields which are known to be in docValues. \\n\\n\\n thoughts? \\n\\n edit: Would approach number 2 effect how fields are loaded lazyily (LazyDocument)?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15006212\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15006212&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15006212\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15006212_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15006212_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 04:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T04:16:49+0000\'\u003e16\\/Nov\\/15 04:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eadding an initial attempt at this patch. What does everyone think about taking an approach like this?\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch will decorate a document with docValue values after the stored values have been read. For now it skips multivalued fields and only reads from docValues if FL is specified and the field is not stored.\u003c\\/p\u003e\\n\\n\u003cp\u003eSome problems I noticed with this approach are:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) LazyDocument doesn\'t support a notion of loading from docValues, without\u003cbr\\/\u003e\\nmucking around in there I can\'t see a way apply the docValues before caching\u003cbr\\/\u003e\\nbecause of various FLs.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) There is no metadata (that I can find) stored for each document that says\u003cbr\\/\u003e\\nwhether it has an unstored docValue field, so efficiently loading docValues\u003cbr\\/\u003e\\nfields based on FL=* would be difficult. The only possibly way right now is to\u003cbr\\/\u003e\\niterate over all schema fields looking for the viable docValue fields for each\u003cbr\\/\u003e\\nmatched document.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) More of a question: What kind of FieldType should be created when adding\u003cbr\\/\u003e\\nthese docValues to the document?\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eI have an alternate patch that attempts to preload stored values from docValues\u003cbr\\/\u003e\\nbefore handing over to the IndexReader.  Those fields are then skipped later\u003cbr\\/\u003e\\non.  It passes tests, but it\'s not a very elegent approach. And also has\u003cbr\\/\u003e\\nits limitations; it only works when FL is specified and it wouldn\'t\u003cbr\\/\u003e\\nwork on the cached hit of the document if a field is loaded with LazyDocument.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15006212_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15006212_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 04:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T04:16:49+0000\'\u003e16\\/Nov\\/15 04:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    adding an initial attempt at this patch. What does everyone think about taking an approach like this? \\n\\n This patch will decorate a document with docValue values after the stored values have been read. For now it skips multivalued fields and only reads from docValues if FL is specified and the field is not stored. \\n\\n Some problems I noticed with this approach are: \\n\\n 1) LazyDocument doesn\'t support a notion of loading from docValues, without \\nmucking around in there I can\'t see a way apply the docValues before caching \\nbecause of various FLs. \\n\\n 2) There is no metadata (that I can find) stored for each document that says \\nwhether it has an unstored docValue field, so efficiently loading docValues \\nfields based on FL=* would be difficult. The only possibly way right now is to \\niterate over all schema fields looking for the viable docValue fields for each \\nmatched document. \\n\\n 3) More of a question: What kind of FieldType should be created when adding \\nthese docValues to the document? \\n\\n\\n I have an alternate patch that attempts to preload stored values from docValues \\nbefore handing over to the IndexReader.  Those fields are then skipped later \\non.  It passes tests, but it\'s not a very elegent approach. And also has \\nits limitations; it only works when FL is specified and it wouldn\'t \\nwork on the cached hit of the document if a field is loaded with LazyDocument.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15006538\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15006538&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15006538\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15006538_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15006538_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 11:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T11:18:59+0000\'\u003e16\\/Nov\\/15 11:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the patch, Keith. \u003cbr\\/\u003e\\nI couldn\'t apply the patch. Is this based on trunk? I saw that SolrIndexSearcher.doc() method returns \u003ctt\u003eStoredDocument\u003c\\/tt\u003e on trunk, but it seems your patch assumes a \u003ctt\u003eDocument\u003c\\/tt\u003e.\u003cbr\\/\u003e\\nIf this isn\'t based on trunk, can you please re-work the patch and update it to trunk? Also, an SVN patch would be easier for most developers to work with.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15006538_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15006538_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 11:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T11:18:59+0000\'\u003e16\\/Nov\\/15 11:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the patch, Keith.  \\nI couldn\'t apply the patch. Is this based on trunk? I saw that SolrIndexSearcher.doc() method returns  StoredDocument  on trunk, but it seems your patch assumes a  Document . \\nIf this isn\'t based on trunk, can you please re-work the patch and update it to trunk? Also, an SVN patch would be easier for most developers to work with.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15006551\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15006551&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15006551\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15006551_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15006551_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 11:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T11:33:52+0000\'\u003e16\\/Nov\\/15 11:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated your patch to trunk (svn) with no changes to your logic. I\'ll review it soon.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15006551_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15006551_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 11:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T11:33:52+0000\'\u003e16\\/Nov\\/15 11:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated your patch to trunk (svn) with no changes to your logic. I\'ll review it soon.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15006669\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15006669&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15006669\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15006669_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15006669_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 13:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T13:44:06+0000\'\u003e16\\/Nov\\/15 13:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003e2) There is no metadata (that I can find) stored for each document that says\u003cbr\\/\u003e\\nwhether it has an unstored docValue field, so efficiently loading docValues\u003cbr\\/\u003e\\nfields based on FL=* would be difficult.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIn SolrIndexSearcher there is\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e  \u003cspan class=\\\"code-keyword\\\"\u003eprivate\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003efinal\u003c\\/span\u003e FieldInfos fieldInfos;\\n  \u003cspan class=\\\"code-keyword\\\"\u003eprivate\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003efinal\u003c\\/span\u003e Collection&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt; fieldNames;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThat gives you the full set of fields actually in-use by the index.  Useful for dealing with dynamicFields, where the names aren\'t explicitly listed in the schema.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the future, perhaps we should have some meta-data about what fields each document contains.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15006669_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15006669_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 13:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T13:44:06+0000\'\u003e16\\/Nov\\/15 13:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n 2) There is no metadata (that I can find) stored for each document that says \\nwhether it has an unstored docValue field, so efficiently loading docValues \\nfields based on FL=* would be difficult.  \\n\\n In SolrIndexSearcher there is \\n  \\n    private   final  FieldInfos fieldInfos;\\n   private   final  Collection&lt; String &gt; fieldNames;\\n \\n  \\n\\n That gives you the full set of fields actually in-use by the index.  Useful for dealing with dynamicFields, where the names aren\'t explicitly listed in the schema. \\n\\n In the future, perhaps we should have some meta-data about what fields each document contains.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15007068\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15007068&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15007068\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15007068_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15007068_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 18:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T18:29:04+0000\'\u003e16\\/Nov\\/15 18:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\" class=\\\"user-hover\\\" rel=\\\"ichattopadhyaya\\\"\u003eIshan Chattopadhyaya\u003c\\/a\u003e, this is my first time submitting a patch. This was originally done against 5.3.1 in the future i\'ll submit it based on trunk. \u003c\\/p\u003e\\n\\n\u003cp\u003eI also noticed that there is a bug in the patch I submited. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe line which reads \u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e(\u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e == sf){\\n  \u003cspan class=\\\"code-keyword\\\"\u003ereturn\u003c\\/span\u003e doc;\\n}\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eshould be\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e(\u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e == sf){\\n  \u003cspan class=\\\"code-keyword\\\"\u003econtinue\u003c\\/span\u003e;\\n}\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\" class=\\\"user-hover\\\" rel=\\\"yseeley@gmail.com\\\"\u003eYonik Seeley\u003c\\/a\u003e I think that we definitely need something like that. Currently CompressingStoredFieldsReader.visitDocument needs to visit the whole document in stored field to know which fields there are. Ideally we would 1) be able to avoid doing any work in stored fields if they can instead by read out of docValues. 2) have a mechanism for LazyDocument to know to read the lazy field from docValues instead of from stored fields. 3) know about values which aren\'t stored but should be read from docValues.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15007068_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15007068_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 18:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T18:29:04+0000\'\u003e16\\/Nov\\/15 18:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks  Ishan Chattopadhyaya , this is my first time submitting a patch. This was originally done against 5.3.1 in the future i\'ll submit it based on trunk.  \\n\\n I also noticed that there is a bug in the patch I submited.  \\n\\n The line which reads  \\n  \\n  if ( null  == sf){\\n   return  doc;\\n}\\n \\n  \\n\\n should be \\n  \\n  if ( null  == sf){\\n   continue ;\\n}\\n \\n  \\n\\n  Yonik Seeley  I think that we definitely need something like that. Currently CompressingStoredFieldsReader.visitDocument needs to visit the whole document in stored field to know which fields there are. Ideally we would 1) be able to avoid doing any work in stored fields if they can instead by read out of docValues. 2) have a mechanism for LazyDocument to know to read the lazy field from docValues instead of from stored fields. 3) know about values which aren\'t stored but should be read from docValues.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15007091\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15007091&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15007091\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15007091_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15007091_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 18:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T18:41:30+0000\'\u003e16\\/Nov\\/15 18:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e1) be able to avoid doing any work in stored fields if they can instead by read out of docValues.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWe should be able to do this optimization regardless?  For the fields requested, we can check the schema to see if they have docValues.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15007091_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15007091_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 18:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T18:41:30+0000\'\u003e16\\/Nov\\/15 18:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     1) be able to avoid doing any work in stored fields if they can instead by read out of docValues.  \\n\\n We should be able to do this optimization regardless?  For the fields requested, we can check the schema to see if they have docValues.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15007093\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15007093&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15007093\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15007093_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15007093_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 18:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T18:43:15+0000\'\u003e16\\/Nov\\/15 18:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m talking more specifically about the \\\"FL=*\\\" scenario \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15007093_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15007093_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 18:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T18:43:15+0000\'\u003e16\\/Nov\\/15 18:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m talking more specifically about the \\\"FL=*\\\" scenario               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15007107\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15007107&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15007107\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15007107_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15007107_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 18:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T18:52:07+0000\'\u003e16\\/Nov\\/15 18:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnd for the specified FL scenario, LazyDocument assumes all the possible fields have been accounted for in the document and the not yet loaded fields have a bit offset for quick access in the future. Right now there\'s no way to cache a partially loaded document unless the whole stored document is visited to pre populate the lazy field with the required information. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15007107_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15007107_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/15 18:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-16T18:52:07+0000\'\u003e16\\/Nov\\/15 18:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    And for the specified FL scenario, LazyDocument assumes all the possible fields have been accounted for in the document and the not yet loaded fields have a bit offset for quick access in the future. Right now there\'s no way to cache a partially loaded document unless the whole stored document is visited to pre populate the lazy field with the required information.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15008058\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15008058&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15008058\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15008058_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15008058_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 05:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T05:06:46+0000\'\u003e17\\/Nov\\/15 05:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 17\\/Nov\\/15 05:39\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere\'s an alternate patch (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8220\\\" title=\\\"Read field from docValues for non stored fields\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8220\\\"\u003e\u003cdel\u003eSOLR-8220\u003c\\/del\u003e\u003c\\/a\u003e-ishan.patch) for this functionality. Uses the same hooks that you\'ve created, i.e. decorateDocValueFields(), and uses your unit tests.\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eChanged the handling of single valued dv fields to have less code,\u003c\\/li\u003e\\n\\t\u003cli\u003eAdds support for multivalued dv fields support,\u003c\\/li\u003e\\n\\t\u003cli\u003eIn your patch, \u003ctt\u003efl=*,mydvfield\u003c\\/tt\u003e wasn\'t working. Fixed this.\u003c\\/li\u003e\\n\\t\u003cli\u003eAdded a \u003ctt\u003e~\u003csub\u003e\u003c\\/tt\u003e glob, similar to \u003ctt\u003e*\u003c\\/tt\u003e. \u003ctt\u003efl=\u003c\\/sub\u003e\u003c\\/tt\u003e here means: return all conventional stored fields and all non stored docvalues.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eSome cleanup \\/ refactoring and a few tests might be needed.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e1) be able to avoid doing any work in stored fields if they can instead by read out of docValues.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eGood point, this optimization would be useful. Not done in this patch, though.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15008058_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15008058_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 05:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T05:06:46+0000\'\u003e17\\/Nov\\/15 05:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 17\\/Nov\\/15 05:39\\\"\u003eedited\u003c\\/span\u003e                   Here\'s an alternate patch (  SOLR-8220  -ishan.patch) for this functionality. Uses the same hooks that you\'ve created, i.e. decorateDocValueFields(), and uses your unit tests. \\n \\n\\t Changed the handling of single valued dv fields to have less code, \\n\\t Adds support for multivalued dv fields support, \\n\\t In your patch,  fl=*,mydvfield  wasn\'t working. Fixed this. \\n\\t Added a  ~   glob, similar to  * .  fl=   here means: return all conventional stored fields and all non stored docvalues. \\n \\n\\n\\n Some cleanup \\/ refactoring and a few tests might be needed. \\n\\n  1) be able to avoid doing any work in stored fields if they can instead by read out of docValues.  \\n Good point, this optimization would be useful. Not done in this patch, though.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15008090\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15008090&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15008090\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15008090_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15008090_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 05:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T05:37:21+0000\'\u003e17\\/Nov\\/15 05:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated last patch to use FieldInfos, since searcher.getSchema().getFields() doesn\'t have the dynamic fields. Modified the test to randomly test the \u003ctt\u003efl\u003c\\/tt\u003e parameter with ~ or the dv field name itself.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15008090_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15008090_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 05:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T05:37:21+0000\'\u003e17\\/Nov\\/15 05:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated last patch to use FieldInfos, since searcher.getSchema().getFields() doesn\'t have the dynamic fields. Modified the test to randomly test the  fl  parameter with ~ or the dv field name itself.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15008302\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15008302&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15008302\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"janhoy\\\" id=\\\"commentauthor_15008302_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=janhoy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"janhoy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Jan H\\u00F8ydahl\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15008302_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 08:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T08:55:09+0000\'\u003e17\\/Nov\\/15 08:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHow about using \u003ctt\u003efl=&#42;&#42;\u003c\\/tt\u003e as glob instead of \u003ctt\u003e&#126;\u003c\\/tt\u003e? In Lucene, \u003ctt\u003e~\u003c\\/tt\u003e normally indicates fuzziness of some kind, while \u003ctt\u003e**\u003c\\/tt\u003e in ant lingo means all items recursively... Not important though \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"janhoy\\\" id=\\\"commentauthor_15008302_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=janhoy\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"janhoy\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Jan H\\u00F8ydahl\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15008302_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 08:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T08:55:09+0000\'\u003e17\\/Nov\\/15 08:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    How about using  fl=&#42;&#42;  as glob instead of  &#126; ? In Lucene,  ~  normally indicates fuzziness of some kind, while  **  in ant lingo means all items recursively... Not important though                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15008382\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15008382&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15008382\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15008382_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15008382_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 09:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T09:41:58+0000\'\u003e17\\/Nov\\/15 09:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 17\\/Nov\\/15 17:37\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ctt\u003e**\u003c\\/tt\u003e seems like a better idea than ~. I couldn\'t get + to work, as Keith suggested, I guess it was getting confused with a positive sign.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15008382_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15008382_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 09:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T09:41:58+0000\'\u003e17\\/Nov\\/15 09:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 17\\/Nov\\/15 17:37\\\"\u003eedited\u003c\\/span\u003e                    **  seems like a better idea than ~. I couldn\'t get + to work, as Keith suggested, I guess it was getting confused with a positive sign.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15009100\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15009100&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15009100\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15009100_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15009100_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 17:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T17:38:33+0000\'\u003e17\\/Nov\\/15 17:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 17\\/Nov\\/15 17:38\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMy patch causes a regression with score fields, I\'ll look into it in a while.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15009100_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15009100_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 17:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T17:38:33+0000\'\u003e17\\/Nov\\/15 17:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 17\\/Nov\\/15 17:38\\\"\u003eedited\u003c\\/span\u003e                   My patch causes a regression with score fields, I\'ll look into it in a while.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15009192\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15009192&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15009192\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15009192_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15009192_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 18:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T18:29:35+0000\'\u003e17\\/Nov\\/15 18:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI see some potential issues here, mostly performance concerns:\u003c\\/p\u003e\\n\\n\u003cp\u003e1)\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e  \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (wantsAllNonStoredDocValues) {\\n    Set&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt; dvFields = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e HashSet&lt;&gt;();\\n    \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e (\u003cspan class=\\\"code-object\\\"\u003eint\u003c\\/span\u003e i=0; i&lt;fieldInfos.size(); i++) {\\n      \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (fieldInfos.fieldInfo(i) != \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e &amp;&amp; fieldInfos.fieldInfo(i).getDocValuesType() != DocValuesType.NONE) {\\n        dvFields.add(fieldInfos.fieldInfo(i).name);\\n      }\\n    }\\n    fields = dvFields;\\n  }\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThis could potentially be very expensive to compute for every singe field for ever single document and also add unnecessary GC pressure by creating new HashSet for all the fields for every single document.\u003c\\/p\u003e\\n\\n\u003cp\u003e2) \u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003edoc.getField(fieldName)==\u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \\n\\n\u003cp\u003ethe doc fields are a list so this will be O( n ) for each lookup.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Re multivalued fields: doing introspection for every single value for field for every document is not fast.\u003c\\/p\u003e\\n\\n\u003cp\u003e4) \u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eSchemaField schemaField = schema.getField(fieldName);\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003ethis throws an exception if the field name is not in the schema (think typos in FL)\u003c\\/p\u003e\\n\\n\u003cp\u003e5)\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eFunctionValues values = schemaField.getType().getValueSource(schemaField, \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e).getValues(\u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e, getLeafReader().getContext());\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThis creates a whole bunch of new objects which could be slow and cause a lot of GC pressure, although it may not be an issue.\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15009192_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15009192_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Nov\\/15 18:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-17T18:29:35+0000\'\u003e17\\/Nov\\/15 18:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I see some potential issues here, mostly performance concerns: \\n\\n 1) \\n  \\n    if  (wantsAllNonStoredDocValues) {\\n    Set&lt; String &gt; dvFields =  new  HashSet&lt;&gt;();\\n     for  ( int  i=0; i&lt;fieldInfos.size(); i++) {\\n       if  (fieldInfos.fieldInfo(i) !=  null  &amp;&amp; fieldInfos.fieldInfo(i).getDocValuesType() != DocValuesType.NONE) {\\n        dvFields.add(fieldInfos.fieldInfo(i).name);\\n      }\\n    }\\n    fields = dvFields;\\n  }\\n \\n  \\n\\n This could potentially be very expensive to compute for every singe field for ever single document and also add unnecessary GC pressure by creating new HashSet for all the fields for every single document. \\n\\n 2)  \\n  \\n doc.getField(fieldName)== null \\n \\n   \\n\\n the doc fields are a list so this will be O( n ) for each lookup. \\n\\n 3) Re multivalued fields: doing introspection for every single value for field for every document is not fast. \\n\\n 4)  \\n  \\n SchemaField schemaField = schema.getField(fieldName);\\n \\n  \\n this throws an exception if the field name is not in the schema (think typos in FL) \\n\\n 5) \\n  \\n FunctionValues values = schemaField.getType().getValueSource(schemaField,  null ).getValues( null , getLeafReader().getContext());\\n \\n  \\n\\n This creates a whole bunch of new objects which could be slow and cause a lot of GC pressure, although it may not be an issue. \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15011570\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15011570&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15011570\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15011570_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011570_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 18:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T18:12:32+0000\'\u003e18\\/Nov\\/15 18:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the review, Keith.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e1. \u003cspan class=\\\"error\\\"\u003e&#91;...&#93;\u003c\\/span\u003e This could potentially be very expensive to compute for every singe field for ever single document and also add unnecessary GC pressure by creating new HashSet for all the fields for every single document.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI was aware of this, and wanted to fix this as part of the \\\"cleanup \\/ refactoring\\\" I promised.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e\u003ctt\u003edoc.getField(fieldName)==null\u003c\\/tt\u003e the doc fields are a list so this will be O( n ) for each lookup.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI used that to ensure we\'re not re-adding unstored docvalues a second time to the same document. This is necessary here so that we don\'t re-add such fields to a document was obtained from the documentCache and already has all unstored docvalues in it. I can create a set of fields inside the \u003ctt\u003eStoredDocument\u003c\\/tt\u003e class so that a hasField lookup can be speeded up. However, given that it is a Lucene class, I have left this be. Any suggestions?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e3) Re multivalued fields: doing introspection for every single value for field for every document is not fast.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think it shouldn\'t be a problem. In modern JVMs, the \u003ctt\u003einstanceof\u003c\\/tt\u003e has negligible cost. However, I will do it once per multivalued field in my next patch.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e4) \u003ctt\u003eSchemaField schemaField = schema.getField(fieldName);\u003c\\/tt\u003e this throws an exception if the field name is not in the schema (think typos in FL)\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eIf it is a dynamic field, it will still work; a wrong field name won\'t work here. Shouldn\'t a wrong field name throw an exception, rather than silently dropping it? I am split either ways.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eThis creates a whole bunch of new objects which could be slow and cause a lot of GC pressure, although it may not be an issue.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI think this creates at most only the value source object, which isn\'t too bad. Internally, it uses the docvalues API.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15011570_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011570_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 18:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T18:12:32+0000\'\u003e18\\/Nov\\/15 18:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the review, Keith. \\n\\n  1.  &#91;...&#93;  This could potentially be very expensive to compute for every singe field for ever single document and also add unnecessary GC pressure by creating new HashSet for all the fields for every single document.  \\n\\n I was aware of this, and wanted to fix this as part of the \\\"cleanup \\/ refactoring\\\" I promised. \\n\\n   doc.getField(fieldName)==null  the doc fields are a list so this will be O( n ) for each lookup.  \\n\\n I used that to ensure we\'re not re-adding unstored docvalues a second time to the same document. This is necessary here so that we don\'t re-add such fields to a document was obtained from the documentCache and already has all unstored docvalues in it. I can create a set of fields inside the  StoredDocument  class so that a hasField lookup can be speeded up. However, given that it is a Lucene class, I have left this be. Any suggestions? \\n\\n  3) Re multivalued fields: doing introspection for every single value for field for every document is not fast.  \\n\\n I think it shouldn\'t be a problem. In modern JVMs, the  instanceof  has negligible cost. However, I will do it once per multivalued field in my next patch. \\n\\n  4)  SchemaField schemaField = schema.getField(fieldName);  this throws an exception if the field name is not in the schema (think typos in FL)  \\n If it is a dynamic field, it will still work; a wrong field name won\'t work here. Shouldn\'t a wrong field name throw an exception, rather than silently dropping it? I am split either ways. \\n\\n  This creates a whole bunch of new objects which could be slow and cause a lot of GC pressure, although it may not be an issue.  \\n I think this creates at most only the value source object, which isn\'t too bad. Internally, it uses the docvalues API.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15011760\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15011760&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15011760\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15011760_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011760_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 19:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T19:29:49+0000\'\u003e18\\/Nov\\/15 19:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI used that to ensure we\'re not re-adding unstored docvalues a second time to the same document. This is necessary here so that we don\'t re-add such fields to a document was obtained from the documentCache and already has all unstored docvalues in it. I can create a set of fields inside the StoredDocument class so that a hasField lookup can be speeded up. However, given that it is a Lucene class, I have left this be. Any suggestions?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThis shouldn\'t be an issue since the hook is called after caching is done. This could get really expensive if you are getting a few thousand documents that have hundreds of fields. I think the real issue is how do we cache this efficiently. I think that will require modifying LazyDocument, (see my comments above)\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eIf it is a dynamic field, it will still work; a wrong field name won\'t work here. Shouldn\'t a wrong field name throw an exception, rather than silently dropping it? I am split either ways.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThis is more a backwards compat thing. What is current behavior for stored fields?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI think this creates at most only the value source object, which isn\'t too bad. Internally, it uses the docvalues API.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003efor a string field, getValueSource creates a new StrFieldSource and getValues creates a new DocTermsIndexDocValues. Both of these closures add overhead especially if you\'re doing this hundreds of times for thousands of documents\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15011760_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011760_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 19:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T19:29:49+0000\'\u003e18\\/Nov\\/15 19:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I used that to ensure we\'re not re-adding unstored docvalues a second time to the same document. This is necessary here so that we don\'t re-add such fields to a document was obtained from the documentCache and already has all unstored docvalues in it. I can create a set of fields inside the StoredDocument class so that a hasField lookup can be speeded up. However, given that it is a Lucene class, I have left this be. Any suggestions?  \\n\\n This shouldn\'t be an issue since the hook is called after caching is done. This could get really expensive if you are getting a few thousand documents that have hundreds of fields. I think the real issue is how do we cache this efficiently. I think that will require modifying LazyDocument, (see my comments above) \\n\\n  If it is a dynamic field, it will still work; a wrong field name won\'t work here. Shouldn\'t a wrong field name throw an exception, rather than silently dropping it? I am split either ways.  \\n\\n This is more a backwards compat thing. What is current behavior for stored fields? \\n\\n  I think this creates at most only the value source object, which isn\'t too bad. Internally, it uses the docvalues API.  \\n\\n for a string field, getValueSource creates a new StrFieldSource and getValues creates a new DocTermsIndexDocValues. Both of these closures add overhead especially if you\'re doing this hundreds of times for thousands of documents \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15011854\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15011854&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15011854\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15011854_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011854_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 20:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T20:01:29+0000\'\u003e18\\/Nov\\/15 20:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eThis shouldn\'t be an issue since the hook is called after caching is done.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eEven if this is called after the document has been added to the cache, this decorate() method changes the same doc object that has been added to the cache. And hence, next time the document is fetched from the cache, it will contain the previously decorated docvalues as part of the stored doc from the cache. \u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll look at what it will take to modify the LazyDocument to make this work differently. Are you already looking into it, or have some thoughts around it?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eBoth of these closures add overhead especially if you\'re doing this hundreds of times for thousands of documents\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eYes, that makes sense; I hadn\'t noticed the second object getting created. We should avoid this overhead if possible.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15011854_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011854_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 20:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T20:01:29+0000\'\u003e18\\/Nov\\/15 20:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     This shouldn\'t be an issue since the hook is called after caching is done.  \\n Even if this is called after the document has been added to the cache, this decorate() method changes the same doc object that has been added to the cache. And hence, next time the document is fetched from the cache, it will contain the previously decorated docvalues as part of the stored doc from the cache.  \\n\\n I\'ll look at what it will take to modify the LazyDocument to make this work differently. Are you already looking into it, or have some thoughts around it? \\n\\n  Both of these closures add overhead especially if you\'re doing this hundreds of times for thousands of documents  \\n Yes, that makes sense; I hadn\'t noticed the second object getting created. We should avoid this overhead if possible.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15011884\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15011884&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15011884\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15011884_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011884_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 20:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T20:26:34+0000\'\u003e18\\/Nov\\/15 20:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eAdded a ~ glob, similar to *. fl= here means: return all conventional stored fields and all non stored docvalues.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003ePurely from an interface perspective (I haven\'t looked at the code), it feels like this should be transparent.\u003cbr\\/\u003e\\nIt would be nice to be able to transition from an indexed+stored field to an indexed+docValues field and not have any of the clients know\\/care.\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003efl=myfield  \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ returns from either stored or docValues\\n\u003c\\/span\u003efl=*_i         \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ returns all stored or docValues fields ending in _i\\n\u003c\\/span\u003efl=*            \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ returns all stored fields and all docValues fields that are not stored\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eIf there is a need to distinguish between docValues as an alternative to a stored field, and docValues as an implementation detail that you don\'t want to return to the user (say you transitioned from an indexed-only field to an indexed+docValues field  or docValues-only field), then we could introduce a field flag for the schema.\u003cbr\\/\u003e\\nSomething like includeInStored=true\\/false or asStored=true\\/false\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15011884_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011884_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 20:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T20:26:34+0000\'\u003e18\\/Nov\\/15 20:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Added a ~ glob, similar to *. fl= here means: return all conventional stored fields and all non stored docvalues.  \\n\\n Purely from an interface perspective (I haven\'t looked at the code), it feels like this should be transparent. \\nIt would be nice to be able to transition from an indexed+stored field to an indexed+docValues field and not have any of the clients know\\/care. \\n\\n  \\n fl=myfield   \\/\\/ returns from either stored or docValues\\n fl=*_i          \\/\\/ returns all stored or docValues fields ending in _i\\n fl=*             \\/\\/ returns all stored fields and all docValues fields that are not stored \\n \\n  \\n\\n If there is a need to distinguish between docValues as an alternative to a stored field, and docValues as an implementation detail that you don\'t want to return to the user (say you transitioned from an indexed-only field to an indexed+docValues field  or docValues-only field), then we could introduce a field flag for the schema. \\nSomething like includeInStored=true\\/false or asStored=true\\/false              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15011925\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15011925&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15011925\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15011925_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011925_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 20:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T20:45:23+0000\'\u003e18\\/Nov\\/15 20:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eIf there is a need to distinguish between docValues as an alternative to a stored field\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI think this would be the case only for multi valued fields at least until we had an alternative version of docValue multi valued preserving the original field (i.e. not sorted, not set) using something like BinaryDocValues underneath as you mentioned earlier. \u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI\'ll look at what it will take to modify the LazyDocument to make this work differently. Are you already looking into it, or have some thoughts around it?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eDoing this properly requires us to be able to know all the possibly docValue fields on a document upfront and a way for LazyDocument to be able to load the lazy field from doc values. \u003c\\/p\u003e\\n\\n\u003cp\u003eA large goal of this should be to have the ability to skip reading stored fields altogether if the field requirement is fully satisfied by docValues. However I\'m not sure if using docValues would be more efficient than stored fields when all the fields are being returned. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15011925_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011925_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 20:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T20:45:23+0000\'\u003e18\\/Nov\\/15 20:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     If there is a need to distinguish between docValues as an alternative to a stored field  \\n\\n I think this would be the case only for multi valued fields at least until we had an alternative version of docValue multi valued preserving the original field (i.e. not sorted, not set) using something like BinaryDocValues underneath as you mentioned earlier.  \\n\\n  I\'ll look at what it will take to modify the LazyDocument to make this work differently. Are you already looking into it, or have some thoughts around it?  \\n\\n Doing this properly requires us to be able to know all the possibly docValue fields on a document upfront and a way for LazyDocument to be able to load the lazy field from doc values.  \\n\\n A large goal of this should be to have the ability to skip reading stored fields altogether if the field requirement is fully satisfied by docValues. However I\'m not sure if using docValues would be more efficient than stored fields when all the fields are being returned.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15011950\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15011950&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15011950\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15011950_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011950_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T20:57:14+0000\'\u003e18\\/Nov\\/15 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI think this would be the case only for multi valued fields at least until we had an alternative version of docValue multi valued preserving the original field (i.e. not sorted, not set) using something like BinaryDocValues underneath as you mentioned earlier.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYup, I agree.  I think this is just a case of us having incomplete type support.  We need to distinguish between multiValued and setValued in general.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15011950_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011950_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T20:57:14+0000\'\u003e18\\/Nov\\/15 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I think this would be the case only for multi valued fields at least until we had an alternative version of docValue multi valued preserving the original field (i.e. not sorted, not set) using something like BinaryDocValues underneath as you mentioned earlier.  \\n\\n Yup, I agree.  I think this is just a case of us having incomplete type support.  We need to distinguish between multiValued and setValued in general.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15011981\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15011981&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15011981\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15011981_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011981_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 21:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T21:15:48+0000\'\u003e18\\/Nov\\/15 21:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated patch. This has:\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003eNow uses \u003ctt\u003e**\u003c\\/tt\u003e for returning all non-stored docvalues fields.\u003c\\/li\u003e\\n\\t\u003cli\u003eUsing docvalues API directly for single valued fields (instead of valuesource api)\u003c\\/li\u003e\\n\\t\u003cli\u003eFew cleanups here and there.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15011981_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15011981_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 21:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T21:15:48+0000\'\u003e18\\/Nov\\/15 21:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated patch. This has: \\n \\n\\t Now uses  **  for returning all non-stored docvalues fields. \\n\\t Using docvalues API directly for single valued fields (instead of valuesource api) \\n\\t Few cleanups here and there. \\n \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15012035\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15012035&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15012035\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15012035_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012035_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 21:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T21:34:30+0000\'\u003e18\\/Nov\\/15 21:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003ePurely from an interface perspective (I haven\'t looked at the code), it feels like this should be transparent.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eThat makes sense, having \u003ctt\u003e*\u003c\\/tt\u003e return all stored and non-stored docvalues. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15012035_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012035_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 21:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T21:34:30+0000\'\u003e18\\/Nov\\/15 21:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Purely from an interface perspective (I haven\'t looked at the code), it feels like this should be transparent.  \\n That makes sense, having  *  return all stored and non-stored docvalues.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15012076\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15012076&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15012076\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15012076_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012076_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 21:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T21:51:01+0000\'\u003e18\\/Nov\\/15 21:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe set of fields that have docValues and are not stored can be computed once per index snapshot (from the FieldInfos+schema).\u003cbr\\/\u003e\\nThere should be no performance impact if there are no un-stored docValues fields in use.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15012076_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012076_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 21:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T21:51:01+0000\'\u003e18\\/Nov\\/15 21:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The set of fields that have docValues and are not stored can be computed once per index snapshot (from the FieldInfos+schema). \\nThere should be no performance impact if there are no un-stored docValues fields in use.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15012103\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15012103&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15012103\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15012103_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012103_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T21:55:56+0000\'\u003e18\\/Nov\\/15 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eThe set of fields that have docValues and are not stored can be computed once per index snapshot (from the FieldInfos+schema).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eThat is what I have done at the time of searcher creation (in SolrIndexSearcher\'s constructor) in my last patch. Does that sound fine?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15012103_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012103_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Nov\\/15 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-18T21:55:56+0000\'\u003e18\\/Nov\\/15 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     The set of fields that have docValues and are not stored can be computed once per index snapshot (from the FieldInfos+schema).  \\n That is what I have done at the time of searcher creation (in SolrIndexSearcher\'s constructor) in my last patch. Does that sound fine?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15012580\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15012580&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15012580\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15012580_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012580_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 01:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T01:45:14+0000\'\u003e19\\/Nov\\/15 01:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eDoes that sound fine?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYep.  Seems like we will only have a perf issue when we have many sparse un-stored docValue fields.  At that point it might make sense to have a separate docValues field that contains the list of fields for the document.  That can be saved for a future optimization though.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15012580_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012580_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 01:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T01:45:14+0000\'\u003e19\\/Nov\\/15 01:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Does that sound fine?  \\n\\n Yep.  Seems like we will only have a perf issue when we have many sparse un-stored docValue fields.  At that point it might make sense to have a separate docValues field that contains the list of fields for the document.  That can be saved for a future optimization though.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15012633\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15012633&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15012633\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15012633_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012633_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 02:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T02:14:02+0000\'\u003e19\\/Nov\\/15 02:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGiven that stored values are compressed in 16k blocks and to return a single field from the stored data requires decompressing 16K, how much effect do LazyDocuments really have any more? I don\'t know, just askin\'\u003c\\/p\u003e\\n\\n\u003cp\u003eSince docValues avoids decompressing 16k per doc, disk seeks and the like I strongly suspect that it is vastly more efficient than getting the stored values. That\'s how Streaming Aggregation can return on 200k-400k docs\\/second.\u003c\\/p\u003e\\n\\n\u003cp\u003eAll that said, I suspect that there are negligible savings (or perhaps even costs) in mixing the two, i.e. if \u003cem\u003eany\u003c\\/em\u003e field to be returned is not DV, you might as well return all the fields from the stored data.\u003c\\/p\u003e\\n\\n\u003cp\u003eTesting would tell though.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15012633_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012633_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 02:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T02:14:02+0000\'\u003e19\\/Nov\\/15 02:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Given that stored values are compressed in 16k blocks and to return a single field from the stored data requires decompressing 16K, how much effect do LazyDocuments really have any more? I don\'t know, just askin\' \\n\\n Since docValues avoids decompressing 16k per doc, disk seeks and the like I strongly suspect that it is vastly more efficient than getting the stored values. That\'s how Streaming Aggregation can return on 200k-400k docs\\/second. \\n\\n All that said, I suspect that there are negligible savings (or perhaps even costs) in mixing the two, i.e. if  any  field to be returned is not DV, you might as well return all the fields from the stored data. \\n\\n Testing would tell though.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15012754\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15012754&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15012754\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15012754_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012754_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 04:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T04:11:23+0000\'\u003e19\\/Nov\\/15 04:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAdded a patch based on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\" class=\\\"user-hover\\\" rel=\\\"ichattopadhyaya\\\"\u003eIshan Chattopadhyaya\u003c\\/a\u003e latest patch.\u003cbr\\/\u003e\\nneeds to be perf tested.\u003c\\/p\u003e\\n\\n\u003cp\u003eTheoretical optimization, will skip reading from stored fields if all the requested fields are available in docValues. (changes mostly to DocStreamer)\u003cbr\\/\u003e\\nCaveats being:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eCannot optimize if any fields are multi valued.\u003c\\/li\u003e\\n\\t\u003cli\u003eCannot optimize for * queries.\u003c\\/li\u003e\\n\\t\u003cli\u003eDoes not cache the document (slower in the long run?)\\n\\t\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\\t\u003cli\u003eHow can we cache? using doc.getField, perhaps? or LazyDocument?\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15012754_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012754_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 04:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T04:11:23+0000\'\u003e19\\/Nov\\/15 04:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Added a patch based on  Ishan Chattopadhyaya  latest patch. \\nneeds to be perf tested. \\n\\n Theoretical optimization, will skip reading from stored fields if all the requested fields are available in docValues. (changes mostly to DocStreamer) \\nCaveats being: \\n \\n\\t Cannot optimize if any fields are multi valued. \\n\\t Cannot optimize for * queries. \\n\\t Does not cache the document (slower in the long run?)\\n\\t \\n\\t\\t How can we cache? using doc.getField, perhaps? or LazyDocument? \\n\\t \\n\\t \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15012778\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15012778&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15012778\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15012778_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012778_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 04:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T04:34:20+0000\'\u003e19\\/Nov\\/15 04:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ereformatted patch to be svn style and cleaned up code from last update\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15012778_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012778_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 04:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T04:34:20+0000\'\u003e19\\/Nov\\/15 04:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    reformatted patch to be svn style and cleaned up code from last update              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15012795\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15012795&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15012795\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15012795_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012795_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 04:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T04:55:22+0000\'\u003e19\\/Nov\\/15 04:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eCaveats being:\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI think we can live with those caveats for now, and optimize later. A docValues fields containing list of other docValues fields sounds nice for a later optimization. Given that this is a functional improvement, as is, over what we have today (i.e. no ability to return nonstored docValues), we should carry on with it and optimize later to address those caveats.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eTheoretical optimization, will skip reading from stored fields if all the requested fields are available in docValues. (changes mostly to DocStreamer)\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eSounds good. It would be interesting to perf test this to measure the performance gains with doing this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15012795_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012795_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 04:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T04:55:22+0000\'\u003e19\\/Nov\\/15 04:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Caveats being:  \\n I think we can live with those caveats for now, and optimize later. A docValues fields containing list of other docValues fields sounds nice for a later optimization. Given that this is a functional improvement, as is, over what we have today (i.e. no ability to return nonstored docValues), we should carry on with it and optimize later to address those caveats. \\n\\n  Theoretical optimization, will skip reading from stored fields if all the requested fields are available in docValues. (changes mostly to DocStreamer)  \\n Sounds good. It would be interesting to perf test this to measure the performance gains with doing this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15012826\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15012826&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15012826\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15012826_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012826_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 05:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T05:24:48+0000\'\u003e19\\/Nov\\/15 05:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBack in the day, LazyField actually had a pointer directly into the index where the field value could be read.\u003cbr\\/\u003e\\nThat got remove from Lucene at some point, and was replaced with something just for compat sake IIRC that had an N^2 bug... doc was loaded on each lazy-field access, which Hoss found\\/fixed.  But that leaves less performance benefit to using LazyDocument.  On a quick look, it seems to load all lazy fields at once when the first lazy field is touched.  I guess these days it\'s more of a memory optimization than a performance one.\u003c\\/p\u003e\\n\\n\u003cp\u003eMight be worth considering new approaches (we can break back compat in trunk for 6.0).\u003cbr\\/\u003e\\nOr maybe subclass LazyDocument and do something different for docValues fields.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15012826_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15012826_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 05:24\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T05:24:48+0000\'\u003e19\\/Nov\\/15 05:24\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Back in the day, LazyField actually had a pointer directly into the index where the field value could be read. \\nThat got remove from Lucene at some point, and was replaced with something just for compat sake IIRC that had an N^2 bug... doc was loaded on each lazy-field access, which Hoss found\\/fixed.  But that leaves less performance benefit to using LazyDocument.  On a quick look, it seems to load all lazy fields at once when the first lazy field is touched.  I guess these days it\'s more of a memory optimization than a performance one. \\n\\n Might be worth considering new approaches (we can break back compat in trunk for 6.0). \\nOr maybe subclass LazyDocument and do something different for docValues fields.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15013356\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15013356&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15013356\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15013356_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013356_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 11:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T11:14:53+0000\'\u003e19\\/Nov\\/15 11:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 19\\/Nov\\/15 11:15\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated the patch with a minor one line fix in the multi-valued string field case:\u003c\\/p\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003e             doc.add(schemaField.getType().createField(schemaField, values.lookupOrd(i).utf8ToString(), 1f));\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eFyi, since I had already copied over the multivalued fields support from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e patch to this patch earlier, I\'ve made \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e depend on this issue. So, if we fix this issue now, we\'ll be able to fix (a) search results with non stored docvalues, (b) RTG of documents containing non stored docvalues, (c) atomic updates of documents containing non stored docvalues (for updates to both regular fields as well as non stored docvalues). I will make \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-5944\\\" title=\\\"Support updates of numeric DocValues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-5944\\\"\u003e\u003cdel\u003eSOLR-5944\u003c\\/del\u003e\u003c\\/a\u003e depend on this now, and update the patch there.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15013356_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013356_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 11:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T11:14:53+0000\'\u003e19\\/Nov\\/15 11:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 19\\/Nov\\/15 11:15\\\"\u003eedited\u003c\\/span\u003e                   Updated the patch with a minor one line fix in the multi-valued string field case: \\n  \\n              doc.add(schemaField.getType().createField(schemaField, values.lookupOrd(i).utf8ToString(), 1f));\\n \\n  \\n\\n Fyi, since I had already copied over the multivalued fields support from   SOLR-8276   patch to this patch earlier, I\'ve made   SOLR-8276   depend on this issue. So, if we fix this issue now, we\'ll be able to fix (a) search results with non stored docvalues, (b) RTG of documents containing non stored docvalues, (c) atomic updates of documents containing non stored docvalues (for updates to both regular fields as well as non stored docvalues). I will make   SOLR-5944   depend on this now, and update the patch there.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15013542\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15013542&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15013542\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15013542_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013542_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 13:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T13:33:16+0000\'\u003e19\\/Nov\\/15 13:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m not sure how this should be handled. \u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/document\\/Field.java#L241\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/document\\/Field.java#L241\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eneeds to be modified to\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e    \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (!type.stored() &amp;&amp; type.indexOptions() == IndexOptions.NONE &amp;&amp; type.docValuesType() != DocValuesType.NONE) {\\n      \u003cspan class=\\\"code-keyword\\\"\u003ethrow\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e IllegalArgumentException(\u003cspan class=\\\"code-quote\\\"\u003e\\\"it doesn\'t make sense to have a field that \\\"\u003c\\/span\u003e\\n        + \u003cspan class=\\\"code-quote\\\"\u003e\\\"is neither indexed nor stored nor docValues\\\"\u003c\\/span\u003e);\\n    }\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15013542_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013542_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 13:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T13:33:16+0000\'\u003e19\\/Nov\\/15 13:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m not sure how this should be handled.  \\n\\n  https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/trunk\\/lucene\\/core\\/src\\/java\\/org\\/apache\\/lucene\\/document\\/Field.java#L241  \\n\\n needs to be modified to \\n  \\n      if  (!type.stored() &amp;&amp; type.indexOptions() == IndexOptions.NONE &amp;&amp; type.docValuesType() != DocValuesType.NONE) {\\n       throw   new  IllegalArgumentException( \\\"it doesn\'t make sense to have a field that \\\" \\n        +  \\\"is neither indexed nor stored nor docValues\\\" );\\n    }\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15013555\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15013555&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15013555\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15013555_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013555_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 13:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T13:44:03+0000\'\u003e19\\/Nov\\/15 13:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think you meant a \u003ctt\u003etype.docValuesType() == DocValuesType.NONE\u003c\\/tt\u003e. I agree, we should make the change.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15013555_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013555_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 13:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T13:44:03+0000\'\u003e19\\/Nov\\/15 13:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think you meant a  type.docValuesType() == DocValuesType.NONE . I agree, we should make the change.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15013633\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15013633&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15013633\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15013633_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013633_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 14:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T14:51:15+0000\'\u003e19\\/Nov\\/15 14:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cdiv class=\\\"preformatted panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"preformattedContent panelContent\\\"\u003e\\n\u003cpre\u003efl=myfield  \\/\\/ returns from either stored or docValues\\nfl=*_i         \\/\\/ returns all stored or docValues fields ending in _i\\nfl=*            \\/\\/ returns all stored fields and all docValues fields that are not stored\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eThis is a TODO. Also, need to add more tests around multivalued fields (here and in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e).\u003cbr\\/\u003e\\nAs for LazyFields for non stored docvalues, I think it is an optimization that we can deal with later in a separate issue. Doing what we have in this patch itself is progress. If some committer can please take this forward, can we get this in for 5.4?\u003cbr\\/\u003e\\nKeith, do you wish to tackle the above TODO (and other todo items)? If so, I will focus on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-5944\\\" title=\\\"Support updates of numeric DocValues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-5944\\\"\u003e\u003cdel\u003eSOLR-5944\u003c\\/del\u003e\u003c\\/a\u003e for now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15013633_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013633_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 14:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T14:51:15+0000\'\u003e19\\/Nov\\/15 14:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n  \\n fl=myfield  \\/\\/ returns from either stored or docValues\\nfl=*_i         \\/\\/ returns all stored or docValues fields ending in _i\\nfl=*            \\/\\/ returns all stored fields and all docValues fields that are not stored\\n \\n   \\n This is a TODO. Also, need to add more tests around multivalued fields (here and in   SOLR-8276  ). \\nAs for LazyFields for non stored docvalues, I think it is an optimization that we can deal with later in a separate issue. Doing what we have in this patch itself is progress. If some committer can please take this forward, can we get this in for 5.4? \\nKeith, do you wish to tackle the above TODO (and other todo items)? If so, I will focus on   SOLR-5944   for now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15013699\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15013699&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15013699\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15013699_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013699_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 15:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T15:28:52+0000\'\u003e19\\/Nov\\/15 15:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\" class=\\\"user-hover\\\" rel=\\\"yseeley@gmail.com\\\"\u003eYonik Seeley\u003c\\/a\u003e: re. * vs **\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m all for using just one glob pattern \u003ctt\u003e*\u003c\\/tt\u003e for both doc values and stored, however I think its worth it to consider the philosophical implications on backwards compat. While it won\'t break anything it does introduce some unexpected behavior without much warning or a way to disable it.\u003c\\/p\u003e\\n\\n\u003cp\u003eI propose we add a \u003ctt\u003efl.wildcardDV=true\u003c\\/tt\u003e option to turn on this behavior in Solr 5x but enable it by default in 6. We can optionally later add a field type option where you can use docValues but not have the field returned in your result set. \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eIshan I can tackle those.\u003c\\/p\u003e\\n\\n\u003cp\u003eRegarding my earlier update about modifying \u003ctt\u003eField\u003c\\/tt\u003e, its doesn\'t seem as trivial as I originally thought as \u003ctt\u003ecreateField\u003c\\/tt\u003e doesn\'t set \u003ctt\u003eDocValuesType\u003c\\/tt\u003e there is a separate field that gets created for doc values after \u003ctt\u003ecreateField\u003c\\/tt\u003e is called for the first time. I\'m not sure what the implications of modifying this behavior would be. I think it\'s ok to leave this limitation in for now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15013699_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013699_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 15:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T15:28:52+0000\'\u003e19\\/Nov\\/15 15:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Yonik Seeley : re. * vs ** \\n\\n I\'m all for using just one glob pattern  *  for both doc values and stored, however I think its worth it to consider the philosophical implications on backwards compat. While it won\'t break anything it does introduce some unexpected behavior without much warning or a way to disable it. \\n\\n I propose we add a  fl.wildcardDV=true  option to turn on this behavior in Solr 5x but enable it by default in 6. We can optionally later add a field type option where you can use docValues but not have the field returned in your result set.  \\n\\n\\n Ishan I can tackle those. \\n\\n Regarding my earlier update about modifying  Field , its doesn\'t seem as trivial as I originally thought as  createField  doesn\'t set  DocValuesType  there is a separate field that gets created for doc values after  createField  is called for the first time. I\'m not sure what the implications of modifying this behavior would be. I think it\'s ok to leave this limitation in for now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15013814\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15013814&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15013814\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15013814_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013814_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T16:38:52+0000\'\u003e19\\/Nov\\/15 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8316\\\" title=\\\"Allow a field to be stored=false indexed=false docValues=true\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8316\\\"\u003e\u003cdel\u003eSOLR-8316\u003c\\/del\u003e\u003c\\/a\u003e for my last point\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15013814_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013814_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 16:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T16:38:52+0000\'\u003e19\\/Nov\\/15 16:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created   SOLR-8316   for my last point              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15013915\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15013915&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15013915\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15013915_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013915_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T17:08:31+0000\'\u003e19\\/Nov\\/15 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Yonik Seeley - 19\\/Nov\\/15 17:46\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI think you meant a type.docValuesType() == DocValuesType.NONE. I agree, we should make the change.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI don\'t think some of the Lucene folks want docValues modeled as stored fields at the Lucene level.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne possible option is just move to something higher lievel like SolrDocument.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI propose we add a \u003ctt\u003efl.wildcardDV=true\u003c\\/tt\u003e option to turn on this behavior in Solr 5x but enable it by default in 6.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eWe could bump the schema number to change the default, and that would enable the folks on 5x to get transparent migration from stored fields to docValues if they want w\\/o having to change clients \\/ query params.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd if finer grained control is desirable, a schema field flag actAsStored=true (or whatever better name people come up with) could have it\'s default set differently based on the schema version.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15013915_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15013915_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/15 17:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-19T17:08:31+0000\'\u003e19\\/Nov\\/15 17:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Yonik Seeley - 19\\/Nov\\/15 17:46\\\"\u003eedited\u003c\\/span\u003e                    I think you meant a type.docValuesType() == DocValuesType.NONE. I agree, we should make the change.  \\n\\n I don\'t think some of the Lucene folks want docValues modeled as stored fields at the Lucene level. \\n\\n One possible option is just move to something higher lievel like SolrDocument. \\n\\n  I propose we add a  fl.wildcardDV=true  option to turn on this behavior in Solr 5x but enable it by default in 6.  \\n We could bump the schema number to change the default, and that would enable the folks on 5x to get transparent migration from stored fields to docValues if they want w\\/o having to change clients \\/ query params. \\n\\n And if finer grained control is desirable, a schema field flag actAsStored=true (or whatever better name people come up with) could have it\'s default set differently based on the schema version. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15018489\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15018489&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15018489\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15018489_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15018489_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/15 18:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-20T18:42:01+0000\'\u003e20\\/Nov\\/15 18:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 20\\/Nov\\/15 18:46\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003e We are adding fields retrieved from docValues by doing the following:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003edoc.add(schemaField.getType().createField(schemaField, sdv.get(docid).utf8ToString(), 1.0f));\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003ethis \u003ctt\u003ecreateField\u003c\\/tt\u003e call is returning \u003ctt\u003enull\u003c\\/tt\u003e based on the code I wrote above. Perhaps we need to create fields differently, or change how \u003ctt\u003ecreateField\u003c\\/tt\u003e works.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;Referencing this comment from SOLR-8316&#93;\u003c\\/span\u003e. Can we \\\"decorate\\\" the SolrDocument in DocStreamer instead of trying to do that with the StoredDocument from lucene? That will give us the benefits: (a) we won\'t need to fix \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8316\\\" title=\\\"Allow a field to be stored=false indexed=false docValues=true\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8316\\\"\u003e\u003cdel\u003eSOLR-8316\u003c\\/del\u003e\u003c\\/a\u003e (although I still don\'t understand how it affects the work here, since I thought the createField was doing its job and consequently the tests were passing. Maybe I\'m missing something), (b) we can leave the StoredDocument as is, and not change it from under the document cache (which is probably an awkward thing with the current patch), (c) it has efficient containsKey(), if needed, so the linear \u003ctt\u003eO&#40;n&#41;\u003c\\/tt\u003e cost can be avoided. Though, point b will mean we won\'t need containsKey() anyway.\u003cbr\\/\u003e\\nThis also means that \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e will have to change, and there we will have to decorate a SolrInputDocument instead of a SolrDocument. \u003cbr\\/\u003e\\nKeith, Yonik, what do you think?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15018489_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15018489_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/15 18:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-20T18:42:01+0000\'\u003e20\\/Nov\\/15 18:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 20\\/Nov\\/15 18:46\\\"\u003eedited\u003c\\/span\u003e                   \\n  We are adding fields retrieved from docValues by doing the following: \\n  \\n doc.add(schemaField.getType().createField(schemaField, sdv.get(docid).utf8ToString(), 1.0f));\\n \\n  \\n\\n this  createField  call is returning  null  based on the code I wrote above. Perhaps we need to create fields differently, or change how  createField  works.  \\n  &#91;Referencing this comment from SOLR-8316&#93; . Can we \\\"decorate\\\" the SolrDocument in DocStreamer instead of trying to do that with the StoredDocument from lucene? That will give us the benefits: (a) we won\'t need to fix   SOLR-8316   (although I still don\'t understand how it affects the work here, since I thought the createField was doing its job and consequently the tests were passing. Maybe I\'m missing something), (b) we can leave the StoredDocument as is, and not change it from under the document cache (which is probably an awkward thing with the current patch), (c) it has efficient containsKey(), if needed, so the linear  O&#40;n&#41;  cost can be avoided. Though, point b will mean we won\'t need containsKey() anyway. \\nThis also means that   SOLR-8276   will have to change, and there we will have to decorate a SolrInputDocument instead of a SolrDocument.  \\nKeith, Yonik, what do you think?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15018760\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15018760&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15018760\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15018760_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15018760_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/15 20:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-20T20:50:40+0000\'\u003e20\\/Nov\\/15 20:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt looks like calling \u003ctt\u003ecreateFields\u003c\\/tt\u003e instead actually creates both the fields we need. \u003c\\/p\u003e\\n\\n\u003cp\u003eI was able to change decoration to something like this\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eSortedDocValues sdv = leafReader.getSortedDocValues(fieldName);\\n\u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e(StorableField s: schemaField.getType().createFields(schemaField, sdv.get(docid).utf8ToString(), 1.0f)) {\\n  \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e(s != \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e) doc.add(s);\\n}\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003ewhich makes the the SortedDocValueField get added to the document properly, but when trying to write the string value later on it doesn\'t write anything because the implementation in \u003ctt\u003eField\u003c\\/tt\u003e doesn\'t know how to write a \u003ctt\u003eBytesRef\u003c\\/tt\u003e. We can override this is in \u003ctt\u003eSortedDocValueField\u003c\\/tt\u003e but all of that stuff is in lucene code. It looks like \u003ctt\u003eStrField#createFields\u003c\\/tt\u003e converts the string value to a \u003ctt\u003eBytesRef\u003c\\/tt\u003e for the constructors of the doc values fields.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eI\'m still a bit confused how \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e works for you, i get a NPE when trying pull back the non-indexed\\/non-stored field in the current impl.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15018760_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15018760_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/15 20:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-20T20:50:40+0000\'\u003e20\\/Nov\\/15 20:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It looks like calling  createFields  instead actually creates both the fields we need.  \\n\\n I was able to change decoration to something like this \\n  \\n SortedDocValues sdv = leafReader.getSortedDocValues(fieldName);\\n for (StorableField s: schemaField.getType().createFields(schemaField, sdv.get(docid).utf8ToString(), 1.0f)) {\\n   if (s !=  null ) doc.add(s);\\n}\\n \\n  \\n\\n which makes the the SortedDocValueField get added to the document properly, but when trying to write the string value later on it doesn\'t write anything because the implementation in  Field  doesn\'t know how to write a  BytesRef . We can override this is in  SortedDocValueField  but all of that stuff is in lucene code. It looks like  StrField#createFields  converts the string value to a  BytesRef  for the constructors of the doc values fields. \\n\\n\\n I\'m still a bit confused how   SOLR-8276   works for you, i get a NPE when trying pull back the non-indexed\\/non-stored field in the current impl.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15018805\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15018805&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15018805\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15018805_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15018805_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/15 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-20T21:14:08+0000\'\u003e20\\/Nov\\/15 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 20\\/Nov\\/15 21:16\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI\'m still a bit confused how \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e works for you, i get a NPE when trying pull back the non-indexed\\/non-stored field in the current impl.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI added another document (id=4) to the test at \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e. I see no problems whatsoever with string dv fields (single valued), which internally uses SortedDocValues. The test passes fine. Also, the test at BasicFunctionalityTest works fine with the \u003ctt\u003etest_s_dvo\u003c\\/tt\u003e field. Both \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e and the latter test use the latest patch here. So, as per the tests, the createField seems to do its job. Am I missing something?\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, beyond this point, should we avoid using the schemaField.getType().createField() for fields in the StoredDocument (lucene) and instead do this decoration on the SolrDocument which is created from this StoredDocument? (See my comment before this one). I can try to put together a strawman patch for this approach, if you suggest, to see if it works.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15018805_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15018805_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Nov\\/15 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-20T21:14:08+0000\'\u003e20\\/Nov\\/15 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 20\\/Nov\\/15 21:16\\\"\u003eedited\u003c\\/span\u003e                    I\'m still a bit confused how   SOLR-8276   works for you, i get a NPE when trying pull back the non-indexed\\/non-stored field in the current impl.  \\n I added another document (id=4) to the test at   SOLR-8276  . I see no problems whatsoever with string dv fields (single valued), which internally uses SortedDocValues. The test passes fine. Also, the test at BasicFunctionalityTest works fine with the  test_s_dvo  field. Both   SOLR-8276   and the latter test use the latest patch here. So, as per the tests, the createField seems to do its job. Am I missing something? \\n\\n However, beyond this point, should we avoid using the schemaField.getType().createField() for fields in the StoredDocument (lucene) and instead do this decoration on the SolrDocument which is created from this StoredDocument? (See my comment before this one). I can try to put together a strawman patch for this approach, if you suggest, to see if it works.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15021333\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15021333&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15021333\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15021333_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15021333_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Nov\\/15 01:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-23T01:32:04+0000\'\u003e23\\/Nov\\/15 01:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI changed \u003ctt\u003edecorateDocValueFields\u003c\\/tt\u003e to operate based on a \u003ctt\u003eSolrDocument\u003c\\/tt\u003e instead of a lucene \u003ctt\u003eStoredDocument\u003c\\/tt\u003e and no longer relies on createField (and it now works on non-stored\\/non-indexed fields). Also includes a test for the non-stored\\/non-indexed field type.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn this patch I also removed code related to \u003ctt\u003e&#42;&#42;\u003c\\/tt\u003e in favor of \u003ctt\u003e*\u003c\\/tt\u003e for docValue related fields. Still TODO is to make this behavior only apply to a new schema version.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15021333_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15021333_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Nov\\/15 01:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-23T01:32:04+0000\'\u003e23\\/Nov\\/15 01:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I changed  decorateDocValueFields  to operate based on a  SolrDocument  instead of a lucene  StoredDocument  and no longer relies on createField (and it now works on non-stored\\/non-indexed fields). Also includes a test for the non-stored\\/non-indexed field type. \\n\\n In this patch I also removed code related to  &#42;&#42;  in favor of  *  for docValue related fields. Still TODO is to make this behavior only apply to a new schema version.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15025584\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15025584&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15025584\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15025584_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15025584_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/15 22:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-24T22:31:34+0000\'\u003e24\\/Nov\\/15 22:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdating the patch with the following changes:\u003c\\/p\u003e\\n\u003col\u003e\\n\\t\u003cli\u003eSince this decorate method would be used from the RealTimeGetComponent as well, and there it will have to decorate a SolrInputDocument, I\'ve changed the method to handle both a SolrDocument and SolrInputDocument, depending on what is sent in.\u003c\\/li\u003e\\n\\t\u003cli\u003eThe BasicFunctionalityTest was failing for me since it depended on a field \\\"test_s_dv\\\", which didn\'t exist in the schema. I\'ve added that to the schema.xml.\u003c\\/li\u003e\\n\\t\u003cli\u003eAdded a javadoc for the decorate method.\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003cp\u003eKeith, please review. If you think these changes make sense, then I\'ll base \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e on this one. As you mentioned, the schema version check is still a TODO.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15025584_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15025584_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/15 22:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-24T22:31:34+0000\'\u003e24\\/Nov\\/15 22:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updating the patch with the following changes: \\n \\n\\t Since this decorate method would be used from the RealTimeGetComponent as well, and there it will have to decorate a SolrInputDocument, I\'ve changed the method to handle both a SolrDocument and SolrInputDocument, depending on what is sent in. \\n\\t The BasicFunctionalityTest was failing for me since it depended on a field \\\"test_s_dv\\\", which didn\'t exist in the schema. I\'ve added that to the schema.xml. \\n\\t Added a javadoc for the decorate method. \\n \\n\\n\\n Keith, please review. If you think these changes make sense, then I\'ll base   SOLR-8276   on this one. As you mentioned, the schema version check is still a TODO.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15025652\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15025652&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15025652\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15025652_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15025652_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/15 23:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-24T23:06:41+0000\'\u003e24\\/Nov\\/15 23:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJust noticed, EnumFieldTest.testEnumSort() fails with the last patch (and the one before it) when the severity_dv is chosen as the enum field. I think we\'re handling the enum dv fields incorrectly.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15025652_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15025652_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/15 23:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-24T23:06:41+0000\'\u003e24\\/Nov\\/15 23:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Just noticed, EnumFieldTest.testEnumSort() fails with the last patch (and the one before it) when the severity_dv is chosen as the enum field. I think we\'re handling the enum dv fields incorrectly.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15025686\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15025686&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15025686\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15025686_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15025686_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/15 23:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-24T23:21:45+0000\'\u003e24\\/Nov\\/15 23:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m working on a separate patch which fixes EnumField, it also adds support for \\\"*_dv\\\" type queries. I\'ll take a look at merging your change in too. Do you think it would be worth adding an interface for SolrDocument and SolrInputDocument to implement which includes \u003ctt\u003econtainsKey} and {{addField\u003c\\/tt\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15025686_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15025686_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Nov\\/15 23:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-24T23:21:45+0000\'\u003e24\\/Nov\\/15 23:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m working on a separate patch which fixes EnumField, it also adds support for \\\"*_dv\\\" type queries. I\'ll take a look at merging your change in too. Do you think it would be worth adding an interface for SolrDocument and SolrInputDocument to implement which includes  containsKey} and {{addField               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15025770\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15025770&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15025770\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15025770_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15025770_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Nov\\/15 00:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-25T00:06:42+0000\'\u003e25\\/Nov\\/15 00:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 25\\/Nov\\/15 00:08\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI was thinking of doing exactly that! \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8339\\\" title=\\\"SolrDocument and SolrInputDocument should have a common interface\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8339\\\"\u003e\u003cdel\u003eSOLR-8339\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15025770_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15025770_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Nov\\/15 00:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-25T00:06:42+0000\'\u003e25\\/Nov\\/15 00:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 25\\/Nov\\/15 00:08\\\"\u003eedited\u003c\\/span\u003e                   I was thinking of doing exactly that!   SOLR-8339                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15028962\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15028962&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15028962\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15028962_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15028962_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/15 15:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-26T15:11:35+0000\'\u003e26\\/Nov\\/15 15:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGuys, sorry for not paying attention to this earlier but on a quick reading through the comments and an offline conversation with Ishan, I want to point out a few things.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eTheoretical optimization, will skip reading from stored fields if all the requested fields are available in docValues\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI don\'t think some of the Lucene folks want docValues modeled as stored fields at the Lucene level.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eFrom a performance perspective, reading values from DocValues always (if they exist) can be horrible because each field access in docvalues may need a random disk seek, whereas, all stored fields for a document are kept together and need only 1 random seek and a sequential block read. That, and the fact that docvalues aren\'t in the document cache makes me think that we should not model docvalues as a stored field and treat them equivalently. At least not without supporting benchmarks.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo my suggestion is that we not mix the two issues i.e. keep this issue focused on adding syntactic sugar to read field from doc values for non-stored fields in whatever ways proposed. By the way, this is already possible using the \'field\' DocTransformer e.g. fl=field(my_dv_field)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15028962_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15028962_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/15 15:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-26T15:11:35+0000\'\u003e26\\/Nov\\/15 15:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Guys, sorry for not paying attention to this earlier but on a quick reading through the comments and an offline conversation with Ishan, I want to point out a few things. \\n\\n  Theoretical optimization, will skip reading from stored fields if all the requested fields are available in docValues  \\n\\n  I don\'t think some of the Lucene folks want docValues modeled as stored fields at the Lucene level.  \\n\\n From a performance perspective, reading values from DocValues always (if they exist) can be horrible because each field access in docvalues may need a random disk seek, whereas, all stored fields for a document are kept together and need only 1 random seek and a sequential block read. That, and the fact that docvalues aren\'t in the document cache makes me think that we should not model docvalues as a stored field and treat them equivalently. At least not without supporting benchmarks. \\n\\n So my suggestion is that we not mix the two issues i.e. keep this issue focused on adding syntactic sugar to read field from doc values for non-stored fields in whatever ways proposed. By the way, this is already possible using the \'field\' DocTransformer e.g. fl=field(my_dv_field)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15029079\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15029079&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15029079\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15029079_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15029079_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/15 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-26T16:32:36+0000\'\u003e26\\/Nov\\/15 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eSo my suggestion is that we not mix the two issues\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI\'ve created \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e to deal with that optimization of reading stored valued fields from docvalues, so that we can focus only on the non-stored dv case (which is a functionality improvement\\/new feature, as opposed to an optimization).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eBy the way, this is already possible using the \'field\' DocTransformer e.g. fl=field(my_dv_field)\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eIndeed. This currently doesn\'t work for multivalued fields.\u003c\\/p\u003e\\n\\n\u003cp\u003eOn a different note, if we are going to tackle only the non-stored docValues fields for now in this issue, does it now make sense to do this, \u003cb\u003eperformance wise\u003c\\/b\u003e, at the DocTransformer instead of the SolrIndexSearcher? If done that way, the RTG and atomic updates for such non-stored dv fields will work if we also use a doctransformer after the searcher has returned the docs. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\" class=\\\"user-hover\\\" rel=\\\"yseeley@gmail.com\\\"\u003eYonik Seeley\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\" class=\\\"user-hover\\\" rel=\\\"erickerickson\\\"\u003eErick Erickson\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\" class=\\\"user-hover\\\" rel=\\\"shalinmangar\\\"\u003eShalin Shekhar Mangar\u003c\\/a\u003e do you have any thoughts\\/recommendation, please?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15029079_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15029079_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Nov\\/15 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-26T16:32:36+0000\'\u003e26\\/Nov\\/15 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     So my suggestion is that we not mix the two issues  \\n I\'ve created   SOLR-8344   to deal with that optimization of reading stored valued fields from docvalues, so that we can focus only on the non-stored dv case (which is a functionality improvement\\/new feature, as opposed to an optimization). \\n\\n  By the way, this is already possible using the \'field\' DocTransformer e.g. fl=field(my_dv_field)  \\n Indeed. This currently doesn\'t work for multivalued fields. \\n\\n On a different note, if we are going to tackle only the non-stored docValues fields for now in this issue, does it now make sense to do this,  performance wise , at the DocTransformer instead of the SolrIndexSearcher? If done that way, the RTG and atomic updates for such non-stored dv fields will work if we also use a doctransformer after the searcher has returned the docs.  Yonik Seeley ,  Erick Erickson ,  Shalin Shekhar Mangar  do you have any thoughts\\/recommendation, please?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15031289\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15031289&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15031289\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15031289_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15031289_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/15 03:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-30T03:34:14+0000\'\u003e30\\/Nov\\/15 03:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eFrom a performance perspective, reading values from DocValues always (if they exist) can be horrible because each field access in docvalues may need a random disk seek, whereas, all stored fields for a document are kept together and need only 1 random seek and a sequential block read.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI agree that reading values from DocValues always can be horrible, my line of thinking was that if you are asking for one or two fields from a large document and they are both dv and stored reading from dv would likely be much more efficient. It might make more sense to be able to get those values explicitly from docValues using the the transformer, or have some logic that can determine when it is more efficient. That should be discussed further in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eAt this point the question that remains; should we move forward with these patches and move logic for retrieving dv fields to SolrIndexSearcher, leaving out \u003ctt\u003e&#42;\u003c\\/tt\u003e, \u003ctt\u003e&#42;&#95;foo\u003c\\/tt\u003e and other \u003cem\u003eoptimizations\u003c\\/em\u003e for now? i.e. retrieve fields by name, if they exist in dv, but are not stored.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15031289_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15031289_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/15 03:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-30T03:34:14+0000\'\u003e30\\/Nov\\/15 03:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     From a performance perspective, reading values from DocValues always (if they exist) can be horrible because each field access in docvalues may need a random disk seek, whereas, all stored fields for a document are kept together and need only 1 random seek and a sequential block read.  \\n\\n I agree that reading values from DocValues always can be horrible, my line of thinking was that if you are asking for one or two fields from a large document and they are both dv and stored reading from dv would likely be much more efficient. It might make more sense to be able to get those values explicitly from docValues using the the transformer, or have some logic that can determine when it is more efficient. That should be discussed further in   SOLR-8344  . \\n\\n At this point the question that remains; should we move forward with these patches and move logic for retrieving dv fields to SolrIndexSearcher, leaving out  &#42; ,  &#42;&#95;foo  and other  optimizations  for now? i.e. retrieve fields by name, if they exist in dv, but are not stored.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15031910\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15031910&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15031910\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15031910_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15031910_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/15 15:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-30T15:07:49+0000\'\u003e30\\/Nov\\/15 15:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eFrom a performance perspective, reading values from DocValues always (if they exist) can be horrible because each field access in docvalues may need a random disk seek, whereas, all stored fields for a document are kept together and need only 1 random seek and a sequential block read.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eA few points:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003estored fields also require decompression (more overhead)\u003c\\/li\u003e\\n\\t\u003cli\u003euse of stored fields and docvalues at the same time is less memory efficient - the stored fields will also take up needed disk cache (although hopefully the OS will figure out which it should cache more aggressively\u003c\\/li\u003e\\n\\t\u003cli\u003epresumably one has docvalues because they need to be used, and they need to be fast... i.e. they already need to be cached.\u003c\\/li\u003e\\n\\t\u003cli\u003eif one as a small set of fields that are normally retrieved, it seems like a win again.\u003c\\/li\u003e\\n\\t\u003cli\u003ea \u003cb\u003every\u003c\\/b\u003e common case these days is that the entire index fits in memory.\u003c\\/li\u003e\\n\\t\u003cli\u003ewe\'re in the SSD era, and multiple \\\"seeks\\\" will still be more expensive if not cached, but much less so (and less so over time as non-volatile storage keeps improving)\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eIt seems like this should be a big win for the common case, and the ability to reindex your data or change config and not have to change the clients is important IMO.  It\'s like being able to reindex a date to a trie-date and have the clients not care.  We can already reindex a field as docValues, and sort, facet, do analytics, without changing client requests.  Optimizations to field value retrieval (or optionally removing redundantly stored data) should be the same.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15031910_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15031910_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/15 15:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-30T15:07:49+0000\'\u003e30\\/Nov\\/15 15:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     From a performance perspective, reading values from DocValues always (if they exist) can be horrible because each field access in docvalues may need a random disk seek, whereas, all stored fields for a document are kept together and need only 1 random seek and a sequential block read.  \\n\\n A few points: \\n \\n\\t stored fields also require decompression (more overhead) \\n\\t use of stored fields and docvalues at the same time is less memory efficient - the stored fields will also take up needed disk cache (although hopefully the OS will figure out which it should cache more aggressively \\n\\t presumably one has docvalues because they need to be used, and they need to be fast... i.e. they already need to be cached. \\n\\t if one as a small set of fields that are normally retrieved, it seems like a win again. \\n\\t a  very  common case these days is that the entire index fits in memory. \\n\\t we\'re in the SSD era, and multiple \\\"seeks\\\" will still be more expensive if not cached, but much less so (and less so over time as non-volatile storage keeps improving) \\n \\n\\n\\n It seems like this should be a big win for the common case, and the ability to reindex your data or change config and not have to change the clients is important IMO.  It\'s like being able to reindex a date to a trie-date and have the clients not care.  We can already reindex a field as docValues, and sort, facet, do analytics, without changing client requests.  Optimizations to field value retrieval (or optionally removing redundantly stored data) should be the same.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15031935\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15031935&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15031935\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15031935_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15031935_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/15 15:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-30T15:16:52+0000\'\u003e30\\/Nov\\/15 15:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eIt seems like this should be a big win for the common case, and the ability to reindex your data or change config and not have to change the clients is important IMO.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIt sounds like you are arguing for a common way to access docvalues and stored fields using the \'fl\' parameter. I\'m +1 to that.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut are you also arguing for always loading fields from docvalues even if they are stored?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15031935_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15031935_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/15 15:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-30T15:16:52+0000\'\u003e30\\/Nov\\/15 15:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     It seems like this should be a big win for the common case, and the ability to reindex your data or change config and not have to change the clients is important IMO.  \\n\\n It sounds like you are arguing for a common way to access docvalues and stored fields using the \'fl\' parameter. I\'m +1 to that. \\n\\n But are you also arguing for always loading fields from docvalues even if they are stored?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15032230\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15032230&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15032230\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15032230_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15032230_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/15 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-30T18:40:47+0000\'\u003e30\\/Nov\\/15 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eOn a different note, if we are going to tackle only the non-stored docValues fields for now in this issue, does it now make sense to do this, performance wise, at the DocTransformer instead of the SolrIndexSearcher?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI don\'t think there\'s any difference performance-wise. Changes to DocStreamer should be enough as it is called only for writing the response and not the entire result-set.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eAt this point the question that remains; should we move forward with these patches and move logic for retrieving dv fields to SolrIndexSearcher, leaving out *, *_foo and other optimizations for now? i.e. retrieve fields by name, if they exist in dv, but are not stored.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e+1 let\'s create a patch to retrieve fields by name, if they exist in dv, but are not stored. I also like Yonik\'s idea of bumping the schema version to have fl=* return all fields (stored + non-stored docvalues) in 5.x and to include both by default in trunk (6.x). So +1 to that as well.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003ea very common case these days is that the entire index fits in memory.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI propose a middle ground. Let\'s use Lucene\'s spinning disk utility method and prefer docvalues if we detect a SSD and fallback to reading from stored fields otherwise. Let\'s discuss this optimization in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e and keep the two issues separate.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15032230_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15032230_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/15 18:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-30T18:40:47+0000\'\u003e30\\/Nov\\/15 18:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     On a different note, if we are going to tackle only the non-stored docValues fields for now in this issue, does it now make sense to do this, performance wise, at the DocTransformer instead of the SolrIndexSearcher?  \\n\\n I don\'t think there\'s any difference performance-wise. Changes to DocStreamer should be enough as it is called only for writing the response and not the entire result-set. \\n\\n  At this point the question that remains; should we move forward with these patches and move logic for retrieving dv fields to SolrIndexSearcher, leaving out *, *_foo and other optimizations for now? i.e. retrieve fields by name, if they exist in dv, but are not stored.  \\n\\n +1 let\'s create a patch to retrieve fields by name, if they exist in dv, but are not stored. I also like Yonik\'s idea of bumping the schema version to have fl=* return all fields (stored + non-stored docvalues) in 5.x and to include both by default in trunk (6.x). So +1 to that as well. \\n\\n  a very common case these days is that the entire index fits in memory.  \\n\\n I propose a middle ground. Let\'s use Lucene\'s spinning disk utility method and prefer docvalues if we detect a SSD and fallback to reading from stored fields otherwise. Let\'s discuss this optimization in   SOLR-8344   and keep the two issues separate.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15033868\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15033868&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15033868\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15033868_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033868_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 15:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T15:29:52+0000\'\u003e01\\/Dec\\/15 15:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eIt sounds like you are arguing for a common way to access docvalues and stored fields using the \'fl\' parameter. I\'m +1 to that.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAh, ok... I mis-read your previous comment of \\\"i.e. keep this issue focused on adding syntactic sugar to read field from doc values for non-stored fields\\\" as advocating for new syntax for \\\"fl\\\" to load from non-stored docValue fields.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eLet\'s discuss this optimization in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e and keep the two issues separate.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI didn\'t really see it as separate (it depends on how you look at it),  I see it more as, we have a new feature that treats docValues as \\\"column-stored\\\".  What should the default behavior be when all requested fields are both column-stored and row-stored? I think we can make progress + commit this issue separately, but should still come at \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e \\\"fresh\\\" (i.e. not put the burden of proof on one default more than the other).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15033868_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033868_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 15:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T15:29:52+0000\'\u003e01\\/Dec\\/15 15:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     It sounds like you are arguing for a common way to access docvalues and stored fields using the \'fl\' parameter. I\'m +1 to that.  \\n\\n Ah, ok... I mis-read your previous comment of \\\"i.e. keep this issue focused on adding syntactic sugar to read field from doc values for non-stored fields\\\" as advocating for new syntax for \\\"fl\\\" to load from non-stored docValue fields. \\n\\n  Let\'s discuss this optimization in   SOLR-8344   and keep the two issues separate.  \\n\\n I didn\'t really see it as separate (it depends on how you look at it),  I see it more as, we have a new feature that treats docValues as \\\"column-stored\\\".  What should the default behavior be when all requested fields are both column-stored and row-stored? I think we can make progress + commit this issue separately, but should still come at   SOLR-8344   \\\"fresh\\\" (i.e. not put the burden of proof on one default more than the other).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15033899\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15033899&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15033899\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15033899_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033899_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 15:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T15:46:04+0000\'\u003e01\\/Dec\\/15 15:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAgreed. Let\'s wrap this up. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\" class=\\\"user-hover\\\" rel=\\\"ichattopadhyaya\\\"\u003eIshan Chattopadhyaya\u003c\\/a\u003e or \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\" class=\\\"user-hover\\\" rel=\\\"k317h\\\"\u003eKeith Laban\u003c\\/a\u003e, can one of you put up an updated patch? I can review and commit.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15033899_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033899_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 15:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T15:46:04+0000\'\u003e01\\/Dec\\/15 15:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Agreed. Let\'s wrap this up.  Ishan Chattopadhyaya  or  Keith Laban , can one of you put up an updated patch? I can review and commit.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15033903\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15033903&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15033903\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15033903_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033903_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 15:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T15:46:55+0000\'\u003e01\\/Dec\\/15 15:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdating the patch.\u003c\\/p\u003e\\n\u003col\u003e\\n\\t\u003cli\u003eOnly tackles non-stored docvalues.\u003c\\/li\u003e\\n\\t\u003cli\u003eDepends on the refactoring performed at \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8339\\\" title=\\\"SolrDocument and SolrInputDocument should have a common interface\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8339\\\"\u003e\u003cdel\u003eSOLR-8339\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15033903_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033903_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 15:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T15:46:55+0000\'\u003e01\\/Dec\\/15 15:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updating the patch. \\n \\n\\t Only tackles non-stored docvalues. \\n\\t Depends on the refactoring performed at   SOLR-8339  . \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15033926\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15033926&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15033926\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15033926_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033926_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 15:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T15:54:16+0000\'\u003e01\\/Dec\\/15 15:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI found some issues with the way this patch works and have some updated tests in separate patch which I haven\'t uploaded, I need to clean it up a bit and can submit it tonight.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne issues I found is that if a document doesn\'t have a field value for a dv field it will get an empty value in the response, we should probably check with in the doc value api for docs with field, to make sure that that document had a value. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15033926_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033926_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 15:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T15:54:16+0000\'\u003e01\\/Dec\\/15 15:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I found some issues with the way this patch works and have some updated tests in separate patch which I haven\'t uploaded, I need to clean it up a bit and can submit it tonight. \\n\\n One issues I found is that if a document doesn\'t have a field value for a dv field it will get an empty value in the response, we should probably check with in the doc value api for docs with field, to make sure that that document had a value.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15033973\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15033973&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15033973\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15033973_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033973_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T16:18:39+0000\'\u003e01\\/Dec\\/15 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAfaik, there\'s no way to discern if a singly valued non-stored dv field was added to the document or not, since a singly valued dv field either gets the value provided during the indexing or it picks up the default. Any suggestions how to deal with that?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15033973_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15033973_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T16:18:39+0000\'\u003e01\\/Dec\\/15 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Afaik, there\'s no way to discern if a singly valued non-stored dv field was added to the document or not, since a singly valued dv field either gets the value provided during the indexing or it picks up the default. Any suggestions how to deal with that?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15034013\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15034013&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15034013\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15034013_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15034013_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 16:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T16:36:08+0000\'\u003e01\\/Dec\\/15 16:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Erick Erickson - 01\\/Dec\\/15 17:04\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDeleting, see discussion at \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15034013_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15034013_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 16:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T16:36:08+0000\'\u003e01\\/Dec\\/15 16:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Erick Erickson - 01\\/Dec\\/15 17:04\\\"\u003eedited\u003c\\/span\u003e                   Deleting, see discussion at   SOLR-8344                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15034017\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15034017&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15034017\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15034017_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15034017_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 16:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T16:36:57+0000\'\u003e01\\/Dec\\/15 16:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFor strings, an ord of -1 is \\\"missing\\\"\u003cbr\\/\u003e\\nFor numerics, you can use DocValues.getDocsWithField();\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15034017_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15034017_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 16:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T16:36:57+0000\'\u003e01\\/Dec\\/15 16:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    For strings, an ord of -1 is \\\"missing\\\" \\nFor numerics, you can use DocValues.getDocsWithField();              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15034055\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15034055&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15034055\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15034055_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15034055_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 16:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T16:53:35+0000\'\u003e01\\/Dec\\/15 16:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003ehave some updated tests in separate patch which I haven\'t uploaded, I need to clean it up a bit and can submit it tonight.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI\'ve fixed the issue in this updated patch, thanks to Yonik\'s suggestion. Keith, looking forward to the tests.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15034055_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15034055_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/15 16:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-01T16:53:35+0000\'\u003e01\\/Dec\\/15 16:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     have some updated tests in separate patch which I haven\'t uploaded, I need to clean it up a bit and can submit it tonight.  \\n I\'ve fixed the issue in this updated patch, thanks to Yonik\'s suggestion. Keith, looking forward to the tests.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15035235\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15035235&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15035235\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15035235_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035235_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 04:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T04:13:47+0000\'\u003e02\\/Dec\\/15 04:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eRemoved leaked in \u003ctt\u003eSolrBaseDocument\u003c\\/tt\u003e references\u003c\\/li\u003e\\n\\t\u003cli\u003eFixed support for EnumField (single and multi valued)\u003c\\/li\u003e\\n\\t\u003cli\u003eFixed support for \u003ctt\u003e*_i\u003c\\/tt\u003e type globs\u003c\\/li\u003e\\n\\t\u003cli\u003eRemoved tests from \u003ctt\u003eBasicFuntionalityTests\u003c\\/tt\u003e and moved them to a new test class along with its own test schema.\u003c\\/li\u003e\\n\\t\u003cli\u003eAdded more robust testing including multivalued field testing\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15035235_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035235_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 04:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T04:13:47+0000\'\u003e02\\/Dec\\/15 04:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n\\t Removed leaked in  SolrBaseDocument  references \\n\\t Fixed support for EnumField (single and multi valued) \\n\\t Fixed support for  *_i  type globs \\n\\t Removed tests from  BasicFuntionalityTests  and moved them to a new test class along with its own test schema. \\n\\t Added more robust testing including multivalued field testing \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15035238\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15035238&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15035238\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15035238_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035238_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 04:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T04:15:55+0000\'\u003e02\\/Dec\\/15 04:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis still needs work around bumping the schema version, this impl changes the default behavior for globs\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15035238_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035238_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 04:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T04:15:55+0000\'\u003e02\\/Dec\\/15 04:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This still needs work around bumping the schema version, this impl changes the default behavior for globs              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15035256\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15035256&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15035256\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15035256_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035256_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 04:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T04:42:42+0000\'\u003e02\\/Dec\\/15 04:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCrushed one more bug with multivalued fields being added on docs without that value and a test for it\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15035256_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035256_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 04:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T04:42:42+0000\'\u003e02\\/Dec\\/15 04:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Crushed one more bug with multivalued fields being added on docs without that value and a test for it              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15035288\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15035288&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15035288\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15035288_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035288_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 05:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T05:13:01+0000\'\u003e02\\/Dec\\/15 05:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOne more patch.. It looks like at some point the logic for \u003ctt\u003eonlyPseudoFields\u003c\\/tt\u003e was modified to something that may not work, so reverting that line back to the original.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15035288_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035288_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 05:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T05:13:01+0000\'\u003e02\\/Dec\\/15 05:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    One more patch.. It looks like at some point the logic for  onlyPseudoFields  was modified to something that may not work, so reverting that line back to the original.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15035704\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15035704&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15035704\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15035704_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035704_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 12:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T12:14:42+0000\'\u003e02\\/Dec\\/15 12:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooks good, Keith. I was wondering why you chose to name the test file and the schema file as \\\"TestStoredDocValues\\\" and \\\"schema-stored-docvalues.xml\\\", whereas we are dealing with only non-stored docvalues in this issue?\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve updated the patch to now check for the schema version to be &gt;=1.6. Please review, and feel free to refactor further. We\'ll have to add a test (using a schema version &lt; 1.6) to ensure backcompat behaviour is not broken.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15035704_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035704_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 12:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T12:14:42+0000\'\u003e02\\/Dec\\/15 12:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Looks good, Keith. I was wondering why you chose to name the test file and the schema file as \\\"TestStoredDocValues\\\" and \\\"schema-stored-docvalues.xml\\\", whereas we are dealing with only non-stored docvalues in this issue? \\n\\n I\'ve updated the patch to now check for the schema version to be &gt;=1.6. Please review, and feel free to refactor further. We\'ll have to add a test (using a schema version &lt; 1.6) to ensure backcompat behaviour is not broken.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15035712\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15035712&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15035712\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15035712_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035712_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 12:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T12:21:16+0000\'\u003e02\\/Dec\\/15 12:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eRemoved leaked in SolrBaseDocument references\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eThe intention of using SolrDocumentBase, instead of SolrDocument, was so that \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8276\\\" title=\\\"Atomic updates &amp; RTG don&#39;t work with non-stored docvalues\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8276\\\"\u003e\u003cdel\u003eSOLR-8276\u003c\\/del\u003e\u003c\\/a\u003e can use the same decorate method on a SolrInputDocument. I\'ve re-added the SolrDocumentBase reference, which is implemented in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8339\\\" title=\\\"SolrDocument and SolrInputDocument should have a common interface\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8339\\\"\u003e\u003cdel\u003eSOLR-8339\u003c\\/del\u003e\u003c\\/a\u003e. Please apply \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8339\\\" title=\\\"SolrDocument and SolrInputDocument should have a common interface\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8339\\\"\u003e\u003cdel\u003eSOLR-8339\u003c\\/del\u003e\u003c\\/a\u003e first, and then apply\\/work with this patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15035712_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15035712_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 12:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T12:21:16+0000\'\u003e02\\/Dec\\/15 12:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Removed leaked in SolrBaseDocument references  \\n The intention of using SolrDocumentBase, instead of SolrDocument, was so that   SOLR-8276   can use the same decorate method on a SolrInputDocument. I\'ve re-added the SolrDocumentBase reference, which is implemented in   SOLR-8339  . Please apply   SOLR-8339   first, and then apply\\/work with this patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15036165\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15036165&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15036165\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15036165_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15036165_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 17:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T17:16:04+0000\'\u003e02\\/Dec\\/15 17:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI\'ve updated the patch to now check for the schema version to be &gt;=1.6\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eIn the patch, I did some clumsy &gt;= check for a float. Would\'ve been better to just check for &gt; 1.5. I\'ll fix it with the next patch.\u003cbr\\/\u003e\\nI\'m working on bumping up the version of the schema for the out of the box configsets.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15036165_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15036165_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 17:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T17:16:04+0000\'\u003e02\\/Dec\\/15 17:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I\'ve updated the patch to now check for the schema version to be &gt;=1.6  \\n In the patch, I did some clumsy &gt;= check for a float. Would\'ve been better to just check for &gt; 1.5. I\'ll fix it with the next patch. \\nI\'m working on bumping up the version of the schema for the out of the box configsets.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15036219\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15036219&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15036219\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15036219_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15036219_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 17:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T17:38:17+0000\'\u003e02\\/Dec\\/15 17:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eI\'ve updated the patch to now check for the schema version to be &gt;=1.6\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eAs per an offline discussion with \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=hossman\\\" class=\\\"user-hover\\\" rel=\\\"hossman\\\"\u003eHoss Man\u003c\\/a\u003e, he mentioned that in the past we\'ve never tied runtime behaviour with specific schema versions. He suggested, as did Yonik above I think, that we use some attribute like docValueAsIfStored=true\\/false (with a default of false for previous schema versions).\u003cbr\\/\u003e\\nI\'ll try to tackle this and update the patch, and drop the naive check for schema version.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15036219_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15036219_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/15 17:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-02T17:38:17+0000\'\u003e02\\/Dec\\/15 17:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     I\'ve updated the patch to now check for the schema version to be &gt;=1.6  \\n As per an offline discussion with  Hoss Man , he mentioned that in the past we\'ve never tied runtime behaviour with specific schema versions. He suggested, as did Yonik above I think, that we use some attribute like docValueAsIfStored=true\\/false (with a default of false for previous schema versions). \\nI\'ll try to tackle this and update the patch, and drop the naive check for schema version.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15036972\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15036972&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15036972\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15036972_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15036972_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/15 00:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-03T00:48:12+0000\'\u003e03\\/Dec\\/15 00:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMy only concern is that we may have to add a flag for this and for whatever we decide in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e which is just going to add to he confusion. Thoughts?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"k317h\\\" id=\\\"commentauthor_15036972_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"k317h\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Keith Laban\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15036972_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/15 00:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-03T00:48:12+0000\'\u003e03\\/Dec\\/15 00:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    My only concern is that we may have to add a flag for this and for whatever we decide in   SOLR-8344   which is just going to add to he confusion. Thoughts?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15055436\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15055436&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15055436\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15055436_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15055436_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/15 05:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-14T05:37:27+0000\'\u003e14\\/Dec\\/15 05:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdating the patch to bump the version up to 1.6.\u003c\\/p\u003e\\n\u003col\u003e\\n\\t\u003cli\u003eRenamed Keith\'s TestStoredDocValues to TestNonStoredDocValues. Renamed the corresponding schema file too.\u003c\\/li\u003e\\n\\t\u003cli\u003eAdds useDocValuesAsStored parameter (true\\/false) to schema file. It defaults to true &gt;= 1.6 version of schema.\u003c\\/li\u003e\\n\\t\u003cli\u003eChanging all 1.5 version schema files (test and examples) to 1.6. This will help catch bugs\\/unexpected behaviour.\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003cp\u003eThe patch is failing a few tests with very poor error reporting. Here\'s a reproducible failure after applying this patch:\u003cbr\\/\u003e\\nTest suite: TestManagedSchemaDynamicFieldResource, Seed: -Dtests.seed=C0DE559FF2A0799\u003cbr\\/\u003e\\nLooking into the failure.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15055436_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15055436_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/15 05:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-14T05:37:27+0000\'\u003e14\\/Dec\\/15 05:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updating the patch to bump the version up to 1.6. \\n \\n\\t Renamed Keith\'s TestStoredDocValues to TestNonStoredDocValues. Renamed the corresponding schema file too. \\n\\t Adds useDocValuesAsStored parameter (true\\/false) to schema file. It defaults to true &gt;= 1.6 version of schema. \\n\\t Changing all 1.5 version schema files (test and examples) to 1.6. This will help catch bugs\\/unexpected behaviour. \\n \\n\\n\\n The patch is failing a few tests with very poor error reporting. Here\'s a reproducible failure after applying this patch: \\nTest suite: TestManagedSchemaDynamicFieldResource, Seed: -Dtests.seed=C0DE559FF2A0799 \\nLooking into the failure.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15055523\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15055523&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15055523\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15055523_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15055523_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/15 06:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-14T06:48:25+0000\'\u003e14\\/Dec\\/15 06:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003eThe patch is failing a few tests with very poor error reporting. Here\'s a reproducible failure after applying this patch:\u003cbr\\/\u003e\\nTest suite: TestManagedSchemaDynamicFieldResource, Seed: -Dtests.seed=C0DE559FF2A0799\u003cbr\\/\u003e\\nLooking into the failure.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eIt seems this test fails even without the patch. Filed \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8411\\\" title=\\\"TestManagedSchemaDynamicFieldResource failing reproducibly\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8411\\\"\u003e\u003cdel\u003eSOLR-8411\u003c\\/del\u003e\u003c\\/a\u003e for this. However, with this patch, still 5-6 tests fail. But I\'ve so far been unable to reproduce any of them.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15055523_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15055523_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/15 06:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-14T06:48:25+0000\'\u003e14\\/Dec\\/15 06:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n The patch is failing a few tests with very poor error reporting. Here\'s a reproducible failure after applying this patch: \\nTest suite: TestManagedSchemaDynamicFieldResource, Seed: -Dtests.seed=C0DE559FF2A0799 \\nLooking into the failure.  \\n It seems this test fails even without the patch. Filed   SOLR-8411   for this. However, with this patch, still 5-6 tests fail. But I\'ve so far been unable to reproduce any of them.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15056973\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15056973&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15056973\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15056973_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15056973_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/15 23:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-14T23:32:07+0000\'\u003e14\\/Dec\\/15 23:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 14\\/Dec\\/15 23:34\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt seems the failures on trunk were unrelated to this patch, and possibly related to the Jetty upgrade to 9.3. To verify this, I ported the patch to branch5x (attached the patch) and it passes all tests.\u003c\\/p\u003e\\n\\n\u003cp\u003eTODO: Make sure managed schema can handle the newly added useDocValuesAsStored parameter in the schema (test for persistence across edits to managed schema).\u003c\\/p\u003e\\n\\n\u003cp\u003eApart from the TODO item, can \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=k317h\\\" class=\\\"user-hover\\\" rel=\\\"k317h\\\"\u003eKeith Laban\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\" class=\\\"user-hover\\\" rel=\\\"shalinmangar\\\"\u003eShalin Shekhar Mangar\u003c\\/a\u003e please review the patch (the trunk one)?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eMy only concern is that we may have to add a flag for this and for whatever we decide in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e which is just going to add to he confusion. Thoughts?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI think the \u003ctt\u003euseDocValuesAsStored\u003c\\/tt\u003e parameter in the schema is generically named enough to be reused for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e, if needed. For more fine-grained per-field control, we can introduce another parameter if needed. We can discuss that in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e itself.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15056973_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15056973_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/15 23:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-14T23:32:07+0000\'\u003e14\\/Dec\\/15 23:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 14\\/Dec\\/15 23:34\\\"\u003eedited\u003c\\/span\u003e                   It seems the failures on trunk were unrelated to this patch, and possibly related to the Jetty upgrade to 9.3. To verify this, I ported the patch to branch5x (attached the patch) and it passes all tests. \\n\\n TODO: Make sure managed schema can handle the newly added useDocValuesAsStored parameter in the schema (test for persistence across edits to managed schema). \\n\\n Apart from the TODO item, can  Keith Laban  and  Shalin Shekhar Mangar  please review the patch (the trunk one)? \\n\\n  My only concern is that we may have to add a flag for this and for whatever we decide in   SOLR-8344   which is just going to add to he confusion. Thoughts?  \\n I think the  useDocValuesAsStored  parameter in the schema is generically named enough to be reused for   SOLR-8344  , if needed. For more fine-grained per-field control, we can introduce another parameter if needed. We can discuss that in   SOLR-8344   itself.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15057310\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15057310&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15057310\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15057310_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15057310_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/15 04:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-15T04:07:04+0000\'\u003e15\\/Dec\\/15 04:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated the patch.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eTODO: Make sure managed schema can handle the newly added useDocValuesAsStored parameter in the schema (test for persistence across edits to managed schema).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAdded support for writing back (persisting) of this flag when used with managed schema.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15057310_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15057310_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/15 04:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-15T04:07:04+0000\'\u003e15\\/Dec\\/15 04:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated the patch. \\n\\n  TODO: Make sure managed schema can handle the newly added useDocValuesAsStored parameter in the schema (test for persistence across edits to managed schema).  \\n\\n Added support for writing back (persisting) of this flag when used with managed schema.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15058168\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15058168&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15058168\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15058168_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15058168_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/15 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-15T15:01:10+0000\'\u003e15\\/Dec\\/15 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Ishan, you have misunderstood the \\\"useDocValuesAsStored\\\" parameter. It is supposed to be per-field and not on the entire schema so that you can selectively disable it on fields that you don\'t want to be treated as if they were stored.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15058168_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15058168_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/15 15:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-15T15:01:10+0000\'\u003e15\\/Dec\\/15 15:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Ishan, you have misunderstood the \\\"useDocValuesAsStored\\\" parameter. It is supposed to be per-field and not on the entire schema so that you can selectively disable it on fields that you don\'t want to be treated as if they were stored.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15061305\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15061305&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15061305\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15061305_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15061305_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/15 01:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-17T01:49:51+0000\'\u003e17\\/Dec\\/15 01:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated the patch to have the useDocValuesAsStored attribute on a per field basis (instead of being at schema\'s top level).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15061305_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15061305_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/15 01:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-17T01:49:51+0000\'\u003e17\\/Dec\\/15 01:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated the patch to have the useDocValuesAsStored attribute on a per field basis (instead of being at schema\'s top level).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15061581\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15061581&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15061581\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15061581_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15061581_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/15 06:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-17T06:36:30+0000\'\u003e17\\/Dec\\/15 06:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shalin Shekhar Mangar - 17\\/Dec\\/15 07:45\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Ishan.\u003c\\/p\u003e\\n\\n\u003col\u003e\\n\\t\u003cli\u003eThe SolrIndexSearcher.decorateDocValueFields method has a honourUseDVsAsStoredFlag which is always true. We can remove it?\u003c\\/li\u003e\\n\\t\u003cli\u003eSame for SolrIndexSearcher.getNonStoredDocValuesFieldNames?\u003c\\/li\u003e\\n\\t\u003cli\u003eThe wantsAllFields flag added to SolrIndexSearcher.doc doesn\'t seem necessary. I guess it was added because the patch adds non stored doc values fields to the \'fnames\' but if we can separate out stored fnames from the non-stored doc values to be returned then we can remove this param from both SolrIndexSearcher.doc and SolrIndexSearcher.getNonStoredDocValuesFieldNames\u003c\\/li\u003e\\n\\t\u003cli\u003eThe pattern matching in the DocStreamer constructor makes a bit nervous. Where is the pattern matching done for current stored fields?\u003c\\/li\u003e\\n\\t\u003cli\u003eThe conditional logic in SolrIndexSearcher.decorateDocValueFields for multi-valued fields is too complicated! Can we please simplify this?\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15061581_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15061581_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Dec\\/15 06:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-17T06:36:30+0000\'\u003e17\\/Dec\\/15 06:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Shalin Shekhar Mangar - 17\\/Dec\\/15 07:45\\\"\u003eedited\u003c\\/span\u003e                   Thanks Ishan. \\n\\n \\n\\t The SolrIndexSearcher.decorateDocValueFields method has a honourUseDVsAsStoredFlag which is always true. We can remove it? \\n\\t Same for SolrIndexSearcher.getNonStoredDocValuesFieldNames? \\n\\t The wantsAllFields flag added to SolrIndexSearcher.doc doesn\'t seem necessary. I guess it was added because the patch adds non stored doc values fields to the \'fnames\' but if we can separate out stored fnames from the non-stored doc values to be returned then we can remove this param from both SolrIndexSearcher.doc and SolrIndexSearcher.getNonStoredDocValuesFieldNames \\n\\t The pattern matching in the DocStreamer constructor makes a bit nervous. Where is the pattern matching done for current stored fields? \\n\\t The conditional logic in SolrIndexSearcher.decorateDocValueFields for multi-valued fields is too complicated! Can we please simplify this? \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15063717\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15063717&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15063717\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15063717_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15063717_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Dec\\/15 09:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-18T09:01:09+0000\'\u003e18\\/Dec\\/15 09:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for your review, Shalin. I\'ve updated the patch to address your suggestions.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eThe SolrIndexSearcher.decorateDocValueFields method has a honourUseDVsAsStoredFlag which is always true. We can remove it?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003eSame for SolrIndexSearcher.getNonStoredDocValuesFieldNames?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eRefactored the decorateDocValues() a bit to not send in wantsAllFields flag to the method and to handle it at the DocsStreamer itself. Hence, now, the decorateDocValues() method takes in only the field names it needs to do anything about; the filtering for non-stored dvs is taken care of at DocsStreamer.next() itself. \u003c\\/p\u003e\\n\\n\u003cp\u003eSince, for the \u003ctt\u003efl=&#42;\u003c\\/tt\u003e case, we need all non-stored DVs that have \u003ctt\u003euseDocValuesAsStored\u003c\\/tt\u003e=true, but for the general filtering case of \u003ctt\u003efl=dv1,dv2\u003c\\/tt\u003e we need to filter using all non-stored DVs (irrespective of the useDocValuesAsStored flag), I\'ve retained this true\\/false logic in the getNonStoredDocValuesFieldNames() method. Renamed that method, however, to call it \u003ctt\u003egetNonStoredDVs(boolean onlyUseDocValuesAsStored)\u003c\\/tt\u003e and added a clear javadoc to this effect.\u003c\\/p\u003e\\n\\n\\n\u003cblockquote\u003e\u003cp\u003eThe wantsAllFields flag added to SolrIndexSearcher.doc doesn\'t seem necessary. I guess it was added because the patch adds non stored doc values fields to the \'fnames\' but if we can separate out stored fnames from the non-stored doc values to be returned then we can remove this param from both SolrIndexSearcher.doc and SolrIndexSearcher.getNonStoredDocValuesFieldNames\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI think the original motivation was to deal with cases \u003ctt\u003efl=&#42;,nonstoredDv1\u003c\\/tt\u003e. Here, the idea initially was that \u003ctt\u003e&#42;\u003c\\/tt\u003e returns all stored fields, and nonstoredDv1 is added to it. But now, since \u003ctt\u003e&#42;\u003c\\/tt\u003e takes care of all stored and non-stored dvs, this logic isn\'t needed. So, this wantsAllFields flag was a left over from a previous patch which I\'ve now removed.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eThe pattern matching in the DocStreamer constructor makes a bit nervous. Where is the pattern matching done for current stored fields?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eKeith can weigh in on this better. However, I had a look, and found that responseWriters (e.g. JSONResponseWriter) get the whole SolrDocument at the \u003ctt\u003ewriteSolrDocument()\u003c\\/tt\u003e method, from where it does the following call to drop fields it doesn\'t need:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e    \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e (\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e fname : doc.getFieldNames()) {\\n      \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (returnFields!= \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e &amp;&amp; !returnFields.wantsField(fname)) {\\n        \u003cspan class=\\\"code-keyword\\\"\u003econtinue\u003c\\/span\u003e;\\n      }\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003eThis wantsField() call uses wildcard handling.\u003cbr\\/\u003e\\nSo, reviewing this information, it seems like our handling of this at the DocsStreamer is fine here. It doesn\'t look costly to me, since it is performed only when fl has a pattern, and that pattern is checked against only non-stored DVs. Do you think there\'s something better that can be done which I\'m missing?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eThe conditional logic in SolrIndexSearcher.decorateDocValueFields for multi-valued fields is too complicated! Can we please simplify this?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eMade it simpler. \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15063717_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15063717_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Dec\\/15 09:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-18T09:01:09+0000\'\u003e18\\/Dec\\/15 09:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for your review, Shalin. I\'ve updated the patch to address your suggestions. \\n\\n  The SolrIndexSearcher.decorateDocValueFields method has a honourUseDVsAsStoredFlag which is always true. We can remove it?  \\n  Same for SolrIndexSearcher.getNonStoredDocValuesFieldNames?  \\n\\n Refactored the decorateDocValues() a bit to not send in wantsAllFields flag to the method and to handle it at the DocsStreamer itself. Hence, now, the decorateDocValues() method takes in only the field names it needs to do anything about; the filtering for non-stored dvs is taken care of at DocsStreamer.next() itself.  \\n\\n Since, for the  fl=&#42;  case, we need all non-stored DVs that have  useDocValuesAsStored =true, but for the general filtering case of  fl=dv1,dv2  we need to filter using all non-stored DVs (irrespective of the useDocValuesAsStored flag), I\'ve retained this true\\/false logic in the getNonStoredDocValuesFieldNames() method. Renamed that method, however, to call it  getNonStoredDVs(boolean onlyUseDocValuesAsStored)  and added a clear javadoc to this effect. \\n\\n\\n  The wantsAllFields flag added to SolrIndexSearcher.doc doesn\'t seem necessary. I guess it was added because the patch adds non stored doc values fields to the \'fnames\' but if we can separate out stored fnames from the non-stored doc values to be returned then we can remove this param from both SolrIndexSearcher.doc and SolrIndexSearcher.getNonStoredDocValuesFieldNames  \\n I think the original motivation was to deal with cases  fl=&#42;,nonstoredDv1 . Here, the idea initially was that  &#42;  returns all stored fields, and nonstoredDv1 is added to it. But now, since  &#42;  takes care of all stored and non-stored dvs, this logic isn\'t needed. So, this wantsAllFields flag was a left over from a previous patch which I\'ve now removed. \\n\\n  The pattern matching in the DocStreamer constructor makes a bit nervous. Where is the pattern matching done for current stored fields?  \\n Keith can weigh in on this better. However, I had a look, and found that responseWriters (e.g. JSONResponseWriter) get the whole SolrDocument at the  writeSolrDocument()  method, from where it does the following call to drop fields it doesn\'t need: \\n  \\n      for  ( String  fname : doc.getFieldNames()) {\\n       if  (returnFields!=  null  &amp;&amp; !returnFields.wantsField(fname)) {\\n         continue ;\\n      }\\n \\n  \\n This wantsField() call uses wildcard handling. \\nSo, reviewing this information, it seems like our handling of this at the DocsStreamer is fine here. It doesn\'t look costly to me, since it is performed only when fl has a pattern, and that pattern is checked against only non-stored DVs. Do you think there\'s something better that can be done which I\'m missing? \\n\\n  The conditional logic in SolrIndexSearcher.decorateDocValueFields for multi-valued fields is too complicated! Can we please simplify this?  \\n Made it simpler.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15063741\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15063741&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15063741\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15063741_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15063741_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Dec\\/15 09:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-18T09:16:23+0000\'\u003e18\\/Dec\\/15 09:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 18\\/Dec\\/15 09:56\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBtw, just found out that not all query paths actually use a DocsStreamer. I am checking as to what this could be down to.\u003cbr\\/\u003e\\nEDIT: Sorry, I was seeing ghosts. Was trying this from the admin UI, but I hadn\'t set the breakpoint properly.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15063741_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15063741_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Dec\\/15 09:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-18T09:16:23+0000\'\u003e18\\/Dec\\/15 09:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 18\\/Dec\\/15 09:56\\\"\u003eedited\u003c\\/span\u003e                   Btw, just found out that not all query paths actually use a DocsStreamer. I am checking as to what this could be down to. \\nEDIT: Sorry, I was seeing ghosts. Was trying this from the admin UI, but I hadn\'t set the breakpoint properly.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15067566\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15067566&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15067566\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15067566_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15067566_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Dec\\/15 05:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-22T05:14:50+0000\'\u003e22\\/Dec\\/15 05:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWARNING: I\'m stealing this code and back-porting to 4.x for my own purposes so this may not pertain to 5x. And I\'m not very up on the low-level details.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut this loop for reading multiValued fields puts \u003cem\u003eall\u003c\\/em\u003e the multivalued fields for \u003cem\u003eall\u003c\\/em\u003e the docs on the shard into each doc:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (values != \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e &amp;&amp; DocValues.getDocsWithField(atomicReader, fieldName).get(docid)) {\\n    values.setDocument(docid);\\n    \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (values.getValueCount() &gt; 0) {\\n              List&lt;\u003cspan class=\\\"code-object\\\"\u003eObject\u003c\\/span\u003e&gt; outValues = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e LinkedList&lt;\u003cspan class=\\\"code-object\\\"\u003eObject\u003c\\/span\u003e&gt;();\\n              \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e (\u003cspan class=\\\"code-object\\\"\u003eint\u003c\\/span\u003e i = 0; i &lt; values.getValueCount(); i++) { \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ Iterates more than just \u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e doc, I think all of them!\\n\u003c\\/span\u003e        \\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI had more luck with \u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e          \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (values != \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e) {\\n            values.setDocument(docid);\\n            List&lt;\u003cspan class=\\\"code-object\\\"\u003eObject\u003c\\/span\u003e&gt; outValues = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e LinkedList&lt;\u003cspan class=\\\"code-object\\\"\u003eObject\u003c\\/span\u003e&gt;();\\n            \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e (\u003cspan class=\\\"code-object\\\"\u003eint\u003c\\/span\u003e ord = (\u003cspan class=\\\"code-object\\\"\u003eint\u003c\\/span\u003e) values.nextOrd(); ord != SortedSetDocValues.NO_MORE_ORDS; ord = (\u003cspan class=\\\"code-object\\\"\u003eint\u003c\\/span\u003e) values.nextOrd()) {\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eNote that I also think this is unnecessary in the if test, the loop above doesn\'t do anything bad if there are docs with empty fields: \u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eDocValues.getDocsWithField(atomicReader, fieldName).get(docid)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI changed it to just if (values != null). But I did have to test outValues.size() &gt; 0  before doing the addField after the loop or I got empty braces in the output doc.\u003c\\/p\u003e\\n\\n\u003cp\u003eAgain let me emphasize that \u003cbr\\/\u003e\\n1&gt; I don\'t know this code well, so take this with a grain of salt\u003cbr\\/\u003e\\n2&gt; I needed this for a one-off on the 4.x code line and this may work with 5x just fine as-is. Needless to say what I\'m doing will never make into the official project....\u003c\\/p\u003e\\n\\n\u003cp\u003eBut this saved me a TON of work, glad you\'re tackling this!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15067566_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15067566_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Dec\\/15 05:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-22T05:14:50+0000\'\u003e22\\/Dec\\/15 05:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    WARNING: I\'m stealing this code and back-porting to 4.x for my own purposes so this may not pertain to 5x. And I\'m not very up on the low-level details. \\n\\n But this loop for reading multiValued fields puts  all  the multivalued fields for  all  the docs on the shard into each doc: \\n\\n  \\n  if  (values !=  null  &amp;&amp; DocValues.getDocsWithField(atomicReader, fieldName).get(docid)) {\\n    values.setDocument(docid);\\n     if  (values.getValueCount() &gt; 0) {\\n              List&lt; Object &gt; outValues =  new  LinkedList&lt; Object &gt;();\\n               for  ( int  i = 0; i &lt; values.getValueCount(); i++) {  \\/\\/ Iterates more than just  this  doc, I think all of them!\\n         \\n \\n  \\n\\n I had more luck with  \\n  \\n            if  (values !=  null ) {\\n            values.setDocument(docid);\\n            List&lt; Object &gt; outValues =  new  LinkedList&lt; Object &gt;();\\n             for  ( int  ord = ( int ) values.nextOrd(); ord != SortedSetDocValues.NO_MORE_ORDS; ord = ( int ) values.nextOrd()) {\\n \\n  \\n\\n Note that I also think this is unnecessary in the if test, the loop above doesn\'t do anything bad if there are docs with empty fields:  \\n  \\n DocValues.getDocsWithField(atomicReader, fieldName).get(docid)\\n \\n  \\n\\n I changed it to just if (values != null). But I did have to test outValues.size() &gt; 0  before doing the addField after the loop or I got empty braces in the output doc. \\n\\n Again let me emphasize that  \\n1&gt; I don\'t know this code well, so take this with a grain of salt \\n2&gt; I needed this for a one-off on the 4.x code line and this may work with 5x just fine as-is. Needless to say what I\'m doing will never make into the official project.... \\n\\n But this saved me a TON of work, glad you\'re tackling this!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15068027\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15068027&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15068027\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15068027_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15068027_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Dec\\/15 12:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-22T12:07:50+0000\'\u003e22\\/Dec\\/15 12:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Ishan.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eSince, for the fl=* case, we need all non-stored DVs that have useDocValuesAsStored=true, but for the general filtering case of fl=dv1,dv2 we need to filter using all non-stored DVs (irrespective of the useDocValuesAsStored flag)\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOkay I see what you are saying. The useDocValuesAsStored=true default applies when you request all fields but if you are explicitly asking for a field then we can return it from DVs even if it was marked as useDocValuesAsStored=false. I have mixed feelings about this but I can see where it can be useful e.g. 1st phase of distributed search.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e. However, I had a look, and found that responseWriters (e.g. JSONResponseWriter) get the whole SolrDocument at the writeSolrDocument() method, from where it does the following call to drop fields it doesn\'t need\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHmm, yeah, we can\'t do that with doc values, it\'d be too expensive.\u003c\\/p\u003e\\n\\n\u003cp\u003eIs there a test which creates a new field with useDocValuesAsStored as true and separately as false using the schema API? I\'m assuming you will address Erick\'s concern above about multi-valued fields.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15068027_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15068027_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Dec\\/15 12:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-22T12:07:50+0000\'\u003e22\\/Dec\\/15 12:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Ishan. \\n\\n  Since, for the fl=* case, we need all non-stored DVs that have useDocValuesAsStored=true, but for the general filtering case of fl=dv1,dv2 we need to filter using all non-stored DVs (irrespective of the useDocValuesAsStored flag)  \\n\\n Okay I see what you are saying. The useDocValuesAsStored=true default applies when you request all fields but if you are explicitly asking for a field then we can return it from DVs even if it was marked as useDocValuesAsStored=false. I have mixed feelings about this but I can see where it can be useful e.g. 1st phase of distributed search. \\n\\n  . However, I had a look, and found that responseWriters (e.g. JSONResponseWriter) get the whole SolrDocument at the writeSolrDocument() method, from where it does the following call to drop fields it doesn\'t need  \\n\\n Hmm, yeah, we can\'t do that with doc values, it\'d be too expensive. \\n\\n Is there a test which creates a new field with useDocValuesAsStored as true and separately as false using the schema API? I\'m assuming you will address Erick\'s concern above about multi-valued fields.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15068075\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15068075&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15068075\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15068075_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15068075_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Dec\\/15 12:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-22T12:59:21+0000\'\u003e22\\/Dec\\/15 12:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eIs there a test which creates a new field with useDocValuesAsStored as true and separately as false using the schema API?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI had added SchemaVersionSpecificBehaviorTest to test for these various true\\/false cases. However, there is no useDocValuesAsStored=false case with checking of output. I\'ll add such a test.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eI\'m assuming you will address Erick\'s concern above about multi-valued fields.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eI\'m working through them. So far as I can see, both the current loop with values.getValueCount() and what Erick suggested as a loop are running identically, i.e values.getValueCount() is indeed returning the count of values per document. But I am adding a test to prove it.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor the \u003ctt\u003eDocValues.getDocsWithField(atomicReader, fieldName).get(docid)\u003c\\/tt\u003e, not having it was resulting in empty fields being returned for documents that weren\'t supposed to have an docValue (the user never added a docValue for that document during indexing). Again, I think I should add a specific test for that, testing for the number of fields returned (maybe there already is one from Keith, but I\'ll check again).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15068075_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15068075_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Dec\\/15 12:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-22T12:59:21+0000\'\u003e22\\/Dec\\/15 12:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Is there a test which creates a new field with useDocValuesAsStored as true and separately as false using the schema API?  \\n I had added SchemaVersionSpecificBehaviorTest to test for these various true\\/false cases. However, there is no useDocValuesAsStored=false case with checking of output. I\'ll add such a test. \\n\\n  I\'m assuming you will address Erick\'s concern above about multi-valued fields.  \\n I\'m working through them. So far as I can see, both the current loop with values.getValueCount() and what Erick suggested as a loop are running identically, i.e values.getValueCount() is indeed returning the count of values per document. But I am adding a test to prove it. \\n\\n For the  DocValues.getDocsWithField(atomicReader, fieldName).get(docid) , not having it was resulting in empty fields being returned for documents that weren\'t supposed to have an docValue (the user never added a docValue for that document during indexing). Again, I think I should add a specific test for that, testing for the number of fields returned (maybe there already is one from Keith, but I\'ll check again).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15068319\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15068319&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15068319\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15068319_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15068319_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Dec\\/15 16:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-22T16:10:29+0000\'\u003e22\\/Dec\\/15 16:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ebq: For the DocValues.getDocsWithField(atomicReader, fieldName).get(docid), not having it was resulting in empty fields being returned for documents that weren\'t supposed to have an docValue (the user never added a docValue for that document during indexing).\u003c\\/p\u003e\\n\\n\u003cp\u003eRight, I had to add a test at the end to avoid that. I didn\'t track the code thoroughly, but does the DocValues.getDocsWithField allocate a BitSet or just return a pre-existing instance? Or even cache the BitSet somewhere? If it allocates a new BitSet (or even fills up a cache entry), the test at the end might be much less expensive. I didn\'t track it down though, and if it returns a reference to a cached bitset that will be created \u003cem\u003eanyway\u003c\\/em\u003e, then it\'s just a style thing....\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (outValues.size() &gt; 0) {\\n   sdoc.addField()....\\n}\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eAs for whether the loop returns all values in the field, I saw this \\\"by inspection\\\" on the techproducts example (with a few mods for adding docValues=\\\"true\\\" to the schema). Again, though, this is 4.x after I hacked a backport and put it in an entirely different place in the code, specifically NOT a visitor pattern. So it\'s entirely possible that the semantics have changed or hacking it into a different part of the code base has a different context.  A test would settle it for all time though.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15068319_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15068319_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Dec\\/15 16:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-22T16:10:29+0000\'\u003e22\\/Dec\\/15 16:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    bq: For the DocValues.getDocsWithField(atomicReader, fieldName).get(docid), not having it was resulting in empty fields being returned for documents that weren\'t supposed to have an docValue (the user never added a docValue for that document during indexing). \\n\\n Right, I had to add a test at the end to avoid that. I didn\'t track the code thoroughly, but does the DocValues.getDocsWithField allocate a BitSet or just return a pre-existing instance? Or even cache the BitSet somewhere? If it allocates a new BitSet (or even fills up a cache entry), the test at the end might be much less expensive. I didn\'t track it down though, and if it returns a reference to a cached bitset that will be created  anyway , then it\'s just a style thing.... \\n\\n  \\n   if  (outValues.size() &gt; 0) {\\n   sdoc.addField()....\\n}\\n \\n  \\n\\n As for whether the loop returns all values in the field, I saw this \\\"by inspection\\\" on the techproducts example (with a few mods for adding docValues=\\\"true\\\" to the schema). Again, though, this is 4.x after I hacked a backport and put it in an entirely different place in the code, specifically NOT a visitor pattern. So it\'s entirely possible that the semantics have changed or hacking it into a different part of the code base has a different context.  A test would settle it for all time though.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15069706\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15069706&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15069706\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15069706_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15069706_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Dec\\/15 15:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-23T15:02:23+0000\'\u003e23\\/Dec\\/15 15:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAdded tests for the previous two scenarios.\u003cbr\\/\u003e\\n@Erick, thanks for the catch, the values.getValueCount() wasn\'t working indeed, and only after adding the test for it could I catch it.\u003c\\/p\u003e\\n\\n\u003cp\u003eShalin, Erick, please review this latest patch. Thanks.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15069706_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15069706_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Dec\\/15 15:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-23T15:02:23+0000\'\u003e23\\/Dec\\/15 15:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Added tests for the previous two scenarios. \\n@Erick, thanks for the catch, the values.getValueCount() wasn\'t working indeed, and only after adding the test for it could I catch it. \\n\\n Shalin, Erick, please review this latest patch. Thanks.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15070052\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15070052&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15070052\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15070052_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15070052_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Dec\\/15 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-23T19:06:35+0000\'\u003e23\\/Dec\\/15 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003edoes the DocValues.getDocsWithField allocate a BitSet or just return a pre-existing instance\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eWhile I tried to track it down, I thought it is backed by a pre-existing bitset instance, as created at the leaf reader level. I didn\'t think it was a performance concern. Could someone confirm this understanding, please? Moreover, since Yonik suggested its use, I was more confident about using it.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15070052_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15070052_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Dec\\/15 19:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-23T19:06:35+0000\'\u003e23\\/Dec\\/15 19:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     does the DocValues.getDocsWithField allocate a BitSet or just return a pre-existing instance  \\n While I tried to track it down, I thought it is backed by a pre-existing bitset instance, as created at the leaf reader level. I didn\'t think it was a performance concern. Could someone confirm this understanding, please? Moreover, since Yonik suggested its use, I was more confident about using it.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15070581\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15070581&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15070581\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15070581_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15070581_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 04:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T04:46:01+0000\'\u003e24\\/Dec\\/15 04:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLGTM as far as not returning all the DV values with each doc.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15070581_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15070581_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 04:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T04:46:01+0000\'\u003e24\\/Dec\\/15 04:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    LGTM as far as not returning all the DV values with each doc. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15071044\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071044&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071044\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15071044_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071044_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 14:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T14:12:32+0000\'\u003e24\\/Dec\\/15 14:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChanges:\u003c\\/p\u003e\\n\u003col\u003e\\n\\t\u003cli\u003eDocStreamer calculates dv fields to return in the constructor for every scenario instead of doing conditional logic and set intersection in next(). Also uses HashSet instead of Treeset (we don\'t care about order)\u003c\\/li\u003e\\n\\t\u003cli\u003eRenamed nonStoredDVs in SolrIndexSearcher to allNonStoredDVs\u003c\\/li\u003e\\n\\t\u003cli\u003eAdded simple javadocs describing allNonStoredDVs and nonStoredDVsUsedAsStored\u003c\\/li\u003e\\n\\t\u003cli\u003eReformatted new code according to the project code style\u003c\\/li\u003e\\n\\t\u003cli\u003eFixed formatting in schema-nonstored-docvalues.xml which failed precommit (tabs instead of spaces)\u003c\\/li\u003e\\n\\t\u003cli\u003eAdded a basic sanity test in TestUseDocValuesAsStored.testNonStoredDocValueFieldsOnEmptyIndex to assert that no exceptions are thrown on unknown fields with various fl combinations.\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003cp\u003eIshan, can you please add a test which uses the schema API to add\\/modify a field with the useDocValuesAsStored parameter set to true (default), explicitly false and then true again?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15071044_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071044_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 14:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T14:12:32+0000\'\u003e24\\/Dec\\/15 14:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Changes: \\n \\n\\t DocStreamer calculates dv fields to return in the constructor for every scenario instead of doing conditional logic and set intersection in next(). Also uses HashSet instead of Treeset (we don\'t care about order) \\n\\t Renamed nonStoredDVs in SolrIndexSearcher to allNonStoredDVs \\n\\t Added simple javadocs describing allNonStoredDVs and nonStoredDVsUsedAsStored \\n\\t Reformatted new code according to the project code style \\n\\t Fixed formatting in schema-nonstored-docvalues.xml which failed precommit (tabs instead of spaces) \\n\\t Added a basic sanity test in TestUseDocValuesAsStored.testNonStoredDocValueFieldsOnEmptyIndex to assert that no exceptions are thrown on unknown fields with various fl combinations. \\n \\n\\n\\n Ishan, can you please add a test which uses the schema API to add\\/modify a field with the useDocValuesAsStored parameter set to true (default), explicitly false and then true again?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15071046\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071046&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071046\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15071046_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071046_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T14:13:21+0000\'\u003e24\\/Dec\\/15 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith the right patch this time.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15071046_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071046_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 14:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T14:13:21+0000\'\u003e24\\/Dec\\/15 14:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With the right patch this time.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15071059\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071059&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071059\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15071059_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071059_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 14:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T14:33:49+0000\'\u003e24\\/Dec\\/15 14:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003col\u003e\\n\\t\u003cli\u003eAdded a null check in DocStreamer so that we do not try to decorate dv fields if none are required\u003c\\/li\u003e\\n\\t\u003cli\u003eDeletes all docs in testNonStoredDocValueFieldsOnEmptyIndex before running any test\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15071059_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071059_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 14:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T14:33:49+0000\'\u003e24\\/Dec\\/15 14:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n\\t Added a null check in DocStreamer so that we do not try to decorate dv fields if none are required \\n\\t Deletes all docs in testNonStoredDocValueFieldsOnEmptyIndex before running any test \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15071193\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071193&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071193\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15071193_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071193_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 19:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T19:09:32+0000\'\u003e24\\/Dec\\/15 19:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhen we do the docs, we do need to include a warning about ordering. multiValued fields are returned in sorted order when returned from DV fields, not the original order, right?\u003c\\/p\u003e\\n\\n\u003cp\u003eUp until now, we\'ve promised that multiValued fields are returned in the same order they were inserted into the document so two MV fields can be treated like parallel arrays. This will \u003cem\u003enot\u003c\\/em\u003e be true of DV fields that are multiValued, correct?\u003c\\/p\u003e\\n\\n\u003cp\u003eSuggested text would be something like:\u003c\\/p\u003e\\n\\n\u003cp\u003e\\\"Returning stored fields from docValues (default in schema versions 1.6+) returns multiValued fields in sorted order. If you require the older behavior of multiValued fields being returned in the original insertion order, set useDocValuesAsStored=\\\"false\\\" for the individual fields or make sure your schema version is &lt; 1.6. This does \u003cem\u003enot\u003c\\/em\u003e require re-indexing.\\\"\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15071193_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071193_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Dec\\/15 19:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-24T19:09:32+0000\'\u003e24\\/Dec\\/15 19:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    When we do the docs, we do need to include a warning about ordering. multiValued fields are returned in sorted order when returned from DV fields, not the original order, right? \\n\\n Up until now, we\'ve promised that multiValued fields are returned in the same order they were inserted into the document so two MV fields can be treated like parallel arrays. This will  not  be true of DV fields that are multiValued, correct? \\n\\n Suggested text would be something like: \\n\\n \\\"Returning stored fields from docValues (default in schema versions 1.6+) returns multiValued fields in sorted order. If you require the older behavior of multiValued fields being returned in the original insertion order, set useDocValuesAsStored=\\\"false\\\" for the individual fields or make sure your schema version is &lt; 1.6. This does  not  require re-indexing.\\\" \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15071393\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071393&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071393\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15071393_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071393_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 07:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T07:26:08+0000\'\u003e25\\/Dec\\/15 07:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eIshan, can you please add a test which uses the schema API to add\\/modify a field with the useDocValuesAsStored parameter set to true (default), explicitly false and then true again?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAdded two extra tests:\u003c\\/p\u003e\\n\u003col\u003e\\n\\t\u003cli\u003eTestUseDocValuesAsStored.testManagedSchema() for testing with managed schema.\u003c\\/li\u003e\\n\\t\u003cli\u003eTestUseDocValuesAsStored2 suite for testing with Schema API.\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003cp\u003eAlso, renamed the test methods in TestUseDocValuesAsStored to shorter\\/simpler names.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15071393_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071393_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 07:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T07:26:08+0000\'\u003e25\\/Dec\\/15 07:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Ishan, can you please add a test which uses the schema API to add\\/modify a field with the useDocValuesAsStored parameter set to true (default), explicitly false and then true again?  \\n\\n Added two extra tests: \\n \\n\\t TestUseDocValuesAsStored.testManagedSchema() for testing with managed schema. \\n\\t TestUseDocValuesAsStored2 suite for testing with Schema API. \\n \\n\\n\\n Also, renamed the test methods in TestUseDocValuesAsStored to shorter\\/simpler names.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15071395\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071395&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071395\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15071395_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071395_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 07:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T07:35:44+0000\'\u003e25\\/Dec\\/15 07:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eErick, this patch (8220) returns DVs only for non-stored fields. So, before this change, the users had no way of returning their multivalued non-stored fields (even field() didn\'t work). However, your suggested text (as is) is spot on once we have this and 8344 in. \u003c\\/p\u003e\\n\\n\u003cp\u003eFor this issue, I think we should document this caveat to suggest that if insertion order for multivalued fields is important for you, then have your field stored=true (and that this work is not for you).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15071395_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071395_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 07:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T07:35:44+0000\'\u003e25\\/Dec\\/15 07:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Erick, this patch (8220) returns DVs only for non-stored fields. So, before this change, the users had no way of returning their multivalued non-stored fields (even field() didn\'t work). However, your suggested text (as is) is spot on once we have this and 8344 in.  \\n\\n For this issue, I think we should document this caveat to suggest that if insertion order for multivalued fields is important for you, then have your field stored=true (and that this work is not for you).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15071421\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071421&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071421\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15071421_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071421_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 08:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T08:25:58+0000\'\u003e25\\/Dec\\/15 08:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eImproved Ishan\'s new managed schema test to actually add documents and assert query responses in different scenarios.\u003c\\/p\u003e\\n\\n\u003cp\u003eJust to recap, following is the behavior of \\\"fl\\\" with doc value fields with the latest patch:\u003c\\/p\u003e\\n\u003col\u003e\\n\\t\u003cli\u003eAll doc value fields in schema version 1.6 are useDocValuesAsStored=true by default\u003c\\/li\u003e\\n\\t\u003cli\u003efl=`*` will return all stored=true and useDocValuesAsStored=true fields\u003c\\/li\u003e\\n\\t\u003cli\u003efl=`\u003cb\u003e,a1` will return all stored=true and useDocValuesAsStored=true fields. If the \'a1\' field is useDocValuesAsStored=false then it will *NOT\u003c\\/b\u003e be returned even though it was explicitly asked for.\u003c\\/li\u003e\\n\\t\u003cli\u003efl=`a*` will match the specified pattern against only stored=true and useDocValuesAsStored=true fields.\u003c\\/li\u003e\\n\\t\u003cli\u003efl=`a1` will return a1 as long as it is stored=true or docValues=true (i.e. useDocValuesAsStored does not matter if a field is explicitly requested)\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15071421_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071421_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 08:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T08:25:58+0000\'\u003e25\\/Dec\\/15 08:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Improved Ishan\'s new managed schema test to actually add documents and assert query responses in different scenarios. \\n\\n Just to recap, following is the behavior of \\\"fl\\\" with doc value fields with the latest patch: \\n \\n\\t All doc value fields in schema version 1.6 are useDocValuesAsStored=true by default \\n\\t fl=`*` will return all stored=true and useDocValuesAsStored=true fields \\n\\t fl=` ,a1` will return all stored=true and useDocValuesAsStored=true fields. If the \'a1\' field is useDocValuesAsStored=false then it will *NOT  be returned even though it was explicitly asked for. \\n\\t fl=`a*` will match the specified pattern against only stored=true and useDocValuesAsStored=true fields. \\n\\t fl=`a1` will return a1 as long as it is stored=true or docValues=true (i.e. useDocValuesAsStored does not matter if a field is explicitly requested) \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15071474\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071474&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071474\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15071474_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071474_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 09:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T09:53:43+0000\'\u003e25\\/Dec\\/15 09:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 25\\/Dec\\/15 09:59\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdating the patch:\u003c\\/p\u003e\\n\u003col\u003e\\n\\t\u003cli\u003eSolrIndexSearcher\'s getNonStoredDVs() method now returns unmodifiable sets of field names\u003c\\/li\u003e\\n\\t\u003cli\u003eAdded another method in ReturnFields and SolrReturnFields which returns the additionally requested field names, irrespective of a wantsAll (\u003ctt\u003e&#42;\u003c\\/tt\u003e) being present in the fl=. This is an overloaded getLuceneFieldNames() with a boolean parameter to \\\"ignoreWantsAll\\\". Is there something better we can name it to?\u003c\\/li\u003e\\n\\t\u003cli\u003eNow fl=*,a3 case also returns a3, irrespective of whether a3 has useDocValuesAsStored. (This change was made in DocsStreamer\'s constructor, under:\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e    \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ add non-stored DV fields that may have been requested\\n\u003c\\/span\u003e    \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (rctx.getReturnFields().wantsAllFields())  {\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\" class=\\\"user-hover\\\" rel=\\\"shalinmangar\\\"\u003eShalin Shekhar Mangar\u003c\\/a\u003e Please feel free to drop changes for points 2, 3, if you think this doesn\'t make sense from a usecase point of view.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15071474_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071474_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 09:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T09:53:43+0000\'\u003e25\\/Dec\\/15 09:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 25\\/Dec\\/15 09:59\\\"\u003eedited\u003c\\/span\u003e                   Updating the patch: \\n \\n\\t SolrIndexSearcher\'s getNonStoredDVs() method now returns unmodifiable sets of field names \\n\\t Added another method in ReturnFields and SolrReturnFields which returns the additionally requested field names, irrespective of a wantsAll ( &#42; ) being present in the fl=. This is an overloaded getLuceneFieldNames() with a boolean parameter to \\\"ignoreWantsAll\\\". Is there something better we can name it to? \\n\\t Now fl=*,a3 case also returns a3, irrespective of whether a3 has useDocValuesAsStored. (This change was made in DocsStreamer\'s constructor, under:\\n  \\n      \\/\\/ add non-stored DV fields that may have been requested\\n      if  (rctx.getReturnFields().wantsAllFields())  {\\n \\n   \\n \\n\\n\\n  Shalin Shekhar Mangar  Please feel free to drop changes for points 2, 3, if you think this doesn\'t make sense from a usecase point of view.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15071496\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071496&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071496\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15071496_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071496_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 10:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T10:34:54+0000\'\u003e25\\/Dec\\/15 10:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAdded a code comment to the previous patch. Plus very minor cleanup at DocsStreamer\'s constructor.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15071496_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15071496_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Dec\\/15 10:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-25T10:34:54+0000\'\u003e25\\/Dec\\/15 10:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Added a code comment to the previous patch. Plus very minor cleanup at DocsStreamer\'s constructor.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072092\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072092&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072092\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072092_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072092_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 08:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T08:33:41+0000\'\u003e27\\/Dec\\/15 08:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Ishan.\u003c\\/p\u003e\\n\\n\u003cp\u003eChanges:\u003c\\/p\u003e\\n\u003col\u003e\\n\\t\u003cli\u003eCreate unmodifiable map in SolrIndexSearcher\'s constructor so that we don\'t create unmodifiable instances on every call to SolrIndexSearcher.getNonStoredDVs\u003c\\/li\u003e\\n\\t\u003cli\u003eFixed javadocs for ReturnFields.getLuceneFieldNames to note that it can return null even if ignoreWantsAll=true\u003c\\/li\u003e\\n\\t\u003cli\u003eOptimized field selection in DocsStreamer to create fewer objects. We iterate over requested field names and do intersection in the loop.\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072092_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072092_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 08:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T08:33:41+0000\'\u003e27\\/Dec\\/15 08:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Ishan. \\n\\n Changes: \\n \\n\\t Create unmodifiable map in SolrIndexSearcher\'s constructor so that we don\'t create unmodifiable instances on every call to SolrIndexSearcher.getNonStoredDVs \\n\\t Fixed javadocs for ReturnFields.getLuceneFieldNames to note that it can return null even if ignoreWantsAll=true \\n\\t Optimized field selection in DocsStreamer to create fewer objects. We iterate over requested field names and do intersection in the loop. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072094\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072094&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072094\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072094_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072094_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 09:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T09:00:18+0000\'\u003e27\\/Dec\\/15 09:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003col\u003e\\n\\t\u003cli\u003eRemoved extra license header in schema-non-stored-docvalues.xml which failed the parsing\u003c\\/li\u003e\\n\\t\u003cli\u003eFixed the code comment in TestUseDocValuesAsStored2.java that is no longer valid now that we return useDocValuesAsStored=false field if they are explicitly requested in addition to all fields.\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003cp\u003eI\'ll commit this shortly.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072094_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072094_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 09:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T09:00:18+0000\'\u003e27\\/Dec\\/15 09:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n\\t Removed extra license header in schema-non-stored-docvalues.xml which failed the parsing \\n\\t Fixed the code comment in TestUseDocValuesAsStored2.java that is no longer valid now that we return useDocValuesAsStored=false field if they are explicitly requested in addition to all fields. \\n \\n\\n\\n I\'ll commit this shortly.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072112\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072112&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072112\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15072112_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072112_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 10:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T10:04:42+0000\'\u003e27\\/Dec\\/15 10:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e+1, LGTM.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15072112_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072112_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 10:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T10:04:42+0000\'\u003e27\\/Dec\\/15 10:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    +1, LGTM.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072115\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072115&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072115\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15072115_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072115_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 10:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T10:27:02+0000\'\u003e27\\/Dec\\/15 10:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1721795 from shalin@apache.org in branch \'dev\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1721795\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1721795\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8220\\\" title=\\\"Read field from docValues for non stored fields\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8220\\\"\u003e\u003cdel\u003eSOLR-8220\u003c\\/del\u003e\u003c\\/a\u003e: Read field from DocValues for non stored fields\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15072115_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072115_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 10:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T10:27:02+0000\'\u003e27\\/Dec\\/15 10:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1721795 from shalin@apache.org in branch \'dev\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1721795  ] \\n\\n   SOLR-8220  : Read field from DocValues for non stored fields              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072116\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072116&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072116\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15072116_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072116_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 10:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T10:49:13+0000\'\u003e27\\/Dec\\/15 10:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 27\\/Dec\\/15 10:55\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\" class=\\\"user-hover\\\" rel=\\\"shalinmangar\\\"\u003eShalin Shekhar Mangar\u003c\\/a\u003e for your commit, and Keith, Yonik and Erick for your inputs.\u003c\\/p\u003e\\n\\n\u003cp\u003eI suggest we change:\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e+  Also note that returning stored fields from docValues (\u003cspan class=\\\"code-keyword\\\"\u003edefault\u003c\\/span\u003e in schema versions 1.6+) returns multiValued\\n+  fields in sorted order. If you require the older behavior of multiValued fields being returned in the\\n+  original insertion order, set useDocValuesAsStored=\u003cspan class=\\\"code-quote\\\"\u003e\\\"\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e\\\"\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e the individual fields or make\\n+  sure your schema version is &lt; 1.6. This does not require re-indexing.\\n+  See SOLR-8220 \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e more details.\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eto \u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e+  Also note that \u003cspan class=\\\"code-keyword\\\"\u003ewhile\u003c\\/span\u003e returning non-stored fields from docValues (\u003cspan class=\\\"code-keyword\\\"\u003edefault\u003c\\/span\u003e in schema versions 1.6+, unless useDocValuesAsStored is \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e), the values of a multi-valued\\n+  field are returned in sorted order. If you require the multi-valued fields to be returned in the\\n+  original insertion order, then make your multi-valued field as stored. This requires re-indexing.\\n+  See SOLR-8220 \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e more details.\\n \u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI think the first text block is relevant once \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e goes in. In this issue, we\'re just introducing new behaviour of returning non-stored values from DVs.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15072116_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072116_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 10:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T10:49:13+0000\'\u003e27\\/Dec\\/15 10:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 27\\/Dec\\/15 10:55\\\"\u003eedited\u003c\\/span\u003e                   Thanks  Shalin Shekhar Mangar  for your commit, and Keith, Yonik and Erick for your inputs. \\n\\n I suggest we change: \\n\\n  \\n +  Also note that returning stored fields from docValues ( default  in schema versions 1.6+) returns multiValued\\n+  fields in sorted order. If you require the older behavior of multiValued fields being returned in the\\n+  original insertion order, set useDocValuesAsStored= \\\" false \\\"   for  the individual fields or make\\n+  sure your schema version is &lt; 1.6. This does not require re-indexing.\\n+  See SOLR-8220  for  more details.\\n \\n  \\n\\n to  \\n\\n  \\n +  Also note that  while  returning non-stored fields from docValues ( default  in schema versions 1.6+, unless useDocValuesAsStored is  false ), the values of a multi-valued\\n+  field are returned in sorted order. If you require the multi-valued fields to be returned in the\\n+  original insertion order, then make your multi-valued field as stored. This requires re-indexing.\\n+  See SOLR-8220  for  more details.\\n  \\n  \\n\\n I think the first text block is relevant once   SOLR-8344   goes in. In this issue, we\'re just introducing new behaviour of returning non-stored values from DVs.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072140\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072140&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072140\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15072140_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072140_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 12:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T12:35:31+0000\'\u003e27\\/Dec\\/15 12:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1721808 from shalin@apache.org in branch \'dev\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1721808\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1721808\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8220\\\" title=\\\"Read field from docValues for non stored fields\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8220\\\"\u003e\u003cdel\u003eSOLR-8220\u003c\\/del\u003e\u003c\\/a\u003e: Improve upgrade notes in CHANGES.txt\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15072140_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072140_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 12:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T12:35:31+0000\'\u003e27\\/Dec\\/15 12:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1721808 from shalin@apache.org in branch \'dev\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1721808  ] \\n\\n   SOLR-8220  : Improve upgrade notes in CHANGES.txt              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072178\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072178&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072178\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072178_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072178_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T16:11:46+0000\'\u003e27\\/Dec\\/15 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch for branch_5x.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072178_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072178_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T16:11:46+0000\'\u003e27\\/Dec\\/15 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch for branch_5x.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072182\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072182&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072182\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072182_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072182_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 16:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T16:25:38+0000\'\u003e27\\/Dec\\/15 16:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve been following this since inception with passing interest and wish I had the time this holiday to comment before Shalin committing.  Based on Shalin\'s summary a couple days ago, \u003ctt\u003efl=&#42;\u003c\\/tt\u003e will return these doc-values only fields that have useDocValuesAsStored=true, and it will be true by default going forward.  My only concern with this is that it\'s common-place to index an original input value of text 2 ways &#8211; one for keyword search (marked stored as well), and another copyField target that isn\'t stored, isn\'t indexed, but has docValues for faceting or sorting.  Now, this value will be returned twice from \u003ctt\u003efl=&#42;\u003c\\/tt\u003e.  Granted the user could set useDocValuesAsStored=false on these fields, and that\'s not a big deal to do so nor a big deal to forget to do so.  Is this not lost on Ishan &amp; Shalin who are putting the work into this issue or is this just a recognized trade-off?  It didn\'t have to be this way.  It could have designed such that \u003ctt\u003efl=&#42;\u003c\\/tt\u003e is only for stored fields and those \u003cem\u003eexplicitly\u003c\\/em\u003e setting useDocValuesAsStored=true.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072182_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072182_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 16:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T16:25:38+0000\'\u003e27\\/Dec\\/15 16:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve been following this since inception with passing interest and wish I had the time this holiday to comment before Shalin committing.  Based on Shalin\'s summary a couple days ago,  fl=&#42;  will return these doc-values only fields that have useDocValuesAsStored=true, and it will be true by default going forward.  My only concern with this is that it\'s common-place to index an original input value of text 2 ways &#8211; one for keyword search (marked stored as well), and another copyField target that isn\'t stored, isn\'t indexed, but has docValues for faceting or sorting.  Now, this value will be returned twice from  fl=&#42; .  Granted the user could set useDocValuesAsStored=false on these fields, and that\'s not a big deal to do so nor a big deal to forget to do so.  Is this not lost on Ishan &amp; Shalin who are putting the work into this issue or is this just a recognized trade-off?  It didn\'t have to be this way.  It could have designed such that  fl=&#42;  is only for stored fields and those  explicitly  setting useDocValuesAsStored=true.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072185\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072185&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072185\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15072185_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072185_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T16:46:33+0000\'\u003e27\\/Dec\\/15 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDavid, do you think having the copyField targets to have useDocValuesAsStored as false in our example schemas partly alleviates the problem? \u003c\\/p\u003e\\n\\n\u003cp\u003eIn fact, I was planning to open another issue to add a few more dynamic field types that have stored=false, docValues=true in the example schemas. I can add this change to copyFields too, if it makes sense.\u003c\\/p\u003e\\n\\n\u003cp\u003eOr, rather, do you prefer useDocValuesAsStored to be false by default and turned on on-demand? I think that will make adoption harder, and make it harder for us (or iow more of an abrupt change for user) to get rid of stored fields (even if it makes sense performance wise some day). Having this as the default now (i.e. useDocValuesAsStored=true) would make the transition less abrupt. What do you think?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15072185_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072185_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 16:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T16:46:33+0000\'\u003e27\\/Dec\\/15 16:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    David, do you think having the copyField targets to have useDocValuesAsStored as false in our example schemas partly alleviates the problem?  \\n\\n In fact, I was planning to open another issue to add a few more dynamic field types that have stored=false, docValues=true in the example schemas. I can add this change to copyFields too, if it makes sense. \\n\\n Or, rather, do you prefer useDocValuesAsStored to be false by default and turned on on-demand? I think that will make adoption harder, and make it harder for us (or iow more of an abrupt change for user) to get rid of stored fields (even if it makes sense performance wise some day). Having this as the default now (i.e. useDocValuesAsStored=true) would make the transition less abrupt. What do you think?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072233\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072233&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072233\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072233_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072233_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:31:45+0000\'\u003e27\\/Dec\\/15 20:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRule #5 is very surprising to me, as it seems to conflict with #3 in that it ignores useDocValuesAsStored. What is the rationale?  If the field is both Stored And DV then from where is it returned?  I REALLY hope not DV since it then wouldn\'t respect value ordering. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072233_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072233_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:31:45+0000\'\u003e27\\/Dec\\/15 20:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Rule #5 is very surprising to me, as it seems to conflict with #3 in that it ignores useDocValuesAsStored. What is the rationale?  If the field is both Stored And DV then from where is it returned?  I REALLY hope not DV since it then wouldn\'t respect value ordering.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072234\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072234&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072234\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072234_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072234_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:39:43+0000\'\u003e27\\/Dec\\/15 20:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe idea is that if you have explicitly asked for that field then we find a way to return it, if possible. If it is both stored and DV then it returns from stored.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072234_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072234_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:39:43+0000\'\u003e27\\/Dec\\/15 20:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The idea is that if you have explicitly asked for that field then we find a way to return it, if possible. If it is both stored and DV then it returns from stored.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072241\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072241&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072241\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072241_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072241_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:48:00+0000\'\u003e27\\/Dec\\/15 20:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eIt didn\'t have to be this way. It could have designed such that fl=* is only for stored fields and those explicitly setting useDocValuesAsStored=true.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eLet me take a step back. The way I think about useDocValuesAsStored is that it gives a hint to Solr that this field \u003cb\u003ecan\u003c\\/b\u003e be retrieved from DocValues. But that doesn\'t necessarily mean that we will always retrieve it from DocValues. Later, in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e we will implement some heuristics to choose whether to retrieve from stored or from DV if both are enabled.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, by making useDocValuesAsStored=true as default, we don\'t tie our hands in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e and we\'d be free to choose as we desire. But if the user wants a field to never be \u003cb\u003eautomatically\u003c\\/b\u003e retrieved from DocValues then he can set useDocValuesAsStored=false. Keep in mind that this is only for automatic selection and if the user wants to explicitly retrieve a field by specifying its full name (no globbing) in the \'fl\' parameter then we respect his\\/her wishes and retrieve from DV if necessary.\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe useDocValuesAsStored is a bad name and \'autoDocValuesAsStored\' conveys the meaning better?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072241_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072241_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:48:00+0000\'\u003e27\\/Dec\\/15 20:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     It didn\'t have to be this way. It could have designed such that fl=* is only for stored fields and those explicitly setting useDocValuesAsStored=true.  \\n\\n Let me take a step back. The way I think about useDocValuesAsStored is that it gives a hint to Solr that this field  can  be retrieved from DocValues. But that doesn\'t necessarily mean that we will always retrieve it from DocValues. Later, in   SOLR-8344   we will implement some heuristics to choose whether to retrieve from stored or from DV if both are enabled. \\n\\n So, by making useDocValuesAsStored=true as default, we don\'t tie our hands in   SOLR-8344   and we\'d be free to choose as we desire. But if the user wants a field to never be  automatically  retrieved from DocValues then he can set useDocValuesAsStored=false. Keep in mind that this is only for automatic selection and if the user wants to explicitly retrieve a field by specifying its full name (no globbing) in the \'fl\' parameter then we respect his\\/her wishes and retrieve from DV if necessary. \\n\\n Maybe useDocValuesAsStored is a bad name and \'autoDocValuesAsStored\' conveys the meaning better?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072243\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072243&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072243\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15072243_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072243_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:52:47+0000\'\u003e27\\/Dec\\/15 20:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1721844 from shalin@apache.org in branch \'dev\\/branches\\/branch_5x\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1721844\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1721844\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8220\\\" title=\\\"Read field from docValues for non stored fields\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8220\\\"\u003e\u003cdel\u003eSOLR-8220\u003c\\/del\u003e\u003c\\/a\u003e: Read field from DocValues for non stored fields\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_15072243_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072243_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:52:47+0000\'\u003e27\\/Dec\\/15 20:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1721844 from shalin@apache.org in branch \'dev\\/branches\\/branch_5x\' \\n[  https:\\/\\/svn.apache.org\\/r1721844  ] \\n\\n   SOLR-8220  : Read field from DocValues for non stored fields              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072244\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072244&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072244\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072244_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072244_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:58:31+0000\'\u003e27\\/Dec\\/15 20:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOk then Rule #5 makes perfect sense to me. #3 is questionable to me; hard to clearly explain the rules to someone.  So useDocValuesAsStored is only considered when FL contains an asterisk?  If so, I wonder if it should be named to reflect that somehow. Like \\\"flWildcard\\\". With a name like that, it would be useful to set to false on a stored field. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072244_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072244_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 20:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T20:58:31+0000\'\u003e27\\/Dec\\/15 20:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ok then Rule #5 makes perfect sense to me. #3 is questionable to me; hard to clearly explain the rules to someone.  So useDocValuesAsStored is only considered when FL contains an asterisk?  If so, I wonder if it should be named to reflect that somehow. Like \\\"flWildcard\\\". With a name like that, it would be useful to set to false on a stored field.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072246\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072246&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072246\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072246_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072246_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T21:14:43+0000\'\u003e27\\/Dec\\/15 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e#3 was fixed in later patches. In the committed code, if you request a field explicitly then it will be returned either from stored or from DV.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072246_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072246_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T21:14:43+0000\'\u003e27\\/Dec\\/15 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    #3 was fixed in later patches. In the committed code, if you request a field explicitly then it will be returned either from stored or from DV.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072249\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072249&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072249\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072249_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072249_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 21:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T21:23:32+0000\'\u003e27\\/Dec\\/15 21:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHow about two Boolean settings:\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\u003ctt\u003ematchesFlGlob\u003c\\/tt\u003e defaults to whatever \u003ctt\u003estored\u003c\\/tt\u003e is. Very straight forward to describe; no special exceptions. Useful to set to either true or false in different circumstances depending if it\'s stored or DV. This would be a separate issue.\u003c\\/li\u003e\\n\\t\u003cli\u003e\u003ctt\u003eautoDocValuesAsStored\u003c\\/tt\u003e defaults to whatever \u003ctt\u003edocValues\u003c\\/tt\u003e is.  I\'m not sure how to define it honestly other than to say it doesn\'t have to do with fl globbing. Maybe it could prevent fl choosing the field even if explicitly ?\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072249_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072249_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 21:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T21:23:32+0000\'\u003e27\\/Dec\\/15 21:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    How about two Boolean settings: \\n \\n\\t  matchesFlGlob  defaults to whatever  stored  is. Very straight forward to describe; no special exceptions. Useful to set to either true or false in different circumstances depending if it\'s stored or DV. This would be a separate issue. \\n\\t  autoDocValuesAsStored  defaults to whatever  docValues  is.  I\'m not sure how to define it honestly other than to say it doesn\'t have to do with fl globbing. Maybe it could prevent fl choosing the field even if explicitly ? \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072281\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072281&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072281\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15072281_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072281_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 23:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T23:10:03+0000\'\u003e27\\/Dec\\/15 23:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003ecopyField target that isn\'t stored, isn\'t indexed, but has docValues for faceting or sorting.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eGoing forward, why wouldn\'t one just use docValues on the original field?\u003cbr\\/\u003e\\nAnyway the copyField thing presents ambiguities for atomic updates as well... it\'s not specific to \\\"fl\\\".  Whatever we support for that can be used for \\\"fl\\\" as well (for instance, determinging that the copyField target isn\'t a \\\"real\\\" field because the source is already stored\\/docValued or something).\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems like going forward, people will benefit by adjusting their mental model to \\\"it\'s just a different way of storing... row stored or column stored.\\\"  To a new user, why would one not get all stored fields back?  If column stored option had been present in Lucene from the start, that\'s probably how it would have been implemented in Solr from the start.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15072281_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072281_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Dec\\/15 23:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-27T23:10:03+0000\'\u003e27\\/Dec\\/15 23:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     copyField target that isn\'t stored, isn\'t indexed, but has docValues for faceting or sorting.  \\n\\n Going forward, why wouldn\'t one just use docValues on the original field? \\nAnyway the copyField thing presents ambiguities for atomic updates as well... it\'s not specific to \\\"fl\\\".  Whatever we support for that can be used for \\\"fl\\\" as well (for instance, determinging that the copyField target isn\'t a \\\"real\\\" field because the source is already stored\\/docValued or something). \\n\\n It seems like going forward, people will benefit by adjusting their mental model to \\\"it\'s just a different way of storing... row stored or column stored.\\\"  To a new user, why would one not get all stored fields back?  If column stored option had been present in Lucene from the start, that\'s probably how it would have been implemented in Solr from the start.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072357\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072357&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072357\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072357_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072357_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 02:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T02:38:48+0000\'\u003e28\\/Dec\\/15 02:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003ematchesFlGlob defaults to whatever stored is. Very straight forward to describe; no special exceptions. Useful to set to either true or false in different circumstances depending if it\'s stored or DV. This would be a separate issue.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI don\'t think we need that level of configurability? Keep in mind that every parameter that we add also needs to be explained to a new user. Having trained people on Solr, explaining the difference between stored\\/indexed\\/docvalues is confusing enough. We should avoid adding more complexity if we can. This is another reason why I wanted useDocValuesAsStored to be true by default and un-specified\\/hidden in all default schemas.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso I don\'t really understand your reasons for adding such a parameter. Globbing is allowed on doc values field as long as \u003ctt\u003euseDocValuesAsStored=true\u003c\\/tt\u003e. In the committed patch, you can do \u003ctt\u003efl=a,b,c,d*\u003c\\/tt\u003e and have \u003ctt\u003ed*\u003c\\/tt\u003e match all docvalues fields which are \u003ctt\u003euseDocValuesAsStored=true\u003c\\/tt\u003e. But if you set \u003ctt\u003euseDocValuesAsStored=false\u003c\\/tt\u003e then globbing will not work. What am I missing?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072357_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072357_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 02:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T02:38:48+0000\'\u003e28\\/Dec\\/15 02:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     matchesFlGlob defaults to whatever stored is. Very straight forward to describe; no special exceptions. Useful to set to either true or false in different circumstances depending if it\'s stored or DV. This would be a separate issue.  \\n\\n I don\'t think we need that level of configurability? Keep in mind that every parameter that we add also needs to be explained to a new user. Having trained people on Solr, explaining the difference between stored\\/indexed\\/docvalues is confusing enough. We should avoid adding more complexity if we can. This is another reason why I wanted useDocValuesAsStored to be true by default and un-specified\\/hidden in all default schemas. \\n\\n Also I don\'t really understand your reasons for adding such a parameter. Globbing is allowed on doc values field as long as  useDocValuesAsStored=true . In the committed patch, you can do  fl=a,b,c,d*  and have  d*  match all docvalues fields which are  useDocValuesAsStored=true . But if you set  useDocValuesAsStored=false  then globbing will not work. What am I missing?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072397\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072397&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072397\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15072397_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072397_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 04:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T04:05:43+0000\'\u003e28\\/Dec\\/15 04:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRight, in the last patch from me (and maybe the second last too) \u003cspan class=\\\"error\\\"\u003e&#91;0&#93;\u003c\\/span\u003e, I introduced returning any additional fields with &#42; even if those additional fields are non-stored DVs with useDocValuesAsStored=false. Hence, Shalin\'s point 3 now should read something like:\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\\n\u003cp\u003e3. \u003ctt\u003efl=&#42;,a1\u003c\\/tt\u003e will return all stored=true fields and useDocValuesAsStored=true DV fields. If the \'a1\' field is a stored=false DV field with useDocValuesAsStored=false then it will also be returned because it was explicitly asked for.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;0&#93;\u003c\\/span\u003e - \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071474&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071474\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071474&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071474\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15072397_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072397_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 04:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T04:05:43+0000\'\u003e28\\/Dec\\/15 04:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Right, in the last patch from me (and maybe the second last too)  &#91;0&#93; , I introduced returning any additional fields with &#42; even if those additional fields are non-stored DVs with useDocValuesAsStored=false. Hence, Shalin\'s point 3 now should read something like: \\n\\n \\n 3.  fl=&#42;,a1  will return all stored=true fields and useDocValuesAsStored=true DV fields. If the \'a1\' field is a stored=false DV field with useDocValuesAsStored=false then it will also be returned because it was explicitly asked for.  \\n\\n  &#91;0&#93;  -  https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15071474&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15071474               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072425\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072425&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072425\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072425_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072425_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 05:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T05:11:33+0000\'\u003e28\\/Dec\\/15 05:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e(Yonik) Going forward, why wouldn\'t one just use docValues on the original field?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThe main reason is that for returning the top-X docs with more than a few fields, row storage will probably be faster than columnar storage, performance-wise.  So at index time you can pay for both if you need columnar for other reasons (sorting\\/faceting).  Another reason is to retain a particular ordering for multi-valued fields.  Another reason is that Solr\'s highlighters don\'t read from docValues (solvable).\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e(Ishan) David, do you think having the copyField targets to have useDocValuesAsStored as false in our example schemas partly alleviates the problem?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYes, we should do that.  Ideally most users wouldn\'t want to monkey with such parameters (IMO).  But most schemas I\'ve seen have at least one occurrence of an original input string indexed two ways for search &amp; sorting\\/faceting.  And if our example schemas do, thus motivating us to set it to false for these fields, it just re-confirms my point.\u003c\\/p\u003e\\n\\n\u003cp\u003eShalin: I very much care about ease of documenting\\/explaining this; I thought my comments showed I care.  I guess we just see this issue differently.  I\'m coming around to a new interpretation of what useDocValuesAsStored is, as it was committed and today clarified by you and Ishan.  It basically means will a \'fl\' glob match the DV field or not.  If my understanding is true, then I think this is evidence I\'m on to something with my \\\"matchesFlGlob\\\" suggestion.  You are free to disagree but I think it\'s extremely easy to document\\/describe\\/teach etc. what matchesFlGlob means, particularly if it\'s scope is expanded to apply to stored fields too.\u003c\\/p\u003e\\n\\n\u003cp\u003eFWIW I\'ll be on IRC.  My attempts to ping you haven\'t received a response.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072425_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072425_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 05:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T05:11:33+0000\'\u003e28\\/Dec\\/15 05:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     (Yonik) Going forward, why wouldn\'t one just use docValues on the original field?  \\n\\n The main reason is that for returning the top-X docs with more than a few fields, row storage will probably be faster than columnar storage, performance-wise.  So at index time you can pay for both if you need columnar for other reasons (sorting\\/faceting).  Another reason is to retain a particular ordering for multi-valued fields.  Another reason is that Solr\'s highlighters don\'t read from docValues (solvable). \\n\\n  (Ishan) David, do you think having the copyField targets to have useDocValuesAsStored as false in our example schemas partly alleviates the problem?  \\n\\n Yes, we should do that.  Ideally most users wouldn\'t want to monkey with such parameters (IMO).  But most schemas I\'ve seen have at least one occurrence of an original input string indexed two ways for search &amp; sorting\\/faceting.  And if our example schemas do, thus motivating us to set it to false for these fields, it just re-confirms my point. \\n\\n Shalin: I very much care about ease of documenting\\/explaining this; I thought my comments showed I care.  I guess we just see this issue differently.  I\'m coming around to a new interpretation of what useDocValuesAsStored is, as it was committed and today clarified by you and Ishan.  It basically means will a \'fl\' glob match the DV field or not.  If my understanding is true, then I think this is evidence I\'m on to something with my \\\"matchesFlGlob\\\" suggestion.  You are free to disagree but I think it\'s extremely easy to document\\/describe\\/teach etc. what matchesFlGlob means, particularly if it\'s scope is expanded to apply to stored fields too. \\n\\n FWIW I\'ll be on IRC.  My attempts to ping you haven\'t received a response.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072712\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072712&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072712\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072712_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072712_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 13:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T13:21:56+0000\'\u003e28\\/Dec\\/15 13:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI had a chat with David on IRC. In summary, his objections are:\u003c\\/p\u003e\\n\u003col\u003e\\n\\t\u003cli\u003eThe primary is the default \\u2014 are stored=false &amp; docValues=true returned from globs by default (whatever we name the field\\/fieldtype attributes). It would be set to false often, assuming  many schemas index text both ways?\u003c\\/li\u003e\\n\\t\u003cli\u003eGlobs only match a DV field if useDocValuesAsStored=true and so the property name should be indicative of that\u003c\\/li\u003e\\n\\t\u003cli\u003ePerhaps if we have a matchesFlGlob parameter we would then have no need for useDocValuesAsStored?\u003c\\/li\u003e\\n\u003c\\/ol\u003e\\n\\n\\n\u003cp\u003eI was of the opinion that matchesFlGlob=true is not a great name because what if we use JSON request API in future and there\'s no \\\"fl\\\" so to speak. David then also suggested an alternate name e.g. matchesReturnGlob: whether a glob (asterisk) pattern in an \\u2018fl\\u2019 parameter (or equivalent) will match this field.  Applies to stored or docValues fields.  Defaults to what stored is set to.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m still not sure about this, David. What does stored=true, matchesReturnGlob=false mean? Should that even be allowed?\u003c\\/p\u003e\\n\\n\u003cp\u003eReplying to some of your earlier points:\u003c\\/p\u003e\\n\u003cblockquote\u003e\u003cp\u003eThe main reason is that for returning the top-X docs with more than a few fields, row storage will probably be faster than columnar storage, performance-wise.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAgreed, and that\'s why we need to figure out the specifics in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e so that we choose the right way of retrieval.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eAnother reason is to retain a particular ordering for multi-valued fields\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWe can make always try to use stored values for multi-valued fields in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eAnother reason is that Solr\'s highlighters don\'t read from docValues (solvable).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eWhy is this a reason for not using DocValues on the original field?\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eIdeally most users wouldn\'t want to monkey with such parameters (IMO). But most schemas I\'ve seen have at least one occurrence of an original input string indexed two ways for search &amp; sorting\\/faceting. And if our example schemas do, thus motivating us to set it to false for these fields, it just re-confirms my point.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThe thing is the  copy fields you refer to are deliberately added and I think it should be okay to expect that users will choose the value for useDocValuesAsStored according to their use-cases for such fields. It is also common for people to have docValues=true and stored=true together just because they believe that it isn\'t possible to retrieve doc values. \u003c\\/p\u003e\\n\\n\u003cp\u003eWhat do you think?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15072712_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072712_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 13:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T13:21:56+0000\'\u003e28\\/Dec\\/15 13:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I had a chat with David on IRC. In summary, his objections are: \\n \\n\\t The primary is the default \\u2014 are stored=false &amp; docValues=true returned from globs by default (whatever we name the field\\/fieldtype attributes). It would be set to false often, assuming  many schemas index text both ways? \\n\\t Globs only match a DV field if useDocValuesAsStored=true and so the property name should be indicative of that \\n\\t Perhaps if we have a matchesFlGlob parameter we would then have no need for useDocValuesAsStored? \\n \\n\\n\\n I was of the opinion that matchesFlGlob=true is not a great name because what if we use JSON request API in future and there\'s no \\\"fl\\\" so to speak. David then also suggested an alternate name e.g. matchesReturnGlob: whether a glob (asterisk) pattern in an \\u2018fl\\u2019 parameter (or equivalent) will match this field.  Applies to stored or docValues fields.  Defaults to what stored is set to. \\n\\n I\'m still not sure about this, David. What does stored=true, matchesReturnGlob=false mean? Should that even be allowed? \\n\\n Replying to some of your earlier points: \\n  The main reason is that for returning the top-X docs with more than a few fields, row storage will probably be faster than columnar storage, performance-wise.  \\n\\n Agreed, and that\'s why we need to figure out the specifics in   SOLR-8344   so that we choose the right way of retrieval. \\n\\n  Another reason is to retain a particular ordering for multi-valued fields  \\n\\n We can make always try to use stored values for multi-valued fields in   SOLR-8344  . \\n\\n  Another reason is that Solr\'s highlighters don\'t read from docValues (solvable).  \\n\\n Why is this a reason for not using DocValues on the original field? \\n\\n  Ideally most users wouldn\'t want to monkey with such parameters (IMO). But most schemas I\'ve seen have at least one occurrence of an original input string indexed two ways for search &amp; sorting\\/faceting. And if our example schemas do, thus motivating us to set it to false for these fields, it just re-confirms my point.  \\n\\n The thing is the  copy fields you refer to are deliberately added and I think it should be okay to expect that users will choose the value for useDocValuesAsStored according to their use-cases for such fields. It is also common for people to have docValues=true and stored=true together just because they believe that it isn\'t possible to retrieve doc values.  \\n\\n What do you think?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072789\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072789&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072789\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15072789_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072789_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 15:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T15:02:31+0000\'\u003e28\\/Dec\\/15 15:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\\n\u003cp\u003e&gt; (Yonik) Going forward, why wouldn\'t one just use docValues on the original field [ rather than a copyField ] ?\u003cbr\\/\u003e\\nThe main reason is that for returning the top-X docs with more than a few fields, row storage will probably be faster than columnar storage, performance-wise.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eIf one still wants to use row-stored for performance tweaks (the exact cross-over point will hopefully be determined by \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-8344\\\" title=\\\"Decide default when requested fields are both column and row stored.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-8344\\\"\u003e\u003cdel\u003eSOLR-8344\u003c\\/del\u003e\u003c\\/a\u003e), then they can still do that, and it makes sense to do both row-stored and column-stored on the original field.  Sorry if it wasn\'t clear, but that was my original point.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eIt [ useDocValuesAsStored ] basically means will a \'fl\' glob match the DV field or not.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eThat\'s only one aspect.  Every place that \\\"uses\\\" stored fields should treat DV field as a stored field.  It also affects streaming expressions \\/ SQL, highlighting, partial updates, etc.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlthough I can see why you might think that at first - the fact that the current implementation does return fl=exact_field_name even when useDocValuesAsStored=false was a surprise to me as well.  I don\'t see it as a big deal though (more like a minor syntactic shortcut for a pseudo field).\u003c\\/p\u003e\\n\\n\u003cp\u003eTo me, useDocValuesAsStored=false means \\\"this isn\'t really a stored field... it\'s just an implementation artifact for some query-time feature we need\\\".\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15072789_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072789_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 15:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T15:02:31+0000\'\u003e28\\/Dec\\/15 15:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    \\n &gt; (Yonik) Going forward, why wouldn\'t one just use docValues on the original field [ rather than a copyField ] ? \\nThe main reason is that for returning the top-X docs with more than a few fields, row storage will probably be faster than columnar storage, performance-wise.  \\n\\n If one still wants to use row-stored for performance tweaks (the exact cross-over point will hopefully be determined by   SOLR-8344  ), then they can still do that, and it makes sense to do both row-stored and column-stored on the original field.  Sorry if it wasn\'t clear, but that was my original point. \\n\\n  It [ useDocValuesAsStored ] basically means will a \'fl\' glob match the DV field or not.  \\n That\'s only one aspect.  Every place that \\\"uses\\\" stored fields should treat DV field as a stored field.  It also affects streaming expressions \\/ SQL, highlighting, partial updates, etc. \\n\\n Although I can see why you might think that at first - the fact that the current implementation does return fl=exact_field_name even when useDocValuesAsStored=false was a surprise to me as well.  I don\'t see it as a big deal though (more like a minor syntactic shortcut for a pseudo field). \\n\\n To me, useDocValuesAsStored=false means \\\"this isn\'t really a stored field... it\'s just an implementation artifact for some query-time feature we need\\\".              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15072846\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15072846&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15072846\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072846_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072846_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 15:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T15:59:38+0000\'\u003e28\\/Dec\\/15 15:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTo be clear I\'m not -1 on this; just -0.\u003c\\/p\u003e\\n\\n\u003cp\u003eI get the gist of the intent with what is committed.  Thanks for clarifying guys.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think what may \u003cem\u003ereduce\u003c\\/em\u003e the need for users to know about \\/ touch useDocValuesAsStored (what I hope for) is if conventionally, stored &amp; doc-values fields are the same field, and then we put tokenized text into some other field, indexed=true stored=false docValues=false if we also need keyword search on the field in question.  I think this is what Yonik is suggesting.  The only annoyance with this is highlighting &#8211; the highlighters expect the stored text to be at the same field name as both the query &amp; index.  \u003ctt\u003ehl.requireFieldMatch\u003c\\/tt\u003e could be set to false but that\'s a blunt instrument and isn\'t even supported by the postings highlighter.  Nonetheless I think this could be solved in another issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eCan and should the default\\/example schemas be adjusted to fit the aforementioned conventions?  Then we wouldn\'t have any want to set useDocValuesAsStored in them.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dsmiley\\\" id=\\\"commentauthor_15072846_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dsmiley\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e David Smiley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15072846_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Dec\\/15 15:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-12-28T15:59:38+0000\'\u003e28\\/Dec\\/15 15:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    To be clear I\'m not -1 on this; just -0. \\n\\n I get the gist of the intent with what is committed.  Thanks for clarifying guys. \\n\\n I think what may  reduce  the need for users to know about \\/ touch useDocValuesAsStored (what I hope for) is if conventionally, stored &amp; doc-values fields are the same field, and then we put tokenized text into some other field, indexed=true stored=false docValues=false if we also need keyword search on the field in question.  I think this is what Yonik is suggesting.  The only annoyance with this is highlighting &#8211; the highlighters expect the stored text to be at the same field name as both the query &amp; index.   hl.requireFieldMatch  could be set to false but that\'s a blunt instrument and isn\'t even supported by the postings highlighter.  Nonetheless I think this could be solved in another issue. \\n\\n Can and should the default\\/example schemas be adjusted to fit the aforementioned conventions?  Then we wouldn\'t have any want to set useDocValuesAsStored in them.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15092491\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15092491&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15092491\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15092491_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15092491_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jan\\/16 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-11T19:03:42+0000\'\u003e11\\/Jan\\/16 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHmmm, one implication that I just realized (yeah, I\'m slow sometimes). In addition to the output from a DV field being reordered, identical values are collapsed since it\'s a SortedSet under the covers, right? So if I have a MultiValued DocValues field and put in \\\"memory\\\", \\\"memory\\\", \\\"memory\\\", then all I get back from the DV field is one copy of \\\"memory\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eSince the guarantee that multiValued fields return data in the same order inserted when returning the Stored value is not true of returning DV values, this is perhaps no biggie. IMO it does deserve a comment when we do the docs for this though.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"erickerickson\\\" id=\\\"commentauthor_15092491_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=erickerickson\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"erickerickson\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erick Erickson\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15092491_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jan\\/16 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-11T19:03:42+0000\'\u003e11\\/Jan\\/16 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hmmm, one implication that I just realized (yeah, I\'m slow sometimes). In addition to the output from a DV field being reordered, identical values are collapsed since it\'s a SortedSet under the covers, right? So if I have a MultiValued DocValues field and put in \\\"memory\\\", \\\"memory\\\", \\\"memory\\\", then all I get back from the DV field is one copy of \\\"memory\\\". \\n\\n Since the guarantee that multiValued fields return data in the same order inserted when returning the Stored value is not true of returning DV values, this is perhaps no biggie. IMO it does deserve a comment when we do the docs for this though.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15092500\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15092500&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15092500\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15092500_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15092500_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jan\\/16 19:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-11T19:09:30+0000\'\u003e11\\/Jan\\/16 19:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYep... I commented earlier that we should prob add an explicit \\\"set\\\" type\\/flag in the future.  It can make sense to have a field that preserves order\\/instances and one that doesn\'t.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_15092500_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15092500_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jan\\/16 19:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-01-11T19:09:30+0000\'\u003e11\\/Jan\\/16 19:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Yep... I commented earlier that we should prob add an explicit \\\"set\\\" type\\/flag in the future.  It can make sense to have a field that preserves order\\/instances and one that doesn\'t.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15154456\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15154456&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15154456\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15154456_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15154456_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Feb\\/16 16:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-02-19T16:27:17+0000\'\u003e19\\/Feb\\/16 16:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 19\\/Feb\\/16 16:40\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNotes for the reference guide:\u003c\\/p\u003e\\n\\n\u003cp\u003ePage: \u003ca href=\\\"https:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Defining+Fields\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Defining+Fields\u003c\\/a\u003e\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eProperty=useDocValuesAsStored\\nDescription=If the field has docValues enabled, setting \u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e to \u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e would allow the field to be treated as regular stored fields (even \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e it has stored=\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e). This means that \u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e field would be returned alongside regular stored fields that are returned using the fl parameter.\\nValues=\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e or \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e\\nImplicit \u003cspan class=\\\"code-keyword\\\"\u003edefault\u003c\\/span\u003e=\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e schema versions &lt;1.6, \u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e schema versions &gt;=1.6\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\\n\u003cp\u003ePage: \u003ca href=\\\"https:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/DocValues\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/DocValues\u003c\\/a\u003e\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e&lt;New section&gt; Retrieving docValues during search:\\n\\nField values retrieved during search queries are typically returned from stored values. However, starting with schema version 1.6, all non-stored docValues fields will be also returned along with other stored fields when all fields (or pattern matching globs) are specified to be returned (e.g. fl=*) \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e search queries. This behavior can be turned on and off by setting useDocValuesAsStored parameter \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e a field or a field type to \u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e (implicit \u003cspan class=\\\"code-keyword\\\"\u003edefault\u003c\\/span\u003e since schema version 1.6) or \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e (implicit \u003cspan class=\\\"code-keyword\\\"\u003edefault\u003c\\/span\u003e till schema version 1.5). See https:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Defining+Fields\\n\u003c\\/span\u003e\\nNote that enabling \u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e property has performance implications because DocValues are column-oriented and may therefore incur additional cost to retrieve \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e each returned document. Also note that \u003cspan class=\\\"code-keyword\\\"\u003ewhile\u003c\\/span\u003e returning non-stored fields from docValues (\u003cspan class=\\\"code-keyword\\\"\u003edefault\u003c\\/span\u003e in schema versions 1.6+, unless useDocValuesAsStored is \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e), the values of a multi-valued field are returned in sorted order (and not insertion order). If you require the multi-valued fields to be returned in the original insertion order, then make your multi-valued field as stored (such a change requires re-indexing).\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003ePage: \u003ca href=\\\"https:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Common+Query+Parameters#CommonQueryParameters-Thefl%28FieldList%29Parameter\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Common+Query+Parameters#CommonQueryParameters-Thefl%28FieldList%29Parameter\u003c\\/a\u003e\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eNote: Starting with schema version 1.6, \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e there are non-stored fields with docValues enabled in the index, then a pattern glob like * in the fl parameter will retrieve those fields. This is not the \u003cspan class=\\\"code-keyword\\\"\u003ecase\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e those fields have explicitly useDocValuesAsStored as \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e in their field definition (see https:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Defining+Fields) or the schema version is &lt;1.6. However, something like fl=dvfield or fl=*,dvfield (say dvfield is a non-stored field with docValues enabled) would retrieve the dvfield irrespective of the useDocValuesAsStored value. (See SOLR-8220 \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e more details)\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eCould someone please review and update the ref guide with the above information? And please feel free to reorganize, modify, drop, or rephrase any of this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ichattopadhyaya\\\" id=\\\"commentauthor_15154456_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ichattopadhyaya\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ichattopadhyaya\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Ishan Chattopadhyaya\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15154456_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Feb\\/16 16:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-02-19T16:27:17+0000\'\u003e19\\/Feb\\/16 16:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Ishan Chattopadhyaya - 19\\/Feb\\/16 16:40\\\"\u003eedited\u003c\\/span\u003e                   Notes for the reference guide: \\n\\n Page:  https:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Defining+Fields  \\n  \\n Property=useDocValuesAsStored\\nDescription=If the field has docValues enabled, setting  this  to  true  would allow the field to be treated as regular stored fields (even  if  it has stored= false ). This means that  this  field would be returned alongside regular stored fields that are returned using the fl parameter.\\nValues= true  or  false \\nImplicit  default = false   for  schema versions &lt;1.6,  true   for  schema versions &gt;=1.6\\n \\n  \\n\\n\\n Page:  https:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/DocValues  \\n  \\n &lt;New section&gt; Retrieving docValues during search:\\n\\nField values retrieved during search queries are typically returned from stored values. However, starting with schema version 1.6, all non-stored docValues fields will be also returned along with other stored fields when all fields (or pattern matching globs) are specified to be returned (e.g. fl=*)  for  search queries. This behavior can be turned on and off by setting useDocValuesAsStored parameter  for  a field or a field type to  true  (implicit  default  since schema version 1.6) or  false  (implicit  default  till schema version 1.5). See https: \\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Defining+Fields\\n \\nNote that enabling  this  property has performance implications because DocValues are column-oriented and may therefore incur additional cost to retrieve  for  each returned document. Also note that  while  returning non-stored fields from docValues ( default  in schema versions 1.6+, unless useDocValuesAsStored is  false ), the values of a multi-valued field are returned in sorted order (and not insertion order). If you require the multi-valued fields to be returned in the original insertion order, then make your multi-valued field as stored (such a change requires re-indexing).\\n \\n  \\n\\n Page:  https:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Common+Query+Parameters#CommonQueryParameters-Thefl%28FieldList%29Parameter  \\n  \\n Note: Starting with schema version 1.6,  if  there are non-stored fields with docValues enabled in the index, then a pattern glob like * in the fl parameter will retrieve those fields. This is not the  case   if  those fields have explicitly useDocValuesAsStored as  false  in their field definition (see https: \\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Defining+Fields) or the schema version is &lt;1.6. However, something like fl=dvfield or fl=*,dvfield (say dvfield is a non-stored field with docValues enabled) would retrieve the dvfield irrespective of the useDocValuesAsStored value. (See SOLR-8220  for  more details) \\n \\n  \\n\\n Could someone please review and update the ref guide with the above information? And please feel free to reorganize, modify, drop, or rephrase any of this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15170463\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-8220?focusedCommentId=15170463&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15170463\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15170463_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15170463_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Feb\\/16 08:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-02-27T08:31:56+0000\'\u003e27\\/Feb\\/16 08:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis was released in 5.5 so I am resolving this.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=dsmiley\\\" class=\\\"user-hover\\\" rel=\\\"dsmiley\\\"\u003eDavid Smiley\u003c\\/a\u003e &#8211; please open new issues if you want to change this feature for 6.0 in any way.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"shalinmangar\\\" id=\\\"commentauthor_15170463_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=shalinmangar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"shalinmangar\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Shalin Shekhar Mangar\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15170463_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Feb\\/16 08:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2016-02-27T08:31:56+0000\'\u003e27\\/Feb\\/16 08:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This was released in 5.5 so I am resolving this. \\n\\n  David Smiley  &#8211; please open new issues if you want to change this feature for 6.0 in any way.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310230";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310230&amp;avatarId=22151\\\" alt=\\\"Solr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\"\u003eSolr\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1516225751948"> 
    <input type="hidden" title="jira.request.server.time" value="1172"> 
    <input type="hidden" title="jira.request.id" value="1309x8485532x6"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="3"> 
    <input type="hidden" title="db.reads.time.in.ms" value="103"> 
    <input type="hidden" title="db.conns.time.in.ms" value="113"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 1309x8485532x6
	          REQUEST TIMESTAMP : [17/Jan/2018:21:49:11 +0000]
	               REQUEST TIME : 1.1720
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 3

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=33, elapsedTotal=103995488, elapsedMin=725919, elapsedMax=53759511, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=37, elapsedTotal=113789124, elapsedMin=792143, elapsedMax=53810845, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>