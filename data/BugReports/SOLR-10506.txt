<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|4fe93ac2fc8abf6b8eea1bb77a0bc888e35cfc6c|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"1c72920ebab85c\"";
WRM._unparsedData["project-id"]="12310230";
WRM._unparsedData["project-key"]="\"SOLR\"";
WRM._unparsedData["project-name"]="\"Solr\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310230";
WRM._unparsedData["projectKey"]="\"SOLR\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="SOLR-10506"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[SOLR-10506] Possible memory leak upon collection reload - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[SOLR-10506] Possible memory leak upon collection reload - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/SOLR" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-10506">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310230" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Solr'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310230&amp;avatarId=22151"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/SOLR">Solr</a></li>
                 <li><a class="issue-link" data-issue-key="SOLR-10506" href="/jira/browse/SOLR-10506" id="key-val" rel="13064657">SOLR-10506</a></li>
                </ol>
                <h1 id="summary-val">Possible memory leak upon collection reload</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-10506"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/SOLR-10506/SOLR-10506.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/SOLR-10506/SOLR-10506.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/SOLR-10506/SOLR-10506.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/SOLR-10506/SOLR-10506.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="6.5 Minor release after 6.4">6.5</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+7.0" title="7.0 First 7x release, major release after 6.6">7.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+component+%3D+Server" title="Server ">Server</a> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Security Level:</strong> 
                   <span id="security-val" class="value"> <span class="note">Public</span> (Default Security Level. Issues are Public) </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-13064657-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Upon manual Solr Collection reloading, references to the closed <tt>SolrCore</tt> are not fully removed by the garbage collector as a strong reference to the <tt>ZkIndexSchemaReader</tt> is held in a ZooKeeper <tt>Watcher</tt> that watches for schema changes.</p> 
                  <p>In our case, this leads to a massive memory leak as managed resources are still referenced by the closed <tt>SolrCore</tt>. Our Solr cloud environment utilizes rather large managed resources (synonyms, stopwords). To reproduce, we fired out environment up and reloaded the collection 13 times. As a result we fully exhausted our heap. A closer look with the Yourkit profiler revealed 13 <tt>SolrCore</tt> instances, still holding strong references to the garbage collection root (see screenshot 1).</p> 
                  <p>Each <tt>SolrCore</tt> instance holds a single path with strong references to the gc root via a `Watcher` in `ZkIndexSchemaReader` (see screenshot 2). The <tt>ZkIndexSchemaReader</tt> registers a close hook in the <tt>SolrCore</tt> but the Zookeeper is not removed upon core close.</p> 
                  <p>We supplied a Github Pull Request (<a href="https://github.com/apache/lucene-solr/pull/197" class="external-link" rel="nofollow">https://github.com/apache/lucene-solr/pull/197</a>) that extracts the zookeeper `Watcher` as a static inner class. To eliminate the memory leak, the schema reader is held inside a `WeakReference` and the reference is explicitly removed on core close.</p> 
                  <p>Initially I wanted to supply a test case but unfortunately did not find a good starting point ...</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/SOLR-10506?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/SOLR-10506?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/SOLR-10506?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/SOLR-10506?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12863788" data-issue-id="13064657" data-attachment-type="image" data-attachment-thumbnail="false">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12863788/solr_collection_reload_13_cores.png" draggable="true" data-downloadurl="image/png:solr_collection_reload_13_cores.png:https://issues.apache.org/jira/secure/attachment/12863788/solr_collection_reload_13_cores.png" file-preview-id="12863788" file-preview-title="solr_collection_reload_13_cores.png" file-preview-type="image"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-image" title="PNG File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12863788/solr_collection_reload_13_cores.png" title="Latest  18/Apr/17 10:16 - Torsten Bøgh Köster" draggable="true" data-downloadurl="image/png:solr_collection_reload_13_cores.png:https://issues.apache.org/jira/secure/attachment/12863788/solr_collection_reload_13_cores.png" file-preview-id="12863788" file-preview-title="solr_collection_reload_13_cores.png" file-preview-type="image">solr_collection_reload_13_cores.png</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2017-04-18T10:16:35.101Z">18/Apr/17 10:16</time>
                   </dd>
                   <dd class="attachment-size">
                    186 kB
                   </dd>
                   <dd class="attachment-author">
                    Torsten Bøgh Köster
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12863789" data-issue-id="13064657" data-attachment-type="image" data-attachment-thumbnail="false">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12863789/solr_gc_path_via_zk_WatchManager.png" draggable="true" data-downloadurl="image/png:solr_gc_path_via_zk_WatchManager.png:https://issues.apache.org/jira/secure/attachment/12863789/solr_gc_path_via_zk_WatchManager.png" file-preview-id="12863789" file-preview-title="solr_gc_path_via_zk_WatchManager.png" file-preview-type="image"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-image" title="PNG File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12863789/solr_gc_path_via_zk_WatchManager.png" title="Latest  18/Apr/17 10:17 - Torsten Bøgh Köster" draggable="true" data-downloadurl="image/png:solr_gc_path_via_zk_WatchManager.png:https://issues.apache.org/jira/secure/attachment/12863789/solr_gc_path_via_zk_WatchManager.png" file-preview-id="12863789" file-preview-title="solr_gc_path_via_zk_WatchManager.png" file-preview-type="image">solr_gc_path_via_zk_WatchManager.png</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2017-04-18T10:17:13.290Z">18/Apr/17 10:17</time>
                   </dd>
                   <dd class="attachment-size">
                    240 kB
                   </dd>
                   <dd class="attachment-author">
                    Torsten Bøgh Köster
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12874508" data-issue-id="13064657" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12874508/SOLR-10506.patch" draggable="true" data-downloadurl="text/plain:SOLR-10506.patch:https://issues.apache.org/jira/secure/attachment/12874508/SOLR-10506.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12874508/SOLR-10506.patch" title="Latest  26/Jun/17 14:15 - Christine Poerschke" draggable="true" data-downloadurl="text/plain:SOLR-10506.patch:https://issues.apache.org/jira/secure/attachment/12874508/SOLR-10506.patch">SOLR-10506.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2017-06-26T14:15:09.463Z">26/Jun/17 14:15</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Christine Poerschke
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="supercedes">
                   supercedes
                  </dt> 
                  <dd id="internal-13023551_12310051"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="SOLR-9803: Memory leak when creating/deleting collections in VersionBucket"> <a href="/jira/browse/SOLR-9803" data-issue-key="SOLR-9803" class="issue-link link-title resolution">SOLR-9803</a> <span class="link-summary">Memory leak when creating/deleting collections in VersionBucket</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="links to">
                   links to
                  </dt> 
                  <dd id="remote-77497" data-remote-link-id="77497" class="
                        remote-link                                            "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/images/icons/generic_link_16.png" width="16" height="16" title="Web Link" alt="Web Link"> <span title="GitHub Pull Request #190"> <a href="https://github.com/apache/lucene-solr/pull/190" class="link-title">GitHub Pull Request #190</a> <span class="link-summary"></span> </span> </p> 
                    <ul class="link-snapshot"> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="remote-79194" data-remote-link-id="79194" class="
                        remote-link                                            "> 
                   <div class="link-content"> 
                    <p> <img src="/jira/images/icons/generic_link_16.png" width="16" height="16" title="Web Link" alt="Web Link"> <span title="GitHub Pull Request #197"> <a href="https://github.com/apache/lucene-solr/pull/197" class="link-title">GitHub Pull Request #197</a> <span class="link-summary"></span> </span> </p> 
                    <ul class="link-snapshot"> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_cpoerschke" rel="cpoerschke" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Christine Poerschke&quot;,&quot;emailAddress&quot;:&quot;cpoerschke@bloomberg.net&quot;,&quot;username&quot;:&quot;cpoerschke&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="cpoerschke"></span></span> Christine Poerschke </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_tboeghk" rel="tboeghk" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Torsten Bøgh Köster&quot;,&quot;emailAddress&quot;:&quot;torsten.koester@s24.com&quot;,&quot;username&quot;:&quot;tboeghk&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="tboeghk"></span></span> Torsten Bøgh Köster </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">4</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">13</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="18/Apr/17 10:15"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-04-18T10:15:33+0000">18/Apr/17 10:15</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="28/Jun/17 16:35"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-06-28T16:35:51+0000">28/Jun/17 16:35</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="28/Jun/17 16:35"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2017-06-28T16:35:51+0000">28/Jun/17 16:35</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-10506?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/SOLR-10506?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-15972458\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=15972458&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15972458\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tboeghk\\\" id=\\\"commentauthor_15972458_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tboeghk\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tboeghk\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Torsten B\\u00F8gh K\\u00F6ster\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15972458_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Apr\\/17 10:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-04-18T10:16:35+0000\'\u003e18\\/Apr\\/17 10:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA single collection gets reloaded 13 times. 13 SolrCore instances remain.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tboeghk\\\" id=\\\"commentauthor_15972458_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tboeghk\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tboeghk\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Torsten B\\u00F8gh K\\u00F6ster\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15972458_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Apr\\/17 10:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-04-18T10:16:35+0000\'\u003e18\\/Apr\\/17 10:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    A single collection gets reloaded 13 times. 13 SolrCore instances remain.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15972459\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=15972459&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15972459\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tboeghk\\\" id=\\\"commentauthor_15972459_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tboeghk\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tboeghk\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Torsten B\\u00F8gh K\\u00F6ster\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15972459_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Apr\\/17 10:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-04-18T10:17:13+0000\'\u003e18\\/Apr\\/17 10:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe strong references via schema index reader\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tboeghk\\\" id=\\\"commentauthor_15972459_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tboeghk\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tboeghk\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Torsten B\\u00F8gh K\\u00F6ster\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15972459_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Apr\\/17 10:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-04-18T10:17:13+0000\'\u003e18\\/Apr\\/17 10:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The strong references via schema index reader              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15972465\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=15972465&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15972465\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15972465_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15972465_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Apr\\/17 10:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-04-18T10:19:11+0000\'\u003e18\\/Apr\\/17 10:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGitHub user tboeghk opened a pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10506\\\" title=\\\"Possible memory leak upon collection reload\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-10506\\\"\u003e\u003cdel\u003eSOLR-10506\u003c\\/del\u003e\u003c\\/a\u003e Fixes a memory leak in zk schema watching\u003c\\/p\u003e\\n\\n\u003cp\u003e    Upon manual Solr Collection reloading, references to the closed `SolrCore` are not fully removed by the garbage collector as a strong reference to the `ZkIndexSchemaReader` is held in a ZooKeeper `Watcher` that watches for schema changes.\u003c\\/p\u003e\\n\\n\u003cp\u003e    In our case, this leads to a massive memory leak as managed resources are still referenced by the closed `SolrCore`. Our Solr cloud environment utilizes rather large managed resources (synonyms, stopwords). To reproduce, we fired out environment up and reloaded the collection 13 times. As a result we fully exhausted our heap. A closer look with the Yourkit profiler revealed 13 `SolrCore` instances, still holding strong references to the garbage collection root.\u003c\\/p\u003e\\n\\n\u003cp\u003e    Each `SolrCore` instance holds a single path with strong references to the gc root via a `Watcher` in `ZkIndexSchemaReader`. The `ZkIndexSchemaReader` registers a close hook in the `SolrCore` but the Zookeeper is not removed upon core close.\u003c\\/p\u003e\\n\\n\u003cp\u003e    We supplied this Github Pull Request that extracts the zookeeper `Watcher` as a static inner class. To eliminate the memory leak, the schema reader is held inside a `WeakReference` and the reference is explicitly removed on core close.\u003c\\/p\u003e\\n\\n\u003cp\u003e    Initially I wanted to supply a test case but unfortunately did not find a good starting point ...\u003c\\/p\u003e\\n\\n\u003cp\u003eYou can merge this pull request into a Git repository by running:\u003c\\/p\u003e\\n\\n\u003cp\u003e    $ git pull \u003ca href=\\\"https:\\/\\/github.com\\/shopping24\\/lucene-solr\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/shopping24\\/lucene-solr\u003c\\/a\u003e branch_6_5\u003c\\/p\u003e\\n\\n\u003cp\u003eAlternatively you can review and apply these changes as the patch at:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190.patch\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190.patch\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eTo close this pull request, make a commit to your master\\/trunk branch\u003cbr\\/\u003e\\nwith (at least) the following in the commit message:\u003c\\/p\u003e\\n\\n\u003cp\u003e    This closes #190\u003c\\/p\u003e\\n\\n\u003chr \\/\u003e\\n\u003cp\u003ecommit 9a5abee7e9b431ba0c2e0d432dc33b1919fa4f40\u003cbr\\/\u003e\\nAuthor: Torsten B\\u00F8gh Ko\\u0308ster &lt;torsten.koester@s24.com&gt;\u003cbr\\/\u003e\\nDate:   2017-04-18T09:43:52Z\u003c\\/p\u003e\\n\\n\u003cp\u003e    Fixes a memory leak in zk schema watching\u003c\\/p\u003e\\n\\n\u003chr \\/\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15972465_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15972465_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Apr\\/17 10:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-04-18T10:19:11+0000\'\u003e18\\/Apr\\/17 10:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    GitHub user tboeghk opened a pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190  \\n\\n       SOLR-10506   Fixes a memory leak in zk schema watching \\n\\n     Upon manual Solr Collection reloading, references to the closed `SolrCore` are not fully removed by the garbage collector as a strong reference to the `ZkIndexSchemaReader` is held in a ZooKeeper `Watcher` that watches for schema changes. \\n\\n     In our case, this leads to a massive memory leak as managed resources are still referenced by the closed `SolrCore`. Our Solr cloud environment utilizes rather large managed resources (synonyms, stopwords). To reproduce, we fired out environment up and reloaded the collection 13 times. As a result we fully exhausted our heap. A closer look with the Yourkit profiler revealed 13 `SolrCore` instances, still holding strong references to the garbage collection root. \\n\\n     Each `SolrCore` instance holds a single path with strong references to the gc root via a `Watcher` in `ZkIndexSchemaReader`. The `ZkIndexSchemaReader` registers a close hook in the `SolrCore` but the Zookeeper is not removed upon core close. \\n\\n     We supplied this Github Pull Request that extracts the zookeeper `Watcher` as a static inner class. To eliminate the memory leak, the schema reader is held inside a `WeakReference` and the reference is explicitly removed on core close. \\n\\n     Initially I wanted to supply a test case but unfortunately did not find a good starting point ... \\n\\n You can merge this pull request into a Git repository by running: \\n\\n     $ git pull  https:\\/\\/github.com\\/shopping24\\/lucene-solr  branch_6_5 \\n\\n Alternatively you can review and apply these changes as the patch at: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190.patch  \\n\\n To close this pull request, make a commit to your master\\/trunk branch \\nwith (at least) the following in the commit message: \\n\\n     This closes #190 \\n\\n \\n commit 9a5abee7e9b431ba0c2e0d432dc33b1919fa4f40 \\nAuthor: Torsten B\\u00F8gh Ko\\u0308ster &lt;torsten.koester@s24.com&gt; \\nDate:   2017-04-18T09:43:52Z \\n\\n     Fixes a memory leak in zk schema watching \\n\\n              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15985007\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=15985007&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15985007\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_15985007_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15985007_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/17 15:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-04-26T15:30:07+0000\'\u003e26\\/Apr\\/17 15:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Torsten, thanks for finding and analysing this issue, and for putting up a fix for it.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve just tried to send you a pull request with two small suggestions from my \u003ca href=\\\"https:\\/\\/github.com\\/cpoerschke\\/lucene-solr\\/tree\\/jira\\/solr-10506-branch_6_5\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ejira\\/solr-10506-branch_6_5\u003c\\/a\u003e branch but something in the settings didn\'t allow it. Anyhow, the commit is there at the top of the branch ...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e... To eliminate the memory leak, the schema reader is held inside a `WeakReference` and the reference is explicitly removed on core close. ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eAs I read the code and patch, this will allow the ZkIndexSchemaReader (and SolrCore?) to be garbage collected but the Watcher would stay around, right? And ideally we\'d also wish for the Watcher to not stay around ...\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e... Initially I wanted to supply a test case but unfortunately did not find a good starting point ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHmm, yeah, tricky. Building upon the above \\\"but the watcher stays around\\\" observation, perhaps something like this could work:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e# start instance without cores\\n# determine baseline number of (managed-schema) watchers\\n# create a core\\n# reload the core a couple of times\\n# delete the core\\n# determine \u003cspan class=\\\"code-keyword\\\"\u003efinal\u003c\\/span\u003e number of (managed-schema) watchers\\n# test that no \u003cspan class=\\\"code-quote\\\"\u003e\'extra\'\u003c\\/span\u003e watchers are still around\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_15985007_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15985007_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Apr\\/17 15:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-04-26T15:30:07+0000\'\u003e26\\/Apr\\/17 15:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Torsten, thanks for finding and analysing this issue, and for putting up a fix for it. \\n\\n I\'ve just tried to send you a pull request with two small suggestions from my  jira\\/solr-10506-branch_6_5  branch but something in the settings didn\'t allow it. Anyhow, the commit is there at the top of the branch ... \\n\\n  ... To eliminate the memory leak, the schema reader is held inside a `WeakReference` and the reference is explicitly removed on core close. ...  \\n\\n As I read the code and patch, this will allow the ZkIndexSchemaReader (and SolrCore?) to be garbage collected but the Watcher would stay around, right? And ideally we\'d also wish for the Watcher to not stay around ... \\n\\n  ... Initially I wanted to supply a test case but unfortunately did not find a good starting point ...  \\n\\n Hmm, yeah, tricky. Building upon the above \\\"but the watcher stays around\\\" observation, perhaps something like this could work: \\n  \\n # start instance without cores\\n# determine baseline number of (managed-schema) watchers\\n# create a core\\n# reload the core a couple of times\\n# delete the core\\n# determine  final  number of (managed-schema) watchers\\n# test that no  \'extra\'  watchers are still around\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15996574\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=15996574&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15996574\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15996574_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15996574_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 11:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T11:26:33+0000\'\u003e04\\/May\\/17 11:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGitHub user tboeghk opened a pull request:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10506\\\" title=\\\"Possible memory leak upon collection reload\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-10506\\\"\u003e\u003cdel\u003eSOLR-10506\u003c\\/del\u003e\u003c\\/a\u003e Fixes a memory leak in zk schema watching\u003c\\/p\u003e\\n\\n\u003cp\u003e    Upon manual Solr Collection reloading, references to the closed SolrCore are not fully removed by the garbage collector as a strong reference to the ZkIndexSchemaReader is held in a ZooKeeper Watcher that watches for schema changes.\u003c\\/p\u003e\\n\\n\u003cp\u003e    In our case, this leads to a massive memory leak as managed resources are still referenced by the closed SolrCore. Our Solr cloud environment utilizes rather large managed resources (synonyms, stopwords). To reproduce, we fired out environment up and reloaded the collection 13 times. As a result we fully exhausted our heap. A closer look with the Yourkit profiler revealed 13 SolrCore instances, still holding strong references to the garbage collection root.\u003c\\/p\u003e\\n\\n\u003cp\u003e    Each SolrCore instance holds a single path with strong references to the gc root via a Watcher in ZkIndexSchemaReader. The ZkIndexSchemaReader registers a close hook in the SolrCore but the Zookeeper is not removed upon core close.\u003c\\/p\u003e\\n\\n\u003cp\u003e    We supplied this Github Pull Request that extracts the zookeeper Watcher as a static inner class. To eliminate the memory leak, the schema reader is held inside a WeakReference and the reference is explicitly removed on core close.\u003c\\/p\u003e\\n\\n\u003cp\u003e    Initially I wanted to supply a test case but unfortunately did not find a good starting point ...\u003c\\/p\u003e\\n\\n\u003cp\u003e    N.B.: I did this second PR for the same issue to separate code changes for both \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10506\\\" title=\\\"Possible memory leak upon collection reload\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-10506\\\"\u003e\u003cdel\u003eSOLR-10506\u003c\\/del\u003e\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10550\\\" title=\\\"Improve FileFloatSource eviction \\/\\/ reduce FileFloatSource memory footprint\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-10550\\\"\u003eSOLR-10550\u003c\\/a\u003e which I maintained on the same fork branch :-\\/\u003c\\/p\u003e\\n\\n\u003cp\u003eYou can merge this pull request into a Git repository by running:\u003c\\/p\u003e\\n\\n\u003cp\u003e    $ git pull \u003ca href=\\\"https:\\/\\/github.com\\/shopping24\\/lucene-solr\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/shopping24\\/lucene-solr\u003c\\/a\u003e branch_6_5__\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10506\\\" title=\\\"Possible memory leak upon collection reload\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-10506\\\"\u003e\u003cdel\u003eSOLR-10506\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eAlternatively you can review and apply these changes as the patch at:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197.patch\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197.patch\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eTo close this pull request, make a commit to your master\\/trunk branch\u003cbr\\/\u003e\\nwith (at least) the following in the commit message:\u003c\\/p\u003e\\n\\n\u003cp\u003e    This closes #197\u003c\\/p\u003e\\n\\n\u003chr \\/\u003e\\n\u003cp\u003ecommit aa3a96cd88d1724f3ab641f25c5373ff58f4616d\u003cbr\\/\u003e\\nAuthor: Torsten B\\u00F8gh Ko\\u0308ster &lt;torsten.koester@s24.com&gt;\u003cbr\\/\u003e\\nDate:   2017-04-18T09:43:52Z\u003c\\/p\u003e\\n\\n\u003cp\u003e    Fixes a memory leak in zk schema watching\u003c\\/p\u003e\\n\\n\u003chr \\/\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15996574_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15996574_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 11:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T11:26:33+0000\'\u003e04\\/May\\/17 11:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    GitHub user tboeghk opened a pull request: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197  \\n\\n       SOLR-10506   Fixes a memory leak in zk schema watching \\n\\n     Upon manual Solr Collection reloading, references to the closed SolrCore are not fully removed by the garbage collector as a strong reference to the ZkIndexSchemaReader is held in a ZooKeeper Watcher that watches for schema changes. \\n\\n     In our case, this leads to a massive memory leak as managed resources are still referenced by the closed SolrCore. Our Solr cloud environment utilizes rather large managed resources (synonyms, stopwords). To reproduce, we fired out environment up and reloaded the collection 13 times. As a result we fully exhausted our heap. A closer look with the Yourkit profiler revealed 13 SolrCore instances, still holding strong references to the garbage collection root. \\n\\n     Each SolrCore instance holds a single path with strong references to the gc root via a Watcher in ZkIndexSchemaReader. The ZkIndexSchemaReader registers a close hook in the SolrCore but the Zookeeper is not removed upon core close. \\n\\n     We supplied this Github Pull Request that extracts the zookeeper Watcher as a static inner class. To eliminate the memory leak, the schema reader is held inside a WeakReference and the reference is explicitly removed on core close. \\n\\n     Initially I wanted to supply a test case but unfortunately did not find a good starting point ... \\n\\n     N.B.: I did this second PR for the same issue to separate code changes for both   SOLR-10506   and  SOLR-10550  which I maintained on the same fork branch :-\\/ \\n\\n You can merge this pull request into a Git repository by running: \\n\\n     $ git pull  https:\\/\\/github.com\\/shopping24\\/lucene-solr  branch_6_5__  SOLR-10506   \\n\\n Alternatively you can review and apply these changes as the patch at: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197.patch  \\n\\n To close this pull request, make a commit to your master\\/trunk branch \\nwith (at least) the following in the commit message: \\n\\n     This closes #197 \\n\\n \\n commit aa3a96cd88d1724f3ab641f25c5373ff58f4616d \\nAuthor: Torsten B\\u00F8gh Ko\\u0308ster &lt;torsten.koester@s24.com&gt; \\nDate:   2017-04-18T09:43:52Z \\n\\n     Fixes a memory leak in zk schema watching \\n\\n              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15996576\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=15996576&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15996576\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15996576_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15996576_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 11:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T11:26:59+0000\'\u003e04\\/May\\/17 11:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user tboeghk commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    Superseeded by #197 \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15996576_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15996576_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 11:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T11:26:59+0000\'\u003e04\\/May\\/17 11:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user tboeghk commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190  \\n\\n     Superseeded by #197               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15996577\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=15996577&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15996577\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15996577_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15996577_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 11:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T11:27:00+0000\'\u003e04\\/May\\/17 11:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user tboeghk closed the pull request at:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_15996577_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15996577_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 11:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T11:27:00+0000\'\u003e04\\/May\\/17 11:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user tboeghk closed the pull request at: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/190               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15996607\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=15996607&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15996607\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tboeghk\\\" id=\\\"commentauthor_15996607_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tboeghk\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tboeghk\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Torsten B\\u00F8gh K\\u00F6ster\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15996607_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 11:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T11:58:10+0000\'\u003e04\\/May\\/17 11:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Christine,\u003c\\/p\u003e\\n\\n\u003cp\u003ethanks for the suggestions, I cherry picked your commit onto the pull request branch! \u003c\\/p\u003e\\n\\n\u003cp\u003eIndeed, removing a watcher from the Zookeeper would be the best ans cleanest solution. The problem with garbage collecting a schema watcher is that neither the \u003ctt\u003eSolrZkClient\u003c\\/tt\u003e nor the underlying \u003ctt\u003eSolrZooKeeper\u003c\\/tt\u003e \\/ \u003ctt\u003eZooKeeper\u003c\\/tt\u003e facilitates any method to enumerate or manipulate registered watchers. Futhermore, any Zookeeper watchers are wrapped before submitted into the Zookeeper code \u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e. So I guess that removing a submitted Zookeeper watcher might be pretty hard \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/sad.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eRegarding the test: The plan seems legit to me, I\'ll try my very best. Do you have any hints towards an existing test super class?\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;1&#93;\u003c\\/span\u003e \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/branch_6_5\\/solr\\/solrj\\/src\\/java\\/org\\/apache\\/solr\\/common\\/cloud\\/SolrZkClient.java#L299\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/branch_6_5\\/solr\\/solrj\\/src\\/java\\/org\\/apache\\/solr\\/common\\/cloud\\/SolrZkClient.java#L299\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tboeghk\\\" id=\\\"commentauthor_15996607_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tboeghk\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tboeghk\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Torsten B\\u00F8gh K\\u00F6ster\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15996607_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 11:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T11:58:10+0000\'\u003e04\\/May\\/17 11:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Christine, \\n\\n thanks for the suggestions, I cherry picked your commit onto the pull request branch!  \\n\\n Indeed, removing a watcher from the Zookeeper would be the best ans cleanest solution. The problem with garbage collecting a schema watcher is that neither the  SolrZkClient  nor the underlying  SolrZooKeeper  \\/  ZooKeeper  facilitates any method to enumerate or manipulate registered watchers. Futhermore, any Zookeeper watchers are wrapped before submitted into the Zookeeper code  &#91;1&#93; . So I guess that removing a submitted Zookeeper watcher might be pretty hard   \\n\\n Regarding the test: The plan seems legit to me, I\'ll try my very best. Do you have any hints towards an existing test super class? \\n\\n  &#91;1&#93;   https:\\/\\/github.com\\/apache\\/lucene-solr\\/blob\\/branch_6_5\\/solr\\/solrj\\/src\\/java\\/org\\/apache\\/solr\\/common\\/cloud\\/SolrZkClient.java#L299               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-15997269\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=15997269&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15997269\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_15997269_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15997269_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 19:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T19:13:12+0000\'\u003e04\\/May\\/17 19:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e... removing a submitted Zookeeper watcher might be pretty hard ..\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYes, you\'re right. Somehow I thought it could be done since leader elections after all can be canceled (there\'s the ElectionWatcher class in LeaderElector.java) but that works differently.\u003c\\/p\u003e\\n\\n\u003cp\u003eOkay, so if we can\'t remove a watcher, can we perhaps re-use the one we\'ve got? I\'ve added a commit to my \u003ca href=\\\"https:\\/\\/github.com\\/cpoerschke\\/lucene-solr\\/tree\\/jira\\/solr-10506-branch_6_5\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ejira\\/solr-10506-branch_6_5\u003c\\/a\u003e branch to explore that possibility.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003e... Do you have any hints towards an existing test super class? ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eTestReload and TestConfigReload look like possibilities. StressRamUsageEstimator.testLargeSetOfByteArrays does a before\\/after memory measurement. If our test could use a large managed resource (like in your use case) and do a couple of reloads then perhaps a very measureable difference could be detected without the fix and a less measureable (but still non-zero) difference could be detected with the fix, something along those lines?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_15997269_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_15997269_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/May\\/17 19:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-04T19:13:12+0000\'\u003e04\\/May\\/17 19:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     ... removing a submitted Zookeeper watcher might be pretty hard ..  \\n\\n Yes, you\'re right. Somehow I thought it could be done since leader elections after all can be canceled (there\'s the ElectionWatcher class in LeaderElector.java) but that works differently. \\n\\n Okay, so if we can\'t remove a watcher, can we perhaps re-use the one we\'ve got? I\'ve added a commit to my  jira\\/solr-10506-branch_6_5  branch to explore that possibility. \\n\\n  ... Do you have any hints towards an existing test super class? ...  \\n\\n TestReload and TestConfigReload look like possibilities. StressRamUsageEstimator.testLargeSetOfByteArrays does a before\\/after memory measurement. If our test could use a large managed resource (like in your use case) and do a couple of reloads then perhaps a very measureable difference could be detected without the fix and a less measureable (but still non-zero) difference could be detected with the fix, something along those lines?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16002538\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16002538&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16002538\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16002538_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16002538_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/May\\/17 11:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-09T11:40:15+0000\'\u003e09\\/May\\/17 11:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'d suggest to simply implement the command method in ZkIndexSchmeaReader like this, so that it reuses the already existing SchemaWatcher:\u003cbr\\/\u003e\\n\u003ctt\u003eupdateSchema(schemaWatcher, -1);\u003c\\/tt\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eSee my changes here:\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/branch_6_5__SOLR-10506\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/branch_6_5__SOLR-10506\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve also added a basic test for the SchemaWatcher class.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16002538_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16002538_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/May\\/17 11:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-09T11:40:15+0000\'\u003e09\\/May\\/17 11:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'d suggest to simply implement the command method in ZkIndexSchmeaReader like this, so that it reuses the already existing SchemaWatcher: \\n updateSchema(schemaWatcher, -1);  \\n\\n See my changes here: \\n https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/branch_6_5__SOLR-10506  \\n\\n I\'ve also added a basic test for the SchemaWatcher class.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16004451\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16004451&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16004451\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16004451_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004451_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 10:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T10:29:37+0000\'\u003e10\\/May\\/17 10:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e... implement the command method in ZkIndexSchmeaReader ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eInteresting idea to re-use the watcher like that. That would cover the session expiry but not the core reload, correct?\u003c\\/p\u003e\\n\u003chr \\/\u003e\\n\u003cp\u003eAs a next step, could I suggest combining what we\'ve got so far into a working branch\\/pull request based off master(&#42;), \u003cem\u003ejira\\/solr-10506\u003c\\/em\u003e would be conventional name for the branch. What we\'ve got so far is spread across multiple commits and multiple branches, an overall working branch\\/pull request should make it easier to \'see\' the overall change:\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197\u003c\\/a\u003e (into apache:branch_6_5 from shopping24:branch_6_5__\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10506\\\" title=\\\"Possible memory leak upon collection reload\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-10506\\\"\u003e\u003cdel\u003eSOLR-10506\u003c\\/del\u003e\u003c\\/a\u003e )\u003c\\/li\u003e\\n\\t\u003cli\u003e\u003ca href=\\\"https:\\/\\/github.com\\/cpoerschke\\/lucene-solr\\/tree\\/jira\\/solr-10506-branch_6_5\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/cpoerschke\\/lucene-solr\\/tree\\/jira\\/solr-10506-branch_6_5\u003c\\/a\u003e\u003c\\/li\u003e\\n\\t\u003cli\u003e\u003ca href=\\\"https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/branch_6_5__SOLR-10506\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/branch_6_5__SOLR-10506\u003c\\/a\u003e\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e(&#42;) Development workflow would be for the changes to be made to master first, followed by any backporting to non-master branch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16004451_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004451_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 10:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T10:29:37+0000\'\u003e10\\/May\\/17 10:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     ... implement the command method in ZkIndexSchmeaReader ...  \\n\\n Interesting idea to re-use the watcher like that. That would cover the session expiry but not the core reload, correct? \\n \\n As a next step, could I suggest combining what we\'ve got so far into a working branch\\/pull request based off master(&#42;),  jira\\/solr-10506  would be conventional name for the branch. What we\'ve got so far is spread across multiple commits and multiple branches, an overall working branch\\/pull request should make it easier to \'see\' the overall change: \\n \\n\\t  https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197  (into apache:branch_6_5 from shopping24:branch_6_5__  SOLR-10506   ) \\n\\t  https:\\/\\/github.com\\/cpoerschke\\/lucene-solr\\/tree\\/jira\\/solr-10506-branch_6_5  \\n\\t  https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/branch_6_5__SOLR-10506  \\n \\n\\n\\n (&#42;) Development workflow would be for the changes to be made to master first, followed by any backporting to non-master branch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16004456\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16004456&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16004456\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mdrob\\\" id=\\\"commentauthor_16004456_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mdrob\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mdrob\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Drob\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004456_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 10:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T10:32:34+0000\'\u003e10\\/May\\/17 10:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSince it\'s a weak reference, couldn\'t the schema reader be collected now without getting explicitly removed? That leads to a bad situation where a still-open SolrCore stops getting updates.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mdrob\\\" id=\\\"commentauthor_16004456_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mdrob\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mdrob\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Drob\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004456_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 10:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T10:32:34+0000\'\u003e10\\/May\\/17 10:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Since it\'s a weak reference, couldn\'t the schema reader be collected now without getting explicitly removed? That leads to a bad situation where a still-open SolrCore stops getting updates.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16004503\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16004503&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16004503\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16004503_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004503_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 11:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T11:27:09+0000\'\u003e10\\/May\\/17 11:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eInteresting idea to re-use the watcher like that. That would cover the session expiry but not the core reload, correct?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eYes, correct.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eSince it\'s a weak reference, couldn\'t the schema reader be collected now without getting explicitly removed? That leads to a bad situation where a still-open SolrCore stops getting updates.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cp\u003eWell, the stopWatching method is only called when a core is closed. Maybe it should be called in postClose to be safe? I\'m not familiar enough with the internals of a SolrCore lifecycle to judge this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16004503_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004503_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 11:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T11:27:09+0000\'\u003e10\\/May\\/17 11:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Interesting idea to re-use the watcher like that. That would cover the session expiry but not the core reload, correct?  \\n Yes, correct. \\n\\n  Since it\'s a weak reference, couldn\'t the schema reader be collected now without getting explicitly removed? That leads to a bad situation where a still-open SolrCore stops getting updates.  \\n Well, the stopWatching method is only called when a core is closed. Maybe it should be called in postClose to be safe? I\'m not familiar enough with the internals of a SolrCore lifecycle to judge this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16004527\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16004527&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16004527\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16004527_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004527_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 11:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T11:45:09+0000\'\u003e10\\/May\\/17 11:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBased off upstream\\/master: \u003ca href=\\\"https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/jira\\/solr-10506\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/jira\\/solr-10506\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16004527_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004527_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 11:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T11:45:09+0000\'\u003e10\\/May\\/17 11:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Based off upstream\\/master:  https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/jira\\/solr-10506               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16004552\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16004552&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16004552\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tboeghk\\\" id=\\\"commentauthor_16004552_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tboeghk\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tboeghk\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Torsten B\\u00F8gh K\\u00F6ster\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004552_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 12:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T12:01:48+0000\'\u003e10\\/May\\/17 12:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Joerg &amp; Christine for digging into this! \u003c\\/p\u003e\\n\\n\u003cp\u003eI would love to see a patch in the official release as this is causing us a lot of pain (as does \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10550\\\" title=\\\"Improve FileFloatSource eviction \\/\\/ reduce FileFloatSource memory footprint\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-10550\\\"\u003eSOLR-10550\u003c\\/a\u003e \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"tboeghk\\\" id=\\\"commentauthor_16004552_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=tboeghk\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"tboeghk\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Torsten B\\u00F8gh K\\u00F6ster\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004552_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 12:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T12:01:48+0000\'\u003e10\\/May\\/17 12:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Joerg &amp; Christine for digging into this!  \\n\\n I would love to see a patch in the official release as this is causing us a lot of pain (as does  SOLR-10550                 \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16004822\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16004822&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16004822\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mdrob\\\" id=\\\"commentauthor_16004822_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mdrob\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mdrob\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Drob\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004822_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 14:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T14:59:53+0000\'\u003e10\\/May\\/17 14:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWell, the stopWatching method is only called when a core is closed. Maybe it should be called in postClose to be safe? I\'m not familiar enough with the internals of a SolrCore lifecycle to judge this.\u003cbr\\/\u003e\\nThe implementation details of it being a weak reference mean that it can return null without stopWatching\\/clear ever being called. If the GC decides that it needs memory then your schema reader will suddenly be gone. So an open core using lots of memory will eventually lose the reference before it should.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mdrob\\\" id=\\\"commentauthor_16004822_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mdrob\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mdrob\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Drob\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004822_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 14:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T14:59:53+0000\'\u003e10\\/May\\/17 14:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Well, the stopWatching method is only called when a core is closed. Maybe it should be called in postClose to be safe? I\'m not familiar enough with the internals of a SolrCore lifecycle to judge this. \\nThe implementation details of it being a weak reference mean that it can return null without stopWatching\\/clear ever being called. If the GC decides that it needs memory then your schema reader will suddenly be gone. So an open core using lots of memory will eventually lose the reference before it should.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16004852\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16004852&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16004852\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16004852_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004852_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 15:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T15:25:51+0000\'\u003e10\\/May\\/17 15:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOh, right, good point! So, the SchemaWatcher needs to keep a strong reference to the ZkIndexSchemaReader but then that should be cleaned up in the SolrCore\'s onClose hook. I\'ll try to run another test with a memory profiler in the next couple of days to see if that solves the issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16004852_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16004852_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/May\\/17 15:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-10T15:25:51+0000\'\u003e10\\/May\\/17 15:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Oh, right, good point! So, the SchemaWatcher needs to keep a strong reference to the ZkIndexSchemaReader but then that should be cleaned up in the SolrCore\'s onClose hook. I\'ll try to run another test with a memory profiler in the next couple of days to see if that solves the issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16015480\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16015480&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16015480\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16015480_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16015480_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/May\\/17 09:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-18T09:27:05+0000\'\u003e18\\/May\\/17 09:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ve updated my branch so that the reference in the SchemaWatcher is a strong reference, and is discarded after the SolrCore is closed (postClose). Based on testing this with a memory profiler, no strong references to the cores are retained after closing the cores, so this fixes the memory leak.\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/jira\\/solr-10506\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/jira\\/solr-10506\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat\'s the next step now? Should I open another Github pull request to merge my branch into upstream\'s master branch?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16015480_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16015480_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/May\\/17 09:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-18T09:27:05+0000\'\u003e18\\/May\\/17 09:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ve updated my branch so that the reference in the SchemaWatcher is a strong reference, and is discarded after the SolrCore is closed (postClose). Based on testing this with a memory profiler, no strong references to the cores are retained after closing the cores, so this fixes the memory leak. \\n https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/jira\\/solr-10506  \\n\\n What\'s the next step now? Should I open another Github pull request to merge my branch into upstream\'s master branch?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16017757\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16017757&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16017757\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16017757_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16017757_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/May\\/17 17:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-19T17:57:59+0000\'\u003e19\\/May\\/17 17:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e... Based on testing this with a memory profiler, no strong references to the cores are retained after closing the cores ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eNice. Just wondering if SchemaWatcher objects are also not retained or if they stick around? I had \u003ca href=\\\"https:\\/\\/github.com\\/cpoerschke\\/lucene-solr\\/tree\\/jira\\/solr-10506-branch_6_5\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003eexplored\u003c\\/a\u003e SchemaWatcher re-use in code only so far i.e. without any profiling.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16017757_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16017757_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/May\\/17 17:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-19T17:57:59+0000\'\u003e19\\/May\\/17 17:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     ... Based on testing this with a memory profiler, no strong references to the cores are retained after closing the cores ...  \\n\\n Nice. Just wondering if SchemaWatcher objects are also not retained or if they stick around? I had  explored  SchemaWatcher re-use in code only so far i.e. without any profiling.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16017804\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16017804&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16017804\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mdrob\\\" id=\\\"commentauthor_16017804_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mdrob\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mdrob\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Drob\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16017804_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/May\\/17 18:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-19T18:27:46+0000\'\u003e19\\/May\\/17 18:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e+1 LGTM. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\" class=\\\"user-hover\\\" rel=\\\"cpoerschke\\\"\u003eChristine Poerschke\u003c\\/a\u003e, I\'ll let you commit this when you are done exploring the reuse - I think it might be reasonable to have as a separate issue to get this code fixed now, but it\'s your call.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mdrob\\\" id=\\\"commentauthor_16017804_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mdrob\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mdrob\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Drob\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16017804_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/May\\/17 18:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-19T18:27:46+0000\'\u003e19\\/May\\/17 18:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    +1 LGTM.  Christine Poerschke , I\'ll let you commit this when you are done exploring the reuse - I think it might be reasonable to have as a separate issue to get this code fixed now, but it\'s your call.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16019247\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16019247&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16019247\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16019247_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16019247_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/17 08:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-22T08:00:37+0000\'\u003e22\\/May\\/17 08:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eNice. Just wondering if SchemaWatcher objects are also not retained or if they stick around?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThey stick around until the Zookeeper connector releases the reference to the watcher. I had looked at your exploration, but I wasn\'t sure if reassigning the existing watcher to a new reader\\/core works because it would mean that the previous core will no longer be notified on schema updates, but it might still be open for a while. I think that reusing the watchers requires a bigger restructuring of the code, so that one reusable watcher can notify multiple schema readers.\u003c\\/p\u003e\\n\\n\u003cp\u003eMy preference would be to open a separate issue for that, because I think the watchers by themselves are lightweight objects, while this issue is currently causing actual production outages for us (or it would if we didn\'t use a locally patched version).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"joergr\\\" id=\\\"commentauthor_16019247_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=joergr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"joergr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e J\\u00F6rg Rathlev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16019247_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/May\\/17 08:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-05-22T08:00:37+0000\'\u003e22\\/May\\/17 08:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Nice. Just wondering if SchemaWatcher objects are also not retained or if they stick around?  \\n\\n They stick around until the Zookeeper connector releases the reference to the watcher. I had looked at your exploration, but I wasn\'t sure if reassigning the existing watcher to a new reader\\/core works because it would mean that the previous core will no longer be notified on schema updates, but it might still be open for a while. I think that reusing the watchers requires a bigger restructuring of the code, so that one reusable watcher can notify multiple schema readers. \\n\\n My preference would be to open a separate issue for that, because I think the watchers by themselves are lightweight objects, while this issue is currently causing actual production outages for us (or it would if we didn\'t use a locally patched version).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16035222\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16035222&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16035222\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16035222_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16035222_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/17 18:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-02T18:45:27+0000\'\u003e02\\/Jun\\/17 18:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e... to have as a separate issue ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\u003cblockquote\u003e\u003cp\u003e... preference would be to open a separate issue for that ...\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eSounds good.\u003c\\/p\u003e\\n\\n\u003cp\u003eI just returned to this, and maybe Friday evening timing was a mistake and it will all be clearer next week ... am struggling to convince myself that the proposed removal of the watcher re-creation in \u003cem\u003eZkIndexSchemaReader.command()\u003c\\/em\u003e is appropriate. The existing comment on the method says\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e  \\/**\\n   * Called after a ZooKeeper session expiration occurs; need to re-create the watcher and update the current\\n   * schema from ZooKeeper.\\n   *\\/\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003eand \u003cem\u003eZkController.addOnReconnectListener(OnReconnect listener)\u003c\\/em\u003e method has a comment\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e  \\/**\\n   * Add a listener to be notified once there is a \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e session created after a ZooKeeper session expiration occurs;\\n   * in most cases, listeners will be components that have watchers that need to be re-created.\\n   *\\/\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003eand intuitively \\\"we got disconnected and so need to recreate our watchers since\\/if the watchers we had previously were for the connection that got disconnected\\\" seems plausible but then equally so \\\"we registered watches with the zkclient and wouldn\'t it be nice for zkclient to take care of watcher lifecycle across disconnects?\\\" is not implausible. Need to go checkout ZK docs and stuff, not today.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16035222_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16035222_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/17 18:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-02T18:45:27+0000\'\u003e02\\/Jun\\/17 18:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     ... to have as a separate issue ...  \\n  ... preference would be to open a separate issue for that ...  \\n\\n Sounds good. \\n\\n I just returned to this, and maybe Friday evening timing was a mistake and it will all be clearer next week ... am struggling to convince myself that the proposed removal of the watcher re-creation in  ZkIndexSchemaReader.command()  is appropriate. The existing comment on the method says \\n  \\n   \\/**\\n   * Called after a ZooKeeper session expiration occurs; need to re-create the watcher and update the current\\n   * schema from ZooKeeper.\\n   *\\/\\n \\n  \\n and  ZkController.addOnReconnectListener(OnReconnect listener)  method has a comment \\n  \\n   \\/**\\n   * Add a listener to be notified once there is a  new  session created after a ZooKeeper session expiration occurs;\\n   * in most cases, listeners will be components that have watchers that need to be re-created.\\n   *\\/\\n \\n  \\n and intuitively \\\"we got disconnected and so need to recreate our watchers since\\/if the watchers we had previously were for the connection that got disconnected\\\" seems plausible but then equally so \\\"we registered watches with the zkclient and wouldn\'t it be nice for zkclient to take care of watcher lifecycle across disconnects?\\\" is not implausible. Need to go checkout ZK docs and stuff, not today.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16063149\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16063149&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16063149\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16063149_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16063149_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jun\\/17 14:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-26T14:15:35+0000\'\u003e26\\/Jun\\/17 14:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching final(&#63;) patch: merged latest master into \u003ca href=\\\"https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/jira\\/solr-10506\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/jira\\/solr-10506\u003c\\/a\u003e and changed \u003cem\u003eZkIndexSchemaReader.command()\u003c\\/em\u003e back to re-create the watcher.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf there are no further comments or concerns then I will go ahead and commit the change some time tomorrow (Tuesday) London time.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16063149_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16063149_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jun\\/17 14:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-26T14:15:35+0000\'\u003e26\\/Jun\\/17 14:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching final(&#63;) patch: merged latest master into  https:\\/\\/github.com\\/joergrathlev\\/lucene-solr\\/tree\\/jira\\/solr-10506  and changed  ZkIndexSchemaReader.command()  back to re-create the watcher. \\n\\n If there are no further comments or concerns then I will go ahead and commit the change some time tomorrow (Tuesday) London time.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16063170\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16063170&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16063170\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_16063170_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16063170_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jun\\/17 14:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-26T14:32:15+0000\'\u003e26\\/Jun\\/17 14:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user uschindler commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    Should we not have a non-empty message when logging the InterruptedException?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_16063170_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16063170_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jun\\/17 14:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-26T14:32:15+0000\'\u003e26\\/Jun\\/17 14:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user uschindler commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197  \\n\\n     Should we not have a non-empty message when logging the InterruptedException?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16063188\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16063188&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16063188\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_16063188_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16063188_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jun\\/17 14:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-26T14:44:37+0000\'\u003e26\\/Jun\\/17 14:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGithub user tboeghk commented on the issue:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003ca href=\\\"https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    +1 \u003c\\/p\u003e\\n\\n\u003cp\u003e    ... but I wanted to focus the PR above on the fix (the empty message is copied code). Also this PR is outdated as the current patch is atached here: \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10506\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10506\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"githubbot\\\" id=\\\"commentauthor_16063188_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=githubbot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"githubbot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF GitHub Bot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16063188_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jun\\/17 14:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-26T14:44:37+0000\'\u003e26\\/Jun\\/17 14:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Github user tboeghk commented on the issue: \\n\\n      https:\\/\\/github.com\\/apache\\/lucene-solr\\/pull\\/197  \\n\\n     +1  \\n\\n     ... but I wanted to focus the PR above on the fix (the empty message is copied code). Also this PR is outdated as the current patch is atached here:  https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10506               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16063199\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16063199&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16063199\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16063199_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16063199_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jun\\/17 14:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-26T14:55:08+0000\'\u003e26\\/Jun\\/17 14:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e+1 to having a non-empty message in general, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10958\\\" title=\\\"avoid (and eventually disallow?) empty message when logging exception\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-10958\\\"\u003eSOLR-10958\u003c\\/a\u003e created.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16063199_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16063199_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Jun\\/17 14:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-26T14:55:08+0000\'\u003e26\\/Jun\\/17 14:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    +1 to having a non-empty message in general,  SOLR-10958  created.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16064888\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16064888&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16064888\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16064888_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16064888_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jun\\/17 14:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-27T14:08:18+0000\'\u003e27\\/Jun\\/17 14:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 701c73d45a0188d006316e9a3168ad6b70e0fac9 in lucene-solr\'s branch refs\\/heads\\/master from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\" class=\\\"user-hover\\\" rel=\\\"cpoerschke\\\"\u003eChristine Poerschke\u003c\\/a\u003e\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=701c73d\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=701c73d\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/SOLR-10506\\\" title=\\\"Possible memory leak upon collection reload\\\" class=\\\"issue-link\\\" data-issue-key=\\\"SOLR-10506\\\"\u003e\u003cdel\u003eSOLR-10506\u003c\\/del\u003e\u003c\\/a\u003e: Fix memory leak (upon collection reload or ZooKeeper session expiry) in ZkIndexSchemaReader.\u003cbr\\/\u003e\\n(Torsten B\\u00F8gh K\\u00F6ster, Christine Poerschke, J\\u00F6rg Rathlev, Mike Drob)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_16064888_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16064888_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jun\\/17 14:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-27T14:08:18+0000\'\u003e27\\/Jun\\/17 14:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 701c73d45a0188d006316e9a3168ad6b70e0fac9 in lucene-solr\'s branch refs\\/heads\\/master from  Christine Poerschke  \\n[  https:\\/\\/git-wip-us.apache.org\\/repos\\/asf?p=lucene-solr.git;h=701c73d  ] \\n\\n   SOLR-10506  : Fix memory leak (upon collection reload or ZooKeeper session expiry) in ZkIndexSchemaReader. \\n(Torsten B\\u00F8gh K\\u00F6ster, Christine Poerschke, J\\u00F6rg Rathlev, Mike Drob)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-16066825\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-10506?focusedCommentId=16066825&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16066825\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16066825_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16066825_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jun\\/17 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-28T16:35:51+0000\'\u003e28\\/Jun\\/17 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks everyone!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cpoerschke\\\" id=\\\"commentauthor_16066825_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cpoerschke\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cpoerschke\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christine Poerschke\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_16066825_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jun\\/17 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2017-06-28T16:35:51+0000\'\u003e28\\/Jun\\/17 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks everyone!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310230";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310230&amp;avatarId=22151\\\" alt=\\\"Solr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\"\u003eSolr\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520342893112"> 
    <input type="hidden" title="jira.request.server.time" value="218"> 
    <input type="hidden" title="jira.request.id" value="808x97535578x5"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="2"> 
    <input type="hidden" title="db.reads.time.in.ms" value="47"> 
    <input type="hidden" title="db.conns.time.in.ms" value="55"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 808x97535578x5
	          REQUEST TIMESTAMP : [06/Mar/2018:13:28:13 +0000]
	               REQUEST TIME : 0.2180
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 2

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=35, elapsedTotal=47668354, elapsedMin=609833, elapsedMax=16398515, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=39, elapsedTotal=55978582, elapsedMin=642662, elapsedMax=16432712, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>