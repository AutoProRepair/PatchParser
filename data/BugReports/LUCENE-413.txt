<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|5fe0189e3df8cf781130fef6328f35aa08469597|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"a5369214684a04\"";
WRM._unparsedData["project-id"]="12310110";
WRM._unparsedData["project-key"]="\"LUCENE\"";
WRM._unparsedData["project-name"]="\"Lucene - Core\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310110";
WRM._unparsedData["projectKey"]="\"LUCENE\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="LUCENE-413"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[LUCENE-413] [PATCH] BooleanScorer2 ArrayIndexOutOfBoundsException + alternative NearSpans - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[LUCENE-413] [PATCH] BooleanScorer2 ArrayIndexOutOfBoundsException + alternative NearSpans - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/LUCENE" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-413">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310110" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Lucene - Core'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310110&amp;avatarId=10061"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/LUCENE">Lucene - Core</a></li>
                 <li><a class="issue-link" data-issue-key="LUCENE-413" href="/jira/browse/LUCENE-413" id="key-val" rel="12314563">LUCENE-413</a></li>
                </ol>
                <h1 id="summary-val">[PATCH] BooleanScorer2 ArrayIndexOutOfBoundsException + alternative NearSpans</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-413"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/LUCENE-413/LUCENE-413.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/LUCENE-413/LUCENE-413.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/LUCENE-413/LUCENE-413.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/LUCENE-413/LUCENE-413.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+fixVersion+%3D+2.0.0" title="2.0.0 mostly 1.9 with deprecated items removed">2.0.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+component+%3D+%22core%2Fsearch%22" title="core/search issues with search code">core/search</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12314563-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value"> 
                    <p>Operating System: other<br> Platform: Other</p> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_10010" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bugzilla Id" class="name">Bugzilla Id:</strong> 
                      <div id="customfield_10010-val" class="value type-importid" data-fieldtype="importid" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        35823 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>From Erik's post at java-dev: </p> 
                  <p>&gt; &nbsp; &nbsp; &nbsp;<span class="error">[java]</span> Caused by: java.lang.ArrayIndexOutOfBoundsException: 4 <br> &gt; &nbsp; &nbsp; &nbsp;<span class="error">[java]</span> &nbsp; &nbsp; at org.apache.lucene.search.BooleanScorer2 <br> &gt; $Coordinator.coordFactor(BooleanScorer2.java:54) <br> &gt; &nbsp; &nbsp; &nbsp;<span class="error">[java]</span> &nbsp; &nbsp; at org.apache.lucene.search.BooleanScorer2.score <br> &gt; (BooleanScorer2.java:292) <br> ... </p> 
                  <p>and my answer: </p> 
                  <p>Probably nrMatchers is increased too often in score() by calling score() <br> more than once.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/LUCENE-413?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/LUCENE-413?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/LUCENE-413?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/LUCENE-413?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312673" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312673/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch3.txt" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch3.txt:https://issues.apache.org/jira/secure/attachment/12312673/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch3.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312673/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch3.txt" title="Latest  28/Jul/05 02:49 - Paul Elschot" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch3.txt:https://issues.apache.org/jira/secure/attachment/12312673/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch3.txt">ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch3.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-07-28T02:49:42.000Z">28/Jul/05 02:49</time>
                   </dd>
                   <dd class="attachment-size">
                    1 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312674" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312674/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch4.txt" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch4.txt:https://issues.apache.org/jira/secure/attachment/12312674/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch4.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312674/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch4.txt" title="Latest  17/Aug/05 05:42 - Paul Elschot" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch4.txt:https://issues.apache.org/jira/secure/attachment/12312674/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch4.txt">ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerPatch4.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-08-17T05:42:55.000Z">17/Aug/05 05:42</time>
                   </dd>
                   <dd class="attachment-size">
                    0.6 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312672" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312672/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerTestPatch1.txt" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerTestPatch1.txt:https://issues.apache.org/jira/secure/attachment/12312672/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerTestPatch1.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312672/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerTestPatch1.txt" title="Latest  27/Jul/05 05:41 - Paul Elschot" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerTestPatch1.txt:https://issues.apache.org/jira/secure/attachment/12312672/ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerTestPatch1.txt">ASF.LICENSE.NOT.GRANTED--DisjunctionSumScorerTestPatch1.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-07-27T05:41:40.000Z">27/Jul/05 05:41</time>
                   </dd>
                   <dd class="attachment-size">
                    0.9 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312675" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312675/ASF.LICENSE.NOT.GRANTED--NearSpansOrdered.java" draggable="true" data-downloadurl="text/x-java:ASF.LICENSE.NOT.GRANTED--NearSpansOrdered.java:https://issues.apache.org/jira/secure/attachment/12312675/ASF.LICENSE.NOT.GRANTED--NearSpansOrdered.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="Java Source File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312675/ASF.LICENSE.NOT.GRANTED--NearSpansOrdered.java" title="Latest  17/Aug/05 05:48 - Paul Elschot" draggable="true" data-downloadurl="text/x-java:ASF.LICENSE.NOT.GRANTED--NearSpansOrdered.java:https://issues.apache.org/jira/secure/attachment/12312675/ASF.LICENSE.NOT.GRANTED--NearSpansOrdered.java">ASF.LICENSE.NOT.GRANTED--NearSpansOrdered.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-08-17T05:48:04.000Z">17/Aug/05 05:48</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312680" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312680/ASF.LICENSE.NOT.GRANTED--NearSpansOrderedBugHuntPatch1.txt" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--NearSpansOrderedBugHuntPatch1.txt:https://issues.apache.org/jira/secure/attachment/12312680/ASF.LICENSE.NOT.GRANTED--NearSpansOrderedBugHuntPatch1.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312680/ASF.LICENSE.NOT.GRANTED--NearSpansOrderedBugHuntPatch1.txt" title="Latest  24/Aug/05 02:37 - Paul Elschot" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--NearSpansOrderedBugHuntPatch1.txt:https://issues.apache.org/jira/secure/attachment/12312680/ASF.LICENSE.NOT.GRANTED--NearSpansOrderedBugHuntPatch1.txt">ASF.LICENSE.NOT.GRANTED--NearSpansOrderedBugHuntPatch1.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-08-24T02:37:22.000Z">24/Aug/05 02:37</time>
                   </dd>
                   <dd class="attachment-size">
                    1 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312678" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312678/ASF.LICENSE.NOT.GRANTED--NearSpansUnordered.java" draggable="true" data-downloadurl="text/x-java:ASF.LICENSE.NOT.GRANTED--NearSpansUnordered.java:https://issues.apache.org/jira/secure/attachment/12312678/ASF.LICENSE.NOT.GRANTED--NearSpansUnordered.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="Java Source File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312678/ASF.LICENSE.NOT.GRANTED--NearSpansUnordered.java" title="Latest  19/Aug/05 04:42 - Paul Elschot" draggable="true" data-downloadurl="text/x-java:ASF.LICENSE.NOT.GRANTED--NearSpansUnordered.java:https://issues.apache.org/jira/secure/attachment/12312678/ASF.LICENSE.NOT.GRANTED--NearSpansUnordered.java">ASF.LICENSE.NOT.GRANTED--NearSpansUnordered.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-08-19T04:42:41.000Z">19/Aug/05 04:42</time>
                   </dd>
                   <dd class="attachment-size">
                    7 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312676" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312676/ASF.LICENSE.NOT.GRANTED--SpanNearQueryPatch1.txt" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--SpanNearQueryPatch1.txt:https://issues.apache.org/jira/secure/attachment/12312676/ASF.LICENSE.NOT.GRANTED--SpanNearQueryPatch1.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312676/ASF.LICENSE.NOT.GRANTED--SpanNearQueryPatch1.txt" title="Latest  17/Aug/05 05:53 - Paul Elschot" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--SpanNearQueryPatch1.txt:https://issues.apache.org/jira/secure/attachment/12312676/ASF.LICENSE.NOT.GRANTED--SpanNearQueryPatch1.txt">ASF.LICENSE.NOT.GRANTED--SpanNearQueryPatch1.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-08-17T05:53:42.000Z">17/Aug/05 05:53</time>
                   </dd>
                   <dd class="attachment-size">
                    0.6 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12312679" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12312679/ASF.LICENSE.NOT.GRANTED--SpanScorerTestPatch1.txt" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--SpanScorerTestPatch1.txt:https://issues.apache.org/jira/secure/attachment/12312679/ASF.LICENSE.NOT.GRANTED--SpanScorerTestPatch1.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12312679/ASF.LICENSE.NOT.GRANTED--SpanScorerTestPatch1.txt" title="Latest  22/Aug/05 05:31 - Paul Elschot" draggable="true" data-downloadurl="text/plain:ASF.LICENSE.NOT.GRANTED--SpanScorerTestPatch1.txt:https://issues.apache.org/jira/secure/attachment/12312679/ASF.LICENSE.NOT.GRANTED--SpanScorerTestPatch1.txt">ASF.LICENSE.NOT.GRANTED--SpanScorerTestPatch1.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2005-08-22T05:31:49.000Z">22/Aug/05 05:31</time>
                   </dd>
                   <dd class="attachment-size">
                    0.9 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12324730" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12324730/DisjunctionSumScorerPatch5.txt" draggable="true" data-downloadurl="text/plain:DisjunctionSumScorerPatch5.txt:https://issues.apache.org/jira/secure/attachment/12324730/DisjunctionSumScorerPatch5.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12324730/DisjunctionSumScorerPatch5.txt" title="Latest  30/Mar/06 03:55 - Paul Elschot" draggable="true" data-downloadurl="text/plain:DisjunctionSumScorerPatch5.txt:https://issues.apache.org/jira/secure/attachment/12324730/DisjunctionSumScorerPatch5.txt">DisjunctionSumScorerPatch5.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-03-30T03:55:55.000Z">30/Mar/06 03:55</time>
                   </dd>
                   <dd class="attachment-size">
                    0.4 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12324860" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12324860/SpanScorer.java" draggable="true" data-downloadurl="text/x-java:SpanScorer.java:https://issues.apache.org/jira/secure/attachment/12324860/SpanScorer.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="Java Source File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12324860/SpanScorer.java" title="Latest  03/Apr/06 04:56 - Paul Elschot" draggable="true" data-downloadurl="text/x-java:SpanScorer.java:https://issues.apache.org/jira/secure/attachment/12324860/SpanScorer.java">SpanScorer.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-03T04:56:32.000Z">03/Apr/06 04:56</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12324861" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12324861/TestSpansAdvanced.java" draggable="true" data-downloadurl="text/x-java:TestSpansAdvanced.java:https://issues.apache.org/jira/secure/attachment/12324861/TestSpansAdvanced.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="Java Source File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12324861/TestSpansAdvanced.java" title="Latest  03/Apr/06 04:56 - Paul Elschot" draggable="true" data-downloadurl="text/x-java:TestSpansAdvanced.java:https://issues.apache.org/jira/secure/attachment/12324861/TestSpansAdvanced.java">TestSpansAdvanced.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-03T04:56:32.000Z">03/Apr/06 04:56</time>
                   </dd>
                   <dd class="attachment-size">
                    6 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12324862" data-issue-id="12314563" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12324862/TestSpansAdvanced2.java" draggable="true" data-downloadurl="text/x-java:TestSpansAdvanced2.java:https://issues.apache.org/jira/secure/attachment/12324862/TestSpansAdvanced2.java"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="Java Source File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12324862/TestSpansAdvanced2.java" title="Latest  03/Apr/06 04:56 - Paul Elschot" draggable="true" data-downloadurl="text/x-java:TestSpansAdvanced2.java:https://issues.apache.org/jira/secure/attachment/12324862/TestSpansAdvanced2.java">TestSpansAdvanced2.java</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-04-03T04:56:32.000Z">03/Apr/06 04:56</time>
                   </dd>
                   <dd class="attachment-size">
                    4 kB
                   </dd>
                   <dd class="attachment-author">
                    Paul Elschot
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_yseeley@gmail.com" rel="yseeley@gmail.com" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Yonik Seeley&quot;,&quot;emailAddress&quot;:&quot;yseeley@gmail.com&quot;,&quot;username&quot;:&quot;yseeley@gmail.com&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="yseeley@gmail.com"></span></span> Yonik Seeley </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_paul.elschot@xs4all.nl" rel="paul.elschot@xs4all.nl" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Paul Elschot&quot;,&quot;emailAddress&quot;:&quot;paul.j.elschot@gmail.com&quot;,&quot;username&quot;:&quot;paul.elschot@xs4all.nl&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="paul.elschot@xs4all.nl"></span></span> Paul Elschot </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">1</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">1</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="22/Jul/05 04:18"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2005-07-22T04:18:39+0000">22/Jul/05 04:18</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="02/Jun/11 22:03"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2011-06-02T22:03:15+0000">02/Jun/11 22:03</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="04/Apr/06 23:33"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-04-04T23:33:05+0000">04/Apr/06 23:33</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-413?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/LUCENE-413?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12322500\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322500&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322500\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322500_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322500_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jul\\/05 04:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-22T04:19:48+0000\'\u003e22\\/Jul\\/05 04:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=15737)\u003cbr\\/\u003e\\nPatch for BooleanScorer2\u003c\\/p\u003e\\n\\n\u003cp\u003eDo not increase nrMatchers more than once for each scored doc.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322500_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322500_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jul\\/05 04:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-22T04:19:48+0000\'\u003e22\\/Jul\\/05 04:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=15737) \\nPatch for BooleanScorer2 \\n\\n Do not increase nrMatchers more than once for each scored doc.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322501\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322501&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322501\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322501_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322501_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jul\\/05 10:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-22T10:51:39+0000\'\u003e22\\/Jul\\/05 10:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted, thanks.  All test cases still pass.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322501_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322501_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jul\\/05 10:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-22T10:51:39+0000\'\u003e22\\/Jul\\/05 10:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed, thanks.  All test cases still pass.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322502\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322502&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322502\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322502_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322502_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jul\\/05 03:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-25T03:37:15+0000\'\u003e25\\/Jul\\/05 03:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=15759)\u003cbr\\/\u003e\\nTest version of BooleanScorer2\u003c\\/p\u003e\\n\\n\u003cp\u003eSince the last patch did not fix the reported bug,\u003cbr\\/\u003e\\nthis test version of BooleanScorer2.java can be useful\u003cbr\\/\u003e\\nin getting more information when the array index out of\u003cbr\\/\u003e\\nbounds exception is thrown.\u003cbr\\/\u003e\\nIt throws the exception earlier (when the index is incremented)\u003cbr\\/\u003e\\nand provides more state of the BooleanScorer2, ao. the document number.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis version includes the previous patch, and it applies\u003cbr\\/\u003e\\nthe test of the previous patch also in\u003cbr\\/\u003e\\nthe BooleanScorer2.score() method.\u003c\\/p\u003e\\n\\n\u003cp\u003eRegards,\u003cbr\\/\u003e\\nPaul Elschot\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322502_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322502_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'25\\/Jul\\/05 03:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-25T03:37:15+0000\'\u003e25\\/Jul\\/05 03:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=15759) \\nTest version of BooleanScorer2 \\n\\n Since the last patch did not fix the reported bug, \\nthis test version of BooleanScorer2.java can be useful \\nin getting more information when the array index out of \\nbounds exception is thrown. \\nIt throws the exception earlier (when the index is incremented) \\nand provides more state of the BooleanScorer2, ao. the document number. \\n\\n This version includes the previous patch, and it applies \\nthe test of the previous patch also in \\nthe BooleanScorer2.score() method. \\n\\n Regards, \\nPaul Elschot              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322503\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322503&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322503\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322503_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322503_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jul\\/05 05:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-27T05:41:40+0000\'\u003e27\\/Jul\\/05 05:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=15787)\u003cbr\\/\u003e\\nTest patch for DisjunctionSumScorer.java\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom the discussion on java-dev a possible source\u003cbr\\/\u003e\\nof this problem is that DisjunctionSumScorer provides a\u003cbr\\/\u003e\\nnrMatchers that is bigger than its number of scorers.\u003cbr\\/\u003e\\nThis patches DisjunctionSumScorer to throw an AssertionError\u003cbr\\/\u003e\\nwith extra state info as soon as that happens.\u003c\\/p\u003e\\n\\n\u003cp\u003eUnfortunately I still have no idea what the problem is.\u003c\\/p\u003e\\n\\n\u003cp\u003eErik, could you run your test again with this patch?\u003c\\/p\u003e\\n\\n\u003cp\u003eRegards,\u003cbr\\/\u003e\\nPaul Elschot\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322503_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322503_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jul\\/05 05:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-27T05:41:40+0000\'\u003e27\\/Jul\\/05 05:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=15787) \\nTest patch for DisjunctionSumScorer.java \\n\\n From the discussion on java-dev a possible source \\nof this problem is that DisjunctionSumScorer provides a \\nnrMatchers that is bigger than its number of scorers. \\nThis patches DisjunctionSumScorer to throw an AssertionError \\nwith extra state info as soon as that happens. \\n\\n Unfortunately I still have no idea what the problem is. \\n\\n Erik, could you run your test again with this patch? \\n\\n Regards, \\nPaul Elschot              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322504\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322504&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322504\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322504_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322504_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jul\\/05 09:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-27T09:57:16+0000\'\u003e27\\/Jul\\/05 09:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI applied the DisjunctionSumScorer patch, and got this output:\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.lang.AssertionError: nrMatchers: 4 bigger than nrScorers: 3\u003cbr\\/\u003e\\nminimumNrMatchers: 1, currentDoc: 789, currentScore: 0.08528499\u003cbr\\/\u003e\\ntop: org.apache.lucene.search.spans.SpanScorer@18f51f\u003cbr\\/\u003e\\nscorerQueue.size(): 3\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent\u003cbr\\/\u003e\\n(DisjunctionSumScorer.java:171)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:224)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322504_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322504_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Jul\\/05 09:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-27T09:57:16+0000\'\u003e27\\/Jul\\/05 09:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I applied the DisjunctionSumScorer patch, and got this output: \\n\\n java.lang.AssertionError: nrMatchers: 4 bigger than nrScorers: 3 \\nminimumNrMatchers: 1, currentDoc: 789, currentScore: 0.08528499 \\ntop: org.apache.lucene.search.spans.SpanScorer@18f51f \\nscorerQueue.size(): 3 \\n\\tat org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent \\n(DisjunctionSumScorer.java:171) \\n\\tat org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:224) \\n\\tat org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345) \\n\\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56) \\n\\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51) \\n\\tat org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322505\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322505&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322505\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322505_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322505_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jul\\/05 02:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-28T02:49:42+0000\'\u003e28\\/Jul\\/05 02:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=15800)\u003cbr\\/\u003e\\nSecond test patch for DisjunctionSumScorer.java\u003c\\/p\u003e\\n\\n\u003cp\u003eIn case a scorer does not advance its doc number after next()\u003cbr\\/\u003e\\nreturns true, the originally reported exception can occur.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch throws an AssertionError for the first scorer that\u003cbr\\/\u003e\\nbehaves that way, and shows the scorer and the document numbers.\u003c\\/p\u003e\\n\\n\u003cp\u003eScorers should advance their document number after next() returns true.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf this exception does not happen, the bug is probably in\u003cbr\\/\u003e\\nDisjunctionSumScorer.java.\u003c\\/p\u003e\\n\\n\u003cp\u003eErik, could you run your test once more with this patch applied\u003cbr\\/\u003e\\nagainst the trunk?\u003c\\/p\u003e\\n\\n\u003cp\u003eRegards,\u003cbr\\/\u003e\\nPaul Elschot\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322505_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322505_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jul\\/05 02:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-28T02:49:42+0000\'\u003e28\\/Jul\\/05 02:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=15800) \\nSecond test patch for DisjunctionSumScorer.java \\n\\n In case a scorer does not advance its doc number after next() \\nreturns true, the originally reported exception can occur. \\n\\n This patch throws an AssertionError for the first scorer that \\nbehaves that way, and shows the scorer and the document numbers. \\n\\n Scorers should advance their document number after next() returns true. \\n\\n If this exception does not happen, the bug is probably in \\nDisjunctionSumScorer.java. \\n\\n Erik, could you run your test once more with this patch applied \\nagainst the trunk? \\n\\n Regards, \\nPaul Elschot              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322506\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322506&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322506\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322506_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322506_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jul\\/05 04:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-28T04:19:24+0000\'\u003e28\\/Jul\\/05 04:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI don\'t see a difference in the output:\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.lang.AssertionError: nrMatchers: 4 bigger than nrScorers: 3\u003cbr\\/\u003e\\nminimumNrMatchers: 1, currentDoc: 789, currentScore: 0.08528499\u003cbr\\/\u003e\\ntop: org.apache.lucene.search.spans.SpanScorer@18f51f\u003cbr\\/\u003e\\nscorerQueue.size(): 3\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent\u003cbr\\/\u003e\\n(DisjunctionSumScorer.java:171)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:224)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.Hits.&lt;init&gt;(Hits.java:44)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.Searcher.search(Searcher.java:40)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.Searcher.search(Searcher.java:32)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322506_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322506_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jul\\/05 04:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-28T04:19:24+0000\'\u003e28\\/Jul\\/05 04:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I don\'t see a difference in the output: \\n\\n java.lang.AssertionError: nrMatchers: 4 bigger than nrScorers: 3 \\nminimumNrMatchers: 1, currentDoc: 789, currentScore: 0.08528499 \\ntop: org.apache.lucene.search.spans.SpanScorer@18f51f \\nscorerQueue.size(): 3 \\n\\tat org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent \\n(DisjunctionSumScorer.java:171) \\n\\tat org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:224) \\n\\tat org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345) \\n\\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56) \\n\\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51) \\n\\tat org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288) \\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102) \\n\\tat org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65) \\n\\tat org.apache.lucene.search.Hits.&lt;init&gt;(Hits.java:44) \\n\\tat org.apache.lucene.search.Searcher.search(Searcher.java:40) \\n\\tat org.apache.lucene.search.Searcher.search(Searcher.java:32)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322507\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322507&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322507\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322507_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322507_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jul\\/05 05:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-28T05:48:28+0000\'\u003e28\\/Jul\\/05 05:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSince there is no difference in output, the bug must be \u003cbr\\/\u003e\\nin DisjunctionSumScorer.advanceAfterCurrent(). \u003c\\/p\u003e\\n\\n\u003cp\u003eI had a good look at that code (the test version after the \u003cbr\\/\u003e\\nsecond patch), and I really can\'t see a way of \u003cbr\\/\u003e\\nincreasing nrMatchers beyond the number of scorers in \u003cbr\\/\u003e\\nthe scorer queue: in the test version, each scorer is \u003cbr\\/\u003e\\nverified to advance to a higher document number, and \u003cbr\\/\u003e\\nnrMatchers is only increased when the document number \u003cbr\\/\u003e\\nof a scorer is the same. \u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m overlooking something, or at least one scorer \u003cbr\\/\u003e\\ndoes not return the same document number on successive \u003cbr\\/\u003e\\ncalls of doc() without a next() in between. \u003c\\/p\u003e\\n\\n\u003cp\u003eRegards, \u003cbr\\/\u003e\\nPaul Elschot \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322507_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322507_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jul\\/05 05:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-28T05:48:28+0000\'\u003e28\\/Jul\\/05 05:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Since there is no difference in output, the bug must be  \\nin DisjunctionSumScorer.advanceAfterCurrent().  \\n\\n I had a good look at that code (the test version after the  \\nsecond patch), and I really can\'t see a way of  \\nincreasing nrMatchers beyond the number of scorers in  \\nthe scorer queue: in the test version, each scorer is  \\nverified to advance to a higher document number, and  \\nnrMatchers is only increased when the document number  \\nof a scorer is the same.  \\n\\n I\'m overlooking something, or at least one scorer  \\ndoes not return the same document number on successive  \\ncalls of doc() without a next() in between.  \\n\\n Regards,  \\nPaul Elschot  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322508\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322508&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322508\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322508_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322508_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jul\\/05 09:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-28T09:25:45+0000\'\u003e28\\/Jul\\/05 09:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMy apologies - I apparently was not running your patch (my environment did not recompile it even \u003cbr\\/\u003e\\nthough I had patched it).  The output is now this:\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.lang.AssertionError: Scorer: org.apache.lucene.search.spans.SpanScorer@ed9f47\u003cbr\\/\u003e\\n advanced from doc 112 to doc 112 after next() returned true.\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent\u003cbr\\/\u003e\\n(DisjunctionSumScorer.java:153)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:232)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.Hits.&lt;init&gt;(Hits.java:44)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.Searcher.search(Searcher.java:40)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.Searcher.search(Searcher.java:32)\u003c\\/p\u003e\\n\\n\u003cp\u003eSo SpanScorer appears to be the culprit.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322508_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322508_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jul\\/05 09:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-28T09:25:45+0000\'\u003e28\\/Jul\\/05 09:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    My apologies - I apparently was not running your patch (my environment did not recompile it even  \\nthough I had patched it).  The output is now this: \\n\\n java.lang.AssertionError: Scorer: org.apache.lucene.search.spans.SpanScorer@ed9f47 \\n advanced from doc 112 to doc 112 after next() returned true. \\n\\tat org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent \\n(DisjunctionSumScorer.java:153) \\n\\tat org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:232) \\n\\tat org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345) \\n\\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56) \\n\\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51) \\n\\tat org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288) \\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102) \\n\\tat org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65) \\n\\tat org.apache.lucene.search.Hits.&lt;init&gt;(Hits.java:44) \\n\\tat org.apache.lucene.search.Searcher.search(Searcher.java:40) \\n\\tat org.apache.lucene.search.Searcher.search(Searcher.java:32) \\n\\n So SpanScorer appears to be the culprit.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322509\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322509&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322509\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322509_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322509_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jul\\/05 01:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-29T01:43:39+0000\'\u003e29\\/Jul\\/05 01:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for retesting. \u003cbr\\/\u003e\\nIt appears worthwhile to have that last check (producing \u003cbr\\/\u003e\\nthe last output) built into DisjunctionSumScorer.java as an assert. \u003c\\/p\u003e\\n\\n\u003cp\u003ePerhaps the author of SpanScorer.java could take a further look \u003cbr\\/\u003e\\ninto this. \u003c\\/p\u003e\\n\\n\u003cp\u003eRegards, \u003cbr\\/\u003e\\nPaul Elschot \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322509_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322509_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jul\\/05 01:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-29T01:43:39+0000\'\u003e29\\/Jul\\/05 01:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for retesting.  \\nIt appears worthwhile to have that last check (producing  \\nthe last output) built into DisjunctionSumScorer.java as an assert.  \\n\\n Perhaps the author of SpanScorer.java could take a further look  \\ninto this.  \\n\\n Regards,  \\nPaul Elschot  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322510\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322510&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322510\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322510_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322510_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jul\\/05 05:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-29T05:13:21+0000\'\u003e29\\/Jul\\/05 05:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI had another look at SpanScorer.next(), and it seems to me it \u003cbr\\/\u003e\\nis not the source of the problem. \u003cbr\\/\u003e\\nSo I had another look at the query (see java-dev messages of 26 July): \u003c\\/p\u003e\\n\\n\u003cp\u003eReformatted to show the structure: \u003cbr\\/\u003e\\n+(spanNear(\u003cspan class=\\\"error\\\"\u003e&#91;FULLTEXT:cat, FULLTEXT:dog, FULLTEXT:bird&#93;\u003c\\/span\u003e, 1, true) \\u00A0 \u003cbr\\/\u003e\\n\\u00A0 spanNear(\u003cspan class=\\\"error\\\"\u003e&#91;FULLTEXT:horse, FULLTEXT:cow, FULLTEXT:pig&#93;\u003c\\/span\u003e, 1, true) \\u00A0 \u003cbr\\/\u003e\\n\\u00A0 spanNear(\u003cspan class=\\\"error\\\"\u003e&#91;FULLTEXT:snake, FULLTEXT:camel&#93;\u003c\\/span\u003e, 0, true) \u003cbr\\/\u003e\\n) \u003cbr\\/\u003e\\n+(FULLTEXT:zebra \u003cbr\\/\u003e\\n\\u00A0 FULLTEXT:insect \u003cbr\\/\u003e\\n\\u00A0 spanNear(\u003cspan class=\\\"error\\\"\u003e&#91;FULLTEXT:feline, FULLTEXT:goat&#93;\u003c\\/span\u003e, 0, true) \u003cbr\\/\u003e\\n) \u003c\\/p\u003e\\n\\n\u003cp\u003eThis means that the NearSpans provided by a spanNear subquery \u003cbr\\/\u003e\\nprobably is the source of the problem. \u003c\\/p\u003e\\n\\n\u003cp\u003eRegards, \u003cbr\\/\u003e\\nPaul Elschot \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322510_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322510_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Jul\\/05 05:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-07-29T05:13:21+0000\'\u003e29\\/Jul\\/05 05:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I had another look at SpanScorer.next(), and it seems to me it  \\nis not the source of the problem.  \\nSo I had another look at the query (see java-dev messages of 26 July):  \\n\\n Reformatted to show the structure:  \\n+(spanNear( &#91;FULLTEXT:cat, FULLTEXT:dog, FULLTEXT:bird&#93; , 1, true) \\u00A0  \\n\\u00A0 spanNear( &#91;FULLTEXT:horse, FULLTEXT:cow, FULLTEXT:pig&#93; , 1, true) \\u00A0  \\n\\u00A0 spanNear( &#91;FULLTEXT:snake, FULLTEXT:camel&#93; , 0, true)  \\n)  \\n+(FULLTEXT:zebra  \\n\\u00A0 FULLTEXT:insect  \\n\\u00A0 spanNear( &#91;FULLTEXT:feline, FULLTEXT:goat&#93; , 0, true)  \\n)  \\n\\n This means that the NearSpans provided by a spanNear subquery  \\nprobably is the source of the problem.  \\n\\n Regards,  \\nPaul Elschot  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322511\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322511&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322511\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322511_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322511_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 05:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T05:42:55+0000\'\u003e17\\/Aug\\/05 05:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=16069)\u003cbr\\/\u003e\\nPatch to add an assert to DisjunctionSumScorer.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch reimplements only the most critical test of the second test patch\u003cbr\\/\u003e\\n(15800) in the form of an assert.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m using this in common-build.xml for the assert:\u003c\\/p\u003e\\n\\n\u003cp\u003e  &lt;property name=\\\"javac.source\\\" value=\\\"1.4\\\"\\/&gt;\u003cbr\\/\u003e\\n  &lt;property name=\\\"javac.target\\\" value=\\\"1.4\\\"\\/&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eand this in the test target:\u003c\\/p\u003e\\n\\n\u003cp\u003e      &lt;assertions&gt;\u003cbr\\/\u003e\\n\\t&lt;enable package=\\\"org.apache.lucene\\\"\\/&gt;\u003cbr\\/\u003e\\n      &lt;\\/assertions&gt;\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322511_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322511_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 05:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T05:42:55+0000\'\u003e17\\/Aug\\/05 05:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=16069) \\nPatch to add an assert to DisjunctionSumScorer.java \\n\\n This patch reimplements only the most critical test of the second test patch \\n(15800) in the form of an assert. \\n\\n I\'m using this in common-build.xml for the assert: \\n\\n   &lt;property name=\\\"javac.source\\\" value=\\\"1.4\\\"\\/&gt; \\n  &lt;property name=\\\"javac.target\\\" value=\\\"1.4\\\"\\/&gt; \\n\\n and this in the test target: \\n\\n       &lt;assertions&gt; \\n\\t&lt;enable package=\\\"org.apache.lucene\\\"\\/&gt; \\n      &lt;\\/assertions&gt;              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322512\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322512&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322512\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322512_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322512_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 05:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T05:48:04+0000\'\u003e17\\/Aug\\/05 05:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=16070)\u003cbr\\/\u003e\\nNearSpansOrdered.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAnother implementation of ordered NearSpans.\u003cbr\\/\u003e\\nThis uses only arrays of scorers and no PriorityQueue at all.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322512_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322512_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 05:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T05:48:04+0000\'\u003e17\\/Aug\\/05 05:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=16070) \\nNearSpansOrdered.java \\n\\n Another implementation of ordered NearSpans. \\nThis uses only arrays of scorers and no PriorityQueue at all.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322513\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322513&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322513\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322513_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322513_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 05:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T05:53:42+0000\'\u003e17\\/Aug\\/05 05:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=16071)\u003cbr\\/\u003e\\nPatch SpanNearQuery to use NearSpansOrdered\u003c\\/p\u003e\\n\\n\u003cp\u003eWith this patch, all tests pass here.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322513_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322513_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 05:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T05:53:42+0000\'\u003e17\\/Aug\\/05 05:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=16071) \\nPatch SpanNearQuery to use NearSpansOrdered \\n\\n With this patch, all tests pass here.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322514\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322514&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322514\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322514_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322514_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 05:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T05:57:56+0000\'\u003e17\\/Aug\\/05 05:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=16072)\u003cbr\\/\u003e\\nPatch TestSpans.java to include more tests\u003c\\/p\u003e\\n\\n\u003cp\u003eThis also obsoletes TestSpans.java and NearSpans.java in bug 35664.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322514_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322514_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 05:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T05:57:56+0000\'\u003e17\\/Aug\\/05 05:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=16072) \\nPatch TestSpans.java to include more tests \\n\\n This also obsoletes TestSpans.java and NearSpans.java in bug 35664.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322515\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322515&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322515\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322515_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322515_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 06:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T06:08:33+0000\'\u003e17\\/Aug\\/05 06:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eErik, could you run your test once more with the patch to SpanNearQuery \u003cbr\\/\u003e\\napplied and NearSpansOrdered.java added? \u003c\\/p\u003e\\n\\n\u003cp\u003eIn case this NearSpansOrdered works also for your test case \u003cbr\\/\u003e\\nit would probably be a good idea to simplify the current NearSpans \u003cbr\\/\u003e\\nto handle only the unordered case. \u003c\\/p\u003e\\n\\n\u003cp\u003eRegards, \u003cbr\\/\u003e\\nPaul Elschot \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322515_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322515_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Aug\\/05 06:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-17T06:08:33+0000\'\u003e17\\/Aug\\/05 06:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Erik, could you run your test once more with the patch to SpanNearQuery  \\napplied and NearSpansOrdered.java added?  \\n\\n In case this NearSpansOrdered works also for your test case  \\nit would probably be a good idea to simplify the current NearSpans  \\nto handle only the unordered case.  \\n\\n Regards,  \\nPaul Elschot  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322516\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322516&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322516\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322516_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322516_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/05 04:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-19T04:42:41+0000\'\u003e19\\/Aug\\/05 04:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=16104)\u003cbr\\/\u003e\\nNearSpansUnordered.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is NearSpans.java specialised for the unordered case, using\u003cbr\\/\u003e\\nvery much the same data structures.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt needs the patch of attachment 16071 + a rename of NearSpans to\u003cbr\\/\u003e\\nNearSpansUnordered in the patched SpanNearQuery.java\u003c\\/p\u003e\\n\\n\u003cp\u003eRegards,\u003cbr\\/\u003e\\nPaul Elschot\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322516_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322516_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Aug\\/05 04:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-19T04:42:41+0000\'\u003e19\\/Aug\\/05 04:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=16104) \\nNearSpansUnordered.java \\n\\n This is NearSpans.java specialised for the unordered case, using \\nvery much the same data structures. \\n\\n It needs the patch of attachment 16071 + a rename of NearSpans to \\nNearSpansUnordered in the patched SpanNearQuery.java \\n\\n Regards, \\nPaul Elschot              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322517\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322517&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322517\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322517_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322517_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/05 00:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-22T00:13:45+0000\'\u003e22\\/Aug\\/05 00:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePaul - thanks for your continued efforts with this issue.  I have, I believe, patched everything to match \u003cbr\\/\u003e\\nall the attachments to this issue and am getting errors on all the new TestSpans.java tests like this:\u003c\\/p\u003e\\n\\n\u003cp\u003e    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e Testcase: testSpanNearOrdered01(org.apache.lucene.search.spans.TestSpans):  Caused an \u003cbr\\/\u003e\\nERROR\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e subSpans1: 2 after 2\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e java.lang.AssertionError: subSpans1: 2 after 2\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e     at org.apache.lucene.search.spans.NearSpansOrdered.advanceAfterOrdered\u003cbr\\/\u003e\\n(NearSpansOrdered.java:159)\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e     at org.apache.lucene.search.spans.NearSpansOrdered.next(NearSpansOrdered.java:95)\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e     at org.apache.lucene.search.spans.SpanScorer.next(SpanScorer.java:50)\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e     at org.apache.lucene.search.Scorer.score(Scorer.java:47)\u003cbr\\/\u003e\\n    \u003cspan class=\\\"error\\\"\u003e&#91;junit&#93;\u003c\\/span\u003e     at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102)\u003c\\/p\u003e\\n\\n\u003cp\u003eRe: the use of \\\"assert\\\" - I\'m not sure we want to require JDK 1.4 just yet.  We should discuss this on the \u003cbr\\/\u003e\\ndev list to be sure.  I simply changed to AssertionError instead.\u003c\\/p\u003e\\n\\n\u003cp\u003ePerhaps I\'ve mispatched something?   If you think that is the case, could you roll up all your changes \u003cbr\\/\u003e\\ninto a single patch that I can apply to a clean trunk checkout of Lucene?   Thanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322517_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322517_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/05 00:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-22T00:13:45+0000\'\u003e22\\/Aug\\/05 00:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Paul - thanks for your continued efforts with this issue.  I have, I believe, patched everything to match  \\nall the attachments to this issue and am getting errors on all the new TestSpans.java tests like this: \\n\\n      &#91;junit&#93;  Testcase: testSpanNearOrdered01(org.apache.lucene.search.spans.TestSpans):  Caused an  \\nERROR \\n     &#91;junit&#93;  subSpans1: 2 after 2 \\n     &#91;junit&#93;  java.lang.AssertionError: subSpans1: 2 after 2 \\n     &#91;junit&#93;      at org.apache.lucene.search.spans.NearSpansOrdered.advanceAfterOrdered \\n(NearSpansOrdered.java:159) \\n     &#91;junit&#93;      at org.apache.lucene.search.spans.NearSpansOrdered.next(NearSpansOrdered.java:95) \\n     &#91;junit&#93;      at org.apache.lucene.search.spans.SpanScorer.next(SpanScorer.java:50) \\n     &#91;junit&#93;      at org.apache.lucene.search.Scorer.score(Scorer.java:47) \\n     &#91;junit&#93;      at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102) \\n\\n Re: the use of \\\"assert\\\" - I\'m not sure we want to require JDK 1.4 just yet.  We should discuss this on the  \\ndev list to be sure.  I simply changed to AssertionError instead. \\n\\n Perhaps I\'ve mispatched something?   If you think that is the case, could you roll up all your changes  \\ninto a single patch that I can apply to a clean trunk checkout of Lucene?   Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322518\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322518&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322518\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322518_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322518_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/05 02:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-22T02:50:44+0000\'\u003e22\\/Aug\\/05 02:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDid you perhaps forget to invert the condition of the assert? \u003c\\/p\u003e\\n\\n\u003cp\u003e\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e \u003cbr\\/\u003e\\nPaul Elschot \u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322518_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322518_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/05 02:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-22T02:50:44+0000\'\u003e22\\/Aug\\/05 02:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Did you perhaps forget to invert the condition of the assert?  \\n\\n    \\nPaul Elschot  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322519\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322519&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322519\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322519_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322519_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/05 04:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-22T04:50:00+0000\'\u003e22\\/Aug\\/05 04:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDarn - I wish there was an \\\"undo\\\" on here!  \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e  Sorry about that.  Sure enough, I had messed up the \u003cbr\\/\u003e\\nconversion from assert to AssertionError.  The conversion now is this in DisjunctionSumScorer:\u003c\\/p\u003e\\n\\n\u003cp\u003e          if (top.doc() &lt;= currentDoc)\u003cbr\\/\u003e\\n                throw new AssertionError(\\\"Scorer: \\\" + top\u003cbr\\/\u003e\\n                   + \\\"\\\\n advanced from doc \\\" + currentDoc\u003cbr\\/\u003e\\n                   + \\\" to doc \\\" + top.doc()\u003cbr\\/\u003e\\n                   + \\\" after next() returned true.\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patched TestSpans passes.  However with my test case I\'m getting this:\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.lang.AssertionError: Scorer: org.apache.lucene.search.spans.SpanScorer@73305c\u003cbr\\/\u003e\\n advanced from doc 112 to doc 112 after next() returned true.\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent\u003cbr\\/\u003e\\n(DisjunctionSumScorer.java:153)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:220)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288)\u003cbr\\/\u003e\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322519_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322519_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/05 04:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-22T04:50:00+0000\'\u003e22\\/Aug\\/05 04:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Darn - I wish there was an \\\"undo\\\" on here!     Sorry about that.  Sure enough, I had messed up the  \\nconversion from assert to AssertionError.  The conversion now is this in DisjunctionSumScorer: \\n\\n           if (top.doc() &lt;= currentDoc) \\n                throw new AssertionError(\\\"Scorer: \\\" + top \\n                   + \\\"\\\\n advanced from doc \\\" + currentDoc \\n                   + \\\" to doc \\\" + top.doc() \\n                   + \\\" after next() returned true.\\\"); \\n\\n The patched TestSpans passes.  However with my test case I\'m getting this: \\n\\n java.lang.AssertionError: Scorer: org.apache.lucene.search.spans.SpanScorer@73305c \\n advanced from doc 112 to doc 112 after next() returned true. \\n\\tat org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent \\n(DisjunctionSumScorer.java:153) \\n\\tat org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:220) \\n\\tat org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345) \\n\\tat org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56) \\n\\tat org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51) \\n\\tat org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288) \\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322520\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322520&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322520\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322520_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322520_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/05 05:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-22T05:31:49+0000\'\u003e22\\/Aug\\/05 05:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=16138)\u003cbr\\/\u003e\\nBug hunt patch for SpanScorer.java\u003c\\/p\u003e\\n\\n\u003cp\u003eSince the output is the same as the output of 28 July,\u003cbr\\/\u003e\\nI\'m going back to untargeted bug hunting.\u003c\\/p\u003e\\n\\n\u003cp\u003eHopefully the state of the spans dumped in this traceback\u003cbr\\/\u003e\\nwill help us to progress...\u003c\\/p\u003e\\n\\n\u003cp\u003eRegards,\u003cbr\\/\u003e\\nPaul Elschot\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322520_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322520_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Aug\\/05 05:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-22T05:31:49+0000\'\u003e22\\/Aug\\/05 05:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=16138) \\nBug hunt patch for SpanScorer.java \\n\\n Since the output is the same as the output of 28 July, \\nI\'m going back to untargeted bug hunting. \\n\\n Hopefully the state of the spans dumped in this traceback \\nwill help us to progress... \\n\\n Regards, \\nPaul Elschot              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322521\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322521&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322521\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322521_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322521_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Aug\\/05 18:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-23T18:18:57+0000\'\u003e23\\/Aug\\/05 18:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith the SpanScorer patch applied for additional output, I get this:\u003c\\/p\u003e\\n\\n\u003cp\u003eSpanScorer.next() A: spans org.apache.lucene.search.spans.NearSpansOrdered@222b9a advanced from \u003cbr\\/\u003e\\n112 to 112\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.lang.AssertionError: SpanScorer.next() A: spans \u003cbr\\/\u003e\\norg.apache.lucene.search.spans.NearSpansOrdered@222b9aadvanced from 112 to 112 at \u003cbr\\/\u003e\\norg.apache.lucene.search.spans.SpanScorer.next(SpanScorer.java:60) at \u003cbr\\/\u003e\\norg.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent(DisjunctionSumScorer.java:151) at \u003cbr\\/\u003e\\norg.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:220) at \u003cbr\\/\u003e\\norg.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345) at \u003cbr\\/\u003e\\norg.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56) at \u003cbr\\/\u003e\\norg.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51) at \u003cbr\\/\u003e\\norg.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288) at \u003cbr\\/\u003e\\norg.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102) at \u003cbr\\/\u003e\\norg.apache.lucene.search.Hits.getMoreDocs(Hits.java:65) at org.apache.lucene.search.Hits.&lt;init&gt;\u003cbr\\/\u003e\\n(Hits.java:44) at org.apache.lucene.search.Searcher.search(Searcher.java:40) at \u003cbr\\/\u003e\\norg.apache.lucene.search.Searcher.search(Searcher.java:32)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jakarta@ehatchersolutions.com\\\" id=\\\"commentauthor_12322521_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jakarta%40ehatchersolutions.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jakarta@ehatchersolutions.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322521_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Aug\\/05 18:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-23T18:18:57+0000\'\u003e23\\/Aug\\/05 18:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With the SpanScorer patch applied for additional output, I get this: \\n\\n SpanScorer.next() A: spans org.apache.lucene.search.spans.NearSpansOrdered@222b9a advanced from  \\n112 to 112 \\n\\n java.lang.AssertionError: SpanScorer.next() A: spans  \\norg.apache.lucene.search.spans.NearSpansOrdered@222b9aadvanced from 112 to 112 at  \\norg.apache.lucene.search.spans.SpanScorer.next(SpanScorer.java:60) at  \\norg.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent(DisjunctionSumScorer.java:151) at  \\norg.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:220) at  \\norg.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:345) at  \\norg.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:56) at  \\norg.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:51) at  \\norg.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:288) at  \\norg.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102) at  \\norg.apache.lucene.search.Hits.getMoreDocs(Hits.java:65) at org.apache.lucene.search.Hits.&lt;init&gt; \\n(Hits.java:44) at org.apache.lucene.search.Searcher.search(Searcher.java:40) at  \\norg.apache.lucene.search.Searcher.search(Searcher.java:32)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12322522\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12322522&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12322522\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322522_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322522_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/05 02:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-24T02:37:22+0000\'\u003e24\\/Aug\\/05 02:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCreated an attachment (id=16167)\u003cbr\\/\u003e\\nBug hunt patch for NearSpansOrdered.java\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s strange that the previous output is the same as the earlier one from\u003cbr\\/\u003e\\nJuly, because the previous one uses NearSpansOrdered and the one from\u003cbr\\/\u003e\\nJuly used NearSpans from svn.\u003cbr\\/\u003e\\nSo I\'m beginning to suspect that the bug is even further away, perhaps\u003cbr\\/\u003e\\nin SpanTermQuery.\u003c\\/p\u003e\\n\\n\u003cp\u003eHappy hunting,\u003cbr\\/\u003e\\nPaul Elschot\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12322522_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12322522_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Aug\\/05 02:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2005-08-24T02:37:22+0000\'\u003e24\\/Aug\\/05 02:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Created an attachment (id=16167) \\nBug hunt patch for NearSpansOrdered.java \\n\\n It\'s strange that the previous output is the same as the earlier one from \\nJuly, because the previous one uses NearSpansOrdered and the one from \\nJuly used NearSpans from svn. \\nSo I\'m beginning to suspect that the bug is even further away, perhaps \\nin SpanTermQuery. \\n\\n Happy hunting, \\nPaul Elschot              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12364224\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12364224&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12364224\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ehatcher\\\" id=\\\"commentauthor_12364224_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ehatcher\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ehatcher\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12364224_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/06 01:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-28T01:37:44+0000\'\u003e28\\/Jan\\/06 01:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have removed a few of the attachments to this issue, as they have already been applied to the latest codebase.  This will hopefully make it easier for us to work with the attachments, with less confusion.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"ehatcher\\\" id=\\\"commentauthor_12364224_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=ehatcher\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"ehatcher\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Erik Hatcher\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12364224_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Jan\\/06 01:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-01-28T01:37:44+0000\'\u003e28\\/Jan\\/06 01:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have removed a few of the attachments to this issue, as they have already been applied to the latest codebase.  This will hopefully make it easier for us to work with the attachments, with less confusion.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372294\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372294&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372294\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372294_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372294_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/06 03:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-30T03:55:57+0000\'\u003e30\\/Mar\\/06 03:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch for org.apache.lucene.search.DisjunctionSumScorer.java .\u003c\\/p\u003e\\n\\n\u003cp\u003eThis query was reported by Ramana Jelda on java-user to have the same problem:\u003cbr\\/\u003e\\n+(\u003cbr\\/\u003e\\n\\u00A0 +(\u003cbr\\/\u003e\\n\\u00A0 \\u00A0 spanNear(\u003cspan class=\\\"error\\\"\u003e&#91;productName:mp, productName:3&#93;\u003c\\/span\u003e, 3, true) \u003cbr\\/\u003e\\n\\u00A0 \\u00A0 spanNear(\u003cspan class=\\\"error\\\"\u003e&#91;subName:mp, subName:3&#93;\u003c\\/span\u003e, 3, true)\u003cbr\\/\u003e\\n\\u00A0 \\u00A0) \u003cbr\\/\u003e\\n\\u00A0+(productName:player subName:player)\u003cbr\\/\u003e\\n)\u003c\\/p\u003e\\n\\n\u003cp\u003eLooking at the query structure and the one reported earlier, I realized the bug\u003cbr\\/\u003e\\ncould also be in DisjunctionSumScorer.skipTo(), and not in the span query code.\u003c\\/p\u003e\\n\\n\u003cp\u003eNow let\'s hope this does it...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372294_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372294_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/06 03:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-30T03:55:57+0000\'\u003e30\\/Mar\\/06 03:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch for org.apache.lucene.search.DisjunctionSumScorer.java . \\n\\n This query was reported by Ramana Jelda on java-user to have the same problem: \\n+( \\n\\u00A0 +( \\n\\u00A0 \\u00A0 spanNear( &#91;productName:mp, productName:3&#93; , 3, true)  \\n\\u00A0 \\u00A0 spanNear( &#91;subName:mp, subName:3&#93; , 3, true) \\n\\u00A0 \\u00A0)  \\n\\u00A0+(productName:player subName:player) \\n) \\n\\n Looking at the query structure and the one reported earlier, I realized the bug \\ncould also be in DisjunctionSumScorer.skipTo(), and not in the span query code. \\n\\n Now let\'s hope this does it...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372299\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372299&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372299\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372299_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372299_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/06 04:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-30T04:32:58+0000\'\u003e30\\/Mar\\/06 04:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe date doesn\'t show up in the list of the attachments until clicking the \\\"manage\\\" link.\u003cbr\\/\u003e\\nToday\'s patch is called DisjunctionSumScorerPatch5.txt .\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372299_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372299_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/06 04:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-30T04:32:58+0000\'\u003e30\\/Mar\\/06 04:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The date doesn\'t show up in the list of the attachments until clicking the \\\"manage\\\" link. \\nToday\'s patch is called DisjunctionSumScorerPatch5.txt .              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372536\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372536&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372536\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dallan40\\\" id=\\\"commentauthor_12372536_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dallan40\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dallan40\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dallan Quass\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372536_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/06 04:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-31T04:32:54+0000\'\u003e31\\/Mar\\/06 04:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'m seeing this issue as well, but very rarely.  It happens when DisjunctionSumScorer.advanceAfterCurrent comes out of the do..while loop with nrMatchers == nrScorers+1.  This doesn\'t happens until about the 85\'th document that gets scored for a particular query.  I added a hack to set nrMatchers = nrScorers in this case, which fixed the problem for me, but I\'d be happy to help you track down the issue since I have a particular database and query that seems to elicit it.  Is there something you\'d like me to do?  (I see the same problem on 1_9_final and 1_9_1.)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dallan40\\\" id=\\\"commentauthor_12372536_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dallan40\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dallan40\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dallan Quass\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372536_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/06 04:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-31T04:32:54+0000\'\u003e31\\/Mar\\/06 04:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'m seeing this issue as well, but very rarely.  It happens when DisjunctionSumScorer.advanceAfterCurrent comes out of the do..while loop with nrMatchers == nrScorers+1.  This doesn\'t happens until about the 85\'th document that gets scored for a particular query.  I added a hack to set nrMatchers = nrScorers in this case, which fixed the problem for me, but I\'d be happy to help you track down the issue since I have a particular database and query that seems to elicit it.  Is there something you\'d like me to do?  (I see the same problem on 1_9_final and 1_9_1.)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372614\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372614&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372614\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dallan40\\\" id=\\\"commentauthor_12372614_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dallan40\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dallan40\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dallan Quass\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372614_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/06 10:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-31T10:20:05+0000\'\u003e31\\/Mar\\/06 10:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe hack I added didn\'t work.  Although it fixed the problem for one query, I\'m now seeing a different query that\'s giving an array out of bounds exception: this time from SpanScorer.score() (line 72), which is called near the top of DisjunctionSumScorer.advanceAfterCurrent.  What\'s odd is that the array index is MAX_INT (2147483648).  Any ideas?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dallan40\\\" id=\\\"commentauthor_12372614_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dallan40\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dallan40\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dallan Quass\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372614_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/06 10:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-31T10:20:05+0000\'\u003e31\\/Mar\\/06 10:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The hack I added didn\'t work.  Although it fixed the problem for one query, I\'m now seeing a different query that\'s giving an array out of bounds exception: this time from SpanScorer.score() (line 72), which is called near the top of DisjunctionSumScorer.advanceAfterCurrent.  What\'s odd is that the array index is MAX_INT (2147483648).  Any ideas?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372615\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372615&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372615\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dallan40\\\" id=\\\"commentauthor_12372615_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dallan40\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dallan40\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dallan Quass\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372615_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/06 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-31T10:41:46+0000\'\u003e31\\/Mar\\/06 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSorry for cluttering up the comments here.  I wanted to add that the part of the query exhibiting the error in the second case is a boolean query with three SpanTermQuery clauses, all \\\"Occur.SHOULD.\\\"  If I change the SpanTermQuery clauses to just TermQuery clauses, the problem goes away.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dallan40\\\" id=\\\"commentauthor_12372615_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dallan40\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dallan40\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dallan Quass\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372615_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/06 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-31T10:41:46+0000\'\u003e31\\/Mar\\/06 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sorry for cluttering up the comments here.  I wanted to add that the part of the query exhibiting the error in the second case is a boolean query with three SpanTermQuery clauses, all \\\"Occur.SHOULD.\\\"  If I change the SpanTermQuery clauses to just TermQuery clauses, the problem goes away.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372642\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372642&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372642\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372642_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372642_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/06 16:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-31T16:16:18+0000\'\u003e31\\/Mar\\/06 16:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDallan, could you try this patch: DisjunctionSumScorerPatch5.txt ?\u003c\\/p\u003e\\n\\n\u003cp\u003eAn index at MAX_INT in SpanScorer.score() is an indication that the\u003cbr\\/\u003e\\nunderlying spans returned MAX_INT from spans.doc(), which should mean\u003cbr\\/\u003e\\nthat spans.doc() was called after spans.next() or spans.skipTo(...) returned\u003cbr\\/\u003e\\nfalse.\u003cbr\\/\u003e\\nThat means that either SpanScorer.java is incorrect, or that the Spans used\u003cbr\\/\u003e\\nby it is incorrect, or that SpanScorer is used incorrectly, eg. by having score()\u003cbr\\/\u003e\\ncalled on it after next() or skipTo(...) returned false.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372642_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372642_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Mar\\/06 16:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-03-31T16:16:18+0000\'\u003e31\\/Mar\\/06 16:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dallan, could you try this patch: DisjunctionSumScorerPatch5.txt ? \\n\\n An index at MAX_INT in SpanScorer.score() is an indication that the \\nunderlying spans returned MAX_INT from spans.doc(), which should mean \\nthat spans.doc() was called after spans.next() or spans.skipTo(...) returned \\nfalse. \\nThat means that either SpanScorer.java is incorrect, or that the Spans used \\nby it is incorrect, or that SpanScorer is used incorrectly, eg. by having score() \\ncalled on it after next() or skipTo(...) returned false.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372856\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372856&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372856\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372856_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372856_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/06 04:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-03T04:56:32+0000\'\u003e03\\/Apr\\/06 04:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think I found a bug in SpanScorer.java.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe problem is that SpanScorer.skipTo() and SpanScorer.next() are not\u003cbr\\/\u003e\\ndesigned to be used both in the same search.\u003cbr\\/\u003e\\nAs the doc of the scored Spans is normally ahead, the attached version of\u003cbr\\/\u003e\\nSpanScorer adds a check in skipTo() for the scored spans not being ahead\u003cbr\\/\u003e\\nof the target of skipTo().\u003cbr\\/\u003e\\nThe attached version of SpanScorer is also refactored to remove double code.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis new SpanScorer changes the behaviour of SpanQueries and it leaves\u003cbr\\/\u003e\\nTestSpansAdvanced and TestSpansAdvanced2 failing. I attached a passing version for both of these tests, but they still contain some System.out.println()\'s,\u003cbr\\/\u003e\\nand the test for the score value is changed to a warning. The same documents\u003cbr\\/\u003e\\nstill match in the tests, only some score values change.\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t know whether DisjunctionSumScorerPatch5.txt is still needed, but it should not hurt.\u003c\\/p\u003e\\n\\n\u003cp\u003eI didn\'t change the copyright year in the sources, in case they make it\u003cbr\\/\u003e\\nto the trunk, the year could be updated.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372856_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372856_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/06 04:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-03T04:56:32+0000\'\u003e03\\/Apr\\/06 04:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think I found a bug in SpanScorer.java. \\n\\n The problem is that SpanScorer.skipTo() and SpanScorer.next() are not \\ndesigned to be used both in the same search. \\nAs the doc of the scored Spans is normally ahead, the attached version of \\nSpanScorer adds a check in skipTo() for the scored spans not being ahead \\nof the target of skipTo(). \\nThe attached version of SpanScorer is also refactored to remove double code. \\n\\n This new SpanScorer changes the behaviour of SpanQueries and it leaves \\nTestSpansAdvanced and TestSpansAdvanced2 failing. I attached a passing version for both of these tests, but they still contain some System.out.println()\'s, \\nand the test for the score value is changed to a warning. The same documents \\nstill match in the tests, only some score values change. \\n\\n I don\'t know whether DisjunctionSumScorerPatch5.txt is still needed, but it should not hurt. \\n\\n I didn\'t change the copyright year in the sources, in case they make it \\nto the trunk, the year could be updated. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372961\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372961&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372961\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12372961_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372961_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/06 23:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-03T23:53:40+0000\'\u003e03\\/Apr\\/06 23:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; The same documents still match in the tests, only some score values change.\u003c\\/p\u003e\\n\\n\u003cp\u003eCould you elaborate on this point?  Are the old or new scores correct?\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I don\'t know whether DisjunctionSumScorerPatch5.txt is still needed, but it should not hurt.\u003c\\/p\u003e\\n\\n\u003cp\u003eI was going to commit that one anyway... it looks like a bug if skipTo(target) is called with target&lt;= currentDoc.  Most scorers wouldn\'t do that, so I don\'t know if it\'s ever manifested as an error.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12372961_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372961_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Apr\\/06 23:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-03T23:53:40+0000\'\u003e03\\/Apr\\/06 23:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; The same documents still match in the tests, only some score values change. \\n\\n Could you elaborate on this point?  Are the old or new scores correct? \\n\\n &gt; I don\'t know whether DisjunctionSumScorerPatch5.txt is still needed, but it should not hurt. \\n\\n I was going to commit that one anyway... it looks like a bug if skipTo(target) is called with target&lt;= currentDoc.  Most scorers wouldn\'t do that, so I don\'t know if it\'s ever manifested as an error.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372978\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372978&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372978\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372978_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372978_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/06 01:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-04T01:49:06+0000\'\u003e04\\/Apr\\/06 01:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;&gt; The same documents still match in the tests, only some score values change. \u003cbr\\/\u003e\\n&gt; Could you elaborate on this point? Are the old or new scores correct? \u003c\\/p\u003e\\n\\n\u003cp\u003eFrom a quick look the new scorer look better than the old ones. In one of the test\u003cbr\\/\u003e\\ndocs the test query matches 3 times, and it now scores higher than the doc with the single match\u003cbr\\/\u003e\\n(the one in which only docs D and A match).\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; &gt; I don\'t know whether DisjunctionSumScorerPatch5.txt is still needed, but it should not hurt. \u003cbr\\/\u003e\\n&gt; I was going to commit that one anyway... it looks like a bug if skipTo(target) is called with target&lt;= currentDoc.\u003cbr\\/\u003e\\n&gt; Most scorers wouldn\'t do that, so I don\'t know if it\'s ever manifested as an error.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe two changes (in DisjunctionSumScorerPatch5.txt and in the posted SpanScorer) are different in that\u003cbr\\/\u003e\\nfor DisjunctionSumScorer the test is against the current doc of the scorer and in\u003cbr\\/\u003e\\nSpanScorer the test is against the current doc of the subscorer.\u003cbr\\/\u003e\\nSo I think in DisjunctionSumScorer  the test may not be needed, but in SpanScorer it should be there.\u003c\\/p\u003e\\n\\n\u003cp\u003eHowever, I don\'t have a test case showing the out of bounds problem, so I\'d like to know\u003cbr\\/\u003e\\nwhether this problem persists with the posted SpanScorer.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"paul.elschot@xs4all.nl\\\" id=\\\"commentauthor_12372978_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=paul.elschot%40xs4all.nl\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"paul.elschot@xs4all.nl\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Paul Elschot\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372978_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/06 01:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-04T01:49:06+0000\'\u003e04\\/Apr\\/06 01:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;&gt; The same documents still match in the tests, only some score values change.  \\n&gt; Could you elaborate on this point? Are the old or new scores correct?  \\n\\n From a quick look the new scorer look better than the old ones. In one of the test \\ndocs the test query matches 3 times, and it now scores higher than the doc with the single match \\n(the one in which only docs D and A match). \\n\\n &gt; &gt; I don\'t know whether DisjunctionSumScorerPatch5.txt is still needed, but it should not hurt.  \\n&gt; I was going to commit that one anyway... it looks like a bug if skipTo(target) is called with target&lt;= currentDoc. \\n&gt; Most scorers wouldn\'t do that, so I don\'t know if it\'s ever manifested as an error. \\n\\n The two changes (in DisjunctionSumScorerPatch5.txt and in the posted SpanScorer) are different in that \\nfor DisjunctionSumScorer the test is against the current doc of the scorer and in \\nSpanScorer the test is against the current doc of the subscorer. \\nSo I think in DisjunctionSumScorer  the test may not be needed, but in SpanScorer it should be there. \\n\\n However, I don\'t have a test case showing the out of bounds problem, so I\'d like to know \\nwhether this problem persists with the posted SpanScorer. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372983\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372983&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372983\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dallan40\\\" id=\\\"commentauthor_12372983_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dallan40\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dallan40\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dallan Quass\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372983_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/06 02:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-04T02:59:01+0000\'\u003e04\\/Apr\\/06 02:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThat fixed it!  I made the patch in DisjunctionSumScorerPath5.txt and used the posted SpanScorer, and I\'m no longer experiencing the array index out of bounds problem.   Thank-you Paul!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dallan40\\\" id=\\\"commentauthor_12372983_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dallan40\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dallan40\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dallan Quass\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372983_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/06 02:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-04T02:59:01+0000\'\u003e04\\/Apr\\/06 02:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    That fixed it!  I made the patch in DisjunctionSumScorerPath5.txt and used the posted SpanScorer, and I\'m no longer experiencing the array index out of bounds problem.   Thank-you Paul!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12372987\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12372987&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12372987\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12372987_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372987_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/06 03:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-04T03:15:12+0000\'\u003e04\\/Apr\\/06 03:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eExcellent news!\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ll do a quick review of the changes to SpanScorer, clean up the tests, and commit (just so no one is duplicating the effort).\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks Paul!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12372987_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12372987_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/06 03:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-04T03:15:12+0000\'\u003e04\\/Apr\\/06 03:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Excellent news! \\n\\n I\'ll do a quick review of the changes to SpanScorer, clean up the tests, and commit (just so no one is duplicating the effort). \\n\\n Thanks Paul!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12373122\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-413?focusedCommentId=12373122&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12373122\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12373122_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12373122_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/06 23:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-04T23:33:05+0000\'\u003e04\\/Apr\\/06 23:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted!\u003cbr\\/\u003e\\nI also did some changing &amp; refactoring on TestSpansAdvanced\\/TestSpansAdvanced2, added checking of explain() value, etc.  All the tests now pass w\\/o warnings.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12373122_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12373122_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Apr\\/06 23:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-04-04T23:33:05+0000\'\u003e04\\/Apr\\/06 23:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed! \\nI also did some changing &amp; refactoring on TestSpansAdvanced\\/TestSpansAdvanced2, added checking of explain() value, etc.  All the tests now pass w\\/o warnings.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310110";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310110&amp;avatarId=10061\\\" alt=\\\"Lucene - Core\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\"\u003eLucene - Core\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520241883758"> 
    <input type="hidden" title="jira.request.server.time" value="158"> 
    <input type="hidden" title="jira.request.id" value="564x94482086x8"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="7"> 
    <input type="hidden" title="db.reads.time.in.ms" value="27"> 
    <input type="hidden" title="db.conns.time.in.ms" value="32"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 564x94482086x8
	          REQUEST TIMESTAMP : [05/Mar/2018:09:24:43 +0000]
	               REQUEST TIME : 0.1580
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 7

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=16, elapsedTotal=27517973, elapsedMin=470191, elapsedMax=7716334, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=21, elapsedTotal=32993611, elapsedMin=491637, elapsedMax=7754703, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>