<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|baa79f600fcc2654b18801b960e702e8299243a7|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"cd8e33239354bd\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-2130"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-2130] Optimizer performance slowdown from 10.1 to 10.2 - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-2130] Optimizer performance slowdown from 10.1 to 10.2 - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2130">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-2130" href="/jira/browse/DERBY-2130" id="key-val" rel="12357299">DERBY-2130</a></li>
                </ol>
                <h1 id="summary-val">Optimizer performance slowdown from 10.1 to 10.2</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-2130"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-2130/DERBY-2130.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-2130/DERBY-2130.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-2130/DERBY-2130.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-2130/DERBY-2130.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.1.3.1 ">10.1.3.1</span>, <span title="10.2.1.6 ">10.2.1.6</span>, <span title="10.3.1.4 ">10.3.1.4</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.10.2.0" title="10.10.2.0 candidate for Second release for 10.10 branch">10.10.2.0</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.11.1.1" title="10.11.1.1 First release on the 10.11 branch">10.11.1.1</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <ul class="labels" id="labels-12357299-value"> 
                     <li><a class="lozenge" href="/jira/issues/?jql=labels+%3D+derby_triage10_11" title="derby_triage10_11"><span>derby_triage10_11</span></a></li> 
                    </ul> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310050" class="item"> 
                     <div class="wrap"> 
                      <strong title="Urgency" class="name">Urgency:</strong> 
                      <div id="customfield_12310050-val" class="value type-select" data-fieldtype="select" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        Normal 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>High Value Fix</span>, 
                        <span>Newcomer</span>, 
                        <span>Repro attached</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Performance</span>, 
                        <span>Regression</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Attached is 'repro.sql', an IJ script which demonstrates what I<br> believe to be a serious performance issue in the Optimizer.</p> 
                  <p>I have run this script in a number of configurations:</p> 
                  <ul class="alternate" type="square"> 
                   <li>10.1.2.1: the script runs successfully. The 'prepare' statement<br> takes about 90 seconds, on a fairly powerful Windows machine</li> 
                  </ul> 
                  <ul class="alternate" type="square"> 
                   <li>10.1.3.1: the script produces a NPE. I believe this is <a href="https://issues.apache.org/jira/browse/DERBY-1777" title="Regression: query works in 10.1.2.1 but fails with NullPointerException in 10.2.1.1" class="issue-link" data-issue-key="DERBY-1777"><del>DERBY-1777</del></a></li> 
                  </ul> 
                  <ul class="alternate" type="square"> 
                   <li>10.2.1.8/trunk: the script runs successfully. The 'prepare' statement<br> often takes about 220 seconds, on the same Windows machine</li> 
                  </ul> 
                  <p> Intermittently, on 10.2 and on the trunk, the prepare statement takes<br> 15+ minutes. I cannot reliably reproduce this; I run the same script<br> several times in a row and I cannot predict whether it will take 220<br> seconds or whether it will take 15+ minutes.</p> 
                  <p>I am quite motivated to work on this problem, as this is blocking me from<br> using Derby for a project that I'm quite keen on, but I need some<br> suggestions and ideas about how to attack it. From my perspective<br> there are 3 primary topics:</p> 
                  <p>1) Why did optimizer performance for this query degrade so significantly<br> from 10.1.2.1 to 10.2? The optimizer seems to be at least 2.5 times slower,<br> for this particular query at least, in 10.2. Sometimes it is 10x slower.</p> 
                  <p>2) What is the source of the non-determinism? Why does the optimizer<br> often take 4 minutes to optimize this query on the trunk, but sometimes<br> take 15+ minutes? I don't believe that I'm changing anything from<br> run to run.</p> 
                  <p>3) Can we improve the optimizer performance even beyond what it was<br> for 10.1.2? I realize that this is an ugly query, but I was hoping to<br> see an optimization time of 5-10 seconds, not 90 seconds (and certainly<br> not 220 seconds).</p> 
                  <p>I have attempted to start answering some of these questions, with<br> limited success. Here is some of what I think I've discovered so far:</p> 
                  <ul class="alternate" type="square"> 
                   <li>the optimizer changes in 10.2 seem to have given the optimizer many<br> more choices of possible query plans to consider. I think this means<br> that, if the optimizer does not time out, it will spend substantially<br> more time optimizing because there are more choices to evaluate. Does<br> this by itself mean that the optimizer will take 2.5 times longer in<br> 10.2 than it did in 10.1?</li> 
                  </ul> 
                  <ul class="alternate" type="square"> 
                   <li>something about this query seems to make the costing mechanism go<br> haywire, and produce extreme costs. While stepping through the<br> optimization of this query in the debugger I have seen it compute<br> costs like 1e63 and 1e200. This might be very closely related to<br> <a href="https://issues.apache.org/jira/browse/DERBY-1905" title="Optimizer cost estimates for subqueries are way (way) too high." class="issue-link" data-issue-key="DERBY-1905">DERBY-1905</a>, although I don't think I'm doing any subqueries here.<br> But maybe I'm misunderstanding the term "subquery" in <a href="https://issues.apache.org/jira/browse/DERBY-1905" title="Optimizer cost estimates for subqueries are way (way) too high." class="issue-link" data-issue-key="DERBY-1905">DERBY-1905</a>.<br> At any rate, due to the enormous estimated costs, timeout does not<br> occur.</li> 
                  </ul> 
                  <ul class="alternate" type="square"> 
                   <li>the WHERE clause in this query is converted during compilation to<br> an equivalent IN clause, I believe, which then causes me to run into<br> a number of the problems described in <a href="https://issues.apache.org/jira/browse/DERBY-47" title="Some possible improvements to IN optimization" class="issue-link" data-issue-key="DERBY-47"><del>DERBY-47</del></a> and <a href="https://issues.apache.org/jira/browse/DERBY-713" title="CLONE - Query optimizer should not make poor choices when optimizing IN and WHERE clauses" class="issue-link" data-issue-key="DERBY-713"><del>DERBY-713</del></a>.<br> Specifically, rather than constructing a plan which involves 4<br> index probes for the 4 WHERE clause values, the optimizer decides<br> that an index scan must be performed and that it will have to process<br> the entire index (because the query uses parameter markers, not<br> literal values). So perhaps solving <a href="https://issues.apache.org/jira/browse/DERBY-47" title="Some possible improvements to IN optimization" class="issue-link" data-issue-key="DERBY-47"><del>DERBY-47</del></a> would help me</li> 
                  </ul> 
                  <ul class="alternate" type="square"> 
                   <li>the optimizer in fact comes up with a "decent" query plan quite quickly.<br> I have experimented with placing a hard limit into the optimizer<br> timeout code, so that I can force optimization to stop after an<br> arbitrary fixed period of time. Then I have been able to set that<br> value to as low as 1 second, and the optimizer has produced plans<br> that then execute in a few milliseconds. Of course, I have only tried<br> this with a trivial amount of data in my database, so it's possible<br> that the plan produced by the optimizer after just a second of<br> optimizing is in fact poor, and I'm just not noticing it because my<br> data sizes are so small.</li> 
                  </ul> 
                  <p>At this point, what would be really helpful to me would be some suggestions<br> about some general approaches or techniques to try to start breaking down<br> and analyzing this problem.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-2130?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-2130?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-2130?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-2130?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12609310" data-issue-id="12357299" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12609310/jumpReset_10_11_trunk_diff.txt" draggable="true" data-downloadurl="text/plain:jumpReset_10_11_trunk_diff.txt:https://issues.apache.org/jira/secure/attachment/12609310/jumpReset_10_11_trunk_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12609310/jumpReset_10_11_trunk_diff.txt" title="Latest  20/Oct/13 15:58 - Kathey Marsden" draggable="true" data-downloadurl="text/plain:jumpReset_10_11_trunk_diff.txt:https://issues.apache.org/jira/secure/attachment/12609310/jumpReset_10_11_trunk_diff.txt">jumpReset_10_11_trunk_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2013-10-20T15:58:36.991Z">20/Oct/13 15:58</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12347032" data-issue-id="12357299" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12347032/jumpReset.patch" draggable="true" data-downloadurl="text/x-diff:jumpReset.patch:https://issues.apache.org/jira/secure/attachment/12347032/jumpReset.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12347032/jumpReset.patch" title="Latest  12/Dec/06 16:29 - A B" draggable="true" data-downloadurl="text/x-diff:jumpReset.patch:https://issues.apache.org/jira/secure/attachment/12347032/jumpReset.patch">jumpReset.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-12T16:29:30.000Z">12/Dec/06 16:29</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    A B
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346468" data-issue-id="12357299" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346468/plan10_1_2_1.txt" draggable="true" data-downloadurl="text/plain:plan10_1_2_1.txt:https://issues.apache.org/jira/secure/attachment/12346468/plan10_1_2_1.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346468/plan10_1_2_1.txt" title="Latest  05/Dec/06 18:09 - Bryan Pendleton" draggable="true" data-downloadurl="text/plain:plan10_1_2_1.txt:https://issues.apache.org/jira/secure/attachment/12346468/plan10_1_2_1.txt">plan10_1_2_1.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-05T18:09:16.000Z">05/Dec/06 18:09</time>
                   </dd>
                   <dd class="attachment-size">
                    79 kB
                   </dd>
                   <dd class="attachment-author">
                    Bryan Pendleton
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346469" data-issue-id="12357299" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346469/plan10_2.txt" draggable="true" data-downloadurl="text/plain:plan10_2.txt:https://issues.apache.org/jira/secure/attachment/12346469/plan10_2.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346469/plan10_2.txt" title="Latest  05/Dec/06 18:09 - Bryan Pendleton" draggable="true" data-downloadurl="text/plain:plan10_2.txt:https://issues.apache.org/jira/secure/attachment/12346469/plan10_2.txt">plan10_2.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-05T18:09:16.000Z">05/Dec/06 18:09</time>
                   </dd>
                   <dd class="attachment-size">
                    78 kB
                   </dd>
                   <dd class="attachment-author">
                    Bryan Pendleton
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346470" data-issue-id="12357299" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346470/plans.diff" draggable="true" data-downloadurl="application/octet-stream:plans.diff:https://issues.apache.org/jira/secure/attachment/12346470/plans.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346470/plans.diff" title="Latest  05/Dec/06 18:09 - Bryan Pendleton" draggable="true" data-downloadurl="application/octet-stream:plans.diff:https://issues.apache.org/jira/secure/attachment/12346470/plans.diff">plans.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-12-05T18:09:16.000Z">05/Dec/06 18:09</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Bryan Pendleton
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12346070" data-issue-id="12357299" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12346070/repro.sql" draggable="true" data-downloadurl="application/octet-stream:repro.sql:https://issues.apache.org/jira/secure/attachment/12346070/repro.sql"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12346070/repro.sql" title="Latest  29/Nov/06 22:56 - Bryan Pendleton" draggable="true" data-downloadurl="application/octet-stream:repro.sql:https://issues.apache.org/jira/secure/attachment/12346070/repro.sql">repro.sql</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2006-11-29T22:56:44.000Z">29/Nov/06 22:56</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Bryan Pendleton
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12695601_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype" width="16" height="16" title="Task - A task that needs to be done." alt="Task - A task that needs to be done."> <span title="DERBY-6481: Derby 10.10 backport issue (winter/spring 2014)"> <a href="/jira/browse/DERBY-6481" data-issue-key="DERBY-6481" class="issue-link link-title resolution">DERBY-6481</a> <span class="link-summary">Derby 10.10 backport issue (winter/spring 2014)</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12675361_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-6392: Optimizer slowdown from 10.2 to 10.3 (masked by DERBY-2130)"> <a href="/jira/browse/DERBY-6392" data-issue-key="DERBY-6392" class="issue-link link-title">DERBY-6392</a> <span class="link-summary">Optimizer slowdown from 10.2 to 10.3 (masked by DERBY-2130)</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12474981_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-4818: Derby is taking a long time to compile SQLs with more than 9 tables for the first time."> <a href="/jira/browse/DERBY-4818" data-issue-key="DERBY-4818" class="issue-link link-title">DERBY-4818</a> <span class="link-summary">Derby is taking a long time to compile SQLs with more than 9 tables for the first time.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mikem" rel="mikem" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mike Matrigali&quot;,&quot;emailAddress&quot;:&quot;mikem_app@sbcglobal.net&quot;,&quot;username&quot;:&quot;mikem&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mikem"></span></span> Mike Matrigali </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_bryanpendleton" rel="bryanpendleton" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Bryan Pendleton&quot;,&quot;emailAddress&quot;:&quot;bpendleton.derby@gmail.com&quot;,&quot;username&quot;:&quot;bryanpendleton&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="bryanpendleton"></span></span> Bryan Pendleton </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">1</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">3</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="29/Nov/06 22:55"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2006-11-29T22:55:05+0000">29/Nov/06 22:55</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="21/Jan/15 00:22"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2015-01-21T00:22:54+0000">21/Jan/15 00:22</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="26/Feb/14 23:44"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2014-02-26T23:44:46+0000">26/Feb/14 23:44</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-2130?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-2130?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12454477\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12454477&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454477\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12454477_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454477_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/06 22:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-29T22:56:44+0000\'\u003e29\\/Nov\\/06 22:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ereproduction script is \'repro.sql\'.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12454477_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454477_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/06 22:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-29T22:56:44+0000\'\u003e29\\/Nov\\/06 22:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    reproduction script is \'repro.sql\'.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454479\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12454479&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454479\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12454479_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454479_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/06 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-29T22:57:57+0000\'\u003e29\\/Nov\\/06 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOne experiment I tried was to remove all the secondary \u003cbr\\/\u003e\\nindexes. I thought that that might shrink the overall \\\"search \u003cbr\\/\u003e\\nspace\\\" that the optimizer was dealing with. However, it\u003cbr\\/\u003e\\nactually seemed to make matters worse, not better.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12454479_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454479_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Nov\\/06 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-29T22:57:57+0000\'\u003e29\\/Nov\\/06 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    One experiment I tried was to remove all the secondary  \\nindexes. I thought that that might shrink the overall \\\"search  \\nspace\\\" that the optimizer was dealing with. However, it \\nactually seemed to make matters worse, not better.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454738\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12454738&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454738\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12454738_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454738_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/06 19:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-30T19:33:58+0000\'\u003e30\\/Nov\\/06 19:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhat continues to puzzle me about these issues is that the \u003cbr\\/\u003e\\nestimated costs are so out of control.  Without a major\u003cbr\\/\u003e\\nrewrite of the optimizer, the basic assumption is that the\u003cbr\\/\u003e\\nestimated costs are somewhat close to the actual elapsed\u003cbr\\/\u003e\\ntime of the query.  Timeout depends on this, and thus\u003cbr\\/\u003e\\noptimizer \\\"performance\\\" depends on this as we tend to\u003cbr\\/\u003e\\nloop through ever increasing number of plans as each\u003cbr\\/\u003e\\nvariable is added.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think the key is to get the optimizer to time out correctly.\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1907\\\" title=\\\"Improve optimizer to prune query plans more aggressively.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1907\\\"\u003eDERBY-1907\u003c\\/a\u003e would be nice but the whole system is just broken\u003cbr\\/\u003e\\nif estimates are so wrong.\u003c\\/p\u003e\\n\\n\u003cp\u003eArmy posted some \\\"simple\\\" problem cases, that is where I\u003cbr\\/\u003e\\nwould start.  It seems like all of the following may apply\u003cbr\\/\u003e\\nto your case, probably good to validate there is not something\u003cbr\\/\u003e\\nnew going on with your query.:\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1908\\\" title=\\\"Investigate: What&#39;s the &quot;unit&quot; for optimizer cost estimates?\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1908\\\"\u003e\u003cdel\u003eDERBY-1908\u003c\\/del\u003e\u003c\\/a\u003e  \\t Investigate: What\'s the \\\"unit\\\" for optimizer cost estimates?   \\t \u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1907\\\" title=\\\"Improve optimizer to prune query plans more aggressively.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1907\\\"\u003eDERBY-1907\u003c\\/a\u003e \\tImprove optimizer to prune query plans more aggressively. \\t\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1906\\\" title=\\\"Investigate appropriateness of current optimizer timeout mechanism.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1906\\\"\u003eDERBY-1906\u003c\\/a\u003e \\tInvestigate appropriateness of current optimizer timeout mechanism. \\t\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1905\\\" title=\\\"Optimizer cost estimates for subqueries are way (way) too high.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1905\\\"\u003eDERBY-1905\u003c\\/a\u003e \\tOptimizer cost estimates for subqueries are way (way) too high. \\t\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-47\\\" title=\\\"Some possible improvements to IN optimization\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-47\\\"\u003e\u003cdel\u003eDERBY-47\u003c\\/del\u003e\u003c\\/a\u003e\\tIN list optimization\u003c\\/p\u003e\\n\\n\u003cp\u003eOne approach that would keep the current basic optimizer technology would be to see if we can fix the estimates.  Some items might be:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) update the store costs to reflect current machines\u003cbr\\/\u003e\\no update the store costs to reflect \\\"actual\\\" machine it is running on\u003cbr\\/\u003e\\no figure out why there is such variance in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2130\\\" title=\\\"Optimizer performance slowdown from 10.1 to 10.2\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2130\\\"\u003e\u003cdel\u003eDERBY-2130\u003c\\/del\u003e\u003c\\/a\u003e\u003cbr\\/\u003e\\no investigate why optimizer costs are so out of line - is it just\u003cbr\\/\u003e\\n  wrong logic, is it lack of some sort of cost estimate so one bad\u003cbr\\/\u003e\\n  guess on top of another.\u003cbr\\/\u003e\\no \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-47\\\" title=\\\"Some possible improvements to IN optimization\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-47\\\"\u003e\u003cdel\u003eDERBY-47\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eI am interested in doing 1, but I don\'t think it is going to help\u003cbr\\/\u003e\\nwith infinite costs.\u003c\\/p\u003e\\n\\n\u003cp\u003eIs anyone else interested in looking at this?  The repro for\u003cbr\\/\u003e\\n2130 is pretty ugly, I wonder if we could agree on a smaller problem\u003cbr\\/\u003e\\nto work on that hopefully would help the harder problem.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12454738_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454738_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/06 19:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-30T19:33:58+0000\'\u003e30\\/Nov\\/06 19:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    What continues to puzzle me about these issues is that the  \\nestimated costs are so out of control.  Without a major \\nrewrite of the optimizer, the basic assumption is that the \\nestimated costs are somewhat close to the actual elapsed \\ntime of the query.  Timeout depends on this, and thus \\noptimizer \\\"performance\\\" depends on this as we tend to \\nloop through ever increasing number of plans as each \\nvariable is added. \\n\\n I think the key is to get the optimizer to time out correctly. \\n DERBY-1907  would be nice but the whole system is just broken \\nif estimates are so wrong. \\n\\n Army posted some \\\"simple\\\" problem cases, that is where I \\nwould start.  It seems like all of the following may apply \\nto your case, probably good to validate there is not something \\nnew going on with your query.: \\n\\n   DERBY-1908    \\t Investigate: What\'s the \\\"unit\\\" for optimizer cost estimates?   \\t  \\n DERBY-1907  \\tImprove optimizer to prune query plans more aggressively. \\t \\n DERBY-1906  \\tInvestigate appropriateness of current optimizer timeout mechanism. \\t \\n DERBY-1905  \\tOptimizer cost estimates for subqueries are way (way) too high. \\t \\n  DERBY-47  \\tIN list optimization \\n\\n One approach that would keep the current basic optimizer technology would be to see if we can fix the estimates.  Some items might be: \\n\\n 1) update the store costs to reflect current machines \\no update the store costs to reflect \\\"actual\\\" machine it is running on \\no figure out why there is such variance in   DERBY-2130   \\no investigate why optimizer costs are so out of line - is it just \\n  wrong logic, is it lack of some sort of cost estimate so one bad \\n  guess on top of another. \\no   DERBY-47   \\n\\n I am interested in doing 1, but I don\'t think it is going to help \\nwith infinite costs. \\n\\n Is anyone else interested in looking at this?  The repro for \\n2130 is pretty ugly, I wonder if we could agree on a smaller problem \\nto work on that hopefully would help the harder problem.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454741\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12454741&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454741\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12454741_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454741_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/06 19:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-30T19:39:57+0000\'\u003e30\\/Nov\\/06 19:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe variance in optimizer times is puzzling as I thought the order of plans picked was pretty much the same.  I think\u003cbr\\/\u003e\\n2 things would help in understanding this:\u003cbr\\/\u003e\\n1) Have a trace flag that tells us if the prepare ended because of timeout or because of plan exhaustion.\u003cbr\\/\u003e\\n2) Can you reproduce the variance if you only do the prepare on the same db, without redoing the ddl.  I think I \u003cbr\\/\u003e\\n     remember some issue with\u003cbr\\/\u003e\\n     the order that tables are looked at being related to hash codes which might vary from ddl to ddl.\u003cbr\\/\u003e\\n      Is this an issue only if entire optmizer is timing out, or are there any \\\"sub-timeouts\\\" where we might short circuit\u003cbr\\/\u003e\\n     a list of subquery options?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12454741_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454741_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/06 19:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-30T19:39:57+0000\'\u003e30\\/Nov\\/06 19:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The variance in optimizer times is puzzling as I thought the order of plans picked was pretty much the same.  I think \\n2 things would help in understanding this: \\n1) Have a trace flag that tells us if the prepare ended because of timeout or because of plan exhaustion. \\n2) Can you reproduce the variance if you only do the prepare on the same db, without redoing the ddl.  I think I  \\n     remember some issue with \\n     the order that tables are looked at being related to hash codes which might vary from ddl to ddl. \\n      Is this an issue only if entire optmizer is timing out, or are there any \\\"sub-timeouts\\\" where we might short circuit \\n     a list of subquery options?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454745\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12454745&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454745\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12454745_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454745_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/06 20:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-30T20:11:54+0000\'\u003e30\\/Nov\\/06 20:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Some items might be:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; 1) update the store costs to reflect current machines\u003cbr\\/\u003e\\n&gt; o update the store costs to reflect \\\"actual\\\" machine it is running on\u003cbr\\/\u003e\\n&gt; o figure out why there is such variance in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2130\\\" title=\\\"Optimizer performance slowdown from 10.1 to 10.2\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2130\\\"\u003e\u003cdel\u003eDERBY-2130\u003c\\/del\u003e\u003c\\/a\u003e\u003cbr\\/\u003e\\n&gt; o investigate why optimizer costs are so out of line - is it just\u003cbr\\/\u003e\\n&gt;  wrong logic, is it lack of some sort of cost estimate so one bad\u003cbr\\/\u003e\\n&gt;  guess on top of another.\u003cbr\\/\u003e\\n&gt; o \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-47\\\" title=\\\"Some possible improvements to IN optimization\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-47\\\"\u003e\u003cdel\u003eDERBY-47\u003c\\/del\u003e\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I am interested in doing 1, but I don\'t think it is going to help\u003cbr\\/\u003e\\n&gt; with infinite costs.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Is anyone else interested in looking at this?\u003c\\/p\u003e\\n\\n\u003cp\u003eI am interested both in this particular issue (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2130\\\" title=\\\"Optimizer performance slowdown from 10.1 to 10.2\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2130\\\"\u003e\u003cdel\u003eDERBY-2130\u003c\\/del\u003e\u003c\\/a\u003e) and also in #3: why the optimizer cost estimates are so out of line.  I.e. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1905\\\" title=\\\"Optimizer cost estimates for subqueries are way (way) too high.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1905\\\"\u003eDERBY-1905\u003c\\/a\u003e.  I haven\'t started just yet but I would like to look more into \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1905\\\" title=\\\"Optimizer cost estimates for subqueries are way (way) too high.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1905\\\"\u003eDERBY-1905\u003c\\/a\u003e to see if I can pull anything up.  I hope to start looking at this very soon...\u003c\\/p\u003e\\n\\n\u003cp\u003eFor what it\'s worth, I ran the repro attached to this issue with various sets of Derby insane jars, and the timings I saw were as follows.  I ran the repro 3 times for each set of jars on Red Hat Linux using ibm142.  Unit of measurement is milliseconds (returned via the \\\"elapsedtime on\\\" ij command).\u003c\\/p\u003e\\n\\n\u003cp\u003e10.1 Pre-805:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003e141570\u003c\\/li\u003e\\n\\t\u003cli\u003e142463\u003c\\/li\u003e\\n\\t\u003cli\u003e140686\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e10.2 Pre-805:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003e143794\u003c\\/li\u003e\\n\\t\u003cli\u003e139213\u003c\\/li\u003e\\n\\t\u003cli\u003e138892\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e10.1 latest branch:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003e43494\u003c\\/li\u003e\\n\\t\u003cli\u003e37229\u003c\\/li\u003e\\n\\t\u003cli\u003e37532\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e10.2 Post-805, Pre-781 (10.2.0.4, svn 423199)\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eNPE (caused by \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1777\\\" title=\\\"Regression: query works in 10.1.2.1 but fails with NullPointerException in 10.2.1.1\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1777\\\"\u003e\u003cdel\u003eDERBY-1777\u003c\\/del\u003e\u003c\\/a\u003e).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e10.2 latest branch:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003e470067\u003c\\/li\u003e\\n\\t\u003cli\u003e438084\u003c\\/li\u003e\\n\\t\u003cli\u003e433038\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eThings to notice:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eIt looks like the slow-down is \u003cb\u003enot\u003c\\/b\u003e caused by the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-805\\\" title=\\\"Push join predicates into union and other set operations. DERBY-649 implemented scalar (single table) predicate pushdown. Adding join predicate push down could improve performance significantly.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-805\\\"\u003e\u003cdel\u003eDERBY-805\u003c\\/del\u003e\u003c\\/a\u003e changes--at least not directly.  On the contrary, the query actually runs quite a bit more quickly with the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-805\\\" title=\\\"Push join predicates into union and other set operations. DERBY-649 implemented scalar (single table) predicate pushdown. Adding join predicate push down could improve performance significantly.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-805\\\"\u003e\u003cdel\u003eDERBY-805\u003c\\/del\u003e\u003c\\/a\u003e changes (and all subsequent patches, esp. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1777\\\" title=\\\"Regression: query works in 10.1.2.1 but fails with NullPointerException in 10.2.1.1\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1777\\\"\u003e\u003cdel\u003eDERBY-1777\u003c\\/del\u003e\u003c\\/a\u003e) than it does without.  Or put another way, the query runs faster with the latest 10.1 codeline than it does with 10.1.2.1.  Of course, it\'s possible that changes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-805\\\" title=\\\"Push join predicates into union and other set operations. DERBY-649 implemented scalar (single table) predicate pushdown. Adding join predicate push down could improve performance significantly.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-805\\\"\u003e\u003cdel\u003eDERBY-805\u003c\\/del\u003e\u003c\\/a\u003e are mingling with more recent changes to cause the slowdown, but we at least know that the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-805\\\" title=\\\"Push join predicates into union and other set operations. DERBY-649 implemented scalar (single table) predicate pushdown. Adding join predicate push down could improve performance significantly.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-805\\\"\u003e\u003cdel\u003eDERBY-805\u003c\\/del\u003e\u003c\\/a\u003e changes alone are not the problem.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eThe run at revision 423199 fails with an NPE, which corresponds to Bryan\'s results when he ran with 10.1.3.1.  In both cases the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-805\\\" title=\\\"Push join predicates into union and other set operations. DERBY-649 implemented scalar (single table) predicate pushdown. Adding join predicate push down could improve performance significantly.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-805\\\"\u003e\u003cdel\u003eDERBY-805\u003c\\/del\u003e\u003c\\/a\u003e changes have been committed but the subsequent regression fixes (including \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1777\\\" title=\\\"Regression: query works in 10.1.2.1 but fails with NullPointerException in 10.2.1.1\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1777\\\"\u003e\u003cdel\u003eDERBY-1777\u003c\\/del\u003e\u003c\\/a\u003e) have not, hence the NPE.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eI did not see the non-deterministic behavior that Bryan did with 10.2 trunk--instead, I consistently see 7+ minutes.  However, I only ran the query 3 times, which is probably not enough to have seen what Bryan saw.  Also note that I only ran the DDL one time and then I re-ran the query the second two times.  So given Mike\'s previous comment, this may be the reason I didn\'t see the variance that Bryan did.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eNote sure how useful this information is, but that\'s what I\'ve found so far.  Still scratching my head and poking around, though, so maybe something will come up. (My inclination is toward \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-781\\\" title=\\\"Materialize subqueries in select list where possible to avoid creating invariant resultsets many times.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-781\\\"\u003e\u003cdel\u003eDERBY-781\u003c\\/del\u003e\u003c\\/a\u003e, but I don\'t really know how just yet...)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12454745_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454745_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Nov\\/06 20:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-11-30T20:11:54+0000\'\u003e30\\/Nov\\/06 20:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Some items might be: \\n\\n &gt; 1) update the store costs to reflect current machines \\n&gt; o update the store costs to reflect \\\"actual\\\" machine it is running on \\n&gt; o figure out why there is such variance in   DERBY-2130   \\n&gt; o investigate why optimizer costs are so out of line - is it just \\n&gt;  wrong logic, is it lack of some sort of cost estimate so one bad \\n&gt;  guess on top of another. \\n&gt; o   DERBY-47   \\n\\n &gt; I am interested in doing 1, but I don\'t think it is going to help \\n&gt; with infinite costs. \\n\\n &gt; Is anyone else interested in looking at this? \\n\\n I am interested both in this particular issue (  DERBY-2130  ) and also in #3: why the optimizer cost estimates are so out of line.  I.e.  DERBY-1905 .  I haven\'t started just yet but I would like to look more into  DERBY-1905  to see if I can pull anything up.  I hope to start looking at this very soon... \\n\\n For what it\'s worth, I ran the repro attached to this issue with various sets of Derby insane jars, and the timings I saw were as follows.  I ran the repro 3 times for each set of jars on Red Hat Linux using ibm142.  Unit of measurement is milliseconds (returned via the \\\"elapsedtime on\\\" ij command). \\n\\n 10.1 Pre-805: \\n\\n \\n\\t 141570 \\n\\t 142463 \\n\\t 140686 \\n \\n\\n\\n 10.2 Pre-805: \\n\\n \\n\\t 143794 \\n\\t 139213 \\n\\t 138892 \\n \\n\\n\\n 10.1 latest branch: \\n\\n \\n\\t 43494 \\n\\t 37229 \\n\\t 37532 \\n \\n\\n\\n 10.2 Post-805, Pre-781 (10.2.0.4, svn 423199) \\n\\n \\n\\t NPE (caused by   DERBY-1777  ). \\n \\n\\n\\n 10.2 latest branch: \\n\\n \\n\\t 470067 \\n\\t 438084 \\n\\t 433038 \\n \\n\\n\\n Things to notice: \\n\\n \\n\\t It looks like the slow-down is  not  caused by the   DERBY-805   changes--at least not directly.  On the contrary, the query actually runs quite a bit more quickly with the   DERBY-805   changes (and all subsequent patches, esp.   DERBY-1777  ) than it does without.  Or put another way, the query runs faster with the latest 10.1 codeline than it does with 10.1.2.1.  Of course, it\'s possible that changes for   DERBY-805   are mingling with more recent changes to cause the slowdown, but we at least know that the   DERBY-805   changes alone are not the problem. \\n \\n\\n\\n \\n\\t The run at revision 423199 fails with an NPE, which corresponds to Bryan\'s results when he ran with 10.1.3.1.  In both cases the   DERBY-805   changes have been committed but the subsequent regression fixes (including   DERBY-1777  ) have not, hence the NPE. \\n \\n\\n\\n \\n\\t I did not see the non-deterministic behavior that Bryan did with 10.2 trunk--instead, I consistently see 7+ minutes.  However, I only ran the query 3 times, which is probably not enough to have seen what Bryan saw.  Also note that I only ran the DDL one time and then I re-ran the query the second two times.  So given Mike\'s previous comment, this may be the reason I didn\'t see the variance that Bryan did. \\n \\n\\n\\n Note sure how useful this information is, but that\'s what I\'ve found so far.  Still scratching my head and poking around, though, so maybe something will come up. (My inclination is toward   DERBY-781  , but I don\'t really know how just yet...)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12454963\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12454963&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12454963\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12454963_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454963_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 17:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T17:41:01+0000\'\u003e01\\/Dec\\/06 17:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJust a random though that occured to me...\u003c\\/p\u003e\\n\\n\u003cp\u003eThe query in question is written as:\u003c\\/p\u003e\\n\\n\u003cp\u003eprepare p1 as \'\u003cbr\\/\u003e\\nselect count(distinct t1.c5) \u003cbr\\/\u003e\\n    from table19 t1 \u003cbr\\/\u003e\\n        inner join table05 t3 on ( t1.c5 = t3.c2)  \u003cbr\\/\u003e\\n        inner join table06 t4 on ( t3.c33 = t4.c1)  \u003cbr\\/\u003e\\n        inner join v3 t5 on ( t4.c34 = t5.c1)  \u003cbr\\/\u003e\\n        inner join table20 t2 on ( t5.c3 = t2.c5)  \u003cbr\\/\u003e\\n        inner join v1 t6 on ( t2.c35 = t6.c1)  \u003cbr\\/\u003e\\n        inner join v2 t7 on ( t6.c3 = t7.c5)  \u003cbr\\/\u003e\\n        inner join v1 t8 on ( t7.c22 = t8.c1)  \u003cbr\\/\u003e\\n    where (((t8.c3 = ? or t8.c3 = ? or t8.c3 = ? or t8.c3 = ?)))\';\u003c\\/p\u003e\\n\\n\u003cp\u003eIs the use of the explicit \\\"inner join\\\" syntax an intentional decision?  Or more specifically, is the intention that the tables are to be joined in a specific order?  From the Optimizer standpoint this query  becomes one large outer query with 8 Optimizables in the from list, so the Optimizer will attempt to evaluate all combinations of the 8 Optimizables before quitting--which takes a (long) while.  If, however, the query was written with a specific join order in mind, you could use Derby optimizer overrides to fix the join order of the 8 Optimizables to be the join order in which they are specified:\u003c\\/p\u003e\\n\\n\u003cp\u003eprepare p1 as \'\u003cbr\\/\u003e\\nselect count(distinct t1.c5) \u003cbr\\/\u003e\\n    from  --DERBY-PROPERTIES joinOrder=FIXED\u003cbr\\/\u003e\\n            table19 t1 \u003cbr\\/\u003e\\n            inner join table05 t3 on ( t1.c5 = t3.c2)  \u003cbr\\/\u003e\\n            inner join table06 t4 on ( t3.c33 = t4.c1)  \u003cbr\\/\u003e\\n            inner join v3 t5 on ( t4.c34 = t5.c1)  \u003cbr\\/\u003e\\n            inner join table20 t2 on ( t5.c3 = t2.c5)  \u003cbr\\/\u003e\\n            inner join v1 t6 on ( t2.c35 = t6.c1)  \u003cbr\\/\u003e\\n            inner join v2 t7 on ( t6.c3 = t7.c5)  \u003cbr\\/\u003e\\n            inner join v1 t8 on ( t7.c22 = t8.c1)  \u003cbr\\/\u003e\\n    where (((t8.c3 = ? or t8.c3 = ? or t8.c3 = ? or t8.c3 = ?)))\';\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen I did this the \\\"prepare\' finished in about 3 seconds on the same Red Hat Linux machine with the latest trunk branch (sane build).\u003c\\/p\u003e\\n\\n\u003cp\u003eOf course, I still think this issue is one that needs to be resolved.  But if a) you\'re looking for a temprorary workaround and b) you know the order in which you would like the tables to be joined, maybe the optimizer override can help in the short term.\u003c\\/p\u003e\\n\\n\u003cp\u003ePlease note, though, that Derby optimization as a whole would benefit a \u003cb\u003elot\u003c\\/b\u003e more if you continued to help resolve this problem \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12454963_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12454963_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Dec\\/06 17:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-01T17:41:01+0000\'\u003e01\\/Dec\\/06 17:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Just a random though that occured to me... \\n\\n The query in question is written as: \\n\\n prepare p1 as \' \\nselect count(distinct t1.c5)  \\n    from table19 t1  \\n        inner join table05 t3 on ( t1.c5 = t3.c2)   \\n        inner join table06 t4 on ( t3.c33 = t4.c1)   \\n        inner join v3 t5 on ( t4.c34 = t5.c1)   \\n        inner join table20 t2 on ( t5.c3 = t2.c5)   \\n        inner join v1 t6 on ( t2.c35 = t6.c1)   \\n        inner join v2 t7 on ( t6.c3 = t7.c5)   \\n        inner join v1 t8 on ( t7.c22 = t8.c1)   \\n    where (((t8.c3 = ? or t8.c3 = ? or t8.c3 = ? or t8.c3 = ?)))\'; \\n\\n Is the use of the explicit \\\"inner join\\\" syntax an intentional decision?  Or more specifically, is the intention that the tables are to be joined in a specific order?  From the Optimizer standpoint this query  becomes one large outer query with 8 Optimizables in the from list, so the Optimizer will attempt to evaluate all combinations of the 8 Optimizables before quitting--which takes a (long) while.  If, however, the query was written with a specific join order in mind, you could use Derby optimizer overrides to fix the join order of the 8 Optimizables to be the join order in which they are specified: \\n\\n prepare p1 as \' \\nselect count(distinct t1.c5)  \\n    from  --DERBY-PROPERTIES joinOrder=FIXED \\n            table19 t1  \\n            inner join table05 t3 on ( t1.c5 = t3.c2)   \\n            inner join table06 t4 on ( t3.c33 = t4.c1)   \\n            inner join v3 t5 on ( t4.c34 = t5.c1)   \\n            inner join table20 t2 on ( t5.c3 = t2.c5)   \\n            inner join v1 t6 on ( t2.c35 = t6.c1)   \\n            inner join v2 t7 on ( t6.c3 = t7.c5)   \\n            inner join v1 t8 on ( t7.c22 = t8.c1)   \\n    where (((t8.c3 = ? or t8.c3 = ? or t8.c3 = ? or t8.c3 = ?)))\'; \\n\\n When I did this the \\\"prepare\' finished in about 3 seconds on the same Red Hat Linux machine with the latest trunk branch (sane build). \\n\\n Of course, I still think this issue is one that needs to be resolved.  But if a) you\'re looking for a temprorary workaround and b) you know the order in which you would like the tables to be joined, maybe the optimizer override can help in the short term. \\n\\n Please note, though, that Derby optimization as a whole would benefit a  lot  more if you continued to help resolve this problem                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12455117\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12455117&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12455117\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12455117_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455117_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/06 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-02T18:25:04+0000\'\u003e02\\/Dec\\/06 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eArmy, thank you for the hint about the optimizer overrides. I will investigate this\u003cbr\\/\u003e\\nas a possible workaround for the short term.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12455117_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455117_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/06 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-02T18:25:04+0000\'\u003e02\\/Dec\\/06 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Army, thank you for the hint about the optimizer overrides. I will investigate this \\nas a possible workaround for the short term.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12455118\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12455118&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12455118\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12455118_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455118_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/06 18:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-02T18:27:12+0000\'\u003e02\\/Dec\\/06 18:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJust speaking abstractly here for a minute, I want to make sure I\'m following the discussion.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs I understand it, the Optimizer\'s overall top-level algorithm is:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eConsider every possible query plan for executing this query (modulo permutation \\\"jumping\\\")\u003c\\/li\u003e\\n\\t\u003cli\u003eEvaluate the cost of each such plan.\u003c\\/li\u003e\\n\\t\u003cli\u003eSelect the cheapest.\u003c\\/li\u003e\\n\\t\u003cli\u003eIf at any time we determine that we\'ve now spent longer evaluating plans\u003cbr\\/\u003e\\n     than it would have taken to execute the cheapest plan seen so far, then\u003cbr\\/\u003e\\n     quit and go run that plan (this is known as OptimizerTimeout)\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eIs that an accurate summary? If so, it seems that:\u003c\\/p\u003e\\n\\n\u003cp\u003e1) The most important thing about the Optimizer\'s cost estimation algorithm\u003cbr\\/\u003e\\nis that it be \\\"relatively accurate\\\": the cheapest actual plan should\u003cbr\\/\u003e\\nhave the lowest estimated cost. \u003c\\/p\u003e\\n\\n\u003cp\u003e2) The second most important thing is that the algorithm should strive to\u003cbr\\/\u003e\\nbe accurate, so that the optimizer timeout works effectively.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) Another important thing is that the algorithm should be as rapid as\u003cbr\\/\u003e\\npossible, so that the optimizer can evaluate as many plans as possible\u003cbr\\/\u003e\\nprior to timing out.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems that most of the discussion so far has been around item (2), regarding\u003cbr\\/\u003e\\nthe accuracy and interpretation (units of measurement) of the cost estimate.\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1905\\\" title=\\\"Optimizer cost estimates for subqueries are way (way) too high.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1905\\\"\u003eDERBY-1905\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1906\\\" title=\\\"Investigate appropriateness of current optimizer timeout mechanism.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1906\\\"\u003eDERBY-1906\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1908\\\" title=\\\"Investigate: What&#39;s the &quot;unit&quot; for optimizer cost estimates?\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1908\\\"\u003e\u003cdel\u003eDERBY-1908\u003c\\/del\u003e\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1259\\\" title=\\\"Optimizer plan consideration doesn&#39;t account for infinite cost estimates and can therefore choose plans requiring excessive memory.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1259\\\"\u003eDERBY-1259\u003c\\/a\u003e, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1260\\\" title=\\\"Investigate impact of infinite cost estimates on arithmetic operations\\/comparisons in the optimizer.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1260\\\"\u003eDERBY-1260\u003c\\/a\u003e all\u003cbr\\/\u003e\\nhave to do with this topic.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve seen almost no discussion of the first point (that the cheapest actual plan\u003cbr\\/\u003e\\nshould have the cheapest estimated cost); does this mean that we are pretty\u003cbr\\/\u003e\\nconfident about this aspect of cost estimation at this point? That is, the cost\u003cbr\\/\u003e\\nestimating may be off, but it seems to be off for all queries equally?\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd I haven\'t seen much discussion of the third point (that the Optimizer should\u003cbr\\/\u003e\\nstrive to evaluate plans as rapidly as possible, so as to increase its chances of\u003cbr\\/\u003e\\ncoming across a decent plan prior to timeout). \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1907\\\" title=\\\"Improve optimizer to prune query plans more aggressively.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1907\\\"\u003eDERBY-1907\u003c\\/a\u003e is certainly relevant\u003cbr\\/\u003e\\nhere; are there other issues logged like this?\u003c\\/p\u003e\\n\\n\u003cp\u003eI guess I\'m wondering (out loud) whether it is worth investigating a simple tuning\u003cbr\\/\u003e\\nof the cost estimation algorithm. If the optimizer was \u003cb\u003emuch\u003c\\/b\u003e faster at\u003cbr\\/\u003e\\ngenerating and estimating possible plans, wouldn\'t that be a big benefit?\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, how confident are we that permutation jumping (as described in \u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/wiki.apache.org\\/db-derby\\/JoinOrderPermutations\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/wiki.apache.org\\/db-derby\\/JoinOrderPermutations\u003c\\/a\u003e) is working properly?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12455118_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455118_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Dec\\/06 18:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-02T18:27:12+0000\'\u003e02\\/Dec\\/06 18:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Just speaking abstractly here for a minute, I want to make sure I\'m following the discussion. \\n\\n As I understand it, the Optimizer\'s overall top-level algorithm is: \\n\\n \\n\\t Consider every possible query plan for executing this query (modulo permutation \\\"jumping\\\") \\n\\t Evaluate the cost of each such plan. \\n\\t Select the cheapest. \\n\\t If at any time we determine that we\'ve now spent longer evaluating plans \\n     than it would have taken to execute the cheapest plan seen so far, then \\n     quit and go run that plan (this is known as OptimizerTimeout) \\n \\n\\n\\n Is that an accurate summary? If so, it seems that: \\n\\n 1) The most important thing about the Optimizer\'s cost estimation algorithm \\nis that it be \\\"relatively accurate\\\": the cheapest actual plan should \\nhave the lowest estimated cost.  \\n\\n 2) The second most important thing is that the algorithm should strive to \\nbe accurate, so that the optimizer timeout works effectively. \\n\\n 3) Another important thing is that the algorithm should be as rapid as \\npossible, so that the optimizer can evaluate as many plans as possible \\nprior to timing out. \\n\\n It seems that most of the discussion so far has been around item (2), regarding \\nthe accuracy and interpretation (units of measurement) of the cost estimate. \\n DERBY-1905 ,  DERBY-1906 ,   DERBY-1908  ,  DERBY-1259 ,  DERBY-1260  all \\nhave to do with this topic. \\n\\n I\'ve seen almost no discussion of the first point (that the cheapest actual plan \\nshould have the cheapest estimated cost); does this mean that we are pretty \\nconfident about this aspect of cost estimation at this point? That is, the cost \\nestimating may be off, but it seems to be off for all queries equally? \\n\\n And I haven\'t seen much discussion of the third point (that the Optimizer should \\nstrive to evaluate plans as rapidly as possible, so as to increase its chances of \\ncoming across a decent plan prior to timeout).  DERBY-1907  is certainly relevant \\nhere; are there other issues logged like this? \\n\\n I guess I\'m wondering (out loud) whether it is worth investigating a simple tuning \\nof the cost estimation algorithm. If the optimizer was  much  faster at \\ngenerating and estimating possible plans, wouldn\'t that be a big benefit? \\n\\n Also, how confident are we that permutation jumping (as described in  \\n http:\\/\\/wiki.apache.org\\/db-derby\\/JoinOrderPermutations ) is working properly?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12455141\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12455141&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12455141\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12455141_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455141_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/06 00:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-03T00:16:41+0000\'\u003e03\\/Dec\\/06 00:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eEverything written in Bryan\'s preceding comment sounds correct to me, so I won\'t dwell.  As for the specific questions:\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I\'ve seen almost no discussion of the first point (that the cheapest actual plan\u003cbr\\/\u003e\\n&gt; should have the cheapest estimated cost); does this mean that we are pretty\u003cbr\\/\u003e\\n&gt; confident about this aspect of cost estimation at this point? That is, the cost\u003cbr\\/\u003e\\n&gt; estimating may be off, but it seems to be off for all queries equally?\u003c\\/p\u003e\\n\\n\u003cp\u003eThis has been my general assumption about the code, yes-\u003cdel\u003eat least, after \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1007\\\" title=\\\"Optimizer can return incorrect &quot;best cost&quot; estimates with nested subqueries, which leads to generation of sub-optimal plans.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1007\\\"\u003e\u003cdel\u003eDERBY-1007\u003c\\/del\u003e\u003c\\/a\u003e was resolved.  It seems to me that at some point in the last year I found a scenario where the optimizer\'s \\\"best\\\" cost estimate did not (appear to) correspond to the best query plan, but I don\'t remember the details and it may have ended up being correct after all.  In any event, in all of the discussion that I\'ve had\\/written, my general assumption has been that \\\"Yes\\\", the \u003cb\u003erelative\u003c\\/b\u003e accuracy of the cost estimates is correct\u003c\\/del\u003e-i.e. that better plans have lower cost estimates.  Note, though, that this is just an assumption of mine which I have not bothered trying to debunk; if you find info to the contrary, please say so!\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1907\\\" title=\\\"Improve optimizer to prune query plans more aggressively.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1907\\\"\u003eDERBY-1907\u003c\\/a\u003e is certainly relevant here; are there other issues logged like this?\u003c\\/p\u003e\\n\\n\u003cp\u003eNone come to mind, no.  But I admit that\'s an answer based strictly on memory; I didn\'t actually do any searching...\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I guess I\'m wondering (out loud) whether it is worth investigating a simple tuning \u003cbr\\/\u003e\\n&gt; of the cost estimation algorithm. If the optimizer was \u003cb\u003emuch\u003c\\/b\u003e faster at generating\u003cbr\\/\u003e\\n&gt; and estimating possible plans, wouldn\'t that be a big benefit? \u003c\\/p\u003e\\n\\n\u003cp\u003eYes, definitely!\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Also, how confident are we that permutation jumping (as described in\u003cbr\\/\u003e\\n&gt; \u003ca href=\\\"http:\\/\\/wiki.apache.org\\/db-derby\\/JoinOrderPermutations\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/wiki.apache.org\\/db-derby\\/JoinOrderPermutations\u003c\\/a\u003e) is working properly? \u003c\\/p\u003e\\n\\n\u003cp\u003eI had to laugh out loud when I read this question.  It sounds to me like the kind of question someone asks when they\'ve found a somewhat serious bug but don\'t want to rock the boat \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eSo far as I know, the jumping code is working properly.  But if you told me there was a problem with the code, I think I\'d assume you were right.  Is that the case?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12455141_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455141_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/06 00:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-03T00:16:41+0000\'\u003e03\\/Dec\\/06 00:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Everything written in Bryan\'s preceding comment sounds correct to me, so I won\'t dwell.  As for the specific questions: \\n\\n &gt; I\'ve seen almost no discussion of the first point (that the cheapest actual plan \\n&gt; should have the cheapest estimated cost); does this mean that we are pretty \\n&gt; confident about this aspect of cost estimation at this point? That is, the cost \\n&gt; estimating may be off, but it seems to be off for all queries equally? \\n\\n This has been my general assumption about the code, yes- at least, after   DERBY-1007   was resolved.  It seems to me that at some point in the last year I found a scenario where the optimizer\'s \\\"best\\\" cost estimate did not (appear to) correspond to the best query plan, but I don\'t remember the details and it may have ended up being correct after all.  In any event, in all of the discussion that I\'ve had\\/written, my general assumption has been that \\\"Yes\\\", the  relative  accuracy of the cost estimates is correct -i.e. that better plans have lower cost estimates.  Note, though, that this is just an assumption of mine which I have not bothered trying to debunk; if you find info to the contrary, please say so! \\n\\n &gt;  DERBY-1907  is certainly relevant here; are there other issues logged like this? \\n\\n None come to mind, no.  But I admit that\'s an answer based strictly on memory; I didn\'t actually do any searching... \\n\\n &gt; I guess I\'m wondering (out loud) whether it is worth investigating a simple tuning  \\n&gt; of the cost estimation algorithm. If the optimizer was  much  faster at generating \\n&gt; and estimating possible plans, wouldn\'t that be a big benefit?  \\n\\n Yes, definitely! \\n\\n &gt; Also, how confident are we that permutation jumping (as described in \\n&gt;  http:\\/\\/wiki.apache.org\\/db-derby\\/JoinOrderPermutations ) is working properly?  \\n\\n I had to laugh out loud when I read this question.  It sounds to me like the kind of question someone asks when they\'ve found a somewhat serious bug but don\'t want to rock the boat   \\n\\n So far as I know, the jumping code is working properly.  But if you told me there was a problem with the code, I think I\'d assume you were right.  Is that the case?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12455197\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12455197&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12455197\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12455197_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455197_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/06 19:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-03T19:44:04+0000\'\u003e03\\/Dec\\/06 19:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; So far as I know, the jumping code is working properly.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks, that\'s good to know. It actually was an innocent question; I\'m\u003cbr\\/\u003e\\nnot holding anything up my sleeve \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e My train of thought was something like:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003e7+ minutes of CPU time is a \u003cb\u003elot\u003c\\/b\u003e on today\'s machines\u003c\\/li\u003e\\n\\t\u003cli\u003etherefore, we\'re either evaluating an astounding number of query plans,\u003c\\/li\u003e\\n\\t\u003cli\u003eor, we\'re burning a lot of CPU evaluating the plans,\u003c\\/li\u003e\\n\\t\u003cli\u003eor both\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12455197_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455197_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/06 19:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-03T19:44:04+0000\'\u003e03\\/Dec\\/06 19:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; So far as I know, the jumping code is working properly. \\n\\n Thanks, that\'s good to know. It actually was an innocent question; I\'m \\nnot holding anything up my sleeve   My train of thought was something like: \\n \\n\\t 7+ minutes of CPU time is a  lot  on today\'s machines \\n\\t therefore, we\'re either evaluating an astounding number of query plans, \\n\\t or, we\'re burning a lot of CPU evaluating the plans, \\n\\t or both \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12455713\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12455713&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12455713\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12455713_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455713_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/06 18:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-05T18:09:16+0000\'\u003e05\\/Dec\\/06 18:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached are the query plans that I get when running with 10.1.2.1 and 10.2\u003c\\/p\u003e\\n\\n\u003cp\u003eI also attached \'plans.diff\', which is a diff of the plans after editing the plans to remove \\\"noisy\\\" differences such as the floating point values of the estimated costs.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe plans are very similar, but not identical.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems that 10.2 is, in several cases, preferring indexed access to tables, which I think shows that the predicate pushdown changes (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-805\\\" title=\\\"Push join predicates into union and other set operations. DERBY-649 implemented scalar (single table) predicate pushdown. Adding join predicate push down could improve performance significantly.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-805\\\"\u003e\u003cdel\u003eDERBY-805\u003c\\/del\u003e\u003c\\/a\u003e and friends) are working.\u003c\\/p\u003e\\n\\n\u003cp\u003eOther than that, my extremely coarse reading of the plans is that the primary difference between the two plans is the estimated costs.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12455713_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455713_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/06 18:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-05T18:09:16+0000\'\u003e05\\/Dec\\/06 18:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached are the query plans that I get when running with 10.1.2.1 and 10.2 \\n\\n I also attached \'plans.diff\', which is a diff of the plans after editing the plans to remove \\\"noisy\\\" differences such as the floating point values of the estimated costs. \\n\\n The plans are very similar, but not identical. \\n\\n It seems that 10.2 is, in several cases, preferring indexed access to tables, which I think shows that the predicate pushdown changes (  DERBY-805   and friends) are working. \\n\\n Other than that, my extremely coarse reading of the plans is that the primary difference between the two plans is the estimated costs.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12455802\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12455802&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12455802\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12455802_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455802_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/06 23:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-05T23:46:15+0000\'\u003e05\\/Dec\\/06 23:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the query plans, Bryan.  I took a quick look and nothing stood out, but I\'ll have to look more closely before I can say anything for sure.  Thank you for taking the time to pull out the \\\"noise\\\"--I think that\'ll be helpful.\u003c\\/p\u003e\\n\\n\u003cp\u003eOn a different note, I added some System.outs to various places in the Optimizer to see what cost estimates the optimizer is calculating for different complete join orders in the top-level OptimizerImpl.  I then ran the repro query against the latest 10.1 branch and the latest 10.3 trunk.  The abbreviated output from what I saw is shown below.\u003c\\/p\u003e\\n\\n\u003cp\u003eSome things to note:\u003c\\/p\u003e\\n\\n\u003cp\u003e  0. Lots of \\\"Infinity\\\" and \\\"NaN\\\" cost estimates, which are probably the result of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1905\\\" title=\\\"Optimizer cost estimates for subqueries are way (way) too high.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1905\\\"\u003eDERBY-1905\u003c\\/a\u003e and \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1260\\\" title=\\\"Investigate impact of infinite cost estimates on arithmetic operations\\/comparisons in the optimizer.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1260\\\"\u003eDERBY-1260\u003c\\/a\u003e, respectively. This pretty much renders all but a handful of the cost estimates useless.\u003c\\/p\u003e\\n\\n\u003cp\u003e  1. In 10.1.3 we try to jump to a target join order and we SUCCESSFULLY do so.  In 10.3 we also try to jump to the same target join order, BUT for some reason the jump does NOT take effect.  So it looks like Bryan\'s question about whether or not permutation jumping works correctly was indeed well-founded.  This is, I think, the first thing to investigate.\u003c\\/p\u003e\\n\\n\u003cp\u003e  2. Because the 10.3 \\\"jump\\\" does not occur we spend a lot of time iterating through different permutations until we get to the \\\"best join order\\\" found by 10.1. Once we get there the estimated cost for 10.3 (on a 10.1 database) is finite but is much higher than the cost estimate of the same join order in 10.1 (namely, \\\"247\\\" in 10.1 vs \\\"1736685\\\" in 10.3).  So this is another point of interest.  This could again be the result of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1260\\\" title=\\\"Investigate impact of infinite cost estimates on arithmetic operations\\/comparisons in the optimizer.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1260\\\"\u003eDERBY-1260\u003c\\/a\u003e, but it\'s hard to say at this point.\u003c\\/p\u003e\\n\\n\u003cp\u003e  3. This next observation is weird: when running 10.3 on a 10.1 database the query finishes after about 10,000 iterations (roughly 5 minutes on my laptop).  But when running 10.3 on a \u003cb\u003e10.3\u003c\\/b\u003e database the query runs until it has exhausted all possible permutations (over 40,000).  The difference is in the calculated cost estimate for the \\\"2 0 1 3 4 5 6 7\\\" join order.  When running against a 10.1 database 10.3 estimates a cost of 1736685, followed up by a cost of 198589 for the next complete order, which leads leads to eventual timeout.  But when running against a 10.3 database, the cost estimate is \u003cb\u003eInfinity\u003c\\/b\u003e and thus the timeout value sits at 5E62, which we never reach.  I have absolutely no idea why this would be the case.  Any one out there have any theories?   Bryan, can you perhaps try this out to see if you observe the same behavior?  You can connect to a 10.1 database by setting the \\\"derby.database.allowPreReleaseUpgrade\\\" property to \\\"true\\\".  Note that you should only use that on a \u003cem\u003etest\u003c\\/em\u003e 10.1 database, though; I don\'t think it\'s intended for production db\'s.\u003c\\/p\u003e\\n\\n\u003cp\u003eGenerally speaking lines in the output are of the form:\u003c\\/p\u003e\\n\\n\u003cp\u003e-=&gt; estimatedCost: j o i n O r d e r\u003c\\/p\u003e\\n\\n\u003cp\u003e--------------------------\u003cbr\\/\u003e\\n10.1.3 on 10.1.3 database:\u003cbr\\/\u003e\\n--------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eij version 10.1\u003cbr\\/\u003e\\n-=&gt; 5.607246651648704E62: 0 1 2 3 4 5 6 7\u003cbr\\/\u003e\\n-==&gt; Just set bestCost to: 5.607246651648704E62\u003cbr\\/\u003e\\n\u003cdel\u003e=\u003c\\/del\u003e&gt; JUMPING to: 1 4 2 6 7 0 3 5\u003cbr\\/\u003e\\n-=&gt; Infinity: 1 4 2 6 7 0 3 5\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 6 7 0 5 3\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 6 7 3 0 5\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 6 7 3 5 0\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 6 7 5 0 3\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 6 7 5 3 0\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 7 0 3 5 6\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 7 0 3 6 5\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 7 0 5 3 6\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 7 0 5 6 3\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 7 0 6 3 5\u003cbr\\/\u003e\\n-=&gt; NaN: 1 4 2 7 0 6 5 3\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;snip ~2,600 permutations with cost estimates of \\\"NaN\\\"&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003e-=&gt; NaN: 1 7 6 5 4 0 2 3\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 0 3 2\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 2 0 3\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 2 3 0\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 3 0 2\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 3 2 0\u003cbr\\/\u003e\\n-=&gt; 247.4647753453739: 2 0 1 3 4 5 6 7\u003cbr\\/\u003e\\n-==&gt; Just set bestCost to: 247.4647753453739\u003cbr\\/\u003e\\n\u003cdel\u003e=\u003c\\/del\u003e&gt; TIMED OUT: exceeded 247.4647753453739 ms.\u003cbr\\/\u003e\\n-=&gt; 247.4647753453739: 2 0 1 3 4 5 6 7\u003cbr\\/\u003e\\nELAPSED TIME = 82961 milliseconds\u003c\\/p\u003e\\n\\n\u003cp\u003e------------------------\u003cbr\\/\u003e\\n10.3 on \u003cb\u003e10.1.3\u003c\\/b\u003e database:\u003cbr\\/\u003e\\n------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003e(on the \u003cb\u003esame\u003c\\/b\u003e database that was created by 10.1)\u003c\\/p\u003e\\n\\n\u003cp\u003eij version 10.3\u003cbr\\/\u003e\\n-=&gt; 5.607246651648704E62: 0 1 2 3 4 5 6 7\u003cbr\\/\u003e\\n-==&gt; Just set bestCost to: 5.607246651648704E62\u003cbr\\/\u003e\\n\u003cdel\u003e=\u003c\\/del\u003e&gt; JUMPING to: 1 4 2 6 7 0 3 5\u003cbr\\/\u003e\\n-=&gt; 1.8253980349686949E106: 0 1 2 3 4 5 6 7\u003cbr\\/\u003e\\n-=&gt; 3.021440681134236E107: 0 1 2 3 4 5 7 6\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 4 6 5 7\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 4 6 7 5\u003cbr\\/\u003e\\n-=&gt; 5.993308284393933E109: 0 1 2 3 4 7 5 6\u003cbr\\/\u003e\\n-=&gt; 2.736734332816085E108: 0 1 2 3 4 7 6 5\u003cbr\\/\u003e\\n-=&gt; 3.973494182787193E115: 0 1 2 3 5 4 6 7\u003cbr\\/\u003e\\n-=&gt; 6.577018684224087E116: 0 1 2 3 5 4 7 6\u003cbr\\/\u003e\\n-=&gt; 3.973494182787193E115: 0 1 2 3 5 6 4 7\u003cbr\\/\u003e\\n-=&gt; 6.577018684224087E116: 0 1 2 3 5 7 4 6\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 4 5 7\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 4 7 5\u003cbr\\/\u003e\\n-=&gt; 1.0852895218002162E119: 0 1 2 3 6 5 4 7\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 7 4 5\u003cbr\\/\u003e\\n-=&gt; 5.993308284393933E109: 0 1 2 3 7 4 5 6\u003cbr\\/\u003e\\n-=&gt; 2.736734332816085E108: 0 1 2 3 7 4 6 5\u003cbr\\/\u003e\\n-=&gt; 1.2945545894290903E112: 0 1 2 3 7 5 4 6\u003cbr\\/\u003e\\n-=&gt; 2.736734332816085E108: 0 1 2 3 7 6 4 5\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 3 6 7\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 3 7 6\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 6 3 7\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 6 7 3\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 7 3 6\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 7 6 3\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;snip ~10,000 permutations with cost estimates of \\\"NaN\\\"&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003e-=&gt; NaN: 1 7 6 5 4 0 2 3\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 0 3 2\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 2 0 3\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 2 3 0\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 3 0 2\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 3 2 0\u003cbr\\/\u003e\\n-=&gt; 1736685.050617207: 2 0 1 3 4 5 6 7\u003cbr\\/\u003e\\n-==&gt; Just set bestCost to: 1736685.050617207\u003cbr\\/\u003e\\n-=&gt; 198589.53739726284: 2 0 1 3 4 5 7 6\u003cbr\\/\u003e\\n-==&gt; Just set bestCost to: 198589.53739726284\u003cbr\\/\u003e\\n\u003cdel\u003e=\u003c\\/del\u003e&gt; TIMED OUT: exceeded 198589.53739726284 ms.\u003cbr\\/\u003e\\n-=&gt; 198589.53739726284: 2 0 1 3 4 5 7 6\u003cbr\\/\u003e\\nELAPSED TIME = 336370 milliseconds\u003c\\/p\u003e\\n\\n\u003cp\u003e------------------------\u003cbr\\/\u003e\\n10.3 on 10.3 database:\u003cbr\\/\u003e\\n------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eij version 10.3\u003cbr\\/\u003e\\n-=&gt; 5.607246651648704E62: 0 1 2 3 4 5 6 7\u003cbr\\/\u003e\\n-==&gt; Just set bestCost to: 5.607246651648704E62\u003cbr\\/\u003e\\n\u003cdel\u003e=\u003c\\/del\u003e&gt; JUMPING to: 1 4 2 6 7 0 3 5\u003cbr\\/\u003e\\n-=&gt; 1.8253980349686949E106: 0 1 2 3 4 5 6 7\u003cbr\\/\u003e\\n-=&gt; 3.021440681134236E107: 0 1 2 3 4 5 7 6\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 4 6 5 7\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 4 6 7 5\u003cbr\\/\u003e\\n-=&gt; 5.993308284393933E109: 0 1 2 3 4 7 5 6\u003cbr\\/\u003e\\n-=&gt; 2.736734332816085E108: 0 1 2 3 4 7 6 5\u003cbr\\/\u003e\\n-=&gt; 3.973494182787193E115: 0 1 2 3 5 4 6 7\u003cbr\\/\u003e\\n-=&gt; 6.577018684224087E116: 0 1 2 3 5 4 7 6\u003cbr\\/\u003e\\n-=&gt; 3.973494182787193E115: 0 1 2 3 5 6 4 7\u003cbr\\/\u003e\\n-=&gt; 6.577018684224087E116: 0 1 2 3 5 7 4 6\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 4 5 7\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 4 7 5\u003cbr\\/\u003e\\n-=&gt; 1.0852895218002162E119: 0 1 2 3 6 5 4 7\u003cbr\\/\u003e\\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 7 4 5\u003cbr\\/\u003e\\n-=&gt; 5.993308284393933E109: 0 1 2 3 7 4 5 6\u003cbr\\/\u003e\\n-=&gt; 2.736734332816085E108: 0 1 2 3 7 4 6 5\u003cbr\\/\u003e\\n-=&gt; 1.2945545894290903E112: 0 1 2 3 7 5 4 6\u003cbr\\/\u003e\\n-=&gt; 2.736734332816085E108: 0 1 2 3 7 6 4 5\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 3 6 7\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 3 7 6\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 6 3 7\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 6 7 3\u003cbr\\/\u003e\\n-=&gt; NaN: 0 1 2 4 5 7 3 6\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;snip ~10,000 permutations with cost estimates of \\\"NaN\\\"&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003e-=&gt; NaN: 1 7 6 5 4 2 0 3\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 2 3 0\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 3 0 2\u003cbr\\/\u003e\\n-=&gt; NaN: 1 7 6 5 4 3 2 0\u003cbr\\/\u003e\\n-=&gt; Infinity: 2 0 1 3 4 5 6 7\u003cbr\\/\u003e\\n-=&gt; NaN: 2 0 1 3 4 5 7 6\u003cbr\\/\u003e\\n-=&gt; NaN: 2 0 1 3 4 6 5 7\u003cbr\\/\u003e\\n-=&gt; NaN: 2 0 1 3 4 6 7 5\u003cbr\\/\u003e\\n-=&gt; NaN: 2 0 1 3 4 7 5 6\u003cbr\\/\u003e\\n-=&gt; NaN: 2 0 1 3 4 7 6 5\u003cbr\\/\u003e\\n-=&gt; NaN: 2 0 1 3 5 4 6 7\u003c\\/p\u003e\\n\\n\u003cp\u003e&lt;snip ~30,000 permutations, most with cost estimates of \\\"NaN\\\", a few with estimates of Infinity&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003e-=&gt; NaN: 7 6 5 4 3 1 0 2\u003cbr\\/\u003e\\n-=&gt; NaN: 7 6 5 4 3 1 2 0\u003cbr\\/\u003e\\n-=&gt; NaN: 7 6 5 4 3 2 0 1\u003cbr\\/\u003e\\n-=&gt; NaN: 7 6 5 4 3 2 1 0\u003cbr\\/\u003e\\n\u003cdel\u003e=\u003c\\/del\u003e&gt; ENDED because ran out of permutations.\u003cbr\\/\u003e\\n-=&gt; 5.607246651648704E62: 0 1 2 3 4 5 6 7\u003cbr\\/\u003e\\nELAPSED TIME = 1145530 milliseconds\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m still trying to make sense of this data, but perhaps this info will be helpful in tracking down the issue(s) here...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12455802_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12455802_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/06 23:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-05T23:46:15+0000\'\u003e05\\/Dec\\/06 23:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the query plans, Bryan.  I took a quick look and nothing stood out, but I\'ll have to look more closely before I can say anything for sure.  Thank you for taking the time to pull out the \\\"noise\\\"--I think that\'ll be helpful. \\n\\n On a different note, I added some System.outs to various places in the Optimizer to see what cost estimates the optimizer is calculating for different complete join orders in the top-level OptimizerImpl.  I then ran the repro query against the latest 10.1 branch and the latest 10.3 trunk.  The abbreviated output from what I saw is shown below. \\n\\n Some things to note: \\n\\n   0. Lots of \\\"Infinity\\\" and \\\"NaN\\\" cost estimates, which are probably the result of  DERBY-1905  and  DERBY-1260 , respectively. This pretty much renders all but a handful of the cost estimates useless. \\n\\n   1. In 10.1.3 we try to jump to a target join order and we SUCCESSFULLY do so.  In 10.3 we also try to jump to the same target join order, BUT for some reason the jump does NOT take effect.  So it looks like Bryan\'s question about whether or not permutation jumping works correctly was indeed well-founded.  This is, I think, the first thing to investigate. \\n\\n   2. Because the 10.3 \\\"jump\\\" does not occur we spend a lot of time iterating through different permutations until we get to the \\\"best join order\\\" found by 10.1. Once we get there the estimated cost for 10.3 (on a 10.1 database) is finite but is much higher than the cost estimate of the same join order in 10.1 (namely, \\\"247\\\" in 10.1 vs \\\"1736685\\\" in 10.3).  So this is another point of interest.  This could again be the result of  DERBY-1260 , but it\'s hard to say at this point. \\n\\n   3. This next observation is weird: when running 10.3 on a 10.1 database the query finishes after about 10,000 iterations (roughly 5 minutes on my laptop).  But when running 10.3 on a  10.3  database the query runs until it has exhausted all possible permutations (over 40,000).  The difference is in the calculated cost estimate for the \\\"2 0 1 3 4 5 6 7\\\" join order.  When running against a 10.1 database 10.3 estimates a cost of 1736685, followed up by a cost of 198589 for the next complete order, which leads leads to eventual timeout.  But when running against a 10.3 database, the cost estimate is  Infinity  and thus the timeout value sits at 5E62, which we never reach.  I have absolutely no idea why this would be the case.  Any one out there have any theories?   Bryan, can you perhaps try this out to see if you observe the same behavior?  You can connect to a 10.1 database by setting the \\\"derby.database.allowPreReleaseUpgrade\\\" property to \\\"true\\\".  Note that you should only use that on a  test  10.1 database, though; I don\'t think it\'s intended for production db\'s. \\n\\n Generally speaking lines in the output are of the form: \\n\\n -=&gt; estimatedCost: j o i n O r d e r \\n\\n -------------------------- \\n10.1.3 on 10.1.3 database: \\n-------------------------- \\n\\n ij version 10.1 \\n-=&gt; 5.607246651648704E62: 0 1 2 3 4 5 6 7 \\n-==&gt; Just set bestCost to: 5.607246651648704E62 \\n = &gt; JUMPING to: 1 4 2 6 7 0 3 5 \\n-=&gt; Infinity: 1 4 2 6 7 0 3 5 \\n-=&gt; NaN: 1 4 2 6 7 0 5 3 \\n-=&gt; NaN: 1 4 2 6 7 3 0 5 \\n-=&gt; NaN: 1 4 2 6 7 3 5 0 \\n-=&gt; NaN: 1 4 2 6 7 5 0 3 \\n-=&gt; NaN: 1 4 2 6 7 5 3 0 \\n-=&gt; NaN: 1 4 2 7 0 3 5 6 \\n-=&gt; NaN: 1 4 2 7 0 3 6 5 \\n-=&gt; NaN: 1 4 2 7 0 5 3 6 \\n-=&gt; NaN: 1 4 2 7 0 5 6 3 \\n-=&gt; NaN: 1 4 2 7 0 6 3 5 \\n-=&gt; NaN: 1 4 2 7 0 6 5 3 \\n\\n &lt;snip ~2,600 permutations with cost estimates of \\\"NaN\\\"&gt; \\n\\n -=&gt; NaN: 1 7 6 5 4 0 2 3 \\n-=&gt; NaN: 1 7 6 5 4 0 3 2 \\n-=&gt; NaN: 1 7 6 5 4 2 0 3 \\n-=&gt; NaN: 1 7 6 5 4 2 3 0 \\n-=&gt; NaN: 1 7 6 5 4 3 0 2 \\n-=&gt; NaN: 1 7 6 5 4 3 2 0 \\n-=&gt; 247.4647753453739: 2 0 1 3 4 5 6 7 \\n-==&gt; Just set bestCost to: 247.4647753453739 \\n = &gt; TIMED OUT: exceeded 247.4647753453739 ms. \\n-=&gt; 247.4647753453739: 2 0 1 3 4 5 6 7 \\nELAPSED TIME = 82961 milliseconds \\n\\n ------------------------ \\n10.3 on  10.1.3  database: \\n------------------------ \\n\\n (on the  same  database that was created by 10.1) \\n\\n ij version 10.3 \\n-=&gt; 5.607246651648704E62: 0 1 2 3 4 5 6 7 \\n-==&gt; Just set bestCost to: 5.607246651648704E62 \\n = &gt; JUMPING to: 1 4 2 6 7 0 3 5 \\n-=&gt; 1.8253980349686949E106: 0 1 2 3 4 5 6 7 \\n-=&gt; 3.021440681134236E107: 0 1 2 3 4 5 7 6 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 4 6 5 7 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 4 6 7 5 \\n-=&gt; 5.993308284393933E109: 0 1 2 3 4 7 5 6 \\n-=&gt; 2.736734332816085E108: 0 1 2 3 4 7 6 5 \\n-=&gt; 3.973494182787193E115: 0 1 2 3 5 4 6 7 \\n-=&gt; 6.577018684224087E116: 0 1 2 3 5 4 7 6 \\n-=&gt; 3.973494182787193E115: 0 1 2 3 5 6 4 7 \\n-=&gt; 6.577018684224087E116: 0 1 2 3 5 7 4 6 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 4 5 7 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 4 7 5 \\n-=&gt; 1.0852895218002162E119: 0 1 2 3 6 5 4 7 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 7 4 5 \\n-=&gt; 5.993308284393933E109: 0 1 2 3 7 4 5 6 \\n-=&gt; 2.736734332816085E108: 0 1 2 3 7 4 6 5 \\n-=&gt; 1.2945545894290903E112: 0 1 2 3 7 5 4 6 \\n-=&gt; 2.736734332816085E108: 0 1 2 3 7 6 4 5 \\n-=&gt; NaN: 0 1 2 4 5 3 6 7 \\n-=&gt; NaN: 0 1 2 4 5 3 7 6 \\n-=&gt; NaN: 0 1 2 4 5 6 3 7 \\n-=&gt; NaN: 0 1 2 4 5 6 7 3 \\n-=&gt; NaN: 0 1 2 4 5 7 3 6 \\n-=&gt; NaN: 0 1 2 4 5 7 6 3 \\n\\n &lt;snip ~10,000 permutations with cost estimates of \\\"NaN\\\"&gt; \\n\\n -=&gt; NaN: 1 7 6 5 4 0 2 3 \\n-=&gt; NaN: 1 7 6 5 4 0 3 2 \\n-=&gt; NaN: 1 7 6 5 4 2 0 3 \\n-=&gt; NaN: 1 7 6 5 4 2 3 0 \\n-=&gt; NaN: 1 7 6 5 4 3 0 2 \\n-=&gt; NaN: 1 7 6 5 4 3 2 0 \\n-=&gt; 1736685.050617207: 2 0 1 3 4 5 6 7 \\n-==&gt; Just set bestCost to: 1736685.050617207 \\n-=&gt; 198589.53739726284: 2 0 1 3 4 5 7 6 \\n-==&gt; Just set bestCost to: 198589.53739726284 \\n = &gt; TIMED OUT: exceeded 198589.53739726284 ms. \\n-=&gt; 198589.53739726284: 2 0 1 3 4 5 7 6 \\nELAPSED TIME = 336370 milliseconds \\n\\n ------------------------ \\n10.3 on 10.3 database: \\n------------------------ \\n\\n ij version 10.3 \\n-=&gt; 5.607246651648704E62: 0 1 2 3 4 5 6 7 \\n-==&gt; Just set bestCost to: 5.607246651648704E62 \\n = &gt; JUMPING to: 1 4 2 6 7 0 3 5 \\n-=&gt; 1.8253980349686949E106: 0 1 2 3 4 5 6 7 \\n-=&gt; 3.021440681134236E107: 0 1 2 3 4 5 7 6 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 4 6 5 7 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 4 6 7 5 \\n-=&gt; 5.993308284393933E109: 0 1 2 3 4 7 5 6 \\n-=&gt; 2.736734332816085E108: 0 1 2 3 4 7 6 5 \\n-=&gt; 3.973494182787193E115: 0 1 2 3 5 4 6 7 \\n-=&gt; 6.577018684224087E116: 0 1 2 3 5 4 7 6 \\n-=&gt; 3.973494182787193E115: 0 1 2 3 5 6 4 7 \\n-=&gt; 6.577018684224087E116: 0 1 2 3 5 7 4 6 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 4 5 7 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 4 7 5 \\n-=&gt; 1.0852895218002162E119: 0 1 2 3 6 5 4 7 \\n-=&gt; 8.374147544754745E119: 0 1 2 3 6 7 4 5 \\n-=&gt; 5.993308284393933E109: 0 1 2 3 7 4 5 6 \\n-=&gt; 2.736734332816085E108: 0 1 2 3 7 4 6 5 \\n-=&gt; 1.2945545894290903E112: 0 1 2 3 7 5 4 6 \\n-=&gt; 2.736734332816085E108: 0 1 2 3 7 6 4 5 \\n-=&gt; NaN: 0 1 2 4 5 3 6 7 \\n-=&gt; NaN: 0 1 2 4 5 3 7 6 \\n-=&gt; NaN: 0 1 2 4 5 6 3 7 \\n-=&gt; NaN: 0 1 2 4 5 6 7 3 \\n-=&gt; NaN: 0 1 2 4 5 7 3 6 \\n\\n &lt;snip ~10,000 permutations with cost estimates of \\\"NaN\\\"&gt; \\n\\n -=&gt; NaN: 1 7 6 5 4 2 0 3 \\n-=&gt; NaN: 1 7 6 5 4 2 3 0 \\n-=&gt; NaN: 1 7 6 5 4 3 0 2 \\n-=&gt; NaN: 1 7 6 5 4 3 2 0 \\n-=&gt; Infinity: 2 0 1 3 4 5 6 7 \\n-=&gt; NaN: 2 0 1 3 4 5 7 6 \\n-=&gt; NaN: 2 0 1 3 4 6 5 7 \\n-=&gt; NaN: 2 0 1 3 4 6 7 5 \\n-=&gt; NaN: 2 0 1 3 4 7 5 6 \\n-=&gt; NaN: 2 0 1 3 4 7 6 5 \\n-=&gt; NaN: 2 0 1 3 5 4 6 7 \\n\\n &lt;snip ~30,000 permutations, most with cost estimates of \\\"NaN\\\", a few with estimates of Infinity&gt; \\n\\n -=&gt; NaN: 7 6 5 4 3 1 0 2 \\n-=&gt; NaN: 7 6 5 4 3 1 2 0 \\n-=&gt; NaN: 7 6 5 4 3 2 0 1 \\n-=&gt; NaN: 7 6 5 4 3 2 1 0 \\n = &gt; ENDED because ran out of permutations. \\n-=&gt; 5.607246651648704E62: 0 1 2 3 4 5 6 7 \\nELAPSED TIME = 1145530 milliseconds \\n\\n I\'m still trying to make sense of this data, but perhaps this info will be helpful in tracking down the issue(s) here...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12456115\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12456115&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12456115\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12456115_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456115_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/06 17:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-06T17:02:43+0000\'\u003e06\\/Dec\\/06 17:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; When running against a 10.1 database 10.3 estimates a cost of 1736685, followed up by a \u003cbr\\/\u003e\\n&gt; cost of 198589 for the next complete order, which leads leads to eventual timeout. But when \u003cbr\\/\u003e\\n&gt; running against a 10.3 database, the cost estimate is \u003cb\u003eInfinity\u003c\\/b\u003e and thus the timeout value \u003cbr\\/\u003e\\n&gt; sits at 5E62, which we never reach.\u003c\\/p\u003e\\n\\n\u003cp\u003eIs it possible that the 10.1 vs 10.3 database is a red herring here, and this is simply the\u003cbr\\/\u003e\\nsame \\\"non-determinism\\\" that I was observing in my initial tests? That is, you ran against two\u003cbr\\/\u003e\\ndifferent database, thus you ran all the CREATE TABLE\\/INDEX\\/VIEW statements twice,\u003cbr\\/\u003e\\nand got hugely different results. I definitely saw dramatically different results even in the\u003cbr\\/\u003e\\n10.3-only case from run to run, when running the entire script which recreates all the tables each time.\u003c\\/p\u003e\\n\\n\u003cp\u003eMy guess is that if you created 10.1 database A, and ran 10.3 against it, and then created\u003cbr\\/\u003e\\n10.1 database B, and ran 10.3 against it, you might see dramatic differences even in just\u003cbr\\/\u003e\\nthose two runs. \u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m wondering if there is something going on, correlated to the DDL statements executed\u003cbr\\/\u003e\\nby the repro script, which sometimes results in tables that return \\\"reasonable\\\"\u003cbr\\/\u003e\\nestimates, and sometimes results in tables that return \\\"infinite\\\" estimates.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12456115_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456115_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/06 17:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-06T17:02:43+0000\'\u003e06\\/Dec\\/06 17:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; When running against a 10.1 database 10.3 estimates a cost of 1736685, followed up by a  \\n&gt; cost of 198589 for the next complete order, which leads leads to eventual timeout. But when  \\n&gt; running against a 10.3 database, the cost estimate is  Infinity  and thus the timeout value  \\n&gt; sits at 5E62, which we never reach. \\n\\n Is it possible that the 10.1 vs 10.3 database is a red herring here, and this is simply the \\nsame \\\"non-determinism\\\" that I was observing in my initial tests? That is, you ran against two \\ndifferent database, thus you ran all the CREATE TABLE\\/INDEX\\/VIEW statements twice, \\nand got hugely different results. I definitely saw dramatically different results even in the \\n10.3-only case from run to run, when running the entire script which recreates all the tables each time. \\n\\n My guess is that if you created 10.1 database A, and ran 10.3 against it, and then created \\n10.1 database B, and ran 10.3 against it, you might see dramatic differences even in just \\nthose two runs.  \\n\\n I\'m wondering if there is something going on, correlated to the DDL statements executed \\nby the repro script, which sometimes results in tables that return \\\"reasonable\\\" \\nestimates, and sometimes results in tables that return \\\"infinite\\\" estimates.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12456541\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12456541&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12456541\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12456541_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456541_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Dec\\/06 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-07T19:03:39+0000\'\u003e07\\/Dec\\/06 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Is it possible that the 10.1 vs 10.3 database is a red herring here,\u003cbr\\/\u003e\\n&gt; and this is simply the same \\\"non-determinism\\\" that I was observing\u003cbr\\/\u003e\\n&gt; in my initial tests?\u003c\\/p\u003e\\n\\n\u003cp\u003eGood point, very well could be.  That didn\'t occur to me.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; My guess is that if you created 10.1 database A, and ran 10.3 against\u003cbr\\/\u003e\\n&gt; it, and then created 10.1 database B, and ran 10.3 against it, you\u003cbr\\/\u003e\\n&gt; might see dramatic differences even in just those two runs.\u003c\\/p\u003e\\n\\n\u003cp\u003eHave you yourself seen this variance with \u003cb\u003e10.1\u003c\\/b\u003e databases, as well?  I was limiting myself to the details in the description of this issue, which only mention the variance with 10.2 and trunk.  If you are also seeing the variance in 10.1, then can we assume that the non-deterministic variance aspect of this issue is not a regression, but is an existing problem with Derby since who-knows-when?  That might correlate with Mike\'s earlier comments about that being a potential issue in the past (hash codes based on DDL)...\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I\'m wondering if there is something going on, correlated to the DDL\u003cbr\\/\u003e\\n&gt; statements executed by the repro script, which sometimes results in\u003cbr\\/\u003e\\n&gt; tables that return \\\"reasonable\\\" estimates, and sometimes results in\u003cbr\\/\u003e\\n&gt; tables that return \\\"infinite\\\" estimates.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis is great question.  A follow-up question would be whether or not this DDL-based variance is a regression from 10.1 or has been there from the \\\"beginning\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003eAs you can tell, my primary focus here has been on potentially regressed behavior.  As I\'ve been looking at this problem I have been asking myself \\\"what changed from 10.1 to 10.2 to cause this sudden slow-down?\\\" So that\'s where my mind (and all of my questions) have been leading...\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd on that point, I mentioned in my last comment that the JUMP behavior \\\"does not take effect\\\" for 10.3, but it does for 10.1.  I spent some time tracing through the code and quickly realized that this change in behavior is an indirect result of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1357\\\" title=\\\"Short-circuit logic in optimizer appears to be incorrect...\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1357\\\"\u003e\u003cdel\u003eDERBY-1357\u003c\\/del\u003e\u003c\\/a\u003e.  Here\'s why.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs explained on the wiki page that describes jumping (\u003ca href=\\\"http:\\/\\/wiki.apache.org\\/db-derby\\/JoinOrderPermutations\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/wiki.apache.org\\/db-derby\\/JoinOrderPermutations\u003c\\/a\u003e), the optimizer will find the first complete join order for a query before attempting to jump.  In the repro query the first join order is simply \\\"0 1 2 3 4 5 6 7\\\".  The associated cost is 5.607E62.  Using the row counts calculated for this join order, the \\\"target\\\" join order then becomes \\\"1 4 2 6 7 0 3 5\\\".  This means that the next 8 calls to \\\"getNextPermutation()\\\" will return partial join orders that build up to this target.  i.e.\u003c\\/p\u003e\\n\\n\u003cp\u003e1 -1 -1 -1 -1 -1 -1 -1\u003cbr\\/\u003e\\n1  4 -1 -1 -1 -1 -1 -1\u003cbr\\/\u003e\\n1  4  2 -1 -1 -1 -1 -1\u003cbr\\/\u003e\\netc.\u003c\\/p\u003e\\n\\n\u003cp\u003ePrior to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1357\\\" title=\\\"Short-circuit logic in optimizer appears to be incorrect...\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1357\\\"\u003e\u003cdel\u003eDERBY-1357\u003c\\/del\u003e\u003c\\/a\u003e the optimizer \\\"short-circuit\\\" logic was not working, so even if a partial join order is more expensive than the best complete join order so far, the optimizer will continue to waste time optimizing join orders that are always going to return an estimate that is higher than the best so far.  So in 10.1 (which does not have the fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1357\\\" title=\\\"Short-circuit logic in optimizer appears to be incorrect...\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1357\\\"\u003e\u003cdel\u003eDERBY-1357\u003c\\/del\u003e\u003c\\/a\u003e) we\'ll merrily continue on our way from \u003cspan class=\\\"error\\\"\u003e&#91;1 4 2 ... &#93;\u003c\\/span\u003e all the way up until we either timeout or find a join order that is cheaper than 5.607E62.  We eventually find a cheaper join order after about 2500 permutations, and that\'s the point at which optimization stops (see details from my previous comment).\u003c\\/p\u003e\\n\\n\u003cp\u003eWith 10.2 and trunk, though, the \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1357\\\" title=\\\"Short-circuit logic in optimizer appears to be incorrect...\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1357\\\"\u003e\u003cdel\u003eDERBY-1357\u003c\\/del\u003e\u003c\\/a\u003e short-circuit logic has been corrected.  And as it happens, the estimated cost for the partial join order \\\"1 4 2 6 7 0 3\\\" is \\\"Infinity\\\"; since that\'s greater than 5.607E62, we do not advance the join order and thus we effectively skip the rest of it (because we know it\'s going to return a cost that\'s worse than 5.607E62).  That part is, I think, correct.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut having chosen to NOT advance the join order, now we come to the following block of code in OptimizerImpl:\u003c\\/p\u003e\\n\\n\u003cp\u003e    if (permuteState == JUMPING &amp;&amp; !joinPosAdvanced &amp;&amp; joinPosition &gt;= 0)\u003c\\/p\u003e\\n    {\\n        \\/\\/not feeling well in the middle of jump\\n        \\/\\/ Note: we have to make sure we reload the best plans\\n        \\/\\/ as we rewind since they may have been clobbered\\n        \\/\\/ (as part of the current join order) before we gave\\n        \\/\\/ up on jumping.\\n        reloadBestPlan = true;\\n        rewindJoinOrder();  \\/\\/fall\\n        permuteState = NO_JUMP;  \\/\\/give up\\n    }\\n\\n\u003cp\u003eSince we\'re in the middle of jumping and since we did \u003cb\u003enot\u003c\\/b\u003e advance the join order, we execute this if block--i.e. we rewind the join order back to the beginning and start all over.  Or put another way, we gave up on the \\\"JUMP\\\" and went back to normal processing.  From there we then have to go through thousands and thousands of permutations before we find a plan that\'s cheaper than 5.607E62.  Depending on which database is in use, that can be ten thousand permutations or it could be forty thousand, which explains the variance in the time taken to complete optimization.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think the changes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1357\\\" title=\\\"Short-circuit logic in optimizer appears to be incorrect...\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1357\\\"\u003e\u003cdel\u003eDERBY-1357\u003c\\/del\u003e\u003c\\/a\u003e are correct; what\'s not clear is whether the \\\"if\\\" block shown above is really necessary.  The idea sort of makes sense to me: if we broke away from normal processing and jumped to a \u003cem\u003ebad\u003c\\/em\u003e join order then we want to abort the jump as quickly as possible and return to normal processing.  However, now that the optimizer \\\"short-circuit\\\" logic is fixed, I\'m not so sure we need to revert back to \\\"normal\\\" processing when we jump to a bad join order.  If the join order is bad then the short-circuit logic will make sure that we do not waste \\\"too much\\\" (yes, that\'s an awfully subjective term) time trying out bad join orders.  So would it make sense to just \\\"iterate\\\" the target join order as usual without defaulting back to square one?\u003c\\/p\u003e\\n\\n\u003cp\u003eAs a sanity check I commented the above \\\"if\\\" block out in the trunk codeline and ran the repro; when I did so, the script executed in about the same time as it does on the latest 10.1 branch.  So this seems to confirm my findings.  FAR more testing is needed, though, to see if this simple removal of the \\\"if\\\" block is a viable solution.\u003c\\/p\u003e\\n\\n\u003cp\u003eAll of that said, I still think the BIGGER problems we are seeing are 1) \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1905\\\" title=\\\"Optimizer cost estimates for subqueries are way (way) too high.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1905\\\"\u003eDERBY-1905\u003c\\/a\u003e and 2) as Bryan has said, the apparent variance in cost estimates based on DDL.  \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1905\\\" title=\\\"Optimizer cost estimates for subqueries are way (way) too high.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1905\\\"\u003eDERBY-1905\u003c\\/a\u003e is definitely playing a huge role here, what with the Infinity cost estimates followed by NaN.  These kinds of estimates render the vast majority of the join order estimates useless, even if we do remove the \\\"if\\\" block mentioned above.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso note: when I remove the \\\"if\\\" block as mentioned above, I found that sometimes the cost estimate for the \\\"best\\\" join order (\\\"2 0 1 3 4 5 6 7\\\") was \\\"14116\\\", and sometimes it was \\\"247\\\".  This was on the \u003cb\u003esame\u003c\\/b\u003e database and so does not appear to be the result of DDL statements.  I\'m still looking into this little tidbit to see what might be going on there...\u003c\\/p\u003e\\n\\n\u003cp\u003eAs usual, some of this may be useful, some of it may not be. Please excuse me if I\'m babbling...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12456541_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12456541_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Dec\\/06 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-07T19:03:39+0000\'\u003e07\\/Dec\\/06 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Is it possible that the 10.1 vs 10.3 database is a red herring here, \\n&gt; and this is simply the same \\\"non-determinism\\\" that I was observing \\n&gt; in my initial tests? \\n\\n Good point, very well could be.  That didn\'t occur to me. \\n\\n &gt; My guess is that if you created 10.1 database A, and ran 10.3 against \\n&gt; it, and then created 10.1 database B, and ran 10.3 against it, you \\n&gt; might see dramatic differences even in just those two runs. \\n\\n Have you yourself seen this variance with  10.1  databases, as well?  I was limiting myself to the details in the description of this issue, which only mention the variance with 10.2 and trunk.  If you are also seeing the variance in 10.1, then can we assume that the non-deterministic variance aspect of this issue is not a regression, but is an existing problem with Derby since who-knows-when?  That might correlate with Mike\'s earlier comments about that being a potential issue in the past (hash codes based on DDL)... \\n\\n &gt; I\'m wondering if there is something going on, correlated to the DDL \\n&gt; statements executed by the repro script, which sometimes results in \\n&gt; tables that return \\\"reasonable\\\" estimates, and sometimes results in \\n&gt; tables that return \\\"infinite\\\" estimates. \\n\\n This is great question.  A follow-up question would be whether or not this DDL-based variance is a regression from 10.1 or has been there from the \\\"beginning\\\". \\n\\n As you can tell, my primary focus here has been on potentially regressed behavior.  As I\'ve been looking at this problem I have been asking myself \\\"what changed from 10.1 to 10.2 to cause this sudden slow-down?\\\" So that\'s where my mind (and all of my questions) have been leading... \\n\\n And on that point, I mentioned in my last comment that the JUMP behavior \\\"does not take effect\\\" for 10.3, but it does for 10.1.  I spent some time tracing through the code and quickly realized that this change in behavior is an indirect result of   DERBY-1357  .  Here\'s why. \\n\\n As explained on the wiki page that describes jumping ( http:\\/\\/wiki.apache.org\\/db-derby\\/JoinOrderPermutations ), the optimizer will find the first complete join order for a query before attempting to jump.  In the repro query the first join order is simply \\\"0 1 2 3 4 5 6 7\\\".  The associated cost is 5.607E62.  Using the row counts calculated for this join order, the \\\"target\\\" join order then becomes \\\"1 4 2 6 7 0 3 5\\\".  This means that the next 8 calls to \\\"getNextPermutation()\\\" will return partial join orders that build up to this target.  i.e. \\n\\n 1 -1 -1 -1 -1 -1 -1 -1 \\n1  4 -1 -1 -1 -1 -1 -1 \\n1  4  2 -1 -1 -1 -1 -1 \\netc. \\n\\n Prior to   DERBY-1357   the optimizer \\\"short-circuit\\\" logic was not working, so even if a partial join order is more expensive than the best complete join order so far, the optimizer will continue to waste time optimizing join orders that are always going to return an estimate that is higher than the best so far.  So in 10.1 (which does not have the fix for   DERBY-1357  ) we\'ll merrily continue on our way from  &#91;1 4 2 ... &#93;  all the way up until we either timeout or find a join order that is cheaper than 5.607E62.  We eventually find a cheaper join order after about 2500 permutations, and that\'s the point at which optimization stops (see details from my previous comment). \\n\\n With 10.2 and trunk, though, the   DERBY-1357   short-circuit logic has been corrected.  And as it happens, the estimated cost for the partial join order \\\"1 4 2 6 7 0 3\\\" is \\\"Infinity\\\"; since that\'s greater than 5.607E62, we do not advance the join order and thus we effectively skip the rest of it (because we know it\'s going to return a cost that\'s worse than 5.607E62).  That part is, I think, correct. \\n\\n But having chosen to NOT advance the join order, now we come to the following block of code in OptimizerImpl: \\n\\n     if (permuteState == JUMPING &amp;&amp; !joinPosAdvanced &amp;&amp; joinPosition &gt;= 0) \\n    {\\n        \\/\\/not feeling well in the middle of jump\\n        \\/\\/ Note: we have to make sure we reload the best plans\\n        \\/\\/ as we rewind since they may have been clobbered\\n        \\/\\/ (as part of the current join order) before we gave\\n        \\/\\/ up on jumping.\\n        reloadBestPlan = true;\\n        rewindJoinOrder();  \\/\\/fall\\n        permuteState = NO_JUMP;  \\/\\/give up\\n    }\\n\\n Since we\'re in the middle of jumping and since we did  not  advance the join order, we execute this if block--i.e. we rewind the join order back to the beginning and start all over.  Or put another way, we gave up on the \\\"JUMP\\\" and went back to normal processing.  From there we then have to go through thousands and thousands of permutations before we find a plan that\'s cheaper than 5.607E62.  Depending on which database is in use, that can be ten thousand permutations or it could be forty thousand, which explains the variance in the time taken to complete optimization. \\n\\n I think the changes for   DERBY-1357   are correct; what\'s not clear is whether the \\\"if\\\" block shown above is really necessary.  The idea sort of makes sense to me: if we broke away from normal processing and jumped to a  bad  join order then we want to abort the jump as quickly as possible and return to normal processing.  However, now that the optimizer \\\"short-circuit\\\" logic is fixed, I\'m not so sure we need to revert back to \\\"normal\\\" processing when we jump to a bad join order.  If the join order is bad then the short-circuit logic will make sure that we do not waste \\\"too much\\\" (yes, that\'s an awfully subjective term) time trying out bad join orders.  So would it make sense to just \\\"iterate\\\" the target join order as usual without defaulting back to square one? \\n\\n As a sanity check I commented the above \\\"if\\\" block out in the trunk codeline and ran the repro; when I did so, the script executed in about the same time as it does on the latest 10.1 branch.  So this seems to confirm my findings.  FAR more testing is needed, though, to see if this simple removal of the \\\"if\\\" block is a viable solution. \\n\\n All of that said, I still think the BIGGER problems we are seeing are 1)  DERBY-1905  and 2) as Bryan has said, the apparent variance in cost estimates based on DDL.   DERBY-1905  is definitely playing a huge role here, what with the Infinity cost estimates followed by NaN.  These kinds of estimates render the vast majority of the join order estimates useless, even if we do remove the \\\"if\\\" block mentioned above. \\n\\n Also note: when I remove the \\\"if\\\" block as mentioned above, I found that sometimes the cost estimate for the \\\"best\\\" join order (\\\"2 0 1 3 4 5 6 7\\\") was \\\"14116\\\", and sometimes it was \\\"247\\\".  This was on the  same  database and so does not appear to be the result of DDL statements.  I\'m still looking into this little tidbit to see what might be going on there... \\n\\n As usual, some of this may be useful, some of it may not be. Please excuse me if I\'m babbling...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12457083\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12457083&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12457083\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12457083_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12457083_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Dec\\/06 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-09T16:13:32+0000\'\u003e09\\/Dec\\/06 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; My guess is that if you created 10.1 database A, and ran 10.3 against\u003cbr\\/\u003e\\n&gt; it, and then created 10.1 database B, and ran 10.3 against it, you\u003cbr\\/\u003e\\n&gt; might see dramatic differences even in just those two runs.\u003c\\/p\u003e\\n\\n\u003cp\u003eI was able to confirm this.\u003c\\/p\u003e\\n\\n\u003cp\u003eI created 10 separate databases using 10.1.2.1, and ran the DDL portion of repro.sql\u003cbr\\/\u003e\\nagainst each of those 10 databases using 10.1.2.1.\u003c\\/p\u003e\\n\\n\u003cp\u003eThen I ran just the PREPARE portion of repro.sql against each of those 10 databases,\u003cbr\\/\u003e\\nusing the 10.3 trunk, and setting derby.database.allowPreReleaseUpgrade=true so\u003cbr\\/\u003e\\nthat 10.3 would be willing to access the 10.1 database.\u003c\\/p\u003e\\n\\n\u003cp\u003eOften, I observed 170-180 seconds for the prepare.\u003c\\/p\u003e\\n\\n\u003cp\u003eBut I also observed 500-650 seconds for the prepare.\u003c\\/p\u003e\\n\\n\u003cp\u003eFurthermore, it wasn\'t on the same database each time!\u003c\\/p\u003e\\n\\n\u003cp\u003eThat is, once I saw 500 seconds for the prepare on database 6, but I reran DB 6\u003cbr\\/\u003e\\nand saw 168 seconds.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd, the first time I did the prepare on DB 8, it was 170 seconds, but the second\u003cbr\\/\u003e\\ntime I did the prepare on DB 8, it was 607 seconds.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo my observations are that:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003e10.3 is non-deterministic regarding the amount of time that the PREPARE takes\u003c\\/li\u003e\\n\\t\u003cli\u003eit happens whether the DB and schema are created using 10.1, or 10.3\u003c\\/li\u003e\\n\\t\u003cli\u003ethe same DB, with the same DDL, can sometimes prepare the query in time X,\u003cbr\\/\u003e\\n   and sometimes in time Y, and as far as I can tell nothing is changing\u003cbr\\/\u003e\\n   between runs. I just run IJ with the \\\"prepare\\\" script twice in a row, and\u003cbr\\/\u003e\\n   get two very different elapsed times.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e&gt; I\'m wondering if there is something going on, correlated to the DDL\u003cbr\\/\u003e\\n&gt; statements executed by the repro script, which sometimes results in\u003cbr\\/\u003e\\n&gt; tables that return \\\"reasonable\\\" estimates, and sometimes results in\u003cbr\\/\u003e\\n&gt; tables that return \\\"infinite\\\" estimates.\u003c\\/p\u003e\\n\\n\u003cp\u003eI now believe this is \u003cb\u003enot\u003c\\/b\u003e an accurate theory, as the non-determinism does not\u003cbr\\/\u003e\\nseem to be correlated to a particular run of the DDL statements.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo at this point I don\'t think that the non-determinism depends on whether the\u003cbr\\/\u003e\\ndatabase and its tables were created by 10.1, or by 10.3, and I don\'t think that\u003cbr\\/\u003e\\nthe non-determinism is \\\"tied\\\" to a particular database and set of tables; the\u003cbr\\/\u003e\\nsame database and tables can sometimes lead to one prepare time, and sometimes\u003cbr\\/\u003e\\nto a different prepare time.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12457083_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12457083_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Dec\\/06 16:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-09T16:13:32+0000\'\u003e09\\/Dec\\/06 16:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; My guess is that if you created 10.1 database A, and ran 10.3 against \\n&gt; it, and then created 10.1 database B, and ran 10.3 against it, you \\n&gt; might see dramatic differences even in just those two runs. \\n\\n I was able to confirm this. \\n\\n I created 10 separate databases using 10.1.2.1, and ran the DDL portion of repro.sql \\nagainst each of those 10 databases using 10.1.2.1. \\n\\n Then I ran just the PREPARE portion of repro.sql against each of those 10 databases, \\nusing the 10.3 trunk, and setting derby.database.allowPreReleaseUpgrade=true so \\nthat 10.3 would be willing to access the 10.1 database. \\n\\n Often, I observed 170-180 seconds for the prepare. \\n\\n But I also observed 500-650 seconds for the prepare. \\n\\n Furthermore, it wasn\'t on the same database each time! \\n\\n That is, once I saw 500 seconds for the prepare on database 6, but I reran DB 6 \\nand saw 168 seconds. \\n\\n And, the first time I did the prepare on DB 8, it was 170 seconds, but the second \\ntime I did the prepare on DB 8, it was 607 seconds. \\n\\n So my observations are that: \\n \\n\\t 10.3 is non-deterministic regarding the amount of time that the PREPARE takes \\n\\t it happens whether the DB and schema are created using 10.1, or 10.3 \\n\\t the same DB, with the same DDL, can sometimes prepare the query in time X, \\n   and sometimes in time Y, and as far as I can tell nothing is changing \\n   between runs. I just run IJ with the \\\"prepare\\\" script twice in a row, and \\n   get two very different elapsed times. \\n \\n\\n\\n &gt; I\'m wondering if there is something going on, correlated to the DDL \\n&gt; statements executed by the repro script, which sometimes results in \\n&gt; tables that return \\\"reasonable\\\" estimates, and sometimes results in \\n&gt; tables that return \\\"infinite\\\" estimates. \\n\\n I now believe this is  not  an accurate theory, as the non-determinism does not \\nseem to be correlated to a particular run of the DDL statements. \\n\\n So at this point I don\'t think that the non-determinism depends on whether the \\ndatabase and its tables were created by 10.1, or by 10.3, and I don\'t think that \\nthe non-determinism is \\\"tied\\\" to a particular database and set of tables; the \\nsame database and tables can sometimes lead to one prepare time, and sometimes \\nto a different prepare time.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12457784\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12457784&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12457784\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12457784_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12457784_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Dec\\/06 16:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-12T16:29:31+0000\'\u003e12\\/Dec\\/06 16:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; That is, once I saw 500 seconds for the prepare on database 6, but I\u003cbr\\/\u003e\\n&gt; reran DB 6 and saw 168 seconds. \u003cspan class=\\\"error\\\"\u003e&#91;...&#93;\u003c\\/span\u003e I don\'t think that the non-\u003cbr\\/\u003e\\n&gt; determinism is \\\"tied\\\" to a particular database and set of tables;\u003cbr\\/\u003e\\n&gt; the same database and tables can sometimes lead to one prepare time,\u003cbr\\/\u003e\\n&gt; and sometimes to a different prepare time.  \u003c\\/p\u003e\\n\\n\u003cp\u003eAs I was looking at this problem I noticed a bug in the code that \u003cb\u003emay\u003c\\/b\u003e be causing this variance.  It looks like we are not resetting the permuteState field in OptimizerImpl at the beginning of each \\\"round\\\" of optimization.  The result (in the cases I saw) was that the field has the value WALK_LOW at the start of the second round of optimization, which, in very timing- sensitive situations, can lead to a code-path that causes the bestCost for the round to remain UNSET--i.e. it sits as Double.MAX_VALUE.  Then if we try to add anything to that cost, we end up with Infinity, which effectively ruins most subsequent cost estimates.\u003c\\/p\u003e\\n\\n\u003cp\u003eI still have not been able to reproduce the variance that Bryan reports, so I cannot say for sure that this is the cause.  I ran the repro 10 times against the same database and I consistently saw times of 550 to 700 seconds--and in each case I could see that the optimizer tried out all 40k permutations before completing.  Then I added code to reset the permuteState variable (see attached jumpReset.patch) and ran the repro 10 more times against the same database.  In this case every execution completed in about 200 to 220 seconds, and I could see that the optimizer timed out before trying out all permutations (which is more what I would expect).\u003c\\/p\u003e\\n\\n\u003cp\u003eThe reason I bring this is up is because the compilation time without jumpReset.patch and the compilation time with it appear to correlate to the times that Bryan is seeing in his variance (based on his previous comment).  So I\'m wondering if the two are related...?\u003c\\/p\u003e\\n\\n\u003cp\u003eBryan, I know you are busy and that running these tests takes a while, but if you have the time\\/inclination, can you apply jumpReset.patch to your codeline and run your tests again?  I\'m wondering what effect (if any) the patch will have on the variance that you are seeing...  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"army\\\" id=\\\"commentauthor_12457784_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=army\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"army\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e A B\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12457784_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Dec\\/06 16:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-12T16:29:31+0000\'\u003e12\\/Dec\\/06 16:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; That is, once I saw 500 seconds for the prepare on database 6, but I \\n&gt; reran DB 6 and saw 168 seconds.  &#91;...&#93;  I don\'t think that the non- \\n&gt; determinism is \\\"tied\\\" to a particular database and set of tables; \\n&gt; the same database and tables can sometimes lead to one prepare time, \\n&gt; and sometimes to a different prepare time.   \\n\\n As I was looking at this problem I noticed a bug in the code that  may  be causing this variance.  It looks like we are not resetting the permuteState field in OptimizerImpl at the beginning of each \\\"round\\\" of optimization.  The result (in the cases I saw) was that the field has the value WALK_LOW at the start of the second round of optimization, which, in very timing- sensitive situations, can lead to a code-path that causes the bestCost for the round to remain UNSET--i.e. it sits as Double.MAX_VALUE.  Then if we try to add anything to that cost, we end up with Infinity, which effectively ruins most subsequent cost estimates. \\n\\n I still have not been able to reproduce the variance that Bryan reports, so I cannot say for sure that this is the cause.  I ran the repro 10 times against the same database and I consistently saw times of 550 to 700 seconds--and in each case I could see that the optimizer tried out all 40k permutations before completing.  Then I added code to reset the permuteState variable (see attached jumpReset.patch) and ran the repro 10 more times against the same database.  In this case every execution completed in about 200 to 220 seconds, and I could see that the optimizer timed out before trying out all permutations (which is more what I would expect). \\n\\n The reason I bring this is up is because the compilation time without jumpReset.patch and the compilation time with it appear to correlate to the times that Bryan is seeing in his variance (based on his previous comment).  So I\'m wondering if the two are related...? \\n\\n Bryan, I know you are busy and that running these tests takes a while, but if you have the time\\/inclination, can you apply jumpReset.patch to your codeline and run your tests again?  I\'m wondering what effect (if any) the patch will have on the variance that you are seeing...                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12458025\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12458025&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12458025\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12458025_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12458025_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Dec\\/06 05:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-13T05:57:07+0000\'\u003e13\\/Dec\\/06 05:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith jumpReset.patch applied, I cannot reproduce the varying optimize times.\u003cbr\\/\u003e\\nThe times are all in a tight range, after nearly 6x as many tests as produced\u003cbr\\/\u003e\\nthe variable optimize times before.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12458025_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12458025_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Dec\\/06 05:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2006-12-13T05:57:07+0000\'\u003e13\\/Dec\\/06 05:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With jumpReset.patch applied, I cannot reproduce the varying optimize times. \\nThe times are all in a tight range, after nearly 6x as many tests as produced \\nthe variable optimize times before.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12662441\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12662441&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12662441\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12662441_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12662441_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jan\\/09 17:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-01-09T17:40:17+0000\'\u003e09\\/Jan\\/09 17:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI wonder if the patch attached to this issue can be pursued as is or if there is more work that needs to be done.  It seems it would be good to get this performance regression fixed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12662441_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12662441_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jan\\/09 17:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-01-09T17:40:17+0000\'\u003e09\\/Jan\\/09 17:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I wonder if the patch attached to this issue can be pursued as is or if there is more work that needs to be done.  It seems it would be good to get this performance regression fixed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12728132\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12728132&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12728132\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12728132_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12728132_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/09 14:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-07T14:57:33+0000\'\u003e07\\/Jul\\/09 14:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTriaged for 10.5.2.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12728132_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12728132_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/09 14:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-07-07T14:57:33+0000\'\u003e07\\/Jul\\/09 14:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Triaged for 10.5.2.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12859413\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12859413&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12859413\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12859413_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12859413_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/10 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-21T16:11:16+0000\'\u003e21\\/Apr\\/10 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Bryan,\u003c\\/p\u003e\\n\\n\u003cp\u003eYou contributed a patch for this issue more than 3 years ago but the patch probably needs to be updated before it can be applied now. Are you interested in pursuing this?\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks,\u003cbr\\/\u003e\\n-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12859413_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12859413_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Apr\\/10 16:11\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-21T16:11:16+0000\'\u003e21\\/Apr\\/10 16:11\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Bryan, \\n\\n You contributed a patch for this issue more than 3 years ago but the patch probably needs to be updated before it can be applied now. Are you interested in pursuing this? \\n\\n Thanks, \\n-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12859624\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=12859624&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12859624\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12859624_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12859624_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/10 02:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-22T02:06:56+0000\'\u003e22\\/Apr\\/10 02:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Rick,\u003c\\/p\u003e\\n\\n\u003cp\u003eI think that Army\'s patch is a good one, but I\'m afraid I don\'t have time right\u003cbr\\/\u003e\\nnow to push this issue forward.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12859624_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12859624_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Apr\\/10 02:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-04-22T02:06:56+0000\'\u003e22\\/Apr\\/10 02:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Rick, \\n\\n I think that Army\'s patch is a good one, but I\'m afraid I don\'t have time right \\nnow to push this issue forward.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13464142\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13464142&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13464142\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13464142_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13464142_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Sep\\/12 20:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-26T20:29:12+0000\'\u003e26\\/Sep\\/12 20:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIs the patch considered high risk?  Would it be appropriate to mark this newcomer if someone wants to try out Army\'s patch, run tests and drive this issue to resolution?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13464142_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13464142_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Sep\\/12 20:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-26T20:29:12+0000\'\u003e26\\/Sep\\/12 20:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Is the patch considered high risk?  Would it be appropriate to mark this newcomer if someone wants to try out Army\'s patch, run tests and drive this issue to resolution?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13464757\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13464757&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13464757\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13464757_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13464757_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Sep\\/12 14:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-27T14:09:37+0000\'\u003e27\\/Sep\\/12 14:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI don\'t consider the patch high risk. I think it is ready to pursue. I think it\'s reasonable\u003cbr\\/\u003e\\nto mark this as a newcomer issue. I would be willing to help work with anybody who\u003cbr\\/\u003e\\nhas the time\\/motivation to push this forward.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13464757_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13464757_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Sep\\/12 14:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-27T14:09:37+0000\'\u003e27\\/Sep\\/12 14:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I don\'t consider the patch high risk. I think it is ready to pursue. I think it\'s reasonable \\nto mark this as a newcomer issue. I would be willing to help work with anybody who \\nhas the time\\/motivation to push this forward.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13800149\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13800149&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13800149\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13800149_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13800149_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Oct\\/13 15:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-20T15:15:14+0000\'\u003e20\\/Oct\\/13 15:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eVerified this is still a problem.  On my machine the 10.1 query takes 13 seconds but 203 seconds on trunk.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13800149_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13800149_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Oct\\/13 15:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-20T15:15:14+0000\'\u003e20\\/Oct\\/13 15:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Verified this is still a problem.  On my machine the 10.1 query takes 13 seconds but 203 seconds on trunk.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13800154\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13800154&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13800154\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13800154_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13800154_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Oct\\/13 15:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-20T15:58:37+0000\'\u003e20\\/Oct\\/13 15:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI manually merged the changes to trunk (jumpReset_10_11_trunk_diff.txt) and find the query runs in 64 seconds on trunk  vs the 13 on 10.1, so three times faster but nowhere near the 10.1 performance.  I am using \u003cbr\\/\u003e\\njava version \\\"1.7.0\\\"\u003cbr\\/\u003e\\nJava(TM) SE Runtime Environment (build pwi3270sr5-20130619_01(SR5))\u003cbr\\/\u003e\\nIBM J9 VM (build 2.6, JRE 1.7.0 Windows 7 x86-32 20130617_152572 (JIT enabled, AOT enabled)\u003cbr\\/\u003e\\nJ9VM - R26_Java726_SR5_20130617_1436_B152572\u003cbr\\/\u003e\\nJIT  - r11.b04_20130528_38954ifx1\u003cbr\\/\u003e\\nGC   - R26_Java726_SR5_20130617_1436_B152572\u003cbr\\/\u003e\\nJ9CL - 20130617_152572)\u003cbr\\/\u003e\\nJCL - 20130616_01 based on Oracle 7u25-b12\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not sure if I made an error with the merge or if there is some other regression that has been masked by this one.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13800154_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13800154_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Oct\\/13 15:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-20T15:58:37+0000\'\u003e20\\/Oct\\/13 15:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I manually merged the changes to trunk (jumpReset_10_11_trunk_diff.txt) and find the query runs in 64 seconds on trunk  vs the 13 on 10.1, so three times faster but nowhere near the 10.1 performance.  I am using  \\njava version \\\"1.7.0\\\" \\nJava(TM) SE Runtime Environment (build pwi3270sr5-20130619_01(SR5)) \\nIBM J9 VM (build 2.6, JRE 1.7.0 Windows 7 x86-32 20130617_152572 (JIT enabled, AOT enabled) \\nJ9VM - R26_Java726_SR5_20130617_1436_B152572 \\nJIT  - r11.b04_20130528_38954ifx1 \\nGC   - R26_Java726_SR5_20130617_1436_B152572 \\nJ9CL - 20130617_152572) \\nJCL - 20130616_01 based on Oracle 7u25-b12 \\n\\n I am not sure if I made an error with the merge or if there is some other regression that has been masked by this one. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13800159\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13800159&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13800159\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13800159_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13800159_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Oct\\/13 16:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-20T16:56:10+0000\'\u003e20\\/Oct\\/13 16:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThree times faster is nothing to sneeze at!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13800159_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13800159_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Oct\\/13 16:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-20T16:56:10+0000\'\u003e20\\/Oct\\/13 16:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Three times faster is nothing to sneeze at!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13800791\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13800791&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13800791\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13800791_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13800791_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/13 16:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-21T16:43:45+0000\'\u003e21\\/Oct\\/13 16:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSo should I  go ahead and check this in as is if tests pass?  If so, should it go back to 10.10? We aren\'t really set up for performance regression tests so I am not really sure what testing we could add.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13800791_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13800791_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/13 16:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-21T16:43:45+0000\'\u003e21\\/Oct\\/13 16:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    So should I  go ahead and check this in as is if tests pass?  If so, should it go back to 10.10? We aren\'t really set up for performance regression tests so I am not really sure what testing we could add.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13801328\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13801328&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13801328\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13801328_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13801328_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/13 23:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-21T23:53:47+0000\'\u003e21\\/Oct\\/13 23:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e+1 to checking in the patch. It clearly makes this case better, and that\'s a good thing.\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t think it\'s worth any backporting, as nobody is specifically waiting for it\u003cbr\\/\u003e\\nthat I know of. If we put the patch only in trunk for now we can continue to\u003cbr\\/\u003e\\ntry to figure out how to test it better.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_13801328_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13801328_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Oct\\/13 23:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-21T23:53:47+0000\'\u003e21\\/Oct\\/13 23:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    +1 to checking in the patch. It clearly makes this case better, and that\'s a good thing. \\n\\n I don\'t think it\'s worth any backporting, as nobody is specifically waiting for it \\nthat I know of. If we put the patch only in trunk for now we can continue to \\ntry to figure out how to test it better.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13801431\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13801431&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13801431\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13801431_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13801431_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 02:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T02:37:13+0000\'\u003e22\\/Oct\\/13 02:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1534465 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\" class=\\\"user-hover\\\" rel=\\\"kmarsden\\\"\u003eKathey Marsden\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1534465\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1534465\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2130\\\" title=\\\"Optimizer performance slowdown from 10.1 to 10.2\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2130\\\"\u003e\u003cdel\u003eDERBY-2130\u003c\\/del\u003e\u003c\\/a\u003e - Optimizer performance slowdown from 10.1 to 10.2\u003c\\/p\u003e\\n\\n\u003cp\u003ePatch contributed by Army Brown\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13801431_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13801431_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Oct\\/13 02:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-22T02:37:13+0000\'\u003e22\\/Oct\\/13 02:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1534465 from  Kathey Marsden  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1534465  ] \\n\\n   DERBY-2130   - Optimizer performance slowdown from 10.1 to 10.2 \\n\\n Patch contributed by Army Brown              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13803544\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13803544&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13803544\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13803544_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13803544_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 23:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T23:33:33+0000\'\u003e23\\/Oct\\/13 23:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI tried patched 10.2 and found the prepare was 13 seconds, so it seems this patch did resolve the original performance regression.  On patched 10.3 the prepare was 69 seconds, so I guess there was an additional slow down from 10.2 to 10.3 which we are still seeing on trunk 10.11. I will resolve this issue and open another one for the 10.2 to 10.3 performance slow down.\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13803544_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13803544_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Oct\\/13 23:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-23T23:33:33+0000\'\u003e23\\/Oct\\/13 23:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I tried patched 10.2 and found the prepare was 13 seconds, so it seems this patch did resolve the original performance regression.  On patched 10.3 the prepare was 69 seconds, so I guess there was an additional slow down from 10.2 to 10.3 which we are still seeing on trunk 10.11. I will resolve this issue and open another one for the 10.2 to 10.3 performance slow down. \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13803585\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13803585&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13803585\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13803585_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13803585_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 00:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T00:09:23+0000\'\u003e24\\/Oct\\/13 00:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFixing just in trunk for now to monitor any performance change.  Fix should be suitable for backport.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13803585_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13803585_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Oct\\/13 00:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-24T00:09:23+0000\'\u003e24\\/Oct\\/13 00:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Fixing just in trunk for now to monitor any performance change.  Fix should be suitable for backport.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13913302\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13913302&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13913302\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13913302_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913302_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 18:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T18:46:05+0000\'\u003e26\\/Feb\\/14 18:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003econsider for 10.10 backport\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13913302_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913302_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 18:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T18:46:05+0000\'\u003e26\\/Feb\\/14 18:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    consider for 10.10 backport              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13913337\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13913337&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13913337\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13913337_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913337_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T19:05:02+0000\'\u003e26\\/Feb\\/14 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003elooking at backporting this to 10.10\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13913337_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913337_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T19:05:02+0000\'\u003e26\\/Feb\\/14 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    looking at backporting this to 10.10              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13913351\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13913351&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13913351\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13913351_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913351_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 19:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T19:12:24+0000\'\u003e26\\/Feb\\/14 19:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ejust reopening while working on backport to 10.10.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13913351_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913351_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 19:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T19:12:24+0000\'\u003e26\\/Feb\\/14 19:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    just reopening while working on backport to 10.10.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13913749\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13913749&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13913749\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13913749_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913749_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 23:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T23:43:36+0000\'\u003e26\\/Feb\\/14 23:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1572351 from mikem@apache.org in branch \'code\\/branches\\/10.10\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1572351\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1572351\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-2130\\\" title=\\\"Optimizer performance slowdown from 10.1 to 10.2\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-2130\\\"\u003e\u003cdel\u003eDERBY-2130\u003c\\/del\u003e\u003c\\/a\u003e - Optimizer performance slowdown from 10.1 to 10.2\u003c\\/p\u003e\\n\\n\u003cp\u003ebackporting change #1534465 from trunk to 10.10\u003c\\/p\u003e\\n\\n\u003cp\u003ePatch contributed by Army Brown\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13913749_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913749_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 23:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T23:43:36+0000\'\u003e26\\/Feb\\/14 23:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1572351 from mikem@apache.org in branch \'code\\/branches\\/10.10\' \\n[  https:\\/\\/svn.apache.org\\/r1572351  ] \\n\\n   DERBY-2130   - Optimizer performance slowdown from 10.1 to 10.2 \\n\\n backporting change #1534465 from trunk to 10.10 \\n\\n Patch contributed by Army Brown              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13913752\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=13913752&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13913752\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13913752_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913752_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 23:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T23:44:46+0000\'\u003e26\\/Feb\\/14 23:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ebackported from trunk to 10.10, do not plan on backporting any more for now - but see no reason it could not be.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13913752_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13913752_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Feb\\/14 23:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2014-02-26T23:44:46+0000\'\u003e26\\/Feb\\/14 23:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    backported from trunk to 10.10, do not plan on backporting any more for now - but see no reason it could not be.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14284711\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-2130?focusedCommentId=14284711&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14284711\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_14284711_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14284711_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/15 00:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-01-21T00:22:54+0000\'\u003e21\\/Jan\\/15 00:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ebulk change to close all issues resolved but not closed and not changed since June 1, 2014.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"myrna\\\" id=\\\"commentauthor_14284711_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=myrna\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"myrna\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Myrna van Lunteren\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14284711_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/15 00:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-01-21T00:22:54+0000\'\u003e21\\/Jan\\/15 00:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    bulk change to close all issues resolved but not closed and not changed since June 1, 2014.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520238681520"> 
    <input type="hidden" title="jira.request.server.time" value="348"> 
    <input type="hidden" title="jira.request.id" value="511x94365322x9"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="8"> 
    <input type="hidden" title="db.reads.time.in.ms" value="56"> 
    <input type="hidden" title="db.conns.time.in.ms" value="66"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 511x94365322x9
	          REQUEST TIMESTAMP : [05/Mar/2018:08:31:21 +0000]
	               REQUEST TIME : 0.3480
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 8

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=50, elapsedTotal=56043065, elapsedMin=377040, elapsedMax=13922786, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=54, elapsedTotal=66942605, elapsedMin=397322, elapsedMax=13985445, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>