<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|47aebfa2d4013f5b98a04895e2cda5099996abde|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"78ac57f5caf251\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-4631"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-4631] Wrong join column returned by right outer join with NATURAL or USING and territory-based collation - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-4631] Wrong join column returned by right outer join with NATURAL or USING and territory-based collation - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4631">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-4631" href="/jira/browse/DERBY-4631" id="key-val" rel="12463019">DERBY-4631</a></li>
                </ol>
                <h1 id="summary-val">Wrong join column returned by right outer join with NATURAL or USING and territory-based collation</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4631"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-4631/DERBY-4631.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-4631/DERBY-4631.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-4631/DERBY-4631.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-4631/DERBY-4631.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.6.1.0 Feature release">10.6.1.0</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.6.2.4" title="10.6.2.4 Head of 10.6 branch as of 2014-01-13">10.6.2.4</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.7.1.4" title="10.7.1.4 Head of 10.7 branch as of 2010-11-29">10.7.1.4</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.8.3.0" title="10.8.3.0 Third release on the 10.8 branch">10.8.3.0</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.9.1.0" title="10.9.1.0 First release on the 10.9 branch">10.9.1.0</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <ul class="labels" id="labels-12463019-value"> 
                     <li><a class="lozenge" href="/jira/issues/?jql=labels+%3D+derby_triage10_8" title="derby_triage10_8"><span>derby_triage10_8</span></a></li> 
                    </ul> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310050" class="item"> 
                     <div class="wrap"> 
                      <strong title="Urgency" class="name">Urgency:</strong> 
                      <div id="customfield_12310050-val" class="value type-select" data-fieldtype="select" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        Normal 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>Release Note Needed</span>, 
                        <span>Repro attached</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Deviation from standard</span>, 
                        <span>Wrong query result</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>SQL:2003 says that the join columns in a natural join or in a named<br> columns join should be added to the select list by coalescing the<br> column from the left table with the column from the right table.</p> 
                  <p>Section 7.7, &lt;joined table&gt;, syntax rules:</p> 
                  <p>&gt; 1) Let TR1 be the first &lt;table reference&gt;, and let TR2 be the &lt;table<br> &gt; reference&gt; or &lt;table factor&gt; that is the second operand of the<br> &gt; &lt;joined table&gt;. Let RT1 and RT2 be the row types of TR1 and TR2,<br> &gt; respectively. Let TA and TB be the range variables of TR1 and TR2,<br> &gt; respectively. (...)</p> 
                  <p>and</p> 
                  <p>&gt; 7) If NATURAL is specified or if a &lt;join specification&gt; immediately<br> &gt; containing a &lt;named columns join&gt; is specified, then:<br> (...)<br> &gt; d) If there is at least one corresponding join column, then let SLCC<br> &gt; be a &lt;select list&gt; of &lt;derived column&gt;s of the form<br> &gt;<br> &gt; COALESCE ( TA.C, TB.C ) AS C<br> &gt;<br> &gt; for every column C that is a corresponding join column, taken in<br> &gt; order of their ordinal positions in RT1.</p> 
                  <p>For a right outer join, Derby doesn't use COALESCE(TA.C, TB.C), but<br> rather just TB.C (the column in the right table) directly.</p> 
                  <p>This is in most cases OK, because COALESCE(TA.C, TB.C) = TB.C is an<br> invariant in a right outer join. (Because TA.C is either NULL or equal<br> to TB.C.)</p> 
                  <p>However, in a database with territory-based collation, equality<br> between two values does not mean they are identical, especially now<br> that the strength of the collator can be specified (<a href="https://issues.apache.org/jira/browse/DERBY-1748" title="Global case insensitive setting" class="issue-link" data-issue-key="DERBY-1748"><del>DERBY-1748</del></a>).</p> 
                  <p>Take for instance this join:</p> 
                  <p>ij&gt; connect 'jdbc:derby:testdb;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY';<br> ij&gt; create table big(x varchar(5));<br> 0 rows inserted/updated/deleted<br> ij&gt; insert into big values 'A','B','C';<br> 3 rows inserted/updated/deleted<br> ij&gt; create table small(x varchar(5));<br> 0 rows inserted/updated/deleted<br> ij&gt; insert into small values 'b','c','d';<br> 3 rows inserted/updated/deleted<br> ij&gt; select x, t1.x, t2.x, coalesce(t1.x, t2.x) from small t1 natural right outer join big t2;<br> X |X |X |4 <br> -----------------------<br> A |NULL |A |A <br> B |b |B |b <br> C |c |C |c </p> 
                  <p>3 rows selected</p> 
                  <p>I believe that the expected result from the above query is that the<br> first column should have the same values as the last column. That is,<br> the first column should contain </p> {'A', 'b', 'c'} 
                  <p>, not </p> {'A', 'B', 'C'} 
                  <p>.</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-4631?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-4631?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-4631?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-4631?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12512530" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12512530/DERBY_4631_not_for_commit_patch1_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_not_for_commit_patch1_diff.txt:https://issues.apache.org/jira/secure/attachment/12512530/DERBY_4631_not_for_commit_patch1_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12512530/DERBY_4631_not_for_commit_patch1_diff.txt" title="Latest  31/Jan/12 04:39 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_not_for_commit_patch1_diff.txt:https://issues.apache.org/jira/secure/attachment/12512530/DERBY_4631_not_for_commit_patch1_diff.txt">DERBY_4631_not_for_commit_patch1_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-01-31T04:39:10.403Z">31/Jan/12 04:39</time>
                   </dd>
                   <dd class="attachment-size">
                    11 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12512531" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12512531/DERBY_4631_not_for_commit_patch1_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_not_for_commit_patch1_stat.txt:https://issues.apache.org/jira/secure/attachment/12512531/DERBY_4631_not_for_commit_patch1_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12512531/DERBY_4631_not_for_commit_patch1_stat.txt" title="Latest  31/Jan/12 04:39 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_not_for_commit_patch1_stat.txt:https://issues.apache.org/jira/secure/attachment/12512531/DERBY_4631_not_for_commit_patch1_stat.txt">DERBY_4631_not_for_commit_patch1_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-01-31T04:39:10.423Z">31/Jan/12 04:39</time>
                   </dd>
                   <dd class="attachment-size">
                    0.4 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12513563" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12513563/DERBY_4631_not_for_commit_patch2_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_not_for_commit_patch2_diff.txt:https://issues.apache.org/jira/secure/attachment/12513563/DERBY_4631_not_for_commit_patch2_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12513563/DERBY_4631_not_for_commit_patch2_diff.txt" title="Latest  07/Feb/12 03:09 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_not_for_commit_patch2_diff.txt:https://issues.apache.org/jira/secure/attachment/12513563/DERBY_4631_not_for_commit_patch2_diff.txt">DERBY_4631_not_for_commit_patch2_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-02-07T03:09:39.367Z">07/Feb/12 03:09</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12513564" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12513564/DERBY_4631_not_for_commit_patch2_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_not_for_commit_patch2_stat.txt:https://issues.apache.org/jira/secure/attachment/12513564/DERBY_4631_not_for_commit_patch2_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12513564/DERBY_4631_not_for_commit_patch2_stat.txt" title="Latest  07/Feb/12 03:09 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_not_for_commit_patch2_stat.txt:https://issues.apache.org/jira/secure/attachment/12513564/DERBY_4631_not_for_commit_patch2_stat.txt">DERBY_4631_not_for_commit_patch2_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-02-07T03:09:39.550Z">07/Feb/12 03:09</time>
                   </dd>
                   <dd class="attachment-size">
                    0.5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12514584" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12514584/DERBY_4631_patch3_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch3_diff.txt:https://issues.apache.org/jira/secure/attachment/12514584/DERBY_4631_patch3_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12514584/DERBY_4631_patch3_diff.txt" title="Latest  15/Feb/12 00:57 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch3_diff.txt:https://issues.apache.org/jira/secure/attachment/12514584/DERBY_4631_patch3_diff.txt">DERBY_4631_patch3_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-02-15T00:57:01.290Z">15/Feb/12 00:57</time>
                   </dd>
                   <dd class="attachment-size">
                    17 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12514585" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12514585/DERBY_4631_patch3_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch3_stat.txt:https://issues.apache.org/jira/secure/attachment/12514585/DERBY_4631_patch3_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12514585/DERBY_4631_patch3_stat.txt" title="Latest  15/Feb/12 00:57 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch3_stat.txt:https://issues.apache.org/jira/secure/attachment/12514585/DERBY_4631_patch3_stat.txt">DERBY_4631_patch3_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-02-15T00:57:01.301Z">15/Feb/12 00:57</time>
                   </dd>
                   <dd class="attachment-size">
                    0.3 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12515709" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12515709/DERBY_4631_patch4_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch4_diff.txt:https://issues.apache.org/jira/secure/attachment/12515709/DERBY_4631_patch4_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12515709/DERBY_4631_patch4_diff.txt" title="Latest  23/Feb/12 06:01 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch4_diff.txt:https://issues.apache.org/jira/secure/attachment/12515709/DERBY_4631_patch4_diff.txt">DERBY_4631_patch4_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-02-23T06:01:23.352Z">23/Feb/12 06:01</time>
                   </dd>
                   <dd class="attachment-size">
                    11 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12516491" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12516491/DERBY_4631_patch5_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch5_diff.txt:https://issues.apache.org/jira/secure/attachment/12516491/DERBY_4631_patch5_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12516491/DERBY_4631_patch5_diff.txt" title="Latest  29/Feb/12 01:28 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch5_diff.txt:https://issues.apache.org/jira/secure/attachment/12516491/DERBY_4631_patch5_diff.txt">DERBY_4631_patch5_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-02-29T01:28:45.873Z">29/Feb/12 01:28</time>
                   </dd>
                   <dd class="attachment-size">
                    13 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12516867" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12516867/DERBY_4631_patch6_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch6_diff.txt:https://issues.apache.org/jira/secure/attachment/12516867/DERBY_4631_patch6_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12516867/DERBY_4631_patch6_diff.txt" title="Latest  02/Mar/12 18:04 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch6_diff.txt:https://issues.apache.org/jira/secure/attachment/12516867/DERBY_4631_patch6_diff.txt">DERBY_4631_patch6_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-03-02T18:04:14.448Z">02/Mar/12 18:04</time>
                   </dd>
                   <dd class="attachment-size">
                    47 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12518740" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12518740/DERBY_4631_patch7_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch7_diff.txt:https://issues.apache.org/jira/secure/attachment/12518740/DERBY_4631_patch7_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12518740/DERBY_4631_patch7_diff.txt" title="Latest  16/Mar/12 21:40 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY_4631_patch7_diff.txt:https://issues.apache.org/jira/secure/attachment/12518740/DERBY_4631_patch7_diff.txt">DERBY_4631_patch7_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-03-16T21:40:51.091Z">16/Mar/12 21:40</time>
                   </dd>
                   <dd class="attachment-size">
                    49 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12551745" data-issue-id="12463019" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12551745/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12551745/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12551745/releaseNote.html" title="Latest  01/Nov/12 19:01 - Mamta A. Satoor" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12551745/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2012-11-01T19:01:34.193Z">01/Nov/12 19:01</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is related to">
                   is related to
                  </dt> 
                  <dd id="internal-12542441_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-5613: Queries with group by column not included in the column list for JOIN(INNER or OUTER) with NATURAL or USING does not fail"> <a href="/jira/browse/DERBY-5613" data-issue-key="DERBY-5613" class="issue-link link-title">DERBY-5613</a> <span class="link-summary">Queries with group by column not included in the column list for JOIN(INNER or OUTER) with NATURAL or USING does not fail</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-blue-gray jira-issue-status-lozenge-new aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Open</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is open and ready for the assignee to start work on it.</span>">Open</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is required by">
                   is required by
                  </dt> 
                  <dd id="internal-12607119_12310040"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21148&amp;avatarType=issuetype" width="16" height="16" title="Task - A task that needs to be done." alt="Task - A task that needs to be done."> <span title="DERBY-5923: 10.8 Backport issue (Fall 2012)"> <a href="/jira/browse/DERBY-5923" data-issue-key="DERBY-5923" class="issue-link link-title resolution">DERBY-5923</a> <span class="link-summary">10.8 Backport issue (Fall 2012)</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mamtas" rel="mamtas" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mamta A. Satoor&quot;,&quot;emailAddress&quot;:&quot;msatoor@gmail.com&quot;,&quot;username&quot;:&quot;mamtas&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mamtas"></span></span> Mamta A. Satoor </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_knutanders" rel="knutanders" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Knut Anders Hatlen&quot;,&quot;emailAddress&quot;:&quot;knut.hatlen@oracle.com&quot;,&quot;username&quot;:&quot;knutanders&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="knutanders"></span></span> Knut Anders Hatlen </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">1</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">2</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="26/Apr/10 13:36"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2010-04-26T13:36:29+0000">26/Apr/10 13:36</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="17/Jun/13 09:27"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-06-17T09:27:18+0000">17/Jun/13 09:27</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="14/Sep/12 22:20"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2012-09-14T22:20:42+0000">14/Sep/12 22:20</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4631?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-4631?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12864741\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=12864741&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12864741\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12864741_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12864741_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/May\\/10 11:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-06T11:50:07+0000\'\u003e06\\/May\\/10 11:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis problem also makes us accept some statements that should not be accepted. For example:\u003c\\/p\u003e\\n\\n\u003cp\u003eSELECT country,count(country) FROM\u003cbr\\/\u003e\\nCOUNTRIES JOIN CITIES USING (COUNTRY) group by countries.country\u003c\\/p\u003e\\n\\n\u003cp\u003eHere, the query should be rejected because countries.country is not specified in the select list. However, it\'s accepted because we replace the column country with countries.country instead of coalesce(countries.country, cities.country).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12864741_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12864741_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/May\\/10 11:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-05-06T11:50:07+0000\'\u003e06\\/May\\/10 11:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This problem also makes us accept some statements that should not be accepted. For example: \\n\\n SELECT country,count(country) FROM \\nCOUNTRIES JOIN CITIES USING (COUNTRY) group by countries.country \\n\\n Here, the query should be rejected because countries.country is not specified in the select list. However, it\'s accepted because we replace the column country with countries.country instead of coalesce(countries.country, cities.country).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12890350\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=12890350&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12890350\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12890350_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12890350_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/10 17:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-07-20T17:52:49+0000\'\u003e20\\/Jul\\/10 17:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt seems like what we need is to replace the join column references(which are not tied to the join table specifically) in select column list to COALESCE functions. Additionally, in case of a named join order, the join column names in USING clause should be replaced with COALESCE function. eg of each of the cases\u003cbr\\/\u003e\\nselect x, t1.x, t2.x, coalesce(t1.x, t2.x) from small t1 natural right outer join big t2; \u003cbr\\/\u003e\\nThe first column in the select above which is x should be internally replaced with coalesce(t1.x, t2.x) \u003c\\/p\u003e\\n\\n\u003cp\u003eSELECT country,count(country) FROM COUNTRIES JOIN CITIES USING (COUNTRY) group by countries.country \u003cbr\\/\u003e\\nThe first column in the select and the COUNTRY in USING clause should be replaced with coalesce internally.\u003c\\/p\u003e\\n\\n\u003cp\u003eI looked at the code a bindExpressions code in impl.sql.compile.JoinNode There, we already have a code to recognize natural join\u003cbr\\/\u003e\\n        if (naturalJoin) \u003c\\/p\u003e\\n{\\n            usingClause = getCommonColumnsForNaturalJoin();\\n        }\\n\\n\u003cp\u003eI think after this code, we should go through join columns in select column list and in USING clause and replace them with corresponding COALESEC functions.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12890350_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12890350_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'20\\/Jul\\/10 17:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-07-20T17:52:49+0000\'\u003e20\\/Jul\\/10 17:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It seems like what we need is to replace the join column references(which are not tied to the join table specifically) in select column list to COALESCE functions. Additionally, in case of a named join order, the join column names in USING clause should be replaced with COALESCE function. eg of each of the cases \\nselect x, t1.x, t2.x, coalesce(t1.x, t2.x) from small t1 natural right outer join big t2;  \\nThe first column in the select above which is x should be internally replaced with coalesce(t1.x, t2.x)  \\n\\n SELECT country,count(country) FROM COUNTRIES JOIN CITIES USING (COUNTRY) group by countries.country  \\nThe first column in the select and the COUNTRY in USING clause should be replaced with coalesce internally. \\n\\n I looked at the code a bindExpressions code in impl.sql.compile.JoinNode There, we already have a code to recognize natural join \\n        if (naturalJoin)  \\n{\\n            usingClause = getCommonColumnsForNaturalJoin();\\n        }\\n\\n I think after this code, we should go through join columns in select column list and in USING clause and replace them with corresponding COALESEC functions.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13164165\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13164165&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13164165\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13164165_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13164165_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Dec\\/11 05:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-12-07T05:47:44+0000\'\u003e07\\/Dec\\/11 05:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI debugged the code to figure out what (and where) are we doing in the code which causes us to give wrong results for join column in case of territory based database and right outer join with NATURAL or USING clause. As Knut pointed out earlier in this jira, as per the SQL spec, \\\"the join columns in a natural join or in a named columns join should be added to the select list by coalescing the column from the left table with the column from the right table. \\\" What I have found is that Derby decides to pick up join column\'s value from the left table when we are working with natural left outer join and it picks up the join column\'s value from the right table when we are working with natural right outer join. This is not a problem when we are dealing with non-territory based databases but the assumption to rely on just one table\'s join column is incorrect when working with territory based databases. Following is the test case I used for debugging which further explains Derby\'s current implementation.\u003c\\/p\u003e\\n\\n\u003cp\u003econnect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\'; \u003cbr\\/\u003e\\ncreate table big(x varchar(5)); \u003cbr\\/\u003e\\ninsert into big values \'A\',\'B\', null; \u003cbr\\/\u003e\\ncreate table small(x varchar(5)); \u003cbr\\/\u003e\\ninsert into small values \'b\',\'c\', null; \u003cbr\\/\u003e\\nselect * from small t1 natural left outer join big t2;\u003cbr\\/\u003e\\nselect * from small t1 natural right outer join big t2;\u003c\\/p\u003e\\n\\n\u003cp\u003eFor both natural left outer join and natural right outer join, at execution time, we create a merged row which has columns merged from the left and right tables. The column(in my example, there is only one column)s in the select sql maps to a column from the merged row. The mapping is determined at the sql compile phase. \u003cbr\\/\u003e\\nIn the case of \'select * from small t1 natural left outer join big t2\', there will be three merged rows with 2 columns each\u003cbr\\/\u003e\\n\'b\'  \'B\'\u003cbr\\/\u003e\\n\'c\'  null\u003cbr\\/\u003e\\nnull null\u003cbr\\/\u003e\\nAnd for natural left outer join, the generated code has column in the select SQL map to the first column in the merged row. This will always work fine even in a territory based database because as per the SQL standards, the column x should be equivalent to the return value of coalesce(t1.x, t2.x). Since we are working with left outer join, then if the first column in the merged row is null, then even the 2nd column(from the right table) will be null and hence it is ok to always pick up the value from the 1st column in the merged row. This mapping will always lead column x to have the same value as coalesce(t1.x, t2.x).\u003c\\/p\u003e\\n\\n\u003cp\u003eBut for a territory based database, we can\'t count on a logic like that for natural right outer join. The way Derby works right now, the column x in the select always gets mapped to the 2nd column in the merged row. In the case of \'select * from small t1 natural right outer join big t2\', there will be three merged rows with 2 columns each\u003cbr\\/\u003e\\nnull \'A\'\u003cbr\\/\u003e\\n\'b\'  \'B\'\u003cbr\\/\u003e\\nnull null\u003cbr\\/\u003e\\nAnd for natural right outer join, the generated code has column in the select SQL map to the second column in the merged row. This will work fine in a non-territory database, because if column 1 in the merged row has a non-null value, then it will always be the same value as the column 2 in the merged row. But in our example, with territor based database(with SECONDARY strength, meaning it is case insensitive comparison), values \'B\' and \'b\' are considered equal. Hence the coalesce(t1.x, t2,x) will not be same as value in the 2nd column of the merged row. For natural right outer join with the data given in the example above, \u003cbr\\/\u003e\\ncoalesce(t1.x, t2,x) will return \'A\', \'b\' and null. But with the mapping of column x in the SELECT to the 2nd column in the merged row will return \'A\', \'B\' and null thus returning data which does not comply with SQL standard which says that column x\'s value should be the return value of coalesce(t1.x, t2.x). So it seems like may be we need some of kind projection in case of natural right outer join (rather than simple column mapping to the 2nd column which is what happens right now) so that we look at both the columns in the merged row to determine the value of column x.\u003c\\/p\u003e\\n\\n\u003cp\u003eHope this explanation helps understand what Derby is doing internally and based on that, we can come up with some proposal to fix the issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13164165_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13164165_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Dec\\/11 05:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-12-07T05:47:44+0000\'\u003e07\\/Dec\\/11 05:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I debugged the code to figure out what (and where) are we doing in the code which causes us to give wrong results for join column in case of territory based database and right outer join with NATURAL or USING clause. As Knut pointed out earlier in this jira, as per the SQL spec, \\\"the join columns in a natural join or in a named columns join should be added to the select list by coalescing the column from the left table with the column from the right table. \\\" What I have found is that Derby decides to pick up join column\'s value from the left table when we are working with natural left outer join and it picks up the join column\'s value from the right table when we are working with natural right outer join. This is not a problem when we are dealing with non-territory based databases but the assumption to rely on just one table\'s join column is incorrect when working with territory based databases. Following is the test case I used for debugging which further explains Derby\'s current implementation. \\n\\n connect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\';  \\ncreate table big(x varchar(5));  \\ninsert into big values \'A\',\'B\', null;  \\ncreate table small(x varchar(5));  \\ninsert into small values \'b\',\'c\', null;  \\nselect * from small t1 natural left outer join big t2; \\nselect * from small t1 natural right outer join big t2; \\n\\n For both natural left outer join and natural right outer join, at execution time, we create a merged row which has columns merged from the left and right tables. The column(in my example, there is only one column)s in the select sql maps to a column from the merged row. The mapping is determined at the sql compile phase.  \\nIn the case of \'select * from small t1 natural left outer join big t2\', there will be three merged rows with 2 columns each \\n\'b\'  \'B\' \\n\'c\'  null \\nnull null \\nAnd for natural left outer join, the generated code has column in the select SQL map to the first column in the merged row. This will always work fine even in a territory based database because as per the SQL standards, the column x should be equivalent to the return value of coalesce(t1.x, t2.x). Since we are working with left outer join, then if the first column in the merged row is null, then even the 2nd column(from the right table) will be null and hence it is ok to always pick up the value from the 1st column in the merged row. This mapping will always lead column x to have the same value as coalesce(t1.x, t2.x). \\n\\n But for a territory based database, we can\'t count on a logic like that for natural right outer join. The way Derby works right now, the column x in the select always gets mapped to the 2nd column in the merged row. In the case of \'select * from small t1 natural right outer join big t2\', there will be three merged rows with 2 columns each \\nnull \'A\' \\n\'b\'  \'B\' \\nnull null \\nAnd for natural right outer join, the generated code has column in the select SQL map to the second column in the merged row. This will work fine in a non-territory database, because if column 1 in the merged row has a non-null value, then it will always be the same value as the column 2 in the merged row. But in our example, with territor based database(with SECONDARY strength, meaning it is case insensitive comparison), values \'B\' and \'b\' are considered equal. Hence the coalesce(t1.x, t2,x) will not be same as value in the 2nd column of the merged row. For natural right outer join with the data given in the example above,  \\ncoalesce(t1.x, t2,x) will return \'A\', \'b\' and null. But with the mapping of column x in the SELECT to the 2nd column in the merged row will return \'A\', \'B\' and null thus returning data which does not comply with SQL standard which says that column x\'s value should be the return value of coalesce(t1.x, t2.x). So it seems like may be we need some of kind projection in case of natural right outer join (rather than simple column mapping to the 2nd column which is what happens right now) so that we look at both the columns in the merged row to determine the value of column x. \\n\\n Hope this explanation helps understand what Derby is doing internally and based on that, we can come up with some proposal to fix the issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13165798\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13165798&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13165798\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13165798_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13165798_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Dec\\/11 03:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-12-09T03:00:22+0000\'\u003e09\\/Dec\\/11 03:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAs mentioned earlier in this jira, the SQL spec says that the join columns in a natural join or in a named columns join should be added to the select list by coalescing the column from the left table with the column from the right table. Derby implements the SQL spec by using left table\'s column value when doing natural left outer join. For natural right outer join, Derby uses the right\u003cbr\\/\u003e\\ntable\'s join column value. This logic correctly implements the SQL spec requirements for both left and right outer joins for non-territory based database and for left outer join for territory based database but the logic for the natural right outer join doesn\'t work for territory based database. Taking the example from earlier in this jira\u003cbr\\/\u003e\\ncreate table big(x varchar(5)); \u003cbr\\/\u003e\\ninsert into big values \'A\',\'B\'; \u003cbr\\/\u003e\\ncreate table small(x varchar(5)); \u003cbr\\/\u003e\\ninsert into small values \'b\',\'c\'; \u003c\\/p\u003e\\n\\n\u003cp\u003eFor this data, following shows that selecting the join column doesn\'t give the same results as coalesce(t1.x, t2.x)\u003cbr\\/\u003e\\nselect x, t1.x t1x, t2.x t2x, coalesce(t1.x, t2.x) cx from small t1 natural right outer join big t2;\u003cbr\\/\u003e\\nX    |T1X  |T2X  |CX   \u003cbr\\/\u003e\\n--------------------------------------------------------------------\u003cbr\\/\u003e\\nA    |NULL |A    |A    \u003cbr\\/\u003e\\nB    |b         |B    |b    \u003c\\/p\u003e\\n\\n\u003cp\u003eFor the 1st row above, coalesce(t1.x, t2.x) will return \'A\' and that is what we got for the join column in that row, so we are good for the 1st row. But for the 2nd row, coalesce(t1.x, t2.x) will return \'b\' whereas the join column for that row shows \'B\'. This is because as per Derby\'s implementation, for natural right outer join, we just pick the value from the right table row which for the 2nd row happens to be \'B\'. \u003c\\/p\u003e\\n\\n\u003cp\u003eWe can leave the logic as it is for natural left outer joins since it works fine for both territory and non-terrtory based databases. We can also leave the logic untouched for natural right outer joins for non-territory based databases. The only broken case is natural right outer join in case of territory based database. For this specific case, we can generate a project restrict resultset which will pick the join column\'s value based on following logic\u003cbr\\/\u003e\\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value. \u003cbr\\/\u003e\\n2)If the left table\'s column value is non-null, then pick up that value\u003c\\/p\u003e\\n\\n\u003cp\u003eI have not done much work in code generation and hence wanted to run this logic by the community to see if anyone has any feedback and if this looks like the correct approach to solve the problem. Any suggestions on alternative\\/better fix?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13165798_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13165798_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Dec\\/11 03:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-12-09T03:00:22+0000\'\u003e09\\/Dec\\/11 03:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    As mentioned earlier in this jira, the SQL spec says that the join columns in a natural join or in a named columns join should be added to the select list by coalescing the column from the left table with the column from the right table. Derby implements the SQL spec by using left table\'s column value when doing natural left outer join. For natural right outer join, Derby uses the right \\ntable\'s join column value. This logic correctly implements the SQL spec requirements for both left and right outer joins for non-territory based database and for left outer join for territory based database but the logic for the natural right outer join doesn\'t work for territory based database. Taking the example from earlier in this jira \\ncreate table big(x varchar(5));  \\ninsert into big values \'A\',\'B\';  \\ncreate table small(x varchar(5));  \\ninsert into small values \'b\',\'c\';  \\n\\n For this data, following shows that selecting the join column doesn\'t give the same results as coalesce(t1.x, t2.x) \\nselect x, t1.x t1x, t2.x t2x, coalesce(t1.x, t2.x) cx from small t1 natural right outer join big t2; \\nX    |T1X  |T2X  |CX    \\n-------------------------------------------------------------------- \\nA    |NULL |A    |A     \\nB    |b         |B    |b     \\n\\n For the 1st row above, coalesce(t1.x, t2.x) will return \'A\' and that is what we got for the join column in that row, so we are good for the 1st row. But for the 2nd row, coalesce(t1.x, t2.x) will return \'b\' whereas the join column for that row shows \'B\'. This is because as per Derby\'s implementation, for natural right outer join, we just pick the value from the right table row which for the 2nd row happens to be \'B\'.  \\n\\n We can leave the logic as it is for natural left outer joins since it works fine for both territory and non-terrtory based databases. We can also leave the logic untouched for natural right outer joins for non-territory based databases. The only broken case is natural right outer join in case of territory based database. For this specific case, we can generate a project restrict resultset which will pick the join column\'s value based on following logic \\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value.  \\n2)If the left table\'s column value is non-null, then pick up that value \\n\\n I have not done much work in code generation and hence wanted to run this logic by the community to see if anyone has any feedback and if this looks like the correct approach to solve the problem. Any suggestions on alternative\\/better fix?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13170002\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13170002&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13170002\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13170002_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13170002_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/11 07:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-12-15T07:39:53+0000\'\u003e15\\/Dec\\/11 07:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIf that approach doesn\'t work, another possibility might be to insert a CoalesceFunctionNode in JoinNode.buildRCL() or perhaps in JoinNode.getAllResultColumns().\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13170002_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13170002_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Dec\\/11 07:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-12-15T07:39:53+0000\'\u003e15\\/Dec\\/11 07:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    If that approach doesn\'t work, another possibility might be to insert a CoalesceFunctionNode in JoinNode.buildRCL() or perhaps in JoinNode.getAllResultColumns().              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13185724\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13185724&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13185724\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13185724_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13185724_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/12 18:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-13T18:13:52+0000\'\u003e13\\/Jan\\/12 18:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWant to copy the commit comments from the revision r1230873. After the commit comments, I have proposal for 2 possible fixes for the problems described in the commit comments.\u003cbr\\/\u003e\\n*************************************\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4631\\\" title=\\\"Wrong join column returned by right outer join with NATURAL or USING and territory-based collation\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4631\\\"\u003e\u003cdel\u003eDERBY-4631\u003c\\/del\u003e\u003c\\/a\u003e Wrong join column returned by right outer join with NATURAL or USING and territory-based collation\u003c\\/p\u003e\\n\\n\u003cp\u003eI am adding more tests for this jira to show the kind of joins and queries that are impacted by this defect.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn short, any join query which is either a NATURAL join or has a USING clause can run into the two problems as described in this jira.\u003c\\/p\u003e\\n\\n\u003cp\u003eProblem 1)As per SQL spec, the join column\'s value should be derived by\u003cbr\\/\u003e\\n               COALESCE(leftTable.joinColumn, rightTable.joinColumn).\u003cbr\\/\u003e\\n       But Derby has it\'s own rule for deriving the join column\'s value. Derby\'s implementation, for a right outer join, gets the join column\'s value from the right table and for left outer join, it gets the value from the left table. This logic works for most cases, but it can give incorrect value for a right outer join (with NATURAL JOIN or USING clause) in case of a territory based database. Additionally, the join column in the SELECT list(with NATURAL JOIN or USING clause) gets associated with the left table\'s join column(for inner joins and left outer joins) or it gets associated with the right table\'s join column(for rihgt outer joins). Since SQL spec requires the join column to be COALESCE ( leftTable.C, rightTable.C ) AS C, the join column should not be really associated with any of the 2 join tables.\u003c\\/p\u003e\\n\\n\u003cp\u003eProblem 2)The Derby\'s assocation of join column to left or right table as described in problem 1) causes it to allow incorrect queries. eg query\u003cbr\\/\u003e\\nselect i from t1_D3880 inner join t2_D3880 USING\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/information.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e group by t1_D3880.i;\u003cbr\\/\u003e\\n       The query above works because join column i got associated with left table which is t1_D3880. If the query was rewritten to do the group by on right table, it would fail.\u003cbr\\/\u003e\\nselect i from t1_D3880 inner join t2_D3880 USING\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/information.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e group by t2_D3880.i;\u003cbr\\/\u003e\\n*************************************\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThere are 2 solutions that we have talked about in the jira. \u003cbr\\/\u003e\\nSolution 1)Currently, at execution time, Derby creates a merged row for join column which has columns merged from the left and right tables and picks up the 1st column\'s value for a left outer join and picks up the 2nd column\'s value for right outer join. (I don\'t remember debugging the inner join case but from it\'s behavior, it probably also picks up the value from the 1st column\'s value just like left outer join).\u003cbr\\/\u003e\\n\\tRather than this logic, we can change the code to pick the join column\'s value based on following logic \u003cbr\\/\u003e\\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value. \u003cbr\\/\u003e\\n2)If the left table\'s column value is non-null, then pick up that value \u003cbr\\/\u003e\\n\\tWe can implement this logic for all kinds of joins except the cross join(which doesn\'t allow NATURAL\\tJOIN or USING clause and hence we will never be able to run in the problem described by this jira or we can implement the logic only for right outer joins which is the only case which will run into problem because we do not implement COALESCE.  The problem with this solution is it will not catch Problem 2) described above because join column is getting associated with left table or right table depending on what kind of join we are working with.\u003cbr\\/\u003e\\nSolution 2)This solution will take care of all the problems described earlier. With this solution, at bind time, we should replace the join column with COALESCE as described by SQL spec. This is a cleaner  solution then solution 1) because it takes care of all the problem cases but it can cause existing queries with group by using table name for association for join columns will stop working and will have to be rewritten. \u003c\\/p\u003e\\n\\n\u003cp\u003eI lean towards solution 2) for it\'s cleanliness and direct implementation of SQL spec COALESCE behavior for join columns but I am interested to know what are the community\'s thoughts on this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13185724_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13185724_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/12 18:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-13T18:13:52+0000\'\u003e13\\/Jan\\/12 18:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Want to copy the commit comments from the revision r1230873. After the commit comments, I have proposal for 2 possible fixes for the problems described in the commit comments. \\n************************************* \\n  DERBY-4631   Wrong join column returned by right outer join with NATURAL or USING and territory-based collation \\n\\n I am adding more tests for this jira to show the kind of joins and queries that are impacted by this defect. \\n\\n In short, any join query which is either a NATURAL join or has a USING clause can run into the two problems as described in this jira. \\n\\n Problem 1)As per SQL spec, the join column\'s value should be derived by \\n               COALESCE(leftTable.joinColumn, rightTable.joinColumn). \\n       But Derby has it\'s own rule for deriving the join column\'s value. Derby\'s implementation, for a right outer join, gets the join column\'s value from the right table and for left outer join, it gets the value from the left table. This logic works for most cases, but it can give incorrect value for a right outer join (with NATURAL JOIN or USING clause) in case of a territory based database. Additionally, the join column in the SELECT list(with NATURAL JOIN or USING clause) gets associated with the left table\'s join column(for inner joins and left outer joins) or it gets associated with the right table\'s join column(for rihgt outer joins). Since SQL spec requires the join column to be COALESCE ( leftTable.C, rightTable.C ) AS C, the join column should not be really associated with any of the 2 join tables. \\n\\n Problem 2)The Derby\'s assocation of join column to left or right table as described in problem 1) causes it to allow incorrect queries. eg query \\nselect i from t1_D3880 inner join t2_D3880 USING  group by t1_D3880.i; \\n       The query above works because join column i got associated with left table which is t1_D3880. If the query was rewritten to do the group by on right table, it would fail. \\nselect i from t1_D3880 inner join t2_D3880 USING  group by t2_D3880.i; \\n************************************* \\n\\n\\n There are 2 solutions that we have talked about in the jira.  \\nSolution 1)Currently, at execution time, Derby creates a merged row for join column which has columns merged from the left and right tables and picks up the 1st column\'s value for a left outer join and picks up the 2nd column\'s value for right outer join. (I don\'t remember debugging the inner join case but from it\'s behavior, it probably also picks up the value from the 1st column\'s value just like left outer join). \\n\\tRather than this logic, we can change the code to pick the join column\'s value based on following logic  \\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value.  \\n2)If the left table\'s column value is non-null, then pick up that value  \\n\\tWe can implement this logic for all kinds of joins except the cross join(which doesn\'t allow NATURAL\\tJOIN or USING clause and hence we will never be able to run in the problem described by this jira or we can implement the logic only for right outer joins which is the only case which will run into problem because we do not implement COALESCE.  The problem with this solution is it will not catch Problem 2) described above because join column is getting associated with left table or right table depending on what kind of join we are working with. \\nSolution 2)This solution will take care of all the problems described earlier. With this solution, at bind time, we should replace the join column with COALESCE as described by SQL spec. This is a cleaner  solution then solution 1) because it takes care of all the problem cases but it can cause existing queries with group by using table name for association for join columns will stop working and will have to be rewritten.  \\n\\n I lean towards solution 2) for it\'s cleanliness and direct implementation of SQL spec COALESCE behavior for join columns but I am interested to know what are the community\'s thoughts on this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13185752\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13185752&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13185752\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13185752_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13185752_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/12 18:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-13T18:57:01+0000\'\u003e13\\/Jan\\/12 18:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSo far you have added a number of tests, and some of the comments seem to indicate some of the tests\u003cbr\\/\u003e\\nare coded so they pass, but that they are actually exhibiting the wrong behavior.  I find this confusing, but\u003cbr\\/\u003e\\nknow you prefer this methodology.  Could you at least make it clearer in the test comments somehow which\u003cbr\\/\u003e\\nof the test cases are actually bugs.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13185752_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13185752_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/12 18:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-13T18:57:01+0000\'\u003e13\\/Jan\\/12 18:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    So far you have added a number of tests, and some of the comments seem to indicate some of the tests \\nare coded so they pass, but that they are actually exhibiting the wrong behavior.  I find this confusing, but \\nknow you prefer this methodology.  Could you at least make it clearer in the test comments somehow which \\nof the test cases are actually bugs.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13185764\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13185764&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13185764\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13185764_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13185764_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/12 19:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-13T19:07:42+0000\'\u003e13\\/Jan\\/12 19:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am concerned by the performance characteristics of you proposed solution #2.  Could you go into more detail on what it involves and what\u003cbr\\/\u003e\\nset of queries it will affect.  I am most interested in what happens at execution time for a large join.  I think my most basic question is in a \u003cbr\\/\u003e\\n1 to 1 million row join will you be adding 1 million new function calls for the coalesce, or is this somehow optimized after bind?  I am assuming\u003cbr\\/\u003e\\nthat the reason the code does not currently do an explicit coalesce already is an optimization, where it was assumed the implementation \u003cbr\\/\u003e\\nbehavior would match the external behavior that the spec is describing.\u003c\\/p\u003e\\n\\n\u003cp\u003eSolution 1 seems safer to me, and if implemented we should log the SQL syntax problems you have uncovered in a separate JIRA.  \u003c\\/p\u003e\\n\\n\u003cp\u003eAlso can you explicitly give some queries that currently work today that will not after your change, so that the compatibility impact of your\u003cbr\\/\u003e\\nsolutions can be understood.  Do those queries return correct results?  Once you list a few of these queries maybe we can try them on other\u003cbr\\/\u003e\\nplatforms to verify that they are incorrect SQL.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13185764_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13185764_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/12 19:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-13T19:07:42+0000\'\u003e13\\/Jan\\/12 19:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am concerned by the performance characteristics of you proposed solution #2.  Could you go into more detail on what it involves and what \\nset of queries it will affect.  I am most interested in what happens at execution time for a large join.  I think my most basic question is in a  \\n1 to 1 million row join will you be adding 1 million new function calls for the coalesce, or is this somehow optimized after bind?  I am assuming \\nthat the reason the code does not currently do an explicit coalesce already is an optimization, where it was assumed the implementation  \\nbehavior would match the external behavior that the spec is describing. \\n\\n Solution 1 seems safer to me, and if implemented we should log the SQL syntax problems you have uncovered in a separate JIRA.   \\n\\n Also can you explicitly give some queries that currently work today that will not after your change, so that the compatibility impact of your \\nsolutions can be understood.  Do those queries return correct results?  Once you list a few of these queries maybe we can try them on other \\nplatforms to verify that they are incorrect SQL.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13185859\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13185859&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13185859\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13185859_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13185859_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/12 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-13T21:14:31+0000\'\u003e13\\/Jan\\/12 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRevision 1231296 has addressed Mike\'s concern about the tests. The commit comment was as follows\u003cbr\\/\u003e\\n******************************\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4631\\\" title=\\\"Wrong join column returned by right outer join with NATURAL or USING and territory-based collation\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4631\\\"\u003e\u003cdel\u003eDERBY-4631\u003c\\/del\u003e\u003c\\/a\u003e Wrong join column returned by right outer join with NATURAL or USING and territory-based collation\u003c\\/p\u003e\\n\\n\u003cp\u003eAdding comments to some of the tests, stating that Derby is allowing incorrect behavior because of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4631\\\" title=\\\"Wrong join column returned by right outer join with NATURAL or USING and territory-based collation\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4631\\\"\u003e\u003cdel\u003eDERBY-4631\u003c\\/del\u003e\u003c\\/a\u003e. Once the jira is fixed, these tests should start failing and would need to be changed to show the correct behavior.\u003cbr\\/\u003e\\n******************************\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13185859_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13185859_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/12 21:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-13T21:14:31+0000\'\u003e13\\/Jan\\/12 21:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Revision 1231296 has addressed Mike\'s concern about the tests. The commit comment was as follows \\n****************************** \\n  DERBY-4631   Wrong join column returned by right outer join with NATURAL or USING and territory-based collation \\n\\n Adding comments to some of the tests, stating that Derby is allowing incorrect behavior because of   DERBY-4631  . Once the jira is fixed, these tests should start failing and would need to be changed to show the correct behavior. \\n******************************              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13187090\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13187090&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13187090\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13187090_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13187090_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/12 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-16T19:05:55+0000\'\u003e16\\/Jan\\/12 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere are answers to some of Mike\'s comments\u003cbr\\/\u003e\\n********************************************************\u003cbr\\/\u003e\\nMike\'s comment\u003cbr\\/\u003e\\nI am concerned by the performance characteristics of you proposed solution #2. Could you go into more detail on what it involves and what set of queries it will affect\u003cbr\\/\u003e\\n********************************************************\u003cbr\\/\u003e\\nAs part of solution #2, I am proposing that during the bind phase, we are going through the join query\'s column list, we replace the join column in the list with coalesce function and make sure that newly added coalesce node to the select list gets bound. This node will generate a call to following method in DataTypejava\u003cbr\\/\u003e\\n\\tpublic DataValueDescriptor coalesce(DataValueDescriptor[] argumentsList, DataValueDescriptor returnValue)\u003cbr\\/\u003e\\n\\t\\t\\t\\t\\t\\tthrows StandardException\u003cbr\\/\u003e\\n\\t{\u003cbr\\/\u003e\\n\\t\\t\\/\\/ arguments list should have at least 2 arguments\u003cbr\\/\u003e\\n\\t\\tif (SanityManager.DEBUG)\u003c\\/p\u003e\\n\\t\\t{\\n\\t\\t\\tSanityManager.ASSERT(argumentsList != null,\\n\\t\\t\\t\\t\\\"argumentsList expected to be non-null\\\");\\n\\t\\t\\tSanityManager.ASSERT(argumentsList.length &gt; 1,\\n\\t\\t\\t\\t\\\"argumentsList.length expected to be &gt; 1\\\");\\n\\t\\t}\\n\\n\u003cp\u003e\\t\\t\\/* Walk the arguments list until we find a non-null value. Otherwise we will return null\u003cbr\\/\u003e\\n\\t\\t *\\/\u003cbr\\/\u003e\\n\\t\\tint index;\u003cbr\\/\u003e\\n\\t\\tfor (index = 0; index &lt; argumentsList.length; index++)\u003cbr\\/\u003e\\n\\t\\t{\u003cbr\\/\u003e\\n\\t\\t\\tif (!(argumentsList\u003cspan class=\\\"error\\\"\u003e&#91;index&#93;\u003c\\/span\u003e.isNull()))\u003c\\/p\u003e\\n\\t\\t\\t{\\n\\t\\t\\t\\treturnValue.setValue(argumentsList[index]);\\n\\t\\t\\t\\treturn returnValue;\\n\\t\\t\\t}\\n\u003cp\u003e\\t\\t}\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\treturnValue.setToNull();\u003cbr\\/\u003e\\n\\t\\treturn returnValue;\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t}\u003cbr\\/\u003e\\nIn our case, there will always be only 2 arguments to the coalesce function and the first non-null value will have us return with that value from the method and if for some reason, if both the values are null, then we will return null value. All this work will be done for joins using NATURAL JOINS or USING clause which can happen for inner joins, left outer join and right outer joins. eg of each of these kind of joins\u003cbr\\/\u003e\\nCREATE TABLE derby4631_t1(x varchar(5));\u003cbr\\/\u003e\\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\';\u003cbr\\/\u003e\\nCREATE TABLE derby4631_t2(x varchar(5));\u003cbr\\/\u003e\\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\';\u003c\\/p\u003e\\n\\n\u003cp\u003eSELECT x FROM derby4631_t2 NATURAL INNER JOIN derby4631_t1;\u003cbr\\/\u003e\\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1;\u003cbr\\/\u003e\\nSELECT x FROM derby4631_t2 NATURAL LEFT OUTER JOIN derby4631_t1;\u003cbr\\/\u003e\\nselect x from derby4631_t2 INNER JOIN derby4631_t1 USING\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/error.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e;\u003cbr\\/\u003e\\nselect x from derby4631_t2 RIGHT OUTERJOIN derby4631_t1 USING\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/error.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e;\u003cbr\\/\u003e\\nselect x from derby4631_t2 LEFT OUTERJOIN derby4631_t1 USING\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/error.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e;\u003c\\/p\u003e\\n\\n\u003cp\u003eCurrently, at execution time, Derby already does special handling to figure out if it is dealing with left outer join or right outer join and based on that, it determines whether it should pick up the value from the left column or the right column in the merged row(consisting of 2 columns, join column from left and join column from right) for each of the join columns. Instead of this, now we will let coalesce pick up \u003cbr\\/\u003e\\n1)the left column\'s value if it is not null. If it is null then\u003cbr\\/\u003e\\n2)pick up the right column\'s value if it is not null. If it is null then simply return null.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo, there is special code happening with both the existing Derby behavior and proposed Derby behavior but at this point, I am not sure how much more\\/same\\/less performance impact the new changes might cause. This is all in theory at this point. I have never worked on the code to replace a user supplied column from the select list with another kind of node at bind time, so if we do decide to go this path, I will be greatful to have community\'s knowledge on this kind of change. I will work on it my own too to figure out what needs to be done if we decide to go with this solution.\u003c\\/p\u003e\\n\\n\u003cp\u003e********************************************************\u003cbr\\/\u003e\\nMike\'s comment\u003cbr\\/\u003e\\nI am assuming that the reason the code does not currently do an explicit coalesce already is an optimization, where it was assumed the implementation behavior would match the external behavior that the spec is describing, \u003cbr\\/\u003e\\n********************************************************\u003cbr\\/\u003e\\nYou are probably right Mike, but I am not sure if coalesce functionality was available in Derby when joins were implemented. It could very well be that we had coalesce available but we didn\'t use it for optimization reasons but I just wanted to raise that it might be a possibility that we never have had coalesce available.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13187090_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13187090_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Jan\\/12 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-16T19:05:55+0000\'\u003e16\\/Jan\\/12 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here are answers to some of Mike\'s comments \\n******************************************************** \\nMike\'s comment \\nI am concerned by the performance characteristics of you proposed solution #2. Could you go into more detail on what it involves and what set of queries it will affect \\n******************************************************** \\nAs part of solution #2, I am proposing that during the bind phase, we are going through the join query\'s column list, we replace the join column in the list with coalesce function and make sure that newly added coalesce node to the select list gets bound. This node will generate a call to following method in DataTypejava \\n\\tpublic DataValueDescriptor coalesce(DataValueDescriptor[] argumentsList, DataValueDescriptor returnValue) \\n\\t\\t\\t\\t\\t\\tthrows StandardException \\n\\t{ \\n\\t\\t\\/\\/ arguments list should have at least 2 arguments \\n\\t\\tif (SanityManager.DEBUG) \\n\\t\\t{\\n\\t\\t\\tSanityManager.ASSERT(argumentsList != null,\\n\\t\\t\\t\\t\\\"argumentsList expected to be non-null\\\");\\n\\t\\t\\tSanityManager.ASSERT(argumentsList.length &gt; 1,\\n\\t\\t\\t\\t\\\"argumentsList.length expected to be &gt; 1\\\");\\n\\t\\t}\\n\\n \\t\\t\\/* Walk the arguments list until we find a non-null value. Otherwise we will return null \\n\\t\\t *\\/ \\n\\t\\tint index; \\n\\t\\tfor (index = 0; index &lt; argumentsList.length; index++) \\n\\t\\t{ \\n\\t\\t\\tif (!(argumentsList &#91;index&#93; .isNull())) \\n\\t\\t\\t{\\n\\t\\t\\t\\treturnValue.setValue(argumentsList[index]);\\n\\t\\t\\t\\treturn returnValue;\\n\\t\\t\\t}\\n \\t\\t} \\n\\n \\t\\treturnValue.setToNull(); \\n\\t\\treturn returnValue; \\n\\n \\t} \\nIn our case, there will always be only 2 arguments to the coalesce function and the first non-null value will have us return with that value from the method and if for some reason, if both the values are null, then we will return null value. All this work will be done for joins using NATURAL JOINS or USING clause which can happen for inner joins, left outer join and right outer joins. eg of each of these kind of joins \\nCREATE TABLE derby4631_t1(x varchar(5)); \\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\'; \\nCREATE TABLE derby4631_t2(x varchar(5)); \\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\'; \\n\\n SELECT x FROM derby4631_t2 NATURAL INNER JOIN derby4631_t1; \\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1; \\nSELECT x FROM derby4631_t2 NATURAL LEFT OUTER JOIN derby4631_t1; \\nselect x from derby4631_t2 INNER JOIN derby4631_t1 USING ; \\nselect x from derby4631_t2 RIGHT OUTERJOIN derby4631_t1 USING ; \\nselect x from derby4631_t2 LEFT OUTERJOIN derby4631_t1 USING ; \\n\\n Currently, at execution time, Derby already does special handling to figure out if it is dealing with left outer join or right outer join and based on that, it determines whether it should pick up the value from the left column or the right column in the merged row(consisting of 2 columns, join column from left and join column from right) for each of the join columns. Instead of this, now we will let coalesce pick up  \\n1)the left column\'s value if it is not null. If it is null then \\n2)pick up the right column\'s value if it is not null. If it is null then simply return null. \\n\\n So, there is special code happening with both the existing Derby behavior and proposed Derby behavior but at this point, I am not sure how much more\\/same\\/less performance impact the new changes might cause. This is all in theory at this point. I have never worked on the code to replace a user supplied column from the select list with another kind of node at bind time, so if we do decide to go this path, I will be greatful to have community\'s knowledge on this kind of change. I will work on it my own too to figure out what needs to be done if we decide to go with this solution. \\n\\n ******************************************************** \\nMike\'s comment \\nI am assuming that the reason the code does not currently do an explicit coalesce already is an optimization, where it was assumed the implementation behavior would match the external behavior that the spec is describing,  \\n******************************************************** \\nYou are probably right Mike, but I am not sure if coalesce functionality was available in Derby when joins were implemented. It could very well be that we had coalesce available but we didn\'t use it for optimization reasons but I just wanted to raise that it might be a possibility that we never have had coalesce available.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13187453\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13187453&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13187453\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13187453_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13187453_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/12 05:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-17T05:09:13+0000\'\u003e17\\/Jan\\/12 05:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e*********************************************************************\u003cbr\\/\u003e\\nMike\'s comment\u003cbr\\/\u003e\\n(With solution 2) I think my most basic question is in a 1 to 1 million row join will you be adding 1 million new function calls for the coalesce, or is this somehow optimized after bind?\u003cbr\\/\u003e\\n*********************************************************************\u003c\\/p\u003e\\n\\n\u003cp\u003eYes, if the join column is part of the join query (say as SELECT list or GROUP BY, WHERE clause etc), then we will be calling it for every qualified row in join. At this point, I think if join column is only part of USING clause or used internally through NATURAL join to do equi join, then I do not think we will have to generate coalesce function for the join columns.\u003c\\/p\u003e\\n\\n\u003cp\u003eI debugged through the existing code more and found that to do equijoin for USING clause or NATURAL join, we generate merged row which includes the necessary join columns values from both sides (for USING clause, the necessary join column(s) will be what was specified with the USING clause, for NATURAL joins, it will be all the join columns). If we find that the join column is getting referenced outside of the equi join, then in order to get the join column\'s value, we do the mapping of the join column to the merged row\'s column (the mapping happens to either the left table\'s column value in merged row(if we are dealing with inner join or left outer join) or to the right table\'s column value(if we are dealing with right outer join)).\u003c\\/p\u003e\\n\\n\u003cp\u003eIf we go with Solution 1), then this mapping of join column to merge row will need to change so that we look at teft table\'s column value first. If it is null, then we should pick up the right table\'s column value. This should happen no matter if we are dealing with inner join, left outer join or right outer join with natural or uisng clause.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13187453_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13187453_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/12 05:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-17T05:09:13+0000\'\u003e17\\/Jan\\/12 05:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    ********************************************************************* \\nMike\'s comment \\n(With solution 2) I think my most basic question is in a 1 to 1 million row join will you be adding 1 million new function calls for the coalesce, or is this somehow optimized after bind? \\n********************************************************************* \\n\\n Yes, if the join column is part of the join query (say as SELECT list or GROUP BY, WHERE clause etc), then we will be calling it for every qualified row in join. At this point, I think if join column is only part of USING clause or used internally through NATURAL join to do equi join, then I do not think we will have to generate coalesce function for the join columns. \\n\\n I debugged through the existing code more and found that to do equijoin for USING clause or NATURAL join, we generate merged row which includes the necessary join columns values from both sides (for USING clause, the necessary join column(s) will be what was specified with the USING clause, for NATURAL joins, it will be all the join columns). If we find that the join column is getting referenced outside of the equi join, then in order to get the join column\'s value, we do the mapping of the join column to the merged row\'s column (the mapping happens to either the left table\'s column value in merged row(if we are dealing with inner join or left outer join) or to the right table\'s column value(if we are dealing with right outer join)). \\n\\n If we go with Solution 1), then this mapping of join column to merge row will need to change so that we look at teft table\'s column value first. If it is null, then we should pick up the right table\'s column value. This should happen no matter if we are dealing with inner join, left outer join or right outer join with natural or uisng clause.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13187459\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13187459&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13187459\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13187459_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13187459_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/12 05:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-17T05:30:46+0000\'\u003e17\\/Jan\\/12 05:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e********************************************************\u003cbr\\/\u003e\\nMike\'s comment\u003cbr\\/\u003e\\nAlso can you explicitly give some queries that currently work today that will not after your change, so that the compatibility impact of your solutions can be understood\\\".\u003cbr\\/\u003e\\n********************************************************\u003cbr\\/\u003e\\nFollowing queries will be fixed by both the solutions.\u003cbr\\/\u003e\\njava -Dij.exceptionTrace=true org.apache.derby.tools.ij\u003cbr\\/\u003e\\nconnect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\'; \u003cbr\\/\u003e\\nCREATE TABLE derby4631_t1(x varchar(5));\u003cbr\\/\u003e\\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\';\u003cbr\\/\u003e\\nCREATE TABLE derby4631_t2(x varchar(5));\u003cbr\\/\u003e\\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\';\u003cbr\\/\u003e\\nSELECT x, coalesce(derby4631_t2.x, derby4631_t1.x) FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1;\u003cbr\\/\u003e\\nselect x, coalesce(derby4631_t2.x, derby4631_t1.x) from derby4631_t2 RIGHT OUTER JOIN derby4631_t1 USING\u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/error.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e;\u003c\\/p\u003e\\n\\n\u003cp\u003eThe 2 select queries above return following today(which is incorrect)\u003cbr\\/\u003e\\nX    |2\u003cbr\\/\u003e\\n-----------\u003cbr\\/\u003e\\nA    |A\u003cbr\\/\u003e\\nB    |b\u003cbr\\/\u003e\\n2 rows selected\u003c\\/p\u003e\\n\\n\u003cp\u003eWith both the solutions proposed in this jira, they will return following(correct results)\u003cbr\\/\u003e\\nX    |2\u003cbr\\/\u003e\\n-----------\u003cbr\\/\u003e\\nA    |A\u003cbr\\/\u003e\\nb    |b\u003cbr\\/\u003e\\n2 rows selected\u003c\\/p\u003e\\n\\n\u003cp\u003eAdditionally, each of the 2 proposed solutions affect few other queries, but unfortunately not the same way.\u003c\\/p\u003e\\n\\n\u003cp\u003eHere is example query that will be affected by solution 1).\u003cbr\\/\u003e\\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1 group by derby4631_t1.x;\u003cbr\\/\u003e\\nSince join column x can have different results with solution 1(compared to existing behavior), the group by query below will result in different results too. This is kind of obvious but still wanted to point out how different results for join columns can affect join queries with group by\\/having clause etc\u003c\\/p\u003e\\n\\n\u003cp\u003eWith solution 2), the group by query above will fail because column derby4631_t1.x is not part of the SELECT columns list. With solution 2), join column x is not going to be assoicated with left table(in case of left outer join and inner joins) or right table(in case of right outer join). Because of that, the group by will result in compilation error but column derby4631_t1.x is not in the SELECT list.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13187459_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13187459_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/12 05:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-17T05:30:46+0000\'\u003e17\\/Jan\\/12 05:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    ******************************************************** \\nMike\'s comment \\nAlso can you explicitly give some queries that currently work today that will not after your change, so that the compatibility impact of your solutions can be understood\\\". \\n******************************************************** \\nFollowing queries will be fixed by both the solutions. \\njava -Dij.exceptionTrace=true org.apache.derby.tools.ij \\nconnect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\';  \\nCREATE TABLE derby4631_t1(x varchar(5)); \\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\'; \\nCREATE TABLE derby4631_t2(x varchar(5)); \\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\'; \\nSELECT x, coalesce(derby4631_t2.x, derby4631_t1.x) FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1; \\nselect x, coalesce(derby4631_t2.x, derby4631_t1.x) from derby4631_t2 RIGHT OUTER JOIN derby4631_t1 USING ; \\n\\n The 2 select queries above return following today(which is incorrect) \\nX    |2 \\n----------- \\nA    |A \\nB    |b \\n2 rows selected \\n\\n With both the solutions proposed in this jira, they will return following(correct results) \\nX    |2 \\n----------- \\nA    |A \\nb    |b \\n2 rows selected \\n\\n Additionally, each of the 2 proposed solutions affect few other queries, but unfortunately not the same way. \\n\\n Here is example query that will be affected by solution 1). \\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1 group by derby4631_t1.x; \\nSince join column x can have different results with solution 1(compared to existing behavior), the group by query below will result in different results too. This is kind of obvious but still wanted to point out how different results for join columns can affect join queries with group by\\/having clause etc \\n\\n With solution 2), the group by query above will fail because column derby4631_t1.x is not part of the SELECT columns list. With solution 2), join column x is not going to be assoicated with left table(in case of left outer join and inner joins) or right table(in case of right outer join). Because of that, the group by will result in compilation error but column derby4631_t1.x is not in the SELECT list.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13188739\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13188739&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13188739\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13188739_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13188739_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/12 22:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-18T22:10:22+0000\'\u003e18\\/Jan\\/12 22:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWith solution 1), we will need to know where the current code generation happens for join columns. Solution 1) requires that we change the code generation to following logic.\u003cbr\\/\u003e\\n1)if the left table\'s join column value is null then pick up the right table\'s join column\'s value. \u003cbr\\/\u003e\\n2)If the left table\'s join column value is non-null, then pick up that value \u003c\\/p\u003e\\n\\n\u003cp\u003eFollowing is what I found while looking for code generation logic for the join columns.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the bind phase of a query, we start looking at result columns and assigning virutal column numbers to them (impl.sql.compile.ResultColumn:virtualColumnId). These virtual column ids are used to find mapping for those columns into runtime resultset for the query.\u003c\\/p\u003e\\n\\n\u003cp\u003econnect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\'; \u003cbr\\/\u003e\\nCREATE TABLE derby4631_t1(x varchar(5)); \u003cbr\\/\u003e\\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\'; \u003cbr\\/\u003e\\nCREATE TABLE derby4631_t2(x varchar(5)); \u003cbr\\/\u003e\\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\'; \u003cbr\\/\u003e\\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1; \u003c\\/p\u003e\\n\\n\u003cp\u003eFor the NATURAL JOIN query above, an equi-join is generated which will be derby4631_t2.x = derby4631_t1.x. For this equi join, the join column x from left table(derby4631_t2) will get virtual column id of 1 and join column x from right table(derby4631_t1) will get virtual column id of 2. The column x in the SELECT query in Derby today gets associated with right table in case of RIGHT OUTER JOIN and hence that column\'s virtual column id is also 2. At the time of code generation, we use this information to decide what column position from the run time resultset would be used to get the values. Following is the stack trace of where the code generation for join column happens.\u003c\\/p\u003e\\n\\n\u003cp\u003eThread \u003cspan class=\\\"error\\\"\u003e&#91;main&#93;\u003c\\/span\u003e (Suspended (breakpoint at line 1421 in ProjectRestrictNode))\\t\u003cbr\\/\u003e\\n\\tProjectRestrictNode.generateMinion(ExpressionClassBuilder, MethodBuilder, boolean) line: 1421\\t\u003cbr\\/\u003e\\n\\tProjectRestrictNode.generate(ActivationClassBuilder, MethodBuilder) line: 1334\\t\u003cbr\\/\u003e\\n\\tScrollInsensitiveResultSetNode.generate(ActivationClassBuilder, MethodBuilder) line: 109\\t\u003cbr\\/\u003e\\n\\tCursorNode.generate(ActivationClassBuilder, MethodBuilder) line: 641\\t\u003cbr\\/\u003e\\n\\tCursorNode(StatementNode).generate(ByteArray) line: 345\\t\u003cbr\\/\u003e\\n\\tGenericStatement.prepMinion(LanguageConnectionContext, boolean, Object[], SchemaDescriptor, boolean) line: 518\\t\u003cbr\\/\u003e\\n\\tGenericStatement.prepare(LanguageConnectionContext, boolean) line: 97\\t\u003cbr\\/\u003e\\n\\tGenericLanguageConnectionContext.prepareInternalStatement(SchemaDescriptor, String, boolean, boolean) line: 1103\\t\u003cbr\\/\u003e\\n\\tEmbedStatement40(EmbedStatement).execute(String, boolean, boolean, int, int[], String[]) line: 610\\t\u003cbr\\/\u003e\\n\\tEmbedStatement40(EmbedStatement).execute(String) line: 559\\t\u003cbr\\/\u003e\\n\\tij.executeImmediate(String) line: 367\\t\u003cbr\\/\u003e\\n\\tutilMain.doCatch(String) line: 527\\t\u003cbr\\/\u003e\\n\\tutilMain.runScriptGuts() line: 369\\t\u003cbr\\/\u003e\\n\\tutilMain.go(LocalizedInput[], LocalizedOutput) line: 245\\t\u003cbr\\/\u003e\\n\\tMain.go(LocalizedInput, LocalizedOutput) line: 229\\t\u003cbr\\/\u003e\\n\\tMain.mainCore(String[], Main) line: 184\\t\u003cbr\\/\u003e\\n\\tMain.main(String[]) line: 75\\t\u003cbr\\/\u003e\\n\\tij.main(String[]) line: 59\\t\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13188739_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13188739_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/12 22:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-18T22:10:22+0000\'\u003e18\\/Jan\\/12 22:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    With solution 1), we will need to know where the current code generation happens for join columns. Solution 1) requires that we change the code generation to following logic. \\n1)if the left table\'s join column value is null then pick up the right table\'s join column\'s value.  \\n2)If the left table\'s join column value is non-null, then pick up that value  \\n\\n Following is what I found while looking for code generation logic for the join columns. \\n\\n In the bind phase of a query, we start looking at result columns and assigning virutal column numbers to them (impl.sql.compile.ResultColumn:virtualColumnId). These virtual column ids are used to find mapping for those columns into runtime resultset for the query. \\n\\n connect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\';  \\nCREATE TABLE derby4631_t1(x varchar(5));  \\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\';  \\nCREATE TABLE derby4631_t2(x varchar(5));  \\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\';  \\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1;  \\n\\n For the NATURAL JOIN query above, an equi-join is generated which will be derby4631_t2.x = derby4631_t1.x. For this equi join, the join column x from left table(derby4631_t2) will get virtual column id of 1 and join column x from right table(derby4631_t1) will get virtual column id of 2. The column x in the SELECT query in Derby today gets associated with right table in case of RIGHT OUTER JOIN and hence that column\'s virtual column id is also 2. At the time of code generation, we use this information to decide what column position from the run time resultset would be used to get the values. Following is the stack trace of where the code generation for join column happens. \\n\\n Thread  &#91;main&#93;  (Suspended (breakpoint at line 1421 in ProjectRestrictNode))\\t \\n\\tProjectRestrictNode.generateMinion(ExpressionClassBuilder, MethodBuilder, boolean) line: 1421\\t \\n\\tProjectRestrictNode.generate(ActivationClassBuilder, MethodBuilder) line: 1334\\t \\n\\tScrollInsensitiveResultSetNode.generate(ActivationClassBuilder, MethodBuilder) line: 109\\t \\n\\tCursorNode.generate(ActivationClassBuilder, MethodBuilder) line: 641\\t \\n\\tCursorNode(StatementNode).generate(ByteArray) line: 345\\t \\n\\tGenericStatement.prepMinion(LanguageConnectionContext, boolean, Object[], SchemaDescriptor, boolean) line: 518\\t \\n\\tGenericStatement.prepare(LanguageConnectionContext, boolean) line: 97\\t \\n\\tGenericLanguageConnectionContext.prepareInternalStatement(SchemaDescriptor, String, boolean, boolean) line: 1103\\t \\n\\tEmbedStatement40(EmbedStatement).execute(String, boolean, boolean, int, int[], String[]) line: 610\\t \\n\\tEmbedStatement40(EmbedStatement).execute(String) line: 559\\t \\n\\tij.executeImmediate(String) line: 367\\t \\n\\tutilMain.doCatch(String) line: 527\\t \\n\\tutilMain.runScriptGuts() line: 369\\t \\n\\tutilMain.go(LocalizedInput[], LocalizedOutput) line: 245\\t \\n\\tMain.go(LocalizedInput, LocalizedOutput) line: 229\\t \\n\\tMain.mainCore(String[], Main) line: 184\\t \\n\\tMain.main(String[]) line: 75\\t \\n\\tij.main(String[]) line: 59\\t              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13191280\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13191280&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13191280\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13191280_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13191280_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/12 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-23T17:32:15+0000\'\u003e23\\/Jan\\/12 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe code generation code in impl.sql.compile.ConditionalNode:generateExpression might be a good resource for us to make make the code generation changes for NATURAL JOIN\'s join column in the SELECT query. ConditionalNode generates \\\"if then else\\\" code which is similar to what solution 1) will require, ie if lefTablJoinColumn is null, then use rightTableJoinColumnValue else use leftTableJoinColumnValue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13191280_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13191280_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/12 17:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-23T17:32:15+0000\'\u003e23\\/Jan\\/12 17:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The code generation code in impl.sql.compile.ConditionalNode:generateExpression might be a good resource for us to make make the code generation changes for NATURAL JOIN\'s join column in the SELECT query. ConditionalNode generates \\\"if then else\\\" code which is similar to what solution 1) will require, ie if lefTablJoinColumn is null, then use rightTableJoinColumnValue else use leftTableJoinColumnValue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13191655\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13191655&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13191655\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13191655_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13191655_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/12 00:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-24T00:07:26+0000\'\u003e24\\/Jan\\/12 00:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI stepped through the ConditionalNode\'s code generation logic to see how \\\"if..then..else..\\\" code is generated. Based on that, I have following pseudo code for code generation for solution 1). The following psuedo code is for generating if(lefTablJoinColumnValue is null) then return rightTableJoinColumnValue else return lefTablJoinColumnValue. I have not done recent work in the code generation part and would appreciate feedback if the psuedo code looks incorrect. I will next work on trying to identify how to make this pseudo code kick in for ResultColumn code generation if we are dealing with join column.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\tString\\treceiverType = ClassName.DataValueDescriptor;\u003cbr\\/\u003e\\n\\t\\tString resultTypeName = \u003cbr\\/\u003e\\n\\t\\t\\tgetTypeCompiler(DataTypeDescriptor.getBuiltInDataTypeDescriptor(Types.BOOLEAN).getTypeId()).interfaceName();\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\t\\/\\/Following will generate if(lefTablJoinColumnValue is null)\u003cbr\\/\u003e\\n\\t\\t\\/\\/Then call generateExpression on left Table\'s column\u003cbr\\/\u003e\\n\\t\\tLeftTableColumn.generateExpression(acb, mb);\\t\\t\\t\u003cbr\\/\u003e\\n\\t\\tmb.cast(receiverType); \\/\\/ cast the method instance\u003cbr\\/\u003e\\n\\t\\tmb.callMethod(VMOpcode.INVOKEINTERFACE, (String) null,\u003cbr\\/\u003e\\n\\t\\t\\t\\\"isNullOp\\\",resultTypeName, 0);\u003cbr\\/\u003e\\n\\t\\tmb.cast(ClassName.BooleanDataValue);\u003cbr\\/\u003e\\n\\t\\tmb.push(true);\u003cbr\\/\u003e\\n\\t\\tmb.callMethod(VMOpcode.INVOKEINTERFACE, (String) null, \\\"equals\\\", \\\"boolean\\\", 1);\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\t\\/\\/Following will generate then part of the if condition by generating expression for rightTablJoinColumnValue\u003cbr\\/\u003e\\n\\t\\tmb.conditionalIf();\u003cbr\\/\u003e\\n\\t\\t  ((ValueNode) RightTableColumn.generateExpression(acb, mb);\u003cbr\\/\u003e\\n\\t\\t\\/\\/Following will generate else part of the if condition by generating expression for lefTablJoinColumnValue \u003cbr\\/\u003e\\n\\t\\tmb.startElseCode();\u003cbr\\/\u003e\\n\\t\\t  ((ValueNode) LeftTableColumn.generateExpression(acb, mb);\u003cbr\\/\u003e\\n\\t\\tmb.completeConditional();\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13191655_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13191655_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'24\\/Jan\\/12 00:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-24T00:07:26+0000\'\u003e24\\/Jan\\/12 00:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I stepped through the ConditionalNode\'s code generation logic to see how \\\"if..then..else..\\\" code is generated. Based on that, I have following pseudo code for code generation for solution 1). The following psuedo code is for generating if(lefTablJoinColumnValue is null) then return rightTableJoinColumnValue else return lefTablJoinColumnValue. I have not done recent work in the code generation part and would appreciate feedback if the psuedo code looks incorrect. I will next work on trying to identify how to make this pseudo code kick in for ResultColumn code generation if we are dealing with join column. \\n\\n \\t\\tString\\treceiverType = ClassName.DataValueDescriptor; \\n\\t\\tString resultTypeName =  \\n\\t\\t\\tgetTypeCompiler(DataTypeDescriptor.getBuiltInDataTypeDescriptor(Types.BOOLEAN).getTypeId()).interfaceName(); \\n\\n \\t\\t\\/\\/Following will generate if(lefTablJoinColumnValue is null) \\n\\t\\t\\/\\/Then call generateExpression on left Table\'s column \\n\\t\\tLeftTableColumn.generateExpression(acb, mb);\\t\\t\\t \\n\\t\\tmb.cast(receiverType); \\/\\/ cast the method instance \\n\\t\\tmb.callMethod(VMOpcode.INVOKEINTERFACE, (String) null, \\n\\t\\t\\t\\\"isNullOp\\\",resultTypeName, 0); \\n\\t\\tmb.cast(ClassName.BooleanDataValue); \\n\\t\\tmb.push(true); \\n\\t\\tmb.callMethod(VMOpcode.INVOKEINTERFACE, (String) null, \\\"equals\\\", \\\"boolean\\\", 1); \\n\\n \\t\\t\\/\\/Following will generate then part of the if condition by generating expression for rightTablJoinColumnValue \\n\\t\\tmb.conditionalIf(); \\n\\t\\t  ((ValueNode) RightTableColumn.generateExpression(acb, mb); \\n\\t\\t\\/\\/Following will generate else part of the if condition by generating expression for lefTablJoinColumnValue  \\n\\t\\tmb.startElseCode(); \\n\\t\\t  ((ValueNode) LeftTableColumn.generateExpression(acb, mb); \\n\\t\\tmb.completeConditional();              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13196694\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13196694&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13196694\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13196694_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13196694_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/12 04:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-31T04:39:10+0000\'\u003e31\\/Jan\\/12 04:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have a patch which is not ready for commit. It is a work in progress for the solution 1) proposed earlier in the jira which is as follows\u003cbr\\/\u003e\\nSolution 1) requires that we change the code generation to following logic. \u003cbr\\/\u003e\\n1)if the left table\'s join column value is null then pick up the right table\'s join column\'s value. \u003cbr\\/\u003e\\n2)If the left table\'s join column value is non-null, then pick up that value \u003cbr\\/\u003e\\nWe should have the solution 1) kickin for only RIGHT OUTER JOIN with USING clause or NATURAL JOIN. \u003cbr\\/\u003e\\nLEFT OUTER JOINs and INNER JOINs with USING clause or NATURAL JOIN will work correctly with current Derby logic which is to always pickup the left table\'s join column value. \u003cbr\\/\u003e\\nThis will work for LEFT OUTER JOINs and INNER JOINs with USING clause or NATURAL JOIN in both territory and non-territory based databases\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThe attached patch now makes the following query return the correct results\u003cbr\\/\u003e\\njava -Dij.exceptionTrace=true org.apache.derby.tools.ij \u003cbr\\/\u003e\\nconnect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\'; \u003cbr\\/\u003e\\nCREATE TABLE derby4631_t1(x varchar(5)); \u003cbr\\/\u003e\\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\'; \u003cbr\\/\u003e\\nCREATE TABLE derby4631_t2(x varchar(5)); \u003cbr\\/\u003e\\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\'; \u003cbr\\/\u003e\\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1; \u003cbr\\/\u003e\\nij&gt; X\u003c\\/p\u003e\\n\u003chr \\/\u003e\\n\u003cp\u003eA\u003cbr\\/\u003e\\nb\u003c\\/p\u003e\\n\\n\u003cp\u003eThe patch in it\'s current state is quite a bit of hacking because currently a ResultColumn does not need to know if it belongs to a Join ResultSet. But with solution 1), if ResultColumn is a join column part of a RIGHT OUTER JOIN with USING\\/NATURAL JOIN, then we want the join column\'s value to be determined using the solution 1) described above. For that, a ResultColumn will now need to know if it is part of a RIGHT OUTER JOIN with USING\\/NATURAL JOIN and it will need to know the column positions of the left table\'s\u003cbr\\/\u003e\\njoin column and rigt table\'s join colunm and it will need to know the resultset number of the resultset from which these join colunms\'s values will be extracted. \u003c\\/p\u003e\\n\\n\u003cp\u003eI get these values in this patch by putting extra information related to joins in ResultColunm at bind time and using them at code generation time.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis patch may break many other queries and I will continue to work on the patch to make it more stable but I wanted to put the general approach for this solution out sooner than later to see if community has any feedback on keeping the extra information on ResultColumn needed to implement solution 1). Although, all this additional information maintenance is pretty localized and not many files are impacted by this solution. \u003c\\/p\u003e\\n\\n\u003cp\u003eNext I plan to work on the patch more to make it stable and do more testing with it to see how it will work for the rest of the queries. \u003c\\/p\u003e\\n\\n\u003cp\u003eAlternative to this approach would be to introduce a new kind of compilation node which will be created during the bind phase(unlike most nodes which get created during parsing) when we find that the ResultColumn belongs to Join Node(which means we will still have to do the checking I do in this patch to see if ResultColumn is part of RIGHT OUTER JOIN with USING\\/NATURAL JOIN but at code generation time, \u003cbr\\/\u003e\\nwe can have the new node do this special code generation which is how we handle all the other special nodes like Conditional If node, Coalesce node etc). This approach of adding new node will require us to somehow fire the binding of the new node after replacing the ResultColumn which was created during the Parse time. At this point, I am unfamiliar with how to replace a node during the bind time with some other node and make it go through the binding step. Also, replacing the ResultColumn with a new node might also impact queries like following where I think order by column from right table is associated with the join column in the select list\u003cbr\\/\u003e\\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1 ORDER BY derby4631_t1.x; \u003c\\/p\u003e\\n\\n\\n\u003cp\u003eThe files changed by this patch are as follows\u003cbr\\/\u003e\\n$ svn stat -q\u003cbr\\/\u003e\\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ResultColumn.java\u003cbr\\/\u003e\\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ProjectRestrictNode.java\u003cbr\\/\u003e\\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\JoinNode.java\u003cbr\\/\u003e\\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ResultColumnList.java\u003cbr\\/\u003e\\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\HashTableNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eFollowing explains the changes in brief for the files touched by this patch\u003cbr\\/\u003e\\nResultColumn.java has additioanl columns to keep RIGHT OUTER JOIN with USING\\/NATURAL JOIN information. These\u003cbr\\/\u003e\\ncolumns will get updated during bind time if ResultColumn is part of such a join. In my next patch, I think I should be able to remove virtualColumnIdLeftTable and virtualColumnIdRightTable and just get that information\u003cbr\\/\u003e\\nfrom joinResultSet. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe signature of ResultColumnList.mapSourceColumns has changed and hence the changes in \u003cbr\\/\u003e\\nProjectRestrictNode.java and HashTableNode.java.\u003c\\/p\u003e\\n\\n\u003cp\u003eJoinNode.java - checks if it is RIGHT OUTER JOIN with USING\\/NATURAL JOIN and if yes, then it marks the right \u003cbr\\/\u003e\\ntable\'s join column\'s ResultColumn to recognize that.\u003c\\/p\u003e\\n\\n\u003cp\u003eResultColumnList.java in it\'s code generation logic checks if the ResultColumn is a join column for RIGHT OUTER JOIN with USING\\/NATURAL JOIN and if yes, then it generates the following code for that column\u003cbr\\/\u003e\\n1)if the left table\'s join column value is null then pick up the right table\'s join column\'s value. \u003cbr\\/\u003e\\n2)If the left table\'s join column value is non-null, then pick up that value \u003c\\/p\u003e\\n\\n\u003cp\u003eWill appreciate any feedback on this patch. I plan to work more on it to clean it up by looking at removing some of the redundant new informaiton in ResultColumn and also to check if there is a better place for code generation for a join column part of RIGHT OUTER JOIN with USING\\/NATURAL JOIN. I also anticipate existing queries failing with this current patch. I will work on identifying such queries. But I wanted to get feedback on general approach of this patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13196694_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13196694_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Jan\\/12 04:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-01-31T04:39:10+0000\'\u003e31\\/Jan\\/12 04:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have a patch which is not ready for commit. It is a work in progress for the solution 1) proposed earlier in the jira which is as follows \\nSolution 1) requires that we change the code generation to following logic.  \\n1)if the left table\'s join column value is null then pick up the right table\'s join column\'s value.  \\n2)If the left table\'s join column value is non-null, then pick up that value  \\nWe should have the solution 1) kickin for only RIGHT OUTER JOIN with USING clause or NATURAL JOIN.  \\nLEFT OUTER JOINs and INNER JOINs with USING clause or NATURAL JOIN will work correctly with current Derby logic which is to always pickup the left table\'s join column value.  \\nThis will work for LEFT OUTER JOINs and INNER JOINs with USING clause or NATURAL JOIN in both territory and non-territory based databases \\n\\n\\n The attached patch now makes the following query return the correct results \\njava -Dij.exceptionTrace=true org.apache.derby.tools.ij  \\nconnect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\';  \\nCREATE TABLE derby4631_t1(x varchar(5));  \\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\';  \\nCREATE TABLE derby4631_t2(x varchar(5));  \\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\';  \\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1;  \\nij&gt; X \\n \\n A \\nb \\n\\n The patch in it\'s current state is quite a bit of hacking because currently a ResultColumn does not need to know if it belongs to a Join ResultSet. But with solution 1), if ResultColumn is a join column part of a RIGHT OUTER JOIN with USING\\/NATURAL JOIN, then we want the join column\'s value to be determined using the solution 1) described above. For that, a ResultColumn will now need to know if it is part of a RIGHT OUTER JOIN with USING\\/NATURAL JOIN and it will need to know the column positions of the left table\'s \\njoin column and rigt table\'s join colunm and it will need to know the resultset number of the resultset from which these join colunms\'s values will be extracted.  \\n\\n I get these values in this patch by putting extra information related to joins in ResultColunm at bind time and using them at code generation time. \\n\\n This patch may break many other queries and I will continue to work on the patch to make it more stable but I wanted to put the general approach for this solution out sooner than later to see if community has any feedback on keeping the extra information on ResultColumn needed to implement solution 1). Although, all this additional information maintenance is pretty localized and not many files are impacted by this solution.  \\n\\n Next I plan to work on the patch more to make it stable and do more testing with it to see how it will work for the rest of the queries.  \\n\\n Alternative to this approach would be to introduce a new kind of compilation node which will be created during the bind phase(unlike most nodes which get created during parsing) when we find that the ResultColumn belongs to Join Node(which means we will still have to do the checking I do in this patch to see if ResultColumn is part of RIGHT OUTER JOIN with USING\\/NATURAL JOIN but at code generation time,  \\nwe can have the new node do this special code generation which is how we handle all the other special nodes like Conditional If node, Coalesce node etc). This approach of adding new node will require us to somehow fire the binding of the new node after replacing the ResultColumn which was created during the Parse time. At this point, I am unfamiliar with how to replace a node during the bind time with some other node and make it go through the binding step. Also, replacing the ResultColumn with a new node might also impact queries like following where I think order by column from right table is associated with the join column in the select list \\nSELECT x FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1 ORDER BY derby4631_t1.x;  \\n\\n\\n The files changed by this patch are as follows \\n$ svn stat -q \\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ResultColumn.java \\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ProjectRestrictNode.java \\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\JoinNode.java \\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ResultColumnList.java \\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\HashTableNode.java \\n\\n Following explains the changes in brief for the files touched by this patch \\nResultColumn.java has additioanl columns to keep RIGHT OUTER JOIN with USING\\/NATURAL JOIN information. These \\ncolumns will get updated during bind time if ResultColumn is part of such a join. In my next patch, I think I should be able to remove virtualColumnIdLeftTable and virtualColumnIdRightTable and just get that information \\nfrom joinResultSet.  \\n\\n The signature of ResultColumnList.mapSourceColumns has changed and hence the changes in  \\nProjectRestrictNode.java and HashTableNode.java. \\n\\n JoinNode.java - checks if it is RIGHT OUTER JOIN with USING\\/NATURAL JOIN and if yes, then it marks the right  \\ntable\'s join column\'s ResultColumn to recognize that. \\n\\n ResultColumnList.java in it\'s code generation logic checks if the ResultColumn is a join column for RIGHT OUTER JOIN with USING\\/NATURAL JOIN and if yes, then it generates the following code for that column \\n1)if the left table\'s join column value is null then pick up the right table\'s join column\'s value.  \\n2)If the left table\'s join column value is non-null, then pick up that value  \\n\\n Will appreciate any feedback on this patch. I plan to work more on it to clean it up by looking at removing some of the redundant new informaiton in ResultColumn and also to check if there is a better place for code generation for a join column part of RIGHT OUTER JOIN with USING\\/NATURAL JOIN. I also anticipate existing queries failing with this current patch. I will work on identifying such queries. But I wanted to get feedback on general approach of this patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13198885\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13198885&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13198885\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13198885_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13198885_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Feb\\/12 15:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-02T15:45:45+0000\'\u003e02\\/Feb\\/12 15:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI cam across atleast following 2 queries that both fail with NPE and I am looking into those,\u003c\\/p\u003e\\n\\n\u003cp\u003ecreate table t1(a int, b int, c int);\u003cbr\\/\u003e\\ncreate table t2(b int, c int, d int);\u003cbr\\/\u003e\\ncreate table t3(d int, e varchar(5), f int);\u003c\\/p\u003e\\n\\n\u003cp\u003einsert into t1 values (1,2,3),(2,3,4),(4,4,4);\u003cbr\\/\u003e\\ninsert into t2 values (1,2,3),(2,3,4),(5,5,5);\u003cbr\\/\u003e\\ninsert into t3 values \u003cbr\\/\u003e\\n                (2,\'abc\',3),(4,\'def\',5),(null,null,null);\u003c\\/p\u003e\\n\\n\u003cp\u003eselect c from t1 right join t2 using (c) \u003cbr\\/\u003e\\n                           order by t1.c;\u003cbr\\/\u003e\\nselect c,a+1 from t1 right join t2 using (c);\u003c\\/p\u003e\\n\\n\u003cp\u003eThe order by query is failing in generated code whereas the query with \\\"a+1\\\" is failing during bind time. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13198885_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13198885_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Feb\\/12 15:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-02T15:45:45+0000\'\u003e02\\/Feb\\/12 15:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I cam across atleast following 2 queries that both fail with NPE and I am looking into those, \\n\\n create table t1(a int, b int, c int); \\ncreate table t2(b int, c int, d int); \\ncreate table t3(d int, e varchar(5), f int); \\n\\n insert into t1 values (1,2,3),(2,3,4),(4,4,4); \\ninsert into t2 values (1,2,3),(2,3,4),(5,5,5); \\ninsert into t3 values  \\n                (2,\'abc\',3),(4,\'def\',5),(null,null,null); \\n\\n select c from t1 right join t2 using (c)  \\n                           order by t1.c; \\nselect c,a+1 from t1 right join t2 using (c); \\n\\n The order by query is failing in generated code whereas the query with \\\"a+1\\\" is failing during bind time.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13202037\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13202037&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13202037\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13202037_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13202037_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/12 03:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-07T03:09:40+0000\'\u003e07\\/Feb\\/12 03:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching an updated patch which is still not ready for commit but it fixes two queries listed earlier which were failing with 1st patch, \u003c\\/p\u003e\\n\\n\u003cp\u003eWith the query using column a+1 in the select query, I was looking for field name in ResultColumn which would be null for an expression like a+1. Instead, I need to use exposedName which will not be null for an expression. Instead, we internally generate a name for such columns.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith the query using order by, I found that in the new code for code generation, I need to let Derby do what it does today for ResultColumns with VirtualColumnNode underneath. Such a case can happen for order by query where we pull columns if needed for order by columns,\u003c\\/p\u003e\\n\\n\u003cp\u003eNext I plan to make the code changes less of a hack and then run the derbyall and junit suite to see if we catch any failures. Another thing to do would be to add more RIGHT OUTER JOIN test variations to see if the suggested code changes work fine with it. I will appreciate any suggestion on what kind of RIGHT OUTER JOIN tests can be added to test the functionality.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13202037_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13202037_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/12 03:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-07T03:09:40+0000\'\u003e07\\/Feb\\/12 03:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching an updated patch which is still not ready for commit but it fixes two queries listed earlier which were failing with 1st patch,  \\n\\n With the query using column a+1 in the select query, I was looking for field name in ResultColumn which would be null for an expression like a+1. Instead, I need to use exposedName which will not be null for an expression. Instead, we internally generate a name for such columns. \\n\\n With the query using order by, I found that in the new code for code generation, I need to let Derby do what it does today for ResultColumns with VirtualColumnNode underneath. Such a case can happen for order by query where we pull columns if needed for order by columns, \\n\\n Next I plan to make the code changes less of a hack and then run the derbyall and junit suite to see if we catch any failures. Another thing to do would be to add more RIGHT OUTER JOIN test variations to see if the suggested code changes work fine with it. I will appreciate any suggestion on what kind of RIGHT OUTER JOIN tests can be added to test the functionality.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13208166\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13208166&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13208166\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13208166_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13208166_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Feb\\/12 00:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-15T00:57:01+0000\'\u003e15\\/Feb\\/12 00:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4631\\\" title=\\\"Wrong join column returned by right outer join with NATURAL or USING and territory-based collation\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4631\\\"\u003e\u003cdel\u003eDERBY-4631\u003c\\/del\u003e\u003c\\/a\u003e Wrong join column returned by right outer join with NATURAL or USING and territory-based collation\u003c\\/p\u003e\\n\\n\u003cp\u003eI have a patch(DERBY_4631_patch3_diff.txt) which is ready for review and commit. To recap the issue, SQL:2003 says that the join columns in a natural join or in a named columns join should be added to the select list by coalescing the column from the left table with the column from the right table\u003c\\/p\u003e\\n\\n\u003cp\u003eDerby has it\'s on logic to retrieve the join column values. It always picks up join column\'s value from the left table when we are working with natural left outer join and it picks up the join column\'s value from the right table when we are working with natural right outer join. \u003c\\/p\u003e\\n\\n\u003cp\u003eBut this logic does not work for all cases for right outer join. The fix provided in this patch will pick the join column\'s value based on following logic(this logic mimics the functionality of COALESCE) \u003cbr\\/\u003e\\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value. \u003cbr\\/\u003e\\n2)If the left table\'s column value is non-null, then pick up that value \u003c\\/p\u003e\\n\\n\u003cp\u003eFollowing are the files impacted by this patch\u003cbr\\/\u003e\\n$ svn stat -q\u003cbr\\/\u003e\\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ResultColumn.java\u003cbr\\/\u003e\\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\JoinNode.java\u003cbr\\/\u003e\\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ResultColumnList.java\u003cbr\\/\u003e\\nM       java\\\\testing\\\\org\\\\apache\\\\derbyTesting\\\\functionTests\\\\tests\\\\lang\\\\CollationTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe changes are as follows\u003cbr\\/\u003e\\nTwo additional fields have been added to ResultColumn.java rightOuterJoinUsingClause  and joinResultSet \u003cbr\\/\u003e\\nrightOuterJoinUsingClause will be set to true for following 2 cases\u003cbr\\/\u003e\\n1)if this column represents the join column which is part of the SELECT list of a RIGHT OUTER JOIN with USING\\/NATURAL. eg\u003cbr\\/\u003e\\n select c from t1 right join t2 using (c)\u003cbr\\/\u003e\\nThis case is talking about column c as in \\\"select c\\\"\u003cbr\\/\u003e\\n2)if this column represents the join column from the right table for predicates generated for the USING\\/NATURAL of RIGHT OUTER JOIN eg\u003cbr\\/\u003e\\n  select c from t1 right join t2 using (c)\u003cbr\\/\u003e\\nFor \\\"using(c)\\\", a join predicate will be created as follows\u003cbr\\/\u003e\\n   t1.c=t2.c\u003cbr\\/\u003e\\nThis case is talking about column t2.c of the join predicate.\u003c\\/p\u003e\\n\\n\u003cp\u003ejoinResultSet will be non-null for the case 1) above. It will show the association of this result column to the join resultset created for the RIGHT OUTER JOIN with USING\\/NATURAL. This information along with rightOuterJoinUsingClause will be used during the code generation time.\u003cbr\\/\u003e\\nThese 2 additional fields will be used to identify ResultColumn which belong to a join column in the SELECT\u003cbr\\/\u003e\\nlist and identify ResultColumn which belong to right join column for the predicate generated for USING\\/NATURAL\u003cbr\\/\u003e\\ncolumns. Additionally, ResultColumn which belong to a join column in the SELECT list will also know about the\u003cbr\\/\u003e\\nJoinNode which they belong to. These 2 pieces of information will then be used at the code generation time\u003cbr\\/\u003e\\nfor join column for RIGHT OUTER JOIN with USING\\/NATURAL based on following logic\u003cbr\\/\u003e\\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value.\u003cbr\\/\u003e\\n2)If the left table\'s column value is non-null, then pick up that value \u003c\\/p\u003e\\n\\n\u003cp\u003eChanges in JoinNode.java just identifies the ResultColumn which represent the join column from the right table \u003cbr\\/\u003e\\nfor predicates generated for the USING\\/NATURAL of RIGHT OUTER JOIN eg\u003cbr\\/\u003e\\n     select c from t1 right join t2 using (c)\u003cbr\\/\u003e\\nFor \\\"using(c)\\\", a join predicate will be created, t1.c=t2.c. JoinNode changes will set \u003cbr\\/\u003e\\nResultColumn.rightOuterJoinUsingClause flag to true for t2.c\u003c\\/p\u003e\\n\\n\u003cp\u003eThe code generation changes have gone into ResultColumnList.java\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13208166_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13208166_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Feb\\/12 00:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-15T00:57:01+0000\'\u003e15\\/Feb\\/12 00:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                      DERBY-4631   Wrong join column returned by right outer join with NATURAL or USING and territory-based collation \\n\\n I have a patch(DERBY_4631_patch3_diff.txt) which is ready for review and commit. To recap the issue, SQL:2003 says that the join columns in a natural join or in a named columns join should be added to the select list by coalescing the column from the left table with the column from the right table \\n\\n Derby has it\'s on logic to retrieve the join column values. It always picks up join column\'s value from the left table when we are working with natural left outer join and it picks up the join column\'s value from the right table when we are working with natural right outer join.  \\n\\n But this logic does not work for all cases for right outer join. The fix provided in this patch will pick the join column\'s value based on following logic(this logic mimics the functionality of COALESCE)  \\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value.  \\n2)If the left table\'s column value is non-null, then pick up that value  \\n\\n Following are the files impacted by this patch \\n$ svn stat -q \\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ResultColumn.java \\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\JoinNode.java \\nM       java\\\\engine\\\\org\\\\apache\\\\derby\\\\impl\\\\sql\\\\compile\\\\ResultColumnList.java \\nM       java\\\\testing\\\\org\\\\apache\\\\derbyTesting\\\\functionTests\\\\tests\\\\lang\\\\CollationTest.java \\n\\n The changes are as follows \\nTwo additional fields have been added to ResultColumn.java rightOuterJoinUsingClause  and joinResultSet  \\nrightOuterJoinUsingClause will be set to true for following 2 cases \\n1)if this column represents the join column which is part of the SELECT list of a RIGHT OUTER JOIN with USING\\/NATURAL. eg \\n select c from t1 right join t2 using (c) \\nThis case is talking about column c as in \\\"select c\\\" \\n2)if this column represents the join column from the right table for predicates generated for the USING\\/NATURAL of RIGHT OUTER JOIN eg \\n  select c from t1 right join t2 using (c) \\nFor \\\"using(c)\\\", a join predicate will be created as follows \\n   t1.c=t2.c \\nThis case is talking about column t2.c of the join predicate. \\n\\n joinResultSet will be non-null for the case 1) above. It will show the association of this result column to the join resultset created for the RIGHT OUTER JOIN with USING\\/NATURAL. This information along with rightOuterJoinUsingClause will be used during the code generation time. \\nThese 2 additional fields will be used to identify ResultColumn which belong to a join column in the SELECT \\nlist and identify ResultColumn which belong to right join column for the predicate generated for USING\\/NATURAL \\ncolumns. Additionally, ResultColumn which belong to a join column in the SELECT list will also know about the \\nJoinNode which they belong to. These 2 pieces of information will then be used at the code generation time \\nfor join column for RIGHT OUTER JOIN with USING\\/NATURAL based on following logic \\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value. \\n2)If the left table\'s column value is non-null, then pick up that value  \\n\\n Changes in JoinNode.java just identifies the ResultColumn which represent the join column from the right table  \\nfor predicates generated for the USING\\/NATURAL of RIGHT OUTER JOIN eg \\n     select c from t1 right join t2 using (c) \\nFor \\\"using(c)\\\", a join predicate will be created, t1.c=t2.c. JoinNode changes will set  \\nResultColumn.rightOuterJoinUsingClause flag to true for t2.c \\n\\n The code generation changes have gone into ResultColumnList.java \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13212276\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13212276&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13212276\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13212276_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13212276_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/12 01:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-21T01:19:40+0000\'\u003e21\\/Feb\\/12 01:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have been working on writing more tests for JOINs to see nothing breaks with my changes. Unfortunately, the following script with the patch DERBY_4631_patch3_diff.txt patch gives  ERROR 38000: The exception \'java.lang.ArrayIndexOutOfBoundsException: Array index out of range: -2\' was thrown while evaluating an expression.\u003c\\/p\u003e\\n\\n\u003cp\u003econnect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\'; \u003cbr\\/\u003e\\nCREATE TABLE derby4631_t1(x varchar(5));\u003cbr\\/\u003e\\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\';\u003cbr\\/\u003e\\nCREATE TABLE derby4631_t2(x varchar(5));\u003cbr\\/\u003e\\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\';\u003cbr\\/\u003e\\nCREATE TABLE derby4631_t3(x1 varchar(5), y1 varchar(5));\u003cbr\\/\u003e\\nINSERT INTO derby4631_t3 \u003cbr\\/\u003e\\n        \\t\\tSELECT x, \u003cbr\\/\u003e\\n        \\t\\t\'a\'\u003cbr\\/\u003e\\n          \\t\\tFROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1;\u003c\\/p\u003e\\n\\n\u003cp\u003eI am debugging the patch to see what is causing the failure.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13212276_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13212276_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Feb\\/12 01:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-21T01:19:40+0000\'\u003e21\\/Feb\\/12 01:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have been working on writing more tests for JOINs to see nothing breaks with my changes. Unfortunately, the following script with the patch DERBY_4631_patch3_diff.txt patch gives  ERROR 38000: The exception \'java.lang.ArrayIndexOutOfBoundsException: Array index out of range: -2\' was thrown while evaluating an expression. \\n\\n connect \'jdbc:derby:db1;create=true;territory=en_US;collation=TERRITORY_BASED:SECONDARY\';  \\nCREATE TABLE derby4631_t1(x varchar(5)); \\nINSERT INTO derby4631_t1 VALUES \'A\',\'B\'; \\nCREATE TABLE derby4631_t2(x varchar(5)); \\nINSERT INTO derby4631_t2 VALUES \'b\',\'c\'; \\nCREATE TABLE derby4631_t3(x1 varchar(5), y1 varchar(5)); \\nINSERT INTO derby4631_t3  \\n        \\t\\tSELECT x,  \\n        \\t\\t\'a\' \\n          \\t\\tFROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1; \\n\\n I am debugging the patch to see what is causing the failure.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13214345\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13214345&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13214345\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13214345_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13214345_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/12 06:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-23T06:01:23+0000\'\u003e23\\/Feb\\/12 06:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI found the problem which was causing array index out of bound exception with the previous patch(patch 3).\u003c\\/p\u003e\\n\\n\u003cp\u003eThe query which was throwing the exception is as follows\u003cbr\\/\u003e\\nINSERT INTO derby4631_t3\u003cbr\\/\u003e\\n                       SELECT x,\u003cbr\\/\u003e\\n                       \'a\'\u003cbr\\/\u003e\\n                       FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1;\u003c\\/p\u003e\\n\\n\u003cp\u003eThe columns in derby4631_t3 are named x1 and y1. The source for column x1 in insert above is join column x. In the patch, when we look to determine if the column is a join column, I was looking at column\'s external name rather than it\'s base name. So instead of looking for column named \'x\', the earlier patch was looking for column \'x1\' to see if it is a join column. Because of that, it didn\'t identify join column x in the SELECT query. I have fixed one line of code in ResultColumnList to fix the problem. So, instead of \u003cbr\\/\u003e\\nif (joinColumn.getName().equals(rc.getName())) {\u003cbr\\/\u003e\\nit now checks\u003cbr\\/\u003e\\nif (joinColumn.getName().equals(rc.name)) {\u003c\\/p\u003e\\n\\n\u003cp\u003eI will run the derbyall and junit suite to make sure no existing tests fail with this new patch. I will also continue writing few more tests for JOINs.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13214345_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13214345_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/12 06:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-23T06:01:23+0000\'\u003e23\\/Feb\\/12 06:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I found the problem which was causing array index out of bound exception with the previous patch(patch 3). \\n\\n The query which was throwing the exception is as follows \\nINSERT INTO derby4631_t3 \\n                       SELECT x, \\n                       \'a\' \\n                       FROM derby4631_t2 NATURAL RIGHT OUTER JOIN derby4631_t1; \\n\\n The columns in derby4631_t3 are named x1 and y1. The source for column x1 in insert above is join column x. In the patch, when we look to determine if the column is a join column, I was looking at column\'s external name rather than it\'s base name. So instead of looking for column named \'x\', the earlier patch was looking for column \'x1\' to see if it is a join column. Because of that, it didn\'t identify join column x in the SELECT query. I have fixed one line of code in ResultColumnList to fix the problem. So, instead of  \\nif (joinColumn.getName().equals(rc.getName())) { \\nit now checks \\nif (joinColumn.getName().equals(rc.name)) { \\n\\n I will run the derbyall and junit suite to make sure no existing tests fail with this new patch. I will also continue writing few more tests for JOINs.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13214878\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13214878&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13214878\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13214878_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13214878_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/12 17:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-23T17:44:48+0000\'\u003e23\\/Feb\\/12 17:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003efrom review of latest patch.  \u003c\\/p\u003e\\n\\n\u003cp\u003eResultColumn:\u003cbr\\/\u003e\\nIt would be good to get a review of this with someone with more expertise in this area of the code.  The placement\u003cbr\\/\u003e\\nof the code at 672 just seems strange given how simple the logic use to be.  There is a lot of checking for instances\u003cbr\\/\u003e\\nhere, is there anyway to do this work in the affected nodes like HalfOuterJoinNode.\u003c\\/p\u003e\\n\\n\u003cp\u003eAt end of ResultColumn changes why do you check and set for one of the new fields and not the other?\u003cbr\\/\u003e\\n+       if (isRightOuterJoinUsingClause()) \u003c\\/p\u003e\\n{\\n+           newResultColumn.setRightOuterJoinUsingClause(true);\\n+       }\\n\u003cp\u003e+\u003cbr\\/\u003e\\n+       newResultColumn.setJoinResultset(getJoinResultSet());\u003cbr\\/\u003e\\n+\u003c\\/p\u003e\\n\\n\u003cp\u003eResultColumnList.java:\u003cbr\\/\u003e\\n1266: get rid of the commented out line of code that you fixed with patch 4\u003c\\/p\u003e\\n\\n\u003cp\u003ea comment in allExpressionsAreColumns explaining why returning false for isRightOuterJoinUsingClause would be useful.\u003c\\/p\u003e\\n\\n\u003cp\u003ein mapSourceColumns() what does the -1 for right outer join columns mean?  \u003c\\/p\u003e\\n\\n\u003cp\u003enits:\u003cbr\\/\u003e\\ntypo - search for \\\"righ \\\"\u003cbr\\/\u003e\\nwould be nice to have comments for setJoinResultset and setRightOuterJoinUsingClause, maybe something about what is expected\u003cbr\\/\u003e\\nto call this routine and in what circumstances.\u003cbr\\/\u003e\\nwould be nice if code was 80 columns, critical bug at line 672 of ResultColumn is unreadable at 80.\u003c\\/p\u003e\\n\\n\u003cp\u003eJoinNode change:\u003cbr\\/\u003e\\ninconsistent bracket use in if\\/then\\/else\u003c\\/p\u003e\\n\\n\u003cp\u003eResultColumnList:\u003cbr\\/\u003e\\nmore &gt; 80 lines\u003c\\/p\u003e\\n\\n\u003cp\u003eindentation looks wrong for this code, maybe editor got confused by commented out if block:\u003cbr\\/\u003e\\n                        if (joinColumn.getName().equals(rc.name)) \u003c\\/p\u003e\\n{\\n                                if (joinColumn.isRightOuterJoinUsingClause())\\n                                    virtualColumnIdRightTable = joinColumn.getVirtualColumnId();\\n                                else\\n                                    virtualColumnIdLeftTable = joinColumn.getVirtualColumnId();\\n                        } \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_13214878_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13214878_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Feb\\/12 17:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-23T17:44:48+0000\'\u003e23\\/Feb\\/12 17:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    from review of latest patch.   \\n\\n ResultColumn: \\nIt would be good to get a review of this with someone with more expertise in this area of the code.  The placement \\nof the code at 672 just seems strange given how simple the logic use to be.  There is a lot of checking for instances \\nhere, is there anyway to do this work in the affected nodes like HalfOuterJoinNode. \\n\\n At end of ResultColumn changes why do you check and set for one of the new fields and not the other? \\n+       if (isRightOuterJoinUsingClause())  \\n{\\n+           newResultColumn.setRightOuterJoinUsingClause(true);\\n+       }\\n + \\n+       newResultColumn.setJoinResultset(getJoinResultSet()); \\n+ \\n\\n ResultColumnList.java: \\n1266: get rid of the commented out line of code that you fixed with patch 4 \\n\\n a comment in allExpressionsAreColumns explaining why returning false for isRightOuterJoinUsingClause would be useful. \\n\\n in mapSourceColumns() what does the -1 for right outer join columns mean?   \\n\\n nits: \\ntypo - search for \\\"righ \\\" \\nwould be nice to have comments for setJoinResultset and setRightOuterJoinUsingClause, maybe something about what is expected \\nto call this routine and in what circumstances. \\nwould be nice if code was 80 columns, critical bug at line 672 of ResultColumn is unreadable at 80. \\n\\n JoinNode change: \\ninconsistent bracket use in if\\/then\\/else \\n\\n ResultColumnList: \\nmore &gt; 80 lines \\n\\n indentation looks wrong for this code, maybe editor got confused by commented out if block: \\n                        if (joinColumn.getName().equals(rc.name))  \\n{\\n                                if (joinColumn.isRightOuterJoinUsingClause())\\n                                    virtualColumnIdRightTable = joinColumn.getVirtualColumnId();\\n                                else\\n                                    virtualColumnIdLeftTable = joinColumn.getVirtualColumnId();\\n                        }             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13218807\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13218807&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13218807\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13218807_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13218807_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Feb\\/12 01:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-29T01:28:46+0000\'\u003e29\\/Feb\\/12 01:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mike,\u003c\\/p\u003e\\n\\n\u003cp\u003ethanks for reviewing patch 4. Here are some comments to your feedback(Attaching a new patch DERBY_4631_patch5_diff.txt which takes care of some of your comments.)\u003c\\/p\u003e\\n\\n\u003cp\u003e1)ResultColumn:\u003cbr\\/\u003e\\n********\u003cbr\\/\u003e\\nMike\'s comment - There is a lot of checking for instances here, is there anyway to do this work in the affected nodes like HalfOuterJoinNode?\u003cbr\\/\u003e\\n********\u003cbr\\/\u003e\\nYes, I am concerned about the instance checking too but I had researched into putting the code in HalfOuterJoinNode and found that HalfOuterJoinNode does not ever get to see the ResultColumns for the query and hence it has no way of marking those ResultColumns as join columns.\u003c\\/p\u003e\\n\\n\u003cp\u003e********\u003cbr\\/\u003e\\nMike\'s comment - At end of ResultColumn changes why do you check and set for one of the new fields and not the other?\u003cbr\\/\u003e\\n********\u003cbr\\/\u003e\\nI was trying to follow the existing code where the boolean kinds of fields are first checked and then set to true if the check returned true. rightOuterJoinUsingClause is a boolean field and hence I checked for the return value and then set the new object\'s value to true. But joinResultSet is a non-boolean field and hence I simply used it\'s value to set new object\'s joinResultSet value. For clarity, I will go ahead and replace following\u003cbr\\/\u003e\\n  \\t\\tnewResultColumn.setJoinResultset(getJoinResultSet());\u003cbr\\/\u003e\\nwith\u003cbr\\/\u003e\\n  \\t\\tif (getJoinResultSet() != null) \u003c\\/p\u003e\\n{\\n\\t  \\t\\tnewResultColumn.setJoinResultset(getJoinResultSet());\\n  \\t\\t}\\n\\n\u003cp\u003e2)ResultColumnList.java:\u003cbr\\/\u003e\\n********\u003cbr\\/\u003e\\nMike\'s comment - get rid of the commented out line of code that you fixed with patch 4\u003cbr\\/\u003e\\n********\u003cbr\\/\u003e\\nRemoved it. \u003c\\/p\u003e\\n\\n\u003cp\u003e********\u003cbr\\/\u003e\\nMike\'s comment - a comment in allExpressionsAreColumns explaining why returning false for isRightOuterJoinUsingClause would be useful. \u003cbr\\/\u003e\\n********\u003cbr\\/\u003e\\nAdded a comment.\u003c\\/p\u003e\\n\\n\u003cp\u003e********\u003cbr\\/\u003e\\nMike\'s comment - in mapSourceColumns() what does the -1 for right outer join columns mean? \u003cbr\\/\u003e\\n********\u003cbr\\/\u003e\\nallExpressionsAreColumns() uses the -1 value set by mapSourceColumns() to decide if there are columns which require special consideration during code generation. When mapSourceColumns() assigns -1 to right outer join column, allExpressionsAreColumns() will return false. This will allow Derby to later generate code equivalent to COASLECE for right outer join columns(this code generation happens in newly added code in ResultColumnList.generateCore.)\u003c\\/p\u003e\\n\\n\u003cp\u003e********\u003cbr\\/\u003e\\nMike\'s comment - typo - search for \\\"righ \\\" \u003cbr\\/\u003e\\n********\u003cbr\\/\u003e\\nFixed it.\u003c\\/p\u003e\\n\\n\u003cp\u003e********\u003cbr\\/\u003e\\nMike\'s comment - would be nice to have comments for setJoinResultset and setRightOuterJoinUsingClause, maybe something about what is expected to call this routine and in what circumstances. \u003cbr\\/\u003e\\n********\u003cbr\\/\u003e\\nAdded comments around for both those methods.\u003c\\/p\u003e\\n\\n\u003cp\u003eAdditionally, took care of some indentation problems with the code.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13218807_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13218807_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Feb\\/12 01:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-29T01:28:46+0000\'\u003e29\\/Feb\\/12 01:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mike, \\n\\n thanks for reviewing patch 4. Here are some comments to your feedback(Attaching a new patch DERBY_4631_patch5_diff.txt which takes care of some of your comments.) \\n\\n 1)ResultColumn: \\n******** \\nMike\'s comment - There is a lot of checking for instances here, is there anyway to do this work in the affected nodes like HalfOuterJoinNode? \\n******** \\nYes, I am concerned about the instance checking too but I had researched into putting the code in HalfOuterJoinNode and found that HalfOuterJoinNode does not ever get to see the ResultColumns for the query and hence it has no way of marking those ResultColumns as join columns. \\n\\n ******** \\nMike\'s comment - At end of ResultColumn changes why do you check and set for one of the new fields and not the other? \\n******** \\nI was trying to follow the existing code where the boolean kinds of fields are first checked and then set to true if the check returned true. rightOuterJoinUsingClause is a boolean field and hence I checked for the return value and then set the new object\'s value to true. But joinResultSet is a non-boolean field and hence I simply used it\'s value to set new object\'s joinResultSet value. For clarity, I will go ahead and replace following \\n  \\t\\tnewResultColumn.setJoinResultset(getJoinResultSet()); \\nwith \\n  \\t\\tif (getJoinResultSet() != null)  \\n{\\n\\t  \\t\\tnewResultColumn.setJoinResultset(getJoinResultSet());\\n  \\t\\t}\\n\\n 2)ResultColumnList.java: \\n******** \\nMike\'s comment - get rid of the commented out line of code that you fixed with patch 4 \\n******** \\nRemoved it.  \\n\\n ******** \\nMike\'s comment - a comment in allExpressionsAreColumns explaining why returning false for isRightOuterJoinUsingClause would be useful.  \\n******** \\nAdded a comment. \\n\\n ******** \\nMike\'s comment - in mapSourceColumns() what does the -1 for right outer join columns mean?  \\n******** \\nallExpressionsAreColumns() uses the -1 value set by mapSourceColumns() to decide if there are columns which require special consideration during code generation. When mapSourceColumns() assigns -1 to right outer join column, allExpressionsAreColumns() will return false. This will allow Derby to later generate code equivalent to COASLECE for right outer join columns(this code generation happens in newly added code in ResultColumnList.generateCore.) \\n\\n ******** \\nMike\'s comment - typo - search for \\\"righ \\\"  \\n******** \\nFixed it. \\n\\n ******** \\nMike\'s comment - would be nice to have comments for setJoinResultset and setRightOuterJoinUsingClause, maybe something about what is expected to call this routine and in what circumstances.  \\n******** \\nAdded comments around for both those methods. \\n\\n Additionally, took care of some indentation problems with the code.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13221108\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13221108&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13221108\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13221108_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13221108_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Mar\\/12 18:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-02T18:04:14+0000\'\u003e02\\/Mar\\/12 18:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have the final patch which is ready for commit. I have added couple more tests \u003cbr\\/\u003e\\n1)have left or right table empty before doing joins \u003cbr\\/\u003e\\n2)Do arithmetic operation on join columns.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will commit it in a week\'s time but will appreciate any feedback on the patch before that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13221108_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13221108_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Mar\\/12 18:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-02T18:04:14+0000\'\u003e02\\/Mar\\/12 18:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have the final patch which is ready for commit. I have added couple more tests  \\n1)have left or right table empty before doing joins  \\n2)Do arithmetic operation on join columns. \\n\\n I will commit it in a week\'s time but will appreciate any feedback on the patch before that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13230601\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13230601&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13230601\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13230601_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13230601_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Mar\\/12 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-15T21:55:26+0000\'\u003e15\\/Mar\\/12 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching the release note for the issue\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13230601_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13230601_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Mar\\/12 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-15T21:55:26+0000\'\u003e15\\/Mar\\/12 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching the release note for the issue              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13231656\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13231656&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13231656\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13231656_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13231656_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/12 21:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-16T21:40:51+0000\'\u003e16\\/Mar\\/12 21:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am attaching another patch (DERBY_4631_patch7_diff.txt) which is very similar to previous patch(DERBY_4631_patch6_diff.txt) except that I do not have instance of checks in ResultColumn to find JoinNodes from the FromList. Instead, I have added a new method isJoinColumnForRightOuterJoin which will allow HalfOuterJoinNode to see if the ResultColumn is a join column for a right outer join with using\\/natural clause. This makes the code more readable and removes the instanceof checkings. Please let me know if there are any comments to this patch. Thanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13231656_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13231656_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Mar\\/12 21:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-03-16T21:40:51+0000\'\u003e16\\/Mar\\/12 21:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am attaching another patch (DERBY_4631_patch7_diff.txt) which is very similar to previous patch(DERBY_4631_patch6_diff.txt) except that I do not have instance of checks in ResultColumn to find JoinNodes from the FromList. Instead, I have added a new method isJoinColumnForRightOuterJoin which will allow HalfOuterJoinNode to see if the ResultColumn is a join column for a right outer join with using\\/natural clause. This makes the code more readable and removes the instanceof checkings. Please let me know if there are any comments to this patch. Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13280490\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13280490&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13280490\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13280490_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13280490_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/May\\/12 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-21T21:03:46+0000\'\u003e21\\/May\\/12 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted(revision 1341204) changes for this jira with following comments\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4631\\\" title=\\\"Wrong join column returned by right outer join with NATURAL or USING and territory-based collation\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4631\\\"\u003e\u003cdel\u003eDERBY-4631\u003c\\/del\u003e\u003c\\/a\u003e Wrong join column returned by right outer join with NATURAL or USING and territory-based collation \u003c\\/p\u003e\\n\\n\u003cp\u003eTo recap this issue, SQL:2003 says that the join columns in a natural join or in a named columns join should be added to the select list by coalescing the column from the left table with the column from the right table \u003c\\/p\u003e\\n\\n\u003cp\u003eDerby has it\'s on logic to retrieve the join column values. It always picks up join column\'s value from the left table when we are working with natural left outer join and it picks up the join column\'s value from the right table when we are working with natural right outer join. \u003c\\/p\u003e\\n\\n\u003cp\u003eBut this logic does not work for all cases for right outer join. The fix provided in this patch will pick the join column\'s value based on following logic(this logic mimics the functionality of COALESCE) \u003cbr\\/\u003e\\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value. \u003cbr\\/\u003e\\n2)If the left table\'s column value is non-null, then pick up that value \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13280490_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13280490_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/May\\/12 21:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-05-21T21:03:46+0000\'\u003e21\\/May\\/12 21:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed(revision 1341204) changes for this jira with following comments \\n  DERBY-4631   Wrong join column returned by right outer join with NATURAL or USING and territory-based collation  \\n\\n To recap this issue, SQL:2003 says that the join columns in a natural join or in a named columns join should be added to the select list by coalescing the column from the left table with the column from the right table  \\n\\n Derby has it\'s on logic to retrieve the join column values. It always picks up join column\'s value from the left table when we are working with natural left outer join and it picks up the join column\'s value from the right table when we are working with natural right outer join.  \\n\\n But this logic does not work for all cases for right outer join. The fix provided in this patch will pick the join column\'s value based on following logic(this logic mimics the functionality of COALESCE)  \\n1)if the left table\'s column value is null then pick up the right table\'s column\'s value.  \\n2)If the left table\'s column value is non-null, then pick up that value               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13453375\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13453375&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13453375\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13453375_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13453375_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Sep\\/12 20:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-11T20:27:48+0000\'\u003e11\\/Sep\\/12 20:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eReopen for backport analysis. Temporarily assign to yourself if you backport and then reassign to Mamta before closing.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_13453375_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13453375_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Sep\\/12 20:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-11T20:27:48+0000\'\u003e11\\/Sep\\/12 20:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Reopen for backport analysis. Temporarily assign to yourself if you backport and then reassign to Mamta before closing.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13455145\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13455145&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13455145\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13455145_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13455145_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Sep\\/12 19:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-13T19:02:12+0000\'\u003e13\\/Sep\\/12 19:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI will work on backporting this issue\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13455145_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13455145_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Sep\\/12 19:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-13T19:02:12+0000\'\u003e13\\/Sep\\/12 19:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I will work on backporting this issue              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13455567\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13455567&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13455567\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13455567_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13455567_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 04:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T04:30:38+0000\'\u003e14\\/Sep\\/12 04:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBackported to 10.8 with revision 1384638\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13455567_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13455567_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 04:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T04:30:38+0000\'\u003e14\\/Sep\\/12 04:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Backported to 10.8 with revision 1384638              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13455861\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13455861&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13455861\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13455861_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13455861_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 15:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T15:22:44+0000\'\u003e14\\/Sep\\/12 15:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBackported to 10.7 with revision 1384814\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13455861_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13455861_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 15:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T15:22:44+0000\'\u003e14\\/Sep\\/12 15:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Backported to 10.7 with revision 1384814              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13456185\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13456185&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13456185\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13456185_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13456185_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T21:55:45+0000\'\u003e14\\/Sep\\/12 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBackported to 10.6 with revision 1384940.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13456185_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13456185_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 21:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T21:55:45+0000\'\u003e14\\/Sep\\/12 21:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Backported to 10.6 with revision 1384940.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13456193\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13456193&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13456193\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13456193_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13456193_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 22:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T22:20:20+0000\'\u003e14\\/Sep\\/12 22:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNo further backporting required because NATURAL\\/USING clause on join queries was added in 10.6\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13456193_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13456193_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 22:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T22:20:20+0000\'\u003e14\\/Sep\\/12 22:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    No further backporting required because NATURAL\\/USING clause on join queries was added in 10.6              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13456194\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13456194&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13456194\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13456194_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13456194_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 22:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T22:20:42+0000\'\u003e14\\/Sep\\/12 22:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBackport finished\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13456194_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13456194_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Sep\\/12 22:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-09-14T22:20:42+0000\'\u003e14\\/Sep\\/12 22:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Backport finished              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13488934\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4631?focusedCommentId=13488934&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13488934\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13488934_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13488934_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/12 19:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-01T19:01:34+0000\'\u003e01\\/Nov\\/12 19:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching release note\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13488934_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13488934_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/12 19:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-11-01T19:01:34+0000\'\u003e01\\/Nov\\/12 19:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching release note              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520239937392"> 
    <input type="hidden" title="jira.request.server.time" value="294"> 
    <input type="hidden" title="jira.request.id" value="532x94408394x3"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="6"> 
    <input type="hidden" title="db.reads.time.in.ms" value="52"> 
    <input type="hidden" title="db.conns.time.in.ms" value="57"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 532x94408394x3
	          REQUEST TIMESTAMP : [05/Mar/2018:08:52:17 +0000]
	               REQUEST TIME : 0.2940
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 6

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=23, elapsedTotal=52695126, elapsedMin=388436, elapsedMax=17262138, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=27, elapsedTotal=57993192, elapsedMin=406265, elapsedMax=17294799, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>