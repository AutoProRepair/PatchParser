<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|12324887436cd5a9faf2ae5a94eea49f2db9658e|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"2eb6c13cdb62ae\"";
WRM._unparsedData["project-id"]="12310110";
WRM._unparsedData["project-key"]="\"LUCENE\"";
WRM._unparsedData["project-name"]="\"Lucene - Core\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310110";
WRM._unparsedData["projectKey"]="\"LUCENE\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="LUCENE-6660"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[LUCENE-6660] Assertion fails for ToParentBlockJoinQuery$BlockJoinScorer.nextDoc - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[LUCENE-6660] Assertion fails for ToParentBlockJoinQuery$BlockJoinScorer.nextDoc - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/LUCENE" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-6660">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310110" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Lucene - Core'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310110&amp;avatarId=10061"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/LUCENE">Lucene - Core</a></li>
                 <li><a class="issue-link" data-issue-key="LUCENE-6660" href="/jira/browse/LUCENE-6660" id="key-val" rel="12842914">LUCENE-6660</a></li>
                </ol>
                <h1 id="summary-val">Assertion fails for ToParentBlockJoinQuery$BlockJoinScorer.nextDoc</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-6660"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/LUCENE-6660/LUCENE-6660.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/LUCENE-6660/LUCENE-6660.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/LUCENE-6660/LUCENE-6660.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/LUCENE-6660/LUCENE-6660.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="5.2.1 Bugfix release after 5.2">5.2.1</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+component+%3D+%22core%2Fsearch%22" title="core/search issues with search code">core/search</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12842914-value">None</span> 
                   </div> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap"> 
                   <strong class="name">Environment:</strong> 
                   <div id="environment-val" class="value"> 
                    <p>Running Solr 5.2.1 on Windows x64<br> java version "1.7.0_51"<br> Java(TM) SE Runtime Environment (build 1.7.0_51-b13)<br> Java HotSpot(TM) Client VM (build 24.51-b03, mixed mode, sharing)</p> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310250" class="item"> 
                     <div class="wrap"> 
                      <strong title="Flags" class="name">Flags:</strong> 
                      <div id="customfield_12310250-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310250-field"> 
                        <span>Important</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>After I enable assertion with "-ea:org.apache..." I got the stack trace below. I checked that the parent filter only match parent documents and the child filter only match child documents. Field "id" is unique.</p> 
                  <p>16:55:06,269 ERROR <span class="error">[org.apache.solr.servlet.SolrDispatchFilter]</span> (http-127.0.0.1/127.0.0.1:8080-1) null:java.lang.RuntimeException: java.lang.AssertionError<br> at org.apache.solr.servlet.HttpSolrCall.sendError(HttpSolrCall.java:593)<br> at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:465)<br> at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:227)<br> at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:196)<br> at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246)<br> at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)<br> at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)<br> at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:149)<br> at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:169)<br> at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:145)<br> at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:97)<br> at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:559)<br> at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:102)<br> at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:336)<br> at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)<br> at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:653)<br> at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:920)<br> at java.lang.Thread.run(Thread.java:744)<br> Caused by: java.lang.AssertionError<br> at org.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinScorer.nextDoc(ToParentBlockJoinQuery.java:278)<br> at org.apache.lucene.search.Weight$DefaultBulkScorer.scoreAll(Weight.java:204)<br> at org.apache.lucene.search.Weight$DefaultBulkScorer.score(Weight.java:176)<br> at org.apache.lucene.search.BulkScorer.score(BulkScorer.java:35)<br> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:771)<br> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:485)<br> at org.apache.solr.search.SolrIndexSearcher.buildAndRunCollectorChain(SolrIndexSearcher.java:202)<br> at org.apache.solr.search.SolrIndexSearcher.getDocListNC(SolrIndexSearcher.java:1666)<br> at org.apache.solr.search.SolrIndexSearcher.getDocListC(SolrIndexSearcher.java:1485)<br> at org.apache.solr.search.SolrIndexSearcher.search(SolrIndexSearcher.java:561)<br> at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:518)<br> at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:255)<br> at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:143)<br> at org.apache.solr.core.SolrCore.execute(SolrCore.java:2064)<br> at org.apache.solr.servlet.HttpSolrCall.execute(HttpSolrCall.java:654)<br> at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:450)<br> ... 16 more</p> 
                  <p>Without assertions enabled:<br> 17:21:39,008 ERROR <span class="error">[org.apache.solr.servlet.SolrDispatchFilter]</span> (http-127.0.0.1/127.0.0.1:8080-1) null:java.lang.IllegalStateException: child query must only match non-parent docs, but parent docID=2147483647 matched childScorer=class org.apache.lucene.search.ConjunctionScorer<br> at org.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinScorer.nextDoc(ToParentBlockJoinQuery.java:334)</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/LUCENE-6660?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/LUCENE-6660?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/LUCENE-6660?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/LUCENE-6660?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12743946" data-issue-id="12842914" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12743946/index.zip" draggable="true" data-downloadurl="application/zip:index.zip:https://issues.apache.org/jira/secure/attachment/12743946/index.zip"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-zip" title="Zip Archive"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12743946/index.zip" title="Latest  07/Jul/15 11:57 - Christian Danninger" draggable="true" data-downloadurl="application/zip:index.zip:https://issues.apache.org/jira/secure/attachment/12743946/index.zip">index.zip</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-07-07T11:57:37.510Z">07/Jul/15 11:57</time>
                   </dd>
                   <dd class="attachment-size">
                    40 kB
                   </dd>
                   <dd class="attachment-author">
                    Christian Danninger
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12744955" data-issue-id="12842914" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12744955/LUCENE-6660.patch" draggable="true" data-downloadurl="text/plain:LUCENE-6660.patch:https://issues.apache.org/jira/secure/attachment/12744955/LUCENE-6660.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12744955/LUCENE-6660.patch" title="Latest  12/Jul/15 19:49 - Mikhail Khludnev" draggable="true" data-downloadurl="text/plain:LUCENE-6660.patch:https://issues.apache.org/jira/secure/attachment/12744955/LUCENE-6660.patch">LUCENE-6660.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2015-07-12T19:49:16.826Z">12/Jul/15 19:49</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Mikhail Khludnev
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is part of">
                   is part of
                  </dt> 
                  <dd id="internal-12540363_12310010"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype" width="16" height="16" title="New Feature - A new feature of the product, which has yet to be developed." alt="New Feature - A new feature of the product, which has yet to be developed."> <span title="SOLR-3076: Solr(Cloud) should support block joins"> <a href="/jira/browse/SOLR-3076" data-issue-key="SOLR-3076" class="issue-link link-title resolution">SOLR-3076</a> <span class="link-summary">Solr(Cloud) should support block joins</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mkhludnev" rel="mkhludnev" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mikhail Khludnev&quot;,&quot;emailAddress&quot;:&quot;gedel@yandex.ru&quot;,&quot;username&quot;:&quot;mkhludnev&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mkhludnev"></span></span> Mikhail Khludnev </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_cdanningerCV" rel="cdanningerCV" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Christian Danninger&quot;,&quot;emailAddress&quot;:&quot;christian.danninger@comvel.de&quot;,&quot;username&quot;:&quot;cdanningerCV&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="cdanningerCV"></span></span> Christian Danninger </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">4</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="06/Jul/15 15:23"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2015-07-06T15:23:10+0000">06/Jul/15 15:23</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="06/Nov/15 18:57"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2015-11-06T18:57:49+0000">06/Nov/15 18:57</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="06/Nov/15 18:57"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2015-11-06T18:57:48+0000">06/Nov/15 18:57</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-6660?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/LUCENE-6660?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-14615198\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14615198&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14615198\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_14615198_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14615198_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/15 15:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-06T15:47:33+0000\'\u003e06\\/Jul\\/15 15:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eLooking at the failed assertion, it suggests that you have orphan children documents in your index. Children and parents are supposed to be indexed in a contiguous block with the parent in the end, and ToParentBlockJoinQuery found a matching child document so that none of the documents after this child doc are a parent document.\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe you indexed some blocks of documents without a parent, or deleted a parent document without deleting all its children at the same time?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_14615198_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14615198_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jul\\/15 15:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-06T15:47:33+0000\'\u003e06\\/Jul\\/15 15:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Looking at the failed assertion, it suggests that you have orphan children documents in your index. Children and parents are supposed to be indexed in a contiguous block with the parent in the end, and ToParentBlockJoinQuery found a matching child document so that none of the documents after this child doc are a parent document. \\n\\n Maybe you indexed some blocks of documents without a parent, or deleted a parent document without deleting all its children at the same time?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14616398\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14616398&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14616398\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cdanningerCV\\\" id=\\\"commentauthor_14616398_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cdanningerCV\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cdanningerCV\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christian Danninger\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616398_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T09:12:46+0000\'\u003e07\\/Jul\\/15 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI double checked it. And everything should be fine with the index.\u003cbr\\/\u003e\\nThe index is fresh without deletions and child documents are added to parents by the API:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\\tSolrInputDocument child = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e SolrInputDocument();\\n\\tchild.addField(\u003cspan class=\\\"code-quote\\\"\u003e\\\"parent\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e);\\n        child.addField(\u003cspan class=\\\"code-quote\\\"\u003e\\\"id\\\"\u003c\\/span\u003e, ++childId);\\n        parent.addChildDocument(child);\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI wrote an algorithm to check the index:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\u003cspan class=\\\"code-keyword\\\"\u003epackage\u003c\\/span\u003e test;\\n\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e java.io.IOException;\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e java.nio.file.Path;\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e java.nio.file.Paths;\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e java.util.Collections;\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e java.util.HashSet;\\n\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e org.apache.lucene.document.Document;\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e org.apache.lucene.index.DirectoryReader;\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e org.apache.lucene.store.FSDirectory;\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e org.apache.lucene.store.MMapDirectory;\\n\u003cspan class=\\\"code-keyword\\\"\u003eimport\u003c\\/span\u003e org.apache.lucene.store.NRTCachingDirectory;\\n\\n\u003cspan class=\\\"code-keyword\\\"\u003epublic\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003eclass \u003c\\/span\u003eParentChild {\\n\\t\\n\\t\u003cspan class=\\\"code-keyword\\\"\u003epublic\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003estatic\u003c\\/span\u003e void main(\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e[] args) \u003cspan class=\\\"code-keyword\\\"\u003ethrows\u003c\\/span\u003e IOException {\\n\\n\\t\\tHashSet&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt; unique = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e HashSet&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt;();\\n\\t\\tHashSet&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt; parents = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e HashSet&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt;();\\n\\t\\tHashSet&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt; children = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e HashSet&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt;();\\n\\t\\tHashSet&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt; roots = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e HashSet&lt;\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e&gt;();\\n\\t\\t\\n\\t\\tPath path = Paths.get(args[0]);\\n\\t\\t\\n\\t\\tFSDirectory directory = MMapDirectory.open(path);\\n\\t\\tNRTCachingDirectory nrtCachingDirectory = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e NRTCachingDirectory(directory, 48.0, 48.0);\\n\\t\\tDirectoryReader reader = DirectoryReader.open(nrtCachingDirectory);\\n\\t\\t\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eboolean\u003c\\/span\u003e wasChild = \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e;\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e parentId = \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e;\\n\\t\\t\\n\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e (\u003cspan class=\\\"code-object\\\"\u003eint\u003c\\/span\u003e docID=0; docID&lt;reader.maxDoc(); docID++) {\\n\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003efinal\u003c\\/span\u003e Document document = reader.document(docID);\\n\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003efinal\u003c\\/span\u003e \u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e parent = document.get(\u003cspan class=\\\"code-quote\\\"\u003e\\\"parent\\\"\u003c\\/span\u003e);\\n\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003efinal\u003c\\/span\u003e \u003cspan class=\\\"code-object\\\"\u003eboolean\u003c\\/span\u003e isChild = parent.equals(\u003cspan class=\\\"code-quote\\\"\u003e\\\"F\\\"\u003c\\/span\u003e);\\n\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003efinal\u003c\\/span\u003e \u003cspan class=\\\"code-object\\\"\u003eboolean\u003c\\/span\u003e isParent = parent.equals(\u003cspan class=\\\"code-quote\\\"\u003e\\\"T\\\"\u003c\\/span\u003e);\\n\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003efinal\u003c\\/span\u003e \u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e root = document.get(\u003cspan class=\\\"code-quote\\\"\u003e\\\"_root_\\\"\u003c\\/span\u003e);\\n\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003efinal\u003c\\/span\u003e \u003cspan class=\\\"code-object\\\"\u003eString\u003c\\/span\u003e id = document.get(\u003cspan class=\\\"code-quote\\\"\u003e\\\"id\\\"\u003c\\/span\u003e);\\n\\t\\t\\t\\n\\t\\t\\t\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ unique id ?\\n\u003c\\/span\u003e\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (unique.contains(id)) {\\n\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003ethrow\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e IllegalArgumentException();\\n\\t\\t\\t}\\n\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (root != \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e) {\\n\\t\\t\\t\\troots.add(root);\\n\\t\\t\\t}\\n\\t\\t\\t\\n\\t\\t\\t\\n\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (isChild) {\\n\\t\\t\\t\\t\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ parent after its children?\\n\u003c\\/span\u003e\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (parents.contains(root)) {\\n\\t\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003ethrow\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e IllegalArgumentException();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ correct parent ?\\n\u003c\\/span\u003e\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (parentId != \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e &amp;&amp; !parentId.equals(root)) {\\n\\t\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003ethrow\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e IllegalArgumentException();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tchildren.add(id);\\n\\t\\t\\t\\tparentId = root;\\n\\t\\t\\t} \u003cspan class=\\\"code-keyword\\\"\u003eelse\u003c\\/span\u003e {\\n\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (wasChild) {\\n\\t\\t\\t\\t\\t\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ children belong to parent ?\\n\u003c\\/span\u003e\\t\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (!id.equals(parentId)) {\\n\\t\\t\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003ethrow\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e IllegalArgumentException();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ ids matching ?\\n\u003c\\/span\u003e\\t\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (!id.equals(root)) {\\n\\t\\t\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003ethrow\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e IllegalArgumentException();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} \u003cspan class=\\\"code-keyword\\\"\u003eelse\u003c\\/span\u003e {\\n\\t\\t\\t\\t\\t\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ parent without child\\n\u003c\\/span\u003e\\t\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (root != \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e) {\\n\\t\\t\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003ethrow\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e IllegalArgumentException();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (!isParent) {\\n\\t\\t\\t\\t\\t\u003cspan class=\\\"code-keyword\\\"\u003ethrow\u003c\\/span\u003e \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e IllegalArgumentException();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tparents.add(id);\\n\\t\\t\\t\\tparentId = \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e;\\n\\t\\t\\t}\\n\\t\\t\\tunique.add(id);\\n\\n\\t\\t\\twasChild = isChild;\\n\\t\\t}\\n\\t\\t\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(\u003cspan class=\\\"code-quote\\\"\u003e\\\"docs:     \\\"\u003c\\/span\u003e + reader.maxDoc());\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(\u003cspan class=\\\"code-quote\\\"\u003e\\\"total:    \\\"\u003c\\/span\u003e + unique.size());\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(\u003cspan class=\\\"code-quote\\\"\u003e\\\"children: \\\"\u003c\\/span\u003e + children.size());\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(\u003cspan class=\\\"code-quote\\\"\u003e\\\"parents:  \\\"\u003c\\/span\u003e + parents.size());\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(\u003cspan class=\\\"code-quote\\\"\u003e\\\"roots:    \\\"\u003c\\/span\u003e + roots.size());\\n\\t\\t\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(Collections.disjoint(children, parents));\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(Collections.disjoint(children, roots));\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(parents.containsAll(roots));\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(reader.hasDeletions());\\n\\t\\t\u003cspan class=\\\"code-object\\\"\u003eSystem\u003c\\/span\u003e.out.println(reader.isCurrent());\\n\\t\\t\\n\\t\\treader.close();\\n\\t\\tdirectory.close();\\n\\t\\t\\n\\t}\\n\\t\\n}\\n\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003eOutput:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003edocs:     573397\\ntotal:    573397\\nchildren: 485949\\nparents:  87448\\nroots:    40342\\n\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e\\n\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e\\n\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e\\n\u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e\\n\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cdanningerCV\\\" id=\\\"commentauthor_14616398_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cdanningerCV\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cdanningerCV\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christian Danninger\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616398_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 09:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T09:12:46+0000\'\u003e07\\/Jul\\/15 09:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I double checked it. And everything should be fine with the index. \\nThe index is fresh without deletions and child documents are added to parents by the API: \\n  \\n \\tSolrInputDocument child =  new  SolrInputDocument();\\n\\tchild.addField( \\\"parent\\\" ,  false );\\n        child.addField( \\\"id\\\" , ++childId);\\n        parent.addChildDocument(child);\\n \\n  \\n\\n I wrote an algorithm to check the index: \\n  \\n  package  test;\\n\\n import  java.io.IOException;\\n import  java.nio.file.Path;\\n import  java.nio.file.Paths;\\n import  java.util.Collections;\\n import  java.util.HashSet;\\n\\n import  org.apache.lucene.document.Document;\\n import  org.apache.lucene.index.DirectoryReader;\\n import  org.apache.lucene.store.FSDirectory;\\n import  org.apache.lucene.store.MMapDirectory;\\n import  org.apache.lucene.store.NRTCachingDirectory;\\n\\n public   class  ParentChild {\\n\\t\\n\\t public   static  void main( String [] args)  throws  IOException {\\n\\n\\t\\tHashSet&lt; String &gt; unique =  new  HashSet&lt; String &gt;();\\n\\t\\tHashSet&lt; String &gt; parents =  new  HashSet&lt; String &gt;();\\n\\t\\tHashSet&lt; String &gt; children =  new  HashSet&lt; String &gt;();\\n\\t\\tHashSet&lt; String &gt; roots =  new  HashSet&lt; String &gt;();\\n\\t\\t\\n\\t\\tPath path = Paths.get(args[0]);\\n\\t\\t\\n\\t\\tFSDirectory directory = MMapDirectory.open(path);\\n\\t\\tNRTCachingDirectory nrtCachingDirectory =  new  NRTCachingDirectory(directory, 48.0, 48.0);\\n\\t\\tDirectoryReader reader = DirectoryReader.open(nrtCachingDirectory);\\n\\t\\t\\n\\t\\t boolean  wasChild =  false ;\\n\\t\\t String  parentId =  null ;\\n\\t\\t\\n\\t\\t for  ( int  docID=0; docID&lt;reader.maxDoc(); docID++) {\\n\\t\\t\\t final  Document document = reader.document(docID);\\n\\t\\t\\t final   String  parent = document.get( \\\"parent\\\" );\\n\\t\\t\\t final   boolean  isChild = parent.equals( \\\"F\\\" );\\n\\t\\t\\t final   boolean  isParent = parent.equals( \\\"T\\\" );\\n\\t\\t\\t final   String  root = document.get( \\\"_root_\\\" );\\n\\t\\t\\t final   String  id = document.get( \\\"id\\\" );\\n\\t\\t\\t\\n\\t\\t\\t \\/\\/ unique id ?\\n \\t\\t\\t if  (unique.contains(id)) {\\n\\t\\t\\t\\t throw   new  IllegalArgumentException();\\n\\t\\t\\t}\\n\\t\\t\\t if  (root !=  null ) {\\n\\t\\t\\t\\troots.add(root);\\n\\t\\t\\t}\\n\\t\\t\\t\\n\\t\\t\\t\\n\\t\\t\\t if  (isChild) {\\n\\t\\t\\t\\t \\/\\/ parent after its children?\\n \\t\\t\\t\\t if  (parents.contains(root)) {\\n\\t\\t\\t\\t\\t throw   new  IllegalArgumentException();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t \\/\\/ correct parent ?\\n \\t\\t\\t\\t if  (parentId !=  null  &amp;&amp; !parentId.equals(root)) {\\n\\t\\t\\t\\t\\t throw   new  IllegalArgumentException();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tchildren.add(id);\\n\\t\\t\\t\\tparentId = root;\\n\\t\\t\\t}  else  {\\n\\t\\t\\t\\t if  (wasChild) {\\n\\t\\t\\t\\t\\t \\/\\/ children belong to parent ?\\n \\t\\t\\t\\t\\t if  (!id.equals(parentId)) {\\n\\t\\t\\t\\t\\t\\t throw   new  IllegalArgumentException();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t \\/\\/ ids matching ?\\n \\t\\t\\t\\t\\t if  (!id.equals(root)) {\\n\\t\\t\\t\\t\\t\\t throw   new  IllegalArgumentException();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}  else  {\\n\\t\\t\\t\\t\\t \\/\\/ parent without child\\n \\t\\t\\t\\t\\t if  (root !=  null ) {\\n\\t\\t\\t\\t\\t\\t throw   new  IllegalArgumentException();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t if  (!isParent) {\\n\\t\\t\\t\\t\\t throw   new  IllegalArgumentException();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tparents.add(id);\\n\\t\\t\\t\\tparentId =  null ;\\n\\t\\t\\t}\\n\\t\\t\\tunique.add(id);\\n\\n\\t\\t\\twasChild = isChild;\\n\\t\\t}\\n\\t\\t\\n\\t\\t System .out.println( \\\"docs:     \\\"  + reader.maxDoc());\\n\\t\\t System .out.println( \\\"total:    \\\"  + unique.size());\\n\\t\\t System .out.println( \\\"children: \\\"  + children.size());\\n\\t\\t System .out.println( \\\"parents:  \\\"  + parents.size());\\n\\t\\t System .out.println( \\\"roots:    \\\"  + roots.size());\\n\\t\\t\\n\\t\\t System .out.println(Collections.disjoint(children, parents));\\n\\t\\t System .out.println(Collections.disjoint(children, roots));\\n\\t\\t System .out.println(parents.containsAll(roots));\\n\\t\\t System .out.println(reader.hasDeletions());\\n\\t\\t System .out.println(reader.isCurrent());\\n\\t\\t\\n\\t\\treader.close();\\n\\t\\tdirectory.close();\\n\\t\\t\\n\\t}\\n\\t\\n}\\n\\n \\n  \\n Output: \\n  \\n docs:     573397\\ntotal:    573397\\nchildren: 485949\\nparents:  87448\\nroots:    40342\\n true \\n true \\n true \\n false \\n true \\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14616400\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14616400&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14616400\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_14616400_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616400_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 09:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T09:15:39+0000\'\u003e07\\/Jul\\/15 09:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWould \u003ctt\u003eCheckJoinIndex\u003c\\/tt\u003e (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-6589\\\" title=\\\"Less leniency in lucene\\/join\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-6589\\\"\u003e\u003cdel\u003eLUCENE-6589\u003c\\/del\u003e\u003c\\/a\u003e) catch this?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_14616400_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616400_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 09:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T09:15:39+0000\'\u003e07\\/Jul\\/15 09:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Would  CheckJoinIndex  (  LUCENE-6589  ) catch this?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14616500\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14616500&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14616500\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14616500_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616500_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T10:41:43+0000\'\u003e07\\/Jul\\/15 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003epls post request parameters here, then show result of intersection:  +childQuery +parentFilter\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14616500_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616500_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 10:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T10:41:43+0000\'\u003e07\\/Jul\\/15 10:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    pls post request parameters here, then show result of intersection:  +childQuery +parentFilter              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14616564\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14616564&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14616564\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_14616564_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616564_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 11:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T11:43:48+0000\'\u003e07\\/Jul\\/15 11:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eWould CheckJoinIndex (\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-6589\\\" title=\\\"Less leniency in lucene\\/join\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-6589\\\"\u003e\u003cdel\u003eLUCENE-6589\u003c\\/del\u003e\u003c\\/a\u003e) catch this?\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eYes, it\'s exactly its purpose. But in that case it looks like Christian\'s index might be sane so I\'m looking forward to seeing the queries to better understand what happened.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_14616564_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616564_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 11:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T11:43:48+0000\'\u003e07\\/Jul\\/15 11:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Would CheckJoinIndex (  LUCENE-6589  ) catch this?  \\n\\n Yes, it\'s exactly its purpose. But in that case it looks like Christian\'s index might be sane so I\'m looking forward to seeing the queries to better understand what happened.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14616575\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14616575&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14616575\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cdanningerCV\\\" id=\\\"commentauthor_14616575_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cdanningerCV\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cdanningerCV\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christian Danninger\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616575_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 11:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T11:57:37+0000\'\u003e07\\/Jul\\/15 11:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003esmall index\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cdanningerCV\\\" id=\\\"commentauthor_14616575_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cdanningerCV\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cdanningerCV\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christian Danninger\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616575_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 11:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T11:57:37+0000\'\u003e07\\/Jul\\/15 11:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    small index              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14616589\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14616589&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14616589\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_14616589_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616589_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 12:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T12:17:19+0000\'\u003e07\\/Jul\\/15 12:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eChristian, can you also share what child query and parent filter you used?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_14616589_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616589_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 12:17\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T12:17:19+0000\'\u003e07\\/Jul\\/15 12:17\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Christian, can you also share what child query and parent filter you used?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14616613\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14616613&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14616613\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cdanningerCV\\\" id=\\\"commentauthor_14616613_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cdanningerCV\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cdanningerCV\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christian Danninger\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616613_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 12:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T12:43:50+0000\'\u003e07\\/Jul\\/15 12:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCheckJoinIndex dosn\'t found an issue of my attached index as well as the original one.\u003cbr\\/\u003e\\nJust try the Solr query: \u003c\\/p\u003e\\n{!parent which=\'region_id: 33\'}\\n\u003cp\u003e  duration:3 or use the code below.\u003cbr\\/\u003e\\nregion_id belongs to parent documents, duration to child documents only.\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\\t\\tPath path = Paths.get(args[0]);\\n\\t\\t\\n\\t\\tFSDirectory directory = MMapDirectory.open(path);\\n\\t\\tNRTCachingDirectory nrtCachingDirectory = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e NRTCachingDirectory(directory, 48.0, 48.0);\\n\\t\\tDirectoryReader reader = DirectoryReader.open(nrtCachingDirectory);\\n\\t\\t\\n\\t\\t{\\n\\t\\t\\tIndexSearcher indexSearcher = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e IndexSearcher(reader);\\n\\t\\t\\tBitDocIdSetCachingWrapperFilter parentFilter = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e BitDocIdSetCachingWrapperFilter( \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e QueryWrapperFilter(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e TermQuery(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e Term(\u003cspan class=\\\"code-quote\\\"\u003e\\\"region_id\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e BytesRef(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e \u003cspan class=\\\"code-object\\\"\u003ebyte\u003c\\/span\u003e[]{0x60, 0x8, 0, 0, 0, 0x21})))));\\n\\t\\t\\t\\t\\n\\t\\t\\tQuery p = \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e ToParentBlockJoinQuery(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e TermQuery(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e Term(\u003cspan class=\\\"code-quote\\\"\u003e\\\"duration\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e BytesRef(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e \u003cspan class=\\\"code-object\\\"\u003ebyte\u003c\\/span\u003e[]{0x60, 0x8, 0, 0, 0, 0x3}))), \\n\\t\\t\\t\\t\\tparentFilter,\\n\\t\\t\\t\\t\\tScoreMode.None);\\n\\t\\t\\t\\n\\t\\t\\tTopDocs search = indexSearcher.search(p, 1000);\\n\\t\\t\\tScoreDoc scoreDoc = search.scoreDocs[0];\\n\\t\\t}\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eOutcome:\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eException in thread \u003cspan class=\\\"code-quote\\\"\u003e\\\"main\\\"\u003c\\/span\u003e java.lang.IllegalStateException: child query must only match non-parent docs, but parent docID=2147483647 matched childScorer=\u003cspan class=\\\"code-keyword\\\"\u003eclass \u003c\\/span\u003eorg.apache.lucene.search.TermScorer\\n\\tat org.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinScorer.nextDoc(ToParentBlockJoinQuery.java:334)\\n\\tat org.apache.lucene.search.Weight$DefaultBulkScorer.scoreAll(Weight.java:204)\\n\\tat org.apache.lucene.search.Weight$DefaultBulkScorer.score(Weight.java:176)\\n\\tat org.apache.lucene.search.BulkScorer.score(BulkScorer.java:35)\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:771)\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:485)\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:694)\\n\\tat org.apache.lucene.search.IndexSearcher.searchAfter(IndexSearcher.java:410)\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:439)\\n\\tat test.ParentChild.main(ParentChild.java:60)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cdanningerCV\\\" id=\\\"commentauthor_14616613_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cdanningerCV\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cdanningerCV\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christian Danninger\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616613_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 12:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T12:43:50+0000\'\u003e07\\/Jul\\/15 12:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    CheckJoinIndex dosn\'t found an issue of my attached index as well as the original one. \\nJust try the Solr query:  \\n{!parent which=\'region_id: 33\'}\\n   duration:3 or use the code below. \\nregion_id belongs to parent documents, duration to child documents only. \\n\\n  \\n \\t\\tPath path = Paths.get(args[0]);\\n\\t\\t\\n\\t\\tFSDirectory directory = MMapDirectory.open(path);\\n\\t\\tNRTCachingDirectory nrtCachingDirectory =  new  NRTCachingDirectory(directory, 48.0, 48.0);\\n\\t\\tDirectoryReader reader = DirectoryReader.open(nrtCachingDirectory);\\n\\t\\t\\n\\t\\t{\\n\\t\\t\\tIndexSearcher indexSearcher =  new  IndexSearcher(reader);\\n\\t\\t\\tBitDocIdSetCachingWrapperFilter parentFilter =  new  BitDocIdSetCachingWrapperFilter(  new  QueryWrapperFilter( new  TermQuery( new  Term( \\\"region_id\\\" ,  new  BytesRef( new   byte []{0x60, 0x8, 0, 0, 0, 0x21})))));\\n\\t\\t\\t\\t\\n\\t\\t\\tQuery p =  new  ToParentBlockJoinQuery( new  TermQuery( new  Term( \\\"duration\\\" ,  new  BytesRef( new   byte []{0x60, 0x8, 0, 0, 0, 0x3}))), \\n\\t\\t\\t\\t\\tparentFilter,\\n\\t\\t\\t\\t\\tScoreMode.None);\\n\\t\\t\\t\\n\\t\\t\\tTopDocs search = indexSearcher.search(p, 1000);\\n\\t\\t\\tScoreDoc scoreDoc = search.scoreDocs[0];\\n\\t\\t}\\n \\n  \\n\\n Outcome: \\n  \\n Exception in thread  \\\"main\\\"  java.lang.IllegalStateException: child query must only match non-parent docs, but parent docID=2147483647 matched childScorer= class  org.apache.lucene.search.TermScorer\\n\\tat org.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinScorer.nextDoc(ToParentBlockJoinQuery.java:334)\\n\\tat org.apache.lucene.search.Weight$DefaultBulkScorer.scoreAll(Weight.java:204)\\n\\tat org.apache.lucene.search.Weight$DefaultBulkScorer.score(Weight.java:176)\\n\\tat org.apache.lucene.search.BulkScorer.score(BulkScorer.java:35)\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:771)\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:485)\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:694)\\n\\tat org.apache.lucene.search.IndexSearcher.searchAfter(IndexSearcher.java:410)\\n\\tat org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:439)\\n\\tat test.ParentChild.main(ParentChild.java:60)\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14616681\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14616681&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14616681\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14616681_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616681_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 13:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T13:23:09+0000\'\u003e07\\/Jul\\/15 13:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ewould you mind to make sure that intersection yields no results? \u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e BooleanQuery(){{\\nadd(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e TermQuery(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e Term(\u003cspan class=\\\"code-quote\\\"\u003e\\\"region_id\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e BytesRef(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e \u003cspan class=\\\"code-object\\\"\u003ebyte\u003c\\/span\u003e[]{0x60, 0x8, 0, 0, 0, 0x21})),MUST);\\nadd(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e TermQuery(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e Term(\u003cspan class=\\\"code-quote\\\"\u003e\\\"duration\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e BytesRef(\u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e \u003cspan class=\\\"code-object\\\"\u003ebyte\u003c\\/span\u003e[]{0x60, 0x8, 0, 0, 0, 0x3})));\\n}};\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n{!parent which=\'region_id: 33\'}\\n\u003cp\u003e  seems like no.2 mistake with bjq. I might get it wrong, but the regular approach is \u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eq=+region_id:33 +{!parent which=\u003cspan class=\\\"code-quote\\\"\u003e\'parent:T\'\u003c\\/span\u003e}duration:3\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \\n\\n\u003cp\u003enote \u003ca href=\\\"http:\\/\\/blog.griddynamics.com\\/2013\\/09\\/solr-block-join-support.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/blog.griddynamics.com\\/2013\\/09\\/solr-block-join-support.html\u003c\\/a\u003e \u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e Local parameter \\u2018which\\u2019 provides a filter which distinguishes parent documents from children ones. Keep in mind two important things about it:\u003c\\/p\u003e\\n\\n\u003cp\u003e    it should not match any children documents;\u003cbr\\/\u003e\\n    it should always match all parent documents.\u003c\\/p\u003e\\n\u003c\\/blockquote\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14616681_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616681_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 13:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T13:23:09+0000\'\u003e07\\/Jul\\/15 13:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    would you mind to make sure that intersection yields no results?  \\n  \\n  new  BooleanQuery(){{\\nadd( new  TermQuery( new  Term( \\\"region_id\\\" ,  new  BytesRef( new   byte []{0x60, 0x8, 0, 0, 0, 0x21})),MUST);\\nadd( new  TermQuery( new  Term( \\\"duration\\\" ,  new  BytesRef( new   byte []{0x60, 0x8, 0, 0, 0, 0x3})));\\n}};\\n \\n  \\n\\n{!parent which=\'region_id: 33\'}\\n   seems like no.2 mistake with bjq. I might get it wrong, but the regular approach is  \\n  \\n q=+region_id:33 +{!parent which= \'parent:T\' }duration:3\\n \\n   \\n\\n note  http:\\/\\/blog.griddynamics.com\\/2013\\/09\\/solr-block-join-support.html   \\n \\n  Local parameter \\u2018which\\u2019 provides a filter which distinguishes parent documents from children ones. Keep in mind two important things about it: \\n\\n     it should not match any children documents; \\n    it should always match all parent documents. \\n              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14616685\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14616685&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14616685\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_14616685_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616685_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 13:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T13:25:30+0000\'\u003e07\\/Jul\\/15 13:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI think you are right Mikhail, I was going to make the same comment.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jpountz\\\" id=\\\"commentauthor_14616685_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jpountz\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jpountz\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Adrien Grand\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14616685_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jul\\/15 13:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-07T13:25:30+0000\'\u003e07\\/Jul\\/15 13:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I think you are right Mikhail, I was going to make the same comment.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14618156\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14618156&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14618156\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cdanningerCV\\\" id=\\\"commentauthor_14618156_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cdanningerCV\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cdanningerCV\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christian Danninger\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14618156_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/15 07:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-08T07:45:41+0000\'\u003e08\\/Jul\\/15 07:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYou are definitly right. Thanks a lot. \u003cbr\\/\u003e\\nMaybe you can modify the error message a bit to be more precise and to cover these case too.\u003cbr\\/\u003e\\nI will make a comment here: \u003ca href=\\\"https:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Other+Parsers#OtherParsers-BlockJoinQueryParsers\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Other+Parsers#OtherParsers-BlockJoinQueryParsers\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eBtw. no intersection for the boolean query above.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cdanningerCV\\\" id=\\\"commentauthor_14618156_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cdanningerCV\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cdanningerCV\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Christian Danninger\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14618156_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Jul\\/15 07:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-08T07:45:41+0000\'\u003e08\\/Jul\\/15 07:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    You are definitly right. Thanks a lot.  \\nMaybe you can modify the error message a bit to be more precise and to cover these case too. \\nI will make a comment here:  https:\\/\\/cwiki.apache.org\\/confluence\\/display\\/solr\\/Other+Parsers#OtherParsers-BlockJoinQueryParsers  \\n\\n Btw. no intersection for the boolean query above.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14620395\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14620395&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14620395\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14620395_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14620395_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/15 12:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-09T12:08:08+0000\'\u003e09\\/Jul\\/15 12:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003egot it. It\'s worth put it as:\u003c\\/p\u003e\\n\u003cblockquote\u003e\u003cp\u003ewhen user supplies a wrong parent filter ie. it doesn\'t match the last doc in a segment (ignoring acceptedDocs), BJS should throw exception suggestion to verify the filter.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI bake the patch with test coverage soon. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=cdanningerCV\\\" class=\\\"user-hover\\\" rel=\\\"cdanningerCV\\\"\u003eChristian Danninger\u003c\\/a\u003e thanks for raising it, I didn\'t realize this trap. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14620395_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14620395_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Jul\\/15 12:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-09T12:08:08+0000\'\u003e09\\/Jul\\/15 12:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    got it. It\'s worth put it as: \\n  when user supplies a wrong parent filter ie. it doesn\'t match the last doc in a segment (ignoring acceptedDocs), BJS should throw exception suggestion to verify the filter.  \\n\\n I bake the patch with test coverage soon.  Christian Danninger  thanks for raising it, I didn\'t realize this trap.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14623971\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14623971&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14623971\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14623971_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14623971_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/15 19:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-12T19:49:16+0000\'\u003e12\\/Jul\\/15 19:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eColleagues, I propose to improve bjq usability by letting users know if they supply a wrong filter by throwing: \u003c\\/p\u003e\\n\u003cblockquote\u003e\u003cp\u003ejava.lang.IllegalStateException: the given parent filter: QueryBitSetProducer(+parent:* -id:29) doesn\'t matches the last document in the segment: LeafReaderContext(_2(6.0.0):c60 docBase=120 ord=2)      \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eHere is the patch which checks the parent filter bit is set at the last doc of the segment.\u003cbr\\/\u003e\\nThis check occurs \u003cem\u003ebefore\u003c\\/em\u003e scorer creation. testAbsentLastParentInSegment() covers ToParentBJQ, and ToChildBJQ and also the filtered cases. \u003cbr\\/\u003e\\nIt also slightly polishes exception message in ToParentBJQ(): now it reports meaningful (global) docID and a causing child query, eg:\u003c\\/p\u003e\\n\u003cblockquote\u003e\u003cp\u003ejava.lang.IllegalStateException: child query must only match non-parent docs, but parent docID=18011 is matched by child:3 id:31  \u003c\\/p\u003e\u003c\\/blockquote\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14623971_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14623971_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jul\\/15 19:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-07-12T19:49:16+0000\'\u003e12\\/Jul\\/15 19:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Colleagues, I propose to improve bjq usability by letting users know if they supply a wrong filter by throwing:  \\n  java.lang.IllegalStateException: the given parent filter: QueryBitSetProducer(+parent:* -id:29) doesn\'t matches the last document in the segment: LeafReaderContext(_2(6.0.0):c60 docBase=120 ord=2)        \\n\\n Here is the patch which checks the parent filter bit is set at the last doc of the segment. \\nThis check occurs  before  scorer creation. testAbsentLastParentInSegment() covers ToParentBJQ, and ToChildBJQ and also the filtered cases.  \\nIt also slightly polishes exception message in ToParentBJQ(): now it reports meaningful (global) docID and a causing child query, eg: \\n  java.lang.IllegalStateException: child query must only match non-parent docs, but parent docID=18011 is matched by child:3 id:31                 \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14728606\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14728606&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14728606\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14728606_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14728606_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Sep\\/15 07:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-09-03T07:18:44+0000\'\u003e03\\/Sep\\/15 07:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ehere is the snippet to verify block join\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eDirectoryReader reader = DirectoryReader.open(\\n        FSDirectory.open(\\n                FileSystems.getDefault().\\n                getPath(\u003cspan class=\\\"code-quote\\\"\u003e\\\"\\/Users\\/mkhl\\/Downloads\\/solr-5.3.0\\/example\\/techproducts\\/solr\\/techproducts\\/data\\\"\u003c\\/span\u003e,\u003cspan class=\\\"code-quote\\\"\u003e\\\"index.20150902131555025\\\"\u003c\\/span\u003e)));\\nCheckJoinIndex.check(reader,\\n        \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e QueryBitSetProducer(\\n                \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e TermQuery(\\n                        \u003cspan class=\\\"code-keyword\\\"\u003enew\u003c\\/span\u003e Term(\u003cspan class=\\\"code-quote\\\"\u003e\\\"title\\\"\u003c\\/span\u003e,\u003cspan class=\\\"code-quote\\\"\u003e\\\"product\\\"\u003c\\/span\u003e))));\\nreader.close(); \\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\u003cp\u003eit throws\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003ejava.lang.IllegalStateException: The last document of a segment must always be a parent, but _72(5.2.2):C29375 has a child as a last doc\\n    at org.apache.lucene.search.join.CheckJoinIndex.check(CheckJoinIndex.java:48)\\n    at CodeSnippet_4.run(CodeSnippet_4.java:15)\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14728606_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14728606_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Sep\\/15 07:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-09-03T07:18:44+0000\'\u003e03\\/Sep\\/15 07:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    here is the snippet to verify block join \\n  \\n DirectoryReader reader = DirectoryReader.open(\\n        FSDirectory.open(\\n                FileSystems.getDefault().\\n                getPath( \\\"\\/Users\\/mkhl\\/Downloads\\/solr-5.3.0\\/example\\/techproducts\\/solr\\/techproducts\\/data\\\" , \\\"index.20150902131555025\\\" )));\\nCheckJoinIndex.check(reader,\\n         new  QueryBitSetProducer(\\n                 new  TermQuery(\\n                         new  Term( \\\"title\\\" , \\\"product\\\" ))));\\nreader.close(); \\n \\n  \\n it throws \\n  \\n java.lang.IllegalStateException: The last document of a segment must always be a parent, but _72(5.2.2):C29375 has a child as a last doc\\n    at org.apache.lucene.search.join.CheckJoinIndex.check(CheckJoinIndex.java:48)\\n    at CodeSnippet_4.run(CodeSnippet_4.java:15)\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-14994216\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-6660?focusedCommentId=14994216&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14994216\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14994216_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14994216_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Nov\\/15 18:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-06T18:57:49+0000\'\u003e06\\/Nov\\/15 18:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eupdated \u003ca href=\\\"https:\\/\\/cwiki.apache.org\\/confluence\\/pages\\/diffpagesbyversion.action?pageId=32604257&amp;selectedPageVersions=58&amp;selectedPageVersions=57\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ethe ref guide\u003c\\/a\u003e\u003cbr\\/\u003e\\nLet me know if anything else should be done here. \u003cbr\\/\u003e\\nThere is a hotter one filled by Uwe, hunting for it now.   \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mkhludnev\\\" id=\\\"commentauthor_14994216_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mkhludnev\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mkhludnev\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mikhail Khludnev\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_14994216_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Nov\\/15 18:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2015-11-06T18:57:49+0000\'\u003e06\\/Nov\\/15 18:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    updated  the ref guide  \\nLet me know if anything else should be done here.  \\nThere is a hotter one filled by Uwe, hunting for it now.                 \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310110";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310110&amp;avatarId=10061\\\" alt=\\\"Lucene - Core\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\"\u003eLucene - Core\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520246632816"> 
    <input type="hidden" title="jira.request.server.time" value="180"> 
    <input type="hidden" title="jira.request.id" value="643x94652494x4"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="4"> 
    <input type="hidden" title="db.reads.time.in.ms" value="36"> 
    <input type="hidden" title="db.conns.time.in.ms" value="41"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 643x94652494x4
	          REQUEST TIMESTAMP : [05/Mar/2018:10:43:52 +0000]
	               REQUEST TIME : 0.1800
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 4

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=20, elapsedTotal=36231908, elapsedMin=643979, elapsedMax=12157712, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=24, elapsedTotal=41210751, elapsedMin=662293, elapsedMax=12204999, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>