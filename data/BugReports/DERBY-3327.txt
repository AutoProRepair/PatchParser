<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|723c9d601981af646f9ae2ded38bdbbd5c5bbf63|lout"> 
  <link rel="shortcut icon" href="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"sd.customer.profile.multi.languages\":true,\"sd.customer.portal.transitions\":true,\"sd.customer.portal.transitions.config\":true,\"sd.custom.email.stripping.rules\":false,\"sd.sla.lucene.issue.id.callback.performance\":true,\"sd.new.settings.sidebar.location\":true,\"sd.workload.report.paginator\":true,\"sd.experimental.portal.search.algorithm.default.1\":false,\"sd.customer.portal.help.center.agent.announcement\":true,\"sd.sla.improved.rendering\":false,\"sd.experimental.portal.search.algorithm.default.2\":false,\"sd.customer.feedback.validate.reporter.on.token\":true,\"sd.custom.email.notifications.utf8.csat.star\":true,\"sd.who.create.customers.by.email.setting\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.renderer.consider.variable.format\":true,\"sd.stats.event.tracking\":true,\"sd.password.helper.dialog\":true,\"sd.canned.responses\":false,\"sd.portal.help.center.customer.signup.secondary.email\":true,\"sd.custom.email.notifications.manage.language\":true,\"sd.use.search.by.permissions\":true,\"sd.slavalue.record.updated.date\":false,\"sd.report.custom.date.range\":false,\"sd.kb.article.helpfulness.report\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"sd.custom.email.notifications.styling\":true,\"sd.workinghours.new.page.bulldog.1\":false,\"sd.customer.portal.two.step.login\":false,\"sd.automation.psmq.async.executor\":true,\"sd.customer.org.list.page.lazy.search\":true,\"sd.approval.requested.when.handler\":true,\"sd.request.type.field.rest.api.filtering.bugfix\":true,\"sd.automation.then.action.auto.answer.approval\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"sla.will.only.be.paused.if.they.are.already.started\":true,\"sd.kb.comment.share.stats.collection\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"sd.customer.orgs.group.participants\":true,\"sd.portal.help.center.customer.signup\":true,\"sd.sla.agent.jql.security.restricted\":true,\"sd.test.feature.flag.x\":true,\"sd.test.feature.flag.y\":false,\"sd.cluster.safe.mail.channel.shutdown\":true,\"sd.email.channel.folders\":false,\"sd.email.analytics.open\":false,\"sd.kb.project.creation.create.link.space\":true,\"sd.workinghours.new.page\":false,\"sd.confluence.anonymous.permission.fix\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"sd.customer.portal.project.agent.announcement\":true,\"sd.automation.audit.log\":true,\"jira.jql.suggestrecentfields\":false,\"sd.canned.responses.check.index.startup\":false,\"sd.new.project.templates\":true,\"sd.custom.email.notifications.custom.rules.simple.ui\":false,\"sd.custom.email.notifications.cut.over\":true,\"sd.dismiss.all.misconfiguration.warnings.setting\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"sd.sla.configurations.export\":true,\"sd.canned.responses.variable.substitution\":true,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"sd.customer.portal.prioties.per.project.fix\":true,\"jira.instrumentation.laas\":false,\"sd.kb.self.service.report\":false,\"sla.improved.request.handling\":true,\"sd.no.schedule.async.upgrade.tasks\":true,\"sd.kb.primary.nav\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"sd.kb.issueview.panel.phase2\":true,\"sd.email.outsider.comments\":true,\"jira.create.linked.issue\":true,\"sd.kb.issueview.panel\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"sd.approvals.light.weight\":false,\"sd.automation.then.webhook\":true,\"sd.respect.inline.edit.issue.off\":true,\"jira.jql.smartautoselectfirst\":false,\"sd.global.portal.search.atlassian.only.tracking\":false,\"sd.automation.if.condition.comment.primary.action\":true,\"jira.priorities.per.project\":true,\"sd.inline.noformat.renderer\":true,\"sd.customer.request.type.create.edit.screens\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.servicedesk.servicedesk-canned-responses-plugin:canned-responses-data-provider.data"]="{\"substitutionVariables\":{\"issue.summary\":\"Issue summary\",\"issue.description\":\"Issue description\",\"issue.key\":\"Issue key\",\"issue.reporter.name\":\"Issue reporter\",\"issue.resolution\":\"Issue resolution\",\"request.url\":\"Request URL\",\"request.status\":\"Request status\"}}";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-help-links.help-links"]="{\"help\":{\"email.settings\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"managing.queues\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+queues+for+your+team\",\"email.setup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"request.settings.help.bubble\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\",\"email.settings.suitablerequest\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email#Receivingrequestsbyemail-suitablerequest\",\"sla.import.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Importing+SLAs\",\"documentation.home\":\"https://docs.atlassian.com/jira/jsd-docs-039/JIRA+Service+Desk+Documentation\",\"default\":\"https://docs.atlassian.com/jira/jsd-docs-039/\",\"create.space.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base#serving-customers-with-a-knowledge-base-createpermission\",\"email.settings.troubleshooting\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+the+email+channel\",\"admin.notifications.config\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+service+desk+notifications\",\"troubleshoot.requesttype\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+request+types\",\"approvals.configuration\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+JIRA+Service+Desk+approvals\",\"setting.up.reports\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+service+desk+reports\",\"public.signup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+public+signup\",\"knowledge.base\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base\",\"resolve.permission.scheme.errors\":\"https://docs.atlassian.com/jira/jsd-docs-039/Resolving+permission+scheme+errors\",\"getting.started\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+with+JIRA+Service+Desk\",\"getting.started.agent\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+for+service+desk+agents\",\"invite.customers\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\"},\"kb\":{\"default\":\"https://confluence.atlassian.com/display/SDKB/\",\"troubleshooting.user.management.issues\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\",\"legacytransition\":\"https://confluence.atlassian.com/display/SDKB/Replacing+legacy+automatic+transitions+with+automation+rules\",\"umtroubleshoot\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\"}}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-base-url.base-url"]="\"https://issues.apache.org/jira\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"1cab94937e28d\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/1a6b21131945f6f49ff48336b49ca3fe-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/d8484c9183f546511a8e336a8779bcd9-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d3b35d835f8f46fc3b53bb4db7f85158-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/71d42e74136d842a3ef4d5d136484843-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/944bb39eced1b35cfc7194aa02eb5a5a/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/5a8f0f8b8aa8f96a4f0f7e9e248d62f3-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-3327"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-3327] SQL roles: Implement authorization stack (and SQL session context to hold it) - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-3327] SQL roles: Implement authorization stack (and SQL session context to hold it) - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3327">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-3327" href="/jira/browse/DERBY-3327" id="key-val" rel="12386518">DERBY-3327</a></li>
                </ol>
                <h1 id="summary-val">SQL roles: Implement authorization stack (and SQL session context to hold it)</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-3327"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-3327/DERBY-3327.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-3327/DERBY-3327.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-3327/DERBY-3327.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-3327/DERBY-3327.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> None </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.1.1" title="10.5.1.1 build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09">10.5.1.1</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12386518-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>Release Note Needed</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                    <li id="rowForcustomfield_12310200" class="item"> 
                     <div class="wrap"> 
                      <strong title="Bug behavior facts" class="name">Bug behavior facts:</strong> 
                      <div id="customfield_12310200-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310200-field"> 
                        <span>Security</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>The current LanguageConnectionContext keeps the user authorization identifier for an SQL session.<br> The lcc is shared context also for nested connections (opened from stored procedures).<br> So far, for roles, the current role has been stored in the lcc also. However, SQL requires that<br> authorization identifers be pushed on a "authorization stack" when calling a stored procedure, cf.<br> SQL 2003, vol 2, section 4.34.1.1 and 4.27.3 and 10.4 GR 5h and i.<br> This allows a caller to keep its current role after a call even if changed by the stored procedure.</p> 
                  <p>This issue will implement the current role name part ("cell") of the authorization stack. </p> 
                  <p>The authorization stack will be implemented as part of the SQL session context.<br> The patch will also implement the pushing of the current unqualified schema name part of<br> the SQL session context, cf. 10.4 GR 5a (<a href="https://issues.apache.org/jira/browse/DERBY-1331" title="Derby's &quot;set schema&quot; behavior is not compliant with SQL 2003 Foundation spec." class="issue-link" data-issue-key="DERBY-1331"><del>DERBY-1331</del></a>).</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-3327?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-3327?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-3327?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-3327?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373581" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373581/DERBY-3327-1.diff" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-1.diff:https://issues.apache.org/jira/secure/attachment/12373581/DERBY-3327-1.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373581/DERBY-3327-1.diff" title="Latest  19/Jan/08 00:07 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-1.diff:https://issues.apache.org/jira/secure/attachment/12373581/DERBY-3327-1.diff">DERBY-3327-1.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-19T00:07:55.704Z">19/Jan/08 00:07</time>
                   </dd>
                   <dd class="attachment-size">
                    28 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373584" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373584/DERBY-3327-1.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-1.stat:https://issues.apache.org/jira/secure/attachment/12373584/DERBY-3327-1.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373584/DERBY-3327-1.stat" title="Latest  19/Jan/08 00:24 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-1.stat:https://issues.apache.org/jira/secure/attachment/12373584/DERBY-3327-1.stat">DERBY-3327-1.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-19T00:24:53.628Z">19/Jan/08 00:24</time>
                   </dd>
                   <dd class="attachment-size">
                    0.8 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373578" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373578/DERBY-3327-2.diff" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-2.diff:https://issues.apache.org/jira/secure/attachment/12373578/DERBY-3327-2.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373578/DERBY-3327-2.diff" title="Latest  19/Jan/08 00:00 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-2.diff:https://issues.apache.org/jira/secure/attachment/12373578/DERBY-3327-2.diff">DERBY-3327-2.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-19T00:00:44.666Z">19/Jan/08 00:00</time>
                   </dd>
                   <dd class="attachment-size">
                    28 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373583" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373583/DERBY-3327-2.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-2.stat:https://issues.apache.org/jira/secure/attachment/12373583/DERBY-3327-2.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373583/DERBY-3327-2.stat" title="Latest  19/Jan/08 00:24 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-2.stat:https://issues.apache.org/jira/secure/attachment/12373583/DERBY-3327-2.stat">DERBY-3327-2.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-19T00:24:09.529Z">19/Jan/08 00:24</time>
                   </dd>
                   <dd class="attachment-size">
                    0.8 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373685" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373685/DERBY-3327-3.diff" draggable="true" data-downloadurl="text/x-patch:DERBY-3327-3.diff:https://issues.apache.org/jira/secure/attachment/12373685/DERBY-3327-3.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373685/DERBY-3327-3.diff" title="Latest  21/Jan/08 16:05 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-patch:DERBY-3327-3.diff:https://issues.apache.org/jira/secure/attachment/12373685/DERBY-3327-3.diff">DERBY-3327-3.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-21T16:05:44.487Z">21/Jan/08 16:05</time>
                   </dd>
                   <dd class="attachment-size">
                    27 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12373686" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12373686/DERBY-3327-3.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-3.stat:https://issues.apache.org/jira/secure/attachment/12373686/DERBY-3327-3.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12373686/DERBY-3327-3.stat" title="Latest  21/Jan/08 16:05 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-3.stat:https://issues.apache.org/jira/secure/attachment/12373686/DERBY-3327-3.stat">DERBY-3327-3.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-01-21T16:05:44.652Z">21/Jan/08 16:05</time>
                   </dd>
                   <dd class="attachment-size">
                    0.8 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12375850" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12375850/DERBY-3327-4-full.diff" draggable="true" data-downloadurl="text/x-patch:DERBY-3327-4-full.diff:https://issues.apache.org/jira/secure/attachment/12375850/DERBY-3327-4-full.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12375850/DERBY-3327-4-full.diff" title="Latest  18/Feb/08 17:41 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-patch:DERBY-3327-4-full.diff:https://issues.apache.org/jira/secure/attachment/12375850/DERBY-3327-4-full.diff">DERBY-3327-4-full.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-18T17:41:56.545Z">18/Feb/08 17:41</time>
                   </dd>
                   <dd class="attachment-size">
                    85 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12375851" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12375851/DERBY-3327-4-full.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full.stat:https://issues.apache.org/jira/secure/attachment/12375851/DERBY-3327-4-full.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12375851/DERBY-3327-4-full.stat" title="Latest  18/Feb/08 17:41 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full.stat:https://issues.apache.org/jira/secure/attachment/12375851/DERBY-3327-4-full.stat">DERBY-3327-4-full.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-18T17:41:56.574Z">18/Feb/08 17:41</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12375873" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12375873/DERBY-3327-4-full-b.diff" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-4-full-b.diff:https://issues.apache.org/jira/secure/attachment/12375873/DERBY-3327-4-full-b.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12375873/DERBY-3327-4-full-b.diff" title="Latest  19/Feb/08 00:30 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-4-full-b.diff:https://issues.apache.org/jira/secure/attachment/12375873/DERBY-3327-4-full-b.diff">DERBY-3327-4-full-b.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-19T00:30:58.362Z">19/Feb/08 00:30</time>
                   </dd>
                   <dd class="attachment-size">
                    85 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12375874" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12375874/DERBY-3327-4-full-b.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-b.stat:https://issues.apache.org/jira/secure/attachment/12375874/DERBY-3327-4-full-b.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12375874/DERBY-3327-4-full-b.stat" title="Latest  19/Feb/08 00:30 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-b.stat:https://issues.apache.org/jira/secure/attachment/12375874/DERBY-3327-4-full-b.stat">DERBY-3327-4-full-b.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-19T00:30:58.403Z">19/Feb/08 00:30</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12375973" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12375973/DERBY-3327-4-full-c.diff" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-4-full-c.diff:https://issues.apache.org/jira/secure/attachment/12375973/DERBY-3327-4-full-c.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12375973/DERBY-3327-4-full-c.diff" title="Latest  19/Feb/08 23:12 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-4-full-c.diff:https://issues.apache.org/jira/secure/attachment/12375973/DERBY-3327-4-full-c.diff">DERBY-3327-4-full-c.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-19T23:12:15.981Z">19/Feb/08 23:12</time>
                   </dd>
                   <dd class="attachment-size">
                    85 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12375974" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12375974/DERBY-3327-4-full-c.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-c.stat:https://issues.apache.org/jira/secure/attachment/12375974/DERBY-3327-4-full-c.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12375974/DERBY-3327-4-full-c.stat" title="Latest  19/Feb/08 23:12 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-c.stat:https://issues.apache.org/jira/secure/attachment/12375974/DERBY-3327-4-full-c.stat">DERBY-3327-4-full-c.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-02-19T23:12:16.007Z">19/Feb/08 23:12</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12378804" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12378804/DERBY-3327-4-full-d.diff" draggable="true" data-downloadurl="text/x-patch:DERBY-3327-4-full-d.diff:https://issues.apache.org/jira/secure/attachment/12378804/DERBY-3327-4-full-d.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12378804/DERBY-3327-4-full-d.diff" title="Latest  28/Mar/08 18:13 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-patch:DERBY-3327-4-full-d.diff:https://issues.apache.org/jira/secure/attachment/12378804/DERBY-3327-4-full-d.diff">DERBY-3327-4-full-d.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-28T18:13:37.465Z">28/Mar/08 18:13</time>
                   </dd>
                   <dd class="attachment-size">
                    86 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12378805" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12378805/DERBY-3327-4-full-d.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-d.stat:https://issues.apache.org/jira/secure/attachment/12378805/DERBY-3327-4-full-d.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12378805/DERBY-3327-4-full-d.stat" title="Latest  28/Mar/08 18:13 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-d.stat:https://issues.apache.org/jira/secure/attachment/12378805/DERBY-3327-4-full-d.stat">DERBY-3327-4-full-d.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-03-28T18:13:37.491Z">28/Mar/08 18:13</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12379026" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12379026/DERBY-3327-4-full-e.diff" draggable="true" data-downloadurl="text/x-patch:DERBY-3327-4-full-e.diff:https://issues.apache.org/jira/secure/attachment/12379026/DERBY-3327-4-full-e.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12379026/DERBY-3327-4-full-e.diff" title="Latest  01/Apr/08 13:12 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-patch:DERBY-3327-4-full-e.diff:https://issues.apache.org/jira/secure/attachment/12379026/DERBY-3327-4-full-e.diff">DERBY-3327-4-full-e.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-04-01T13:12:01.577Z">01/Apr/08 13:12</time>
                   </dd>
                   <dd class="attachment-size">
                    86 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12379027" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12379027/DERBY-3327-4-full-e.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-e.stat:https://issues.apache.org/jira/secure/attachment/12379027/DERBY-3327-4-full-e.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12379027/DERBY-3327-4-full-e.stat" title="Latest  01/Apr/08 13:12 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-e.stat:https://issues.apache.org/jira/secure/attachment/12379027/DERBY-3327-4-full-e.stat">DERBY-3327-4-full-e.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-04-01T13:12:01.609Z">01/Apr/08 13:12</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12382972" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12382972/DERBY-3327-4-full-e-10_4.diff" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-4-full-e-10_4.diff:https://issues.apache.org/jira/secure/attachment/12382972/DERBY-3327-4-full-e-10_4.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12382972/DERBY-3327-4-full-e-10_4.diff" title="Latest  28/May/08 21:52 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-4-full-e-10_4.diff:https://issues.apache.org/jira/secure/attachment/12382972/DERBY-3327-4-full-e-10_4.diff">DERBY-3327-4-full-e-10_4.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-05-28T21:52:25.209Z">28/May/08 21:52</time>
                   </dd>
                   <dd class="attachment-size">
                    86 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12382973" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12382973/DERBY-3327-4-full-e-10_4.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-e-10_4.stat:https://issues.apache.org/jira/secure/attachment/12382973/DERBY-3327-4-full-e-10_4.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12382973/DERBY-3327-4-full-e-10_4.stat" title="Latest  28/May/08 21:52 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-4-full-e-10_4.stat:https://issues.apache.org/jira/secure/attachment/12382973/DERBY-3327-4-full-e-10_4.stat">DERBY-3327-4-full-e-10_4.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-05-28T21:52:25.221Z">28/May/08 21:52</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12383113" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12383113/derby-3327-5a-extracted_initial_schema_patch.diff" draggable="true" data-downloadurl="text/x-patch:derby-3327-5a-extracted_initial_schema_patch.diff:https://issues.apache.org/jira/secure/attachment/12383113/derby-3327-5a-extracted_initial_schema_patch.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12383113/derby-3327-5a-extracted_initial_schema_patch.diff" title="Latest  30/May/08 14:33 - Kristian Waagan" draggable="true" data-downloadurl="text/x-patch:derby-3327-5a-extracted_initial_schema_patch.diff:https://issues.apache.org/jira/secure/attachment/12383113/derby-3327-5a-extracted_initial_schema_patch.diff">derby-3327-5a-extracted_initial_schema_patch.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-05-30T14:33:09.081Z">30/May/08 14:33</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Kristian Waagan
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12383334" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12383334/DERBY-3327-6.diff" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-6.diff:https://issues.apache.org/jira/secure/attachment/12383334/DERBY-3327-6.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12383334/DERBY-3327-6.diff" title="Latest  03/Jun/08 22:53 - Dag H. Wanvik" draggable="true" data-downloadurl="text/x-diff:DERBY-3327-6.diff:https://issues.apache.org/jira/secure/attachment/12383334/DERBY-3327-6.diff">DERBY-3327-6.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-06-03T22:53:54.239Z">03/Jun/08 22:53</time>
                   </dd>
                   <dd class="attachment-size">
                    0.7 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12383335" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12383335/DERBY-3327-6.stat" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-6.stat:https://issues.apache.org/jira/secure/attachment/12383335/DERBY-3327-6.stat"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12383335/DERBY-3327-6.stat" title="Latest  03/Jun/08 22:53 - Dag H. Wanvik" draggable="true" data-downloadurl="application/x-subversion-stat:DERBY-3327-6.stat:https://issues.apache.org/jira/secure/attachment/12383335/DERBY-3327-6.stat">DERBY-3327-6.stat</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-06-03T22:53:54.270Z">03/Jun/08 22:53</time>
                   </dd>
                   <dd class="attachment-size">
                    0.1 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12379142" data-issue-id="12386518" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12379142/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12379142/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12379142/releaseNote.html" title="Latest  02/Apr/08 14:59 - Dag H. Wanvik" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12379142/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2008-04-02T14:59:01.853Z">02/Apr/08 14:59</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Dag H. Wanvik
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="is depended upon by">
                   is depended upon by
                  </dt> 
                  <dd id="internal-12396702_10001"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3690: EmbedPooledConnection doesn't reset schema when creating a new logical connection"> <a href="/jira/browse/DERBY-3690" data-issue-key="DERBY-3690" class="issue-link link-title resolution">DERBY-3690</a> <span class="link-summary">EmbedPooledConnection doesn't reset schema when creating a new logical connection</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="is part of">
                   is part of
                  </dt> 
                  <dd id="internal-12359718_12310010"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-2207: Improve usability of Derby's client/server security by implementing ANSI Roles"> <a href="/jira/browse/DERBY-2207" data-issue-key="DERBY-2207" class="issue-link link-title resolution">DERBY-2207</a> <span class="link-summary">Improve usability of Derby's client/server security by implementing ANSI Roles</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12343199_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-1331: Derby's &quot;set schema&quot; behavior is not compliant with SQL 2003 Foundation spec."> <a href="/jira/browse/DERBY-1331" data-issue-key="DERBY-1331" class="issue-link link-title resolution">DERBY-1331</a> <span class="link-summary">Derby's "set schema" behavior is not compliant with SQL 2003 Foundation spec.</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12405638_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-3897: SQLSessionContext not correctly initialized in some non-method call nested contexts"> <a href="/jira/browse/DERBY-3897" data-issue-key="DERBY-3897" class="issue-link link-title resolution">DERBY-3897</a> <span class="link-summary">SQLSessionContext not correctly initialized in some non-method call nested contexts</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                  <dd id="internal-12456504_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="DERBY-4551: Allow database user to execute stored procedures with same permissions as database owner and/or routine definer"> <a href="/jira/browse/DERBY-4551" data-issue-key="DERBY-4551" class="issue-link link-title resolution">DERBY-4551</a> <span class="link-summary">Allow database user to execute stored procedures with same permissions as database owner and/or routine definer</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_dagw" rel="dagw" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Dag H. Wanvik&quot;,&quot;emailAddress&quot;:&quot;dag.wanvik@oracle.com&quot;,&quot;username&quot;:&quot;dagw&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="dagw"></span></span> Dag H. Wanvik </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_dagw" rel="dagw" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Dag H. Wanvik&quot;,&quot;emailAddress&quot;:&quot;dag.wanvik@oracle.com&quot;,&quot;username&quot;:&quot;dagw&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="dagw"></span></span> Dag H. Wanvik </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="17/Jan/08 17:14"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-01-17T17:14:05+0000">17/Jan/08 17:14</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="19/Sep/10 23:32"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2010-09-19T23:32:48+0000">19/Sep/10 23:32</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="07/Jul/08 08:36"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2008-07-07T08:36:50+0000">07/Jul/08 08:36</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for n/a, Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-3327?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-3327?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12560042\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12560042&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560042\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12560042_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560042_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/08 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-17T19:21:18+0000\'\u003e17\\/Jan\\/08 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Dag H. Wanvik - 17\\/Jan\\/08 19:23\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis patch implements an authorization stack for roles. The basic idea\u003cbr\\/\u003e\\nis as follows: For the top level, the current role is kept in the\u003cbr\\/\u003e\\nlcc. For dynamic call contexts (while in nested connections opened\u003cbr\\/\u003e\\nfrom a stored procedure\\/function), the current role is kept in the\u003cbr\\/\u003e\\nactivation of the calling statement. The lcc keeps a stack of call\u003cbr\\/\u003e\\nactivations to help initialize the activations so they know their\u003cbr\\/\u003e\\ncalling activation.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf several nested connections are opened inside a stored procedure\u003cbr\\/\u003e\\nthey share the authorization context.\u003c\\/p\u003e\\n\\n\u003cp\u003eIf a dynamic result set is passed out referring to the current role\u003cbr\\/\u003e\\ninside a stored procedure, the correct (nested) value will result,\u003cbr\\/\u003e\\nsince the activation of the call is still live.\u003c\\/p\u003e\\n\\n\u003cp\u003eRolesTest has also been extended to test these semantics.\u003cbr\\/\u003e\\nThe patch also fixes a bug in SetRoleConstantAction.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor review only at this point. I have run regression tests without any\u003cbr\\/\u003e\\nerrors. Any feedback is welcome!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12560042_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560042_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/08 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-17T19:21:18+0000\'\u003e17\\/Jan\\/08 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Dag H. Wanvik - 17\\/Jan\\/08 19:23\\\"\u003eedited\u003c\\/span\u003e                   This patch implements an authorization stack for roles. The basic idea \\nis as follows: For the top level, the current role is kept in the \\nlcc. For dynamic call contexts (while in nested connections opened \\nfrom a stored procedure\\/function), the current role is kept in the \\nactivation of the calling statement. The lcc keeps a stack of call \\nactivations to help initialize the activations so they know their \\ncalling activation. \\n\\n If several nested connections are opened inside a stored procedure \\nthey share the authorization context. \\n\\n If a dynamic result set is passed out referring to the current role \\ninside a stored procedure, the correct (nested) value will result, \\nsince the activation of the call is still live. \\n\\n RolesTest has also been extended to test these semantics. \\nThe patch also fixes a bug in SetRoleConstantAction. \\n\\n For review only at this point. I have run regression tests without any \\nerrors. Any feedback is welcome!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560559\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12560559&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560559\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12560559_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560559_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 21:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T21:36:25+0000\'\u003e18\\/Jan\\/08 21:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the patch, Dag. One item puzzled me: Is there a reason that getCurrentRole() and setCurrentRole() in BaseActivation are manipulating a field called nestedCurrentRole rather than a field called currentRole?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12560559_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560559_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 21:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T21:36:25+0000\'\u003e18\\/Jan\\/08 21:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the patch, Dag. One item puzzled me: Is there a reason that getCurrentRole() and setCurrentRole() in BaseActivation are manipulating a field called nestedCurrentRole rather than a field called currentRole?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560598\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12560598&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560598\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12560598_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560598_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 23:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T23:22:30+0000\'\u003e18\\/Jan\\/08 23:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for looking at this, Rick!\u003cbr\\/\u003e\\nRe your question:\u003cbr\\/\u003e\\nNot really, just to emphaszie that this field will only ever hold the current role of a stored procedure scope; never\u003cbr\\/\u003e\\nthe outer scope. But since it can be confusing, I will change it to currentRole and leave the it to the comments\u003cbr\\/\u003e\\nto explain this fact. \u003c\\/p\u003e\\n\\n\u003cp\u003eBtw, I have vacillated a bit over whether to call the field holding the current role (a string)\u003cbr\\/\u003e\\ncurrentRole, currentRoleName or currentRoleId. The standard uses the term \\\"authorization identifier\\\"\u003cbr\\/\u003e\\n(generic for both user and role), but also plain \\\"role name\\\". But in SQL section 5.4 I see the syntax is specified as\u003c\\/p\u003e\\n\\n\u003cp\u003e &lt;authorization identifier&gt; ::=\u003cbr\\/\u003e\\n       &lt;role name&gt;\u003c\\/p\u003e\\n\u003cdiv class=\'table-wrap\'\u003e\\n\u003ctable class=\'confluenceTable\'\u003e\u003ctbody\u003e\\n\u003ctr\u003e\\n\u003ctd class=\'confluenceTd\'\u003e &lt;user identifier&gt;\u003c\\/td\u003e\\n\u003c\\/tr\u003e\\n\u003c\\/tbody\u003e\u003c\\/table\u003e\\n\u003c\\/div\u003e\\n\\n\\n\u003cp\u003eso I will rename fields and arguments whereever appropriate to currentRoleName and roleName at some point,\u003cbr\\/\u003e\\nI think.  Also,the current code uses \\\"authorizationId\\\" for \u003cb\u003euser identifier\u003c\\/b\u003e in many places which can also be \u003cbr\\/\u003e\\nconfusing now that roles are introduced. This should probably be cleaned up as well.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12560598_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560598_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/08 23:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-18T23:22:30+0000\'\u003e18\\/Jan\\/08 23:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for looking at this, Rick! \\nRe your question: \\nNot really, just to emphaszie that this field will only ever hold the current role of a stored procedure scope; never \\nthe outer scope. But since it can be confusing, I will change it to currentRole and leave the it to the comments \\nto explain this fact.  \\n\\n Btw, I have vacillated a bit over whether to call the field holding the current role (a string) \\ncurrentRole, currentRoleName or currentRoleId. The standard uses the term \\\"authorization identifier\\\" \\n(generic for both user and role), but also plain \\\"role name\\\". But in SQL section 5.4 I see the syntax is specified as \\n\\n  &lt;authorization identifier&gt; ::= \\n       &lt;role name&gt; \\n \\n  \\n \\n  &lt;user identifier&gt; \\n \\n  \\n \\n\\n\\n so I will rename fields and arguments whereever appropriate to currentRoleName and roleName at some point, \\nI think.  Also,the current code uses \\\"authorizationId\\\" for  user identifier  in many places which can also be  \\nconfusing now that roles are introduced. This should probably be cleaned up as well.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560611\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12560611&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560611\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12560611_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560611_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jan\\/08 00:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-19T00:00:54+0000\'\u003e19\\/Jan\\/08 00:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRenamed nestedCurrentRole  to currentRole as Rick suggested. \u003cbr\\/\u003e\\nFixed up a few comments. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12560611_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560611_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Jan\\/08 00:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-19T00:00:54+0000\'\u003e19\\/Jan\\/08 00:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Renamed nestedCurrentRole  to currentRole as Rick suggested.  \\nFixed up a few comments.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12560989\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12560989&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12560989\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12560989_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560989_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 11:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T11:28:33+0000\'\u003e21\\/Jan\\/08 11:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWhat about changing the names of the methods instead? I don\'t think it\'s a bad idea to spell out the scope of the role, and I only read Rick\'s comment as saying that it would be good if the names matched.\u003c\\/p\u003e\\n\\n\u003cp\u003ejava.util.Stack is a synchronized collection, by the way, so you may want to consider using ArrayList instead. You have already added (push,pop)Caller() methods, so the stack abstraction will be preserved even with a different data structure.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12560989_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12560989_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 11:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T11:28:33+0000\'\u003e21\\/Jan\\/08 11:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    What about changing the names of the methods instead? I don\'t think it\'s a bad idea to spell out the scope of the role, and I only read Rick\'s comment as saying that it would be good if the names matched. \\n\\n java.util.Stack is a synchronized collection, by the way, so you may want to consider using ArrayList instead. You have already added (push,pop)Caller() methods, so the stack abstraction will be preserved even with a different data structure.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561030\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561030&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561030\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561030_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561030_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T15:09:38+0000\'\u003e21\\/Jan\\/08 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for looking at this, Knut!\u003c\\/p\u003e\\n\\n\u003cp\u003ea) naming: Sounds like a good idea. You OK with that, Rick?\u003c\\/p\u003e\\n\\n\u003cp\u003eb) Yes, Stack is a bit heavy being based on Vector. I was looking at\u003cbr\\/\u003e\\n   Deque which is the recommended stack abstraction, \u003cbr\\/\u003e\\n   (cf. comment at top of \u003ca href=\\\"http:\\/\\/java.sun.com\\/javase\\/6\\/docs\\/api\\/java\\/util\\/Stack.html:\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/java.sun.com\\/javase\\/6\\/docs\\/api\\/java\\/util\\/Stack.html:\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e    \\\"...A more complete and consistent set of LIFO stack operations is\u003cbr\\/\u003e\\n     provided by the Deque interface and its implementations, which\u003cbr\\/\u003e\\n     should be used in preference to this class.\\\"\u003c\\/p\u003e\\n\\n\u003cp\u003e   but it is not available in 1.4, so ArrayList, although less\u003cbr\\/\u003e\\n   descriptive, is sufficient and probably the better choice here, I\u003cbr\\/\u003e\\n   agree.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561030_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561030_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 15:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T15:09:38+0000\'\u003e21\\/Jan\\/08 15:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for looking at this, Knut! \\n\\n a) naming: Sounds like a good idea. You OK with that, Rick? \\n\\n b) Yes, Stack is a bit heavy being based on Vector. I was looking at \\n   Deque which is the recommended stack abstraction,  \\n   (cf. comment at top of  http:\\/\\/java.sun.com\\/javase\\/6\\/docs\\/api\\/java\\/util\\/Stack.html:  \\n\\n     \\\"...A more complete and consistent set of LIFO stack operations is \\n     provided by the Deque interface and its implementations, which \\n     should be used in preference to this class.\\\" \\n\\n    but it is not available in 1.4, so ArrayList, although less \\n   descriptive, is sufficient and probably the better choice here, I \\n   agree.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561046\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561046&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561046\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561046_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561046_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 16:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T16:05:44+0000\'\u003e21\\/Jan\\/08 16:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNew version of the patch, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-3, which addresses both a) and b) above.\u003cbr\\/\u003e\\nRunning regression tests over again.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561046_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561046_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 16:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T16:05:44+0000\'\u003e21\\/Jan\\/08 16:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    New version of the patch,   DERBY-3327  -3, which addresses both a) and b) above. \\nRunning regression tests over again.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561050\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561050&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561050\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12561050_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561050_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 16:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T16:23:20+0000\'\u003e21\\/Jan\\/08 16:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the new patch, Dag. Now that the method names and variable names agree, it\'s easier for me to read the code.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat happens if you call popCallers() too many times? Will it fail gracefully or could this method use a little defensive logic?\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12561050_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561050_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 16:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T16:23:20+0000\'\u003e21\\/Jan\\/08 16:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the new patch, Dag. Now that the method names and variable names agree, it\'s easier for me to read the code. \\n\\n What happens if you call popCallers() too many times? Will it fail gracefully or could this method use a little defensive logic? \\n\\n Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561069\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561069&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561069\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561069_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561069_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 17:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T17:09:57+0000\'\u003e21\\/Jan\\/08 17:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt will give an IndexOutOfBoundsException, but it should never happen unless there is a\u003cbr\\/\u003e\\ncoding error, so I chose not to add any logic. Better to make it fail early, I think?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561069_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561069_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 17:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T17:09:57+0000\'\u003e21\\/Jan\\/08 17:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It will give an IndexOutOfBoundsException, but it should never happen unless there is a \\ncoding error, so I chose not to add any logic. Better to make it fail early, I think?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561075\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561075&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561075\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12561075_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561075_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 17:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T17:27:23+0000\'\u003e21\\/Jan\\/08 17:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks, Dag. I agree that since this is an internal error (triggered by a bug in Derby) that the IndexOutOfBoundsException is good enough. Cheers-Rick\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12561075_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561075_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Jan\\/08 17:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-21T17:27:23+0000\'\u003e21\\/Jan\\/08 17:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks, Dag. I agree that since this is an internal error (triggered by a bug in Derby) that the IndexOutOfBoundsException is good enough. Cheers-Rick              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561181\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561181&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561181\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561181_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561181_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 00:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T00:34:49+0000\'\u003e22\\/Jan\\/08 00:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOne high level comment and some specific comments on the patch:\u003c\\/p\u003e\\n\\n\u003cp\u003ehigh-level\u003cbr\\/\u003e\\n--------------\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems somewhat strange that this is implemented as a stack of activations and because of that we end up needing to store role information in two different places, in the LCC if it\'s the top-level and the activation otherwise. Since the activation represents an individual statement is its job to hold SQL context information?\u003c\\/p\u003e\\n\\n\u003cp\u003eLooking closer at the SQL standard (4.34.1.1 and 4.27.3) I\'m not sure the patch is implementing exactly what is described there.\u003cbr\\/\u003e\\nOne portion is the SQL-session context, that comes into being with the routine invocation. Then within the SQL-session context is an authorization stack.\u003cbr\\/\u003e\\nThe patch seems to be morphing the two into one, executing a routine creates just a role stack.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1331\\\" title=\\\"Derby&#39;s &quot;set schema&quot; behavior is not compliant with SQL 2003 Foundation spec.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1331\\\"\u003e\u003cdel\u003eDERBY-1331\u003c\\/del\u003e\u003c\\/a\u003e is an outstanding issue to handle SET SCHEMA within routines correctly, which I think falls into the SQL-session context logic, creating a morphed stack here might make it harder to fix that.\u003c\\/p\u003e\\n\\n\u003cp\u003eWould it make more sense to have objects that followed the model described by the SQL specification, even if currently they are not fully utilized?\u003c\\/p\u003e\\n\\n\u003cp\u003eSomething like:\u003cbr\\/\u003e\\n  SQLSessionContext - pushed for a routine call, stack maintained in the lcc\u003cbr\\/\u003e\\n             has a field for schema (future for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1331\\\" title=\\\"Derby&#39;s &quot;set schema&quot; behavior is not compliant with SQL 2003 Foundation spec.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1331\\\"\u003e\u003cdel\u003eDERBY-1331\u003c\\/del\u003e\u003c\\/a\u003e)\u003cbr\\/\u003e\\n             has a field for authorization stack (stack of AuthorizationCell)\u003c\\/p\u003e\\n\\n\u003cp\u003e   AuthorizationCell (see 4.34.1.1)\u003cbr\\/\u003e\\n             field for user identifier\u003cbr\\/\u003e\\n             field for role name\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eMaybe the existing StatementContext class is already fulfilling the purpose of SQLSessionContext?????\u003c\\/p\u003e\\n\\n\u003cp\u003especific patch comments\u003cbr\\/\u003e\\n----------------------------------\u003c\\/p\u003e\\n\\n\u003cp\u003eFor the field \'callers\' in GenericLanguageConnectionContext.java I think it\'s holding a stack of Activations. Could you state this in its javadoc.\u003cbr\\/\u003e\\n(oh for Java 5 \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the javadoc comment for \'callers\' it says:\u003c\\/p\u003e\\n\\n\u003cp\u003e   For the top level, the current role is kept here, cf. \'currentRole\'. \u003c\\/p\u003e\\n\\n\u003cp\u003eSince this is the javadoc for callers, the here applies to callers, but I think you really mean the current class. Would this be correct?\u003c\\/p\u003e\\n\\n\u003cp\u003e   For the top level, the current role is kept in this.currentRole.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eIn BaseActivation can the comments for the field callActivation be javadoc comments, so that IDE\'s will pick them up.\u003cbr\\/\u003e\\nCan comments be added for nestedCurrentRole.\u003c\\/p\u003e\\n\\n\u003cp\u003eEven with the comments for BaseActivation.callActivation I became a little confused. Looking elsewhere I can see that callActivation is the activation of the enclosing CALL statement, that would have been useful in the javadoc. I\'m somewhat confused by the need for BaseActivation.callActivation and the stack in the LCC. It seems that the stack of activations is being kept twice, once in LCC and once through the activations. \u003c\\/p\u003e\\n\\n\u003cp\u003eI wonder about the cost of this stack maintenance, for SQL routines that are defined as NO SQL it might be a significant overhead. E.g. SIN() function. Avoiding the context manipulation for those routines could be a follow on, but I\'d be interested in the overhead with this change.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561181_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561181_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 00:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T00:34:49+0000\'\u003e22\\/Jan\\/08 00:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    One high level comment and some specific comments on the patch: \\n\\n high-level \\n-------------- \\n\\n It seems somewhat strange that this is implemented as a stack of activations and because of that we end up needing to store role information in two different places, in the LCC if it\'s the top-level and the activation otherwise. Since the activation represents an individual statement is its job to hold SQL context information? \\n\\n Looking closer at the SQL standard (4.34.1.1 and 4.27.3) I\'m not sure the patch is implementing exactly what is described there. \\nOne portion is the SQL-session context, that comes into being with the routine invocation. Then within the SQL-session context is an authorization stack. \\nThe patch seems to be morphing the two into one, executing a routine creates just a role stack. \\n\\n   DERBY-1331   is an outstanding issue to handle SET SCHEMA within routines correctly, which I think falls into the SQL-session context logic, creating a morphed stack here might make it harder to fix that. \\n\\n Would it make more sense to have objects that followed the model described by the SQL specification, even if currently they are not fully utilized? \\n\\n Something like: \\n  SQLSessionContext - pushed for a routine call, stack maintained in the lcc \\n             has a field for schema (future for   DERBY-1331  ) \\n             has a field for authorization stack (stack of AuthorizationCell) \\n\\n    AuthorizationCell (see 4.34.1.1) \\n             field for user identifier \\n             field for role name \\n\\n\\n Maybe the existing StatementContext class is already fulfilling the purpose of SQLSessionContext????? \\n\\n specific patch comments \\n---------------------------------- \\n\\n For the field \'callers\' in GenericLanguageConnectionContext.java I think it\'s holding a stack of Activations. Could you state this in its javadoc. \\n(oh for Java 5   \\n\\n In the javadoc comment for \'callers\' it says: \\n\\n    For the top level, the current role is kept here, cf. \'currentRole\'.  \\n\\n Since this is the javadoc for callers, the here applies to callers, but I think you really mean the current class. Would this be correct? \\n\\n    For the top level, the current role is kept in this.currentRole. \\n\\n\\n In BaseActivation can the comments for the field callActivation be javadoc comments, so that IDE\'s will pick them up. \\nCan comments be added for nestedCurrentRole. \\n\\n Even with the comments for BaseActivation.callActivation I became a little confused. Looking elsewhere I can see that callActivation is the activation of the enclosing CALL statement, that would have been useful in the javadoc. I\'m somewhat confused by the need for BaseActivation.callActivation and the stack in the LCC. It seems that the stack of activations is being kept twice, once in LCC and once through the activations.  \\n\\n I wonder about the cost of this stack maintenance, for SQL routines that are defined as NO SQL it might be a significant overhead. E.g. SIN() function. Avoiding the context manipulation for those routines could be a follow on, but I\'d be interested in the overhead with this change. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561182\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561182&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561182\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561182_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561182_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 00:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T00:37:21+0000\'\u003e22\\/Jan\\/08 00:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRe-ran regression tests then committed \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-3 as svn 614071, resolving.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561182_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561182_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 00:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T00:37:21+0000\'\u003e22\\/Jan\\/08 00:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Re-ran regression tests then committed   DERBY-3327  -3 as svn 614071, resolving.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561183\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561183&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561183\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561183_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561183_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 00:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T00:40:17+0000\'\u003e22\\/Jan\\/08 00:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSorry, Dan, I belatedly (I committed the patch) noticed you had further comments on this issue, thanks for looking at it!\u003cbr\\/\u003e\\nI will reopen this issue and consider them.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561183_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561183_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 00:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T00:40:17+0000\'\u003e22\\/Jan\\/08 00:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Sorry, Dan, I belatedly (I committed the patch) noticed you had further comments on this issue, thanks for looking at it! \\nI will reopen this issue and consider them.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561186\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561186&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561186\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561186_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561186_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 00:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T00:49:40+0000\'\u003e22\\/Jan\\/08 00:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003enp - one other item is that according to section 10.4 routine invocation the order is:\u003c\\/p\u003e\\n\\n\u003cp\u003e  GR2) Evaluate arguments\u003cbr\\/\u003e\\n  GR5) Push new SQL-session context (RSC)\u003cbr\\/\u003e\\n  GR7\\/8) Execute the routine\u003c\\/p\u003e\\n\\n\u003cp\u003eThe order in the patch is:\u003cbr\\/\u003e\\n   A) Push new authorization context\u003cbr\\/\u003e\\n   B) Evaluate arguments\u003cbr\\/\u003e\\n   C) Execute the routine\u003c\\/p\u003e\\n\\n\u003cp\u003eTo match the order of the spec the new context would need to be part of the generated code.\u003cbr\\/\u003e\\nNot sure if it makes any difference or not, but something to consider.\u003c\\/p\u003e\\n\\n\u003cp\u003eOk - one other item ...\u003cbr\\/\u003e\\n   I don\'t think the patch addresses functions, since the lcc.pushCaller() is only set from  CallStatementResultSet.\u003c\\/p\u003e\\n\\n\u003cp\u003ePerforming the context setup in generated code would solve both of these issues.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561186_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561186_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 00:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T00:49:40+0000\'\u003e22\\/Jan\\/08 00:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    np - one other item is that according to section 10.4 routine invocation the order is: \\n\\n   GR2) Evaluate arguments \\n  GR5) Push new SQL-session context (RSC) \\n  GR7\\/8) Execute the routine \\n\\n The order in the patch is: \\n   A) Push new authorization context \\n   B) Evaluate arguments \\n   C) Execute the routine \\n\\n To match the order of the spec the new context would need to be part of the generated code. \\nNot sure if it makes any difference or not, but something to consider. \\n\\n Ok - one other item ... \\n   I don\'t think the patch addresses functions, since the lcc.pushCaller() is only set from  CallStatementResultSet. \\n\\n Performing the context setup in generated code would solve both of these issues.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561421\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561421&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561421\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561421_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561421_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T19:05:34+0000\'\u003e22\\/Jan\\/08 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ll answer in two segments, the first on the specific patch comments,\u003cbr\\/\u003e\\nthen on the larger issues.\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eSpecific patch comments\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e&gt; For the field \'callers\' in GenericLanguageConnectionContext.java I\u003cbr\\/\u003e\\n&gt; think it\'s holding a stack of Activations. Could you state this in\u003cbr\\/\u003e\\n&gt; its javadoc.  (oh for Java 5 \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eYes, I thought I did say it (\\\"keeps track of which, if any, stored\u003cbr\\/\u003e\\nprocedure activations are active\\\"), but I will make it\u003cbr\\/\u003e\\nclearer. Generics would have been nice here, yes \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e&gt; In the javadoc comment for \'callers\' it says:\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt;    For the top level, the current role is kept here, cf. \'currentRole\'.\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; Since this is the javadoc for callers, the here applies to callers,\u003cbr\\/\u003e\\n&gt; but I think you really mean the current class. Would this be\u003cbr\\/\u003e\\n&gt; correct?\u003c\\/p\u003e\\n\\n\u003cp\u003eYou are right. I have moved this comment to where it belongs, with\u003cbr\\/\u003e\\n\\\"currentRole\\\".\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; In BaseActivation can the comments for the field callActivation be\u003cbr\\/\u003e\\n&gt; javadoc comments, so that IDE\'s will pick them up.\u003c\\/p\u003e\\n\\n\u003cp\u003eAgree, will do.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Can comments be added for nestedCurrentRole.\u003c\\/p\u003e\\n\\n\u003cp\u003eAgree, will do.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Even with the comments for BaseActivation.callActivation I became a\u003cbr\\/\u003e\\n&gt; little confused. Looking elsewhere I can see that callActivation is\u003cbr\\/\u003e\\n&gt; the activation of the enclosing CALL statement, that would have been\u003cbr\\/\u003e\\n&gt; useful in the javadoc. \u003c\\/p\u003e\\n\\n\u003cp\u003eAdding an explicit statement about that.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I\'m somewhat confused by the need for BaseActivation.callActivation\u003cbr\\/\u003e\\n&gt; and the stack in the LCC. It seems that the stack of activations is\u003cbr\\/\u003e\\n&gt; being kept twice, once in LCC and once through the activations.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt\'s probably redundant, I will try again see if I can get rid of it.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003e&gt; I wonder about the cost of this stack maintenance, for SQL routines\u003cbr\\/\u003e\\n&gt; that are defined as NO SQL it might be a significant\u003cbr\\/\u003e\\n&gt; overhead. E.g. SIN() function. Avoiding the context manipulation for\u003cbr\\/\u003e\\n&gt; those routines could be a follow on, but I\'d be interested in the\u003cbr\\/\u003e\\n&gt; overhead with this change.\u003c\\/p\u003e\\n\\n\u003cp\u003eRight. I\'ll run some tests. Moving the pushing to code generation (as\u003cbr\\/\u003e\\nyou also) should help us get rid of the overhead for NO SQL functions,\u003cbr\\/\u003e\\ntoo.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; np - one other item is that according to section 10.4 routine\u003cbr\\/\u003e\\n&gt; invocation the order is:\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt;   GR2) Evaluate arguments\u003cbr\\/\u003e\\n&gt;   GR5) Push new SQL-session context (RSC)\u003cbr\\/\u003e\\n&gt;   GR7\\/8) Execute the routine\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; The order in the patch is:\u003cbr\\/\u003e\\n&gt;    A) Push new authorization context\u003cbr\\/\u003e\\n&gt;    B) Evaluate arguments\u003cbr\\/\u003e\\n&gt;    C) Execute the routine\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; To match the order of the spec the new context would need to be part\u003cbr\\/\u003e\\n&gt; of the generated code.  Not sure if it makes any difference or not,\u003cbr\\/\u003e\\n&gt; but something to consider.\u003c\\/p\u003e\\n\\n\u003cp\u003eI think as long as we run with invoker\'s right it does not matter, but\u003cbr\\/\u003e\\nif\\/when we decide to add the ability to run with definer\'s rights it\u003cbr\\/\u003e\\nwould, since for example an argument refering CURRENT_USER would then\u003cbr\\/\u003e\\nevaluate differently depending on whether the authorization stack was\u003cbr\\/\u003e\\npushed or not, so it would be good to do it in the right order,\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; I don\'t think the patch addresses functions, since the\u003cbr\\/\u003e\\n&gt; lcc.pushCaller() is only set from CallStatementResultSet.\u003c\\/p\u003e\\n\\n\u003cp\u003eYes, thanks. I had added a test (buggy!) which blind sided me there\u003cbr\\/\u003e\\nfor a while.\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eLarger issues\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e&gt; It seems somewhat strange that this is implemented as a stack of\u003cbr\\/\u003e\\n&gt; activations and because of that we end up needing to store role\u003cbr\\/\u003e\\n&gt; information in two different places, in the LCC if it\'s the\u003cbr\\/\u003e\\n&gt; top-level and the activation otherwise. Since the activation\u003cbr\\/\u003e\\n&gt; represents an individual statement is its job to hold SQL context\u003cbr\\/\u003e\\n&gt; information?\u003c\\/p\u003e\\n\\n\u003cp\u003eIt is a bit awkward, and it may be the wrong choice.  I would have\u003cbr\\/\u003e\\npreferred an explicit representation of the new session context (SQL\u003cbr\\/\u003e\\n10.4\'s \\\"RSC\\\", perhaps called SQLSessionContext object, as you\u003cbr\\/\u003e\\nsuggest), but I did not find one \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e I looked at ConnectionContext and\u003cbr\\/\u003e\\nStatementContext but these classes seems to be available only at the\u003cbr\\/\u003e\\nJDBC level. At execution time, it seems we have to rely on what\'s\u003cbr\\/\u003e\\nreachable from the activation (lcc, transaction controller, result\u003cbr\\/\u003e\\nset). Somehow, the activation needs to know its dynamic nesting so\u003cbr\\/\u003e\\nthat it can access the correct dynamic context. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1331\\\" title=\\\"Derby&#39;s &quot;set schema&quot; behavior is not compliant with SQL 2003 Foundation spec.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1331\\\"\u003e\u003cdel\u003eDERBY-1331\u003c\\/del\u003e\u003c\\/a\u003e would seem\u003cbr\\/\u003e\\nto indicate we need to go this route at some point anyway, so I\'ll\u003cbr\\/\u003e\\nhave a go.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; \u003cbr\\/\u003e\\n&gt; Looking closer at the SQL standard (4.34.1.1 and 4.27.3) I\'m not\u003cbr\\/\u003e\\n&gt; sure the patch is implementing exactly what is described there.  One\u003cbr\\/\u003e\\n&gt; portion is the SQL-session context, that comes into being with the\u003cbr\\/\u003e\\n&gt; routine invocation. Then within the SQL-session context is an\u003cbr\\/\u003e\\n&gt; authorization stack.  The patch seems to be morphing the two into\u003cbr\\/\u003e\\n&gt; one, executing a routine creates just a role stack.\u003c\\/p\u003e\\n\\n\u003cp\u003eRight, although interpreting the standard literally (GR 5.h: \\\"copying\u003cbr\\/\u003e\\nthe authorization stack\\\") seems to be inefficient, so some morphing\u003cbr\\/\u003e\\nmay be useful \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Would it make more sense to have objects that followed the model\u003cbr\\/\u003e\\n&gt; described by the SQL specification, even if currently they are not\u003cbr\\/\u003e\\n&gt; fully utilized?\u003c\\/p\u003e\\n\\n\u003cp\u003eYes, I think so.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; \u003cbr\\/\u003e\\n&gt; Something like:\u003cbr\\/\u003e\\n&gt;   SQLSessionContext - pushed for a routine call, stack maintained in the lcc\u003cbr\\/\u003e\\n&gt;              has a field for schema (future for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1331\\\" title=\\\"Derby&#39;s &quot;set schema&quot; behavior is not compliant with SQL 2003 Foundation spec.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1331\\\"\u003e\u003cdel\u003eDERBY-1331\u003c\\/del\u003e\u003c\\/a\u003e)\u003cbr\\/\u003e\\n&gt;              has a field for authorization stack (stack of AuthorizationCell)\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt;    AuthorizationCell (see 4.34.1.1)\u003cbr\\/\u003e\\n&gt;              field for user identifier\u003cbr\\/\u003e\\n&gt;              field for role name\u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; \u003cbr\\/\u003e\\n&gt; Maybe the existing StatementContext class is already fulfilling the\u003cbr\\/\u003e\\n&gt; purpose of SQLSessionContext?????\u003c\\/p\u003e\\n\\n\u003cp\u003eIt does not seem to be reachable from the activation; being confined\u003cbr\\/\u003e\\nto the JDBC level? A stack of StatementContext is kept in the lcc, but\u003cbr\\/\u003e\\nthe activation does not know which one represents it, AFAICT. I\'ll\u003cbr\\/\u003e\\nhave another look, perhaps it could be extended with the information\u003cbr\\/\u003e\\nneeded an allow references from the activation? I think it would be\u003cbr\\/\u003e\\nbetter to add new SQLSessionContext, to keep the separation between\u003cbr\\/\u003e\\nthe JDBC and SQL level intact?\u003c\\/p\u003e\\n\\n\u003cp\u003eAnyway, I\'ll first fix up the current solution with your comments and\u003cbr\\/\u003e\\nthen try to work on a more general solution.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561421_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561421_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 19:05\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T19:05:34+0000\'\u003e22\\/Jan\\/08 19:05\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ll answer in two segments, the first on the specific patch comments, \\nthen on the larger issues. \\n\\n \\n\\t Specific patch comments \\n \\n\\n\\n &gt; For the field \'callers\' in GenericLanguageConnectionContext.java I \\n&gt; think it\'s holding a stack of Activations. Could you state this in \\n&gt; its javadoc.  (oh for Java 5   \\n\\n Yes, I thought I did say it (\\\"keeps track of which, if any, stored \\nprocedure activations are active\\\"), but I will make it \\nclearer. Generics would have been nice here, yes   \\n\\n\\n &gt; In the javadoc comment for \'callers\' it says: \\n&gt;  \\n&gt;    For the top level, the current role is kept here, cf. \'currentRole\'. \\n&gt;  \\n&gt; Since this is the javadoc for callers, the here applies to callers, \\n&gt; but I think you really mean the current class. Would this be \\n&gt; correct? \\n\\n You are right. I have moved this comment to where it belongs, with \\n\\\"currentRole\\\". \\n\\n &gt; In BaseActivation can the comments for the field callActivation be \\n&gt; javadoc comments, so that IDE\'s will pick them up. \\n\\n Agree, will do. \\n\\n &gt; Can comments be added for nestedCurrentRole. \\n\\n Agree, will do. \\n\\n &gt; Even with the comments for BaseActivation.callActivation I became a \\n&gt; little confused. Looking elsewhere I can see that callActivation is \\n&gt; the activation of the enclosing CALL statement, that would have been \\n&gt; useful in the javadoc.  \\n\\n Adding an explicit statement about that. \\n\\n &gt; I\'m somewhat confused by the need for BaseActivation.callActivation \\n&gt; and the stack in the LCC. It seems that the stack of activations is \\n&gt; being kept twice, once in LCC and once through the activations. \\n\\n It\'s probably redundant, I will try again see if I can get rid of it. \\n\\n\\n &gt; I wonder about the cost of this stack maintenance, for SQL routines \\n&gt; that are defined as NO SQL it might be a significant \\n&gt; overhead. E.g. SIN() function. Avoiding the context manipulation for \\n&gt; those routines could be a follow on, but I\'d be interested in the \\n&gt; overhead with this change. \\n\\n Right. I\'ll run some tests. Moving the pushing to code generation (as \\nyou also) should help us get rid of the overhead for NO SQL functions, \\ntoo. \\n\\n &gt; np - one other item is that according to section 10.4 routine \\n&gt; invocation the order is: \\n&gt;  \\n&gt;   GR2) Evaluate arguments \\n&gt;   GR5) Push new SQL-session context (RSC) \\n&gt;   GR7\\/8) Execute the routine \\n&gt;  \\n&gt; The order in the patch is: \\n&gt;    A) Push new authorization context \\n&gt;    B) Evaluate arguments \\n&gt;    C) Execute the routine \\n&gt;  \\n&gt; To match the order of the spec the new context would need to be part \\n&gt; of the generated code.  Not sure if it makes any difference or not, \\n&gt; but something to consider. \\n\\n I think as long as we run with invoker\'s right it does not matter, but \\nif\\/when we decide to add the ability to run with definer\'s rights it \\nwould, since for example an argument refering CURRENT_USER would then \\nevaluate differently depending on whether the authorization stack was \\npushed or not, so it would be good to do it in the right order, \\n\\n &gt; I don\'t think the patch addresses functions, since the \\n&gt; lcc.pushCaller() is only set from CallStatementResultSet. \\n\\n Yes, thanks. I had added a test (buggy!) which blind sided me there \\nfor a while. \\n\\n \\n\\t Larger issues \\n \\n\\n\\n &gt; It seems somewhat strange that this is implemented as a stack of \\n&gt; activations and because of that we end up needing to store role \\n&gt; information in two different places, in the LCC if it\'s the \\n&gt; top-level and the activation otherwise. Since the activation \\n&gt; represents an individual statement is its job to hold SQL context \\n&gt; information? \\n\\n It is a bit awkward, and it may be the wrong choice.  I would have \\npreferred an explicit representation of the new session context (SQL \\n10.4\'s \\\"RSC\\\", perhaps called SQLSessionContext object, as you \\nsuggest), but I did not find one   I looked at ConnectionContext and \\nStatementContext but these classes seems to be available only at the \\nJDBC level. At execution time, it seems we have to rely on what\'s \\nreachable from the activation (lcc, transaction controller, result \\nset). Somehow, the activation needs to know its dynamic nesting so \\nthat it can access the correct dynamic context.   DERBY-1331   would seem \\nto indicate we need to go this route at some point anyway, so I\'ll \\nhave a go. \\n\\n &gt;  \\n&gt; Looking closer at the SQL standard (4.34.1.1 and 4.27.3) I\'m not \\n&gt; sure the patch is implementing exactly what is described there.  One \\n&gt; portion is the SQL-session context, that comes into being with the \\n&gt; routine invocation. Then within the SQL-session context is an \\n&gt; authorization stack.  The patch seems to be morphing the two into \\n&gt; one, executing a routine creates just a role stack. \\n\\n Right, although interpreting the standard literally (GR 5.h: \\\"copying \\nthe authorization stack\\\") seems to be inefficient, so some morphing \\nmay be useful   \\n\\n &gt; Would it make more sense to have objects that followed the model \\n&gt; described by the SQL specification, even if currently they are not \\n&gt; fully utilized? \\n\\n Yes, I think so. \\n\\n &gt;  \\n&gt; Something like: \\n&gt;   SQLSessionContext - pushed for a routine call, stack maintained in the lcc \\n&gt;              has a field for schema (future for   DERBY-1331  ) \\n&gt;              has a field for authorization stack (stack of AuthorizationCell) \\n&gt;  \\n&gt;    AuthorizationCell (see 4.34.1.1) \\n&gt;              field for user identifier \\n&gt;              field for role name \\n&gt;  \\n&gt;  \\n&gt; Maybe the existing StatementContext class is already fulfilling the \\n&gt; purpose of SQLSessionContext????? \\n\\n It does not seem to be reachable from the activation; being confined \\nto the JDBC level? A stack of StatementContext is kept in the lcc, but \\nthe activation does not know which one represents it, AFAICT. I\'ll \\nhave another look, perhaps it could be extended with the information \\nneeded an allow references from the activation? I think it would be \\nbetter to add new SQLSessionContext, to keep the separation between \\nthe JDBC and SQL level intact? \\n\\n Anyway, I\'ll first fix up the current solution with your comments and \\nthen try to work on a more general solution.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561476\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561476&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561476\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561476_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561476_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 21:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T21:29:00+0000\'\u003e22\\/Jan\\/08 21:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the detailed reply\u003c\\/p\u003e\\n\\n\u003cp\u003eStatementContexts are not for the JDBC layer, they are really for the SQL layer. The current statement context can be obtained using lcc.getStatementContext(). If an activation (or its result set) is being executed in any way  then it is the current statement context. Derby is only actively executing a single statement at any time for a connection.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnother thought is that the context manager exists to handle pushing and popping of contexts, so should this existing paradigm be used to manage new contexts such as a SQLSessionContext or authentication stack. Then error cleanup would be handled consistently, rather than introducing a new mechanism with a different paradigm.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe statement context may not match the SQLSessionContext in all cases (e.g. it maybe does for a procedure call but not for a function call).\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561476_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561476_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 21:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T21:29:00+0000\'\u003e22\\/Jan\\/08 21:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the detailed reply \\n\\n StatementContexts are not for the JDBC layer, they are really for the SQL layer. The current statement context can be obtained using lcc.getStatementContext(). If an activation (or its result set) is being executed in any way  then it is the current statement context. Derby is only actively executing a single statement at any time for a connection. \\n\\n Another thought is that the context manager exists to handle pushing and popping of contexts, so should this existing paradigm be used to manage new contexts such as a SQLSessionContext or authentication stack. Then error cleanup would be handled consistently, rather than introducing a new mechanism with a different paradigm. \\n\\n The statement context may not match the SQLSessionContext in all cases (e.g. it maybe does for a procedure call but not for a function call). \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561507\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561507&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561507\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561507_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561507_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 23:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T23:01:15+0000\'\u003e22\\/Jan\\/08 23:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the information, it is very useful!\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen you suggest the StatementContext may be sufficient to hold the SQL session context, I presume you mean the StatementContext of the calling statement? It has (about) the same lifetime as the procedure invocation - but see question below. So the activation and\\/or statementContext of, say, a nested \\\"VALUES CURRENT_USER\\\" would reference the parent (CALL) statement context to get at the nested SQL session context? If you meant the statement context of the \\\"VALUES CURRENT_USER\\\", it has to get its session state from somewhere? (As I understand it, the lifetime of the statement context is limited to prepare and\\/or execution of a single statement.)\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat about the following case: I think the activations of dynamic result sets may need the dynamic context after the procedure has returned, say, if the statement yielding the result set references CURRENT_ROLE and that this is evaluated lazily only when the cursor is accessed (rs.next()). The statement context for the CALL has been popped (and reset) at that time (from GEnericPreparedStatement#execute), right? Would it be ok with the current model for it to stay live until the dynamic result set us closed? If not, perhaps a separate SQLConnectionContext (which could stay around longer) is better?\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso, since the lcc.getStatementContext returns the current top context, it would not yield the right one if invoked by a dynamic result set of an activation after procedure return, I think?\u003c\\/p\u003e\\n\\n\u003cp\u003eSorry if I am misconstruing reality here; trying to understand more \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561507_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561507_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 23:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T23:01:15+0000\'\u003e22\\/Jan\\/08 23:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the information, it is very useful! \\n\\n When you suggest the StatementContext may be sufficient to hold the SQL session context, I presume you mean the StatementContext of the calling statement? It has (about) the same lifetime as the procedure invocation - but see question below. So the activation and\\/or statementContext of, say, a nested \\\"VALUES CURRENT_USER\\\" would reference the parent (CALL) statement context to get at the nested SQL session context? If you meant the statement context of the \\\"VALUES CURRENT_USER\\\", it has to get its session state from somewhere? (As I understand it, the lifetime of the statement context is limited to prepare and\\/or execution of a single statement.) \\n\\n What about the following case: I think the activations of dynamic result sets may need the dynamic context after the procedure has returned, say, if the statement yielding the result set references CURRENT_ROLE and that this is evaluated lazily only when the cursor is accessed (rs.next()). The statement context for the CALL has been popped (and reset) at that time (from GEnericPreparedStatement#execute), right? Would it be ok with the current model for it to stay live until the dynamic result set us closed? If not, perhaps a separate SQLConnectionContext (which could stay around longer) is better? \\n\\n Also, since the lcc.getStatementContext returns the current top context, it would not yield the right one if invoked by a dynamic result set of an activation after procedure return, I think? \\n\\n Sorry if I am misconstruing reality here; trying to understand more   \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561513\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561513&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561513\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561513_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561513_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 23:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T23:16:13+0000\'\u003e22\\/Jan\\/08 23:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; (As I understand it, the lifetime of the statement context is limited to prepare and\\/or execution of a single statement.) \u003c\\/p\u003e\\n\\n\u003cp\u003eNo, the statement context is set up during the ResultSet.next() or any positioning call as well. Code that is executing or fetching rows will have the most recently pushed statement context associated with it. This is so that a statement level exception error handling affects the currently executing statement.\u003c\\/p\u003e\\n\\n\u003cp\u003eWith a dynamic result I believe that when it is executing (e.g. a next() call) then the most recently pushed statement context will be associated with that result set and the activation\\/statement that created it.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo I think I mean only that any statement would always just refer to its StatementContext, which is the most recently pushed one since the statement must be being executed.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561513_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561513_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Jan\\/08 23:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-22T23:16:13+0000\'\u003e22\\/Jan\\/08 23:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; (As I understand it, the lifetime of the statement context is limited to prepare and\\/or execution of a single statement.)  \\n\\n No, the statement context is set up during the ResultSet.next() or any positioning call as well. Code that is executing or fetching rows will have the most recently pushed statement context associated with it. This is so that a statement level exception error handling affects the currently executing statement. \\n\\n With a dynamic result I believe that when it is executing (e.g. a next() call) then the most recently pushed statement context will be associated with that result set and the activation\\/statement that created it. \\n\\n So I think I mean only that any statement would always just refer to its StatementContext, which is the most recently pushed one since the statement must be being executed. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561741\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561741&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561741\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561741_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561741_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 17:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T17:18:46+0000\'\u003e23\\/Jan\\/08 17:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for helping me understand this better!. \u003c\\/p\u003e\\n\\n\u003cp\u003eSo, I can trust the correct statement context to be available at\u003cbr\\/\u003e\\nexecution time. But it still seems not to be sufficient?  The\u003cbr\\/\u003e\\nstatement context is initialized when pushed on the basis of read-only\u003cbr\\/\u003e\\ninformation from EmbedStatement (which is a JDBC level object if I am\u003cbr\\/\u003e\\nnot mistaken again \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e whenever we are preparing\\/executing\\/using the\u003cbr\\/\u003e\\nresult set of a statement, but it does not have the lifetime of the\u003cbr\\/\u003e\\nprocedure so it can\'t hold the mutable state of current user, role and\u003cbr\\/\u003e\\nschema?\u003c\\/p\u003e\\n\\n\u003cp\u003eThose would have to be stored in a data structure that would persist\u003cbr\\/\u003e\\nthroughout the lifetime of the procedure, I think. First I looked the\u003cbr\\/\u003e\\nstatement context of the caller. But using the debugger I see that the\u003cbr\\/\u003e\\nstatement context of the call of not pushed back when the a next() is\u003cbr\\/\u003e\\nperformed outside the caller on the returned dynamic result set, so\u003cbr\\/\u003e\\neven the statement context of the caller seems to have too short a\u003cbr\\/\u003e\\nlifetime to hold the dynamic state of the nested scope.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo unless I am still missing something here, I will try to work\u003cbr\\/\u003e\\ntowards a new context object to hold the nested SQL session state.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561741_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561741_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 17:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T17:18:46+0000\'\u003e23\\/Jan\\/08 17:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for helping me understand this better!.  \\n\\n So, I can trust the correct statement context to be available at \\nexecution time. But it still seems not to be sufficient?  The \\nstatement context is initialized when pushed on the basis of read-only \\ninformation from EmbedStatement (which is a JDBC level object if I am \\nnot mistaken again   whenever we are preparing\\/executing\\/using the \\nresult set of a statement, but it does not have the lifetime of the \\nprocedure so it can\'t hold the mutable state of current user, role and \\nschema? \\n\\n Those would have to be stored in a data structure that would persist \\nthroughout the lifetime of the procedure, I think. First I looked the \\nstatement context of the caller. But using the debugger I see that the \\nstatement context of the call of not pushed back when the a next() is \\nperformed outside the caller on the returned dynamic result set, so \\neven the statement context of the caller seems to have too short a \\nlifetime to hold the dynamic state of the nested scope. \\n\\n So unless I am still missing something here, I will try to work \\ntowards a new context object to hold the nested SQL session state.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561747\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561747&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561747\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561747_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561747_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 17:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T17:49:49+0000\'\u003e23\\/Jan\\/08 17:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJust to be clear, I\'m not recommending the StatementContext, just trying to ensure that some understanding of it exists before another context is added. The wrong approach would be to blindly add a new context just because StatementContext is not understood. I think there is probably some overlap between the StatementContext and a SQLSessionContext, but maybe StatementContext does not quite match the role of SQLSessionContext, but then what role is StatementContext implementing in the model defined by the SQL standard? Discussion like this is good to get an understanding.\u003c\\/p\u003e\\n\\n\u003cp\u003eMaybe Activation is acting as the SQLSession context, as in your first patch?\u003c\\/p\u003e\\n\\n\u003cp\u003eI think in the last comment you raise an interesting point: For a procedure that sets a role R and returns dynamic result sets, the role in force during the processing of those dynamic result sets needs to be R, even though the execute of the CALL returned (and thus R was popped from some stack).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561747_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561747_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 17:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T17:49:49+0000\'\u003e23\\/Jan\\/08 17:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Just to be clear, I\'m not recommending the StatementContext, just trying to ensure that some understanding of it exists before another context is added. The wrong approach would be to blindly add a new context just because StatementContext is not understood. I think there is probably some overlap between the StatementContext and a SQLSessionContext, but maybe StatementContext does not quite match the role of SQLSessionContext, but then what role is StatementContext implementing in the model defined by the SQL standard? Discussion like this is good to get an understanding. \\n\\n Maybe Activation is acting as the SQLSession context, as in your first patch? \\n\\n I think in the last comment you raise an interesting point: For a procedure that sets a role R and returns dynamic result sets, the role in force during the processing of those dynamic result sets needs to be R, even though the execute of the CALL returned (and thus R was popped from some stack).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561751\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561751&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561751\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561751_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561751_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 18:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T18:09:58+0000\'\u003e23\\/Jan\\/08 18:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI see the point about dynamic result sets was already noted in the functional spec.\u003c\\/p\u003e\\n\\n\u003cp\u003eLooking closely at SET ROLE I see it doesn\'t require a authorization stack (within a SQLSessionContext) because it only modifies the current role, it never pushes a new cell onto the authorization stack.\u003c\\/p\u003e\\n\\n\u003cp\u003eSo I\'m coming to thinking that the initial patch is basically correct, with the exception that there is no need to have a stack of activations or to link an activation to its caller. It seems to me the current stacking of StatementContexts has the required information already, upon execution the role of the activation needs to be taken from the role of the activation of currently executing statement (the most recently pushed StatementContext) or the lcc if there is no currently statement being executed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"djd\\\" id=\\\"commentauthor_12561751_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=djd\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"djd\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Daniel John Debrunner\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561751_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 18:09\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T18:09:58+0000\'\u003e23\\/Jan\\/08 18:09\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I see the point about dynamic result sets was already noted in the functional spec. \\n\\n Looking closely at SET ROLE I see it doesn\'t require a authorization stack (within a SQLSessionContext) because it only modifies the current role, it never pushes a new cell onto the authorization stack. \\n\\n So I\'m coming to thinking that the initial patch is basically correct, with the exception that there is no need to have a stack of activations or to link an activation to its caller. It seems to me the current stacking of StatementContexts has the required information already, upon execution the role of the activation needs to be taken from the role of the activation of currently executing statement (the most recently pushed StatementContext) or the lcc if there is no currently statement being executed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561754\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561754&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561754\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561754_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561754_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 18:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T18:15:56+0000\'\u003e23\\/Jan\\/08 18:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; The wrong approach would be to blindly add a new\u003cbr\\/\u003e\\n&gt; context just because StatementContext is not understood. I think there\u003cbr\\/\u003e\\n&gt; is probably some overlap between the StatementContext and a\u003cbr\\/\u003e\\n&gt; SQLSessionContext, but maybe StatementContext does not quite match the\u003cbr\\/\u003e\\n&gt; role of SQLSessionContext, but then what role is StatementContext\u003cbr\\/\u003e\\n&gt; implementing in the model defined by the SQL standard? Discussion like\u003cbr\\/\u003e\\n&gt; this is good to get an understanding.\u003c\\/p\u003e\\n\\n\u003cp\u003eI absolutely agree, I am happy to get your feedback on this, Dan!\u003cbr\\/\u003e\\nI will try to find out where Statement context fits in by reading up\u003cbr\\/\u003e\\na bit in the standard.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; Maybe Activation is acting as the SQLSession context, as in your first\u003cbr\\/\u003e\\n&gt; patch?\u003cbr\\/\u003e\\n&gt; I think in the last comment you raise an interesting point: For a\u003cbr\\/\u003e\\n&gt; procedure that sets a role R and returns dynamic result sets, the role\u003cbr\\/\u003e\\n&gt; in force during the processing of those dynamic result sets needs to\u003cbr\\/\u003e\\n&gt; be R, even though the execute of the CALL returned (and thus R was\u003cbr\\/\u003e\\n&gt; popped from some stack).\u003c\\/p\u003e\\n\\n\u003cp\u003eI don\'t really grasp fully the design rationales involved in the\u003cbr\\/\u003e\\nexisting code here, I readily admit that. I used the activation of the\u003cbr\\/\u003e\\ncaller because it seems to have the correct lifetime to handle also\u003cbr\\/\u003e\\nthe dynamic result case (making R available after the call has\u003cbr\\/\u003e\\nreturned).\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I don\'t like about that solution is that the asymmetry (lcc for\u003cbr\\/\u003e\\nouter, caller activation for inner scopes); it would be nice to have a\u003cbr\\/\u003e\\nSQLSessionContext uniformly available somehow from both the root\u003cbr\\/\u003e\\nconnection scope and inside the procedures...\u003c\\/p\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561754_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561754_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 18:15\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T18:15:56+0000\'\u003e23\\/Jan\\/08 18:15\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; The wrong approach would be to blindly add a new \\n&gt; context just because StatementContext is not understood. I think there \\n&gt; is probably some overlap between the StatementContext and a \\n&gt; SQLSessionContext, but maybe StatementContext does not quite match the \\n&gt; role of SQLSessionContext, but then what role is StatementContext \\n&gt; implementing in the model defined by the SQL standard? Discussion like \\n&gt; this is good to get an understanding. \\n\\n I absolutely agree, I am happy to get your feedback on this, Dan! \\nI will try to find out where Statement context fits in by reading up \\na bit in the standard. \\n\\n &gt; Maybe Activation is acting as the SQLSession context, as in your first \\n&gt; patch? \\n&gt; I think in the last comment you raise an interesting point: For a \\n&gt; procedure that sets a role R and returns dynamic result sets, the role \\n&gt; in force during the processing of those dynamic result sets needs to \\n&gt; be R, even though the execute of the CALL returned (and thus R was \\n&gt; popped from some stack). \\n\\n I don\'t really grasp fully the design rationales involved in the \\nexisting code here, I readily admit that. I used the activation of the \\ncaller because it seems to have the correct lifetime to handle also \\nthe dynamic result case (making R available after the call has \\nreturned). \\n\\n What I don\'t like about that solution is that the asymmetry (lcc for \\nouter, caller activation for inner scopes); it would be nice to have a \\nSQLSessionContext uniformly available somehow from both the root \\nconnection scope and inside the procedures... \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12561772\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12561772&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12561772\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561772_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561772_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T18:58:08+0000\'\u003e23\\/Jan\\/08 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt; Looking closely at SET ROLE I see it doesn\'t require a authorization\u003cbr\\/\u003e\\n&gt; stack (within a SQLSessionContext) because it only modifies the\u003cbr\\/\u003e\\n&gt; current role, it never pushes a new cell onto the authorization stack.\u003c\\/p\u003e\\n\\n\u003cp\u003eYes, thats how I understand it also, it just needs access to the top element\u003cbr\\/\u003e\\nsomehow, but does not need to see a stack.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; So I\'m coming to thinking that the initial patch is basically correct,\u003cbr\\/\u003e\\n&gt; with the exception that there is no need to have a stack of\u003cbr\\/\u003e\\n&gt; activations or to link an activation to its caller. It seems to me the\u003cbr\\/\u003e\\n&gt; current stacking of StatementContexts has the required information\u003cbr\\/\u003e\\n&gt; already, upon execution the role of the activation needs to be taken\u003cbr\\/\u003e\\n&gt; from the role of the activation of currently executing statement (the\u003cbr\\/\u003e\\n&gt; most recently pushed StatementContext) or the lcc if there is no\u003cbr\\/\u003e\\n&gt; currently statement being executed.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks, I will investigate this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12561772_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12561772_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Jan\\/08 18:58\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-01-23T18:58:08+0000\'\u003e23\\/Jan\\/08 18:58\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt; Looking closely at SET ROLE I see it doesn\'t require a authorization \\n&gt; stack (within a SQLSessionContext) because it only modifies the \\n&gt; current role, it never pushes a new cell onto the authorization stack. \\n\\n Yes, thats how I understand it also, it just needs access to the top element \\nsomehow, but does not need to see a stack. \\n\\n &gt; So I\'m coming to thinking that the initial patch is basically correct, \\n&gt; with the exception that there is no need to have a stack of \\n&gt; activations or to link an activation to its caller. It seems to me the \\n&gt; current stacking of StatementContexts has the required information \\n&gt; already, upon execution the role of the activation needs to be taken \\n&gt; from the role of the activation of currently executing statement (the \\n&gt; most recently pushed StatementContext) or the lcc if there is no \\n&gt; currently statement being executed. \\n\\n Thanks, I will investigate this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12569959\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12569959&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12569959\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12569959_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569959_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 17:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T17:41:56+0000\'\u003e18\\/Feb\\/08 17:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA new version of a patch for this issue, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-4-full. It builds\u003cbr\\/\u003e\\non the idea of the previous patch of using the activation to hold a\u003cbr\\/\u003e\\nreferences to the SQL session context at execution time. This makes\u003cbr\\/\u003e\\nthe context available even after the original statement context has\u003cbr\\/\u003e\\ngone (needed for dynamic result sets). The SQL session context has\u003cbr\\/\u003e\\nbeen factored out into a separate class. The patch also makes the SQL\u003cbr\\/\u003e\\nsession context available at compile time via the statement\u003cbr\\/\u003e\\ncontext. This is needed for the solution to work for current default\u003cbr\\/\u003e\\nschema (in addition to current role). The current patch also solves\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1331\\\" title=\\\"Derby&#39;s &quot;set schema&quot; behavior is not compliant with SQL 2003 Foundation spec.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1331\\\"\u003e\u003cdel\u003eDERBY-1331\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eCode is generated for routines (which can contain SQL) to push the SQL\u003cbr\\/\u003e\\nsession context. A new test, SQLSessionContextTest, has been factored\u003cbr\\/\u003e\\nout from RolesTest which tests the stack semantics for both roles and\u003cbr\\/\u003e\\ncurrent default schema.\u003c\\/p\u003e\\n\\n\u003cp\u003eDepending on feed-back, I may unbundle the changes for default current\u003cbr\\/\u003e\\nschema in this patch and retain only the current role part to reduce\u003cbr\\/\u003e\\nthe risk; but I include it in this version of the patch as\u003cbr\\/\u003e\\nproof-of-concept for review.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am not totally happy with schema side of the patch; some usages of\u003cbr\\/\u003e\\ngetCurrentSchemaName at execution time break the pattern in that they\u003cbr\\/\u003e\\ndo not (and in deed need not) use the activation argument variant, in\u003cbr\\/\u003e\\nSpaceTable#getConglomInfo and inside\u003cbr\\/\u003e\\nSystemProcedures#\u003c\\/p\u003e\\n{INSTALL|REPLACE|REMOVE}\\n\u003cp\u003e_JAR.\u003cbr\\/\u003e\\nI have noted this in the code as a caveat.\u003c\\/p\u003e\\n\\n\u003cp\u003eAll regression tests pass.\u003c\\/p\u003e\\n\\n\u003cp\u003eDetailed patch comment:\u003c\\/p\u003e\\n\\n\u003cp\u003eA      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/SQLSessionContext.java\u003cbr\\/\u003e\\nA      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/SQLSessionContextImpl.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe new interface and implementation class which encapsulates the SQL\u003cbr\\/\u003e\\nsession context\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/SpecialFunctionNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eCode changes for CURRENT_ROLE and CURRENT SCHEMA.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/StaticMethodCallNode.java\u003c\\/p\u003e\\n\\n\u003cp\u003eCode generation to push SQL session context. There is no separate\u003cbr\\/\u003e\\nstack; the statement context stack is used. Also an activation still has a\u003cbr\\/\u003e\\nreference to the calling activation.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/conn\\/StatementContext.java\u003cbr\\/\u003e\\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/conn\\/GenericStatementContext.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNew methods to set and get and a field to hold the SQL session context\u003cbr\\/\u003e\\nand associated activation, if any.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/conn\\/LanguageConnectionContext.java\u003cbr\\/\u003e\\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/conn\\/GenericLanguageConnectionContext.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe exisisting fields \\\"sd\\\" (current default schema), currentRole and\u003cbr\\/\u003e\\nthe callers stack have been removed. Instead there is now a field\u003cbr\\/\u003e\\ntopLevelSSC which hold the top level SQL session context and\u003cbr\\/\u003e\\ncachedInitialDefaultSchemaDescr, which is used to avoid having to\u003cbr\\/\u003e\\ncompute the initial default schema for the session more than once.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe methods get\\/setDefaultSchema and getCurrentSchemaName now have two\u003cbr\\/\u003e\\nvariants one for use at compile-time and another for use at execution\u003cbr\\/\u003e\\ntime (activation argument). A new method, resetSchemaUsages, is used\u003cbr\\/\u003e\\nto set refrences to a dropped schema back to the default value for all\u003cbr\\/\u003e\\noccurences on the SQL session state stack.\u003c\\/p\u003e\\n\\n\u003cp\u003eA new method, setupNestedSessionContext, is used to push the SQL\u003cbr\\/\u003e\\nsession context at routine invocation time, cf. StaticMethodCallNode.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/Activation.java\u003cbr\\/\u003e\\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/BaseActivation.java\u003cbr\\/\u003e\\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/GenericActivationHolder.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNow hold both the calling activation if any (as earlier), and the SQL\u003cbr\\/\u003e\\nsession context. A new interface method to retrieve the SQL session\u003cbr\\/\u003e\\ncontext has been added.\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/SetSchemaConstantAction.java\u003cbr\\/\u003e\\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DropSchemaConstantAction.java\u003c\\/p\u003e\\n\\n\u003cp\u003eUses the new execution time variants so the correct SQL session\u003cbr\\/\u003e\\ncontext can be used.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/CallStatementResultSet.java\u003c\\/p\u003e\\n\\n\u003cp\u003eChanged back to original; the changes having move to code generation,\u003cbr\\/\u003e\\nsee StaticMethodCallNode.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/jdbc\\/EmbedResultSet.java\u003cbr\\/\u003e\\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/BasicNoPutResultSetImpl.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAssociates the current activation with the current statement context.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/GenericPreparedStatement.java\u003c\\/p\u003e\\n\\n\u003cp\u003eSets up activation with caller reference, same semantics, but now uses\u003cbr\\/\u003e\\nthe statement context instead of the callers stack in lcc.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/dictionary\\/SchemaDescriptor.java\u003c\\/p\u003e\\n\\n\u003cp\u003eThe drop method now takes an activation argument, and now calls\u003cbr\\/\u003e\\nlcc#resetSchemaUsages to clean up.\u003c\\/p\u003e\\n\\n\u003cp\u003eA      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/SQLSessionContextTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eNew test to check that stack semantics hold for roles end schema.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/RolesTest.java\u003c\\/p\u003e\\n\\n\u003cp\u003eSlimmed down.\u003c\\/p\u003e\\n\\n\u003cp\u003eM      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/_Suite.java\u003c\\/p\u003e\\n\\n\u003cp\u003eAdded SQLSessionContextTest.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12569959_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12569959_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 17:41\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T17:41:56+0000\'\u003e18\\/Feb\\/08 17:41\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    A new version of a patch for this issue,   DERBY-3327  -4-full. It builds \\non the idea of the previous patch of using the activation to hold a \\nreferences to the SQL session context at execution time. This makes \\nthe context available even after the original statement context has \\ngone (needed for dynamic result sets). The SQL session context has \\nbeen factored out into a separate class. The patch also makes the SQL \\nsession context available at compile time via the statement \\ncontext. This is needed for the solution to work for current default \\nschema (in addition to current role). The current patch also solves \\n  DERBY-1331  . \\n\\n Code is generated for routines (which can contain SQL) to push the SQL \\nsession context. A new test, SQLSessionContextTest, has been factored \\nout from RolesTest which tests the stack semantics for both roles and \\ncurrent default schema. \\n\\n Depending on feed-back, I may unbundle the changes for default current \\nschema in this patch and retain only the current role part to reduce \\nthe risk; but I include it in this version of the patch as \\nproof-of-concept for review. \\n\\n I am not totally happy with schema side of the patch; some usages of \\ngetCurrentSchemaName at execution time break the pattern in that they \\ndo not (and in deed need not) use the activation argument variant, in \\nSpaceTable#getConglomInfo and inside \\nSystemProcedures# \\n{INSTALL|REPLACE|REMOVE}\\n _JAR. \\nI have noted this in the code as a caveat. \\n\\n All regression tests pass. \\n\\n Detailed patch comment: \\n\\n A      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/execute\\/SQLSessionContext.java \\nA      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/SQLSessionContextImpl.java \\n\\n The new interface and implementation class which encapsulates the SQL \\nsession context \\n\\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/SpecialFunctionNode.java \\n\\n Code changes for CURRENT_ROLE and CURRENT SCHEMA. \\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/compile\\/StaticMethodCallNode.java \\n\\n Code generation to push SQL session context. There is no separate \\nstack; the statement context stack is used. Also an activation still has a \\nreference to the calling activation. \\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/conn\\/StatementContext.java \\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/conn\\/GenericStatementContext.java \\n\\n New methods to set and get and a field to hold the SQL session context \\nand associated activation, if any. \\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/conn\\/LanguageConnectionContext.java \\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/conn\\/GenericLanguageConnectionContext.java \\n\\n The exisisting fields \\\"sd\\\" (current default schema), currentRole and \\nthe callers stack have been removed. Instead there is now a field \\ntopLevelSSC which hold the top level SQL session context and \\ncachedInitialDefaultSchemaDescr, which is used to avoid having to \\ncompute the initial default schema for the session more than once. \\n\\n The methods get\\/setDefaultSchema and getCurrentSchemaName now have two \\nvariants one for use at compile-time and another for use at execution \\ntime (activation argument). A new method, resetSchemaUsages, is used \\nto set refrences to a dropped schema back to the default value for all \\noccurences on the SQL session state stack. \\n\\n A new method, setupNestedSessionContext, is used to push the SQL \\nsession context at routine invocation time, cf. StaticMethodCallNode. \\n\\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/Activation.java \\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/BaseActivation.java \\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/GenericActivationHolder.java \\n\\n Now hold both the calling activation if any (as earlier), and the SQL \\nsession context. A new interface method to retrieve the SQL session \\ncontext has been added. \\n\\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/SetSchemaConstantAction.java \\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/DropSchemaConstantAction.java \\n\\n Uses the new execution time variants so the correct SQL session \\ncontext can be used. \\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/CallStatementResultSet.java \\n\\n Changed back to original; the changes having move to code generation, \\nsee StaticMethodCallNode. \\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/impl\\/jdbc\\/EmbedResultSet.java \\nM      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/execute\\/BasicNoPutResultSetImpl.java \\n\\n Associates the current activation with the current statement context. \\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/impl\\/sql\\/GenericPreparedStatement.java \\n\\n Sets up activation with caller reference, same semantics, but now uses \\nthe statement context instead of the callers stack in lcc. \\n\\n M      java\\/engine\\/org\\/apache\\/derby\\/iapi\\/sql\\/dictionary\\/SchemaDescriptor.java \\n\\n The drop method now takes an activation argument, and now calls \\nlcc#resetSchemaUsages to clean up. \\n\\n A      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/SQLSessionContextTest.java \\n\\n New test to check that stack semantics hold for roles end schema. \\n\\n M      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/RolesTest.java \\n\\n Slimmed down. \\n\\n M      java\\/testing\\/org\\/apache\\/derbyTesting\\/functionTests\\/tests\\/lang\\/_Suite.java \\n\\n Added SQLSessionContextTest. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570007\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12570007&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570007\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12570007_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570007_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T20:57:36+0000\'\u003e18\\/Feb\\/08 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for the patch, Dag. As usual, I don\'t have much to add that\'s substantive. Just a couple points:\u003c\\/p\u003e\\n\\n\u003cp\u003eo I understand your misgivings about the management of the current schema. The existing code is pretty organic at this point.\u003c\\/p\u003e\\n\\n\u003cp\u003eo There are a couple places in the LCC where you lookup the session context based on the Activation. It seems to me that a method like the following might be a useful abstraction:\u003c\\/p\u003e\\n\\n\u003cp\u003epublic SQLSessionContext    getCurrentSQLSessionContext( Activation caller )\u003cbr\\/\u003e\\n{\u003cbr\\/\u003e\\n\\t\\tif (caller == null ) \u003c\\/p\u003e\\n{ return getTopLevelSQLSessionContext(); }\\n\u003cp\u003e\\t\\telse \u003c\\/p\u003e\\n{ return caller.getNestedSQLSessionContext(); }\\n\u003cp\u003e}\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12570007_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570007_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Feb\\/08 20:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-18T20:57:36+0000\'\u003e18\\/Feb\\/08 20:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for the patch, Dag. As usual, I don\'t have much to add that\'s substantive. Just a couple points: \\n\\n o I understand your misgivings about the management of the current schema. The existing code is pretty organic at this point. \\n\\n o There are a couple places in the LCC where you lookup the session context based on the Activation. It seems to me that a method like the following might be a useful abstraction: \\n\\n public SQLSessionContext    getCurrentSQLSessionContext( Activation caller ) \\n{ \\n\\t\\tif (caller == null )  \\n{ return getTopLevelSQLSessionContext(); }\\n \\t\\telse  \\n{ return caller.getNestedSQLSessionContext(); }\\n }              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570063\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12570063&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570063\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12570063_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570063_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Feb\\/08 00:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-19T00:30:58+0000\'\u003e19\\/Feb\\/08 00:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for looking at this, Rick! As for for the abstraction suggestion,\u003cbr\\/\u003e\\nI definitely agree.  Uploading \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-4-full-b, which replaces \u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-4-full (and earlier revs), which incorporates your suggestion!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12570063_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570063_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Feb\\/08 00:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-19T00:30:58+0000\'\u003e19\\/Feb\\/08 00:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for looking at this, Rick! As for for the abstraction suggestion, \\nI definitely agree.  Uploading   DERBY-3327  -4-full-b, which replaces  \\n  DERBY-3327  -4-full (and earlier revs), which incorporates your suggestion!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570495\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12570495&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570495\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12570495_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570495_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Feb\\/08 23:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-19T23:12:16+0000\'\u003e19\\/Feb\\/08 23:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUploaded \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-4-c, which replaces earlier revs. This version cleans up the modularization a bit\u003cbr\\/\u003e\\nby moving SQLSessionContext\u003c\\/p\u003e\\n{Impl}\\n\u003cp\u003e? to sql.conn rather than sql.execute since it is not only used at execution time,\u003cbr\\/\u003e\\nand also removes the need to import the *Impl outside of its package by providing a create method in lcc.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12570495_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570495_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Feb\\/08 23:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-19T23:12:16+0000\'\u003e19\\/Feb\\/08 23:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Uploaded   DERBY-3327  -4-c, which replaces earlier revs. This version cleans up the modularization a bit \\nby moving SQLSessionContext \\n{Impl}\\n ? to sql.conn rather than sql.execute since it is not only used at execution time, \\nand also removes the need to import the *Impl outside of its package by providing a create method in lcc.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12570497\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12570497&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12570497\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12570497_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570497_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Feb\\/08 23:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-19T23:19:03+0000\'\u003e19\\/Feb\\/08 23:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMarking with Existing application impact and Release note needed, since the latest revision of the patch, in its solution for to \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1331\\\" title=\\\"Derby&#39;s &quot;set schema&quot; behavior is not compliant with SQL 2003 Foundation spec.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1331\\\"\u003e\u003cdel\u003eDERBY-1331\u003c\\/del\u003e\u003c\\/a\u003e,\u003cbr\\/\u003e\\nchanges the semantics of SET SCHEMA if performed in a nested connection (inside a routine).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12570497_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12570497_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Feb\\/08 23:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-19T23:19:03+0000\'\u003e19\\/Feb\\/08 23:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Marking with Existing application impact and Release note needed, since the latest revision of the patch, in its solution for to   DERBY-1331  , \\nchanges the semantics of SET SCHEMA if performed in a nested connection (inside a routine).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12572894\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12572894&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12572894\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12572894_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12572894_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Feb\\/08 12:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-27T12:38:45+0000\'\u003e27\\/Feb\\/08 12:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRan some performance tests to see if the new code for getting current schema\u003cbr\\/\u003e\\nhad any substantial impact on performance, but it seems not (a loop executing\u003cbr\\/\u003e\\nCURRENT SCHEMA inside a stored procedure saw a 3-5% performance hit, which is\u003cbr\\/\u003e\\nnot unreasonable since access is no longer just a simple field access in lcc but \u003cbr\\/\u003e\\nincurs 3 extra method calls).\u003c\\/p\u003e\\n\\n\u003cp\u003eIf there are no further comments, I will commit this patch in a few days.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12572894_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12572894_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Feb\\/08 12:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-02-27T12:38:45+0000\'\u003e27\\/Feb\\/08 12:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ran some performance tests to see if the new code for getting current schema \\nhad any substantial impact on performance, but it seems not (a loop executing \\nCURRENT SCHEMA inside a stored procedure saw a 3-5% performance hit, which is \\nnot unreasonable since access is no longer just a simple field access in lcc but  \\nincurs 3 extra method calls). \\n\\n If there are no further comments, I will commit this patch in a few days. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12582179\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12582179&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12582179\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12582179_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582179_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/08 08:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-26T08:46:50+0000\'\u003e26\\/Mar\\/08 08:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePushing out to 10.5\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dyret\\\" id=\\\"commentauthor_12582179_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dyret\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dyret\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dyre Tjeldvoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12582179_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'26\\/Mar\\/08 08:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-26T08:46:50+0000\'\u003e26\\/Mar\\/08 08:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Pushing out to 10.5              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583124\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12583124&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583124\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12583124_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583124_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 18:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T18:13:37+0000\'\u003e28\\/Mar\\/08 18:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUploaded \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-4-full-d, which replaces *-c.\u003c\\/p\u003e\\n\\n\u003cp\u003eAdded a new test case to check that the current schema\u003cbr\\/\u003e\\nin pushed sql context stack frames is reset to the session\'s\u003cbr\\/\u003e\\ndefault schema when a routine drops the schema (this reverting\u003cbr\\/\u003e\\nis what happens to the current schema before this patch also).\u003cbr\\/\u003e\\nI could not find anything in the standard about this, but it seems\u003cbr\\/\u003e\\nthe right behavior.\u003c\\/p\u003e\\n\\n\u003cp\u003eCleaned up some naming and javadocs. Regression test ran OK.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12583124_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583124_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 18:13\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T18:13:37+0000\'\u003e28\\/Mar\\/08 18:13\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Uploaded   DERBY-3327  -4-full-d, which replaces *-c. \\n\\n Added a new test case to check that the current schema \\nin pushed sql context stack frames is reset to the session\'s \\ndefault schema when a routine drops the schema (this reverting \\nis what happens to the current schema before this patch also). \\nI could not find anything in the standard about this, but it seems \\nthe right behavior. \\n\\n Cleaned up some naming and javadocs. Regression test ran OK.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12583169\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12583169&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12583169\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12583169_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583169_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 19:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T19:57:19+0000\'\u003e28\\/Mar\\/08 19:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks Dag,\u003c\\/p\u003e\\n\\n\u003cp\u003eThis sounds like reasonable and non-disruptive behavior to me.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rhillegas\\\" id=\\\"commentauthor_12583169_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rhillegas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rhillegas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Rick Hillegas\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12583169_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Mar\\/08 19:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-03-28T19:57:19+0000\'\u003e28\\/Mar\\/08 19:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks Dag, \\n\\n This sounds like reasonable and non-disruptive behavior to me.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12584129\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12584129&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12584129\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12584129_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584129_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Apr\\/08 13:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-01T13:12:01+0000\'\u003e01\\/Apr\\/08 13:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUploaded \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-4-full-e which replaces *-d. \u003c\\/p\u003e\\n\\n\u003cp\u003eNo significant changes, just polishing:\u003c\\/p\u003e\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eAbstracted out some common code in GenericLanguageConnectionContext (\u003cbr\\/\u003e\\nnew parameterless getCurrentSQLSessionContext).\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cul\u003e\\n\\t\u003cli\u003eMore Javadoc improvements.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eRegression tests ran OK. Will commit this version soon.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12584129_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584129_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Apr\\/08 13:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-01T13:12:01+0000\'\u003e01\\/Apr\\/08 13:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Uploaded   DERBY-3327  -4-full-e which replaces *-d.  \\n\\n No significant changes, just polishing: \\n\\n \\n\\t Abstracted out some common code in GenericLanguageConnectionContext ( \\nnew parameterless getCurrentSQLSessionContext). \\n \\n\\n\\n \\n\\t More Javadoc improvements. \\n \\n\\n\\n Regression tests ran OK. Will commit this version soon.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12584589\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12584589&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12584589\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12584589_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584589_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T14:34:29+0000\'\u003e02\\/Apr\\/08 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-4-full-e committed as svn 643920.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12584589_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584589_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T14:34:29+0000\'\u003e02\\/Apr\\/08 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                      DERBY-3327  -4-full-e committed as svn 643920.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12584617\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12584617&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12584617\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12584617_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584617_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 14:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T14:59:01+0000\'\u003e02\\/Apr\\/08 14:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a release note for the changed behavior of SET SCHEMA.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12584617_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12584617_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Apr\\/08 14:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-04-02T14:59:01+0000\'\u003e02\\/Apr\\/08 14:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a release note for the changed behavior of SET SCHEMA.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12600434\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12600434&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12600434\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12600434_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12600434_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/May\\/08 11:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-05-28T11:02:33+0000\'\u003e28\\/May\\/08 11:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIs it feasible to backport the last fix\\/commit to the 10.4 branch?\u003cbr\\/\u003e\\nIf not, I will pull out the fix for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3690\\\" title=\\\"EmbedPooledConnection doesn&#39;t reset schema when creating a new logical connection\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3690\\\"\u003e\u003cdel\u003eDERBY-3690\u003c\\/del\u003e\u003c\\/a\u003e from 10.4 as it depends on this one.\u003c\\/p\u003e\\n\\n\u003cp\u003eI ran regression tests on 10.4 with the patch \'derby-3327-4-full-e.diff\' applied, and the only errors I got was in SQLSessionContextTest because roles are disabled. The errors happened during setup, so I do now know yet if the tests pass if we enable roles again (for testing only).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12600434_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12600434_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/May\\/08 11:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-05-28T11:02:33+0000\'\u003e28\\/May\\/08 11:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Is it feasible to backport the last fix\\/commit to the 10.4 branch? \\nIf not, I will pull out the fix for   DERBY-3690   from 10.4 as it depends on this one. \\n\\n I ran regression tests on 10.4 with the patch \'derby-3327-4-full-e.diff\' applied, and the only errors I got was in SQLSessionContextTest because roles are disabled. The errors happened during setup, so I do now know yet if the tests pass if we enable roles again (for testing only).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12600618\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12600618&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12600618\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12600618_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12600618_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/May\\/08 21:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-05-28T21:52:25+0000\'\u003e28\\/May\\/08 21:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUploading a 10.4 version of this patch, \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-4-full-e-10_4. The only difference\u003cbr\\/\u003e\\nfrom \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-4-full-e, is that the test is changed by commenting out the role test cases, since\u003cbr\\/\u003e\\nroles is not a feature of 10.4. I verified that SQLSessionContextTest ran OK with the change on the\u003cbr\\/\u003e\\nhead of 10.4.\u003c\\/p\u003e\\n\\n\u003cp\u003eTo your question, Kristian, I don\'t think there is a problem applying this to 10.4.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12600618_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12600618_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/May\\/08 21:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-05-28T21:52:25+0000\'\u003e28\\/May\\/08 21:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Uploading a 10.4 version of this patch,   DERBY-3327  -4-full-e-10_4. The only difference \\nfrom   DERBY-3327  -4-full-e, is that the test is changed by commenting out the role test cases, since \\nroles is not a feature of 10.4. I verified that SQLSessionContextTest ran OK with the change on the \\nhead of 10.4. \\n\\n To your question, Kristian, I don\'t think there is a problem applying this to 10.4.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12600951\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12600951&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12600951\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12600951_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12600951_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/May\\/08 22:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-05-29T22:50:00+0000\'\u003e29\\/May\\/08 22:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI ran the regression tests on 10.4 with the modified patch. The only errors I saw were related to MBeans, cf\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/www.nabble.com\\/MBeans-errors-on-10.4-head-td17526725.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.nabble.com\\/MBeans-errors-on-10.4-head-td17526725.html\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cp\u003eKristian, do you know exactly what changed behavior makes \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3690\\\" title=\\\"EmbedPooledConnection doesn&#39;t reset schema when creating a new logical connection\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3690\\\"\u003e\u003cdel\u003eDERBY-3690\u003c\\/del\u003e\u003c\\/a\u003e work? (The patch is supposed to change\u003cbr\\/\u003e\\nthe existing Derby behavior only if one changes the current schema inside stored routines cf attached releaseNote.html)\u003cbr\\/\u003e\\nI would feel more comfortable committing it to the 10.4 branch if we knew...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12600951_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12600951_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/May\\/08 22:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-05-29T22:50:00+0000\'\u003e29\\/May\\/08 22:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I ran the regression tests on 10.4 with the modified patch. The only errors I saw were related to MBeans, cf \\n http:\\/\\/www.nabble.com\\/MBeans-errors-on-10.4-head-td17526725.html . \\n\\n Kristian, do you know exactly what changed behavior makes   DERBY-3690   work? (The patch is supposed to change \\nthe existing Derby behavior only if one changes the current schema inside stored routines cf attached releaseNote.html) \\nI would feel more comfortable committing it to the 10.4 branch if we knew...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12601152\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12601152&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12601152\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12601152_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12601152_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/May\\/08 14:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-05-30T14:33:09+0000\'\u003e30\\/May\\/08 14:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDag,\u003c\\/p\u003e\\n\\n\u003cp\u003eI had a look and extracted the parts of your patch that I needed to run the failing tests successfully (see \'derby-3327-5a-extracted_initial_schema_patch.diff\').\u003cbr\\/\u003e\\nSeems to me the changed behavior is whether the data dictionary is queried or not when setting \\/ returning the default schema.\u003c\\/p\u003e\\n\\n\u003cp\u003eI haven\'t verified the patch excerpt, but I\'m running the regression tests now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12601152_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12601152_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/May\\/08 14:33\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-05-30T14:33:09+0000\'\u003e30\\/May\\/08 14:33\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Dag, \\n\\n I had a look and extracted the parts of your patch that I needed to run the failing tests successfully (see \'derby-3327-5a-extracted_initial_schema_patch.diff\'). \\nSeems to me the changed behavior is whether the data dictionary is queried or not when setting \\/ returning the default schema. \\n\\n I haven\'t verified the patch excerpt, but I\'m running the regression tests now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12601605\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12601605&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12601605\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12601605_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12601605_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/08 11:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-02T11:56:09+0000\'\u003e02\\/Jun\\/08 11:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe extracted patch looks good to me for the 10.4 branch.\u003c\\/p\u003e\\n\\n\u003cp\u003e+1\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12601605_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12601605_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/08 11:56\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-02T11:56:09+0000\'\u003e02\\/Jun\\/08 11:56\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The extracted patch looks good to me for the 10.4 branch. \\n\\n +1              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12601607\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12601607&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12601607\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12601607_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12601607_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/08 11:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-02T11:59:26+0000\'\u003e02\\/Jun\\/08 11:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRegression tests on 10.4 ran without any failures:\u003cbr\\/\u003e\\n  jars\\/sane\\/derby.jar] 10.4.1.4 - (661686M)\u003cbr\\/\u003e\\n  suites.All: OK (10405 tests)\u003cbr\\/\u003e\\n  derbyall: 100% Pass (274 tests passed)\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m considering committing the 5a patch to the 10.4 branch to resolve \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3692\\\" title=\\\"&#39;javax.transaction.xa.XAException&#39; ++  in  &#39;J2EEDataSourceTest&#39; \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3692\\\"\u003e\u003cdel\u003eDERBY-3692\u003c\\/del\u003e\u003c\\/a\u003e. The other option is to pull out \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3690\\\" title=\\\"EmbedPooledConnection doesn&#39;t reset schema when creating a new logical connection\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3690\\\"\u003e\u003cdel\u003eDERBY-3690\u003c\\/del\u003e\u003c\\/a\u003e.\u003cbr\\/\u003e\\nThe code in patch 5a is extracted from 4e_full, and the only thing changed is the handling of the initial schema descriptor.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12601607_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12601607_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/08 11:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-02T11:59:26+0000\'\u003e02\\/Jun\\/08 11:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Regression tests on 10.4 ran without any failures: \\n  jars\\/sane\\/derby.jar] 10.4.1.4 - (661686M) \\n  suites.All: OK (10405 tests) \\n  derbyall: 100% Pass (274 tests passed) \\n\\n I\'m considering committing the 5a patch to the 10.4 branch to resolve   DERBY-3692  . The other option is to pull out   DERBY-3690  . \\nThe code in patch 5a is extracted from 4e_full, and the only thing changed is the handling of the initial schema descriptor.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12601617\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12601617&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12601617\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12601617_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12601617_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/08 12:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-02T12:48:33+0000\'\u003e02\\/Jun\\/08 12:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted \'derby-3327-5a-extracted_initial_schema_patch.diff\' to 10.4 with revision 662416.\u003cbr\\/\u003e\\nIt is my understanding that nothing else of this issue will be backported to 10.4.\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks for the feedback Dag!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12601617_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12601617_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Jun\\/08 12:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-02T12:48:33+0000\'\u003e02\\/Jun\\/08 12:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed \'derby-3327-5a-extracted_initial_schema_patch.diff\' to 10.4 with revision 662416. \\nIt is my understanding that nothing else of this issue will be backported to 10.4. \\n\\n Thanks for the feedback Dag!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12602101\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12602101&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12602101\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12602101_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12602101_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jun\\/08 22:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-03T22:53:54+0000\'\u003e03\\/Jun\\/08 22:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Dag H. Wanvik - 03\\/Jun\\/08 22:59\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUploading \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-6, which removes a sanity check from\u003cbr\\/\u003e\\nGenericLanguageConnectionContext.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn GenericLanguageConnectionContext#getInitialDefaultSchemaDescriptor there was\u003cbr\\/\u003e\\na sanity check that the initial default schema value is always computed before\u003cbr\\/\u003e\\nit is ever used by getDefaultSchema; that proved to not be the case in one code\u003cbr\\/\u003e\\npath, cf. indicative check for null in DataDictionaryImpl#getSchemaDescriptor\u003cbr\\/\u003e\\nnear the end of that method.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhen chasing the recursion in the printing of the lock table for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3678\\\" title=\\\"StackOverflowException in deadlock trace\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3678\\\"\u003e\u003cdel\u003eDERBY-3678\u003c\\/del\u003e\u003c\\/a\u003e I\u003cbr\\/\u003e\\nnoticed that the assert error was triggered, which removed the recursion at the\u003cbr\\/\u003e\\nexpense of the lock table being incompetely filled in as below (notice default\u003cbr\\/\u003e\\nvalues, e.g. for CONTAINER_ID column);\u003c\\/p\u003e\\n\\n\u003cdiv class=\'table-wrap\'\u003e\\n\u003ctable class=\'confluenceTable\'\u003e\u003ctbody\u003e\\n\u003ctr\u003e\\n\u003ctd class=\'confluenceTd\'\u003eSTATE\u003c\\/td\u003e\\n\u003ctd class=\'confluenceTd\'\u003eTABLETYPE \\/ LOCKOBJ \u003c\\/td\u003e\\n\u003ctd class=\'confluenceTd\'\u003eINDEXNAME \\/ CONTAINER_ID \\/ (MODE for LATCH only)  \u003c\\/td\u003e\\n\u003ctd class=\'confluenceTd\'\u003eTABLENAME \\/ CONGLOM_ID \u003c\\/td\u003e\\n\u003c\\/tr\u003e\\n\u003c\\/tbody\u003e\u003c\\/table\u003e\\n\u003c\\/div\u003e\\n\\n\u003cp\u003e------------------------------------------------------------------------------------------------------\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eThe following row is the victim ***\u003cbr\\/\u003e\\n151       |ROW          |S   |0        |(1,18) |WAIT |org.apache.derby.impl.services.locks.A|CONTAINERID |CONGLOMID |\u003cbr\\/\u003e\\n:\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e(The assert error was silently swallowed in TimeOut#buildLockTableString, see\u003cbr\\/\u003e\\n the comment \\\"\\/\\/just don\'t do anything\\\".\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eIf this is a valid code path or not I have yet to determine, but I remove the\u003cbr\\/\u003e\\nsanity check for now; so the sane build will not work better than the insane.\u003c\\/p\u003e\\n\\n\u003cp\u003eRegressions ran OK, modulo wisconsin, which i believe to be unrelated.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12602101_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12602101_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jun\\/08 22:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-03T22:53:54+0000\'\u003e03\\/Jun\\/08 22:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Dag H. Wanvik - 03\\/Jun\\/08 22:59\\\"\u003eedited\u003c\\/span\u003e                   Uploading   DERBY-3327  -6, which removes a sanity check from \\nGenericLanguageConnectionContext. \\n\\n In GenericLanguageConnectionContext#getInitialDefaultSchemaDescriptor there was \\na sanity check that the initial default schema value is always computed before \\nit is ever used by getDefaultSchema; that proved to not be the case in one code \\npath, cf. indicative check for null in DataDictionaryImpl#getSchemaDescriptor \\nnear the end of that method. \\n\\n When chasing the recursion in the printing of the lock table for   DERBY-3678   I \\nnoticed that the assert error was triggered, which removed the recursion at the \\nexpense of the lock table being incompetely filled in as below (notice default \\nvalues, e.g. for CONTAINER_ID column); \\n\\n \\n  \\n \\n STATE \\n TABLETYPE \\/ LOCKOBJ  \\n INDEXNAME \\/ CONTAINER_ID \\/ (MODE for LATCH only)   \\n TABLENAME \\/ CONGLOM_ID  \\n \\n  \\n \\n\\n ------------------------------------------------------------------------------------------------------ \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t The following row is the victim *** \\n151       |ROW          |S   |0        |(1,18) |WAIT |org.apache.derby.impl.services.locks.A|CONTAINERID |CONGLOMID | \\n: \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n (The assert error was silently swallowed in TimeOut#buildLockTableString, see \\n the comment \\\"\\/\\/just don\'t do anything\\\". \\n\\n\\n If this is a valid code path or not I have yet to determine, but I remove the \\nsanity check for now; so the sane build will not work better than the insane. \\n\\n Regressions ran OK, modulo wisconsin, which i believe to be unrelated.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12602103\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12602103&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12602103\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12602103_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12602103_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jun\\/08 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-03T22:57:31+0000\'\u003e03\\/Jun\\/08 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-3327\\\" title=\\\"SQL roles: Implement authorization stack (and SQL session context to hold it)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-3327\\\"\u003e\u003cdel\u003eDERBY-3327\u003c\\/del\u003e\u003c\\/a\u003e-6 as svn 662911.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12602103_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12602103_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Jun\\/08 22:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2008-06-03T22:57:31+0000\'\u003e03\\/Jun\\/08 22:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed   DERBY-3327  -6 as svn 662911.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912300\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-3327?focusedCommentId=12912300&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912300\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12912300_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912300_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Sep\\/10 23:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-19T23:32:48+0000\'\u003e19\\/Sep\\/10 23:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eA bug in this machinery was uncovered and fixed as part of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4551\\\" title=\\\"Allow database user to execute stored procedures with same permissions as database owner and\\/or routine definer\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4551\\\"\u003e\u003cdel\u003eDERBY-4551\u003c\\/del\u003e\u003c\\/a\u003e, cf linked issue.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"dagw\\\" id=\\\"commentauthor_12912300_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=dagw\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"dagw\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Dag H. Wanvik\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912300_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Sep\\/10 23:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-19T23:32:48+0000\'\u003e19\\/Sep\\/10 23:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    A bug in this machinery was uncovered and fixed as part of   DERBY-4551  , cf linked issue.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1516198573056"> 
    <input type="hidden" title="jira.request.server.time" value="270"> 
    <input type="hidden" title="jira.request.id" value="856x7499751x2"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="4"> 
    <input type="hidden" title="db.reads.time.in.ms" value="29"> 
    <input type="hidden" title="db.conns.time.in.ms" value="34"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 856x7499751x2
	          REQUEST TIMESTAMP : [17/Jan/2018:14:16:13 +0000]
	               REQUEST TIME : 0.2700
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 4

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=30, elapsedTotal=29035264, elapsedMin=238665, elapsedMax=8476019, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=34, elapsedTotal=34767715, elapsedMin=263527, elapsedMax=8520059, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>