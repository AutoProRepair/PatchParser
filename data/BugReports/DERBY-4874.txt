<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|c560c875d6ebf58182d0eeb88c422f3c14b1e703|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"2f2ee0f4ad8cdf\"";
WRM._unparsedData["project-id"]="10594";
WRM._unparsedData["project-key"]="\"DERBY\"";
WRM._unparsedData["project-name"]="\"Derby\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="10594";
WRM._unparsedData["projectKey"]="\"DERBY\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="DERBY-4874"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[DERBY-4874] Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR  - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[DERBY-4874] Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR  - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/DERBY" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4874">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="10594" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Derby'" src="https://issues.apache.org/jira/secure/projectavatar?pid=10594&amp;avatarId=10122"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/DERBY">Derby</a></li>
                 <li><a class="issue-link" data-issue-key="DERBY-4874" href="/jira/browse/DERBY-4874" id="key-val" rel="12478632">DERBY-4874</a></li>
                </ol>
                <h1 id="summary-val">Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR </h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FDERBY-4874"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/DERBY-4874/DERBY-4874.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/DERBY-4874/DERBY-4874.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/DERBY-4874/DERBY-4874.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/DERBY-4874/DERBY-4874.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="10.2.2.1 Head of 10.2 branch">10.2.2.1</span>, <span title="10.3.3.1 Head of 10.3 branch">10.3.3.1</span>, <span title="10.4.2.1 Head of 10.4 branch">10.4.2.1</span>, <span title="10.5.3.0 Next release after 10.5.2.0 release candidate #1">10.5.3.0</span>, <span title="10.6.2.1 Derby 10.6.2.1 Release">10.6.2.1</span>, <span title="10.7.1.1 First release on the 10.7 branch.">10.7.1.1</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.3.3.1" title="10.3.3.1 Head of 10.3 branch">10.3.3.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.4.2.1" title="10.4.2.1 Head of 10.4 branch">10.4.2.1</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.5.3.2" title="10.5.3.2 Head of 10.5 branch - version bump for DERBY-4835">10.5.3.2</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.6.2.4" title="10.6.2.4 Head of 10.6 branch as of 2014-01-13">10.6.2.4</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.7.1.4" title="10.7.1.4 Head of 10.7 branch as of 2010-11-29">10.7.1.4</a>, <a href="/jira/issues/?jql=project+%3D+DERBY+AND+fixVersion+%3D+10.8.2.2" title="10.8.2.2 second release on the 10.8 branch">10.8.2.2</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+DERBY+AND+component+%3D+SQL" title="SQL ">SQL</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12478632-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310090" class="item"> 
                     <div class="wrap"> 
                      <strong title="Issue &amp; fix info" class="name">Issue &amp; fix info:</strong> 
                      <div id="customfield_12310090-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310090-field"> 
                        <span>High Value Fix</span>, 
                        <span>Release Note Needed</span>, 
                        <span>Repro attached</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>Trigger created before VARCHAR column is expanded with ALTER TABLE does not recognize new size and fails with:<br> ERROR 22001: A truncation error was encountered trying to shrink VARCHAR '012345<br> 678901234567890123456789001234567890' to length 30.</p> 
                  <p>CREATE TABLE tab (<br> element_id INTEGER NOT NULL,<br> altered_id VARCHAR(30) NOT NULL,<br> counter SMALLINT NOT NULL DEFAULT 0,<br> timets TIMESTAMP NOT NULL<br> );<br> 0 rows inserted/updated/deleted<br> ij&gt; – Create a trigger against the table<br> CREATE TRIGGER mytrig<br> AFTER UPDATE ON tab<br> REFERENCING NEW AS newt OLD AS oldt<br> FOR EACH ROW MODE DB2SQL<br> UPDATE tab set tab.counter = CASE WHEN (oldt.counter &lt; 32767) THEN (oldt.count<br> er + 1) ELSE 1 END<br> WHERE ((newt.counter is null) or (oldt.counter = newt.counter))<br> AND newt.element_id = tab.element_id<br> AND newt.altered_id = tab.altered_id;<br> 0 rows inserted/updated/deleted<br> ij&gt; – Alter the table to increase column<br> ALTER TABLE tab ALTER altered_id SET DATA TYPE VARCHAR(64);<br> 0 rows inserted/updated/deleted<br> ij&gt; – insert the data<br> insert into tab values (99, '012345678901234567890123456789001234567890',1,CURRE<br> NT_TIMESTAMP);<br> 1 row inserted/updated/deleted<br> ij&gt; – update and reproduce the issue<br> update tab set timets = CURRENT_TIMESTAMP where ELEMENT_ID = 99;<br> ERROR 22001: A truncation error was encountered trying to shrink VARCHAR '012345<br> 678901234567890123456789001234567890' to length 30.<br> java.sql.SQLDataException: A truncation error was encountered trying to shrink V<br> ARCHAR '012345678901234567890123456789001234567890' to length 30.<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLE<br> xceptionFactory40.java:79)<br> at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)</p> 
                  <p> at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException<br> (TransactionResourceImpl.java:391)<br> at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Tr<br> ansactionResourceImpl.java:346)<br> at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConne<br> ction.java:2269)<br> at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Connection<br> Child.java:81)<br> at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedState<br> ment.java:1321)<br> at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java<br> :625)<br> at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java<br> :555)<br> at org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:367)<br> at org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:521)<br> at org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:3<br> 63)<br> at org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:261)<br> at org.apache.derby.impl.tools.ij.Main.go(Main.java:229)<br> at org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)<br> at org.apache.derby.impl.tools.ij.Main.main(Main.java:75)<br> at org.apache.derby.tools.ij.main(ij.java:59)<br> Caused by: java.sql.SQLException: A truncation error was encountered trying to s<br> hrink VARCHAR '012345678901234567890123456789001234567890' to length 30.<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExc<br> eptionFactory.java:45)<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransport<br> AcrossDRDA(SQLExceptionFactory40.java:119)<br> at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLE<br> xceptionFactory40.java:70)<br> ... 16 more<br> Caused by: ERROR 22001: A truncation error was encountered trying to shrink VARC<br> HAR '012345678901234567890123456789001234567890' to length 30.<br> at org.apache.derby.iapi.error.StandardException.newException(StandardEx<br> ception.java:343)<br> at org.apache.derby.iapi.types.SQLChar.hasNonBlankChars(SQLChar.java:176<br> 6)<br> at org.apache.derby.iapi.types.SQLChar.setWidth(SQLChar.java:1840)<br> at org.apache.derby.exe.ac0b5b0099x012bxf542xab11x0000001bd2983.e2(Unkno<br> wn Source)<br> at org.apache.derby.impl.services.reflect.DirectCall.invoke(ReflectGener<br> atedClass.java:143)<br> at org.apache.derby.impl.sql.execute.GenericQualifier.getOrderable(Gener<br> icQualifier.java:96)<br> at org.apache.derby.impl.sql.execute.NoPutResultSetImpl.clearOrderableCa<br> che(NoPutResultSetImpl.java:313)<br> at org.apache.derby.impl.sql.execute.TableScanResultSet.openScanControll<br> er(TableScanResultSet.java:350)<br> at org.apache.derby.impl.sql.execute.TableScanResultSet.openCore(TableSc<br> anResultSet.java:262)<br> at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.openCore(P<br> rojectRestrictResultSet.java:174)<br> at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.openCore(P<br> rojectRestrictResultSet.java:174)<br> at org.apache.derby.impl.sql.execute.NormalizeResultSet.openCore(Normali<br> zeResultSet.java:146)<br> at org.apache.derby.impl.sql.execute.UpdateResultSet.setup(UpdateResultS<br> et.java:344)<br> at org.apache.derby.impl.sql.execute.UpdateResultSet.open(UpdateResultSe<br> t.java:263)<br> at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Generi<br> cPreparedStatement.java:436)<br> at org.apache.derby.impl.sql.GenericPreparedStatement.executeSubStatemen<br> t(GenericPreparedStatement.java:306)<br> at org.apache.derby.impl.sql.execute.GenericTriggerExecutor.executeSPS(G<br> enericTriggerExecutor.java:173)<br> at org.apache.derby.impl.sql.execute.RowTriggerExecutor.fireTrigger(RowT<br> riggerExecutor.java:111)<br> at org.apache.derby.impl.sql.execute.TriggerEventActivator.notifyEvent(T<br> riggerEventActivator.java:278)<br> at org.apache.derby.impl.sql.execute.UpdateResultSet.fireAfterTriggers(U<br> pdateResultSet.java:817)<br> at org.apache.derby.impl.sql.execute.UpdateResultSet.open(UpdateResultSe<br> t.java:280)<br> at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Generi<br> cPreparedStatement.java:436)<br> at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPre<br> paredStatement.java:317)<br> at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedState<br> ment.java:1232)<br> ... 10 more<br> ij&gt;</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/DERBY-4874?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/DERBY-4874?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/DERBY-4874?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/DERBY-4874?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12467885" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12467885/derby.log" draggable="true" data-downloadurl="text/x-log:derby.log:https://issues.apache.org/jira/secure/attachment/12467885/derby.log"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12467885/derby.log" title="Latest  10/Jan/11 12:07 - Knut Anders Hatlen" draggable="true" data-downloadurl="text/x-log:derby.log:https://issues.apache.org/jira/secure/attachment/12467885/derby.log">derby.log</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-01-10T12:07:52.798Z">10/Jan/11 12:07</time>
                   </dd>
                   <dd class="attachment-size">
                    9 kB
                   </dd>
                   <dd class="attachment-author">
                    Knut Anders Hatlen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12466260" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12466260/DERBY4874_106_backport_diff_ver4.txt" draggable="true" data-downloadurl="text/plain:DERBY4874_106_backport_diff_ver4.txt:https://issues.apache.org/jira/secure/attachment/12466260/DERBY4874_106_backport_diff_ver4.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12466260/DERBY4874_106_backport_diff_ver4.txt" title="Latest  14/Dec/10 22:28 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4874_106_backport_diff_ver4.txt:https://issues.apache.org/jira/secure/attachment/12466260/DERBY4874_106_backport_diff_ver4.txt">DERBY4874_106_backport_diff_ver4.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-12-14T22:28:11.497Z">14/Dec/10 22:28</time>
                   </dd>
                   <dd class="attachment-size">
                    38 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12466261" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12466261/DERBY4874_106_backport_stat_ver4.txt" draggable="true" data-downloadurl="text/plain:DERBY4874_106_backport_stat_ver4.txt:https://issues.apache.org/jira/secure/attachment/12466261/DERBY4874_106_backport_stat_ver4.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12466261/DERBY4874_106_backport_stat_ver4.txt" title="Latest  14/Dec/10 22:28 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4874_106_backport_stat_ver4.txt:https://issues.apache.org/jira/secure/attachment/12466261/DERBY4874_106_backport_stat_ver4.txt">DERBY4874_106_backport_stat_ver4.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-12-14T22:28:11.573Z">14/Dec/10 22:28</time>
                   </dd>
                   <dd class="attachment-size">
                    0.5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12465626" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12465626/DERBY4874_comments_and_test_missing_diff_ver3.txt" draggable="true" data-downloadurl="text/plain:DERBY4874_comments_and_test_missing_diff_ver3.txt:https://issues.apache.org/jira/secure/attachment/12465626/DERBY4874_comments_and_test_missing_diff_ver3.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12465626/DERBY4874_comments_and_test_missing_diff_ver3.txt" title="Latest  06/Dec/10 22:20 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4874_comments_and_test_missing_diff_ver3.txt:https://issues.apache.org/jira/secure/attachment/12465626/DERBY4874_comments_and_test_missing_diff_ver3.txt">DERBY4874_comments_and_test_missing_diff_ver3.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-12-06T22:20:06.242Z">06/Dec/10 22:20</time>
                   </dd>
                   <dd class="attachment-size">
                    56 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12465627" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12465627/DERBY4874_comments_and_test_missing_stat_ver3.txt" draggable="true" data-downloadurl="text/plain:DERBY4874_comments_and_test_missing_stat_ver3.txt:https://issues.apache.org/jira/secure/attachment/12465627/DERBY4874_comments_and_test_missing_stat_ver3.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12465627/DERBY4874_comments_and_test_missing_stat_ver3.txt" title="Latest  06/Dec/10 22:20 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4874_comments_and_test_missing_stat_ver3.txt:https://issues.apache.org/jira/secure/attachment/12465627/DERBY4874_comments_and_test_missing_stat_ver3.txt">DERBY4874_comments_and_test_missing_stat_ver3.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-12-06T22:20:06.312Z">06/Dec/10 22:20</time>
                   </dd>
                   <dd class="attachment-size">
                    0.5 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12459681" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12459681/DERBY4874_not_ready_for_commit_diff_ver2.txt" draggable="true" data-downloadurl="text/plain:DERBY4874_not_ready_for_commit_diff_ver2.txt:https://issues.apache.org/jira/secure/attachment/12459681/DERBY4874_not_ready_for_commit_diff_ver2.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12459681/DERBY4874_not_ready_for_commit_diff_ver2.txt" title="Latest  16/Nov/10 05:37 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4874_not_ready_for_commit_diff_ver2.txt:https://issues.apache.org/jira/secure/attachment/12459681/DERBY4874_not_ready_for_commit_diff_ver2.txt">DERBY4874_not_ready_for_commit_diff_ver2.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-11-16T05:37:32.139Z">16/Nov/10 05:37</time>
                   </dd>
                   <dd class="attachment-size">
                    17 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12459381" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12459381/DERBY4874_not_ready_for_commit_diff.txt" draggable="true" data-downloadurl="text/plain:DERBY4874_not_ready_for_commit_diff.txt:https://issues.apache.org/jira/secure/attachment/12459381/DERBY4874_not_ready_for_commit_diff.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12459381/DERBY4874_not_ready_for_commit_diff.txt" title="Latest  11/Nov/10 20:52 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4874_not_ready_for_commit_diff.txt:https://issues.apache.org/jira/secure/attachment/12459381/DERBY4874_not_ready_for_commit_diff.txt">DERBY4874_not_ready_for_commit_diff.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-11-11T20:52:27.333Z">11/Nov/10 20:52</time>
                   </dd>
                   <dd class="attachment-size">
                    15 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12459682" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12459682/DERBY4874_not_ready_for_commit_stat_ver2.txt" draggable="true" data-downloadurl="text/plain:DERBY4874_not_ready_for_commit_stat_ver2.txt:https://issues.apache.org/jira/secure/attachment/12459682/DERBY4874_not_ready_for_commit_stat_ver2.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12459682/DERBY4874_not_ready_for_commit_stat_ver2.txt" title="Latest  16/Nov/10 05:37 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4874_not_ready_for_commit_stat_ver2.txt:https://issues.apache.org/jira/secure/attachment/12459682/DERBY4874_not_ready_for_commit_stat_ver2.txt">DERBY4874_not_ready_for_commit_stat_ver2.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-11-16T05:37:32.187Z">16/Nov/10 05:37</time>
                   </dd>
                   <dd class="attachment-size">
                    0.3 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12459382" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12459382/DERBY4874_not_ready_for_commit_stat.txt" draggable="true" data-downloadurl="text/plain:DERBY4874_not_ready_for_commit_stat.txt:https://issues.apache.org/jira/secure/attachment/12459382/DERBY4874_not_ready_for_commit_stat.txt"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12459382/DERBY4874_not_ready_for_commit_stat.txt" title="Latest  11/Nov/10 20:52 - Mamta A. Satoor" draggable="true" data-downloadurl="text/plain:DERBY4874_not_ready_for_commit_stat.txt:https://issues.apache.org/jira/secure/attachment/12459382/DERBY4874_not_ready_for_commit_stat.txt">DERBY4874_not_ready_for_commit_stat.txt</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-11-11T20:52:27.364Z">11/Nov/10 20:52</time>
                   </dd>
                   <dd class="attachment-size">
                    0.3 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12467989" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12467989/droptable.diff" draggable="true" data-downloadurl="text/plain:droptable.diff:https://issues.apache.org/jira/secure/attachment/12467989/droptable.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12467989/droptable.diff" title="Latest  11/Jan/11 09:49 - Knut Anders Hatlen" draggable="true" data-downloadurl="text/plain:droptable.diff:https://issues.apache.org/jira/secure/attachment/12467989/droptable.diff">droptable.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-01-11T09:49:16.164Z">11/Jan/11 09:49</time>
                   </dd>
                   <dd class="attachment-size">
                    0.9 kB
                   </dd>
                   <dd class="attachment-author">
                    Knut Anders Hatlen
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12468571" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12468571/releaseNote.html" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12468571/releaseNote.html"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-code" title="HTML File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12468571/releaseNote.html" title="Latest  17/Jan/11 16:44 - Mamta A. Satoor" draggable="true" data-downloadurl="text/html:releaseNote.html:https://issues.apache.org/jira/secure/attachment/12468571/releaseNote.html">releaseNote.html</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2011-01-17T16:44:29.864Z">17/Jan/11 16:44</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Mamta A. Satoor
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12458292" data-issue-id="12478632" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12458292/trigAlterColumn.sql" draggable="true" data-downloadurl="application/octet-stream:trigAlterColumn.sql:https://issues.apache.org/jira/secure/attachment/12458292/trigAlterColumn.sql"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12458292/trigAlterColumn.sql" title="Latest  28/Oct/10 23:55 - Kathey Marsden" draggable="true" data-downloadurl="application/octet-stream:trigAlterColumn.sql:https://issues.apache.org/jira/secure/attachment/12458292/trigAlterColumn.sql">trigAlterColumn.sql</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-10-28T23:55:59.807Z">28/Oct/10 23:55</time>
                   </dd>
                   <dd class="attachment-size">
                    1 kB
                   </dd>
                   <dd class="attachment-author">
                    Kathey Marsden
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="breaks">
                   breaks
                  </dt> 
                  <dd id="internal-12674782_12310050"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-6383: Update trigger defined on one column fires on update of other columns"> <a href="/jira/browse/DERBY-6383" data-issue-key="DERBY-6383" class="issue-link link-title resolution">DERBY-6383</a> <span class="link-summary">Update trigger defined on one column fires on update of other columns</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12738827_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" width="16" height="16" title="Bug - A problem which impairs or prevents the functions of the product." alt="Bug - A problem which impairs or prevents the functions of the product."> <span title="DERBY-6726: NPE from trigger"> <a href="/jira/browse/DERBY-6726" data-issue-key="DERBY-6726" class="issue-link link-title resolution">DERBY-6726</a> <span class="link-summary">NPE from trigger</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Resolved</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.</span>">Resolved</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_mamtas" rel="mamtas" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Mamta A. Satoor&quot;,&quot;emailAddress&quot;:&quot;msatoor@gmail.com&quot;,&quot;username&quot;:&quot;mamtas&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="mamtas"></span></span> Mamta A. Satoor </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_kmarsden" rel="kmarsden" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Kathey Marsden&quot;,&quot;emailAddress&quot;:&quot;kmarsdenderby@sbcglobal.net&quot;,&quot;username&quot;:&quot;kmarsden&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="kmarsden"></span></span> Kathey Marsden </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">2</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="28/Oct/10 23:55"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2010-10-28T23:55:14+0000">28/Oct/10 23:55</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="01/Oct/16 17:51"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2016-10-01T17:51:45+0000">01/Oct/16 17:51</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="15/Feb/12 00:01"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2012-02-15T00:01:49+0000">15/Feb/12 00:01</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/DERBY-4874?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/DERBY-4874?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12926012\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12926012&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12926012\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12926012_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12926012_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/10 23:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-10-28T23:55:59+0000\'\u003e28\\/Oct\\/10 23:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching repro\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12926012_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12926012_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'28\\/Oct\\/10 23:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-10-28T23:55:59+0000\'\u003e28\\/Oct\\/10 23:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching repro              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12926369\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12926369&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12926369\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12926369_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12926369_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/10 17:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-10-29T17:38:39+0000\'\u003e29\\/Oct\\/10 17:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe repro fails on all the codelines starting 10.2. I do not have 10.1 to try it right away but seems like we have had this bug for a long time.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12926369_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12926369_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/10 17:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-10-29T17:38:39+0000\'\u003e29\\/Oct\\/10 17:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The repro fails on all the codelines starting 10.2. I do not have 10.1 to try it right away but seems like we have had this bug for a long time.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12926393\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12926393&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12926393\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12926393_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12926393_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/10 18:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-10-29T18:30:52+0000\'\u003e29\\/Oct\\/10 18:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ei would look at if the trigger code is getting recompiled at alter time.  \u003cbr\\/\u003e\\nIt might be useful to see if adding an index after the alter on dmtrigsnd.optcounter causes a recompile, it would be bad\u003cbr\\/\u003e\\nif it did not as i believe it would lead to corrupted indexes.   If it works maybe comparing the 2 code paths would lend some\u003cbr\\/\u003e\\nlight.\u003c\\/p\u003e\\n\\n\u003cp\u003eI assume dropping and recreating the trigger is a workaround.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12926393_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12926393_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/10 18:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-10-29T18:30:52+0000\'\u003e29\\/Oct\\/10 18:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    i would look at if the trigger code is getting recompiled at alter time.   \\nIt might be useful to see if adding an index after the alter on dmtrigsnd.optcounter causes a recompile, it would be bad \\nif it did not as i believe it would lead to corrupted indexes.   If it works maybe comparing the 2 code paths would lend some \\nlight. \\n\\n I assume dropping and recreating the trigger is a workaround.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12926479\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12926479&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12926479\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12926479_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12926479_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/10 22:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-10-29T22:12:10+0000\'\u003e29\\/Oct\\/10 22:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI noticed dropping and recreating the column seems to be work ok. e.g.\u003c\\/p\u003e\\n\\n\u003cp\u003eALTER TABLE TAB DROP COLUMN altered_id;\u003cbr\\/\u003e\\nALTER TABLE TAB ADD  COLUMN altered_id VARCHAR(64);\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; insert the data\u003cbr\\/\u003e\\ninsert into tab (element_id, altered_id, counter, timets) VALUES (99, \'012345678901234567890123456789001234567890\',1,CURRENT_TIMESTAMP);\u003c\\/p\u003e\\n\\n\u003cp\u003eupdate tab set timets = CURRENT_TIMESTAMP where ELEMENT_ID = 99;\u003c\\/p\u003e\\n\\n\u003cp\u003eIt might be also an interesting one for comparison\u003c\\/p\u003e\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12926479_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12926479_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'29\\/Oct\\/10 22:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-10-29T22:12:10+0000\'\u003e29\\/Oct\\/10 22:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I noticed dropping and recreating the column seems to be work ok. e.g. \\n\\n ALTER TABLE TAB DROP COLUMN altered_id; \\nALTER TABLE TAB ADD  COLUMN altered_id VARCHAR(64); \\n\\n &#8211; insert the data \\ninsert into tab (element_id, altered_id, counter, timets) VALUES (99, \'012345678901234567890123456789001234567890\',1,CURRENT_TIMESTAMP); \\n\\n update tab set timets = CURRENT_TIMESTAMP where ELEMENT_ID = 99; \\n\\n It might be also an interesting one for comparison \\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12927042\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12927042&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12927042\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12927042_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12927042_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/10 16:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-01T16:57:40+0000\'\u003e01\\/Nov\\/10 16:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI did some debugging of the original repro and see that trigger is getting invalidated and recompiled but for some reason, we still use the old length of 30 rather than the new length of 64 as indicated by alter table statement. I will continue debugging to see why we pick up length 30 rather than 64.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12927042_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12927042_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'01\\/Nov\\/10 16:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-01T16:57:40+0000\'\u003e01\\/Nov\\/10 16:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I did some debugging of the original repro and see that trigger is getting invalidated and recompiled but for some reason, we still use the old length of 30 rather than the new length of 64 as indicated by alter table statement. I will continue debugging to see why we pick up length 30 rather than 64.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12927495\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12927495&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12927495\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12927495_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12927495_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Nov\\/10 17:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-02T17:07:40+0000\'\u003e02\\/Nov\\/10 17:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have found what the problem is. The user\'s definition of trigger is as follows\u003cbr\\/\u003e\\nCREATE TRIGGER mytrig\u003cbr\\/\u003e\\n AFTER UPDATE ON tab\u003cbr\\/\u003e\\n REFERENCING NEW AS newt OLD AS oldt\u003cbr\\/\u003e\\n FOR EACH ROW MODE DB2SQL\u003cbr\\/\u003e\\n  UPDATE tab set tab.counter = CASE WHEN (oldt.counter &lt; 32767) THEN (oldt.counter + 1) ELSE 1 END\u003cbr\\/\u003e\\n  WHERE ((newt.counter is null) or (oldt.counter = newt.counter))\u003cbr\\/\u003e\\n  AND newt.element_id = tab.element_id\u003cbr\\/\u003e\\n  AND newt.altered_id = tab.altered_id;\u003c\\/p\u003e\\n\\n\u003cp\u003eFor the trigger action plan, Derby creates a SPSDescriptor which is saved in SYS.SYSSTATEMENTS. The above action plan gets converted to following and that is the query that is saved in SYS.SYSSTATEMENTS\u003cbr\\/\u003e\\nUPDATE tab set tab.counter = CASE WHEN (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT)  &lt; 32767) THEN (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT)  + 1) ELSE 1 END\u003cbr\\/\u003e\\n  WHERE ((CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS SMALLINT)  is null) or (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT)  = CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS SMALLINT) ))\u003cbr\\/\u003e\\n  AND CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(1) AS INTEGER)  = tab.element_id\u003cbr\\/\u003e\\n  AND CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(2) AS VARCHAR(30))  = tab.altered_id\u003c\\/p\u003e\\n\\n\u003cp\u003eNotice the casting to VARCHAR(30) which is what the column altered_id is defined at during trigger creation. Later, when we alter the length to VARCHAR(64), we do recognize that trigger has become invalid but we simply pickup the above query from SYS.SYSSTATEMENTS and recompile it which really doesn\'t help because VARCHAR(30) is not really correct anymore.\u003c\\/p\u003e\\n\\n\u003cp\u003eKathey had a test case that she tried where she dropped the column and recreated it with longer length and the trigger seemed to work correctly for that case. I will debug that case to see what is different about it which makes it work. Hopefully, the same technique can be used for our broken case. I will get Kathey\'s test case a try and debug it to understand what is going on. Her test case is as follows\u003c\\/p\u003e\\n\\n\u003cp\u003eALTER TABLE TAB DROP COLUMN altered_id; \u003cbr\\/\u003e\\nALTER TABLE TAB ADD COLUMN altered_id VARCHAR(64); \u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; insert the data \u003cbr\\/\u003e\\ninsert into tab (element_id, altered_id, counter, timets) VALUES (99, \'012345678901234567890123456789001234567890\',1,CURRENT_TIMESTAMP); \u003c\\/p\u003e\\n\\n\u003cp\u003eupdate tab set timets = CURRENT_TIMESTAMP where ELEMENT_ID = 99; \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12927495_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12927495_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'02\\/Nov\\/10 17:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-02T17:07:40+0000\'\u003e02\\/Nov\\/10 17:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have found what the problem is. The user\'s definition of trigger is as follows \\nCREATE TRIGGER mytrig \\n AFTER UPDATE ON tab \\n REFERENCING NEW AS newt OLD AS oldt \\n FOR EACH ROW MODE DB2SQL \\n  UPDATE tab set tab.counter = CASE WHEN (oldt.counter &lt; 32767) THEN (oldt.counter + 1) ELSE 1 END \\n  WHERE ((newt.counter is null) or (oldt.counter = newt.counter)) \\n  AND newt.element_id = tab.element_id \\n  AND newt.altered_id = tab.altered_id; \\n\\n For the trigger action plan, Derby creates a SPSDescriptor which is saved in SYS.SYSSTATEMENTS. The above action plan gets converted to following and that is the query that is saved in SYS.SYSSTATEMENTS \\nUPDATE tab set tab.counter = CASE WHEN (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT)  &lt; 32767) THEN (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT)  + 1) ELSE 1 END \\n  WHERE ((CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS SMALLINT)  is null) or (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT)  = CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS SMALLINT) )) \\n  AND CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(1) AS INTEGER)  = tab.element_id \\n  AND CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(2) AS VARCHAR(30))  = tab.altered_id \\n\\n Notice the casting to VARCHAR(30) which is what the column altered_id is defined at during trigger creation. Later, when we alter the length to VARCHAR(64), we do recognize that trigger has become invalid but we simply pickup the above query from SYS.SYSSTATEMENTS and recompile it which really doesn\'t help because VARCHAR(30) is not really correct anymore. \\n\\n Kathey had a test case that she tried where she dropped the column and recreated it with longer length and the trigger seemed to work correctly for that case. I will debug that case to see what is different about it which makes it work. Hopefully, the same technique can be used for our broken case. I will get Kathey\'s test case a try and debug it to understand what is going on. Her test case is as follows \\n\\n ALTER TABLE TAB DROP COLUMN altered_id;  \\nALTER TABLE TAB ADD COLUMN altered_id VARCHAR(64);  \\n\\n &#8211; insert the data  \\ninsert into tab (element_id, altered_id, counter, timets) VALUES (99, \'012345678901234567890123456789001234567890\',1,CURRENT_TIMESTAMP);  \\n\\n update tab set timets = CURRENT_TIMESTAMP where ELEMENT_ID = 99;               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12927995\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12927995&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12927995\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12927995_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12927995_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Nov\\/10 20:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-03T20:47:00+0000\'\u003e03\\/Nov\\/10 20:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 03\\/Nov\\/10 21:48\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere is what I found out about the test case of alter table to drop the column and another alter table to add the column back again. Although it appears that it is working(no exception thrown during the UPDATE sql but UPDATE trigger is not updating the table it is supposed to update). The test case is as follows\u003cbr\\/\u003e\\nFollowing is the schema to create the table and the trigger\u003cbr\\/\u003e\\nconnect \'jdbc:derby:wombat;create=true\';\u003cbr\\/\u003e\\n&#8211; Create the table\u003cbr\\/\u003e\\nCREATE TABLE tab (\u003cbr\\/\u003e\\n       element_id         INTEGER NOT NULL,\u003cbr\\/\u003e\\n       altered_id    \\t  VARCHAR(30) NOT NULL,\u003cbr\\/\u003e\\n       counter            SMALLINT NOT NULL DEFAULT 0,\\t\u003cbr\\/\u003e\\n       timets            TIMESTAMP NOT NULL\u003cbr\\/\u003e\\n);\u003cbr\\/\u003e\\n&#8211; Create a trigger against the table\u003cbr\\/\u003e\\nCREATE TRIGGER mytrig\u003cbr\\/\u003e\\n AFTER UPDATE ON tab\u003cbr\\/\u003e\\n REFERENCING NEW AS newt OLD AS oldt\u003cbr\\/\u003e\\n FOR EACH ROW MODE DB2SQL\u003cbr\\/\u003e\\n  UPDATE tab set tab.counter = CASE WHEN (oldt.counter &lt; 32767) THEN (oldt.counter + 1) ELSE 1 END\u003cbr\\/\u003e\\n  WHERE ((newt.counter is null) or (oldt.counter = newt.counter))\u003cbr\\/\u003e\\n  AND newt.element_id = tab.element_id\u003cbr\\/\u003e\\n  AND newt.altered_id = tab.altered_id;\u003c\\/p\u003e\\n\\n\u003cp\u003e&#8211; Next, we dop and recreate the column (with a different length) and a row into the table\u003cbr\\/\u003e\\nalter table tab drop column altered_id;\u003cbr\\/\u003e\\nALTER TABLE TAB ADD COLUMN altered_id VARCHAR(64); \u003cbr\\/\u003e\\ninsert into tab(element_id, altered_id, counter, timets) values (99, \'1234567890\',1,CURRENT_TIMESTAMP);\u003cbr\\/\u003e\\nselect * from tab;\u003cbr\\/\u003e\\nELEMENT_ID |COUNT&amp;|TIMETS                    |ALTERED_ID\u003cbr\\/\u003e\\n----------------------------------------------------------------------------\u003cbr\\/\u003e\\n99         |1     |2010-11-03 10:05:29.39    |1234567890\u003cbr\\/\u003e\\n&#8211; the following update will cause the trigger to fire which should increment the counter column\'s value from 1 to 2 but it doesn\'t. The explanation is below\u003cbr\\/\u003e\\nupdate tab set timets = CURRENT_TIMESTAMP where ELEMENT_ID = 99; \u003cbr\\/\u003e\\nselect * from tab;\u003cbr\\/\u003e\\nELEMENT_ID |COUNT&amp;|TIMETS                    |ALTERED_ID\u003cbr\\/\u003e\\n99         |1     |2010-11-03 10:05:38.343   |1234567890\u003c\\/p\u003e\\n\\n\u003cp\u003eThe trigger action gets changed internally before a SPSDescriptor is created for it\u003cbr\\/\u003e\\nUPDATE tab set tab.counter = CASE WHEN (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT) &lt; 32767) THEN (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT) + 1) ELSE 1 END \u003cbr\\/\u003e\\n  WHERE ((CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS SMALLINT) is null) or (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT) = CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS SMALLINT) )) \u003cbr\\/\u003e\\n  AND CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(1) AS INTEGER) = tab.element_id \u003cbr\\/\u003e\\n  AND CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(2) AS VARCHAR(30)) = tab.altered_id \u003c\\/p\u003e\\n\\n\u003cp\u003eAs we can see above, the columns are being accessed through column positions rather than names(this was done as part of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1258\\\" title=\\\"Wrong value returned in a row trigger action statement if the table has column names that are identical when upper-cased.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1258\\\"\u003e\u003cdel\u003eDERBY-1258\u003c\\/del\u003e\u003c\\/a\u003e. But the column positions have changed in the underlying table because of the drop column and new column additions. The above sql, when it gets the column org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(2), it is getting the column COUNTER rather than the column ALTERED_ID and because of that, the WHERE clause above returns FALSE and hence no row is updated by the trigger action.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis case is slightly different than the original test case where the ALTER TABLE changed the length of the existing column. I will explain the difference through the system tables. SYSTRIGGERS keeps track of the columns that are referenced in the trigger action. Those columns are later used at trigger execution time to decide which columns from the trigger table need to be actually fetched into memory. The column tracking is done through the column positions in the table. An ALTER TABLE which drops the column and adds it back again, then the column is going to get added into a new position in the table and hence the original column positions saved in SYSTRIGGERS are not going to be correct anymore. In a case like this, we want to recalculate the column positions of the trigger action columns and then regenerate the SQL for SPSDescriptor and compile the regenerated SQL. For our original case, where simply the length of the colunm was changed but not it\'s position, we just want to regenerate the SQL for SPSDescriptor and then compile that new query. For our original case, there is no need to recalculate the column positions of the trigger action columns. It may turn out to be easier to just do both the steps for all trigger invalidation (provided that the trigger has REFERENCES clause because the problem is only when trigger action is referenecing to old and new column values of the row. For all other trigger cases, we should be fine)\u003c\\/p\u003e\\n\\n\u003cp\u003eI will file a jira for this problem and go back to looking at SPSDescriptor sql regerenation and updating SYSSTATEMENTS with that new sql.for a fix for the original problem.\u003c\\/p\u003e\\n\\n\u003cp\u003ePlease let me know if anyone has any comments.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12927995_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12927995_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Nov\\/10 20:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-03T20:47:00+0000\'\u003e03\\/Nov\\/10 20:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 03\\/Nov\\/10 21:48\\\"\u003eedited\u003c\\/span\u003e                   Here is what I found out about the test case of alter table to drop the column and another alter table to add the column back again. Although it appears that it is working(no exception thrown during the UPDATE sql but UPDATE trigger is not updating the table it is supposed to update). The test case is as follows \\nFollowing is the schema to create the table and the trigger \\nconnect \'jdbc:derby:wombat;create=true\'; \\n&#8211; Create the table \\nCREATE TABLE tab ( \\n       element_id         INTEGER NOT NULL, \\n       altered_id    \\t  VARCHAR(30) NOT NULL, \\n       counter            SMALLINT NOT NULL DEFAULT 0,\\t \\n       timets            TIMESTAMP NOT NULL \\n); \\n&#8211; Create a trigger against the table \\nCREATE TRIGGER mytrig \\n AFTER UPDATE ON tab \\n REFERENCING NEW AS newt OLD AS oldt \\n FOR EACH ROW MODE DB2SQL \\n  UPDATE tab set tab.counter = CASE WHEN (oldt.counter &lt; 32767) THEN (oldt.counter + 1) ELSE 1 END \\n  WHERE ((newt.counter is null) or (oldt.counter = newt.counter)) \\n  AND newt.element_id = tab.element_id \\n  AND newt.altered_id = tab.altered_id; \\n\\n &#8211; Next, we dop and recreate the column (with a different length) and a row into the table \\nalter table tab drop column altered_id; \\nALTER TABLE TAB ADD COLUMN altered_id VARCHAR(64);  \\ninsert into tab(element_id, altered_id, counter, timets) values (99, \'1234567890\',1,CURRENT_TIMESTAMP); \\nselect * from tab; \\nELEMENT_ID |COUNT&amp;|TIMETS                    |ALTERED_ID \\n---------------------------------------------------------------------------- \\n99         |1     |2010-11-03 10:05:29.39    |1234567890 \\n&#8211; the following update will cause the trigger to fire which should increment the counter column\'s value from 1 to 2 but it doesn\'t. The explanation is below \\nupdate tab set timets = CURRENT_TIMESTAMP where ELEMENT_ID = 99;  \\nselect * from tab; \\nELEMENT_ID |COUNT&amp;|TIMETS                    |ALTERED_ID \\n99         |1     |2010-11-03 10:05:38.343   |1234567890 \\n\\n The trigger action gets changed internally before a SPSDescriptor is created for it \\nUPDATE tab set tab.counter = CASE WHEN (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT) &lt; 32767) THEN (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT) + 1) ELSE 1 END  \\n  WHERE ((CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS SMALLINT) is null) or (CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(3) AS SMALLINT) = CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS SMALLINT) ))  \\n  AND CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(1) AS INTEGER) = tab.element_id  \\n  AND CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(2) AS VARCHAR(30)) = tab.altered_id  \\n\\n As we can see above, the columns are being accessed through column positions rather than names(this was done as part of   DERBY-1258  . But the column positions have changed in the underlying table because of the drop column and new column additions. The above sql, when it gets the column org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(2), it is getting the column COUNTER rather than the column ALTERED_ID and because of that, the WHERE clause above returns FALSE and hence no row is updated by the trigger action. \\n\\n This case is slightly different than the original test case where the ALTER TABLE changed the length of the existing column. I will explain the difference through the system tables. SYSTRIGGERS keeps track of the columns that are referenced in the trigger action. Those columns are later used at trigger execution time to decide which columns from the trigger table need to be actually fetched into memory. The column tracking is done through the column positions in the table. An ALTER TABLE which drops the column and adds it back again, then the column is going to get added into a new position in the table and hence the original column positions saved in SYSTRIGGERS are not going to be correct anymore. In a case like this, we want to recalculate the column positions of the trigger action columns and then regenerate the SQL for SPSDescriptor and compile the regenerated SQL. For our original case, where simply the length of the colunm was changed but not it\'s position, we just want to regenerate the SQL for SPSDescriptor and then compile that new query. For our original case, there is no need to recalculate the column positions of the trigger action columns. It may turn out to be easier to just do both the steps for all trigger invalidation (provided that the trigger has REFERENCES clause because the problem is only when trigger action is referenecing to old and new column values of the row. For all other trigger cases, we should be fine) \\n\\n I will file a jira for this problem and go back to looking at SPSDescriptor sql regerenation and updating SYSSTATEMENTS with that new sql.for a fix for the original problem. \\n\\n Please let me know if anyone has any comments.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12928085\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12928085&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12928085\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12928085_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12928085_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Nov\\/10 01:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-04T01:43:03+0000\'\u003e04\\/Nov\\/10 01:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIf a trigger references a column, it seems like ALTER TABLE DROP COLUMN should either\u003cbr\\/\u003e\\n(a) refuse to run, because the trigger is referencing that column, or\u003cbr\\/\u003e\\n(b) drop the column, and also drop the trigger .\u003c\\/p\u003e\\n\\n\u003cp\u003eLeaving the trigger in the system, referencing a non-existent column,\u003cbr\\/\u003e\\ndoes not seem like desirable behavior.\u003c\\/p\u003e\\n\\n\u003cp\u003eIt seems like the \\\"CASCADE\\\" and \\\"RESTRICT\\\" forms of DROP COLUMN should\u003cbr\\/\u003e\\ncontrol whether case (a) or (b) is taken by the ALTER TABLE.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"bryanpendleton\\\" id=\\\"commentauthor_12928085_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=bryanpendleton\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"bryanpendleton\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bryan Pendleton\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12928085_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Nov\\/10 01:43\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-04T01:43:03+0000\'\u003e04\\/Nov\\/10 01:43\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    If a trigger references a column, it seems like ALTER TABLE DROP COLUMN should either \\n(a) refuse to run, because the trigger is referencing that column, or \\n(b) drop the column, and also drop the trigger . \\n\\n Leaving the trigger in the system, referencing a non-existent column, \\ndoes not seem like desirable behavior. \\n\\n It seems like the \\\"CASCADE\\\" and \\\"RESTRICT\\\" forms of DROP COLUMN should \\ncontrol whether case (a) or (b) is taken by the ALTER TABLE. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12928666\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12928666&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12928666\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12928666_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12928666_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Nov\\/10 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-05T16:35:06+0000\'\u003e05\\/Nov\\/10 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 05\\/Nov\\/10 16:46\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBryan, thanks for going through this jira and commenting. I had similar thoughts about ALTER TABLE DROP COLUMNS\'s behavior. If the drop is CASCADE, I would have expected the trigger to be dropped and if RESTRICT, then drop column should have failed. I will put this info to in the new jira \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4887\\\" title=\\\"ALTER TABLE DROP COLUMN leaves the dependent trigger invalid rather than drop it\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4887\\\"\u003e\u003cdel\u003eDERBY-4887\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12928666_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12928666_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Nov\\/10 16:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-05T16:35:06+0000\'\u003e05\\/Nov\\/10 16:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 05\\/Nov\\/10 16:46\\\"\u003eedited\u003c\\/span\u003e                   Bryan, thanks for going through this jira and commenting. I had similar thoughts about ALTER TABLE DROP COLUMNS\'s behavior. If the drop is CASCADE, I would have expected the trigger to be dropped and if RESTRICT, then drop column should have failed. I will put this info to in the new jira   DERBY-4887  .              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12930642\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12930642&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12930642\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12930642_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12930642_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Nov\\/10 16:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-10T16:26:06+0000\'\u003e10\\/Nov\\/10 16:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am currently running Junit suite with my changes which are not ready for commit. Once test that I see fails all the time is DatabaseMetaDataTest.testGetURL with following failure. I do not know why my changes would cause this failure. It seems like the terriotry and collation properties are switched by the getURL method. Has anyone seen this failure before?\u003c\\/p\u003e\\n\\n\u003cp\u003ejunit.framework.ComparisonFailure: getURL match expected:&lt;...territory=en;collation=TERRITORY_BASED&gt; but was:&lt;...collation=TERRITORY_BASED;territory=en&gt;\u003c\\/p\u003e\\n\\n\u003cp\u003eAs for my changes, I have copied the relevant code from CreateTriggerNode into TriggerDescriptor to regenerate the trigger action statement. Currently, every reference to a column from new table in trigger action gets switched to \u003cbr\\/\u003e\\nCAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(ColumnNumber) AS COLUMNDatatype)\u003cbr\\/\u003e\\nAnd every reference to \u003cbr\\/\u003e\\nCAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(ColumnNumber) AS COLUMNDatatype)\u003c\\/p\u003e\\n\\n\u003cp\u003eIn our specific case, the Alter table has changed the data type from varchar(30) to varchar(64) but the trigger action plan continued to use varchar(30). To fix varchar(30) casting to varchar(64), we need to regenerate the trigger action sql if \u003cbr\\/\u003e\\n1)the trigger is found to be invalid, \u003cbr\\/\u003e\\n2)the trigger is defined at row level (that is the only kind of trigger which allows reference to individual columns from old\\/new row)\u003cbr\\/\u003e\\n3)the trigger action plan has columns that reference old\\/new row columns\u003c\\/p\u003e\\n\\n\u003cp\u003eI check for above 3 conditions when a trigger is going to be fired and if true, then regenerate the sql and update the SYSSTATEMENTS row for the trigger action plan stored prepared statement.\u003c\\/p\u003e\\n\\n\u003cp\u003eAt this point, I have lot of code duplication but once I get all the tests running succesfully, I will post the patch as it is and then will work on avoiding the code duplication between CreateTriggerNode and TriggerDescriptor.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12930642_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12930642_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Nov\\/10 16:26\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-10T16:26:06+0000\'\u003e10\\/Nov\\/10 16:26\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am currently running Junit suite with my changes which are not ready for commit. Once test that I see fails all the time is DatabaseMetaDataTest.testGetURL with following failure. I do not know why my changes would cause this failure. It seems like the terriotry and collation properties are switched by the getURL method. Has anyone seen this failure before? \\n\\n junit.framework.ComparisonFailure: getURL match expected:&lt;...territory=en;collation=TERRITORY_BASED&gt; but was:&lt;...collation=TERRITORY_BASED;territory=en&gt; \\n\\n As for my changes, I have copied the relevant code from CreateTriggerNode into TriggerDescriptor to regenerate the trigger action statement. Currently, every reference to a column from new table in trigger action gets switched to  \\nCAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(ColumnNumber) AS COLUMNDatatype) \\nAnd every reference to  \\nCAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getOldRow().getObject(ColumnNumber) AS COLUMNDatatype) \\n\\n In our specific case, the Alter table has changed the data type from varchar(30) to varchar(64) but the trigger action plan continued to use varchar(30). To fix varchar(30) casting to varchar(64), we need to regenerate the trigger action sql if  \\n1)the trigger is found to be invalid,  \\n2)the trigger is defined at row level (that is the only kind of trigger which allows reference to individual columns from old\\/new row) \\n3)the trigger action plan has columns that reference old\\/new row columns \\n\\n I check for above 3 conditions when a trigger is going to be fired and if true, then regenerate the sql and update the SYSSTATEMENTS row for the trigger action plan stored prepared statement. \\n\\n At this point, I have lot of code duplication but once I get all the tests running succesfully, I will post the patch as it is and then will work on avoiding the code duplication between CreateTriggerNode and TriggerDescriptor.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12931192\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12931192&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12931192\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12931192_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12931192_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/10 20:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-11T20:52:27+0000\'\u003e11\\/Nov\\/10 20:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have a patch which is not ready for commit yet because of a failure I still need to investigate. The failure is in lang\\/predicatesIntoViews.sql and it seems like that the trigger action plan is getting regenerated with wrong column numbers. I need to narrow down the test to a form where it is easier to debug. The part of the failure looks as follows\u003cbr\\/\u003e\\n$ java org.apache.derbyTesting.functionTests.harness.RunTest lang\\/predicatesIntoViews.sql\u003cbr\\/\u003e\\nderby.optimizer.noTimeout=true\u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eStart: predicatesIntoViews jdk1.6.0 2010-11-11 11:52:34 ***\u003cbr\\/\u003e\\n4739a4740,4756\u003cbr\\/\u003e\\n&gt; ERROR 38000: The exception \'java.sql.SQLException: Column \'3\' not found.\' was thrown while evaluating an expression.\u003cbr\\/\u003e\\n&gt; ERROR S0022: Column \'3\' not found.\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI wanted to put out the patch in case anybody had comments on the general approach of the fix. Once I have the test failure fixed, I will try to put as much of the code as possible may be in DataDictionary and have both CreateTriigerNode and TriggerDescriptor call that code rather than have the duplication of the code in two places as it being done in my patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12931192_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12931192_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Nov\\/10 20:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-11T20:52:27+0000\'\u003e11\\/Nov\\/10 20:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have a patch which is not ready for commit yet because of a failure I still need to investigate. The failure is in lang\\/predicatesIntoViews.sql and it seems like that the trigger action plan is getting regenerated with wrong column numbers. I need to narrow down the test to a form where it is easier to debug. The part of the failure looks as follows \\n$ java org.apache.derbyTesting.functionTests.harness.RunTest lang\\/predicatesIntoViews.sql \\nderby.optimizer.noTimeout=true \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t Start: predicatesIntoViews jdk1.6.0 2010-11-11 11:52:34 *** \\n4739a4740,4756 \\n&gt; ERROR 38000: The exception \'java.sql.SQLException: Column \'3\' not found.\' was thrown while evaluating an expression. \\n&gt; ERROR S0022: Column \'3\' not found. \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n I wanted to put out the patch in case anybody had comments on the general approach of the fix. Once I have the test failure fixed, I will try to put as much of the code as possible may be in DataDictionary and have both CreateTriigerNode and TriggerDescriptor call that code rather than have the duplication of the code in two places as it being done in my patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12931386\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12931386&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12931386\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12931386_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12931386_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/10 13:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-12T13:06:32+0000\'\u003e12\\/Nov\\/10 13:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI took a look at the patch. Note that I\'m not familiar with this part\u003cbr\\/\u003e\\nof the code, so my comments are only about how the code can be\u003cbr\\/\u003e\\nimproved, not about the correctness of the approach.\u003c\\/p\u003e\\n\\n\u003cp\u003e1) I saw your comment about sharing code with CreateTriggerNode\u003cbr\\/\u003e\\ninstead of duplicating it... Yes, please! \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003e2) The changes in BaseMonitor don\'t seem to be related to this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003e3) The new method sortRefs() looks unnecessarily complex. In\u003cbr\\/\u003e\\nparticular:\u003c\\/p\u003e\\n\\n\u003cp\u003e  a) The code that copies the Vector to an array, could be replaced\u003cbr\\/\u003e\\n  with a one-liner that just called toArray().\u003c\\/p\u003e\\n\\n\u003cp\u003e  b) Using java.util.Collections.sort() sounds cleaner and less\u003cbr\\/\u003e\\n  error-prone than reimplementing bubble sort.\u003c\\/p\u003e\\n\\n\u003cp\u003e4) I find the added code in getActionSPS() a bit hard to follow. It\u003cbr\\/\u003e\\nmay help if some short comments were added explaining the purpose of\u003cbr\\/\u003e\\nthe various if statements and for loops. (For example, the part of the\u003cbr\\/\u003e\\nJIRA comment from Nov 10 that says \\\"we need to regenerate the trigger\u003cbr\\/\u003e\\naction sql if 1) ... 2) ... 3) ...\\\" would be a helpful comment for the\u003cbr\\/\u003e\\nouter if statement.)\u003c\\/p\u003e\\n\\n\u003cp\u003e5) In getActionSPS(), the code that sets all elements of\u003cbr\\/\u003e\\ntriggerColsAndTriggerActionCols to -1 could be simplified by using\u003cbr\\/\u003e\\njava.util.Arrays.fill().\u003c\\/p\u003e\\n\\n\u003cp\u003e6) In getActionSPS(), (referencedColsInTriggerAction != null) is\u003cbr\\/\u003e\\nchecked both in the outer and the inner if statement, so one of the\u003cbr\\/\u003e\\nchecks is redundant and could be removed.\u003c\\/p\u003e\\n\\n\u003cp\u003e7) The new variables in getActionSPS() are only used if the trigger\u003cbr\\/\u003e\\nneeds to be recompiled. It would be good to move the declarations\u003cbr\\/\u003e\\ninside the if statement so that we don\'t need to create a\u003cbr\\/\u003e\\nStringBuilder and check the version of the data dictionary in the\u003cbr\\/\u003e\\ncommon case.\u003c\\/p\u003e\\n\\n\u003cp\u003e8) This code in getActionSPS() looks a bit suspicious:\u003c\\/p\u003e\\n\\n\u003cp\u003e+\\t\\t\\tDataDictionary dd = getDataDictionary();\u003cbr\\/\u003e\\n+\u003cbr\\/\u003e\\n+\\t\\t\\tif (((org.apache.derby.impl.sql.catalog.DataDictionaryImpl) dd).readOnlyUpgrade)\u003cbr\\/\u003e\\n+\\t\\t\\t\\treturn actionSPS;\u003c\\/p\u003e\\n\\n\u003cp\u003eEven if readOnlyUpgrade is false, it will still return actionSPS on\u003cbr\\/\u003e\\nthe next line, so this code appears to have no purpose.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12931386_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12931386_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Nov\\/10 13:06\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-12T13:06:32+0000\'\u003e12\\/Nov\\/10 13:06\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I took a look at the patch. Note that I\'m not familiar with this part \\nof the code, so my comments are only about how the code can be \\nimproved, not about the correctness of the approach. \\n\\n 1) I saw your comment about sharing code with CreateTriggerNode \\ninstead of duplicating it... Yes, please!   \\n\\n 2) The changes in BaseMonitor don\'t seem to be related to this issue. \\n\\n 3) The new method sortRefs() looks unnecessarily complex. In \\nparticular: \\n\\n   a) The code that copies the Vector to an array, could be replaced \\n  with a one-liner that just called toArray(). \\n\\n   b) Using java.util.Collections.sort() sounds cleaner and less \\n  error-prone than reimplementing bubble sort. \\n\\n 4) I find the added code in getActionSPS() a bit hard to follow. It \\nmay help if some short comments were added explaining the purpose of \\nthe various if statements and for loops. (For example, the part of the \\nJIRA comment from Nov 10 that says \\\"we need to regenerate the trigger \\naction sql if 1) ... 2) ... 3) ...\\\" would be a helpful comment for the \\nouter if statement.) \\n\\n 5) In getActionSPS(), the code that sets all elements of \\ntriggerColsAndTriggerActionCols to -1 could be simplified by using \\njava.util.Arrays.fill(). \\n\\n 6) In getActionSPS(), (referencedColsInTriggerAction != null) is \\nchecked both in the outer and the inner if statement, so one of the \\nchecks is redundant and could be removed. \\n\\n 7) The new variables in getActionSPS() are only used if the trigger \\nneeds to be recompiled. It would be good to move the declarations \\ninside the if statement so that we don\'t need to create a \\nStringBuilder and check the version of the data dictionary in the \\ncommon case. \\n\\n 8) This code in getActionSPS() looks a bit suspicious: \\n\\n +\\t\\t\\tDataDictionary dd = getDataDictionary(); \\n+ \\n+\\t\\t\\tif (((org.apache.derby.impl.sql.catalog.DataDictionaryImpl) dd).readOnlyUpgrade) \\n+\\t\\t\\t\\treturn actionSPS; \\n\\n Even if readOnlyUpgrade is false, it will still return actionSPS on \\nthe next line, so this code appears to have no purpose.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12932345\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12932345&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12932345\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12932345_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12932345_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/10 05:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-16T05:37:32+0000\'\u003e16\\/Nov\\/10 05:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKnut, thanks a bunch for taking the time to review the patch. In the attached patch, I have taken care of some of your comments. I am continuing to narrow down lang\\/predicatesIntoViews.sql to find out why wrong trigger action sql is getting regenerated as I mentioned in my comment on Nov 11th. The repro is pretty short compared to original lang\\/predicatesIntoViews.sql. I hope to narrow it down completely soon to be able to debug it. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe attached patch still has duplication of code. After I debug the lang\\/predicatesIntoViews.sql problem, I will next work on putting as much common code as possible in DataDictionary rather than having it in two places which is CreateTriggerNode and TriggerDescriptor. I will also add more comments to the code where applicable and add test cases for this jira.\u003c\\/p\u003e\\n\\n\u003cp\u003eI took care of following feeback from you.\u003cbr\\/\u003e\\n1) I saw your comment about sharing code with CreateTriggerNode instead of duplicating it... Yes, please! \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eI will work on this after taking care of lang\\/predicatesIntoViews.sql problem.\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e2) The changes in BaseMonitor don\'t seem to be related to this issue. \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eThanks for catching it. I have removed that change from my codeline.\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e3) The new method sortRefs() looks unnecessarily complex. In particular: \u003cbr\\/\u003e\\n  a) The code that copies the Vector to an array, could be replaced with a one-liner that just called toArray(). \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eI tried using toArray() but got class cast exception. Didn\'t spend enough time on this yet but I have the code I tried commented out. Do you see something wrong with it?\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e  b) Using java.util.Collections.sort() sounds cleaner and less error-prone than reimplementing bubble sort. \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eThis code has been in CreateTriggerNode but sometime and I am not sure why it was implemented this way. I will try to take a look at this after tackling the items mentioned above.\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e4) I find the added code in getActionSPS() a bit hard to follow. It may help if some short comments were added explaining the purpose of the various if statements and for loops. (For example, the part of the JIRA comment from Nov 10 that says \\\"we need to regenerate the trigger action sql if 1) ... 2) ... 3) ...\\\" would be a helpful comment for the outer if statement.) \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eI have adding comments in my todo list to make the code more readable but I did copy the reasons for regeneration into the code.\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e5) In getActionSPS(), the code that sets all elements of triggerColsAndTriggerActionCols to -1 could be simplified by using \u003cbr\\/\u003e\\njava.util.Arrays.fill(). \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eThanks for this tip. I use now java.util.Arrays.fill() to do the array filling.\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e6) In getActionSPS(), (referencedColsInTriggerAction != null) is checked both in the outer and the inner if statement, so one of the checks is redundant and could be removed. \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eThanks for noticing this, I have taken care of this.\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e7) The new variables in getActionSPS() are only used if the trigger needs to be recompiled. It would be good to move the declarations inside the if statement so that we don\'t need to create a StringBuilder and check the version of the data dictionary in the common case. \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eI took care of this.\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e8) This code in getActionSPS() looks a bit suspicious: \u003cbr\\/\u003e\\n+ DataDictionary dd = getDataDictionary(); \u003cbr\\/\u003e\\n+ \u003cbr\\/\u003e\\n+ if (((org.apache.derby.impl.sql.catalog.DataDictionaryImpl) dd).readOnlyUpgrade) \u003cbr\\/\u003e\\n+ return actionSPS; \u003cbr\\/\u003e\\nEven if readOnlyUpgrade is false, it will still return actionSPS on the next line, so this code appears to have no purpose. \u003c\\/p\u003e\\n\u003cul\u003e\\n\\t\u003cli\u003e\\n\\t\u003cul\u003e\\n\\t\\t\u003cli\u003e\\n\\t\\t\u003cul\u003e\\n\\t\\t\\t\u003cli\u003eYou are right about this. I was experimenting updating SYSSTATEMENTS here but found that it is already being done as part of trigger invalidation. I have removed the code that you pointed out.\u003c\\/li\u003e\\n\\t\\t\u003c\\/ul\u003e\\n\\t\\t\u003c\\/li\u003e\\n\\t\u003c\\/ul\u003e\\n\\t\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12932345_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12932345_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/10 05:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-16T05:37:32+0000\'\u003e16\\/Nov\\/10 05:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Knut, thanks a bunch for taking the time to review the patch. In the attached patch, I have taken care of some of your comments. I am continuing to narrow down lang\\/predicatesIntoViews.sql to find out why wrong trigger action sql is getting regenerated as I mentioned in my comment on Nov 11th. The repro is pretty short compared to original lang\\/predicatesIntoViews.sql. I hope to narrow it down completely soon to be able to debug it.  \\n\\n The attached patch still has duplication of code. After I debug the lang\\/predicatesIntoViews.sql problem, I will next work on putting as much common code as possible in DataDictionary rather than having it in two places which is CreateTriggerNode and TriggerDescriptor. I will also add more comments to the code where applicable and add test cases for this jira. \\n\\n I took care of following feeback from you. \\n1) I saw your comment about sharing code with CreateTriggerNode instead of duplicating it... Yes, please!    \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t I will work on this after taking care of lang\\/predicatesIntoViews.sql problem. \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n 2) The changes in BaseMonitor don\'t seem to be related to this issue.  \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t Thanks for catching it. I have removed that change from my codeline. \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n 3) The new method sortRefs() looks unnecessarily complex. In particular:  \\n  a) The code that copies the Vector to an array, could be replaced with a one-liner that just called toArray().  \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t I tried using toArray() but got class cast exception. Didn\'t spend enough time on this yet but I have the code I tried commented out. Do you see something wrong with it? \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n   b) Using java.util.Collections.sort() sounds cleaner and less error-prone than reimplementing bubble sort.  \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t This code has been in CreateTriggerNode but sometime and I am not sure why it was implemented this way. I will try to take a look at this after tackling the items mentioned above. \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n 4) I find the added code in getActionSPS() a bit hard to follow. It may help if some short comments were added explaining the purpose of the various if statements and for loops. (For example, the part of the JIRA comment from Nov 10 that says \\\"we need to regenerate the trigger action sql if 1) ... 2) ... 3) ...\\\" would be a helpful comment for the outer if statement.)  \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t I have adding comments in my todo list to make the code more readable but I did copy the reasons for regeneration into the code. \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n 5) In getActionSPS(), the code that sets all elements of triggerColsAndTriggerActionCols to -1 could be simplified by using  \\njava.util.Arrays.fill().  \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t Thanks for this tip. I use now java.util.Arrays.fill() to do the array filling. \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n 6) In getActionSPS(), (referencedColsInTriggerAction != null) is checked both in the outer and the inner if statement, so one of the checks is redundant and could be removed.  \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t Thanks for noticing this, I have taken care of this. \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n 7) The new variables in getActionSPS() are only used if the trigger needs to be recompiled. It would be good to move the declarations inside the if statement so that we don\'t need to create a StringBuilder and check the version of the data dictionary in the common case.  \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t I took care of this. \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n\\n\\n 8) This code in getActionSPS() looks a bit suspicious:  \\n+ DataDictionary dd = getDataDictionary();  \\n+  \\n+ if (((org.apache.derby.impl.sql.catalog.DataDictionaryImpl) dd).readOnlyUpgrade)  \\n+ return actionSPS;  \\nEven if readOnlyUpgrade is false, it will still return actionSPS on the next line, so this code appears to have no purpose.  \\n \\n\\t \\n\\t \\n\\t\\t \\n\\t\\t \\n\\t\\t\\t You are right about this. I was experimenting updating SYSSTATEMENTS here but found that it is already being done as part of trigger invalidation. I have removed the code that you pointed out. \\n\\t\\t \\n\\t\\t \\n\\t \\n\\t \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12932464\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12932464&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12932464\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12932464_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12932464_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/10 14:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-16T14:01:59+0000\'\u003e16\\/Nov\\/10 14:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks for making the changes, Mamta.\u003c\\/p\u003e\\n\\n\u003cp\u003eAs to the ClassCastException, I think you need to invoke toArray() like this to make it return an array with the correct type:\u003c\\/p\u003e\\n\\n\u003cp\u003e    sorted = (QueryTreeNode[]) refs.toArray(new QueryTreeNode\u003cspan class=\\\"error\\\"\u003e&#91;refs.size()&#93;\u003c\\/span\u003e);\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12932464_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12932464_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'16\\/Nov\\/10 14:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-16T14:01:59+0000\'\u003e16\\/Nov\\/10 14:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks for making the changes, Mamta. \\n\\n As to the ClassCastException, I think you need to invoke toArray() like this to make it return an array with the correct type: \\n\\n     sorted = (QueryTreeNode[]) refs.toArray(new QueryTreeNode &#91;refs.size()&#93; );              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12933934\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12933934&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12933934\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12933934_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12933934_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/10 19:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-19T19:49:50+0000\'\u003e19\\/Nov\\/10 19:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks, Knut. I will gave that a try.\u003c\\/p\u003e\\n\\n\u003cp\u003eI was able to narrow done lang\\/predicatesIntoViews.sql problem to following sql\u003cbr\\/\u003e\\nconnect \'jdbc:derby:wombat;create=true\';\u003cbr\\/\u003e\\ncreate table xr.repositoryobjectversion (\u003cbr\\/\u003e\\n\\tid             varchar(48)\\t\\tnot null primary key,\u003cbr\\/\u003e\\n\\tresourceid\\t\\tvarchar(48)\\t\\tnot null,\u003cbr\\/\u003e\\n\\tname\\t\\t\\tvarchar(128)\\tnot null,\u003cbr\\/\u003e\\n\\tuname\\t\\t\\tvarchar(128),\u003cbr\\/\u003e\\n\\tversionName\\t\\tvarchar(128)\\tnot null\u003cbr\\/\u003e\\n\\t);\u003c\\/p\u003e\\n\\n\u003cp\u003ecreate trigger xr.rov_uname_i after insert on xr.repositoryobjectversion\u003cbr\\/\u003e\\nreferencing new as n\u003cbr\\/\u003e\\nfor each row\u003cbr\\/\u003e\\nupdate xr.repositoryobjectversion set uname = upper( n.name ) where name = n.name;\u003c\\/p\u003e\\n\\n\u003cp\u003ecreate trigger xr.rov_unane_u after update of name, uname on xr.repositoryobjectversion\u003cbr\\/\u003e\\nreferencing new as n\u003cbr\\/\u003e\\nfor each row\u003cbr\\/\u003e\\nupdate xr.repositoryobjectversion set uname = upper( n.name )\u003cbr\\/\u003e\\n  where name = n.name and uname &lt;&gt; upper( n.name );\u003c\\/p\u003e\\n\\n\u003cp\u003ecreate unique index xr.versionname on xr.repositoryobjectversion (resourceid, versionName);\u003c\\/p\u003e\\n\\n\u003cp\u003eThe last sql which is creating the index invalidates the trigger and when we regenerate the action plan, we are regenerating the sql with the actual column number in the table rather than the relative column number of that column in the resultset that will be generated for the trigger. As a next step, I will debug this to see why the regenerated sql does not have the correct column number. Once I am done with this, I will work on reworking the code to put the common code in DataDictionary rather than the current duplication in CreateTriggerNode and TriggerDescriptor as done in my patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12933934_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12933934_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'19\\/Nov\\/10 19:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-11-19T19:49:50+0000\'\u003e19\\/Nov\\/10 19:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks, Knut. I will gave that a try. \\n\\n I was able to narrow done lang\\/predicatesIntoViews.sql problem to following sql \\nconnect \'jdbc:derby:wombat;create=true\'; \\ncreate table xr.repositoryobjectversion ( \\n\\tid             varchar(48)\\t\\tnot null primary key, \\n\\tresourceid\\t\\tvarchar(48)\\t\\tnot null, \\n\\tname\\t\\t\\tvarchar(128)\\tnot null, \\n\\tuname\\t\\t\\tvarchar(128), \\n\\tversionName\\t\\tvarchar(128)\\tnot null \\n\\t); \\n\\n create trigger xr.rov_uname_i after insert on xr.repositoryobjectversion \\nreferencing new as n \\nfor each row \\nupdate xr.repositoryobjectversion set uname = upper( n.name ) where name = n.name; \\n\\n create trigger xr.rov_unane_u after update of name, uname on xr.repositoryobjectversion \\nreferencing new as n \\nfor each row \\nupdate xr.repositoryobjectversion set uname = upper( n.name ) \\n  where name = n.name and uname &lt;&gt; upper( n.name ); \\n\\n create unique index xr.versionname on xr.repositoryobjectversion (resourceid, versionName); \\n\\n The last sql which is creating the index invalidates the trigger and when we regenerate the action plan, we are regenerating the sql with the actual column number in the table rather than the relative column number of that column in the resultset that will be generated for the trigger. As a next step, I will debug this to see why the regenerated sql does not have the correct column number. Once I am done with this, I will work on reworking the code to put the common code in DataDictionary rather than the current duplication in CreateTriggerNode and TriggerDescriptor as done in my patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12968450\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12968450&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12968450\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12968450_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12968450_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/10 22:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-06T22:20:06+0000\'\u003e06\\/Dec\\/10 22:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am attaching a patch which now avoids the code duplication in CreateTriggerNode and TriggerDescriptor and has the two classes share majority of the code related to transformation of trigger action sql through DataDictionary class. It also resolves the problem where I was using the actual column position in the trigger table rather than the relative column position in the resultset for the trigger table which will be created at runtime. I would highly appreciate the feedback on the patch. It might be little hard to read because I have not put the comments in the code yet. I will work on that next and add a test case too but wanted to put the patch out if somebody had immediate comments. Thanks\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12968450_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12968450_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/10 22:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-06T22:20:06+0000\'\u003e06\\/Dec\\/10 22:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am attaching a patch which now avoids the code duplication in CreateTriggerNode and TriggerDescriptor and has the two classes share majority of the code related to transformation of trigger action sql through DataDictionary class. It also resolves the problem where I was using the actual column position in the trigger table rather than the relative column position in the resultset for the trigger table which will be created at runtime. I would highly appreciate the feedback on the patch. It might be little hard to read because I have not put the comments in the code yet. I will work on that next and add a test case too but wanted to put the patch out if somebody had immediate comments. Thanks              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12969883\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12969883&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12969883\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12969883_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12969883_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Dec\\/10 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-09T19:21:23+0000\'\u003e09\\/Dec\\/10 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have committed the changes into trunk(10.8.0.0) with revision 1044096. The changes has comments and test for the code changes. Please let me know if anyone has any comments on the changes.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe commit comments are as follows\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR\u003c\\/p\u003e\\n\\n\u003cp\u003eThe trigger action associated with a trigger gets converted as shown in the example below. This transformation happens if the trigger action has REFERENCEs clause.\u003cbr\\/\u003e\\n\\tupdate xr.repositoryobjectversion set uname = upper( n.name )\u003cbr\\/\u003e\\n\\t  where name = n.name and uname &lt;&gt; upper( n.name );\u003cbr\\/\u003e\\n\\tturns into\u003cbr\\/\u003e\\n\\tupdate xr.repositoryobjectversion set uname = \u003cbr\\/\u003e\\n\\t  upper( CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS VARCHAR(128)) ) \u003cbr\\/\u003e\\n\\t  where name = CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS VARCHAR(128))\u003cbr\\/\u003e\\nAs can be seen above, there is a CASTing involved which uses the length of the column in trigger table. \u003c\\/p\u003e\\n\\n\u003cp\u003eIf say that length is changed by ALTER TABLE after the trigger has been created, that change in the length does not get reflected in the sql associated with the trigger action in the form on SPSDescriptor. In order to fix this, I have made changes which willcause us to regenerate the sql from the trigger action for the SPSDescriptor if we are working with an invalidated row level trigger which uses the REFERENCEs clause.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12969883_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12969883_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'09\\/Dec\\/10 19:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-09T19:21:23+0000\'\u003e09\\/Dec\\/10 19:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have committed the changes into trunk(10.8.0.0) with revision 1044096. The changes has comments and test for the code changes. Please let me know if anyone has any comments on the changes. \\n\\n The commit comments are as follows \\n\\n   DERBY-4874   Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\n\\n The trigger action associated with a trigger gets converted as shown in the example below. This transformation happens if the trigger action has REFERENCEs clause. \\n\\tupdate xr.repositoryobjectversion set uname = upper( n.name ) \\n\\t  where name = n.name and uname &lt;&gt; upper( n.name ); \\n\\tturns into \\n\\tupdate xr.repositoryobjectversion set uname =  \\n\\t  upper( CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS VARCHAR(128)) )  \\n\\t  where name = CAST (org.apache.derby.iapi.db.Factory::getTriggerExecutionContext().getNewRow().getObject(3) AS VARCHAR(128)) \\nAs can be seen above, there is a CASTing involved which uses the length of the column in trigger table.  \\n\\n If say that length is changed by ALTER TABLE after the trigger has been created, that change in the length does not get reflected in the sql associated with the trigger action in the form on SPSDescriptor. In order to fix this, I have made changes which willcause us to regenerate the sql from the trigger action for the SPSDescriptor if we are working with an invalidated row level trigger which uses the REFERENCEs clause.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12970105\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12970105&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12970105\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12970105_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12970105_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Dec\\/10 08:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-10T08:39:31+0000\'\u003e10\\/Dec\\/10 08:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Mamta,\u003c\\/p\u003e\\n\\n\u003cp\u003eI noticed that you made the variable \'text\' non-final, but didn\'t make the setter\\/getter synchronized. Do you know that\'s safe?\u003cbr\\/\u003e\\nSPSDescriptor can be used by several threads, and there\'s a comment about synchronization in the class JavaDoc. I made some changes in this area not long ago, and I discovered that this class can be ticklish when it comes to concurrent invalidation and compilation...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kristwaa\\\" id=\\\"commentauthor_12970105_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kristwaa\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kristwaa\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kristian Waagan\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12970105_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Dec\\/10 08:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-10T08:39:31+0000\'\u003e10\\/Dec\\/10 08:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Mamta, \\n\\n I noticed that you made the variable \'text\' non-final, but didn\'t make the setter\\/getter synchronized. Do you know that\'s safe? \\nSPSDescriptor can be used by several threads, and there\'s a comment about synchronization in the class JavaDoc. I made some changes in this area not long ago, and I discovered that this class can be ticklish when it comes to concurrent invalidation and compilation...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12970178\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12970178&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12970178\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12970178_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12970178_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Dec\\/10 14:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-10T14:21:56+0000\'\u003e10\\/Dec\\/10 14:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Kristian, thanks for noticing that. I will go ahead and synchronize the getter and setter for the variable since it is not final anymore.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12970178_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12970178_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Dec\\/10 14:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-10T14:21:56+0000\'\u003e10\\/Dec\\/10 14:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Kristian, thanks for noticing that. I will go ahead and synchronize the getter and setter for the variable since it is not final anymore.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12971443\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12971443&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12971443\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12971443_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12971443_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/10 22:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-14T22:28:11+0000\'\u003e14\\/Dec\\/10 22:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a backport for 10.6 release. I had to hand do these changes in 10.6 codeline because the changes in trunk depended on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products. I will be on vacation so won\'t be committing the changes yet. I will commit the changes in early January.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e was added into 10.7 codeline so a backport to 10.7 of this jira was straight forward. I have alreay committed this jira changes into 10.7\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12971443_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12971443_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/10 22:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-14T22:28:11+0000\'\u003e14\\/Dec\\/10 22:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a backport for 10.6 release. I had to hand do these changes in 10.6 codeline because the changes in trunk depended on   DERBY-1482  .   DERBY-1482   can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products. I will be on vacation so won\'t be committing the changes yet. I will commit the changes in early January. \\n\\n   DERBY-1482   was added into 10.7 codeline so a backport to 10.7 of this jira was straight forward. I have alreay committed this jira changes into 10.7              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12971444\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12971444&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12971444\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12971444_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12971444_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/10 22:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-14T22:28:57+0000\'\u003e14\\/Dec\\/10 22:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 14\\/Dec\\/10 23:52\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTodo items for this jira\u003c\\/p\u003e\\n\\n\u003cp\u003e1)It will be good to create a release note for this jira stating that the existing triggers will need to be dropped and recreated if the trigger table has had ALTER TABLE against it to change the length of the columns. This jira will take care of future ALTER TABLE statements changing the length of the column and any trigger using such columns in trigger action plan. \u003cbr\\/\u003e\\nI will create the release note once I am back from vacation.\u003cbr\\/\u003e\\n2)Implement Krisitian\'s suggestion to synchronize the setter and getter for variable text in SPSDescriptor in trunk and 10.7. This will later also have to be done as part of backport to 10.6 and under.\u003cbr\\/\u003e\\n3)Backport to 10.6 and below\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12971444_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12971444_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Dec\\/10 22:28\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-14T22:28:57+0000\'\u003e14\\/Dec\\/10 22:28\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 14\\/Dec\\/10 23:52\\\"\u003eedited\u003c\\/span\u003e                   Todo items for this jira \\n\\n 1)It will be good to create a release note for this jira stating that the existing triggers will need to be dropped and recreated if the trigger table has had ALTER TABLE against it to change the length of the columns. This jira will take care of future ALTER TABLE statements changing the length of the column and any trigger using such columns in trigger action plan.  \\nI will create the release note once I am back from vacation. \\n2)Implement Krisitian\'s suggestion to synchronize the setter and getter for variable text in SPSDescriptor in trunk and 10.7. This will later also have to be done as part of backport to 10.6 and under. \\n3)Backport to 10.6 and below              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12975948\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12975948&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12975948\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12975948_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12975948_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/10 00:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-30T00:35:21+0000\'\u003e30\\/Dec\\/10 00:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI thought I might look at the sychronization issue while Mamta is out, but am a little confused about what activity needs to be synchronized and wonder if just synchronizing getText and setText is enough or helpful as that would not prevent concurrent callers to the new TriggerDescriptor.getActionSPS() or prevent the text being changed  during compilation, etc.  Any helpful pointers and usage cases we are trying to protect  are welcome.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"kmarsden\\\" id=\\\"commentauthor_12975948_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=kmarsden\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"kmarsden\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Kathey Marsden\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12975948_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Dec\\/10 00:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-12-30T00:35:21+0000\'\u003e30\\/Dec\\/10 00:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I thought I might look at the sychronization issue while Mamta is out, but am a little confused about what activity needs to be synchronized and wonder if just synchronizing getText and setText is enough or helpful as that would not prevent concurrent callers to the new TriggerDescriptor.getActionSPS() or prevent the text being changed  during compilation, etc.  Any helpful pointers and usage cases we are trying to protect  are welcome. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12977927\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12977927&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12977927\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12977927_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12977927_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/11 19:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-05T19:40:52+0000\'\u003e05\\/Jan\\/11 19:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBackported the changes to 10.6 codeline with following commit comments\u003c\\/p\u003e\\n\\n\u003cp\u003eBackporting the changes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e to 10.6 codeline.\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR\u003c\\/p\u003e\\n\\n\u003cp\u003eHad to hand do these changes rather than a simple migration from trunk because the changes in trunk depended on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12977927_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12977927_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Jan\\/11 19:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-05T19:40:52+0000\'\u003e05\\/Jan\\/11 19:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Backported the changes to 10.6 codeline with following commit comments \\n\\n Backporting the changes for   DERBY-4874   to 10.6 codeline. \\n  DERBY-4874   Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\n\\n Had to hand do these changes rather than a simple migration from trunk because the changes in trunk depended on   DERBY-1482  .   DERBY-1482   can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12978324\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12978324&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12978324\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978324_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978324_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jan\\/11 14:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-06T14:00:46+0000\'\u003e06\\/Jan\\/11 14:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBacported the changes to 10.3.3.1 codeline with following commit comments\u003c\\/p\u003e\\n\\n\u003cp\u003eBackporting the changes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e to 10.3 codeline. This backport to 10.3 has been the migration of changes committed to 10.6,\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR\u003c\\/p\u003e\\n\\n\u003cp\u003eThe backport of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e from trunk to 10.6 codeline was done by hand (rather than a simple migration from trunk) because the changes in trunk depended on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978324_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978324_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jan\\/11 14:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-06T14:00:46+0000\'\u003e06\\/Jan\\/11 14:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bacported the changes to 10.3.3.1 codeline with following commit comments \\n\\n Backporting the changes for   DERBY-4874   to 10.3 codeline. This backport to 10.3 has been the migration of changes committed to 10.6, \\n  DERBY-4874   Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\n\\n The backport of   DERBY-4874   from trunk to 10.6 codeline was done by hand (rather than a simple migration from trunk) because the changes in trunk depended on   DERBY-1482  .   DERBY-1482   can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12978331\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12978331&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12978331\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978331_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978331_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jan\\/11 14:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-06T14:18:43+0000\'\u003e06\\/Jan\\/11 14:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKristian, I was wondering if you or anyone else had any feedback on Kathey\'s comment about synchronization (her comment copied below)\u003c\\/p\u003e\\n\\n\\n\u003cp\u003eI thought I might look at the sychronization issue while Mamta is out, but am a little confused about what activity needs to be synchronized and wonder if just synchronizing getText and setText is enough or helpful as that would not prevent concurrent callers to the new TriggerDescriptor.getActionSPS() or prevent the text being changed during compilation, etc. Any helpful pointers and usage cases we are trying to protect are welcome. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978331_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978331_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Jan\\/11 14:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-06T14:18:43+0000\'\u003e06\\/Jan\\/11 14:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Kristian, I was wondering if you or anyone else had any feedback on Kathey\'s comment about synchronization (her comment copied below) \\n\\n\\n I thought I might look at the sychronization issue while Mamta is out, but am a little confused about what activity needs to be synchronized and wonder if just synchronizing getText and setText is enough or helpful as that would not prevent concurrent callers to the new TriggerDescriptor.getActionSPS() or prevent the text being changed during compilation, etc. Any helpful pointers and usage cases we are trying to protect are welcome.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12978619\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12978619&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12978619\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978619_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978619_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 02:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T02:39:07+0000\'\u003e07\\/Jan\\/11 02:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBacported the changes to 10.4.2.1 codeline with following commit comments \u003c\\/p\u003e\\n\\n\u003cp\u003eBackporting the changes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e to 10.4 codeline. This backport to 10.4 has been the migration of changes committed to 10.6, \u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \u003c\\/p\u003e\\n\\n\u003cp\u003eThe backport of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e from trunk to 10.6 codeline was done by hand (rather than a simple migration from trunk) because the changes in trunk depended on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978619_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978619_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 02:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T02:39:07+0000\'\u003e07\\/Jan\\/11 02:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bacported the changes to 10.4.2.1 codeline with following commit comments  \\n\\n Backporting the changes for   DERBY-4874   to 10.4 codeline. This backport to 10.4 has been the migration of changes committed to 10.6,  \\n  DERBY-4874   Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR  \\n\\n The backport of   DERBY-4874   from trunk to 10.6 codeline was done by hand (rather than a simple migration from trunk) because the changes in trunk depended on   DERBY-1482  .   DERBY-1482   can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12978669\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12978669&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12978669\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12978669_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978669_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 08:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T08:02:46+0000\'\u003e07\\/Jan\\/11 08:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTriggerTest failed in the Tinderbox tests for 10.4 and 10.3 after the backport. Could it be related?\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1056174-org.apache.derbyTesting.functionTests.suites.All_diff.txt\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1056174-org.apache.derbyTesting.functionTests.suites.All_diff.txt\u003c\\/a\u003e\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.3_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1055890-org.apache.derbyTesting.functionTests.suites.All_diff.txt\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.3_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1055890-org.apache.derbyTesting.functionTests.suites.All_diff.txt\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12978669_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978669_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 08:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T08:02:46+0000\'\u003e07\\/Jan\\/11 08:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    TriggerTest failed in the Tinderbox tests for 10.4 and 10.3 after the backport. Could it be related? \\n http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1056174-org.apache.derbyTesting.functionTests.suites.All_diff.txt  \\n http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.3_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1055890-org.apache.derbyTesting.functionTests.suites.All_diff.txt               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12978794\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12978794&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12978794\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978794_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978794_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 14:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T14:30:06+0000\'\u003e07\\/Jan\\/11 14:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI will take a look at those failures.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978794_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978794_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 14:30\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T14:30:06+0000\'\u003e07\\/Jan\\/11 14:30\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I will take a look at those failures.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12978847\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12978847&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12978847\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978847_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978847_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 16:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T16:31:36+0000\'\u003e07\\/Jan\\/11 16:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 07\\/Jan\\/11 17:39\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI didn\'t see these failures when I ran the junit suite on my laptop for both 10.4 and 10.3 before doing the checkin. I had used IBM\'s JVM1.6 rather than Sun\'s JVM1.6 which is what Tinderbox is using. The Tinderbox shows the errors in the basicSetup() method, part of which looks as follows. The method first drops the objects and then recreates them. If during the drop there is an exception, we just ignore it. The error encountered on Tinderbox is on the attempt to recreate table table1. This means that there may have been a failure during the drop but since we don\'t record the exception, I am not sure what the error may have been for the drop table1. The exception probably is logged into the derby,log. Can someone please tell me how to look at derby.log for a failed test on Tinderbox? Also, another thing to note in that the TriggerTest is run twice in junit suite. The first run of the test is fine, it is the second run of the test that runs into failure on Tinderbox.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\tpublic void basicSetup() throws SQLException{\u003cbr\\/\u003e\\n        \\t\\tStatement s = createStatement();\u003cbr\\/\u003e\\n\\t\\ttry \u003c\\/p\u003e\\n{\\n\\t\\t\\ts.execute(\\\"drop table table1\\\");\\n\\t\\t}\\n\u003cp\u003e catch (SQLException sqle) {}\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\ttry \u003c\\/p\u003e\\n{\\n\\t\\t\\ts.execute(\\\"drop table table2\\\");\\n\\t\\t}\\n\u003cp\u003e catch (SQLException sqle) {}\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\ttry \u003c\\/p\u003e\\n{\\n\\t\\t\\ts.execute(\\\"drop table table3\\\");\\n\\t\\t}\\n\u003cp\u003e catch (SQLException sqle) {}\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\ttry \u003c\\/p\u003e\\n{\\n\\t\\t\\ts.execute(\\\"drop trigger trigger1\\\");\\n\\t\\t}\\n\u003cp\u003e catch (SQLException sqle) {}\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\ttry \u003c\\/p\u003e\\n{\\n\\t\\t\\ts.execute(\\\"drop trigger trigger2\\\");\\n\\t\\t}\\n\u003cp\u003e catch (SQLException sqle) {}\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\t\\/\\/table1 is the main table on which all the testing is done and it \u003cbr\\/\u003e\\n\\t\\t\\/\\/uses table2 at times to do DMLs as part of it\'s trigger action.\u003cbr\\/\u003e\\n\\t\\ts.execute(\\\"create table table1 (id int, status smallint, bl blob(2G))\\\");\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978847_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978847_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 16:31\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T16:31:36+0000\'\u003e07\\/Jan\\/11 16:31\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 07\\/Jan\\/11 17:39\\\"\u003eedited\u003c\\/span\u003e                   I didn\'t see these failures when I ran the junit suite on my laptop for both 10.4 and 10.3 before doing the checkin. I had used IBM\'s JVM1.6 rather than Sun\'s JVM1.6 which is what Tinderbox is using. The Tinderbox shows the errors in the basicSetup() method, part of which looks as follows. The method first drops the objects and then recreates them. If during the drop there is an exception, we just ignore it. The error encountered on Tinderbox is on the attempt to recreate table table1. This means that there may have been a failure during the drop but since we don\'t record the exception, I am not sure what the error may have been for the drop table1. The exception probably is logged into the derby,log. Can someone please tell me how to look at derby.log for a failed test on Tinderbox? Also, another thing to note in that the TriggerTest is run twice in junit suite. The first run of the test is fine, it is the second run of the test that runs into failure on Tinderbox. \\n\\n \\tpublic void basicSetup() throws SQLException{ \\n        \\t\\tStatement s = createStatement(); \\n\\t\\ttry  \\n{\\n\\t\\t\\ts.execute(\\\"drop table table1\\\");\\n\\t\\t}\\n  catch (SQLException sqle) {} \\n\\n \\t\\ttry  \\n{\\n\\t\\t\\ts.execute(\\\"drop table table2\\\");\\n\\t\\t}\\n  catch (SQLException sqle) {} \\n\\n \\t\\ttry  \\n{\\n\\t\\t\\ts.execute(\\\"drop table table3\\\");\\n\\t\\t}\\n  catch (SQLException sqle) {} \\n\\n \\t\\ttry  \\n{\\n\\t\\t\\ts.execute(\\\"drop trigger trigger1\\\");\\n\\t\\t}\\n  catch (SQLException sqle) {} \\n\\n \\t\\ttry  \\n{\\n\\t\\t\\ts.execute(\\\"drop trigger trigger2\\\");\\n\\t\\t}\\n  catch (SQLException sqle) {} \\n\\n \\t\\t\\/\\/table1 is the main table on which all the testing is done and it  \\n\\t\\t\\/\\/uses table2 at times to do DMLs as part of it\'s trigger action. \\n\\t\\ts.execute(\\\"create table table1 (id int, status smallint, bl blob(2G))\\\");              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12978885\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12978885&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12978885\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978885_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978885_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 17:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T17:51:54+0000\'\u003e07\\/Jan\\/11 17:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBackporting the changes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e to 10.5 codeline. This backport to 10.5 has been the migration of changes committed to 10.6,\u003cbr\\/\u003e\\n\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR\u003c\\/p\u003e\\n\\n\u003cp\u003eThe backport of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e from trunk to 10.6 codeline was done by hand (rather than a simple migration from trunk) because the changes in trunk depended on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-1482\\\" title=\\\"Update triggers on tables with blob columns stream blobs into memory even when the blobs are not referenced\\/accessed.\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-1482\\\"\u003e\u003cdel\u003eDERBY-1482\u003c\\/del\u003e\u003c\\/a\u003e can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12978885_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12978885_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Jan\\/11 17:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-07T17:51:54+0000\'\u003e07\\/Jan\\/11 17:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Backporting the changes for   DERBY-4874   to 10.5 codeline. This backport to 10.5 has been the migration of changes committed to 10.6, \\n  DERBY-4874   Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\n\\n The backport of   DERBY-4874   from trunk to 10.6 codeline was done by hand (rather than a simple migration from trunk) because the changes in trunk depended on   DERBY-1482  .   DERBY-1482   can\'t be backported to 10.6 and earlier because it had required system level changes which can\'t be backported to pre-released Derby products.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12979560\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12979560&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12979560\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12979560_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12979560_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/11 12:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-10T12:07:52+0000\'\u003e10\\/Jan\\/11 12:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching derby.log from the fail directory in the failed tinderbox run on 10.4. Unfortunately, there are no exceptions that look related to the failure.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12979560_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12979560_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/11 12:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-10T12:07:52+0000\'\u003e10\\/Jan\\/11 12:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching derby.log from the fail directory in the failed tinderbox run on 10.4. Unfortunately, there are no exceptions that look related to the failure.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12979678\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12979678&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12979678\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12979678_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12979678_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/11 18:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-10T18:47:05+0000\'\u003e10\\/Jan\\/11 18:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKnut, thanks for posting derby.log. I don\'t see anything in there which might indicate that earlier drop of the table1 failed which happens before an attempt is made to recreate table1. \u003c\\/p\u003e\\n\\n\u003cp\u003eI did a dummy checkin to 10.3 on Friday to cause the tinerbox to run the tests again and the test did not fail on tinderbox again. I have to admit I am not sure at this point, why the test failed both on 10.3 and 10.4 \u003c\\/p\u003e\\n\\n\u003cp\u003eBTW, the backporting of this jira to 10.5 didn\'t show any test failure. \u003c\\/p\u003e\\n\\n\u003cp\u003eThe test runs on IBM\'s internal machines which can be found at \u003ca href=\\\"http:\\/\\/people.apache.org\\/~myrnavl\\/derby_test_results\\/\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/people.apache.org\\/~myrnavl\\/derby_test_results\\/\u003c\\/a\u003e also didn\'t show any failures for 10.3, 10.4, 10.5 and 10.6 codelines.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am running the junit suite on my laptop with Sun\'s jdk 1.6 to see if I can see the failure.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12979678_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12979678_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/11 18:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-10T18:47:05+0000\'\u003e10\\/Jan\\/11 18:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Knut, thanks for posting derby.log. I don\'t see anything in there which might indicate that earlier drop of the table1 failed which happens before an attempt is made to recreate table1.  \\n\\n I did a dummy checkin to 10.3 on Friday to cause the tinerbox to run the tests again and the test did not fail on tinderbox again. I have to admit I am not sure at this point, why the test failed both on 10.3 and 10.4  \\n\\n BTW, the backporting of this jira to 10.5 didn\'t show any test failure.  \\n\\n The test runs on IBM\'s internal machines which can be found at  http:\\/\\/people.apache.org\\/~myrnavl\\/derby_test_results\\/  also didn\'t show any failures for 10.3, 10.4, 10.5 and 10.6 codelines. \\n\\n I am running the junit suite on my laptop with Sun\'s jdk 1.6 to see if I can see the failure.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12979724\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12979724&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12979724\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12979724_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12979724_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/11 20:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-10T20:03:01+0000\'\u003e10\\/Jan\\/11 20:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI am doing a dummy checkin to 10.4 codeline to see if tinderbox run will show the test failure again for the 10.4 codeline. A similar dummy checkin for 10.3 on Friday didn\'t show the test failure on 10.3 codeline on tinderbox.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12979724_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12979724_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/11 20:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-10T20:03:01+0000\'\u003e10\\/Jan\\/11 20:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I am doing a dummy checkin to 10.4 codeline to see if tinderbox run will show the test failure again for the 10.4 codeline. A similar dummy checkin for 10.3 on Friday didn\'t show the test failure on 10.3 codeline on tinderbox.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12979746\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12979746&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12979746\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12979746_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12979746_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/11 20:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-10T20:44:57+0000\'\u003e10\\/Jan\\/11 20:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI ran junit on my laptop on the 10.3 codeline with Sun\'s jdk 1.6 and that did not show the test failure either\u003cbr\\/\u003e\\n$ java -version\u003cbr\\/\u003e\\njava version \\\"1.6.0_21\\\"\u003cbr\\/\u003e\\nJava(TM) SE Runtime Environment (build 1.6.0_21-b07)\u003cbr\\/\u003e\\nJava HotSpot(TM) Client VM (build 17.0-b17, mixed mode)\u003c\\/p\u003e\\n\\n\u003cp\u003eIf someone comes across this failure, please let me know. For now, I will assume maybe this was an intermittent test failure not related to my checkin\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12979746_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12979746_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'10\\/Jan\\/11 20:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-10T20:44:57+0000\'\u003e10\\/Jan\\/11 20:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I ran junit on my laptop on the 10.3 codeline with Sun\'s jdk 1.6 and that did not show the test failure either \\n$ java -version \\njava version \\\"1.6.0_21\\\" \\nJava(TM) SE Runtime Environment (build 1.6.0_21-b07) \\nJava HotSpot(TM) Client VM (build 17.0-b17, mixed mode) \\n\\n If someone comes across this failure, please let me know. For now, I will assume maybe this was an intermittent test failure not related to my checkin              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12980020\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12980020&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12980020\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12980020_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980020_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jan\\/11 09:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-11T09:49:16+0000\'\u003e11\\/Jan\\/11 09:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching a patch (droptable.diff) that makes basicSetup() use a helper method in BaseJDBCTestCase to drop the tables. The helper method reports the exception if the table cannot be dropped for some other reason than that the table doesn\'t exist.\u003c\\/p\u003e\\n\\n\u003cp\u003eCommitted to trunk with revision 1057542.\u003cbr\\/\u003e\\nMerged to 10.4 and committed revision 1057548.\u003c\\/p\u003e\\n\\n\u003cp\u003eLet\'s see if we get more info now.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12980020_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980020_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Jan\\/11 09:49\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-11T09:49:16+0000\'\u003e11\\/Jan\\/11 09:49\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching a patch (droptable.diff) that makes basicSetup() use a helper method in BaseJDBCTestCase to drop the tables. The helper method reports the exception if the table cannot be dropped for some other reason than that the table doesn\'t exist. \\n\\n Committed to trunk with revision 1057542. \\nMerged to 10.4 and committed revision 1057548. \\n\\n Let\'s see if we get more info now.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12980823\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12980823&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12980823\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12980823_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980823_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 17:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T17:39:54+0000\'\u003e12\\/Jan\\/11 17:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003ca href=\\\"http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1058108-org.apache.derbyTesting.functionTests.suites.All_diff.txt\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1058108-org.apache.derbyTesting.functionTests.suites.All_diff.txt\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eLooks like the table cannot be dropped because of a lock timeout.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12980823_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980823_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 17:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T17:39:54+0000\'\u003e12\\/Jan\\/11 17:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1058108-org.apache.derbyTesting.functionTests.suites.All_diff.txt  \\n\\n Looks like the table cannot be dropped because of a lock timeout.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12980900\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12980900&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12980900\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12980900_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980900_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 20:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T20:12:35+0000\'\u003e12\\/Jan\\/11 20:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI looked at the failing test fixtures(memory\\/triggerTests get run twice in junit, the first round has never shown the intermittent failure. It is the 2nd time around, when different test fixtures from memory\\/triggerTests run into intermittent failure. The test that I added for this jira(in lang\\/TriggerTest.java), testAlerColumnLength, gets run in the middle of the 2 runs of memory\\/triggerTests.) The test fixtures in memory\\/triggerTests are committing before they exit so I am not certain what kind of locks might be still held.\u003c\\/p\u003e\\n\\n\u003cp\u003eI am looking to see if my code changes for this jira would kick in for failing tests to possibly cause any locking issues. I do update SYSSTATEMENTS table and am not sure how that plays into effect.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12980900_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980900_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 20:12\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T20:12:35+0000\'\u003e12\\/Jan\\/11 20:12\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I looked at the failing test fixtures(memory\\/triggerTests get run twice in junit, the first round has never shown the intermittent failure. It is the 2nd time around, when different test fixtures from memory\\/triggerTests run into intermittent failure. The test that I added for this jira(in lang\\/TriggerTest.java), testAlerColumnLength, gets run in the middle of the 2 runs of memory\\/triggerTests.) The test fixtures in memory\\/triggerTests are committing before they exit so I am not certain what kind of locks might be still held. \\n\\n I am looking to see if my code changes for this jira would kick in for failing tests to possibly cause any locking issues. I do update SYSSTATEMENTS table and am not sure how that plays into effect.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12980950\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12980950&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12980950\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12980950_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980950_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 21:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T21:42:08+0000\'\u003e12\\/Jan\\/11 21:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eSpent some time looking at how my changes might impact the test and I couldn\'t find anything right away. The only time regeneration of sql for sps for trigger action plan will happen is if following is satisfied.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\tif((!actionSPS.isValid() ||\u003cbr\\/\u003e\\n\\t\\t\\t\\t (actionSPS.getPreparedStatement() == null)) &amp;&amp; \u003cbr\\/\u003e\\n\\t\\t\\t\\t isRow &amp;&amp;\u003cbr\\/\u003e\\n\\t\\t\\t\\t (oldReferencingName != null || newReferencingName != null)) \u003c\\/p\u003e\\n\\n\u003cp\u003eWe check if trigger is invalid or has no prepared stmt associated with it, is a row trigger and it has either REFERECING CLAUSE referring to old or new. So this won\'t apply to the tests that are failing intermittently: Other than this, another related change in my checkin was in DataDictionaryImpl.updateSPS to include SYSSTATEMENTS_TEXT during sps update as shown below. But that shouldn\'t be a problem either because it will happen only during recompile to make sure that we copy the regenerated sql for trigger action plan in SYSSTATEMENTS.\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\tif (recompile)\u003cbr\\/\u003e\\n\\t\\t{\u003cbr\\/\u003e\\n\\t\\t\\tif(firstCompilation)\u003cbr\\/\u003e\\n\\t\\t\\t{\u003cbr\\/\u003e\\n\\t\\t\\t\\tupdCols = new int[] \u003c\\/p\u003e\\n{SYSSTATEMENTSRowFactory.SYSSTATEMENTS_VALID,\\n\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_TEXT,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_LASTCOMPILED,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_USINGTEXT,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_CONSTANTSTATE,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_INITIALLY_COMPILABLE}\\n\u003cp\u003e;\u003cbr\\/\u003e\\n\\t\\t\\t}else\u003cbr\\/\u003e\\n\\t\\t\\t{\u003c\\/p\u003e\\n\\n\u003cp\u003e\\t\\t\\t\\tupdCols = new int[] \u003c\\/p\u003e\\n{SYSSTATEMENTSRowFactory.SYSSTATEMENTS_VALID,\\n\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_TEXT,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_LASTCOMPILED,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_USINGTEXT,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_CONSTANTSTATE }\\n\u003cp\u003e;\u003cbr\\/\u003e\\n\\t\\t\\t}\u003cbr\\/\u003e\\n\\t\\t}\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12980950_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980950_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 21:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T21:42:08+0000\'\u003e12\\/Jan\\/11 21:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Spent some time looking at how my changes might impact the test and I couldn\'t find anything right away. The only time regeneration of sql for sps for trigger action plan will happen is if following is satisfied. \\n\\n \\t\\tif((!actionSPS.isValid() || \\n\\t\\t\\t\\t (actionSPS.getPreparedStatement() == null)) &amp;&amp;  \\n\\t\\t\\t\\t isRow &amp;&amp; \\n\\t\\t\\t\\t (oldReferencingName != null || newReferencingName != null))  \\n\\n We check if trigger is invalid or has no prepared stmt associated with it, is a row trigger and it has either REFERECING CLAUSE referring to old or new. So this won\'t apply to the tests that are failing intermittently: Other than this, another related change in my checkin was in DataDictionaryImpl.updateSPS to include SYSSTATEMENTS_TEXT during sps update as shown below. But that shouldn\'t be a problem either because it will happen only during recompile to make sure that we copy the regenerated sql for trigger action plan in SYSSTATEMENTS. \\n\\n \\t\\tif (recompile) \\n\\t\\t{ \\n\\t\\t\\tif(firstCompilation) \\n\\t\\t\\t{ \\n\\t\\t\\t\\tupdCols = new int[]  \\n{SYSSTATEMENTSRowFactory.SYSSTATEMENTS_VALID,\\n\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_TEXT,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_LASTCOMPILED,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_USINGTEXT,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_CONSTANTSTATE,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_INITIALLY_COMPILABLE}\\n ; \\n\\t\\t\\t}else \\n\\t\\t\\t{ \\n\\n \\t\\t\\t\\tupdCols = new int[]  \\n{SYSSTATEMENTSRowFactory.SYSSTATEMENTS_VALID,\\n\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_TEXT,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_LASTCOMPILED,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_USINGTEXT,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t SYSSTATEMENTSRowFactory.SYSSTATEMENTS_CONSTANTSTATE }\\n ; \\n\\t\\t\\t} \\n\\t\\t}              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12980954\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12980954&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12980954\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12980954_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980954_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 21:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T21:44:59+0000\'\u003e12\\/Jan\\/11 21:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI looked at the test and the ouput.  It has the feel of a test\\/timing issue independant of mamta\'s change to me, but can\'t be sure until we can reproduce it.  My first guess is that there is some interaction going on with the background clean up thread and the test thread leading to the timeout.  The set of fixtures right before this error have some large blobs and multiple rows.  The delete tests then delete the rows and this is going to generate a lot of background cleanup work.  Then the first thing the next test does is drop the table with all that work, but each unit of work is going to run and then fail once the drop succeeds.  \u003c\\/p\u003e\\n\\n\u003cp\u003eIt definitely seems like a timing thing as in the following tinderbox failure, one fixture fails, but the next one which \u003cbr\\/\u003e\\ndoes pretty much the same thing succeeds.:\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1057487-org.apache.derbyTesting.functionTests.suites.All_diff.txt\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1057487-org.apache.derbyTesting.functionTests.suites.All_diff.txt\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThe most recent failure the last 2 fixures fail, and then no other fixtures are set to run.  \u003c\\/p\u003e\\n\\n\u003cp\u003eSome info that might support this theory:\u003cbr\\/\u003e\\no  what kind of machine are the 10.4 and 10.3 tinderbox runs running on?  Are they single cpu - maybe slower than where the other tests are running.\u003cbr\\/\u003e\\no This test does not seem to set lock timeout, but is there a chance it is running with a less than default lock timeout.\u003cbr\\/\u003e\\n    Thinking about it, it might be a simple project to add the current locktimeout setting to the error message - might help\u003cbr\\/\u003e\\n    support with lock timeout issues.\u003cbr\\/\u003e\\no It might help to add the full lock table dump on the lock timeout for this test.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikem\\\" id=\\\"commentauthor_12980954_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikem\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikem\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mike Matrigali\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980954_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 21:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T21:44:59+0000\'\u003e12\\/Jan\\/11 21:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I looked at the test and the ouput.  It has the feel of a test\\/timing issue independant of mamta\'s change to me, but can\'t be sure until we can reproduce it.  My first guess is that there is some interaction going on with the background clean up thread and the test thread leading to the timeout.  The set of fixtures right before this error have some large blobs and multiple rows.  The delete tests then delete the rows and this is going to generate a lot of background cleanup work.  Then the first thing the next test does is drop the table with all that work, but each unit of work is going to run and then fail once the drop succeeds.   \\n\\n It definitely seems like a timing thing as in the following tinderbox failure, one fixture fails, but the next one which  \\ndoes pretty much the same thing succeeds.: \\n http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1057487-org.apache.derbyTesting.functionTests.suites.All_diff.txt  \\n\\n The most recent failure the last 2 fixures fail, and then no other fixtures are set to run.   \\n\\n Some info that might support this theory: \\no  what kind of machine are the 10.4 and 10.3 tinderbox runs running on?  Are they single cpu - maybe slower than where the other tests are running. \\no This test does not seem to set lock timeout, but is there a chance it is running with a less than default lock timeout. \\n    Thinking about it, it might be a simple project to add the current locktimeout setting to the error message - might help \\n    support with lock timeout issues. \\no It might help to add the full lock table dump on the lock timeout for this test.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12980968\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12980968&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12980968\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12980968_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980968_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 22:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T22:22:15+0000\'\u003e12\\/Jan\\/11 22:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e&gt;Some info that might support this theory:\u003cbr\\/\u003e\\n&gt;o what kind of machine are the 10.4 and 10.3 tinderbox runs running on? Are they single cpu - maybe slower than where the other tests are running. \u003c\\/p\u003e\\n\\n\u003cp\u003eAll tinderbox runs except trunk use this machine. It\'s a fairly old dual-cpu AMD Opteron. It\'s a lot slower than the machine that tests trunk (an 8-core machine), but it\'s the same as the 10.5 and 10.6 branches, which don\'t fail.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; o This test does not seem to set lock timeout, but is there a chance it is running with a less than default lock timeout.\u003cbr\\/\u003e\\n&gt;     Thinking about it, it might be a simple project to add the current locktimeout setting to the error message - might help\u003cbr\\/\u003e\\n&gt;     support with lock timeout issues.\u003c\\/p\u003e\\n\\n\u003cp\u003eFrom the log:\u003c\\/p\u003e\\n\\n\u003cp\u003etest5UpdateAfterTriggerNoReferencingClause used 3103 ms F.\u003cbr\\/\u003e\\ntest5UpdateBeforeTriggerNoReferencingClause used 3009 ms F.\u003c\\/p\u003e\\n\\n\u003cp\u003e3 seconds shouldn\'t be enough to cause a lock timeout unless the timeout has been altered.\u003c\\/p\u003e\\n\\n\u003cp\u003e&gt; o It might help to add the full lock table dump on the lock timeout for this test.\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'ve checked in a change to make it run with derby.locks.deadlockTrace=true (revision 1058340 on 10.4 branch).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12980968_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12980968_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'12\\/Jan\\/11 22:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-12T22:22:15+0000\'\u003e12\\/Jan\\/11 22:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    &gt;Some info that might support this theory: \\n&gt;o what kind of machine are the 10.4 and 10.3 tinderbox runs running on? Are they single cpu - maybe slower than where the other tests are running.  \\n\\n All tinderbox runs except trunk use this machine. It\'s a fairly old dual-cpu AMD Opteron. It\'s a lot slower than the machine that tests trunk (an 8-core machine), but it\'s the same as the 10.5 and 10.6 branches, which don\'t fail. \\n\\n &gt; o This test does not seem to set lock timeout, but is there a chance it is running with a less than default lock timeout. \\n&gt;     Thinking about it, it might be a simple project to add the current locktimeout setting to the error message - might help \\n&gt;     support with lock timeout issues. \\n\\n From the log: \\n\\n test5UpdateAfterTriggerNoReferencingClause used 3103 ms F. \\ntest5UpdateBeforeTriggerNoReferencingClause used 3009 ms F. \\n\\n 3 seconds shouldn\'t be enough to cause a lock timeout unless the timeout has been altered. \\n\\n &gt; o It might help to add the full lock table dump on the lock timeout for this test. \\n\\n I\'ve checked in a change to make it run with derby.locks.deadlockTrace=true (revision 1058340 on 10.4 branch).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12981174\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12981174&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12981174\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12981174_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12981174_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/11 08:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-13T08:27:30+0000\'\u003e13\\/Jan\\/11 08:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eStack traces with lock table dumps can be found here: \u003ca href=\\\"http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1058341-org.apache.derbyTesting.functionTests.suites.All_diff.txt\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1058341-org.apache.derbyTesting.functionTests.suites.All_diff.txt\u003c\\/a\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12981174_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12981174_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'13\\/Jan\\/11 08:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-13T08:27:30+0000\'\u003e13\\/Jan\\/11 08:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Stack traces with lock table dumps can be found here:  http:\\/\\/dbtg.foundry.sun.com\\/derby\\/test\\/tinderbox_10.4_16\\/jvm1.6\\/testing\\/testlog\\/SunOS-5.10_i86pc-i386\\/1058341-org.apache.derbyTesting.functionTests.suites.All_diff.txt               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12981902\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12981902&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12981902\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12981902_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12981902_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/11 19:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-14T19:52:37+0000\'\u003e14\\/Jan\\/11 19:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 14\\/Jan\\/11 19:55\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI need to point out a difference between the synchronization code between 10.3 through 10.6 codelines and 10,7 through main codelines. In 10.7 and trunk, I didn\'t synchronize the getter and setter for field \\\"text\\\" in SPSDescriptor. While hand migrating these changes to 10.6 codeline, I experiemented with synchronization in SPSDescriptor and checked in the changes into 10.6 through 10.3 with synchronization in it. I will go ahead and make the same changes to trunk and 10.7 codelines so all the codelines are at the same level for this jira. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12981902_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12981902_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'14\\/Jan\\/11 19:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-14T19:52:37+0000\'\u003e14\\/Jan\\/11 19:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Mamta A. Satoor - 14\\/Jan\\/11 19:55\\\"\u003eedited\u003c\\/span\u003e                   I need to point out a difference between the synchronization code between 10.3 through 10.6 codelines and 10,7 through main codelines. In 10.7 and trunk, I didn\'t synchronize the getter and setter for field \\\"text\\\" in SPSDescriptor. While hand migrating these changes to 10.6 codeline, I experiemented with synchronization in SPSDescriptor and checked in the changes into 10.6 through 10.3 with synchronization in it. I will go ahead and make the same changes to trunk and 10.7 codelines so all the codelines are at the same level for this jira.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12982700\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12982700&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12982700\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12982700_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12982700_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/11 16:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-17T16:44:29+0000\'\u003e17\\/Jan\\/11 16:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttaching the release note\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12982700_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12982700_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jan\\/11 16:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-17T16:44:29+0000\'\u003e17\\/Jan\\/11 16:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attaching the release note              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12983272\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12983272&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12983272\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12983272_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12983272_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/11 17:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-18T17:20:14+0000\'\u003e18\\/Jan\\/11 17:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePut in the synchronization code in trunk (revision 1060480) with following commit comment\u003c\\/p\u003e\\n\\n\u003cp\u003ePutting the synchronization code in SPSDescriptor for getter and setter methods for the field \\\"text\\\" (this code is already in 10.6, 10.5, 10.4 and 10.3). Will put this code in 10.7 codeline next. This way, all the codelines from 10.3 through trunk will have the same synchronization code\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12983272_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12983272_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'18\\/Jan\\/11 17:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-01-18T17:20:14+0000\'\u003e18\\/Jan\\/11 17:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Put in the synchronization code in trunk (revision 1060480) with following commit comment \\n\\n Putting the synchronization code in SPSDescriptor for getter and setter methods for the field \\\"text\\\" (this code is already in 10.6, 10.5, 10.4 and 10.3). Will put this code in 10.7 codeline next. This way, all the codelines from 10.3 through trunk will have the same synchronization code              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12990144\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12990144&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12990144\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12990144_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12990144_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Feb\\/11 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-03T15:57:36+0000\'\u003e03\\/Feb\\/11 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHas anyone looked more into the failures on 10.3 and 10.4 after the back-porting of this issue? Is the current hypothesis that the lock timeouts happen because the post-commit work in the background thread takes a long time while holding locks on the table that is about to be dropped?\u003c\\/p\u003e\\n\\n\u003cp\u003eThe three second lock timeout in this test may come from ResultSetMiscTest and SetTransactionIsolationTest, which reduce the lock timeout to three seconds. Before \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4273\\\" title=\\\"A lock could not be obtained within the time requested error in testBTreeForwardScan_fetchRows_resumeAfterWait_nonUnique_split\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4273\\\"\u003e\u003cdel\u003eDERBY-4273\u003c\\/del\u003e\u003c\\/a\u003e they didn\'t restore the original lock timeout on completion, but now they do. \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4273\\\" title=\\\"A lock could not be obtained within the time requested error in testBTreeForwardScan_fetchRows_resumeAfterWait_nonUnique_split\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4273\\\"\u003e\u003cdel\u003eDERBY-4273\u003c\\/del\u003e\u003c\\/a\u003e is fixed on the 10.5 branch, which may explain why we only see this issue on 10.4 and 10.3. It doesn\'t explain why we haven\'t seen this issue before, though.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12990144_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12990144_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Feb\\/11 15:57\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-03T15:57:36+0000\'\u003e03\\/Feb\\/11 15:57\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Has anyone looked more into the failures on 10.3 and 10.4 after the back-porting of this issue? Is the current hypothesis that the lock timeouts happen because the post-commit work in the background thread takes a long time while holding locks on the table that is about to be dropped? \\n\\n The three second lock timeout in this test may come from ResultSetMiscTest and SetTransactionIsolationTest, which reduce the lock timeout to three seconds. Before   DERBY-4273   they didn\'t restore the original lock timeout on completion, but now they do.   DERBY-4273   is fixed on the 10.5 branch, which may explain why we only see this issue on 10.4 and 10.3. It doesn\'t explain why we haven\'t seen this issue before, though.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12990460\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12990460&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12990460\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12990460_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12990460_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Feb\\/11 06:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-04T06:00:59+0000\'\u003e04\\/Feb\\/11 06:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eKnut, I will work on backporting to 10.4 and 10.3 the subset of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4273\\\" title=\\\"A lock could not be obtained within the time requested error in testBTreeForwardScan_fetchRows_resumeAfterWait_nonUnique_split\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4273\\\"\u003e\u003cdel\u003eDERBY-4273\u003c\\/del\u003e\u003c\\/a\u003e which restores the original lock timeout on completion of ResultSetMiscTest and SetTransactionIsolationTest and see if that helps with the intermittent failure on those 2 codelines\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12990460_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12990460_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Feb\\/11 06:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-04T06:00:59+0000\'\u003e04\\/Feb\\/11 06:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Knut, I will work on backporting to 10.4 and 10.3 the subset of   DERBY-4273   which restores the original lock timeout on completion of ResultSetMiscTest and SetTransactionIsolationTest and see if that helps with the intermittent failure on those 2 codelines              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12990766\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12990766&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12990766\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12990766_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12990766_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Feb\\/11 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-04T22:02:03+0000\'\u003e04\\/Feb\\/11 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBackported to 10.4 the subset of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4273\\\" title=\\\"A lock could not be obtained within the time requested error in testBTreeForwardScan_fetchRows_resumeAfterWait_nonUnique_split\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4273\\\"\u003e\u003cdel\u003eDERBY-4273\u003c\\/del\u003e\u003c\\/a\u003e which restores the original lock timeout on completion of ResultSetMiscTest and SetTransactionIsolationTest and see if that helps with the intermittent failure on 10.4 codeline. Will next backport it to 10.3\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12990766_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12990766_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Feb\\/11 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-04T22:02:03+0000\'\u003e04\\/Feb\\/11 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Backported to 10.4 the subset of   DERBY-4273   which restores the original lock timeout on completion of ResultSetMiscTest and SetTransactionIsolationTest and see if that helps with the intermittent failure on 10.4 codeline. Will next backport it to 10.3              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12991226\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12991226&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12991226\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12991226_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12991226_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Feb\\/11 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-06T22:02:15+0000\'\u003e06\\/Feb\\/11 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFinished backporting to 10.3 the subset of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4273\\\" title=\\\"A lock could not be obtained within the time requested error in testBTreeForwardScan_fetchRows_resumeAfterWait_nonUnique_split\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4273\\\"\u003e\u003cdel\u003eDERBY-4273\u003c\\/del\u003e\u003c\\/a\u003e which restores the original lock timeout on completion of ResultSetMiscTest and SetTransactionIsolationTest and see if that helps with the intermittent failure on 10.3 codeline.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_12991226_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12991226_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Feb\\/11 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-06T22:02:15+0000\'\u003e06\\/Feb\\/11 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Finished backporting to 10.3 the subset of   DERBY-4273   which restores the original lock timeout on completion of ResultSetMiscTest and SetTransactionIsolationTest and see if that helps with the intermittent failure on 10.3 codeline.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12991304\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=12991304&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12991304\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12991304_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12991304_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/11 08:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-07T08:29:53+0000\'\u003e07\\/Feb\\/11 08:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThanks, Mamta. TriggerTests succeeded in the latest Tinderbox runs on 10.3 and 10.4. The failure was intermittent, so we cannot say for sure that it was fixed based on one run of the Tinderbox, but it looks promising.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_12991304_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12991304_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'07\\/Feb\\/11 08:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-02-07T08:29:53+0000\'\u003e07\\/Feb\\/11 08:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Thanks, Mamta. TriggerTests succeeded in the latest Tinderbox runs on 10.3 and 10.4. The failure was intermittent, so we cannot say for sure that it was fixed based on one run of the Tinderbox, but it looks promising.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13208144\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=13208144&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13208144\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13208144_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13208144_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Feb\\/12 00:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-15T00:01:49+0000\'\u003e15\\/Feb\\/12 00:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eWill go ahead and close this issue since there is nothing outstanding at this point. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mamtas\\\" id=\\\"commentauthor_13208144_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mamtas\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mamta A. Satoor\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13208144_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'15\\/Feb\\/12 00:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2012-02-15T00:01:49+0000\'\u003e15\\/Feb\\/12 00:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Will go ahead and close this issue since there is nothing outstanding at this point.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13685145\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=13685145&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13685145\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13685145_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13685145_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/13 09:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-06-17T09:19:09+0000\'\u003e17\\/Jun\\/13 09:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;bulk update&#93;\u003c\\/span\u003e Close all resolved issues that haven\'t been updated for more than one year.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"knutanders\\\" id=\\\"commentauthor_13685145_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"knutanders\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Knut Anders Hatlen\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13685145_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'17\\/Jun\\/13 09:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-06-17T09:19:09+0000\'\u003e17\\/Jun\\/13 09:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     &#91;bulk update&#93;  Close all resolved issues that haven\'t been updated for more than one year.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13792459\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=13792459&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13792459\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13792459_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13792459_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Oct\\/13 08:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-11T08:29:16+0000\'\u003e11\\/Oct\\/13 08:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1531226 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=knutanders\\\" class=\\\"user-hover\\\" rel=\\\"knutanders\\\"\u003eKnut Anders Hatlen\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1531226\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1531226\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-534\\\" title=\\\"Support use of the WHEN clause in CREATE TRIGGER statements\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-534\\\"\u003e\u003cdel\u003eDERBY-534\u003c\\/del\u003e\u003c\\/a\u003e: Support use of the WHEN clause in CREATE TRIGGER statements\u003c\\/p\u003e\\n\\n\u003cp\u003eMake the code in TriggerDescriptor.getActionSPS() reusable for\u003cbr\\/\u003e\\nTriggerDescriptor.getWhenClauseSPS() so that the fixes for \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e\u003cbr\\/\u003e\\nand Cloudscape bug 4821 also get applied to the WHEN clause.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13792459_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13792459_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'11\\/Oct\\/13 08:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-11T08:29:16+0000\'\u003e11\\/Oct\\/13 08:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1531226 from  Knut Anders Hatlen  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1531226  ] \\n\\n   DERBY-534  : Support use of the WHEN clause in CREATE TRIGGER statements \\n\\n Make the code in TriggerDescriptor.getActionSPS() reusable for \\nTriggerDescriptor.getWhenClauseSPS() so that the fixes for   DERBY-4874   \\nand Cloudscape bug 4821 also get applied to the WHEN clause.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13810589\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/DERBY-4874?focusedCommentId=13810589&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13810589\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13810589_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13810589_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Oct\\/13 19:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-31T19:29:19+0000\'\u003e31\\/Oct\\/13 19:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommit 1537593 from \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/ViewProfile.jspa?name=mamtas\\\" class=\\\"user-hover\\\" rel=\\\"mamtas\\\"\u003eMamta A. Satoor\u003c\\/a\u003e in branch \'code\\/trunk\'\u003cbr\\/\u003e\\n[ \u003ca href=\\\"https:\\/\\/svn.apache.org\\/r1537593\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttps:\\/\\/svn.apache.org\\/r1537593\u003c\\/a\u003e ]\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-6383\\\" title=\\\"Update trigger defined on one column fires on update of other columns\\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-6383\\\"\u003e\u003cdel\u003eDERBY-6383\u003c\\/del\u003e\u003c\\/a\u003e(Update trigger defined on one column fires on update of other columns). \u003c\\/p\u003e\\n\\n\u003cp\u003eThis regression is caused by \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/DERBY-4874\\\" title=\\\"Trigger does not recognize new size of VARCHAR column  expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was encountered trying to shrink VARCHAR \\\" class=\\\"issue-link\\\" data-issue-key=\\\"DERBY-4874\\\"\u003e\u003cdel\u003eDERBY-4874\u003c\\/del\u003e\u003c\\/a\u003e(Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was\u003cbr\\/\u003e\\nencountered trying to shrink VARCHAR)\u003c\\/p\u003e\\n\\n\u003cp\u003eThe regression is for Statement level triggers. The statement trigger gets fired incorrectly for any column update rather than just the column specified in the UPDATE of column clause. The fix is going to ensure that SYSTRIGGERS has the correct list of columns on which trigger should be fired. Row level triggers work fine. The only workaround at this point is to drop and recreate the statement triggers.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"jira-bot\\\" id=\\\"commentauthor_13810589_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=jira-bot\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"jira-bot\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e ASF subversion and git services\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13810589_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'31\\/Oct\\/13 19:29\'\u003e\u003ctime class=\'livestamp\' datetime=\'2013-10-31T19:29:19+0000\'\u003e31\\/Oct\\/13 19:29\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Commit 1537593 from  Mamta A. Satoor  in branch \'code\\/trunk\' \\n[  https:\\/\\/svn.apache.org\\/r1537593  ] \\n\\n   DERBY-6383  (Update trigger defined on one column fires on update of other columns).  \\n\\n This regression is caused by   DERBY-4874  (Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was \\nencountered trying to shrink VARCHAR) \\n\\n The regression is for Statement level triggers. The statement trigger gets fired incorrectly for any column update rather than just the column specified in the UPDATE of column clause. The fix is going to ensure that SYSTRIGGERS has the correct list of columns on which trigger should be fired. Row level triggers work fine. The only workaround at this point is to drop and recreate the statement triggers.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="10594";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=10594&amp;avatarId=10122\\\" alt=\\\"Derby\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/DERBY\\/summary\\\" title=\\\"Derby\\\"\u003eDerby\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/DERBY?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520240057395"> 
    <input type="hidden" title="jira.request.server.time" value="298"> 
    <input type="hidden" title="jira.request.id" value="534x94412132x9"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="10"> 
    <input type="hidden" title="db.reads.time.in.ms" value="63"> 
    <input type="hidden" title="db.conns.time.in.ms" value="70"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 534x94412132x9
	          REQUEST TIMESTAMP : [05/Mar/2018:08:54:17 +0000]
	               REQUEST TIME : 0.2980
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 10

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=31, elapsedTotal=63541326, elapsedMin=560437, elapsedMax=14708014, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=35, elapsedTotal=70377738, elapsedMin=606472, elapsedMax=14741319, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>