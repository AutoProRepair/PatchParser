<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|89346a348274c0f115356e98e5d042079542667b|lout"> 
  <link rel="shortcut icon" href="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"sd.customer.profile.multi.languages\":true,\"sd.customer.portal.transitions\":true,\"sd.customer.portal.transitions.config\":true,\"sd.custom.email.stripping.rules\":false,\"sd.sla.lucene.issue.id.callback.performance\":true,\"sd.new.settings.sidebar.location\":true,\"sd.workload.report.paginator\":true,\"sd.experimental.portal.search.algorithm.default.1\":false,\"sd.customer.portal.help.center.agent.announcement\":true,\"sd.sla.improved.rendering\":false,\"sd.experimental.portal.search.algorithm.default.2\":false,\"sd.customer.feedback.validate.reporter.on.token\":true,\"sd.custom.email.notifications.utf8.csat.star\":true,\"sd.who.create.customers.by.email.setting\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.renderer.consider.variable.format\":true,\"sd.stats.event.tracking\":true,\"sd.password.helper.dialog\":true,\"sd.canned.responses\":false,\"sd.portal.help.center.customer.signup.secondary.email\":true,\"sd.custom.email.notifications.manage.language\":true,\"sd.use.search.by.permissions\":true,\"sd.slavalue.record.updated.date\":false,\"sd.report.custom.date.range\":false,\"sd.kb.article.helpfulness.report\":false,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"sd.custom.email.notifications.styling\":true,\"sd.workinghours.new.page.bulldog.1\":false,\"sd.customer.portal.two.step.login\":false,\"sd.automation.psmq.async.executor\":true,\"sd.customer.org.list.page.lazy.search\":true,\"sd.approval.requested.when.handler\":true,\"sd.request.type.field.rest.api.filtering.bugfix\":true,\"sd.automation.then.action.auto.answer.approval\":true,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"sla.will.only.be.paused.if.they.are.already.started\":true,\"sd.kb.comment.share.stats.collection\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"sd.customer.orgs.group.participants\":true,\"sd.portal.help.center.customer.signup\":true,\"sd.sla.agent.jql.security.restricted\":true,\"sd.test.feature.flag.x\":true,\"sd.test.feature.flag.y\":false,\"sd.cluster.safe.mail.channel.shutdown\":true,\"sd.email.channel.folders\":false,\"sd.email.analytics.open\":false,\"sd.kb.project.creation.create.link.space\":true,\"sd.workinghours.new.page\":false,\"sd.confluence.anonymous.permission.fix\":true,\"com.atlassian.jira.issuetable.draggable\":true,\"sd.customer.portal.project.agent.announcement\":true,\"sd.automation.audit.log\":true,\"jira.jql.suggestrecentfields\":false,\"sd.canned.responses.check.index.startup\":false,\"sd.new.project.templates\":true,\"sd.custom.email.notifications.custom.rules.simple.ui\":false,\"sd.custom.email.notifications.cut.over\":true,\"sd.dismiss.all.misconfiguration.warnings.setting\":true,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"sd.sla.configurations.export\":true,\"sd.canned.responses.variable.substitution\":true,\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"sd.customer.portal.prioties.per.project.fix\":true,\"jira.instrumentation.laas\":false,\"sd.kb.self.service.report\":false,\"sla.improved.request.handling\":true,\"sd.no.schedule.async.upgrade.tasks\":true,\"sd.kb.primary.nav\":true,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"sd.kb.issueview.panel.phase2\":true,\"sd.email.outsider.comments\":true,\"jira.create.linked.issue\":true,\"sd.kb.issueview.panel\":true,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"sd.approvals.light.weight\":false,\"sd.automation.then.webhook\":true,\"sd.respect.inline.edit.issue.off\":true,\"jira.jql.smartautoselectfirst\":false,\"sd.global.portal.search.atlassian.only.tracking\":false,\"sd.automation.if.condition.comment.primary.action\":true,\"jira.priorities.per.project\":true,\"sd.inline.noformat.renderer\":true,\"sd.customer.request.type.create.edit.screens\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/png,image/vnd.wap.wbmp,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.servicedesk.servicedesk-canned-responses-plugin:canned-responses-data-provider.data"]="{\"substitutionVariables\":{\"issue.summary\":\"Issue summary\",\"issue.description\":\"Issue description\",\"issue.key\":\"Issue key\",\"issue.reporter.name\":\"Issue reporter\",\"issue.resolution\":\"Issue resolution\",\"request.url\":\"Request URL\",\"request.status\":\"Request status\"}}";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-help-links.help-links"]="{\"help\":{\"email.settings\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"managing.queues\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+queues+for+your+team\",\"email.setup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email\",\"request.settings.help.bubble\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\",\"email.settings.suitablerequest\":\"https://docs.atlassian.com/jira/jsd-docs-039/Receiving+requests+by+email#Receivingrequestsbyemail-suitablerequest\",\"sla.import.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Importing+SLAs\",\"documentation.home\":\"https://docs.atlassian.com/jira/jsd-docs-039/JIRA+Service+Desk+Documentation\",\"default\":\"https://docs.atlassian.com/jira/jsd-docs-039/\",\"create.space.help\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base#serving-customers-with-a-knowledge-base-createpermission\",\"email.settings.troubleshooting\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+the+email+channel\",\"admin.notifications.config\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+service+desk+notifications\",\"troubleshoot.requesttype\":\"https://docs.atlassian.com/jira/jsd-docs-039/Troubleshooting+issues+with+request+types\",\"approvals.configuration\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+JIRA+Service+Desk+approvals\",\"setting.up.reports\":\"https://docs.atlassian.com/jira/jsd-docs-039/Setting+up+service+desk+reports\",\"public.signup\":\"https://docs.atlassian.com/jira/jsd-docs-039/Configuring+public+signup\",\"knowledge.base\":\"https://docs.atlassian.com/jira/jsd-docs-039/Serving+customers+with+a+knowledge+base\",\"resolve.permission.scheme.errors\":\"https://docs.atlassian.com/jira/jsd-docs-039/Resolving+permission+scheme+errors\",\"getting.started\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+with+JIRA+Service+Desk\",\"getting.started.agent\":\"https://docs.atlassian.com/jira/jsd-docs-039/Getting+started+for+service+desk+agents\",\"invite.customers\":\"https://docs.atlassian.com/jira/jsd-docs-039/Managing+access+to+your+service+desk\"},\"kb\":{\"default\":\"https://confluence.atlassian.com/display/SDKB/\",\"troubleshooting.user.management.issues\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\",\"legacytransition\":\"https://confluence.atlassian.com/display/SDKB/Replacing+legacy+automatic+transitions+with+automation+rules\",\"umtroubleshoot\":\"https://confluence.atlassian.com/display/SDKB/Troubleshooting+issues+with+service+desk+user+management\"}}";
WRM._unparsedData["com.atlassian.servicedesk.core-ui:util-base-url.base-url"]="\"https://issues.apache.org/jira\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"51371755a24984\"";
WRM._unparsedData["project-id"]="12310110";
WRM._unparsedData["project-key"]="\"LUCENE\"";
WRM._unparsedData["project-name"]="\"Lucene - Core\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310110";
WRM._unparsedData["projectKey"]="\"LUCENE\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/1a6b21131945f6f49ff48336b49ca3fe-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/d8484c9183f546511a8e336a8779bcd9-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d3b35d835f8f46fc3b53bb4db7f85158-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/37a6e594cbbfd462a8a54d5aa11475c1/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/71d42e74136d842a3ef4d5d136484843-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/95a4826c265852f4904f1e0e7300df68-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/944bb39eced1b35cfc7194aa02eb5a5a/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/5a8f0f8b8aa8f96a4f0f7e9e248d62f3-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true&amp;sd_operational=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="LUCENE-2110"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[LUCENE-2110] Refactoring of FilteredTermsEnum and MultiTermQuery - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[LUCENE-2110] Refactoring of FilteredTermsEnum and MultiTermQuery - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/LUCENE" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-2110">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310110" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Lucene - Core'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310110&amp;avatarId=10061"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/LUCENE">Lucene - Core</a></li>
                 <li><a class="issue-link" data-issue-key="LUCENE-2110" href="/jira/browse/LUCENE-2110" id="key-val" rel="12442399">LUCENE-2110</a></li>
                </ol>
                <h1 id="summary-val">Refactoring of FilteredTermsEnum and MultiTermQuery</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FLUCENE-2110"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/LUCENE-2110/LUCENE-2110.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/LUCENE-2110/LUCENE-2110.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/LUCENE-2110/LUCENE-2110.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/LUCENE-2110/LUCENE-2110.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" title="Improvement - An improvement or enhancement to an existing feature or task." width="16"> Improvement </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="4.0-ALPHA Alpha release of the 4.x series">4.0-ALPHA</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+fixVersion+%3D+4.0-ALPHA" title="4.0-ALPHA Alpha release of the 4.x series">4.0-ALPHA</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+LUCENE+AND+component+%3D+%22core%2Fsearch%22" title="core/search issues with search code">core/search</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12442399-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
                <div id="customfieldmodule"> 
                 <div class="aui-tabs horizontal-tabs" id="customfield-tabs"> 
                  <div id="customfield-panel-1" class="tabs-pane active-pane"> 
                   <ul class="property-list"> 
                    <li id="rowForcustomfield_12310120" class="item"> 
                     <div class="wrap"> 
                      <strong title="Lucene Fields" class="name">Lucene Fields:</strong> 
                      <div id="customfield_12310120-val" class="value type-multicheckboxes" data-fieldtype="multicheckboxes" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes"> 
                       <div class="shorten" id="customfield_12310120-field"> 
                        <span>New</span>, 
                        <span>Patch Available</span> 
                       </div> 
                      </div> 
                     </div> </li> 
                   </ul> 
                  </div> 
                 </div>
                </div> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>FilteredTermsEnum is confusing as it is initially positioned to the first term. It should instead work like an uninitialized TermsEnum for a field before the first call to next() or seek().<br> FilteredTermsEnums cannot implement seek() as eg. NRQ or Automaton are not able to support this. Seeking is also not needed for MTQ at all, so seek can just throw UOE.<br> This issue changes some of the internal behaviour of MTQ and FilteredTermsEnum to allow also seeking in NRQ and Automaton (see comments below).</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/LUCENE-2110?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/LUCENE-2110?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/LUCENE-2110?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/LUCENE-2110?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12427107" data-issue-id="12442399" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12427107/LUCENE-2110.patch" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12427107/LUCENE-2110.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12427107/LUCENE-2110.patch" title="Latest  06/Dec/09 19:01 - Uwe Schindler" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12427107/LUCENE-2110.patch">LUCENE-2110.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-12-06T19:01:30.409Z">06/Dec/09 19:01</time>
                   </dd>
                   <dd class="attachment-size">
                    79 kB
                   </dd>
                   <dd class="attachment-author">
                    Uwe Schindler
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12427105" data-issue-id="12442399" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12427105/LUCENE-2110.patch" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12427105/LUCENE-2110.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12427105/LUCENE-2110.patch" title=" 06/Dec/09 17:47 - Uwe Schindler" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12427105/LUCENE-2110.patch">LUCENE-2110.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-12-06T17:47:01.745Z">06/Dec/09 17:47</time>
                   </dd>
                   <dd class="attachment-size">
                    78 kB
                   </dd>
                   <dd class="attachment-author">
                    Uwe Schindler
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12427048" data-issue-id="12442399" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12427048/LUCENE-2110.patch" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12427048/LUCENE-2110.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12427048/LUCENE-2110.patch" title=" 05/Dec/09 15:02 - Uwe Schindler" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12427048/LUCENE-2110.patch">LUCENE-2110.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-12-05T15:02:13.455Z">05/Dec/09 15:02</time>
                   </dd>
                   <dd class="attachment-size">
                    42 kB
                   </dd>
                   <dd class="attachment-author">
                    Uwe Schindler
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12427037" data-issue-id="12442399" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12427037/LUCENE-2110.patch" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12427037/LUCENE-2110.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12427037/LUCENE-2110.patch" title=" 05/Dec/09 09:22 - Uwe Schindler" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12427037/LUCENE-2110.patch">LUCENE-2110.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-12-05T09:22:08.112Z">05/Dec/09 09:22</time>
                   </dd>
                   <dd class="attachment-size">
                    42 kB
                   </dd>
                   <dd class="attachment-author">
                    Uwe Schindler
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12426931" data-issue-id="12442399" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12426931/LUCENE-2110.patch" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12426931/LUCENE-2110.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12426931/LUCENE-2110.patch" title=" 04/Dec/09 18:25 - Uwe Schindler" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12426931/LUCENE-2110.patch">LUCENE-2110.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-12-04T18:25:33.504Z">04/Dec/09 18:25</time>
                   </dd>
                   <dd class="attachment-size">
                    36 kB
                   </dd>
                   <dd class="attachment-author">
                    Uwe Schindler
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment earlier-version" data-attachment-id="12426911" data-issue-id="12442399" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12426911/LUCENE-2110.patch" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12426911/LUCENE-2110.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12426911/LUCENE-2110.patch" title=" 04/Dec/09 16:18 - Uwe Schindler" draggable="true" data-downloadurl="text/plain:LUCENE-2110.patch:https://issues.apache.org/jira/secure/attachment/12426911/LUCENE-2110.patch">LUCENE-2110.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-12-04T16:18:52.810Z">04/Dec/09 16:18</time>
                   </dd>
                   <dd class="attachment-size">
                    35 kB
                   </dd>
                   <dd class="attachment-author">
                    Uwe Schindler
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12427321" data-issue-id="12442399" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12427321/LUCENE-2110-nextSeekTermUpd.patch" draggable="true" data-downloadurl="text/plain:LUCENE-2110-nextSeekTermUpd.patch:https://issues.apache.org/jira/secure/attachment/12427321/LUCENE-2110-nextSeekTermUpd.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-file-txt" title="Text File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12427321/LUCENE-2110-nextSeekTermUpd.patch" title="Latest  08/Dec/09 10:40 - Uwe Schindler" draggable="true" data-downloadurl="text/plain:LUCENE-2110-nextSeekTermUpd.patch:https://issues.apache.org/jira/secure/attachment/12427321/LUCENE-2110-nextSeekTermUpd.patch">LUCENE-2110-nextSeekTermUpd.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2009-12-08T10:40:32.778Z">08/Dec/09 10:40</time>
                   </dd>
                   <dd class="attachment-size">
                    3 kB
                   </dd>
                   <dd class="attachment-author">
                    Uwe Schindler
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="blocks">
                   blocks
                  </dt> 
                  <dd id="internal-12442406_10032"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21140&amp;avatarType=issuetype" width="16" height="16" title="Improvement - An improvement or enhancement to an existing feature or task." alt="Improvement - An improvement or enhancement to an existing feature or task."> <span title="LUCENE-2111: Wrapup flexible indexing"> <a href="/jira/browse/LUCENE-2111" data-issue-key="LUCENE-2111" class="issue-link link-title resolution">LUCENE-2111</a> <span class="link-summary">Wrapup flexible indexing</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/major.svg" width="16" height="16" title="Major - Major loss of function." alt="Major - Major loss of function."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                 <dl class="links-list "> 
                  <dt title="relates to">
                   relates to
                  </dt> 
                  <dd id="internal-12422990_10030"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype" width="16" height="16" title="New Feature - A new feature of the product, which has yet to be developed." alt="New Feature - A new feature of the product, which has yet to be developed."> <span title="LUCENE-1606: Automaton Query/Filter (scalable regex)"> <a href="/jira/browse/LUCENE-1606" data-issue-key="LUCENE-1606" class="issue-link link-title resolution">LUCENE-1606</a> <span class="link-summary">Automaton Query/Filter (scalable regex)</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_thetaphi" rel="thetaphi" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Uwe Schindler&quot;,&quot;emailAddress&quot;:&quot;uwe@thetaphi.de&quot;,&quot;username&quot;:&quot;thetaphi&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="thetaphi"></span></span> Uwe Schindler </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_thetaphi" rel="thetaphi" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Uwe Schindler&quot;,&quot;emailAddress&quot;:&quot;uwe@thetaphi.de&quot;,&quot;username&quot;:&quot;thetaphi&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="thetaphi"></span></span> Uwe Schindler </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="03/Dec/09 22:35"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-12-03T22:35:42+0000">03/Dec/09 22:35</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="10/May/13 10:43"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2013-05-10T10:43:40+0000">10/May/13 10:43</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="06/Dec/09 21:32"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2009-12-06T21:32:40+0000">06/Dec/09 21:32</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for n/a, Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/LUCENE-2110?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/LUCENE-2110?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12785645\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12785645&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12785645\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12785645_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12785645_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/09 23:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-03T23:46:07+0000\'\u003e03\\/Dec\\/09 23:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI will work on this tomorrow and provide a patch. I will also update the patch in \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-1606\\\" title=\\\"Automaton Query\\/Filter (scalable regex)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-1606\\\"\u003e\u003cdel\u003eLUCENE-1606\u003c\\/del\u003e\u003c\\/a\u003e to move the initial seek out of ctor (its easy, see below).\u003c\\/p\u003e\\n\\n\u003cp\u003eThe setEnum method should be renamed in something like setInitialTermRef(). So the default impl of next() will seek to the correct term and do not seek by default (iterate all terms of field).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12785645_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12785645_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'03\\/Dec\\/09 23:46\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-03T23:46:07+0000\'\u003e03\\/Dec\\/09 23:46\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I will work on this tomorrow and provide a patch. I will also update the patch in   LUCENE-1606   to move the initial seek out of ctor (its easy, see below). \\n\\n The setEnum method should be renamed in something like setInitialTermRef(). So the default impl of next() will seek to the correct term and do not seek by default (iterate all terms of field).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12785983\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12785983&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12785983\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12785983_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12785983_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T16:18:52+0000\'\u003e04\\/Dec\\/09 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere my patch for this.\u003c\\/p\u003e\\n\\n\u003cp\u003eI rewrote the whole FilteredTermsEnum and made it natively support seeking needed for NRQ and Automaton.\u003c\\/p\u003e\\n\\n\u003cp\u003eThis initial patch is for review only, but all tests pass. I will try to modify Robert\'s patch, as soon as he provided me an updated Patch for Automaton flex branch.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe enum works different than before:\u003cbr\\/\u003e\\nIt is positioned before the first term (like it should), seeking is no longer supported (as not needed for MTQ) and not implementable for seeking enums like NRQ or Automaton.\u003c\\/p\u003e\\n\\n\u003cp\u003eIn the constructor you give index reader and field name, as TermsEnum can only iterate one field in flex, this is no limitation.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor non-seeking enums you can set the initial term to seek to with setInitialSeekTerm(TermRef) in the ctor. The rest of the enum then behaves as before.\u003c\\/p\u003e\\n\\n\u003cp\u003eFor seeking enums like Automaton\\/NRQ you override a secondary iterator method nextSeekTerm() that returns the next TermRef the underlying iterator should seek to. This method is called, when accept() returns END (and also on the first next() call, of course). The default impl of this method just returns the initial seek term as explained above one time and then null.\u003c\\/p\u003e\\n\\n\u003cp\u003eEverything else stands in the javadocs.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12785983_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12785983_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 16:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T16:18:52+0000\'\u003e04\\/Dec\\/09 16:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here my patch for this. \\n\\n I rewrote the whole FilteredTermsEnum and made it natively support seeking needed for NRQ and Automaton. \\n\\n This initial patch is for review only, but all tests pass. I will try to modify Robert\'s patch, as soon as he provided me an updated Patch for Automaton flex branch. \\n\\n The enum works different than before: \\nIt is positioned before the first term (like it should), seeking is no longer supported (as not needed for MTQ) and not implementable for seeking enums like NRQ or Automaton. \\n\\n In the constructor you give index reader and field name, as TermsEnum can only iterate one field in flex, this is no limitation. \\n\\n For non-seeking enums you can set the initial term to seek to with setInitialSeekTerm(TermRef) in the ctor. The rest of the enum then behaves as before. \\n\\n For seeking enums like Automaton\\/NRQ you override a secondary iterator method nextSeekTerm() that returns the next TermRef the underlying iterator should seek to. This method is called, when accept() returns END (and also on the first next() call, of course). The default impl of this method just returns the initial seek term as explained above one time and then null. \\n\\n Everything else stands in the javadocs.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12785990\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12785990&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12785990\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_12785990_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12785990_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T16:32:14+0000\'\u003e04\\/Dec\\/09 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUwe, I will look at re-porting automaton to flex so you can test this. (now it has good tests and sort order\\/unicode crap is fixed and they should all pass).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_12785990_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12785990_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 16:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T16:32:14+0000\'\u003e04\\/Dec\\/09 16:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Uwe, I will look at re-porting automaton to flex so you can test this. (now it has good tests and sort order\\/unicode crap is fixed and they should all pass).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12785996\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12785996&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12785996\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12785996_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12785996_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T16:50:05+0000\'\u003e04\\/Dec\\/09 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThis is a great improvement Uwe... I like it.\u003c\\/p\u003e\\n\\n\u003cp\u003eIs an MTQ allowed to return nextSeekTerm\'s out of order?  (I know NRQ\\/automaton don\'t need to do so, but, if it\'s fine we should maybe call that out in the javadocs...).  Though, FilteredTermsEnum, being a \\\"TermsEnum\\\", is \\\"supposed\\\" to return terms in getTermComparator() order... however its consumers (the rewrite methods for MTQ) usually don\'t in fact care.  Hmm I wonder if it should even subclass TermsEnum?  It doesn\'t seek and it\'s free to return terms in a different order...\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12785996_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12785996_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 16:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T16:50:05+0000\'\u003e04\\/Dec\\/09 16:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    This is a great improvement Uwe... I like it. \\n\\n Is an MTQ allowed to return nextSeekTerm\'s out of order?  (I know NRQ\\/automaton don\'t need to do so, but, if it\'s fine we should maybe call that out in the javadocs...).  Though, FilteredTermsEnum, being a \\\"TermsEnum\\\", is \\\"supposed\\\" to return terms in getTermComparator() order... however its consumers (the rewrite methods for MTQ) usually don\'t in fact care.  Hmm I wonder if it should even subclass TermsEnum?  It doesn\'t seek and it\'s free to return terms in a different order...              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786054\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786054&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786054\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786054_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786054_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T18:25:33+0000\'\u003e04\\/Dec\\/09 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUpdated patch also incorporating the needed changes for SingleTermsEnum to make it work with new API. Now it is at least a 5-code-liner \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eI also fixed a method call instead of parameter usage in TermRangeTermsEnum. Also added Mike\'s comment In my opinion, we should keep it as TermsEnum, even when seeking does not work, which is documented. In my code I often use PrefixTerm(s)Enum for autocomplete cases - works good - and for that it is only handles as a Term(s)Enum for iterating making it simplier to reuse code working on Term(s)Enums. Also made some mebers final, I forgot this during restructuring the code.\u003c\\/p\u003e\\n\\n\u003cp\u003eWhat I forgot to mention: I made the abstract methods in FilteredTermsEnum also throw IOException, so maybe subclasses, doing strange things, would compile.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786054_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786054_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 18:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T18:25:33+0000\'\u003e04\\/Dec\\/09 18:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Updated patch also incorporating the needed changes for SingleTermsEnum to make it work with new API. Now it is at least a 5-code-liner   \\n\\n I also fixed a method call instead of parameter usage in TermRangeTermsEnum. Also added Mike\'s comment In my opinion, we should keep it as TermsEnum, even when seeking does not work, which is documented. In my code I often use PrefixTerm(s)Enum for autocomplete cases - works good - and for that it is only handles as a Term(s)Enum for iterating making it simplier to reuse code working on Term(s)Enums. Also made some mebers final, I forgot this during restructuring the code. \\n\\n What I forgot to mention: I made the abstract methods in FilteredTermsEnum also throw IOException, so maybe subclasses, doing strange things, would compile.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786072\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786072&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786072\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12786072_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786072_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 18:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T18:54:43+0000\'\u003e04\\/Dec\\/09 18:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eIn my opinion, we should keep it as TermsEnum, even when seeking does not work, which is documented\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOK, let\'s keep it as subclassing TermsEnum.  Maybe we should relax the docs for TermsEnum to state that each subclass determines order.  Nothing in TermsEnum itself requires a particular order.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12786072_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786072_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'04\\/Dec\\/09 18:54\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-04T18:54:43+0000\'\u003e04\\/Dec\\/09 18:54\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     In my opinion, we should keep it as TermsEnum, even when seeking does not work, which is documented  \\n\\n OK, let\'s keep it as subclassing TermsEnum.  Maybe we should relax the docs for TermsEnum to state that each subclass determines order.  Nothing in TermsEnum itself requires a particular order.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786362\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786362&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786362\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786362_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786362_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 09:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T09:22:08+0000\'\u003e05\\/Dec\\/09 09:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNew patch with the attribute support of \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-2109\\\" title=\\\"Make DocsEnum subclass of DocIdSetIterator\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-2109\\\"\u003e\u003cdel\u003eLUCENE-2109\u003c\\/del\u003e\u003c\\/a\u003e.\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eAlso fixes a bug in the BW compatibility layer of MTQ (if clause wrong).\u003c\\/li\u003e\\n\\t\u003cli\u003eSome code cleanup in FilteredTermsEnum (now easier to read, as next() and seekNextTerm is complicated).\u003c\\/li\u003e\\n\\t\u003cli\u003eAdded EmptyTermsEnum for shortcuts (used by NRQ and TRQ on inverse ranges). This enum never does any disk I\\/O to terms dict, it is just empty. EmptyTermsEnum again supports seeking (although subclass of FilteredTermsEnum), but it is simple there, it returns just END \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI will now port Automaton and apply will provide a combined patch there.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786362_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786362_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 09:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T09:22:08+0000\'\u003e05\\/Dec\\/09 09:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    New patch with the attribute support of   LUCENE-2109  . \\n\\n \\n\\t Also fixes a bug in the BW compatibility layer of MTQ (if clause wrong). \\n\\t Some code cleanup in FilteredTermsEnum (now easier to read, as next() and seekNextTerm is complicated). \\n\\t Added EmptyTermsEnum for shortcuts (used by NRQ and TRQ on inverse ranges). This enum never does any disk I\\/O to terms dict, it is just empty. EmptyTermsEnum again supports seeking (although subclass of FilteredTermsEnum), but it is simple there, it returns just END   \\n \\n\\n\\n I will now port Automaton and apply will provide a combined patch there.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786411\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786411&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786411\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_12786411_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786411_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 14:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T14:21:38+0000\'\u003e05\\/Dec\\/09 14:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHey Uwe, since your editing this code anyway, wanna add a comment fix for the ref of TermInfo here?\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e+          \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ Loading the TermInfo from the terms dict here\\n\u003c\\/span\u003e+          \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ should not be costly, because 1) the\\n\u003c\\/span\u003e+          \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ query\\/filter will load the TermInfo when it\\n\u003c\\/span\u003e+          \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ runs, and 2) the terms dict has a cache:\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_12786411_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786411_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 14:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T14:21:38+0000\'\u003e05\\/Dec\\/09 14:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hey Uwe, since your editing this code anyway, wanna add a comment fix for the ref of TermInfo here? \\n\\n  \\n +           \\/\\/ Loading the TermInfo from the terms dict here\\n +           \\/\\/ should not be costly, because 1) the\\n +           \\/\\/ query\\/filter will load the TermInfo when it\\n +           \\/\\/ runs, and 2) the terms dict has a cache: \\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786425\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786425&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786425\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786425_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786425_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 15:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T15:02:13+0000\'\u003e05\\/Dec\\/09 15:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAfter porting Automaton, I realized, that the seeking code should be changed and made a little bit more flexible.\u003c\\/p\u003e\\n\\n\u003cp\u003eAcceptStatus can now return 5 stati:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eYES, NO: Accept \\/ not accept the term and go forward, the simple linear case that iterates until the end and filters terms (FuzzyQuery case, linear Automaton)\u003c\\/li\u003e\\n\\t\u003cli\u003eYES_AND_SEEK, NO_AND_SEEK: the same like above, but instead of simply going forward, nextSeekTerm() is called to retrieve a new term to seek to. This method is now supposed to always return a greater term than before, if not, the enumeration can end too early (see below).\u003c\\/li\u003e\\n\\t\u003cli\u003eEND: end the enumeration, so seeking. This status is used by TermRangeQuery and PrefixQuery as before.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003enextSeekTerm() should always return a greater term that the last one before seeking. This is asserted by NRQ. It is not bad to do this, but after that the enum is no longer correctly sorted. Also, if the consumer reaches the last term of the underlying enum, call next() will end enumeration and so further terms in the nextSeekTerm() interation will not consulted (the same happens when END is returned in accept, of course).\u003c\\/p\u003e\\n\\n\u003cp\u003eIf nextSeekTerm() returns null, the enumeration is also ended, so it is not required to return AcceptStatus.END instead of X_AND_SEEK.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786425_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786425_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 15:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T15:02:13+0000\'\u003e05\\/Dec\\/09 15:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    After porting Automaton, I realized, that the seeking code should be changed and made a little bit more flexible. \\n\\n AcceptStatus can now return 5 stati: \\n \\n\\t YES, NO: Accept \\/ not accept the term and go forward, the simple linear case that iterates until the end and filters terms (FuzzyQuery case, linear Automaton) \\n\\t YES_AND_SEEK, NO_AND_SEEK: the same like above, but instead of simply going forward, nextSeekTerm() is called to retrieve a new term to seek to. This method is now supposed to always return a greater term than before, if not, the enumeration can end too early (see below). \\n\\t END: end the enumeration, so seeking. This status is used by TermRangeQuery and PrefixQuery as before. \\n \\n\\n\\n nextSeekTerm() should always return a greater term that the last one before seeking. This is asserted by NRQ. It is not bad to do this, but after that the enum is no longer correctly sorted. Also, if the consumer reaches the last term of the underlying enum, call next() will end enumeration and so further terms in the nextSeekTerm() interation will not consulted (the same happens when END is returned in accept, of course). \\n\\n If nextSeekTerm() returns null, the enumeration is also ended, so it is not required to return AcceptStatus.END instead of X_AND_SEEK.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786426\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786426&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786426\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786426_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786426_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 15:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T15:04:04+0000\'\u003e05\\/Dec\\/09 15:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMark: I do not know about what you are talking about (sorry, my brain is fuming after automaton).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786426_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786426_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 15:04\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T15:04:04+0000\'\u003e05\\/Dec\\/09 15:04\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Mark: I do not know about what you are talking about (sorry, my brain is fuming after automaton).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786433\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786433&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786433\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_12786433_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786433_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 15:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T15:21:01+0000\'\u003e05\\/Dec\\/09 15:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNo problem, we can get it after - its not really related, just figured since you were patching here anyway and I happened to notice it will taking a look at the patch:\u003c\\/p\u003e\\n\\n\u003cp\u003eTermInfo is no longer used in flex, but its referenced in the above comment, in MTQ.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"markrmiller@gmail.com\\\" id=\\\"commentauthor_12786433_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=markrmiller%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"markrmiller@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Mark Miller\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786433_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 15:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T15:21:01+0000\'\u003e05\\/Dec\\/09 15:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    No problem, we can get it after - its not really related, just figured since you were patching here anyway and I happened to notice it will taking a look at the patch: \\n\\n TermInfo is no longer used in flex, but its referenced in the above comment, in MTQ. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786439\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786439&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786439\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_12786439_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786439_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 16:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T16:21:23+0000\'\u003e05\\/Dec\\/09 16:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUwe, I really like what you have done here (as commented on \u003ca href=\\\"https:\\/\\/issues.apache.org\\/jira\\/browse\\/LUCENE-1606\\\" title=\\\"Automaton Query\\/Filter (scalable regex)\\\" class=\\\"issue-link\\\" data-issue-key=\\\"LUCENE-1606\\\"\u003e\u003cdel\u003eLUCENE-1606\u003c\\/del\u003e\u003c\\/a\u003e)\u003c\\/p\u003e\\n\\n\u003cp\u003eSeeking around in a filteredtermsenum is even simpler here. (in my opinion, this thing is very tricky with trunk and it is good to simplify)\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_12786439_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786439_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 16:21\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T16:21:23+0000\'\u003e05\\/Dec\\/09 16:21\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Uwe, I really like what you have done here (as commented on   LUCENE-1606  ) \\n\\n Seeking around in a filteredtermsenum is even simpler here. (in my opinion, this thing is very tricky with trunk and it is good to simplify)              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786451\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786451&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786451\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12786451_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786451_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 17:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T17:20:51+0000\'\u003e05\\/Dec\\/09 17:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003enextSeekTerm() should always return a greater term that the last one before seeking. \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eUwe, why was this constraint needed?  What goes wrong if we allow terms to be returned out of order?  The consumers of this (MTQ\'s rewrite methods) don\'t mind if terms are out of order, right?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12786451_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786451_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 17:20\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T17:20:51+0000\'\u003e05\\/Dec\\/09 17:20\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     nextSeekTerm() should always return a greater term that the last one before seeking.   \\n\\n Uwe, why was this constraint needed?  What goes wrong if we allow terms to be returned out of order?  The consumers of this (MTQ\'s rewrite methods) don\'t mind if terms are out of order, right?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786452\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786452&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786452\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786452_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786452_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 17:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T17:27:05+0000\'\u003e05\\/Dec\\/09 17:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIt will work (theoretically) but can fail:\u003cbr\\/\u003e\\nif you seek to the last term and accept it, the next call to next() will end the enum, even if there may be more positions to seek. You cannot rely on the fact that all seek terms are visited. Because of that it \u003cb\u003eshould\u003c\\/b\u003e be foreward only, if other, you must know what you do\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786452_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786452_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 17:27\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T17:27:05+0000\'\u003e05\\/Dec\\/09 17:27\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    It will work (theoretically) but can fail: \\nif you seek to the last term and accept it, the next call to next() will end the enum, even if there may be more positions to seek. You cannot rely on the fact that all seek terms are visited. Because of that it  should  be foreward only, if other, you must know what you do              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786457\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786457&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786457\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786457_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786457_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 18:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T18:10:35+0000\'\u003e05\\/Dec\\/09 18:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI have a solution for this problem: If the end of the enum is reached i just asks for a new term is seek==true (that is what iwas before). But nextPrefixTerm() gets the information that the end was already finished and \u003cb\u003ecould\u003c\\/b\u003e return null then. This is important for automaton, because it would loop endless else (because it would produce terms and terms and terms... in nextSeekTerm).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786457_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786457_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 18:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T18:10:35+0000\'\u003e05\\/Dec\\/09 18:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I have a solution for this problem: If the end of the enum is reached i just asks for a new term is seek==true (that is what iwas before). But nextPrefixTerm() gets the information that the end was already finished and  could  return null then. This is important for automaton, because it would loop endless else (because it would produce terms and terms and terms... in nextSeekTerm).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786471\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786471&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786471\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786471_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786471_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 19:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T19:50:47+0000\'\u003e05\\/Dec\\/09 19:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAttached is patch that allows the TermsEnum to go backwards and not break if end of underlying TermsEnum is reached after next() or seek().\u003c\\/p\u003e\\n\\n\u003cp\u003eThe method nextSeekTerm() gets a boolean if the underlying TermsEnum is exhausted. Enums that work in order can the simply return null to break iteration. But they are free to reposition to a term before.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786471_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786471_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 19:50\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T19:50:47+0000\'\u003e05\\/Dec\\/09 19:50\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Attached is patch that allows the TermsEnum to go backwards and not break if end of underlying TermsEnum is reached after next() or seek(). \\n\\n The method nextSeekTerm() gets a boolean if the underlying TermsEnum is exhausted. Enums that work in order can the simply return null to break iteration. But they are free to reposition to a term before.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786475\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786475&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786475\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786475_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786475_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:01:16+0000\'\u003e05\\/Dec\\/09 20:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003efixed patch - i have to stop for today.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786475_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786475_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:01:16+0000\'\u003e05\\/Dec\\/09 20:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    fixed patch - i have to stop for today.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786480\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786480&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786480\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786480_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786480_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:07:32+0000\'\u003e05\\/Dec\\/09 20:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eStop everything I get a collaps!!!!! Again wrong patch.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786480_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786480_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:07:32+0000\'\u003e05\\/Dec\\/09 20:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Stop everything I get a collaps!!!!! Again wrong patch.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786482\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786482&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786482\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786482_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786482_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:19:22+0000\'\u003e05\\/Dec\\/09 20:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNow the final one.\u003c\\/p\u003e\\n\\n\u003cp\u003eI somehow need a test enum which does very strange things like seeking forward and backwards and returning all strange stati.\u003c\\/p\u003e\\n\\n\u003cp\u003eWill think about one tomorrow.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786482_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786482_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:19\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:19:22+0000\'\u003e05\\/Dec\\/09 20:19\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Now the final one. \\n\\n I somehow need a test enum which does very strange things like seeking forward and backwards and returning all strange stati. \\n\\n Will think about one tomorrow.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786486\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786486&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786486\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786486_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786486_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:35:28+0000\'\u003e05\\/Dec\\/09 20:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eRobert and me analyzed the latest change. It is so complex and I am really not sure, if we should do this. It is impossible to maintain this.\u003c\\/p\u003e\\n\\n\u003cp\u003eWe should enforce only seeking forwards (even if MTQ could accept terms out of order). Violating TermsEnums order stupid, so we should use the patch before. NRQ and also Automaton enforce stepping forwards only.\u003c\\/p\u003e\\n\\n\u003cp\u003eMike?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786486_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786486_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:35\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:35:28+0000\'\u003e05\\/Dec\\/09 20:35\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Robert and me analyzed the latest change. It is so complex and I am really not sure, if we should do this. It is impossible to maintain this. \\n\\n We should enforce only seeking forwards (even if MTQ could accept terms out of order). Violating TermsEnums order stupid, so we should use the patch before. NRQ and also Automaton enforce stepping forwards only. \\n\\n Mike?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786487\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786487&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786487\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_12786487_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786487_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:38:51+0000\'\u003e05\\/Dec\\/09 20:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eyeah compared to the last patch, the backwards seeking makes the code more complex in my opinion.\u003c\\/p\u003e\\n\\n\u003cp\u003ei do not understand why a MTQ would need to backwards seek? Can we say instead if you want to do such a thing with flexible indexing, that the way is to instead define custom sort order in your codec?\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_12786487_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786487_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:38:51+0000\'\u003e05\\/Dec\\/09 20:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    yeah compared to the last patch, the backwards seeking makes the code more complex in my opinion. \\n\\n i do not understand why a MTQ would need to backwards seek? Can we say instead if you want to do such a thing with flexible indexing, that the way is to instead define custom sort order in your codec? \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786494\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786494&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786494\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786494_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786494_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:48:50+0000\'\u003e05\\/Dec\\/09 20:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e+1, I reverted it here completely. It is not senseful to support unordered filtered enums. If somebody wants to implement that he should do it otherwise by overriding next() himself and not use nextSeekTerm() and accept().\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786494_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786494_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'05\\/Dec\\/09 20:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-05T20:48:50+0000\'\u003e05\\/Dec\\/09 20:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    +1, I reverted it here completely. It is not senseful to support unordered filtered enums. If somebody wants to implement that he should do it otherwise by overriding next() himself and not use nextSeekTerm() and accept().              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786587\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786587&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786587\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12786587_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786587_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 09:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T09:40:49+0000\'\u003e06\\/Dec\\/09 09:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eWe should enforce only seeking forwards (even if MTQ could accept terms out of order). Violating TermsEnums order stupid, so we should use the patch before. NRQ and also Automaton enforce stepping forwards only.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOK, I hadn\'t realized this was adding so much complexity to the code, so I agree let\'s revert it and require FTE to always move forward according to getTermComparator its actualEnum.  We don\'t have a need for this today, anyway.  Design for today \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12786587_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786587_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 09:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T09:40:49+0000\'\u003e06\\/Dec\\/09 09:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     We should enforce only seeking forwards (even if MTQ could accept terms out of order). Violating TermsEnums order stupid, so we should use the patch before. NRQ and also Automaton enforce stepping forwards only.  \\n\\n OK, I hadn\'t realized this was adding so much complexity to the code, so I agree let\'s revert it and require FTE to always move forward according to getTermComparator its actualEnum.  We don\'t have a need for this today, anyway.  Design for today                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786610\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786610&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786610\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786610_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786610_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 12:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T12:18:40+0000\'\u003e06\\/Dec\\/09 12:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFrom our IRC chat between Mike and me:\u003c\\/p\u003e\\n\u003cblockquote\u003e\\n\u003cp\u003e\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e ThetaPhi_: mike: any further comments for 2110?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e mikemccand: am just trying to look at it &#8211; waiting on a sloooooow svn up.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e ThetaPhi_: this out of order is not trivial and makes code for automaton and NRQ more complicated\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e mikemccand: the change is a great step forward\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e mikemccand: yeah forget it \u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e ThetaPhi_: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e ThetaPhi_: you understood the problem\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e mikemccand: i had thought it was nearly free\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e mikemccand: i don\'t fully understand the problem\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:19&#93;\u003c\\/span\u003e mikemccand: impossible to keep up with you!!\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:20&#93;\u003c\\/span\u003e ThetaPhi_: when the underlying enum is exhausted (I was exhausted yesterday, too), it stops processing, even if there are more nextSeelkTerms\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:20&#93;\u003c\\/span\u003e mikemccand: yes I saw your exhausted pun \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:20&#93;\u003c\\/span\u003e mikemccand: wait &#8211; if a TermsEnum becomes exhaused, you\'re unable to seek it again?  is that the issue?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:20&#93;\u003c\\/span\u003e ThetaPhi_: waht you could do is, that after the underlying enum is exhausted, that you call nextSeekTerm and reposition\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:21&#93;\u003c\\/span\u003e ThetaPhi_: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:21&#93;\u003c\\/span\u003e ThetaPhi_: you could seek it\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:21&#93;\u003c\\/span\u003e ThetaPhi_: and this worked at the beginning (first patch without the additional enum constants)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:21&#93;\u003c\\/span\u003e ThetaPhi_: what it did was: when the underlying enum was exhausted it simply called nextSeekTerm and seeked\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:22&#93;\u003c\\/span\u003e mikemccand: so TermsEnum API allows seeks after next()\'ing to exhaustion, right?  (I think it should but maybe it\' doesn\'t somewhere?)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:22&#93;\u003c\\/span\u003e ThetaPhi_: which was ok\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:22&#93;\u003c\\/span\u003e ThetaPhi_: mikemccand: your enums works perfect\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:22&#93;\u003c\\/span\u003e ThetaPhi_: they can be seeked everytime even when exhausted\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:22&#93;\u003c\\/span\u003e mikemccand: ok\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:23&#93;\u003c\\/span\u003e ThetaPhi_: the problem is logic in filteredtermsenum\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:23&#93;\u003c\\/span\u003e mikemccand: ok\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:23&#93;\u003c\\/span\u003e ThetaPhi_: it gets very complicated when you want to support two things:\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:23&#93;\u003c\\/span\u003e ThetaPhi_: a) seeking on request (NO_AND_SEEK, YES_AND_SEEK)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:24&#93;\u003c\\/span\u003e ThetaPhi_: b) and want to consume all nextSeekTerms()\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:24&#93;\u003c\\/span\u003e ThetaPhi_: if somebody seeks after _AND_SEEK to e.g. the last term of the enum\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:24&#93;\u003c\\/span\u003e ThetaPhi_: in the current impl it will read that term\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:25&#93;\u003c\\/span\u003e ThetaPhi_: call termCompare and so on\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:25&#93;\u003c\\/span\u003e ThetaPhi_: if this accepts the term or not accepts the term\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:25&#93;\u003c\\/span\u003e ThetaPhi_: it will call next() on the underlying enum again\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:25&#93;\u003c\\/span\u003e ThetaPhi_: which then returns null\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:26&#93;\u003c\\/span\u003e ThetaPhi_: with the current patch it will then also end the filteredtermsenum\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:26&#93;\u003c\\/span\u003e mikemccand: ok &#8211; so the termination logic inside FTE.next() got really hairy if on getting null from the actualEnum you had to consider going back for another seek term?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:26&#93;\u003c\\/span\u003e ThetaPhi_: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:26&#93;\u003c\\/span\u003e ThetaPhi_: i tried it yesterday\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:26&#93;\u003c\\/span\u003e mikemccand: we certainly don\'t need to support thist oday\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:26&#93;\u003c\\/span\u003e ThetaPhi_: and I had no good test\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:27&#93;\u003c\\/span\u003e ThetaPhi_: yes exactly\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:27&#93;\u003c\\/span\u003e mikemccand: if somehow this ever becomes needed then we add it then\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:27&#93;\u003c\\/span\u003e mikemccand: the new FTE looks great\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:27&#93;\u003c\\/span\u003e ThetaPhi_: the idea was to provide a param to nextSeekTerm which denotes if the underlying enum ended\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:27&#93;\u003c\\/span\u003e mikemccand: NRQ is soooo much simpler \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:28&#93;\u003c\\/span\u003e ThetaPhi_: the idea was to call even on exit nextSeekTerm(true), where triue meant exhausted\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:28&#93;\u003c\\/span\u003e mikemccand: i see &#8211; so it involved different API\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:28&#93;\u003c\\/span\u003e ThetaPhi_: TEnums like NRQ or automaton only going forward then know, not to provide seek terms again\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:28&#93;\u003c\\/span\u003e ThetaPhi_: this was important for Automaton not to fall into endless loops\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:29&#93;\u003c\\/span\u003e mikemccand: this is hairy stuff \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:29&#93;\u003c\\/span\u003e ThetaPhi_: and good for NRQ to not provide any further terms\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:30&#93;\u003c\\/span\u003e ThetaPhi_: when I tried to implement there was always a problem and you were not able to correctly define waht should happen then\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:30&#93;\u003c\\/span\u003e mikemccand: how come the switch in FTE.next doesn\'t have \\\"case NO\\\" on the return from accept(term)?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:31&#93;\u003c\\/span\u003e ThetaPhi_: thats not needed it just falls through and loops to next term\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:31&#93;\u003c\\/span\u003e ThetaPhi_: you could add it as NO: break;\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:31&#93;\u003c\\/span\u003e * mikemccand ahh got it &#8211; maybe just add comment saying so\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:31&#93;\u003c\\/span\u003e ThetaPhi_: good idea, will do\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:32&#93;\u003c\\/span\u003e ThetaPhi_: the NO_AND_seek case is the same it just says doSeek = true\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:32&#93;\u003c\\/span\u003e ThetaPhi_: and for yes it returns the term in both cases, but records doSeek for the next time next() is called\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:32&#93;\u003c\\/span\u003e mikemccand: i wonder if we could simply add a seek term to AcceptStatus?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:33&#93;\u003c\\/span\u003e mikemccand: vs calling the separate nextSeekTerm method\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:33&#93;\u003c\\/span\u003e ThetaPhi_: enum\'s contents are final\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:33&#93;\u003c\\/span\u003e mikemccand: not sure it\'d be better... just wondering\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:33&#93;\u003c\\/span\u003e ThetaPhi_: because each constant is a singleton, they should be unmodifiable\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:34&#93;\u003c\\/span\u003e mikemccand: ie, fix AcceptStatus to be like TermsEnum.SeekResult\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:34&#93;\u003c\\/span\u003e mikemccand: so it returns status, but also an optional seekTerm which if null means no seeking\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:34&#93;\u003c\\/span\u003e ThetaPhi_: and how to do this, not with an enum constant\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:34&#93;\u003c\\/span\u003e ThetaPhi_: because they are constants\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:35&#93;\u003c\\/span\u003e ThetaPhi_: and createing a new object on each accept call seems not ideal\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:35&#93;\u003c\\/span\u003e mikemccand: sorry, i was confused &#8211; SeekStatus used to be a class that had two attrs &#8211; a TermRef, and the enum; i simplified that a while ago\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:36&#93;\u003c\\/span\u003e ThetaPhi_: aaaah\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:36&#93;\u003c\\/span\u003e ThetaPhi_: now its an enum\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:36&#93;\u003c\\/span\u003e ThetaPhi_: i do not think its a ood idea to return new objects\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:36&#93;\u003c\\/span\u003e mikemccand: right.  for a while I had no TermsEnum.term()\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:36&#93;\u003c\\/span\u003e mikemccand: the enums would reuse their status object\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:36&#93;\u003c\\/span\u003e mikemccand: ie API would require that this is fine\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:37&#93;\u003c\\/span\u003e ThetaPhi_: but enums are singleton\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:37&#93;\u003c\\/span\u003e ThetaPhi_: for the whole JVM\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:37&#93;\u003c\\/span\u003e mikemccand: if we did that... then we could go back to YES\\/NO\\/END, and, and seekTerm is then orthogonal\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:37&#93;\u003c\\/span\u003e ThetaPhi_: ok\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:37&#93;\u003c\\/span\u003e ThetaPhi_: so a protected setSeekTerm\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:38&#93;\u003c\\/span\u003e mikemccand: we\'d make a new \\\"AcceptResult\\\" class.  has \\\"AcceptStatus status\\\" member, and also \\\"TermRef seekTerm\\\"\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:38&#93;\u003c\\/span\u003e ThetaPhi_: then we are back at the state before, we should ask robert\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:38&#93;\u003c\\/span\u003e mikemccand: ok\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:38&#93;\u003c\\/span\u003e ThetaPhi_: for him the separation of accept and nextSeekTerm was good\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:38&#93;\u003c\\/span\u003e mikemccand: ahh i see\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:39&#93;\u003c\\/span\u003e ThetaPhi_: but he could do the calculation of the next sring in accept, too\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:39&#93;\u003c\\/span\u003e mikemccand: though, can\'t he simply emulate?  ie, internally call a private nextSeekTerm, stick it on the returned AcceptResult, and return that?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:39&#93;\u003c\\/span\u003e mikemccand: right\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:39&#93;\u003c\\/span\u003e ThetaPhi_: telephone...\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:39&#93;\u003c\\/span\u003e mikemccand: do we ever call nextSeekTerm, unless AcceptStatus was XXX_AND_SEEK?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:39&#93;\u003c\\/span\u003e mikemccand: hah real world interrupts\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:40&#93;\u003c\\/span\u003e ThetaPhi_: thats what is done currentl\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:40&#93;\u003c\\/span\u003e ThetaPhi_: brb\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:41&#93;\u003c\\/span\u003e mikemccand: man all of infra seems slow right now... jira giving me intermittent Internal Server Error... svn really slow\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;10:41&#93;\u003c\\/span\u003e mikemccand: git is tempting\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:04&#93;\u003c\\/span\u003e *** jwtoddii has joined #lucene.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:15&#93;\u003c\\/span\u003e *** jwtoddii has signed off IRC ().\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:15&#93;\u003c\\/span\u003e ThetaPhi_: re\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:15&#93;\u003c\\/span\u003e mikemccand: hello\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:15&#93;\u003c\\/span\u003e ThetaPhi_: for me infra works normal\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:16&#93;\u003c\\/span\u003e mikemccand: hmmm\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:16&#93;\u003c\\/span\u003e ThetaPhi_: but maybe because i am on the euorpe svn\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:16&#93;\u003c\\/span\u003e mikemccand: you use the eu mirrors?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:16&#93;\u003c\\/span\u003e mikemccand: ok\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:16&#93;\u003c\\/span\u003e ThetaPhi_: but for jira i do not know\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:16&#93;\u003c\\/span\u003e mikemccand: jira is on\\/off for me now\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:16&#93;\u003c\\/span\u003e ThetaPhi_: do not think there is a mirror\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:17&#93;\u003c\\/span\u003e ThetaPhi_: \u003cspan class=\\\"error\\\"\u003e&#91;10:39&#93;\u003c\\/span\u003e mikemccand: do we ever call nextSeekTerm, unless AcceptStatus was XXX_AND_SEEK?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:17&#93;\u003c\\/span\u003e ThetaPhi_: no\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:18&#93;\u003c\\/span\u003e mikemccand: ok\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:18&#93;\u003c\\/span\u003e ThetaPhi_: and doSeek is always reset to false whenever a seek occured\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:19&#93;\u003c\\/span\u003e ThetaPhi_: the global doSeek is just for the YES_AND_SEEK case\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:19&#93;\u003c\\/span\u003e ThetaPhi_: because it exits the loop and returns the term\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:19&#93;\u003c\\/span\u003e ThetaPhi_: so on the next call to next() doSeek is true and we seek\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:20&#93;\u003c\\/span\u003e mikemccand: got it\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:21&#93;\u003c\\/span\u003e ThetaPhi_: an idea about the nextSeekTerm:\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:21&#93;\u003c\\/span\u003e ThetaPhi_: we add a protected setSeekTerm(TermRef)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:21&#93;\u003c\\/span\u003e ThetaPhi_: this sets a private var\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:22&#93;\u003c\\/span\u003e ThetaPhi_: accept can set this and return YES or no wahtever\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:22&#93;\u003c\\/span\u003e ThetaPhi_: in the case of END it is ignored\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:22&#93;\u003c\\/span\u003e ThetaPhi_: but when next() is then called again, if this internal seek varaible is != null it seeks, else it goes forward with next\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:22&#93;\u003c\\/span\u003e ThetaPhi_: and after seek it is set to null\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:23&#93;\u003c\\/span\u003e ThetaPhi_: and we could add an assert inside this method to check if only seeking forward\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:24&#93;\u003c\\/span\u003e ThetaPhi_: to inform implementors of errors\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:24&#93;\u003c\\/span\u003e ThetaPhi_: assert termComp.compare(seekTerm, term()) &gt; 0;\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:24&#93;\u003c\\/span\u003e mikemccand: why not simply return the optional seek term along w\\/ AcceptStatus?  it\'d require no additional methods, and makes it clear that seeking part of accepting. \u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:25&#93;\u003c\\/span\u003e mikemccand: ie the existince of new methods in the api (setSeekTerm, nextSeekTerm) enrich the api &#8211; make you wonder when you can call them.  eg can ctor call setSeekTerm?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:25&#93;\u003c\\/span\u003e ThetaPhi_: because accept status is an enum constant which is final, singleton and \u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:25&#93;\u003c\\/span\u003e ThetaPhi_: yes ctor can do it at the moment\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:25&#93;\u003c\\/span\u003e ThetaPhi_: its already there its only called setinitialseekterm\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:26&#93;\u003c\\/span\u003e ThetaPhi_: (see docs)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:26&#93;\u003c\\/span\u003e mikemccand: i mean make a new class (AcceptResult), like i described.  it contains an AcceptResult.Status (the enum), and a TermRef.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:26&#93;\u003c\\/span\u003e ThetaPhi_: the problem is lots of object creation\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:26&#93;\u003c\\/span\u003e mikemccand: there would be no object creation &#8211; we\'d reuse?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:26&#93;\u003c\\/span\u003e ThetaPhi_: in my opinion setSeekTerm is simplier to use\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:27&#93;\u003c\\/span\u003e ThetaPhi_: it would be the same like the reuse case\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:27&#93;\u003c\\/span\u003e ThetaPhi_: and setseekterm can also be used in ctor\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:27&#93;\u003c\\/span\u003e mikemccand: yeah the fact that ctor needs to set initial term does seem to require the extra method\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:28&#93;\u003c\\/span\u003e mikemccand: though i also don\'t like side-effect methods &#8211; you change the internal state of the class, vs returning the seek term\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:28&#93;\u003c\\/span\u003e mikemccand: ie it makes the api stateful, which except for the initial case, is overkill\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:29&#93;\u003c\\/span\u003e ThetaPhi_: its an iterator it always has an internal state\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:29&#93;\u003c\\/span\u003e ThetaPhi_: i understand your problem\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:29&#93;\u003c\\/span\u003e ThetaPhi_: you call in a method that should only accept something a method that changes state\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:30&#93;\u003c\\/span\u003e mikemccand: the internal state is handled by FTE; my subclass is mostly stateless, if i return the seek term\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:30&#93;\u003c\\/span\u003e ThetaPhi_: so you cannot call it from outside (which would not wrok, because it is protected)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:30&#93;\u003c\\/span\u003e ThetaPhi_: NRQ also has a state and also automaton\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:31&#93;\u003c\\/span\u003e ThetaPhi_: in NRQ it is the linkedlist with seek terms\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:31&#93;\u003c\\/span\u003e ThetaPhi_: in Automaton the nextString()\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:31&#93;\u003c\\/span\u003e mikemccand: right, they have their own state because of how they iterate.  it\'s just that seek term need not be stateful.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:32&#93;\u003c\\/span\u003e ThetaPhi_: i think we should ask robert, at the moment i would know how to change his code to support both cases\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:33&#93;\u003c\\/span\u003e mikemccand: in fact, instead of setInitialSeekTerm, could we have getInitialSeekTerm?  ie FTE would invoke that once on start\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:33&#93;\u003c\\/span\u003e mikemccand: ok \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:33&#93;\u003c\\/span\u003e mikemccand: automaton is scary\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:33&#93;\u003c\\/span\u003e mikemccand: and, powerful\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:33&#93;\u003c\\/span\u003e ThetaPhi_: the getInitialSeek term in the current api is hidden behind the iterator\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:34&#93;\u003c\\/span\u003e ThetaPhi_: setInitialSeekTerm for the ctor is just a convenience\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:34&#93;\u003c\\/span\u003e ThetaPhi_: to prevent subclasses like prefixtermsenum from overrideing and implementing the singleton itertor\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:34&#93;\u003c\\/span\u003e * mikemccand w\\/ getInitialSeekTerm, there is no sneaky shared state w\\/ FTE.  i mean, FTE keeps track of its state, and each subclass tracks its own state.  subclassing wouldn\'t even be necessary anymore &#8211; one could provdie a standonalone TermsEnumFilter, that just has getInitialSeekTerm and accept\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:34&#93;\u003c\\/span\u003e ThetaPhi_: (see docs)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:36&#93;\u003c\\/span\u003e mikemccand: in general I don\'t like subclassing APIs &#8211; it\'s a bigger surface area (how child works w\\/ parent, stateful methods, when can i call each method, etc.)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:36&#93;\u003c\\/span\u003e ThetaPhi_: we could remove that also in the current api\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:37&#93;\u003c\\/span\u003e ThetaPhi_: only abstract classes should be subclassable\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:37&#93;\u003c\\/span\u003e ThetaPhi_: thats asked very often\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:37&#93;\u003c\\/span\u003e mikemccand: gonna be a cold run this AM &#8211; 28F out there\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:37&#93;\u003c\\/span\u003e ThetaPhi_: \u003cb\u003ecalculating\u003c\\/b\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:37&#93;\u003c\\/span\u003e mikemccand: \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:37&#93;\u003c\\/span\u003e mikemccand: invert 32 + 9\\/5 * C\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:38&#93;\u003c\\/span\u003e ThetaPhi_: or ask google\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:38&#93;\u003c\\/span\u003e ThetaPhi_: -2.22 \\u00B0C \u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:39&#93;\u003c\\/span\u003e ThetaPhi_: (Link: \u003ca href=\\\"http:\\/\\/www.google.de\\/search?hl=de&amp;safe=off&amp;q=28+fahrenheit+in+celsius&amp;meta=&amp;aq=f&amp;oq=)http:\\/\\/www.google.de\\/search?hl=de&amp;safe=off&amp;q=28+fahrenheit+in+celsius&amp;meta=&amp;aq=f&amp;oq=\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.google.de\\/search?hl=de&amp;safe=off&amp;q=28+fahrenheit+in+celsius&amp;meta=&amp;aq=f&amp;oq=)http:\\/\\/www.google.de\\/search?hl=de&amp;safe=off&amp;q=28+fahrenheit+in+celsius&amp;meta=&amp;aq=f&amp;oq=\u003c\\/a\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:39&#93;\u003c\\/span\u003e mikemccand: if i jump in and see that, to use FTE i only have to implement to an interface (TermsEnumFilter) that has getInitialTerm\\/accept... I think that\'s more approachable than figuring out the relationship  (methods, state) to an abstract parent class\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:39&#93;\u003c\\/span\u003e mikemccand: nice\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:40&#93;\u003c\\/span\u003e mikemccand: ugh, zillions of conflicts on backporting thread safe spellchecker\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:40&#93;\u003c\\/span\u003e ThetaPhi_: if the abstract parent class makes all other methods final its the same\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:41&#93;\u003c\\/span\u003e ThetaPhi_: but ok, you could change MTQ to just return the interface\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:41&#93;\u003c\\/span\u003e mikemccand: not really the same &#8211; you have to define when each overridden method is allowed\\/supposed to invoke the methods from the parent\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:42&#93;\u003c\\/span\u003e mikemccand: once (if) we make the interaction stateless,we suddenly have the freedom to make it a separate interface...\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:43&#93;\u003c\\/span\u003e ThetaPhi_: you mean calling next() inside accept() -&gt; loops forever\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:43&#93;\u003c\\/span\u003e mikemccand: yeah \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/sad.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:43&#93;\u003c\\/span\u003e mikemccand: of course... that freedom of the orig FilteredTermEnum is what made NRQ sneakiness possible in the first place \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:44&#93;\u003c\\/span\u003e ThetaPhi_: (which was a hack, you have seen the comment: something like: this relys on how setEnum() works, if this changes in the superclass this enum will no longer work)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:45&#93;\u003c\\/span\u003e ThetaPhi_: this was a comment before i removed the recursion in one of this issues\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:45&#93;\u003c\\/span\u003e mikemccand: right &#8211; but it was the right hting to do at the time\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:45&#93;\u003c\\/span\u003e mikemccand: sure was tricky to undertsand \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:45&#93;\u003c\\/span\u003e ThetaPhi_: (ore remove the recursion, like it is now in trunk)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:45&#93;\u003c\\/span\u003e mikemccand: you were bound by FTE\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:45&#93;\u003c\\/span\u003e mikemccand: yes, that\'s better\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:45&#93;\u003c\\/span\u003e mikemccand: but i like separate interface best &#8211; it removes all shared state &#8211; one thing describes what\'s filtered, the other implements according to that\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:46&#93;\u003c\\/span\u003e mikemccand: then MTQ could almost simply accept a TermsEnum.  the only difference is difference() &#8211; ha\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:46&#93;\u003c\\/span\u003e mikemccand: it\'s only fuzzy that uses difference() right?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:46&#93;\u003c\\/span\u003e ThetaPhi_: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:46&#93;\u003c\\/span\u003e ThetaPhi_: i was thinking about that\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:47&#93;\u003c\\/span\u003e ThetaPhi_: because a empty prefix filter could simply return the termsenum\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:47&#93;\u003c\\/span\u003e mikemccand: ahh yes nice opto\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:47&#93;\u003c\\/span\u003e ThetaPhi_: PrefixQuery(\\\"\\\")\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:47&#93;\u003c\\/span\u003e ThetaPhi_: would match all documents that have at least any term\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:47&#93;\u003c\\/span\u003e mikemccand: actually how come contrib\\/queries\' TermsFilter isn\'t a query filter wrapper around an MTQ?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:47&#93;\u003c\\/span\u003e ThetaPhi_: in automaton we need this for the catch all .* case\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:47&#93;\u003c\\/span\u003e mikemccand: ahh\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:48&#93;\u003c\\/span\u003e ThetaPhi_: at the moment it generates a PrefixTermsEnum(\\\"\\\")\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:48&#93;\u003c\\/span\u003e mikemccand: so maybe AcceptResult has a float difference?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:48&#93;\u003c\\/span\u003e ThetaPhi_: which is slower than just returning the TermsEnum of the reader, just because of difference\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:49&#93;\u003c\\/span\u003e ThetaPhi_: because it calls startsWith for each term (which in fact does nothing because termref.length==0\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:49&#93;\u003c\\/span\u003e mikemccand: ugh\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:49&#93;\u003c\\/span\u003e ThetaPhi_: so not that bad\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:49&#93;\u003c\\/span\u003e mikemccand: much better to simple return .terms() for field.  or, rewrite to MatchAllDocs\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:49&#93;\u003c\\/span\u003e ThetaPhi_: or a termrangequery(null,null) (often used in solr)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:49&#93;\u003c\\/span\u003e ThetaPhi_: no\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:49&#93;\u003c\\/span\u003e ThetaPhi_: MatchAllDocs is different\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:50&#93;\u003c\\/span\u003e ThetaPhi_: because the Prefix(\\\"\\\") case only returns document that have at least one term of that field\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:50&#93;\u003c\\/span\u003e mikemccand: ahhh yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:50&#93;\u003c\\/span\u003e ThetaPhi_: this is needed for facetting i think in Solr\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:50&#93;\u003c\\/span\u003e ThetaPhi_: not sure\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:50&#93;\u003c\\/span\u003e mikemccand: got it\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:50&#93;\u003c\\/span\u003e ThetaPhi_: in NRQ its fast, it just enumerates all low-prec terms\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:51&#93;\u003c\\/span\u003e ThetaPhi_: 16 for precStep=4\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:51&#93;\u003c\\/span\u003e mikemccand: nice\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:51&#93;\u003c\\/span\u003e mikemccand: NRQ is a great step forward for lucene\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:51&#93;\u003c\\/span\u003e mikemccand: would be nice if MTQ could simply accept a TermsEnum\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:52&#93;\u003c\\/span\u003e mikemccand: problem is difference()\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:52&#93;\u003c\\/span\u003e ThetaPhi_: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:52&#93;\u003c\\/span\u003e ThetaPhi_: and is only used by fuzzy\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:52&#93;\u003c\\/span\u003e mikemccand: yes, annoying for just that one case\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:52&#93;\u003c\\/span\u003e mikemccand: contrib\'s TermsFilter really ought to be an MTQ\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:52&#93;\u003c\\/span\u003e ThetaPhi_: because robert asked for a alltermsenum, which is stupied\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:53&#93;\u003c\\/span\u003e mikemccand: yeah\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:53&#93;\u003c\\/span\u003e ThetaPhi_: i only said, user prefix(\\\"\\\") whoich is ok, the overhead is minimal, but in this case it would be zero\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:53&#93;\u003c\\/span\u003e mikemccand: we could allow MTQ to accept either a TersmsEnum, or, a TermsEnumFilter (this new stateless interface, with AcceptResult also having a float difference field)\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:53&#93;\u003c\\/span\u003e ThetaPhi_: aaaah\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:54&#93;\u003c\\/span\u003e ThetaPhi_: but that looks like attributesource\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:54&#93;\u003c\\/span\u003e ThetaPhi_: differenceattribute\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:54&#93;\u003c\\/span\u003e mikemccand: yeah that\'s true\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:54&#93;\u003c\\/span\u003e ThetaPhi_: termsenums are already with attributes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:54&#93;\u003c\\/span\u003e mikemccand: curious.  so then MTQ could accept only TermsEnum, but, ask for its attrs, and if that\'s non-null, as for differenceattr, and if htat\'s non null, use it\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:55&#93;\u003c\\/span\u003e ThetaPhi_: fuzzyenum just add this attribute\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:55&#93;\u003c\\/span\u003e mikemccand: i like that!\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:55&#93;\u003c\\/span\u003e ThetaPhi_: and fuzzyquery requests it\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:55&#93;\u003c\\/span\u003e mikemccand: and MTQ respects it too\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:55&#93;\u003c\\/span\u003e ThetaPhi_: and the default of this attribute is 1.0\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:55&#93;\u003c\\/span\u003e mikemccand: ye\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:55&#93;\u003c\\/span\u003e mikemccand: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:55&#93;\u003c\\/span\u003e ThetaPhi_: so mtq just asks always for this attribute in scoring boolean rewrite\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:56&#93;\u003c\\/span\u003e mikemccand: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:56&#93;\u003c\\/span\u003e mikemccand: and, MTQ is much simplified to accept a TermsEnum for its terms\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:56&#93;\u003c\\/span\u003e ThetaPhi_: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:56&#93;\u003c\\/span\u003e mikemccand: and we can make a stateless API for filtering a TermsEnum\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:57&#93;\u003c\\/span\u003e ThetaPhi_: by the way, I did not check ever&lt;ything in flex\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:57&#93;\u003c\\/span\u003e mikemccand: that\'s ok &#8211; it\'s an immense number of changes!\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:57&#93;\u003c\\/span\u003e ThetaPhi_: but if you wrap an enum, you must override attributes() to return the attributes of the delegate\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:57&#93;\u003c\\/span\u003e mikemccand: i still keep finding bugs in the emulation layers.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:57&#93;\u003c\\/span\u003e mikemccand: hmm you\'re right\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:58&#93;\u003c\\/span\u003e ThetaPhi_: so UnionTermsEnum or like so must override attributes() and call delegate.attributes()\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:58&#93;\u003c\\/span\u003e mikemccand: or, fuzzy query could be the only one that does htis\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:58&#93;\u003c\\/span\u003e ThetaPhi_: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:58&#93;\u003c\\/span\u003e ThetaPhi_: no\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:58&#93;\u003c\\/span\u003e ThetaPhi_: let it in MTQ\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:58&#93;\u003c\\/span\u003e ThetaPhi_: we yesterday talked, normally rewrite should be final in MTQ\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:58&#93;\u003c\\/span\u003e mikemccand: that sounds good\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:58&#93;\u003c\\/span\u003e ThetaPhi_: you should only change behaviour in getEnum\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:58&#93;\u003c\\/span\u003e mikemccand: ok\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:59&#93;\u003c\\/span\u003e ThetaPhi_: in trunk we currently rewrite WildCardQuery to PrefixQuery which is itsself an MTQ\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:59&#93;\u003c\\/span\u003e ThetaPhi_: totally useless\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:59&#93;\u003c\\/span\u003e ThetaPhi_: just return PrefixEnum in getEnum\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;11:59&#93;\u003c\\/span\u003e mikemccand: ahh right\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:00&#93;\u003c\\/span\u003e ThetaPhi_: in flex i changed\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:00&#93;\u003c\\/span\u003e ThetaPhi_: the problem are bw tests in trunk, because they check the rewritten thing, but we could simply remove the tests\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:01&#93;\u003c\\/span\u003e mikemccand: tests shouldn\'t check internals like that\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:01&#93;\u003c\\/span\u003e ThetaPhi_: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:01&#93;\u003c\\/span\u003e ThetaPhi_: or these checks should be marked\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:01&#93;\u003c\\/span\u003e mikemccand: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:01&#93;\u003c\\/span\u003e ThetaPhi_: in Junit4 with an annotation\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:01&#93;\u003c\\/span\u003e mikemccand: ahh what annotation?\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:01&#93;\u003c\\/span\u003e ThetaPhi_: and the bw tests only run tests without that annotation\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:02&#93;\u003c\\/span\u003e mikemccand: that sounds great\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:02&#93;\u003c\\/span\u003e ThetaPhi_: the problem may then still compilation\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:03&#93;\u003c\\/span\u003e ThetaPhi_: if it checks package protected fields and so on\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:03&#93;\u003c\\/span\u003e ThetaPhi_: brrr\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:03&#93;\u003c\\/span\u003e ThetaPhi_: we have such tests\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:03&#93;\u003c\\/span\u003e mikemccand: sigh.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:03&#93;\u003c\\/span\u003e mikemccand: yes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:03&#93;\u003c\\/span\u003e mikemccand: i remember committing them \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/wink.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:03&#93;\u003c\\/span\u003e *** mikemccand has left #lucene.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:03&#93;\u003c\\/span\u003e ThetaPhi_: you always have to remove them\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:22&#93;\u003c\\/span\u003e *** mikemccand has joined #lucene.\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:22&#93;\u003c\\/span\u003e mikemccand: sorry, dropped off\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:25&#93;\u003c\\/span\u003e ThetaPhi_: ok i said\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:25&#93;\u003c\\/span\u003e ThetaPhi_: i will try out a little bit\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:25&#93;\u003c\\/span\u003e ThetaPhi_: and post in the automaton\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:25&#93;\u003c\\/span\u003e mikemccand: ok\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:25&#93;\u003c\\/span\u003e ThetaPhi_: its hard to always generate both pacthes\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:26&#93;\u003c\\/span\u003e ThetaPhi_: when we are happy, i will post a patch to 2110 and then we commit\u003cbr\\/\u003e\\n\u003cspan class=\\\"error\\\"\u003e&#91;12:26&#93;\u003c\\/span\u003e ThetaPhi_: in automaton there is more special cases to test\u003c\\/p\u003e\u003c\\/blockquote\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786610_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786610_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 12:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T12:18:40+0000\'\u003e06\\/Dec\\/09 12:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    From our IRC chat between Mike and me: \\n \\n  &#91;10:19&#93;  ThetaPhi_: mike: any further comments for 2110? \\n &#91;10:19&#93;  mikemccand: am just trying to look at it &#8211; waiting on a sloooooow svn up. \\n &#91;10:19&#93;  ThetaPhi_: this out of order is not trivial and makes code for automaton and NRQ more complicated \\n &#91;10:19&#93;  mikemccand: the change is a great step forward \\n &#91;10:19&#93;  mikemccand: yeah forget it  \\n &#91;10:19&#93;  ThetaPhi_: yes \\n &#91;10:19&#93;  ThetaPhi_: you understood the problem \\n &#91;10:19&#93;  mikemccand: i had thought it was nearly free \\n &#91;10:19&#93;  mikemccand: i don\'t fully understand the problem \\n &#91;10:19&#93;  mikemccand: impossible to keep up with you!! \\n &#91;10:20&#93;  ThetaPhi_: when the underlying enum is exhausted (I was exhausted yesterday, too), it stops processing, even if there are more nextSeelkTerms \\n &#91;10:20&#93;  mikemccand: yes I saw your exhausted pun   \\n &#91;10:20&#93;  mikemccand: wait &#8211; if a TermsEnum becomes exhaused, you\'re unable to seek it again?  is that the issue? \\n &#91;10:20&#93;  ThetaPhi_: waht you could do is, that after the underlying enum is exhausted, that you call nextSeekTerm and reposition \\n &#91;10:21&#93;  ThetaPhi_: yes \\n &#91;10:21&#93;  ThetaPhi_: you could seek it \\n &#91;10:21&#93;  ThetaPhi_: and this worked at the beginning (first patch without the additional enum constants) \\n &#91;10:21&#93;  ThetaPhi_: what it did was: when the underlying enum was exhausted it simply called nextSeekTerm and seeked \\n &#91;10:22&#93;  mikemccand: so TermsEnum API allows seeks after next()\'ing to exhaustion, right?  (I think it should but maybe it\' doesn\'t somewhere?) \\n &#91;10:22&#93;  ThetaPhi_: which was ok \\n &#91;10:22&#93;  ThetaPhi_: mikemccand: your enums works perfect \\n &#91;10:22&#93;  ThetaPhi_: they can be seeked everytime even when exhausted \\n &#91;10:22&#93;  mikemccand: ok \\n &#91;10:23&#93;  ThetaPhi_: the problem is logic in filteredtermsenum \\n &#91;10:23&#93;  mikemccand: ok \\n &#91;10:23&#93;  ThetaPhi_: it gets very complicated when you want to support two things: \\n &#91;10:23&#93;  ThetaPhi_: a) seeking on request (NO_AND_SEEK, YES_AND_SEEK) \\n &#91;10:24&#93;  ThetaPhi_: b) and want to consume all nextSeekTerms() \\n &#91;10:24&#93;  ThetaPhi_: if somebody seeks after _AND_SEEK to e.g. the last term of the enum \\n &#91;10:24&#93;  ThetaPhi_: in the current impl it will read that term \\n &#91;10:25&#93;  ThetaPhi_: call termCompare and so on \\n &#91;10:25&#93;  ThetaPhi_: if this accepts the term or not accepts the term \\n &#91;10:25&#93;  ThetaPhi_: it will call next() on the underlying enum again \\n &#91;10:25&#93;  ThetaPhi_: which then returns null \\n &#91;10:26&#93;  ThetaPhi_: with the current patch it will then also end the filteredtermsenum \\n &#91;10:26&#93;  mikemccand: ok &#8211; so the termination logic inside FTE.next() got really hairy if on getting null from the actualEnum you had to consider going back for another seek term? \\n &#91;10:26&#93;  ThetaPhi_: yes \\n &#91;10:26&#93;  ThetaPhi_: i tried it yesterday \\n &#91;10:26&#93;  mikemccand: we certainly don\'t need to support thist oday \\n &#91;10:26&#93;  ThetaPhi_: and I had no good test \\n &#91;10:27&#93;  ThetaPhi_: yes exactly \\n &#91;10:27&#93;  mikemccand: if somehow this ever becomes needed then we add it then \\n &#91;10:27&#93;  mikemccand: the new FTE looks great \\n &#91;10:27&#93;  ThetaPhi_: the idea was to provide a param to nextSeekTerm which denotes if the underlying enum ended \\n &#91;10:27&#93;  mikemccand: NRQ is soooo much simpler   \\n &#91;10:28&#93;  ThetaPhi_: the idea was to call even on exit nextSeekTerm(true), where triue meant exhausted \\n &#91;10:28&#93;  mikemccand: i see &#8211; so it involved different API \\n &#91;10:28&#93;  ThetaPhi_: TEnums like NRQ or automaton only going forward then know, not to provide seek terms again \\n &#91;10:28&#93;  ThetaPhi_: this was important for Automaton not to fall into endless loops \\n &#91;10:29&#93;  mikemccand: this is hairy stuff   \\n &#91;10:29&#93;  ThetaPhi_: and good for NRQ to not provide any further terms \\n &#91;10:30&#93;  ThetaPhi_: when I tried to implement there was always a problem and you were not able to correctly define waht should happen then \\n &#91;10:30&#93;  mikemccand: how come the switch in FTE.next doesn\'t have \\\"case NO\\\" on the return from accept(term)? \\n &#91;10:31&#93;  ThetaPhi_: thats not needed it just falls through and loops to next term \\n &#91;10:31&#93;  ThetaPhi_: you could add it as NO: break; \\n &#91;10:31&#93;  * mikemccand ahh got it &#8211; maybe just add comment saying so \\n &#91;10:31&#93;  ThetaPhi_: good idea, will do \\n &#91;10:32&#93;  ThetaPhi_: the NO_AND_seek case is the same it just says doSeek = true \\n &#91;10:32&#93;  ThetaPhi_: and for yes it returns the term in both cases, but records doSeek for the next time next() is called \\n &#91;10:32&#93;  mikemccand: i wonder if we could simply add a seek term to AcceptStatus? \\n &#91;10:33&#93;  mikemccand: vs calling the separate nextSeekTerm method \\n &#91;10:33&#93;  ThetaPhi_: enum\'s contents are final \\n &#91;10:33&#93;  mikemccand: not sure it\'d be better... just wondering \\n &#91;10:33&#93;  ThetaPhi_: because each constant is a singleton, they should be unmodifiable \\n &#91;10:34&#93;  mikemccand: ie, fix AcceptStatus to be like TermsEnum.SeekResult \\n &#91;10:34&#93;  mikemccand: so it returns status, but also an optional seekTerm which if null means no seeking \\n &#91;10:34&#93;  ThetaPhi_: and how to do this, not with an enum constant \\n &#91;10:34&#93;  ThetaPhi_: because they are constants \\n &#91;10:35&#93;  ThetaPhi_: and createing a new object on each accept call seems not ideal \\n &#91;10:35&#93;  mikemccand: sorry, i was confused &#8211; SeekStatus used to be a class that had two attrs &#8211; a TermRef, and the enum; i simplified that a while ago \\n &#91;10:36&#93;  ThetaPhi_: aaaah \\n &#91;10:36&#93;  ThetaPhi_: now its an enum \\n &#91;10:36&#93;  ThetaPhi_: i do not think its a ood idea to return new objects \\n &#91;10:36&#93;  mikemccand: right.  for a while I had no TermsEnum.term() \\n &#91;10:36&#93;  mikemccand: the enums would reuse their status object \\n &#91;10:36&#93;  mikemccand: ie API would require that this is fine \\n &#91;10:37&#93;  ThetaPhi_: but enums are singleton \\n &#91;10:37&#93;  ThetaPhi_: for the whole JVM \\n &#91;10:37&#93;  mikemccand: if we did that... then we could go back to YES\\/NO\\/END, and, and seekTerm is then orthogonal \\n &#91;10:37&#93;  ThetaPhi_: ok \\n &#91;10:37&#93;  ThetaPhi_: so a protected setSeekTerm \\n &#91;10:38&#93;  mikemccand: we\'d make a new \\\"AcceptResult\\\" class.  has \\\"AcceptStatus status\\\" member, and also \\\"TermRef seekTerm\\\" \\n &#91;10:38&#93;  ThetaPhi_: then we are back at the state before, we should ask robert \\n &#91;10:38&#93;  mikemccand: ok \\n &#91;10:38&#93;  ThetaPhi_: for him the separation of accept and nextSeekTerm was good \\n &#91;10:38&#93;  mikemccand: ahh i see \\n &#91;10:39&#93;  ThetaPhi_: but he could do the calculation of the next sring in accept, too \\n &#91;10:39&#93;  mikemccand: though, can\'t he simply emulate?  ie, internally call a private nextSeekTerm, stick it on the returned AcceptResult, and return that? \\n &#91;10:39&#93;  mikemccand: right \\n &#91;10:39&#93;  ThetaPhi_: telephone... \\n &#91;10:39&#93;  mikemccand: do we ever call nextSeekTerm, unless AcceptStatus was XXX_AND_SEEK? \\n &#91;10:39&#93;  mikemccand: hah real world interrupts \\n &#91;10:40&#93;  ThetaPhi_: thats what is done currentl \\n &#91;10:40&#93;  ThetaPhi_: brb \\n &#91;10:41&#93;  mikemccand: man all of infra seems slow right now... jira giving me intermittent Internal Server Error... svn really slow \\n &#91;10:41&#93;  mikemccand: git is tempting \\n &#91;11:04&#93;  *** jwtoddii has joined #lucene. \\n &#91;11:15&#93;  *** jwtoddii has signed off IRC (). \\n &#91;11:15&#93;  ThetaPhi_: re \\n &#91;11:15&#93;  mikemccand: hello \\n &#91;11:15&#93;  ThetaPhi_: for me infra works normal \\n &#91;11:16&#93;  mikemccand: hmmm \\n &#91;11:16&#93;  ThetaPhi_: but maybe because i am on the euorpe svn \\n &#91;11:16&#93;  mikemccand: you use the eu mirrors? \\n &#91;11:16&#93;  mikemccand: ok \\n &#91;11:16&#93;  ThetaPhi_: but for jira i do not know \\n &#91;11:16&#93;  mikemccand: jira is on\\/off for me now \\n &#91;11:16&#93;  ThetaPhi_: do not think there is a mirror \\n &#91;11:17&#93;  ThetaPhi_:  &#91;10:39&#93;  mikemccand: do we ever call nextSeekTerm, unless AcceptStatus was XXX_AND_SEEK? \\n &#91;11:17&#93;  ThetaPhi_: no \\n &#91;11:18&#93;  mikemccand: ok \\n &#91;11:18&#93;  ThetaPhi_: and doSeek is always reset to false whenever a seek occured \\n &#91;11:19&#93;  ThetaPhi_: the global doSeek is just for the YES_AND_SEEK case \\n &#91;11:19&#93;  ThetaPhi_: because it exits the loop and returns the term \\n &#91;11:19&#93;  ThetaPhi_: so on the next call to next() doSeek is true and we seek \\n &#91;11:20&#93;  mikemccand: got it \\n &#91;11:21&#93;  ThetaPhi_: an idea about the nextSeekTerm: \\n &#91;11:21&#93;  ThetaPhi_: we add a protected setSeekTerm(TermRef) \\n &#91;11:21&#93;  ThetaPhi_: this sets a private var \\n &#91;11:22&#93;  ThetaPhi_: accept can set this and return YES or no wahtever \\n &#91;11:22&#93;  ThetaPhi_: in the case of END it is ignored \\n &#91;11:22&#93;  ThetaPhi_: but when next() is then called again, if this internal seek varaible is != null it seeks, else it goes forward with next \\n &#91;11:22&#93;  ThetaPhi_: and after seek it is set to null \\n &#91;11:23&#93;  ThetaPhi_: and we could add an assert inside this method to check if only seeking forward \\n &#91;11:24&#93;  ThetaPhi_: to inform implementors of errors \\n &#91;11:24&#93;  ThetaPhi_: assert termComp.compare(seekTerm, term()) &gt; 0; \\n &#91;11:24&#93;  mikemccand: why not simply return the optional seek term along w\\/ AcceptStatus?  it\'d require no additional methods, and makes it clear that seeking part of accepting.  \\n &#91;11:25&#93;  mikemccand: ie the existince of new methods in the api (setSeekTerm, nextSeekTerm) enrich the api &#8211; make you wonder when you can call them.  eg can ctor call setSeekTerm? \\n &#91;11:25&#93;  ThetaPhi_: because accept status is an enum constant which is final, singleton and  \\n &#91;11:25&#93;  ThetaPhi_: yes ctor can do it at the moment \\n &#91;11:25&#93;  ThetaPhi_: its already there its only called setinitialseekterm \\n &#91;11:26&#93;  ThetaPhi_: (see docs) \\n &#91;11:26&#93;  mikemccand: i mean make a new class (AcceptResult), like i described.  it contains an AcceptResult.Status (the enum), and a TermRef. \\n &#91;11:26&#93;  ThetaPhi_: the problem is lots of object creation \\n &#91;11:26&#93;  mikemccand: there would be no object creation &#8211; we\'d reuse? \\n &#91;11:26&#93;  ThetaPhi_: in my opinion setSeekTerm is simplier to use \\n &#91;11:27&#93;  ThetaPhi_: it would be the same like the reuse case \\n &#91;11:27&#93;  ThetaPhi_: and setseekterm can also be used in ctor \\n &#91;11:27&#93;  mikemccand: yeah the fact that ctor needs to set initial term does seem to require the extra method \\n &#91;11:28&#93;  mikemccand: though i also don\'t like side-effect methods &#8211; you change the internal state of the class, vs returning the seek term \\n &#91;11:28&#93;  mikemccand: ie it makes the api stateful, which except for the initial case, is overkill \\n &#91;11:29&#93;  ThetaPhi_: its an iterator it always has an internal state \\n &#91;11:29&#93;  ThetaPhi_: i understand your problem \\n &#91;11:29&#93;  ThetaPhi_: you call in a method that should only accept something a method that changes state \\n &#91;11:30&#93;  mikemccand: the internal state is handled by FTE; my subclass is mostly stateless, if i return the seek term \\n &#91;11:30&#93;  ThetaPhi_: so you cannot call it from outside (which would not wrok, because it is protected) \\n &#91;11:30&#93;  ThetaPhi_: NRQ also has a state and also automaton \\n &#91;11:31&#93;  ThetaPhi_: in NRQ it is the linkedlist with seek terms \\n &#91;11:31&#93;  ThetaPhi_: in Automaton the nextString() \\n &#91;11:31&#93;  mikemccand: right, they have their own state because of how they iterate.  it\'s just that seek term need not be stateful. \\n &#91;11:32&#93;  ThetaPhi_: i think we should ask robert, at the moment i would know how to change his code to support both cases \\n &#91;11:33&#93;  mikemccand: in fact, instead of setInitialSeekTerm, could we have getInitialSeekTerm?  ie FTE would invoke that once on start \\n &#91;11:33&#93;  mikemccand: ok   \\n &#91;11:33&#93;  mikemccand: automaton is scary \\n &#91;11:33&#93;  mikemccand: and, powerful \\n &#91;11:33&#93;  ThetaPhi_: the getInitialSeek term in the current api is hidden behind the iterator \\n &#91;11:34&#93;  ThetaPhi_: setInitialSeekTerm for the ctor is just a convenience \\n &#91;11:34&#93;  ThetaPhi_: to prevent subclasses like prefixtermsenum from overrideing and implementing the singleton itertor \\n &#91;11:34&#93;  * mikemccand w\\/ getInitialSeekTerm, there is no sneaky shared state w\\/ FTE.  i mean, FTE keeps track of its state, and each subclass tracks its own state.  subclassing wouldn\'t even be necessary anymore &#8211; one could provdie a standonalone TermsEnumFilter, that just has getInitialSeekTerm and accept \\n &#91;11:34&#93;  ThetaPhi_: (see docs) \\n &#91;11:36&#93;  mikemccand: in general I don\'t like subclassing APIs &#8211; it\'s a bigger surface area (how child works w\\/ parent, stateful methods, when can i call each method, etc.) \\n &#91;11:36&#93;  ThetaPhi_: we could remove that also in the current api \\n &#91;11:37&#93;  ThetaPhi_: only abstract classes should be subclassable \\n &#91;11:37&#93;  ThetaPhi_: thats asked very often \\n &#91;11:37&#93;  mikemccand: gonna be a cold run this AM &#8211; 28F out there \\n &#91;11:37&#93;  ThetaPhi_:  calculating  \\n &#91;11:37&#93;  mikemccand:   \\n &#91;11:37&#93;  mikemccand: invert 32 + 9\\/5 * C \\n &#91;11:38&#93;  ThetaPhi_: or ask google \\n &#91;11:38&#93;  ThetaPhi_: -2.22 \\u00B0C  \\n &#91;11:39&#93;  ThetaPhi_: (Link:  http:\\/\\/www.google.de\\/search?hl=de&amp;safe=off&amp;q=28+fahrenheit+in+celsius&amp;meta=&amp;aq=f&amp;oq=)http:\\/\\/www.google.de\\/search?hl=de&amp;safe=off&amp;q=28+fahrenheit+in+celsius&amp;meta=&amp;aq=f&amp;oq=  \\n &#91;11:39&#93;  mikemccand: if i jump in and see that, to use FTE i only have to implement to an interface (TermsEnumFilter) that has getInitialTerm\\/accept... I think that\'s more approachable than figuring out the relationship  (methods, state) to an abstract parent class \\n &#91;11:39&#93;  mikemccand: nice \\n &#91;11:40&#93;  mikemccand: ugh, zillions of conflicts on backporting thread safe spellchecker \\n &#91;11:40&#93;  ThetaPhi_: if the abstract parent class makes all other methods final its the same \\n &#91;11:41&#93;  ThetaPhi_: but ok, you could change MTQ to just return the interface \\n &#91;11:41&#93;  mikemccand: not really the same &#8211; you have to define when each overridden method is allowed\\/supposed to invoke the methods from the parent \\n &#91;11:42&#93;  mikemccand: once (if) we make the interaction stateless,we suddenly have the freedom to make it a separate interface... \\n &#91;11:43&#93;  ThetaPhi_: you mean calling next() inside accept() -&gt; loops forever \\n &#91;11:43&#93;  mikemccand: yeah   \\n &#91;11:43&#93;  mikemccand: of course... that freedom of the orig FilteredTermEnum is what made NRQ sneakiness possible in the first place   \\n &#91;11:44&#93;  ThetaPhi_: (which was a hack, you have seen the comment: something like: this relys on how setEnum() works, if this changes in the superclass this enum will no longer work) \\n &#91;11:45&#93;  ThetaPhi_: this was a comment before i removed the recursion in one of this issues \\n &#91;11:45&#93;  mikemccand: right &#8211; but it was the right hting to do at the time \\n &#91;11:45&#93;  mikemccand: sure was tricky to undertsand   \\n &#91;11:45&#93;  ThetaPhi_: (ore remove the recursion, like it is now in trunk) \\n &#91;11:45&#93;  mikemccand: you were bound by FTE \\n &#91;11:45&#93;  mikemccand: yes, that\'s better \\n &#91;11:45&#93;  mikemccand: but i like separate interface best &#8211; it removes all shared state &#8211; one thing describes what\'s filtered, the other implements according to that \\n &#91;11:46&#93;  mikemccand: then MTQ could almost simply accept a TermsEnum.  the only difference is difference() &#8211; ha \\n &#91;11:46&#93;  mikemccand: it\'s only fuzzy that uses difference() right? \\n &#91;11:46&#93;  ThetaPhi_: yes \\n &#91;11:46&#93;  ThetaPhi_: i was thinking about that \\n &#91;11:47&#93;  ThetaPhi_: because a empty prefix filter could simply return the termsenum \\n &#91;11:47&#93;  mikemccand: ahh yes nice opto \\n &#91;11:47&#93;  ThetaPhi_: PrefixQuery(\\\"\\\") \\n &#91;11:47&#93;  ThetaPhi_: would match all documents that have at least any term \\n &#91;11:47&#93;  mikemccand: actually how come contrib\\/queries\' TermsFilter isn\'t a query filter wrapper around an MTQ? \\n &#91;11:47&#93;  ThetaPhi_: in automaton we need this for the catch all .* case \\n &#91;11:47&#93;  mikemccand: ahh \\n &#91;11:48&#93;  ThetaPhi_: at the moment it generates a PrefixTermsEnum(\\\"\\\") \\n &#91;11:48&#93;  mikemccand: so maybe AcceptResult has a float difference? \\n &#91;11:48&#93;  ThetaPhi_: which is slower than just returning the TermsEnum of the reader, just because of difference \\n &#91;11:49&#93;  ThetaPhi_: because it calls startsWith for each term (which in fact does nothing because termref.length==0 \\n &#91;11:49&#93;  mikemccand: ugh \\n &#91;11:49&#93;  ThetaPhi_: so not that bad \\n &#91;11:49&#93;  mikemccand: much better to simple return .terms() for field.  or, rewrite to MatchAllDocs \\n &#91;11:49&#93;  ThetaPhi_: or a termrangequery(null,null) (often used in solr) \\n &#91;11:49&#93;  ThetaPhi_: no \\n &#91;11:49&#93;  ThetaPhi_: MatchAllDocs is different \\n &#91;11:50&#93;  ThetaPhi_: because the Prefix(\\\"\\\") case only returns document that have at least one term of that field \\n &#91;11:50&#93;  mikemccand: ahhh yes \\n &#91;11:50&#93;  ThetaPhi_: this is needed for facetting i think in Solr \\n &#91;11:50&#93;  ThetaPhi_: not sure \\n &#91;11:50&#93;  mikemccand: got it \\n &#91;11:50&#93;  ThetaPhi_: in NRQ its fast, it just enumerates all low-prec terms \\n &#91;11:51&#93;  ThetaPhi_: 16 for precStep=4 \\n &#91;11:51&#93;  mikemccand: nice \\n &#91;11:51&#93;  mikemccand: NRQ is a great step forward for lucene \\n &#91;11:51&#93;  mikemccand: would be nice if MTQ could simply accept a TermsEnum \\n &#91;11:52&#93;  mikemccand: problem is difference() \\n &#91;11:52&#93;  ThetaPhi_: yes \\n &#91;11:52&#93;  ThetaPhi_: and is only used by fuzzy \\n &#91;11:52&#93;  mikemccand: yes, annoying for just that one case \\n &#91;11:52&#93;  mikemccand: contrib\'s TermsFilter really ought to be an MTQ \\n &#91;11:52&#93;  ThetaPhi_: because robert asked for a alltermsenum, which is stupied \\n &#91;11:53&#93;  mikemccand: yeah \\n &#91;11:53&#93;  ThetaPhi_: i only said, user prefix(\\\"\\\") whoich is ok, the overhead is minimal, but in this case it would be zero \\n &#91;11:53&#93;  mikemccand: we could allow MTQ to accept either a TersmsEnum, or, a TermsEnumFilter (this new stateless interface, with AcceptResult also having a float difference field) \\n &#91;11:53&#93;  ThetaPhi_: aaaah \\n &#91;11:54&#93;  ThetaPhi_: but that looks like attributesource \\n &#91;11:54&#93;  ThetaPhi_: differenceattribute \\n &#91;11:54&#93;  mikemccand: yeah that\'s true \\n &#91;11:54&#93;  ThetaPhi_: termsenums are already with attributes \\n &#91;11:54&#93;  mikemccand: curious.  so then MTQ could accept only TermsEnum, but, ask for its attrs, and if that\'s non-null, as for differenceattr, and if htat\'s non null, use it \\n &#91;11:55&#93;  ThetaPhi_: fuzzyenum just add this attribute \\n &#91;11:55&#93;  mikemccand: i like that! \\n &#91;11:55&#93;  ThetaPhi_: and fuzzyquery requests it \\n &#91;11:55&#93;  mikemccand: and MTQ respects it too \\n &#91;11:55&#93;  ThetaPhi_: and the default of this attribute is 1.0 \\n &#91;11:55&#93;  mikemccand: ye \\n &#91;11:55&#93;  mikemccand: yes \\n &#91;11:55&#93;  ThetaPhi_: so mtq just asks always for this attribute in scoring boolean rewrite \\n &#91;11:56&#93;  mikemccand: yes \\n &#91;11:56&#93;  mikemccand: and, MTQ is much simplified to accept a TermsEnum for its terms \\n &#91;11:56&#93;  ThetaPhi_: yes \\n &#91;11:56&#93;  mikemccand: and we can make a stateless API for filtering a TermsEnum \\n &#91;11:57&#93;  ThetaPhi_: by the way, I did not check ever&lt;ything in flex \\n &#91;11:57&#93;  mikemccand: that\'s ok &#8211; it\'s an immense number of changes! \\n &#91;11:57&#93;  ThetaPhi_: but if you wrap an enum, you must override attributes() to return the attributes of the delegate \\n &#91;11:57&#93;  mikemccand: i still keep finding bugs in the emulation layers. \\n &#91;11:57&#93;  mikemccand: hmm you\'re right \\n &#91;11:58&#93;  ThetaPhi_: so UnionTermsEnum or like so must override attributes() and call delegate.attributes() \\n &#91;11:58&#93;  mikemccand: or, fuzzy query could be the only one that does htis \\n &#91;11:58&#93;  ThetaPhi_: yes \\n &#91;11:58&#93;  ThetaPhi_: no \\n &#91;11:58&#93;  ThetaPhi_: let it in MTQ \\n &#91;11:58&#93;  ThetaPhi_: we yesterday talked, normally rewrite should be final in MTQ \\n &#91;11:58&#93;  mikemccand: that sounds good \\n &#91;11:58&#93;  ThetaPhi_: you should only change behaviour in getEnum \\n &#91;11:58&#93;  mikemccand: ok \\n &#91;11:59&#93;  ThetaPhi_: in trunk we currently rewrite WildCardQuery to PrefixQuery which is itsself an MTQ \\n &#91;11:59&#93;  ThetaPhi_: totally useless \\n &#91;11:59&#93;  ThetaPhi_: just return PrefixEnum in getEnum \\n &#91;11:59&#93;  mikemccand: ahh right \\n &#91;12:00&#93;  ThetaPhi_: in flex i changed \\n &#91;12:00&#93;  ThetaPhi_: the problem are bw tests in trunk, because they check the rewritten thing, but we could simply remove the tests \\n &#91;12:01&#93;  mikemccand: tests shouldn\'t check internals like that \\n &#91;12:01&#93;  ThetaPhi_: yes \\n &#91;12:01&#93;  ThetaPhi_: or these checks should be marked \\n &#91;12:01&#93;  mikemccand: yes \\n &#91;12:01&#93;  ThetaPhi_: in Junit4 with an annotation \\n &#91;12:01&#93;  mikemccand: ahh what annotation? \\n &#91;12:01&#93;  ThetaPhi_: and the bw tests only run tests without that annotation \\n &#91;12:02&#93;  mikemccand: that sounds great \\n &#91;12:02&#93;  ThetaPhi_: the problem may then still compilation \\n &#91;12:03&#93;  ThetaPhi_: if it checks package protected fields and so on \\n &#91;12:03&#93;  ThetaPhi_: brrr \\n &#91;12:03&#93;  ThetaPhi_: we have such tests \\n &#91;12:03&#93;  mikemccand: sigh. \\n &#91;12:03&#93;  mikemccand: yes \\n &#91;12:03&#93;  mikemccand: i remember committing them   \\n &#91;12:03&#93;  *** mikemccand has left #lucene. \\n &#91;12:03&#93;  ThetaPhi_: you always have to remove them \\n &#91;12:22&#93;  *** mikemccand has joined #lucene. \\n &#91;12:22&#93;  mikemccand: sorry, dropped off \\n &#91;12:25&#93;  ThetaPhi_: ok i said \\n &#91;12:25&#93;  ThetaPhi_: i will try out a little bit \\n &#91;12:25&#93;  ThetaPhi_: and post in the automaton \\n &#91;12:25&#93;  mikemccand: ok \\n &#91;12:25&#93;  ThetaPhi_: its hard to always generate both pacthes \\n &#91;12:26&#93;  ThetaPhi_: when we are happy, i will post a patch to 2110 and then we commit \\n &#91;12:26&#93;  ThetaPhi_: in automaton there is more special cases to test               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786613\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786613&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786613\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_12786613_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786613_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 12:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T12:39:07+0000\'\u003e06\\/Dec\\/09 12:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHey guys, in my opinion it would make it easier if we could somehow iterate in the flex branch under this issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eDo we really need a monster patch right now that is 100% perfect or can we exploit having this branch available to make discussions and review easier?\u003c\\/p\u003e\\n\\n\u003cp\u003eFor example, it seems everyone agrees the current patch here is a good \\\"step forward\\\".\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"rcmuir\\\" id=\\\"commentauthor_12786613_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=rcmuir\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"rcmuir\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Robert Muir\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786613_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 12:39\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T12:39:07+0000\'\u003e06\\/Dec\\/09 12:39\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hey guys, in my opinion it would make it easier if we could somehow iterate in the flex branch under this issue. \\n\\n Do we really need a monster patch right now that is 100% perfect or can we exploit having this branch available to make discussions and review easier? \\n\\n For example, it seems everyone agrees the current patch here is a good \\\"step forward\\\".              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786660\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786660&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786660\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786660_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786660_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 17:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T17:47:01+0000\'\u003e06\\/Dec\\/09 17:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNew patch that implements the Attributes implementation to power scoring BooleanQuery searches. It changes:\u003c\\/p\u003e\\n\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eMTQ.getTermsEnum now returns TermsEnum no longer a filtered one\u003c\\/li\u003e\\n\\t\u003cli\u003eAs in flex, MTQ can only work on one field (because TermsEnum is limited to one Field), it gets a getField() method (highlighter is happy) and a ctor to set this final field (protected). Removed all thoise methods from sub classes. Old classes that still use TermEnum and call the deprec default ctor, still work (because the field is returned in the FilteredTermEnum), but highligter gots no field then (null). Whne BW is removed, highlighter do not need to use FakeIndexReader anymore.\u003c\\/li\u003e\\n\\t\u003cli\u003eWildcardQuery\\/PrefixQuery\\/TermRangeQuery was optimized to no longer rewrite, but just return the correct enum in getEnum\\/getTermsEnum(). The special cases for these queries are match all (directly return the enum from reader - new!!!, nothing EmptyTermsEnum, or SingleTermsEnum)\u003c\\/li\u003e\\n\\t\u003cli\u003eFixed Highlighter for MTQ.getField()\u003c\\/li\u003e\\n\\t\u003cli\u003eFuzzyQuery now uses an attribute for the term difference: MTQ.TermDifferenceAttribute. For scoring booolean rewrite it is added by the consumer and keeps 1 per default, but fuzzy enum also adds it in its ctor and sets in accept()). Also the PQ boolean rewrite mode is now a RewriteMode.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI think thats all. Happy reviewing.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786660_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786660_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 17:47\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T17:47:01+0000\'\u003e06\\/Dec\\/09 17:47\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    New patch that implements the Attributes implementation to power scoring BooleanQuery searches. It changes: \\n\\n \\n\\t MTQ.getTermsEnum now returns TermsEnum no longer a filtered one \\n\\t As in flex, MTQ can only work on one field (because TermsEnum is limited to one Field), it gets a getField() method (highlighter is happy) and a ctor to set this final field (protected). Removed all thoise methods from sub classes. Old classes that still use TermEnum and call the deprec default ctor, still work (because the field is returned in the FilteredTermEnum), but highligter gots no field then (null). Whne BW is removed, highlighter do not need to use FakeIndexReader anymore. \\n\\t WildcardQuery\\/PrefixQuery\\/TermRangeQuery was optimized to no longer rewrite, but just return the correct enum in getEnum\\/getTermsEnum(). The special cases for these queries are match all (directly return the enum from reader - new!!!, nothing EmptyTermsEnum, or SingleTermsEnum) \\n\\t Fixed Highlighter for MTQ.getField() \\n\\t FuzzyQuery now uses an attribute for the term difference: MTQ.TermDifferenceAttribute. For scoring booolean rewrite it is added by the consumer and keeps 1 per default, but fuzzy enum also adds it in its ctor and sets in accept()). Also the PQ boolean rewrite mode is now a RewriteMode. \\n \\n\\n\\n I think thats all. Happy reviewing.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786663\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786663&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786663\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12786663_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786663_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 18:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T18:08:14+0000\'\u003e06\\/Dec\\/09 18:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003ePatch looks good Uwe &#8211; just TestWildcard.testPrefixTerm, on back-compat tests, that\'s failing.  This is a nice simplification of MTQs...\u003c\\/p\u003e\\n\\n\u003cp\u003eI\'m wondering if we can further simplify the \\\"seek\\\" case in FilteredTermsEnum so that it\'s not a 2 step process (FTE.accept returns YES|NO_AND_SEEK, then, FTE.next calls nextSeekTerm), ie instead accept would return the new seek term in the returned status.  This would also make the interaction between FTE and its subclass stateless.  But let\'s take that up under a separate issue.  I think this one is ready to go into flex branch?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"mikemccand\\\" id=\\\"commentauthor_12786663_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=mikemccand\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"mikemccand\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Michael McCandless\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786663_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 18:08\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T18:08:14+0000\'\u003e06\\/Dec\\/09 18:08\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Patch looks good Uwe &#8211; just TestWildcard.testPrefixTerm, on back-compat tests, that\'s failing.  This is a nice simplification of MTQs... \\n\\n I\'m wondering if we can further simplify the \\\"seek\\\" case in FilteredTermsEnum so that it\'s not a 2 step process (FTE.accept returns YES|NO_AND_SEEK, then, FTE.next calls nextSeekTerm), ie instead accept would return the new seek term in the returned status.  This would also make the interaction between FTE and its subclass stateless.  But let\'s take that up under a separate issue.  I think this one is ready to go into flex branch?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786671\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786671&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786671\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786671_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786671_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 19:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T19:01:30+0000\'\u003e06\\/Dec\\/09 19:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eNew patch:\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ebetter error message in NPE\u003c\\/li\u003e\\n\\t\u003cli\u003echange TermDifferenceAttribute to BoostAttribute and also its method names.\u003c\\/li\u003e\\n\\t\u003cli\u003eadded Javadocs to FilteredTermEnum to deprec difference and explian that you should use BoostAttribute\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003eI think this is committable \u003cimg class=\\\"emoticon\\\" src=\\\"\\/jira\\/images\\/icons\\/emoticons\\/smile.png\\\" height=\\\"16\\\" width=\\\"16\\\" align=\\\"absmiddle\\\" alt=\\\"\\\" border=\\\"0\\\"\\/\u003e\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786671_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786671_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 19:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T19:01:30+0000\'\u003e06\\/Dec\\/09 19:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    New patch: \\n \\n\\t better error message in NPE \\n\\t change TermDifferenceAttribute to BoostAttribute and also its method names. \\n\\t added Javadocs to FilteredTermEnum to deprec difference and explian that you should use BoostAttribute \\n \\n\\n\\n I think this is committable                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786705\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786705&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786705\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786705_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786705_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 21:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T21:16:52+0000\'\u003e06\\/Dec\\/09 21:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI\'ll commit this soon after I added some javadocs to BoostAttribute.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786705_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786705_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 21:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T21:16:52+0000\'\u003e06\\/Dec\\/09 21:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I\'ll commit this soon after I added some javadocs to BoostAttribute.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786709\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786709&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786709\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786709_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786709_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 21:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T21:32:39+0000\'\u003e06\\/Dec\\/09 21:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted revision: 887779\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786709_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786709_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 21:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T21:32:39+0000\'\u003e06\\/Dec\\/09 21:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed revision: 887779              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12786717\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12786717&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12786717\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786717_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786717_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T22:02:30+0000\'\u003e06\\/Dec\\/09 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eI forgot: Thank you all, Mike, Robert, Mark for all your suggestions in chat!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12786717_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12786717_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'06\\/Dec\\/09 22:02\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-06T22:02:30+0000\'\u003e06\\/Dec\\/09 22:02\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    I forgot: Thank you all, Mike, Robert, Mark for all your suggestions in chat!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12787401\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/LUCENE-2110?focusedCommentId=12787401&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12787401\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12787401_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12787401_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Dec\\/09 10:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-08T10:40:32+0000\'\u003e08\\/Dec\\/09 10:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Uwe Schindler - 08\\/Dec\\/09 10:42\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere a small update that changed nextSeekTerm to also provide the current TermRef. It will be null on first call. This removes the ugly if (unitialized) code in Automaton.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlso the delegate enum is now private, as its state should be unchangeable by subclasses.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will now work on a better approach with only accept using an extended AcceptStatus with next seek term). The current patch will now be committed.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"thetaphi\\\" id=\\\"commentauthor_12787401_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=thetaphi\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"thetaphi\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Uwe Schindler\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12787401_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'08\\/Dec\\/09 10:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2009-12-08T10:40:32+0000\'\u003e08\\/Dec\\/09 10:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Uwe Schindler - 08\\/Dec\\/09 10:42\\\"\u003eedited\u003c\\/span\u003e                   Here a small update that changed nextSeekTerm to also provide the current TermRef. It will be null on first call. This removes the ugly if (unitialized) code in Automaton. \\n\\n Also the delegate enum is now private, as its state should be unchangeable by subclasses. \\n\\n I will now work on a better approach with only accept using an extended AcceptStatus with next seek term). The current patch will now be committed.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310110";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310110&amp;avatarId=10061\\\" alt=\\\"Lucene - Core\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/LUCENE\\/summary\\\" title=\\\"Lucene - Core\\\"\u003eLucene - Core\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/LUCENE?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/-juyfor/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1516202841007"> 
    <input type="hidden" title="jira.request.server.time" value="336"> 
    <input type="hidden" title="jira.request.id" value="927x7692976x7"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="8"> 
    <input type="hidden" title="db.reads.time.in.ms" value="38"> 
    <input type="hidden" title="db.conns.time.in.ms" value="46"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 927x7692976x7
	          REQUEST TIMESTAMP : [17/Jan/2018:15:27:21 +0000]
	               REQUEST TIME : 0.3360
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 8

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=23, elapsedTotal=38565505, elapsedMin=430725, elapsedMax=16914300, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=27, elapsedTotal=46036531, elapsedMin=456857, elapsedMax=17033344, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>