<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
  <meta name="application-name" content="JIRA" data-name="jira" data-version="7.6.3">
  <meta name="ajs-viewissue-use-history-api" content="false"> 
  <meta name="ajs-jira-base-url" content="https://issues.apache.org/jira"> 
  <meta name="ajs-serverRenderedViewIssue" content="true"> 
  <meta name="ajs-dev-mode" content="false"> 
  <meta name="ajs-context-path" content="/jira"> 
  <meta name="ajs-version-number" content="7.6.3"> 
  <meta name="ajs-build-number" content="76005"> 
  <meta name="ajs-is-beta" content="false"> 
  <meta name="ajs-is-rc" content="false"> 
  <meta name="ajs-is-snapshot" content="false"> 
  <meta name="ajs-is-milestone" content="false"> 
  <meta name="ajs-remote-user" content=""> 
  <meta name="ajs-remote-user-fullname" content=""> 
  <meta name="ajs-user-locale" content="en_UK"> 
  <meta name="ajs-user-locale-group-separator" content=","> 
  <meta name="ajs-app-title" content="ASF JIRA"> 
  <meta name="ajs-keyboard-shortcuts-enabled" content="true"> 
  <meta name="ajs-keyboard-accesskey-modifier" content="Ctrl+Alt"> 
  <meta name="ajs-enabled-dark-features" content="[&quot;com.atlassian.jira.agile.darkfeature.editable.detailsview&quot;,&quot;nps.survey.inline.dialog&quot;,&quot;com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled&quot;,&quot;jira.plugin.devstatus.phasetwo&quot;,&quot;jira.frother.reporter.field&quot;,&quot;atlassian.rest.xsrf.legacy.enabled&quot;,&quot;jira.issue.status.lozenge&quot;,&quot;com.atlassian.jira.config.BIG_PIPE&quot;,&quot;com.atlassian.jira.projects.issuenavigator&quot;,&quot;com.atlassian.jira.config.PDL&quot;,&quot;jira.plugin.devstatus.phasetwo.enabled&quot;,&quot;atlassian.aui.raphael.disabled&quot;,&quot;app-switcher.new&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.projects.ProjectCentricNavigation.Switch&quot;,&quot;sd.internal.base.off.thread.on.completion.events.enabled&quot;,&quot;jira.onboarding.cyoa&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.enabled&quot;,&quot;sd.slavalue.record.updated.date.enabled&quot;,&quot;com.atlassian.jira.config.ProjectConfig.MENU&quot;,&quot;com.atlassian.jira.projects.sidebar.DEFER_RESOURCES&quot;,&quot;com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled&quot;,&quot;com.atlassian.jira.agile.darkfeature.sprint.goal.enabled&quot;,&quot;jira.zdu.admin-updates-ui&quot;,&quot;jira.zdu.jmx-monitoring&quot;,&quot;sd.sla.improved.rendering.enabled&quot;,&quot;sd.canned.responses.enabled&quot;,&quot;sd.new.settings.sidebar.location.disabled&quot;,&quot;jira.zdu.cluster-upgrade-state&quot;,&quot;com.atlassian.jira.agile.darkfeature.splitissue&quot;,&quot;com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED&quot;,&quot;com.atlassian.feedback.feedback-button-move-to-header-enable&quot;,&quot;jira.export.csv.enabled&quot;]"> 
  <meta name="ajs-in-admin-mode" content="false"> 
  <meta name="ajs-is-sysadmin" content="false"> 
  <meta name="ajs-is-admin" content="false"> 
  <meta name="ajs-outgoing-mail-enabled" content="true"> 
  <meta name="ajs-date-relativize" content="true"> 
  <meta name="ajs-date-time" content="HH:mm"> 
  <meta name="ajs-date-day" content="EEEE HH:mm"> 
  <meta name="ajs-date-dmy" content="dd/MMM/yy"> 
  <meta name="ajs-date-complete" content="dd/MMM/yy HH:mm"> 
  <script type="text/javascript">var AJS=AJS||{};AJS.debug=true;</script> 
  <meta id="atlassian-token" name="atlassian-token" content="A5KQ-2QAV-T4JA-FDED|9c3c6e96e91d7fa2546d8aa63499b1d79f6bc89c|lout"> 
  <link rel="shortcut icon" href="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/favicon.ico"> 
  <!--[if IE]><![endif]--> 
  <script type="text/javascript">
    (function() {
        var contextPath = '/jira';
        var eventBuffer = [];

        function printDeprecatedMsg() {
            if (console && console.warn) {
                console.warn('DEPRECATED JS - contextPath global variable has been deprecated since 7.4.0. Use `wrm/context-path` module instead.');
            }
        }

        function sendEvent(analytics, postfix) {
            analytics.send({
                name: 'js.globals.contextPath.' + postfix
            });
        }

        function sendDeprecatedEvent(postfix) {
            try {
                var analytics = require('jira/analytics');
                if (eventBuffer.length) {
                    eventBuffer.forEach(function(value) {
                        sendEvent(analytics, value);
                    });
                    eventBuffer = [];
                }

                if (postfix) {
                    sendEvent(analytics, postfix);
                }
            } catch(ex) {
                eventBuffer.push(postfix);
                setTimeout(sendDeprecatedEvent, 1000);
            }
        }

        Object.defineProperty(window, 'contextPath', {
            get: function() {
                printDeprecatedMsg();
                sendDeprecatedEvent('get');
                return contextPath;
            },
            set: function(value) {
                printDeprecatedMsg();
                sendDeprecatedEvent('set');
                contextPath = value;
            }
        });
    })();

</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/jira\"";
WRM._unparsedData["jira.webresources:feature-flags.feature-flag-data"]="{\"enabled-feature-keys\":[\"com.atlassian.jira.agile.darkfeature.editable.detailsview\",\"nps.survey.inline.dialog\",\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint.enabled\",\"jira.plugin.devstatus.phasetwo\",\"jira.frother.reporter.field\",\"atlassian.rest.xsrf.legacy.enabled\",\"jira.issue.status.lozenge\",\"com.atlassian.jira.config.BIG_PIPE\",\"com.atlassian.jira.projects.issuenavigator\",\"com.atlassian.jira.config.PDL\",\"jira.plugin.devstatus.phasetwo.enabled\",\"atlassian.aui.raphael.disabled\",\"app-switcher.new\",\"frother.assignee.field\",\"com.atlassian.jira.projects.ProjectCentricNavigation.Switch\",\"sd.internal.base.off.thread.on.completion.events.enabled\",\"jira.onboarding.cyoa\",\"com.atlassian.jira.agile.darkfeature.kanplan.enabled\",\"sd.slavalue.record.updated.date.enabled\",\"com.atlassian.jira.config.ProjectConfig.MENU\",\"com.atlassian.jira.projects.sidebar.DEFER_RESOURCES\",\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions.enabled\",\"com.atlassian.jira.agile.darkfeature.sprint.goal.enabled\",\"jira.zdu.admin-updates-ui\",\"jira.zdu.jmx-monitoring\",\"sd.sla.improved.rendering.enabled\",\"sd.canned.responses.enabled\",\"sd.new.settings.sidebar.location.disabled\",\"jira.zdu.cluster-upgrade-state\",\"com.atlassian.jira.agile.darkfeature.splitissue\",\"com.atlassian.jira.config.CoreFeatures.LICENSE_ROLES_ENABLED\",\"com.atlassian.feedback.feedback-button-move-to-header-enable\",\"jira.export.csv.enabled\"],\"feature-flag-states\":{\"com.atlassian.jira.agile.darkfeature.kanplan\":false,\"sd.internal.base.off.thread.on.completion.events\":false,\"jira.instrumentation.laas\":false,\"com.atlassian.jira.agile.darkfeature.edit.closed.sprint\":false,\"com.atlassian.jira.issuetable.draggable\":true,\"jira.create.linked.issue\":true,\"com.atlassian.jira.agile.darkfeature.sprint.goal\":false,\"jira.sal.host.connect.accessor.existing.transaction.will.create.transactions\":true,\"jira.jql.suggestrecentfields\":false,\"com.atlassian.jira.agile.darkfeature.kanplan.epics.and.versions\":false,\"jira.jql.smartautoselectfirst\":false,\"com.atlassian.jira.agile.darkfeature.optimistic.transitions\":true,\"com.atlassian.jira.issuetable.move.links.hidden\":true,\"jira.priorities.per.project\":true,\"com.atlassian.jira.upgrade.startup.fix.index\":true,\"jira.renderer.consider.variable.format\":true}}";
WRM._unparsedData["jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink"]="{\"extraClasses\":\"default-comment-level-help\",\"title\":\"Commenting on an Issue\",\"url\":\"https://docs.atlassian.com/jira/jcore-docs-076/Editing+and+collaborating+on+issues#Editingandcollaboratingonissues-restrictacomment\",\"isLocal\":false}";
WRM._unparsedData["jira.webresources:dateFormatProvider.allFormats"]="{\"dateFormats\":{\"meridiem\":[\"AM\",\"PM\"],\"eras\":[\"BC\",\"AD\"],\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"monthsShort\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"weekdaysShort\":[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},\"lookAndFeelFormats\":{\"relativize\":\"true\",\"time\":\"HH:mm\",\"day\":\"EEEE HH:mm\",\"dmy\":\"dd/MMM/yy\",\"complete\":\"dd/MMM/yy HH:mm\"}}";
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:issueviewer.features"]="{\"rteEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.thumbnail-mime-types"]="\"image/vnd.wap.wbmp,image/png,image/x-png,image/jpeg,image/bmp,image/gif\"";
WRM._unparsedData["com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.upload-limit"]="\"62914560\"";
WRM._unparsedData["com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"]="{\"anonymous\":true}";
WRM._unparsedData["com.atlassian.jira.jira-view-issue-plugin:controller-subtasks.controller.subtasks.parameters"]="{\"url\":\"/rest/api/2/issue/{issueId}/subtask/move\"}";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["jira.webresources:avatar-picker.data"]="{}";
WRM._unparsedData["com.atlassian.feedback.jira-feedback-plugin:button-resources-init.data"]="{\"jira.feedback.plugin.issue.collector.core\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.default\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"jira.feedback.plugin.issue.collector.service.desk\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&collectorId=a698db21\",\"jira.feedback.plugin.issue.collector.software\":\"https://jira.atlassian.com/s/576e9ab86257d4f65f6ea5b6dd50de44-T/en_UK3ljiw5/71006/b6b48b2829824b869586ac216d119363/2.0.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-UK&collectorId=abbf546d\",\"isHeaderFeedbackButtonEnabled\":true}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:dismissedFlags.flags"]="{\"dismissed\":[]}";
WRM._unparsedData["com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup"]="{\"signupDescription\":\"Get updates, inspiration and best practices from the team behind JIRA.\",\"formUrl\":\"https://www.atlassian.com/apis/exact-target/{0}/subscribe?mailingListId=1401671\",\"signupTitle\":\"Sign up!\",\"signupId\":\"newsletter-signup-tip\",\"showNewsletterTip\":false}";
WRM._unparsedData["com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData"]="{\"instanceCreatedDate\":\"2011-01-31\"}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.help-data"]="{\"showHelp\":true,\"editorDocumentationUrl\":[\"https://docs.atlassian.com/jira/jcore-docs-076/Visual+editing\"],\"editorDocumentationTitle\":[\"Show me documentation for the visual editor\"]}";
WRM._unparsedData["com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources.thumbnails-allowed"]="false";
WRM._unparsedData["jira.webresources:user-message-flags.adminLockout"]="{}";
WRM._unparsedData["jira.request.correlation-id"]="\"cd01645a2c7029\"";
WRM._unparsedData["project-id"]="12310230";
WRM._unparsedData["project-key"]="\"SOLR\"";
WRM._unparsedData["project-name"]="\"Solr\"";
WRM._unparsedData["project-type"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]="[{\"id\":\"allissues\",\"jql\":\"project = \\\"{0}\\\" ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"All issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[]},{\"id\":\"allopenissues\",\"jql\":\"project = \\\"{0}\\\" AND resolution = Unresolved ORDER BY {1}\",\"defaultOrderby\":\"priority DESC, updated DESC\",\"label\":\"Open issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"resolution\"]},{\"id\":\"doneissues\",\"jql\":\"project = \\\"{0}\\\" AND statusCategory = Done ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Done issues\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"status\"]},{\"id\":\"recentlyviewed\",\"jql\":\"project = \\\"{0}\\\" AND issuekey in issueHistory() ORDER BY {1}\",\"defaultOrderby\":\"lastViewed DESC\",\"label\":\"Viewed recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"issuekey\"]},{\"id\":\"addedrecently\",\"jql\":\"project = \\\"{0}\\\" AND created \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"created DESC\",\"label\":\"Created recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"created\"]},{\"id\":\"resolvedrecently\",\"jql\":\"project = \\\"{0}\\\" AND resolutiondate \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Resolved recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":false,\"fields\":[\"resolutiondate\"]},{\"id\":\"updatedrecently\",\"jql\":\"project = \\\"{0}\\\" AND updated \u003e= -1w ORDER BY {1}\",\"defaultOrderby\":\"updated DESC\",\"label\":\"Updated recently\",\"requiresUser\":false,\"supportsInlineIssueCreate\":true,\"fields\":[\"updated\"]}]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]="[\"allopenissues\",\"allissues\"]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]="false";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]="[]";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"]="false";
WRM._unparsedData["projectId"]="12310230";
WRM._unparsedData["projectKey"]="\"SOLR\"";
WRM._unparsedData["projectType"]="\"software\"";
WRM._unparsedData["com.atlassian.jira.jira-projects-issue-navigator:server-rendered"]="true";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/a8a4711bc3f2eb261d8c8fd9fbcbba8b-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/css/_super/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/74ac580603ca910fff0cfdf319e54add-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/css/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.css?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" media="all"> 
  <link type="text/css" rel="stylesheet" href="/jira/s/611672383f6cab00ab202241ba6f9d68-T/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources-init/com.atlassian.feedback.jira-feedback-plugin:button-resources-init.css" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources-init" data-wrm-batch-type="resource" media="all"> 
  <script type="text/javascript" src="/jira/s/98ceb006e504d7924d5ffc411626c6bc-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1fca1750044f2777c977e8d8cc023344/_/download/contextbatch/js/_super/batch.js?locale=en-UK" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/c1e4d26ea276469807c3dc0918df482c-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/fbf45109b31165e5b7740a9d72318cea/_/download/contextbatch/js/project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super/batch.js?agile_global_admin_condition=true&amp;hc-enabled=true&amp;is-server-instance=true&amp;jag=true&amp;jira.create.linked.issue=true&amp;locale=en-UK&amp;nps-acknowledged=true&amp;richediton=true" data-wrm-key="project.issue.navigator,jira.view.issue,jira.global,atl.general,jira.general,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/6bf9253c8d533109c3b02e26794be24e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/871d45c9f322a22cb3aa9b7948a69803/_/download/contextbatch/js/atl.global,-_super/batch.js?locale=en-UK" data-wrm-key="atl.global,-_super" data-wrm-batch-type="context" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" data-wrm-key="jira.webresources:calendar-en" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:calendar-localisation-moment/jira.webresources:calendar-localisation-moment.js" data-wrm-key="jira.webresources:calendar-localisation-moment" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/7.6.3/_/download/batch/com.atlassian.feedback.jira-feedback-plugin:button-resources/com.atlassian.feedback.jira-feedback-plugin:button-resources.js" data-wrm-key="com.atlassian.feedback.jira-feedback-plugin:button-resources" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/ccd2e67b523185973473e8bd5735c8f9-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/e0de73613a1027de08f3da6a45e1d1a2/_/download/contextbatch/css/jira.global.look-and-feel,-_super/batch.css" data-wrm-key="jira.global.look-and-feel,-_super" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/rest/api/1.0/shortcuts/76005/33e5e0166867c8c9228d44506f60b2e8/shortcuts.js?context=issuenavigation&amp;context=issueaction"></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.jira.jira-issue-nav-components:inline-edit-enabled"]="true";
WRM._unparsedData["should-display-chaperone"]="false";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <link type="text/css" rel="stylesheet" href="/jira/s/15712b600e9aecf72ffd9fd3704a0c78-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/css/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.css?jira.create.linked.issue=true&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" media="all"> 
  <script type="text/javascript" src="/jira/s/6579b6b8ba67abaa496e39b9242a18a4-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/6b22a15c7b83f87a47b1757076f43542/_/download/contextbatch/js/com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue/batch.js?jira.create.linked.issue=true&amp;locale=en-UK&amp;richediton=true" data-wrm-key="com.atlassian.jira.projects.sidebar.init,-_super,-project.issue.navigator,-jira.view.issue" data-wrm-batch-type="context" data-initially-rendered></script> 
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="ajs-can-search-users" content="false"> 
  <meta name="ajs-can-edit-watchers" content="false"> 
  <meta name="ajs-default-avatar-url" content="https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10453"> 
  <meta name="ajs-issue-project-type" content="software"> 
  <meta name="ajs-issue-key" content="SOLR-2125"> 
  <meta name="ajs-server-view-issue-is-editable" content="false"> 
  <title>[SOLR-2125] Spatial filter is not accurate - ASF JIRA</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/jira/osd.jsp" title="[SOLR-2125] Spatial filter is not accurate - ASF JIRA"> 
 </head> 
 <body id="jira" class="aui-layout aui-theme-default " data-version="7.6.3"> 
  <div id="page"> 
   <header id="header" role="banner"> 
    <script>
require(["jquery", "jira/license-banner"], function ($, licenseBanner) {
    $(function () {
        licenseBanner.showLicenseBanner("");
        licenseBanner.showLicenseFlag("");
    });
});
</script> 
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation">
     <div class="aui-header-inner">
      <div class="aui-header-before">
       <a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a>
       <div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}">
        <div role="application">
         <div class="app-switcher-loading">
          Loading…
         </div>
        </div>
       </div>
      </div>
      <div class="aui-header-primary">
       <h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://issues.apache.org/jira/secure/MyJiraHome.jspa"><img src="/jira/s/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/_/jira-logo-scaled.png" alt="ASF JIRA"></a></h1>
       <ul class="aui-nav">
        <li><a href="/jira/secure/Dashboard.jspa" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="home_link" aria-haspopup="true" aria-controls="home_link-content" title="View and manage your dashboards" accesskey="d">Dashboards</a>
         <div class="aui-dropdown2 aui-style-default" id="home_link-content" data-aui-dropdown2-ajax-key="home_link"></div></li>
        <li><a href="/jira/browse/SOLR" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="browse_link" aria-haspopup="true" aria-controls="browse_link-content" title="View recent projects and browse a list of projects" accesskey="p">Projects</a>
         <div class="aui-dropdown2 aui-style-default" id="browse_link-content" data-aui-dropdown2-ajax-key="browse_link"></div></li>
        <li><a href="/jira/issues/" class=" aui-nav-link aui-dropdown2-trigger aui-dropdown2-ajax" id="find_link" aria-haspopup="true" aria-controls="find_link-content" title="Search for issues and view recent issues" accesskey="i">Issues</a>
         <div class="aui-dropdown2 aui-style-default" id="find_link-content" data-aui-dropdown2-ajax-key="find_link"></div></li> 
       </ul>
      </div>
      <div class="aui-header-secondary">
       <ul class="aui-nav">
        <li id="quicksearch-menu"> 
         <form action="/jira/secure/QuickSearch.jspa" method="get" id="quicksearch" class="aui-quicksearch dont-default-focus ajs-dirty-warning-exempt"> 
          <input id="quickSearchInput" class="search" type="text" title="Search" placeholder="Search" name="searchString" accessKey="q"> 
          <input type="submit" class="hidden" value="Search"> 
         </form> </li> 
        <li><a class="jira-feedback-plugin" role="button" aria-haspopup="true" id="jira-header-feedback-link" href="#"><span class="aui-icon aui-icon-small jira-feedback-plugin-icon">Give feedback to Atlassian</span></a></li> 
        <li id="system-help-menu"> <a class="aui-nav-link aui-dropdown2-trigger" id="help_menu" aria-haspopup="true" aria-owns="system-help-menu-content" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="$textUtils.htmlEncode($rootHelpMenuItem.params.target)" title="Help"><span class="aui-icon aui-icon-small aui-iconfont-help">Help</span></a> 
         <div id="system-help-menu-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
           <ul id="jira-help" class="aui-list-truncate"> 
            <li> <a id="view_core_help" class="aui-nav-link " title="Go to the online documentation for JIRA Core" href="https://docs.atlassian.com/jira/jcore-docs-076/" target="_blank">JIRA Core help</a> </li> 
            <li> <a id="keyshortscuthelp" class="aui-nav-link " title="Get more information about JIRA's Keyboard Shortcuts" href="/jira/secure/ViewKeyboardShortcuts!default.jspa" target="_blank">Keyboard Shortcuts</a> </li> 
            <li> <a id="view_about" class="aui-nav-link " title="Get more information about JIRA" href="/jira/secure/AboutPage.jspa">About JIRA</a> </li> 
            <li> <a id="view_credits" class="aui-nav-link " title="See who did what" href="/jira/secure/JiraCreditsPage!default.jspa" target="_blank">JIRA Credits</a> </li> 
           </ul> 
          </div> 
         </div> </li> 
        <li id="user-options"> <a class="aui-nav-link login-link" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-2125">Log In</a> 
         <div id="user-options-content" class="aui-dropdown2 aui-style-default"> 
          <div class="aui-dropdown2-section"> 
          </div> 
         </div> </li> 
       </ul>
      </div>
     </div>
     <!-- .aui-header-inner-->
    </nav>
    <!-- .aui-header --> 
   </header> 
   <section id="content" role="main"> 
    <big-pipe data-id="sidebar-id" unresolved></big-pipe>
    <div class="aui-sidebar  sidebar-placeholder">
     <div class="aui-sidebar-wrapper">
      <div class="aui-sidebar-body"></div>
      <div class="aui-sidebar-footer">
       <a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="Expand sidebar ( [ )" href="#"><span class="aui-icon aui-icon-small"></span></a>
      </div>
     </div>
    </div>
    <script id="projects-sidebar-init">
    require(['jira/projects/sidebar/expansion-manager'], function(expansionManager) {
        var scriptTag = document.getElementById('projects-sidebar-init');
        var sidebar = AJS.sidebar('.aui-sidebar');
        expansionManager(sidebar);
        scriptTag.parentElement.removeChild(scriptTag);
    });
    </script>
    <div class="aui-page-panel">
     <div class="aui-page-panel-inner">
      <div class="issue-navigator">
       <div class="content">
        <div class="issue-view">
         <div class="navigation-tools">
          <div class="pager-container"></div>
         </div>
         <div class="issue-container">
          <div id="issue-content" class="issue-edit-form">
           <header id="stalker" class="issue-header js-stalker">
            <div class="issue-header-content">
             <header class="aui-page-header">
              <div class="aui-page-header-inner">
               <div class="aui-page-header-image">
                <span id="12310230" class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img id="project-avatar" alt="Uploaded image for project: 'Solr'" src="https://issues.apache.org/jira/secure/projectavatar?pid=12310230&amp;avatarId=22151"></span></span>
               </div>
               <!-- .aui-page-header-image -->
               <div class="aui-page-header-main">
                <ol class="aui-nav aui-nav-breadcrumbs">
                 <li><a id="project-name-val" href="/jira/browse/SOLR">Solr</a></li>
                 <li><a class="issue-link" data-issue-key="SOLR-2125" href="/jira/browse/SOLR-2125" id="key-val" rel="12474641">SOLR-2125</a></li>
                </ol>
                <h1 id="summary-val">Spatial filter is not accurate</h1>
               </div>
               <!-- .aui-page-header-main -->
               <div class="aui-page-header-actions">
                <div id="issue-header-pager"></div>
               </div>
               <!-- .aui-page-header-actions -->
              </div>
              <!-- .aui-page-header-inner -->
             </header>
             <!-- .aui-page-header -->
             <div class="command-bar">
              <div class="ops-cont">
               <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                 <ul id="opsbar-ops-login-lnk_container" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item"><a id="ops-login-lnk" title="Log In" class="toolbar-trigger" href="/jira/login.jsp?os_destination=%2Fbrowse%2FSOLR-2125"><span class="trigger-label">Log In</span></a></li>
                 </ul>
                 <ul id="opsbar-opsbar-operations" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-transitions" class="toolbar-group pluggable-ops"></ul>
                 <ul id="opsbar-opsbar-admin" class="toolbar-group pluggable-ops"></ul>
                </div>
                <div class="toolbar-split toolbar-split-right">
                 <ul id="opsbar-jira.issue.tools" class="toolbar-group pluggable-ops">
                  <li class="toolbar-item">
                   <div>
                    <a href="#" id="viewissue-export" aria-owns="viewissue-export_drop" aria-haspopup="true" title="Export this issue in another format" class="toolbar-trigger aui-button aui-style-default aui-dropdown2-trigger"><span class="icon icon-default aui-icon aui-icon-small aui-iconfont-export"></span> <span class="dropdown-text">Export</span></a>
                    <div id="viewissue-export_drop" class="aui-style-default aui-dropdown2">
                     <ul>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-xml/SOLR-2125/SOLR-2125.xml" id="jira.issueviews:issue-xml"><span class="trigger-label">XML</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-word/SOLR-2125/SOLR-2125.doc" id="jira.issueviews:issue-word"><span class="trigger-label">Word</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/jira.issueviews:issue-html/SOLR-2125/SOLR-2125.html" id="jira.issueviews:issue-html"><span class="trigger-label">Printable</span></a></li>
                      <li class="aui-list-item"><a href="/jira/si/com.atlassian.jira.plugins.jira-importers-plugin:issue-json/SOLR-2125/SOLR-2125.json" id="com.atlassian.jira.plugins.jira-importers-plugin:issue-json"><span class="trigger-label">JSON</span></a></li>
                     </ul>
                    </div>
                   </div></li>
                 </ul>
                </div>
               </div>
              </div>
             </div>
            </div>
           </header>
           <div class="issue-body-content">
            <div class="aui-group issue-body">
             <div class="aui-item issue-main-column">
              <div id="details-module" class="module toggle-wrap">
               <div id="details-module_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Details</h2>
               </div>
               <div class="mod-content"> 
                <ul id="issuedetails" class="property-list two-cols"> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Type:</strong> 
                   <span id="type-val" class="value"> <img alt="" height="16" src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype" title="Bug - A problem which impairs or prevents the functions of the product." width="16"> Bug </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Status:</strong> 
                   <span id="status-val" class="value"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done jira-issue-status-lozenge-max-width-medium" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </span> 
                  </div> </li> 
                 <li class="item new"> 
                  <div class="wrap"> 
                   <strong class="name">Priority:</strong> 
                   <span id="priority-val" class="value"> <img alt="" height="16" src="/jira/images/icons/priorities/major.svg" title="Major - Major loss of function." width="16"> Major </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Resolution:</strong> 
                   <span id="resolution-val" class="value resolved"> Fixed </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Affects Version/s:</strong> 
                   <span id="versions-val" class="value"> <span class="shorten" id="versions-field"> <span title="1.5 Used to track issues fixed on the (now defunt) 1.5 branch: http://svn.apache.org/viewvc/lucene/solr/branches/branch-1.5-dev/">1.5</span> </span> </span> 
                  </div> </li> 
                 <li class="item item-right"> 
                  <div class="wrap"> 
                   <strong class="name">Fix Version/s:</strong> 
                   <span id="fixfor-val" class="value"> <span class="shorten" id="fixVersions-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+3.1" title="3.1 Major release after 1.4.1">3.1</a>, <a href="/jira/issues/?jql=project+%3D+SOLR+AND+fixVersion+%3D+4.0-ALPHA" title="4.0-ALPHA Alpha release of 4.x series">4.0-ALPHA</a> </span> </span> 
                  </div> </li> 
                 <li class="item"> 
                  <div class="wrap"> 
                   <strong class="name">Component/s:</strong> 
                   <span id="components-val" class="value"> <span class="shorten" id="components-field"> <a href="/jira/issues/?jql=project+%3D+SOLR+AND+component+%3D+Build" title="Build Changes/issues w/ the build">Build</a> </span> </span> 
                  </div> </li> 
                 <li class="item full-width"> 
                  <div class="wrap" id="wrap-labels"> 
                   <strong class="name">Labels:</strong> 
                   <div class="labels-wrap value"> 
                    <span class="labels" id="labels-12474641-value">None</span> 
                   </div> 
                  </div> </li> 
                </ul> 
               </div>
              </div>
              <div id="descriptionmodule" class="module toggle-wrap">
               <div id="descriptionmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Description</h2>
               </div>
               <div class="mod-content">
                <div id="description-val" class="field-ignore-highlight"> 
                 <div class="user-content-block"> 
                  <p>The calculations of distance appears to be off.</p> 
                  <p>Note: "The radius of the sphere to be used when calculating distances on a sphere (i.e. haversine). Default is the Earth's mean radius in kilometers (see org.apache.solr.search.function.distance.Constants.EARTH_MEAN_RADIUS_KM) which is set to 3,958.761458084784856. Most applications will not need to set this."</p> 
                  <p>The radius of the earth in KM is 6371.009 km (≈3958.761 mi).</p> 
                  <p>Also filtering distance appears to be off - example data:</p> 
                  <p>45.17614,-93.87341 to 44.9369054,-91.3929348 Approx 137 miles Google. 169 miles = 220 kilometers</p> 
                  <p><a href="http://....../solr/select?fl=*,score&amp;start=0&amp;rows=10&amp;q=" class="external-link" rel="nofollow">http://....../solr/select?fl=*,score&amp;start=0&amp;rows=10&amp;q=</a></p> {!sfilt%20fl=store_lat_lon} 
                  <p>&amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=280&amp;sort=dist(2,store,vector(44.9369054,-91.3929348)) asc </p> 
                  <p>Nothing shows. d=285 shows results. This is off by a lot.</p> 
                  <p>Bill</p> 
                 </div> 
                </div> 
               </div>
              </div>
              <div id="dnd-metadata" class="module toggle-wrap">
               <div id="dnd-metadata_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <div id="dnd-metadata-webpanel" data-can-attach="false" data-project-type="software" data-upload-limit="62914560" data-thumbnails-allowed="false"></div>
               </div>
              </div>
              <div id="attachmentmodule" class="module toggle-wrap">
               <div id="attachmentmodule_heading" class="mod-header">
                <ul class="ops">
                 <li class="drop">
                  <div class="aui-dd-parent">
                   <a href="#" class="icon drop-menu js-default-dropdown" title="Options"><span>Options</span></a>
                   <div class="aui-dropdown-content aui-list">
                    <ul id="attachment-sorting-options" class="aui-list-section aui-first">
                     <li class="aui-list-item"><a id="attachment-sort-key-name" href="/jira/browse/SOLR-2125?attachmentSortBy=fileName#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="viewissue.subtasks.tab.show.all.name"><span>Sort By Name</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-key-date" href="/jira/browse/SOLR-2125?attachmentSortBy=dateTime#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Sort By Date"><span>Sort By Date</span></a></li>
                    </ul>
                    <ul id="attachment-sorting-order-options" class="aui-list-section aui-last">
                     <li class="aui-list-item"><a id="attachment-sort-direction-asc" href="/jira/browse/SOLR-2125?attachmentOrder=asc#attachmentmodule" class="aui-list-checked aui-checked aui-list-item-link" title="Ascending"><span>Ascending</span></a></li>
                     <li class="aui-list-item"><a id="attachment-sort-direction-desc" href="/jira/browse/SOLR-2125?attachmentOrder=desc#attachmentmodule" class="aui-list-checked aui-list-item-link" title="Descending"><span>Descending</span></a></li>
                    </ul>
                   </div>
                  </div></li>
                </ul>
                <h2 class="toggle-title">Attachments</h2>
               </div>
               <div class="mod-content">
                <ol id="file_attachments" class="item-attachments" data-sort-key="fileName" data-sort-order="asc">
                 <li class="attachment-content js-file-attachment" data-attachment-id="12455222" data-issue-id="12474641" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12455222/Distance.diff" draggable="true" data-downloadurl="application/octet-stream:Distance.diff:https://issues.apache.org/jira/secure/attachment/12455222/Distance.diff"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12455222/Distance.diff" title="Latest  22/Sep/10 03:42 - Bill Bell" draggable="true" data-downloadurl="application/octet-stream:Distance.diff:https://issues.apache.org/jira/secure/attachment/12455222/Distance.diff">Distance.diff</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-09-22T03:42:20.814Z">22/Sep/10 03:42</time>
                   </dd>
                   <dd class="attachment-size">
                    2 kB
                   </dd>
                   <dd class="attachment-author">
                    Bill Bell
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12455269" data-issue-id="12474641" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12455269/SOLR-2125.patch" draggable="true" data-downloadurl="text/x-patch:SOLR-2125.patch:https://issues.apache.org/jira/secure/attachment/12455269/SOLR-2125.patch"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="File"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12455269/SOLR-2125.patch" title="Latest  22/Sep/10 14:32 - Grant Ingersoll" draggable="true" data-downloadurl="text/x-patch:SOLR-2125.patch:https://issues.apache.org/jira/secure/attachment/12455269/SOLR-2125.patch">SOLR-2125.patch</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-09-22T14:32:32.180Z">22/Sep/10 14:32</time>
                   </dd>
                   <dd class="attachment-size">
                    16 kB
                   </dd>
                   <dd class="attachment-author">
                    Grant Ingersoll
                   </dd>
                  </dl></li>
                 <li class="attachment-content js-file-attachment" data-attachment-id="12455200" data-issue-id="12474641" data-attachment-type="file">
                  <div class="attachment-thumb">
                   <a href="/jira/secure/attachment/12455200/solrspatial.xlsx" draggable="true" data-downloadurl="application/vnd.openxmlformats:solrspatial.xlsx:https://issues.apache.org/jira/secure/attachment/12455200/solrspatial.xlsx"><span class="aui-icon aui-icon-small attachment-icon aui-iconfont-devtools-file" title="Microsoft Word"></span></a>
                  </div>
                  <dl>
                   <dt class="attachment-title">
                    <a href="/jira/secure/attachment/12455200/solrspatial.xlsx" title="Latest  21/Sep/10 22:37 - Bill Bell" draggable="true" data-downloadurl="application/vnd.openxmlformats:solrspatial.xlsx:https://issues.apache.org/jira/secure/attachment/12455200/solrspatial.xlsx">solrspatial.xlsx</a>
                   </dt>
                   <dd class="attachment-delete">
                    <span class="icon"></span>
                   </dd>
                   <dd class="attachment-date">
                    <time class="livestamp" datetime="2010-09-21T22:37:04.898Z">21/Sep/10 22:37</time>
                   </dd>
                   <dd class="attachment-size">
                    10 kB
                   </dd>
                   <dd class="attachment-author">
                    Bill Bell
                   </dd>
                  </dl></li>
                </ol>
               </div>
              </div>
              <div id="linkingmodule" class="module toggle-wrap">
               <div id="linkingmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Issue Links</h2>
               </div>
               <div class="mod-content"> 
                <div class="links-container" data-default-link-icon="/jira/images/icons/generic_link_16.png"> 
                 <dl class="links-list "> 
                  <dt title="blocks">
                   blocks
                  </dt> 
                  <dd id="internal-12440848_10032"> 
                   <div class="link-content"> 
                    <p> <img src="/jira/secure/viewavatar?size=xsmall&amp;avatarId=21141&amp;avatarType=issuetype" width="16" height="16" title="New Feature - A new feature of the product, which has yet to be developed." alt="New Feature - A new feature of the product, which has yet to be developed."> <span title="SOLR-1568: Implement Spatial Filter"> <a href="/jira/browse/SOLR-1568" data-issue-key="SOLR-1568" class="issue-link link-title resolution">SOLR-1568</a> <span class="link-summary">Implement Spatial Filter</span> </span> </p> 
                    <ul class="link-snapshot"> 
                     <li class="priority"> <img src="/jira/images/icons/priorities/minor.svg" width="16" height="16" title="Minor - Minor loss of function, or other problem where easy workaround is present." alt="Minor - Minor loss of function, or other problem where easy workaround is present."> </li> 
                     <li class="status"> <span class=" jira-issue-status-lozenge aui-lozenge jira-issue-status-lozenge-green jira-issue-status-lozenge-done aui-lozenge-subtle jira-issue-status-lozenge-max-width-short" data-tooltip="<span class=&quot;jira-issue-status-tooltip-title&quot;>Closed</span><br><span class=&quot;jira-issue-status-tooltip-desc&quot;>The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.</span>">Closed</span> </li> 
                    </ul> 
                   </div> 
                  </dd> 
                 </dl> 
                </div> 
               </div>
              </div>
              <div id="activitymodule" class="module toggle-wrap">
               <div id="activitymodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Activity</h2>
               </div>
               <div class="mod-content"> 
                <big-pipe data-id="activity-panel-pipe-id" style="height: 70px"> 
                 <div></div> 
                </big-pipe> 
               </div>
              </div>
             </div>
             <div id="viewissuesidebar" class="aui-item issue-side-column">
              <div id="peoplemodule" class="module toggle-wrap">
               <div id="peoplemodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">People</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details" id="peopledetails"> 
                 <li class="people-details"> 
                  <dl> 
                   <dt>
                    Assignee:
                   </dt> 
                   <dd> 
                    <span id="assignee-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_assignee_gsingers" rel="gsingers" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Grant Ingersoll&quot;,&quot;emailAddress&quot;:&quot;gsingers@apache.org&quot;,&quot;username&quot;:&quot;gsingers&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="gsingers"></span></span> Grant Ingersoll </span> </span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Reporter:
                   </dt> 
                   <dd> 
                    <span id="reporter-val" class="view-issue-field"> <span class="user-hover" id="issue_summary_reporter_billnbell" rel="billnbell" data-user="{&quot;avatarUrl&quot;:&quot;https://issues.apache.org/jira/secure/useravatar?size=xsmall&amp;avatarId=10452&quot;,&quot;displayName&quot;:&quot;Bill Bell&quot;,&quot;emailAddress&quot;:&quot;bell.william@comcast.net&quot;,&quot;username&quot;:&quot;billnbell&quot;}"> <span class="aui-avatar aui-avatar-small"><span class="aui-avatar-inner"><img src="https://issues.apache.org/jira/secure/useravatar?size=small&amp;avatarId=10452" alt="billnbell"></span></span> Bill Bell </span> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
                <ul class="item-details"> 
                 <li> 
                  <dl> 
                   <dt>
                    Votes:
                   </dt> 
                   <dd> 
                    <span id="vote-data" class="aui-badge vote-state-off">0</span> 
                    <span id="vote-label" title="You have to be logged in to vote for an issue.">Vote for this issue</span> 
                   </dd> 
                  </dl> 
                  <dl> 
                   <dt>
                    Watchers:
                   </dt> 
                   <dd> 
                    <span id="watcher-data" class="aui-badge watch-state-off">0</span> 
                    <span id="watch-label" title="You have to be logged in to watch an issue.">Start watching this issue</span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
              <div id="datesmodule" class="module toggle-wrap">
               <div id="datesmodule_heading" class="mod-header">
                <ul class="ops"></ul>
                <h2 class="toggle-title">Dates</h2>
               </div>
               <div class="mod-content"> 
                <ul class="item-details"> 
                 <li> 
                  <dl class="dates"> 
                   <dt>
                    Created:
                   </dt> 
                   <dd class="date user-tz" title="20/Sep/10 23:48"> 
                    <span data-name="Created" id="created-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2010-09-20T23:48:19+0000">20/Sep/10 23:48</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Updated:
                   </dt> 
                   <dd class="date user-tz" title="30/Mar/11 15:45"> 
                    <span data-name="Updated" id="updated-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2011-03-30T15:45:47+0000">30/Mar/11 15:45</time> </span> 
                   </dd> 
                  </dl> 
                  <dl class="dates"> 
                   <dt>
                    Resolved:
                   </dt> 
                   <dd class="date user-tz" title="23/Sep/10 12:51"> 
                    <span data-name="Resolved" id="resolutiondate-val" data-fieldtype="datetime"> <time class="livestamp" datetime="2010-09-23T12:51:01+0000">23/Sep/10 12:51</time> </span> 
                   </dd> 
                  </dl> </li> 
                </ul> 
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- .aui-page-panel-inner -->
    </div>
    <!-- .aui-page-panel -->
    <div class="issue-navigator-init"></div> 
   </section> 
   <footer id="footer" role="contentinfo"> 
    <section class="footer-body"> 
     <ul class="atlassian-footer"> 
      <li> Atlassian JIRA <a class="seo-link" rel="nofollow" href="https://www.atlassian.com/software/jira">Project Management Software</a> <span id="footer-build-information">(v7.6.3#76005-<span title="8a4e38d34af948780dbf52044e7aafb13a7cae58" data-commit-id="8a4e38d34af948780dbf52044e7aafb13a7cae58}">sha1:8a4e38d</span>)</span> </li> 
      <li> <a id="about-link" rel="nofollow" href="/jira/secure/AboutPage.jspa/secure/AboutPage.jspa">About JIRA</a> </li> 
      <li> <a id="footer-report-problem-link" rel="nofollow" href="/jira/secure/CreateIssue!default.jspa">Report a problem</a> </li> 
     </ul> 
     <ul class="atlassian-footer"> 
      <li class="licensemessage"> Powered by a free Atlassian <a rel="nofollow" href="http://www.atlassian.com/software/jira">JIRA</a> open source license for Apache Software Foundation. Try JIRA - <a rel="nofollow" href="http://www.atlassian.com/software/jira">bug tracking software</a> for <i>your</i> team. </li> 
     </ul> 
     <div id="footer-logo">
      <a rel="nofollow" href="http://www.atlassian.com/">Atlassian</a>
     </div> 
    </section> 
    <fieldset class="hidden parameters"> 
     <input type="hidden" title="loggedInUser" value=""> 
     <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation."> 
     <input type="hidden" title="JiraVersion" value="7.6.3"> 
     <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation. Please log in."> 
     <input type="hidden" title="baseURL" value="https://issues.apache.org/jira"> 
     <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted. This may be a temporary glitch or the server may be down. "> 
     <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation."> 
     <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser"> 
     <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown"> 
     <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost."> 
     <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog."> 
     <input type="hidden" title="keyType" value="Type"> 
     <input type="hidden" title="keyThen" value="then"> 
     <input type="hidden" title="dblClickToExpand" value="Double click to expand"> 
     <input type="hidden" title="actions" value="Actions"> 
     <input type="hidden" title="removeItem" value="Remove"> 
     <input type="hidden" title="workflow" value="Workflow"> 
     <input type="hidden" title="labelNew" value="New Label"> 
     <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all"> 
     <input type="hidden" title="closelink" value="Close"> 
     <input type="hidden" title="dotOperations" value="Operations"> 
     <input type="hidden" title="dotLoading" value="Loading..."> 
     <input type="hidden" title="frotherSuggestions" value="Suggestions"> 
     <input type="hidden" title="frotherNomatches" value="No Matches"> 
     <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version."> 
     <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component."> 
     <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid."> 
    </fieldset> 
   </footer> 
  </div> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-js/jira.webresources:bigpipe-js.js" data-wrm-key="jira.webresources:bigpipe-js" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["activity-panel-pipe-id"]="\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n    \u003cdiv class=\\\"tabwrap tabs2\\\"\u003e\\n\\n        \u003cul id=\\\"issue-tabs\\\" class=\\\"tabs horizontal\\\"\u003e\\n                                \\n            \u003cli  data-id=\\\"all-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\" data-label=\\\"All\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"all-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel\\\"\u003e\u003cstrong\u003eAll\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  class=\\\"active\\\" id=\\\"comment-tabpanel\\\"  data-id=\\\"comment-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\" data-label=\\\"Comments\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel\\\"\u003e\\n                            \u003cstrong tabindex=\\\"0\\\"\u003eComments\u003c\\/strong\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"worklog-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\" data-label=\\\"Work Log\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"worklog-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel\\\"\u003e\u003cstrong\u003eWork Log\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"changehistory-tabpanel\\\" data-key=\\\"com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\" data-label=\\\"History\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"changehistory-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel\\\"\u003e\u003cstrong\u003eHistory\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"activity-stream-issue-tab\\\" data-key=\\\"com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\" data-label=\\\"Activity\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"activity-stream-issue-tab\\\" href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab\\\"\u003e\u003cstrong\u003eActivity\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                                \\n            \u003cli  data-id=\\\"transitions-summary-tabpanel\\\" data-key=\\\"com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\" data-label=\\\"Transitions\\\" data-href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\\n                            \u003ca class=\\\"ajax-activity-content\\\" id=\\\"transitions-summary-tabpanel\\\" href=\\\"\\/jira\\/browse\\/SOLR-2125?page=com.googlecode.jira-suite-utilities:transitions-summary-tabpanel\\\"\u003e\u003cstrong\u003eTransitions\u003c\\/strong\u003e\u003c\\/a\u003e\\n                        \u003c\\/li\u003e\\n                \u003c\\/ul\u003e\\n\\n                    \u003cdiv class=\\\"sortwrap\\\"\u003e\\n                                    \u003ca class=\\\"issue-activity-sort-link ajax-activity-content\\\" rel=\\\"nofollow\\\" data-tab-sort data-order=\\\"desc\\\" href=\\\"\\/jira\\/browse\\/SOLR-2125?actionOrder=desc\\\" title=\\\"Ascending order - Click to sort in descending order\\\"\u003e\\n                        \u003cspan class=\\\"aui-icon aui-icon-small aui-iconfont-up\\\"\u003eAscending order - Click to sort in descending order\u003c\\/span\u003e\\n                    \u003c\\/a\u003e\\n                            \u003c\\/div\u003e\\n            \u003c\\/div\u003e\\n    \u003cdiv class=\\\"issuePanelWrapper\\\"\u003e\\n        \u003cdiv class=\\\"issuePanelProgress\\\"\u003e\u003c\\/div\u003e\\n        \u003cdiv class=\\\"issuePanelContainer\\\" id=\\\"issue_actions_container\\\"\u003e\\n                                    \\n\\n\\n\u003cdiv id=\\\"comment-12912785\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912785&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912785\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912785_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912785_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 00:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T00:00:01+0000\'\u003e21\\/Sep\\/10 00:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eJust in time Bill!\u003cbr\\/\u003e\\nI just started looking at spatial stuff today since I\'m planning on putting some of it in my Lucene Revolution presentation.  I\'ve seen some tweets about people having difficulties, and I\'ve had some problems when I tried stuff myself.\u003c\\/p\u003e\\n\\n\u003cp\u003eAnyway, I\'m going to try and clean up some of this stuff over the next few days and make the wiki a bit more user oriented - an extra pair of eyeballs would be welcome!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912785_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912785_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 00:00\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T00:00:01+0000\'\u003e21\\/Sep\\/10 00:00\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Just in time Bill! \\nI just started looking at spatial stuff today since I\'m planning on putting some of it in my Lucene Revolution presentation.  I\'ve seen some tweets about people having difficulties, and I\'ve had some problems when I tried stuff myself. \\n\\n Anyway, I\'m going to try and clean up some of this stuff over the next few days and make the wiki a bit more user oriented - an extra pair of eyeballs would be welcome!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912799\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912799&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912799\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912799_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912799_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 01:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T01:18:38+0000\'\u003e21\\/Sep\\/10 01:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHmmm, well, I just corrected one bug that hard-coded the distance in miles, but it was just a check to see if we crossed the poles.\u003cbr\\/\u003e\\nI don\'t think that change alone will fix your issue.\u003c\\/p\u003e\\n\\n\u003cp\u003eEarlier today, I switched around some fields\\/field-types in the example schema, so \\\"store\\\" is now of latlon type, and it\'s the only location type (having multiple is just confusing).\u003c\\/p\u003e\\n\\n\u003cp\u003eSo just looking at the bounding box now, here\'s the URL from your example:\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/localhost:8983\\/solr\\/select?fl=*,score&amp;start=0&amp;rows=10&amp;q=\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/localhost:8983\\/solr\\/select?fl=*,score&amp;start=0&amp;rows=10&amp;q=\u003c\\/a\u003e\u003c\\/p\u003e\\n{!sfilt%20fl=store}\\n\u003cp\u003e&amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=280&amp;debugQuery=true\u003c\\/p\u003e\\n\\n\u003cp\u003eAnd I can see that the generated bounding box is:\u003cbr\\/\u003e\\n+store_0_coordinate:\u003cspan class=\\\"error\\\"\u003e&#91;43.129843715965166 TO 46.688683890119314&#93;\u003c\\/span\u003e +store_1_coordinate:\u003cspan class=\\\"error\\\"\u003e&#91;-93.83266208454557 TO -88.79716545231159&#93;\u003c\\/span\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eWhich just misses the longitude of the point on the document of -93.87341.\u003c\\/p\u003e\\n\\n\u003cp\u003eCan anyone point to an webapp for checking arbitrary distances between two lat\\/lon points?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912799_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912799_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 01:18\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T01:18:38+0000\'\u003e21\\/Sep\\/10 01:18\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hmmm, well, I just corrected one bug that hard-coded the distance in miles, but it was just a check to see if we crossed the poles. \\nI don\'t think that change alone will fix your issue. \\n\\n Earlier today, I switched around some fields\\/field-types in the example schema, so \\\"store\\\" is now of latlon type, and it\'s the only location type (having multiple is just confusing). \\n\\n So just looking at the bounding box now, here\'s the URL from your example: \\n http:\\/\\/localhost:8983\\/solr\\/select?fl=*,score&amp;start=0&amp;rows=10&amp;q=  \\n{!sfilt%20fl=store}\\n &amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=280&amp;debugQuery=true \\n\\n And I can see that the generated bounding box is: \\n+store_0_coordinate: &#91;43.129843715965166 TO 46.688683890119314&#93;  +store_1_coordinate: &#91;-93.83266208454557 TO -88.79716545231159&#93;  \\n\\n Which just misses the longitude of the point on the document of -93.87341. \\n\\n Can anyone point to an webapp for checking arbitrary distances between two lat\\/lon points?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912808\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912808&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912808\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912808_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912808_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 01:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T01:44:27+0000\'\u003e21\\/Sep\\/10 01:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBill, I found two online distance calculators that both give the distance between the points you provided as 196km.\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html\u003c\\/a\u003e\u003cbr\\/\u003e\\n\u003ca href=\\\"http:\\/\\/www.es.flinders.edu.au\\/~mattom\\/Utilities\\/distance.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.es.flinders.edu.au\\/~mattom\\/Utilities\\/distance.html\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eNow... the distance of 280km you provided should certainly still encompass that, so we still have a bug anyway.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912808_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912808_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 01:44\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T01:44:27+0000\'\u003e21\\/Sep\\/10 01:44\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bill, I found two online distance calculators that both give the distance between the points you provided as 196km. \\n http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html  \\n http:\\/\\/www.es.flinders.edu.au\\/~mattom\\/Utilities\\/distance.html  \\n\\n Now... the distance of 280km you provided should certainly still encompass that, so we still have a bug anyway.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912820\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912820&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912820\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12912820_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912820_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 03:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T03:16:09+0000\'\u003e21\\/Sep\\/10 03:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 22\\/Sep\\/10 01:10\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eYes there is still a bug.\u003c\\/p\u003e\\n\\n\u003cp\u003eMost of what I was saying was right. I just did a quick maps.google.com - click directions - and then put the 2 lat,long in both fields.\u003c\\/p\u003e\\n\\n\u003cp\u003e137 miles = 220.480128 kilometers (Google)\u003cbr\\/\u003e\\n196.6km using \u003ca href=\\\"http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html\u003c\\/a\u003e \u003c\\/p\u003e\\n\\n\u003cp\u003eSee on map: \u003ca href=\\\"http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-map.html?lat1=45.176140&amp;long1=-93.873410&amp;lat2=44.936905&amp;long2=-91.392935\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-map.html?lat1=45.176140&amp;long1=-93.873410&amp;lat2=44.936905&amp;long2=-91.392935\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eDistance:\\t196.6 km\u003cbr\\/\u003e\\nInitial bearing:\\t096\\u00B053\\u203244\\u2033\u003cbr\\/\u003e\\nFinal bearing:\\t098\\u00B039\\u203205\\u2033\u003cbr\\/\u003e\\nMidpoint:\\t45\\u00B003\\u203248\\u2033N, 092\\u00B037\\u203250\\u2033W\u003c\\/p\u003e\\n\\n\u003cp\u003eAs the crow flies is less distance (which makes sense).\u003c\\/p\u003e\\n\\n\u003cp\u003eI even used the JS function on \u003ca href=\\\"http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html:\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html:\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003efunction toRad(a) {\\n    \u003cspan class=\\\"code-keyword\\\"\u003ereturn\u003c\\/span\u003e (a*\u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.PI\\/180);\\n};\\n\\nfunction hsin(lat1,lon1,lat2,lon2) {\\n\u003cspan class=\\\"code-keyword\\\"\u003evar\u003c\\/span\u003e R = 6371; \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ km\\n\u003c\\/span\u003e\u003cspan class=\\\"code-keyword\\\"\u003evar\u003c\\/span\u003e dLat = toRad(lat2-lat1);\\n\u003cspan class=\\\"code-keyword\\\"\u003evar\u003c\\/span\u003e dLon = toRad(lon2-lon1); \\n\u003cspan class=\\\"code-keyword\\\"\u003evar\u003c\\/span\u003e a = \u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.sin(dLat\\/2) * \u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.sin(dLat\\/2) +\\n        \u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.cos(toRad(lat1)) * \u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.cos(toRad(lat2)) * \\n        \u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.sin(dLon\\/2) * \u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.sin(dLon\\/2); \\n\u003cspan class=\\\"code-keyword\\\"\u003evar\u003c\\/span\u003e c = 2 * \u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.atan2(\u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.sqrt(a), \u003cspan class=\\\"code-object\\\"\u003eMath\u003c\\/span\u003e.sqrt(1-a)); \\n\u003cspan class=\\\"code-keyword\\\"\u003evar\u003c\\/span\u003e d = R * c;\\n\u003cspan class=\\\"code-keyword\\\"\u003ereturn\u003c\\/span\u003e d;\\n};\\n\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eAs a Javascript function - while looping through the results. Since I cannot find a way to output the distance automagically from the XML coming back from SOLR.\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e&lt;script&gt;document.write(hsin(lat,lon,solr.lat,solr.lon));&lt;\\/script&gt;\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eI kept playing with d=&lt;km&gt; to see when the filter is not longer showing on the results at while value.\u003c\\/p\u003e\\n\\n\u003cp\u003e&amp;sort=dist(2,store,vector(44.9369054,-91.3929348)) asc \u003c\\/p\u003e\\n\\n\u003cp\u003ed=285 shows.\u003cbr\\/\u003e\\nd=284 does not show.\u003c\\/p\u003e\\n\\n\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12912820_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912820_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 03:16\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T03:16:09+0000\'\u003e21\\/Sep\\/10 03:16\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 22\\/Sep\\/10 01:10\\\"\u003eedited\u003c\\/span\u003e                   Yes there is still a bug. \\n\\n Most of what I was saying was right. I just did a quick maps.google.com - click directions - and then put the 2 lat,long in both fields. \\n\\n 137 miles = 220.480128 kilometers (Google) \\n196.6km using  http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html   \\n\\n See on map:  http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-map.html?lat1=45.176140&amp;long1=-93.873410&amp;lat2=44.936905&amp;long2=-91.392935  \\n\\n Distance:\\t196.6 km \\nInitial bearing:\\t096\\u00B053\\u203244\\u2033 \\nFinal bearing:\\t098\\u00B039\\u203205\\u2033 \\nMidpoint:\\t45\\u00B003\\u203248\\u2033N, 092\\u00B037\\u203250\\u2033W \\n\\n As the crow flies is less distance (which makes sense). \\n\\n I even used the JS function on  http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html:  \\n\\n  \\n function toRad(a) {\\n     return  (a* Math .PI\\/180);\\n};\\n\\nfunction hsin(lat1,lon1,lat2,lon2) {\\n var  R = 6371;  \\/\\/ km\\n  var  dLat = toRad(lat2-lat1);\\n var  dLon = toRad(lon2-lon1); \\n var  a =  Math .sin(dLat\\/2) *  Math .sin(dLat\\/2) +\\n         Math .cos(toRad(lat1)) *  Math .cos(toRad(lat2)) * \\n         Math .sin(dLon\\/2) *  Math .sin(dLon\\/2); \\n var  c = 2 *  Math .atan2( Math .sqrt(a),  Math .sqrt(1-a)); \\n var  d = R * c;\\n return  d;\\n};\\n\\n \\n  \\n\\n As a Javascript function - while looping through the results. Since I cannot find a way to output the distance automagically from the XML coming back from SOLR. \\n\\n  \\n &lt;script&gt;document.write(hsin(lat,lon,solr.lat,solr.lon));&lt;\\/script&gt;\\n \\n  \\n\\n I kept playing with d=&lt;km&gt; to see when the filter is not longer showing on the results at while value. \\n\\n &amp;sort=dist(2,store,vector(44.9369054,-91.3929348)) asc  \\n\\n d=285 shows. \\nd=284 does not show. \\n\\n\\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912822\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912822&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912822\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cmale\\\" id=\\\"commentauthor_12912822_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cmale\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cmale\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris Male\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912822_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 03:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T03:22:04+0000\'\u003e21\\/Sep\\/10 03:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe sorting won\'t be the issue though surely? The bug seems to be in the bounding box generation that Yonik pointed out.  There will be some rounding issues at different places I can imagine, but nothing that would generate such a discrepancy.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"cmale\\\" id=\\\"commentauthor_12912822_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=cmale\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"cmale\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris Male\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912822_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 03:22\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T03:22:04+0000\'\u003e21\\/Sep\\/10 03:22\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The sorting won\'t be the issue though surely? The bug seems to be in the bounding box generation that Yonik pointed out.  There will be some rounding issues at different places I can imagine, but nothing that would generate such a discrepancy.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912823\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912823&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912823\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chrismattmann\\\" id=\\\"commentauthor_12912823_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chrismattmann\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chrismattmann\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris A. Mattmann\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912823_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 03:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T03:23:17+0000\'\u003e21\\/Sep\\/10 03:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eDistance using the Haversine function is extremely sensitive to what spatial reference system the data was recorded in. WGS84 isn\'t particular great with long distances. The PostGIS in Action book has a really good explanation of this.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chrismattmann\\\" id=\\\"commentauthor_12912823_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chrismattmann\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chrismattmann\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris A. Mattmann\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912823_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 03:23\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T03:23:17+0000\'\u003e21\\/Sep\\/10 03:23\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Distance using the Haversine function is extremely sensitive to what spatial reference system the data was recorded in. WGS84 isn\'t particular great with long distances. The PostGIS in Action book has a really good explanation of this.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912827\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912827&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912827\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912827_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912827_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 03:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T03:40:38+0000\'\u003e21\\/Sep\\/10 03:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eDistance using the Haversine function is extremely sensitive to what spatial reference system the data was recorded in. WGS84 isn\'t particular great with long distances.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI know nothing on this topic, but an error of 45% at 200 km?  I\'m pretty certain that there is a bug not having to do with the accuracy of spatial reference systems here.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912827_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912827_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 03:40\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T03:40:38+0000\'\u003e21\\/Sep\\/10 03:40\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     Distance using the Haversine function is extremely sensitive to what spatial reference system the data was recorded in. WGS84 isn\'t particular great with long distances.  \\n\\n I know nothing on this topic, but an error of 45% at 200 km?  I\'m pretty certain that there is a bug not having to do with the accuracy of spatial reference systems here.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912830\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912830&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912830\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chrismattmann\\\" id=\\\"commentauthor_12912830_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chrismattmann\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chrismattmann\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris A. Mattmann\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912830_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 04:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T04:01:50+0000\'\u003e21\\/Sep\\/10 04:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eUmm well if you know nothing then how are you pretty sure? And yes, the error bars are fairly high for the Great Circle distance.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chrismattmann\\\" id=\\\"commentauthor_12912830_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chrismattmann\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chrismattmann\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris A. Mattmann\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912830_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 04:01\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T04:01:50+0000\'\u003e21\\/Sep\\/10 04:01\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Umm well if you know nothing then how are you pretty sure? And yes, the error bars are fairly high for the Great Circle distance.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912833\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912833&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912833\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12912833_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912833_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 04:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T04:07:13+0000\'\u003e21\\/Sep\\/10 04:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThe calculation using hsin Javascript is more accurate than our algorithm ? Chris a few percentage points maybe - but not 45%.\u003c\\/p\u003e\\n\\n\u003cp\u003eI will look into it some more tonight. It can\'t be that complicated.\u003c\\/p\u003e\\n\\n\u003cp\u003eBill\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12912833_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912833_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 04:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T04:07:13+0000\'\u003e21\\/Sep\\/10 04:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    The calculation using hsin Javascript is more accurate than our algorithm ? Chris a few percentage points maybe - but not 45%. \\n\\n I will look into it some more tonight. It can\'t be that complicated. \\n\\n Bill              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912835\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912835&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912835\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chrismattmann\\\" id=\\\"commentauthor_12912835_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chrismattmann\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chrismattmann\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris A. Mattmann\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912835_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 04:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T04:14:01+0000\'\u003e21\\/Sep\\/10 04:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHey Bill:\u003c\\/p\u003e\\n\\n\u003cp\u003eInteresting. usually these types of errors are due to errors in the coordinate reference system of the input data, but if you were able to successfully implement this in JS, then yep, it\'s likely some bug in the existing Solr implementation rather than the input data.\u003c\\/p\u003e\\n\\n\u003cp\u003eCheers,\u003cbr\\/\u003e\\nChris\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"chrismattmann\\\" id=\\\"commentauthor_12912835_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=chrismattmann\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"chrismattmann\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Chris A. Mattmann\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912835_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 04:14\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T04:14:01+0000\'\u003e21\\/Sep\\/10 04:14\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hey Bill: \\n\\n Interesting. usually these types of errors are due to errors in the coordinate reference system of the input data, but if you were able to successfully implement this in JS, then yep, it\'s likely some bug in the existing Solr implementation rather than the input data. \\n\\n Cheers, \\nChris              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912883\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912883&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912883\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12912883_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912883_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 08:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T08:48:46+0000\'\u003e21\\/Sep\\/10 08:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 21\\/Sep\\/10 09:01\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003e\\/lucene\\/contrib\\/spatial\\/src\\/java\\/org\\/apache\\/lucene\\/spatial\\/DistanceUtils.java - hsin appears to be okay.\u003c\\/p\u003e\\n\\n\u003cp\u003eGood print:\u003c\\/p\u003e\\n\\n\u003cp\u003eSystem.out.println(\\\"x1 = \\\" + x1 + \\\" - \\\" + x1*180\\/Math.PI + \\\",y1 = \\\" + y1 + \\\" - \\\" + x2*180\\/Math.PI + \\\",x2 = \\\" + x2 + \\\" - \\\" + x2*180\\/Math.PI + \\\",y2 = \\\" + y2 + \\\" - \\\" + y2*180\\/Math.PI + \\\",radius = \\\" + radius + \\\"\\\\n\\\");\u003cbr\\/\u003e\\n System.out.println(\\\"result = \\\" + result + \\\" km\\\\n\\\");\u003c\\/p\u003e\\n\\n\u003cp\u003eMy guess: \\\"src\\/java\\/org\\/apache\\/solr\\/schema\\/LatLonType.java\u003c\\/p\u003e\\n\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e    \u003cspan class=\\\"code-object\\\"\u003edouble\u003c\\/span\u003e[] ur;\\n    \u003cspan class=\\\"code-object\\\"\u003edouble\u003c\\/span\u003e[] ll;\\n    \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (options.measStr == \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e || options.measStr.equals(\u003cspan class=\\\"code-quote\\\"\u003e\\\"hsin\\\"\u003c\\/span\u003e)) {\\n      ur = DistanceUtils.latLonCornerDegs(point[LAT], point[LONG], options.distance, \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e, options.radius);\\n      ll = DistanceUtils.latLonCornerDegs(point[LAT], point[LONG], options.distance, \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e, options.radius);\\n    } \u003cspan class=\\\"code-keyword\\\"\u003eelse\u003c\\/span\u003e {\\n      ur = DistanceUtils.vectorBoxCorner(point, \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e, options.distance, \u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e);\\n      ll = DistanceUtils.vectorBoxCorner(point, \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e, options.distance, \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e);\\n    }\\n\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12912883_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912883_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 08:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T08:48:46+0000\'\u003e21\\/Sep\\/10 08:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 21\\/Sep\\/10 09:01\\\"\u003eedited\u003c\\/span\u003e                   \\/lucene\\/contrib\\/spatial\\/src\\/java\\/org\\/apache\\/lucene\\/spatial\\/DistanceUtils.java - hsin appears to be okay. \\n\\n Good print: \\n\\n System.out.println(\\\"x1 = \\\" + x1 + \\\" - \\\" + x1*180\\/Math.PI + \\\",y1 = \\\" + y1 + \\\" - \\\" + x2*180\\/Math.PI + \\\",x2 = \\\" + x2 + \\\" - \\\" + x2*180\\/Math.PI + \\\",y2 = \\\" + y2 + \\\" - \\\" + y2*180\\/Math.PI + \\\",radius = \\\" + radius + \\\"\\\\n\\\"); \\n System.out.println(\\\"result = \\\" + result + \\\" km\\\\n\\\"); \\n\\n My guess: \\\"src\\/java\\/org\\/apache\\/solr\\/schema\\/LatLonType.java \\n\\n\\n  \\n      double [] ur;\\n     double [] ll;\\n     if  (options.measStr ==  null  || options.measStr.equals( \\\"hsin\\\" )) {\\n      ur = DistanceUtils.latLonCornerDegs(point[LAT], point[LONG], options.distance,  null ,  true , options.radius);\\n      ll = DistanceUtils.latLonCornerDegs(point[LAT], point[LONG], options.distance,  null ,  false , options.radius);\\n    }  else  {\\n      ur = DistanceUtils.vectorBoxCorner(point,  null , options.distance,  true );\\n      ll = DistanceUtils.vectorBoxCorner(point,  null , options.distance,  false );\\n    }\\n\\n \\n  \\n\\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912981\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912981&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912981\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12912981_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912981_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 13:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T13:48:13+0000\'\u003e21\\/Sep\\/10 13:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHmm, I\'m putting in some more exact tests into LatLonType and SpatialFilterTest, trying to work through this.\u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003eclearIndex();\\n    assertU(adoc(\u003cspan class=\\\"code-quote\\\"\u003e\\\"id\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-quote\\\"\u003e\\\"14\\\"\u003c\\/span\u003e, fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,5\\\"\u003c\\/span\u003e));\\n    assertU(adoc(\u003cspan class=\\\"code-quote\\\"\u003e\\\"id\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-quote\\\"\u003e\\\"15\\\"\u003c\\/span\u003e, fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,15\\\"\u003c\\/span\u003e));\\n    \u003cspan class=\\\"code-comment\\\"\u003e\\/\\/one at the upper right of the box, 3000KM from 0,0, see http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html\\n\u003c\\/span\u003e    assertU(adoc(\u003cspan class=\\\"code-quote\\\"\u003e\\\"id\\\"\u003c\\/span\u003e, \u003cspan class=\\\"code-quote\\\"\u003e\\\"16\\\"\u003c\\/span\u003e, fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"18.71111,19.79750\\\"\u003c\\/span\u003e));\\n    assertU(commit());\\n\\n    checkHits(fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,0\\\"\u003c\\/span\u003e, 1000, 1, 14);\\n    checkHits(fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,0\\\"\u003c\\/span\u003e, 2000, 1, 14);\\n    checkHits(fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,0\\\"\u003c\\/span\u003e, 3000, 2, 14, 15);\\n    checkHits(fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,0\\\"\u003c\\/span\u003e, 3001, 3, 14, 15, 16);\\n    checkHits(fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,0\\\"\u003c\\/span\u003e, 3000.1, 3, 14, 15, 16);\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12912981_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912981_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 13:48\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T13:48:13+0000\'\u003e21\\/Sep\\/10 13:48\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hmm, I\'m putting in some more exact tests into LatLonType and SpatialFilterTest, trying to work through this. \\n  \\n clearIndex();\\n    assertU(adoc( \\\"id\\\" ,  \\\"14\\\" , fieldName,  \\\"0,5\\\" ));\\n    assertU(adoc( \\\"id\\\" ,  \\\"15\\\" , fieldName,  \\\"0,15\\\" ));\\n     \\/\\/one at the upper right of the box, 3000KM from 0,0, see http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong.html\\n     assertU(adoc( \\\"id\\\" ,  \\\"16\\\" , fieldName,  \\\"18.71111,19.79750\\\" ));\\n    assertU(commit());\\n\\n    checkHits(fieldName,  \\\"0,0\\\" , 1000, 1, 14);\\n    checkHits(fieldName,  \\\"0,0\\\" , 2000, 1, 14);\\n    checkHits(fieldName,  \\\"0,0\\\" , 3000, 2, 14, 15);\\n    checkHits(fieldName,  \\\"0,0\\\" , 3001, 3, 14, 15, 16);\\n    checkHits(fieldName,  \\\"0,0\\\" , 3000.1, 3, 14, 15, 16);\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912983\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912983&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912983\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12912983_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912983_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 13:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T13:53:55+0000\'\u003e21\\/Sep\\/10 13:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003e\u003ca href=\\\"http:\\/\\/......\\/solr\\/select?fl=*,score&amp;start=0&amp;rows=10&amp;q={!sfilt%20fl=store_lat_lon}&amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=280&amp;sort=dist(2,store,vector(44.9369054,-91.3929348\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/......\\/solr\\/select?fl=*,score&amp;start=0&amp;rows=10&amp;q={!sfilt%20fl=store_lat_lon}&amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=280&amp;sort=dist(2,store,vector(44.9369054,-91.3929348\u003c\\/a\u003e)) asc \u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThis URL has me a bit stumped.  sfilt on a lat_lon is going to use Great Circle to calculate the distance, but then you are sorting using Euclidean distance?  Not saying that\'s a problem, but it strikes me a bit weird.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12912983_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912983_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 13:53\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T13:53:55+0000\'\u003e21\\/Sep\\/10 13:53\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                      http:\\/\\/......\\/solr\\/select?fl=*,score&amp;start=0&amp;rows=10&amp;q={!sfilt%20fl=store_lat_lon}&amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=280&amp;sort=dist(2,store,vector(44.9369054,-91.3929348 )) asc   \\n\\n This URL has me a bit stumped.  sfilt on a lat_lon is going to use Great Circle to calculate the distance, but then you are sorting using Euclidean distance?  Not saying that\'s a problem, but it strikes me a bit weird.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912986\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912986&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912986\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912986_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912986_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 13:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T13:59:39+0000\'\u003e21\\/Sep\\/10 13:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003ebut then you are sorting using Euclidean distance\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eI imagine it\'s because of the wiki: \u003ca href=\\\"http:\\/\\/wiki.apache.org\\/solr\\/SpatialSearch\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/wiki.apache.org\\/solr\\/SpatialSearch\u003c\\/a\u003e\u003cbr\\/\u003e\\nThe first example uses \\\"dist\\\" and I imagine many are going to interpret that as geo distance (I made the same mistake trying to follow the wiki).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12912986_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912986_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 13:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T13:59:39+0000\'\u003e21\\/Sep\\/10 13:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     but then you are sorting using Euclidean distance  \\n\\n I imagine it\'s because of the wiki:  http:\\/\\/wiki.apache.org\\/solr\\/SpatialSearch  \\nThe first example uses \\\"dist\\\" and I imagine many are going to interpret that as geo distance (I made the same mistake trying to follow the wiki).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912990\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912990&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912990\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12912990_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912990_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 14:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T14:07:02+0000\'\u003e21\\/Sep\\/10 14:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAh, good point, Yonik.  I will fix that.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12912990_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912990_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 14:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T14:07:02+0000\'\u003e21\\/Sep\\/10 14:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Ah, good point, Yonik.  I will fix that.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12912993\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12912993&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12912993\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12912993_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912993_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 14:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T14:10:19+0000\'\u003e21\\/Sep\\/10 14:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e \u003cspan class=\\\"code-keyword\\\"\u003eif\u003c\\/span\u003e (options.measStr == \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e || options.measStr.equals(\u003cspan class=\\\"code-quote\\\"\u003e\\\"hsin\\\"\u003c\\/span\u003e)) {\\n      ur = DistanceUtils.latLonCornerDegs(point[LAT], point[LONG], options.distance, \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e, options.radius);\\n      ll = DistanceUtils.latLonCornerDegs(point[LAT], point[LONG], options.distance, \u003cspan class=\\\"code-keyword\\\"\u003enull\u003c\\/span\u003e, \u003cspan class=\\\"code-keyword\\\"\u003efalse\u003c\\/span\u003e, options.radius);\\n    }\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eIt could very well be in the determination of the two corners.  That being said, in the test I just posted, the point 18.71111, 19.79750 is 3000KM away from 0,0 according to movable-type when traveling along a 45 degree bearing and the tests \u003c\\/p\u003e\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003echeckHits(fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,0\\\"\u003c\\/span\u003e, 3000, 2, 14, 15);\\ncheckHits(fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,0\\\"\u003c\\/span\u003e, 3001, 3, 14, 15, 16);\\ncheckHits(fieldName, \u003cspan class=\\\"code-quote\\\"\u003e\\\"0,0\\\"\u003c\\/span\u003e, 3000.1, 3, 14, 15, 16);\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003ePass for me now that Yonik\'s patch is applied.  Please check my logic.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12912993_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12912993_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 14:10\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T14:10:19+0000\'\u003e21\\/Sep\\/10 14:10\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     \\n   if  (options.measStr ==  null  || options.measStr.equals( \\\"hsin\\\" )) {\\n      ur = DistanceUtils.latLonCornerDegs(point[LAT], point[LONG], options.distance,  null ,  true , options.radius);\\n      ll = DistanceUtils.latLonCornerDegs(point[LAT], point[LONG], options.distance,  null ,  false , options.radius);\\n    }\\n \\n  \\n\\n It could very well be in the determination of the two corners.  That being said, in the test I just posted, the point 18.71111, 19.79750 is 3000KM away from 0,0 according to movable-type when traveling along a 45 degree bearing and the tests  \\n  \\n checkHits(fieldName,  \\\"0,0\\\" , 3000, 2, 14, 15);\\ncheckHits(fieldName,  \\\"0,0\\\" , 3001, 3, 14, 15, 16);\\ncheckHits(fieldName,  \\\"0,0\\\" , 3000.1, 3, 14, 15, 16);\\n \\n  \\n\\n Pass for me now that Yonik\'s patch is applied.  Please check my logic.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913011\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913011&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913011\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12913011_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913011_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 14:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T14:45:00+0000\'\u003e21\\/Sep\\/10 14:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Yonik Seeley - 21\\/Sep\\/10 14:45\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOk Grant &amp; I chatted and we figured out what\'s going wrong.  We were calculating a box the size that would completely fit inside the circle rather than vice-versa.  This was caused by taking the distance and projecting it out to calculate the corners of the box.  But the distance given should really be to the side of the box... and the distance from the center to the corner of the box should be greater (if the box is to completely encompass the circle).\u003c\\/p\u003e\\n\\n\u003cp\u003eThe fix should be easy - the distance to the corner of the box is sqrt(2) * dist_to_side_of_box.  So internally we just need to multiply the distance by sqrt(2) before finding the corners.\u003c\\/p\u003e\\n\\n\u003cp\u003eGrant is coding up the fix and tests.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12913011_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913011_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 14:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T14:45:00+0000\'\u003e21\\/Sep\\/10 14:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Yonik Seeley - 21\\/Sep\\/10 14:45\\\"\u003eedited\u003c\\/span\u003e                   Ok Grant &amp; I chatted and we figured out what\'s going wrong.  We were calculating a box the size that would completely fit inside the circle rather than vice-versa.  This was caused by taking the distance and projecting it out to calculate the corners of the box.  But the distance given should really be to the side of the box... and the distance from the center to the corner of the box should be greater (if the box is to completely encompass the circle). \\n\\n The fix should be easy - the distance to the corner of the box is sqrt(2) * dist_to_side_of_box.  So internally we just need to multiply the distance by sqrt(2) before finding the corners. \\n\\n Grant is coding up the fix and tests.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913035\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913035&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913035\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12913035_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913035_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 15:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T15:36:20+0000\'\u003e21\\/Sep\\/10 15:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eMore chatting with Grant - sqrt(2) is correct if things are flat, but prob not correct for a bounding box on the surface of a sphere.\u003cbr\\/\u003e\\nAnother thought is toproject left, right, up, and down to the sides of the box and use those lat ranges and lon ranges directly as the bounding box.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe crazy thing is that this is basic geo code - isn\'t there some bounding box calculation code out there we can use or at least reference?\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"yseeley@gmail.com\\\" id=\\\"commentauthor_12913035_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=yseeley%40gmail.com\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"yseeley@gmail.com\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Yonik Seeley\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913035_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 15:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T15:36:20+0000\'\u003e21\\/Sep\\/10 15:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    More chatting with Grant - sqrt(2) is correct if things are flat, but prob not correct for a bounding box on the surface of a sphere. \\nAnother thought is toproject left, right, up, and down to the sides of the box and use those lat ranges and lon ranges directly as the bounding box. \\n\\n The crazy thing is that this is basic geo code - isn\'t there some bounding box calculation code out there we can use or at least reference?              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913126\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913126&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913126\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913126_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913126_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 17:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T17:59:16+0000\'\u003e21\\/Sep\\/10 17:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 22\\/Sep\\/10 01:04\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGrant: Can you give a good example using the same measurements for sorting and sfilt ?\u003c\\/p\u003e\\n\\n\u003cp\u003eWill this work? The Spatial Wiki \u003ca href=\\\"http:\\/\\/wiki.apache.org\\/solr\\/SpatialSearch\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/wiki.apache.org\\/solr\\/SpatialSearch\u003c\\/a\u003e shows:\u003c\\/p\u003e\\n\\n\u003cp\u003e3.Using the \\\"frange\\\" QParser, as in fq=\u003c\\/p\u003e\\n{!frange l=0 u=400}\\n\u003cp\u003ehsin(0.57, -1.3, lat_rad, lon_rad, 3963.205) \u003c\\/p\u003e\\n\\n\u003cp\u003eThe Function Wiki Shows:\u003c\\/p\u003e\\n\\n\u003cp\u003ehsin(radius, true|false, x1,y1,x2,y2)\u003c\\/p\u003e\\n\\n\u003cp\u003eHere is the correct solution: (UPDATED)\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\\nhttp:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/localhost:8983\\/solr\\/select\\/??fl=*,score&amp;start=0&amp;rows=10&amp;q={!sfilt%20fl=store}&amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=285&amp;sort=hsin(6371,\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e,store,vector(44.9369054,-91.3929348))%20asc\\n\u003c\\/span\u003e\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n\\n\u003cp\u003eThe Local Solr from Patrick projected the ur, ll using the distance and did a range check to see if the points are in the box.It is a close approximation. \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913126_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913126_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 17:59\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T17:59:16+0000\'\u003e21\\/Sep\\/10 17:59\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 22\\/Sep\\/10 01:04\\\"\u003eedited\u003c\\/span\u003e                   Grant: Can you give a good example using the same measurements for sorting and sfilt ? \\n\\n Will this work? The Spatial Wiki  http:\\/\\/wiki.apache.org\\/solr\\/SpatialSearch  shows: \\n\\n 3.Using the \\\"frange\\\" QParser, as in fq= \\n{!frange l=0 u=400}\\n hsin(0.57, -1.3, lat_rad, lon_rad, 3963.205)  \\n\\n The Function Wiki Shows: \\n\\n hsin(radius, true|false, x1,y1,x2,y2) \\n\\n Here is the correct solution: (UPDATED) \\n\\n  \\n \\nhttp: \\/\\/localhost:8983\\/solr\\/select\\/??fl=*,score&amp;start=0&amp;rows=10&amp;q={!sfilt%20fl=store}&amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=285&amp;sort=hsin(6371, true ,store,vector(44.9369054,-91.3929348))%20asc\\n \\n \\n  \\n\\n The Local Solr from Patrick projected the ur, ll using the distance and did a range check to see if the points are in the box.It is a close approximation.               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913134\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913134&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913134\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913134_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913134_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 18:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T18:07:11+0000\'\u003e21\\/Sep\\/10 18:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 21\\/Sep\\/10 18:20\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eTwo good articles:\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates\u003c\\/a\u003e\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003ePole and good pictures\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/stackoverflow.com\\/questions\\/238260\\/how-to-calculate-the-bounding-box-for-a-given-lat-lng-location\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/stackoverflow.com\\/questions\\/238260\\/how-to-calculate-the-bounding-box-for-a-given-lat-lng-location\u003c\\/a\u003e\u003c\\/p\u003e\\n\u003cul class=\\\"alternate\\\" type=\\\"square\\\"\u003e\\n\\t\u003cli\u003eWhy Sphere is only good for 10KM distances.\u003c\\/li\u003e\\n\u003c\\/ul\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913134_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913134_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 18:07\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T18:07:11+0000\'\u003e21\\/Sep\\/10 18:07\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 21\\/Sep\\/10 18:20\\\"\u003eedited\u003c\\/span\u003e                   Two good articles: \\n\\n  http:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates  \\n \\n\\t Pole and good pictures \\n \\n\\n\\n  http:\\/\\/stackoverflow.com\\/questions\\/238260\\/how-to-calculate-the-bounding-box-for-a-given-lat-lng-location  \\n \\n\\t Why Sphere is only good for 10KM distances. \\n \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913182\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913182&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913182\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12913182_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913182_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T19:03:31+0000\'\u003e21\\/Sep\\/10 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cblockquote\u003e\u003cp\u003eThe Local Solr from Patrick projected the ur, ll using the distance and did a range check to see if the points are in the box.It is a close approximation. An ellipses would be closer. Circle is not close enough.\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eOK, so I went back to that code and looked and we are doing the same thing (in fact, I based it off of that).  Namely, the only thing that is not working in the code is the interpretation of the results and not the math itself.  To that point, Bill, if you look at the points you gave, it is right on the edge of a box that is centered on that point (roughly, Chippewa Falls, WI), but still outside, of the box that was created by Solr (at 280KM).  I worked this out by viewing the maps at:\u003cbr\\/\u003e\\n1. \u003ca href=\\\"http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-map.html?lat1=44.936905&amp;long1=-91.392935&amp;lat2=43.09&amp;long2=-93.87341\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-map.html?lat1=44.936905&amp;long1=-91.392935&amp;lat2=43.09&amp;long2=-93.87341\u003c\\/a\u003e\u003cbr\\/\u003e\\n2. \u003ca href=\\\"http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-map.html?lat1=44.936905&amp;long1=-91.392935&amp;lat2=45.17614&amp;long2=-93.87341\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-map.html?lat1=44.936905&amp;long1=-91.392935&amp;lat2=45.17614&amp;long2=-93.87341\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eThe reason is that we are calculating the box based on the fact that the upper right and lower left corners are 280KM away.  The question is then, is this the intuitive thing app developers expect?  If app developers think in terms of a radius of distance 280km and all points inside, then no, it isn\'t.  But if they think in terms of the upper and lower box corners with no suggestion of \\\"radius\\\", hence implying a circle then it does.  \u003c\\/p\u003e\\n\\n\u003cp\u003eSo, one fix for this could solely be a documentation fix.  The other fix is to change the reasoning above to simply find the north, south, east, west points of a box that transcribes a radius of the distance given (since most users tend to think in terms of radius from where they are located and not upper and lower box corners.  This will create a box that encloses said radius completely and might give a slight bit more fuzz up near the box corners due to curvature, but that should be fine.  I\'m working on a patch for this fix, as I think it is the better way.\u003c\\/p\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12913182_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913182_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 19:03\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T19:03:31+0000\'\u003e21\\/Sep\\/10 19:03\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                     The Local Solr from Patrick projected the ur, ll using the distance and did a range check to see if the points are in the box.It is a close approximation. An ellipses would be closer. Circle is not close enough.  \\n\\n OK, so I went back to that code and looked and we are doing the same thing (in fact, I based it off of that).  Namely, the only thing that is not working in the code is the interpretation of the results and not the math itself.  To that point, Bill, if you look at the points you gave, it is right on the edge of a box that is centered on that point (roughly, Chippewa Falls, WI), but still outside, of the box that was created by Solr (at 280KM).  I worked this out by viewing the maps at: \\n1.  http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-map.html?lat1=44.936905&amp;long1=-91.392935&amp;lat2=43.09&amp;long2=-93.87341  \\n2.  http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-map.html?lat1=44.936905&amp;long1=-91.392935&amp;lat2=45.17614&amp;long2=-93.87341  \\n\\n The reason is that we are calculating the box based on the fact that the upper right and lower left corners are 280KM away.  The question is then, is this the intuitive thing app developers expect?  If app developers think in terms of a radius of distance 280km and all points inside, then no, it isn\'t.  But if they think in terms of the upper and lower box corners with no suggestion of \\\"radius\\\", hence implying a circle then it does.   \\n\\n So, one fix for this could solely be a documentation fix.  The other fix is to change the reasoning above to simply find the north, south, east, west points of a box that transcribes a radius of the distance given (since most users tend to think in terms of radius from where they are located and not upper and lower box corners.  This will create a box that encloses said radius completely and might give a slight bit more fuzz up near the box corners due to curvature, but that should be fine.  I\'m working on a patch for this fix, as I think it is the better way. \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913244\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913244&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913244\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913244_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913244_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 20:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T20:52:50+0000\'\u003e21\\/Sep\\/10 20:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 21\\/Sep\\/10 22:44\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eOK so that makes sense. Youa re using distance at 45 degrees. So the east-west would not extend far enough.\u003c\\/p\u003e\\n\\n\u003cp\u003eUsing \u003ca href=\\\"http:\\/\\/en.wikipedia.org\\/wiki\\/Pythagorean_theorem\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/en.wikipedia.org\\/wiki\\/Pythagorean_theorem\u003c\\/a\u003e would help on the east-west case, but circle or ellipses is MUCH better.\u003c\\/p\u003e\\n\\n\u003cp\u003eAlthough extending the 45 degree out would be a conservative estimate. And since we usually sort by distance asc, those extra points would be in the result set but at the end of the list. (this is an improvement - again not at good as ellipses).\u003c\\/p\u003e\\n\\n\u003cp\u003eYou need a quick function that tells you \\\"is this lat,long in the circle \\/ ellipses or not\\\". A range \u003cspan class=\\\"error\\\"\u003e&#91;X to Y&#93;\u003c\\/span\u003e will not get you that. You need to use hsin().\u003c\\/p\u003e\\n\\n\u003cp\u003eOn potential:\u003c\\/p\u003e\\n\\n\u003cp\u003e1. Do range select using points \u003ca href=\\\"http:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates\u003c\\/a\u003e \u003cbr\\/\u003e\\n(Lat =&gt; 1.2393 AND Lat &lt;= 1.5532) AND (Lon &gt;= -1.8184 AND Lon &lt;= 0.4221)\u003cbr\\/\u003e\\n2. Check those points for distance  \\\"in the ellipses\\\".  \u003ca href=\\\"http:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates\u003c\\/a\u003e\u003cbr\\/\u003e\\n acos(sin(1.3963) * sin(Lat) + cos(1.3963) * cos(Lat) * cos(Lon - (-0.6981))) &lt;= 0.1570;\u003c\\/p\u003e\\n\\n\u003cp\u003eThat should make it fast and simplify the calculations.\u003c\\/p\u003e\\n\\n\u003cp\u003eUPDATE - NOTE:\u003c\\/p\u003e\\n\\n\u003cp\u003ePlugging all this into the web site, proves that Pythagorean is a good approximation... \u003c\\/p\u003e\\n\\n\u003cp\u003eSee Excel attached.\u003c\\/p\u003e\\n\\n\u003cp\u003ehsin = 309 km from pt to max\u003cbr\\/\u003e\\nhsin = 314 km from pt to min\u003cbr\\/\u003e\\nEstimate using Pythagorean is 311 using sqrt(220km^2+220km^2)\u003c\\/p\u003e\\n\\n\u003cp\u003e41.42% is the difference from west-east to 45 degree. sqrt(1^2+1^2)\u003c\\/p\u003e\\n\\n\u003cp\u003eYonik: sqrt(2) is right - but the spreadsheet is a bit better based on spheres.\u003c\\/p\u003e\\n\\n\u003cp\u003eThe #2 will then subselect the points to limit within that result set.\u003c\\/p\u003e\\n\\n\u003cp\u003eTherefore, a user could take a distance from the user, sqrt(d^2+d^2) and use that to get a list - it is not exact but better than nothing.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913244_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913244_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 20:52\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T20:52:50+0000\'\u003e21\\/Sep\\/10 20:52\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 21\\/Sep\\/10 22:44\\\"\u003eedited\u003c\\/span\u003e                   OK so that makes sense. Youa re using distance at 45 degrees. So the east-west would not extend far enough. \\n\\n Using  http:\\/\\/en.wikipedia.org\\/wiki\\/Pythagorean_theorem  would help on the east-west case, but circle or ellipses is MUCH better. \\n\\n Although extending the 45 degree out would be a conservative estimate. And since we usually sort by distance asc, those extra points would be in the result set but at the end of the list. (this is an improvement - again not at good as ellipses). \\n\\n You need a quick function that tells you \\\"is this lat,long in the circle \\/ ellipses or not\\\". A range  &#91;X to Y&#93;  will not get you that. You need to use hsin(). \\n\\n On potential: \\n\\n 1. Do range select using points  http:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates   \\n(Lat =&gt; 1.2393 AND Lat &lt;= 1.5532) AND (Lon &gt;= -1.8184 AND Lon &lt;= 0.4221) \\n2. Check those points for distance  \\\"in the ellipses\\\".   http:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates  \\n acos(sin(1.3963) * sin(Lat) + cos(1.3963) * cos(Lat) * cos(Lon - (-0.6981))) &lt;= 0.1570; \\n\\n That should make it fast and simplify the calculations. \\n\\n UPDATE - NOTE: \\n\\n Plugging all this into the web site, proves that Pythagorean is a good approximation...  \\n\\n See Excel attached. \\n\\n hsin = 309 km from pt to max \\nhsin = 314 km from pt to min \\nEstimate using Pythagorean is 311 using sqrt(220km^2+220km^2) \\n\\n 41.42% is the difference from west-east to 45 degree. sqrt(1^2+1^2) \\n\\n Yonik: sqrt(2) is right - but the spreadsheet is a bit better based on spheres. \\n\\n The #2 will then subselect the points to limit within that result set. \\n\\n Therefore, a user could take a distance from the user, sqrt(d^2+d^2) and use that to get a list - it is not exact but better than nothing.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913295\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913295&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913295\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913295_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913295_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 22:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T22:37:04+0000\'\u003e21\\/Sep\\/10 22:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eExample calcs to get lat\\/long for distance of 220km from 44.93691,-91.3929\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913295_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913295_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'21\\/Sep\\/10 22:37\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-21T22:37:04+0000\'\u003e21\\/Sep\\/10 22:37\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Example calcs to get lat\\/long for distance of 220km from 44.93691,-91.3929              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913363\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913363&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913363\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913363_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913363_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 02:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T02:55:05+0000\'\u003e22\\/Sep\\/10 02:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 22\\/Sep\\/10 02:56\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eThere is another example...\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-db.html\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-db.html\u003c\\/a\u003e not sure - but this is also a good first cut. Then if you want more accurate results calculate results that come back\u003cbr\\/\u003e\\n and through out ones that are not within. Cache results. The link above \u003ca href=\\\"http:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates\u003c\\/a\u003e appears a little more accurate. But this is simpler.\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ first-cut bounding box (in degrees)\\n\u003c\\/span\u003e$maxLat = $lat + rad2deg($rad\\/$R);\\n$minLat = $lat - rad2deg($rad\\/$R);\\n\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/ compensate \u003cspan class=\\\"code-keyword\\\"\u003efor\u003c\\/span\u003e degrees longitude getting smaller with increasing latitude\\n\u003c\\/span\u003e$maxLon = $lon + rad2deg($rad\\/$R\\/cos(deg2rad($lat)));\\n$minLon = $lon - rad2deg($rad\\/$R\\/cos(deg2rad($lat)));\\n \\n$sql = \\\"Select ID, Postcode, Lat, Lon\\n        From MyTable\\n        Where Lat &gt; $minLat And Lat &lt; $maxLat\\n          And Lon &gt; $minLon And Lon &lt; $maxLon\\\";\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e\\n \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913363_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913363_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 02:55\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T02:55:05+0000\'\u003e22\\/Sep\\/10 02:55\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 22\\/Sep\\/10 02:56\\\"\u003eedited\u003c\\/span\u003e                   There is another example... \\n\\n  http:\\/\\/www.movable-type.co.uk\\/scripts\\/latlong-db.html  not sure - but this is also a good first cut. Then if you want more accurate results calculate results that come back \\n and through out ones that are not within. Cache results. The link above  http:\\/\\/janmatuschek.de\\/LatitudeLongitudeBoundingCoordinates  appears a little more accurate. But this is simpler. \\n\\n  \\n \\n \\/\\/ first-cut bounding box (in degrees)\\n $maxLat = $lat + rad2deg($rad\\/$R);\\n$minLat = $lat - rad2deg($rad\\/$R);\\n \\/\\/ compensate  for  degrees longitude getting smaller with increasing latitude\\n $maxLon = $lon + rad2deg($rad\\/$R\\/cos(deg2rad($lat)));\\n$minLon = $lon - rad2deg($rad\\/$R\\/cos(deg2rad($lat)));\\n \\n$sql = \\\"Select ID, Postcode, Lat, Lon\\n        From MyTable\\n        Where Lat &gt; $minLat And Lat &lt; $maxLat\\n          And Lon &gt; $minLon And Lon &lt; $maxLon\\\";\\n \\n  \\n             \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913368\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913368&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913368\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913368_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913368_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 03:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T03:42:20+0000\'\u003e22\\/Sep\\/10 03:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 22\\/Sep\\/10 03:47\\\"\u003eedited\u003c\\/span\u003e \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eFixed the distance calc for box. We still need to take the results and do a hsin()\u003c\\/p\u003e\\n\\n\u003cdiv class=\\\"code panel\\\" style=\\\"border-width: 1px;\\\"\u003e\u003cdiv class=\\\"codeContent panelContent\\\"\u003e\\n\u003cpre class=\\\"code-java\\\"\u003e\\n\u003cspan class=\\\"code-keyword\\\"\u003ethis\u003c\\/span\u003e now returns 8 on example data:\\n\\nhttp:\u003cspan class=\\\"code-comment\\\"\u003e\\/\\/localhost:8983\\/solr\\/select\\/??fl=*,score&amp;start=0&amp;rows=10&amp;q={!sfilt%20fl=store}&amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=196&amp;sort=hsin%286371,\u003cspan class=\\\"code-keyword\\\"\u003etrue\u003c\\/span\u003e,store,vector%2844.9369054,-91.3929348%29%29%20asc\\n\u003c\\/span\u003e\\nNote: 196 km is right\\n\\n\u003c\\/pre\u003e\\n\u003c\\/div\u003e\u003c\\/div\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n                                            \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913368_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913368_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 03:42\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T03:42:20+0000\'\u003e22\\/Sep\\/10 03:42\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e   - \u003cspan class=\\\"redText subText\\\" title=\\\"Bill Bell - 22\\/Sep\\/10 03:47\\\"\u003eedited\u003c\\/span\u003e                   Fixed the distance calc for box. We still need to take the results and do a hsin() \\n\\n  \\n \\n this  now returns 8 on example data:\\n\\nhttp: \\/\\/localhost:8983\\/solr\\/select\\/??fl=*,score&amp;start=0&amp;rows=10&amp;q={!sfilt%20fl=store}&amp;qt=standard&amp;pt=44.9369054,-91.3929348&amp;d=196&amp;sort=hsin%286371, true ,store,vector%2844.9369054,-91.3929348%29%29%20asc\\n \\nNote: 196 km is right\\n\\n \\n               \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913493\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913493&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913493\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12913493_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913493_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 10:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T10:36:47+0000\'\u003e22\\/Sep\\/10 10:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCouple of things:\u003c\\/p\u003e\\n\\n\u003cp\u003e1. I did find some other errors around radians, etc.  I will work to fix today.\u003c\\/p\u003e\\n\\n\u003cblockquote\u003e\u003cp\u003eAlthough extending the 45 degree out would be a conservative estimate. And since we usually sort by distance asc, those extra points would be in the result set but at the end of the list. (this is an improvement - again not at good as ellipses).\u003c\\/p\u003e\u003c\\/blockquote\u003e\\n\\n\u003cp\u003eThis FieldType is going to be implemented to be a bounding box around a circle of a radius specified by the passed in distance, which seems to be what most tools do, at least as one way of doing it.  If you want, pick your distance based on the max distance of an ellipse or you can override LatLonType.createSpatialQuery to do so in your own FieldType.  Naturally, this will overselect, but this bounding box stuff is meant to be a filter, like you said.  You can then sort by distance later.  \u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12913493_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913493_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 10:36\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T10:36:47+0000\'\u003e22\\/Sep\\/10 10:36\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Couple of things: \\n\\n 1. I did find some other errors around radians, etc.  I will work to fix today. \\n\\n  Although extending the 45 degree out would be a conservative estimate. And since we usually sort by distance asc, those extra points would be in the result set but at the end of the list. (this is an improvement - again not at good as ellipses).  \\n\\n This FieldType is going to be implemented to be a bounding box around a circle of a radius specified by the passed in distance, which seems to be what most tools do, at least as one way of doing it.  If you want, pick your distance based on the max distance of an ellipse or you can override LatLonType.createSpatialQuery to do so in your own FieldType.  Naturally, this will overselect, but this bounding box stuff is meant to be a filter, like you said.  You can then sort by distance later.                \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913567\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913567&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913567\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913567_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913567_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 14:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T14:25:42+0000\'\u003e22\\/Sep\\/10 14:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eGrant: Did you see my patch? It appears to work pretty well. I implemented the solution for you.\u003c\\/p\u003e\\n\\n\u003cp\u003eOne idea: it might be interesting to pass vector(lat,long) as an optional parameters to sfilt ur, ll if we continue using the box. I can see it pretty useful for google maps (to limit the results based on the map size).\u003c\\/p\u003e\\n\\n\u003cp\u003eBill\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913567_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913567_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 14:25\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T14:25:42+0000\'\u003e22\\/Sep\\/10 14:25\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Grant: Did you see my patch? It appears to work pretty well. I implemented the solution for you. \\n\\n One idea: it might be interesting to pass vector(lat,long) as an optional parameters to sfilt ur, ll if we continue using the box. I can see it pretty useful for google maps (to limit the results based on the map size). \\n\\n Bill              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913572\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913572&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913572\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913572_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913572_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 14:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T14:32:29+0000\'\u003e22\\/Sep\\/10 14:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eAnother reference:\u003c\\/p\u003e\\n\\n\u003cp\u003eI like the pointInPolygon() idea from Microsoft. I do not like that they don\'t have a short-cut to reduce the shapes like what we have implemented. But their looping to make sure the distance is being satisfied is good.... See below.\u003c\\/p\u003e\\n\\n\u003cp\u003e\u003ca href=\\\"http:\\/\\/msdn.microsoft.com\\/en-us\\/library\\/cc451895.aspx\\\" class=\\\"external-link\\\" rel=\\\"nofollow\\\"\u003ehttp:\\/\\/msdn.microsoft.com\\/en-us\\/library\\/cc451895.aspx\u003c\\/a\u003e\u003c\\/p\u003e\\n\\n\u003cp\u003eAs follow-up, I would take my patch apply it, and then loop through the results to limit by hsin() distance to make sure the results are not on the 45 degree.... I also would make this 2nd step optional, since it slows things down, and for most applications they don\'t need to be that precise. (SInce you order by hsin() desc - the large distances if there are any will be at the bottom and inconsequential).\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"billnbell\\\" id=\\\"commentauthor_12913572_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=billnbell\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"billnbell\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Bill Bell\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913572_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 14:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T14:32:29+0000\'\u003e22\\/Sep\\/10 14:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Another reference: \\n\\n I like the pointInPolygon() idea from Microsoft. I do not like that they don\'t have a short-cut to reduce the shapes like what we have implemented. But their looping to make sure the distance is being satisfied is good.... See below. \\n\\n  http:\\/\\/msdn.microsoft.com\\/en-us\\/library\\/cc451895.aspx  \\n\\n As follow-up, I would take my patch apply it, and then loop through the results to limit by hsin() distance to make sure the results are not on the 45 degree.... I also would make this 2nd step optional, since it slows things down, and for most applications they don\'t need to be that precise. (SInce you order by hsin() desc - the large distances if there are any will be at the bottom and inconsequential).              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913573\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913573&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913573\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12913573_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913573_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 14:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T14:32:32+0000\'\u003e22\\/Sep\\/10 14:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHere\'s a patch that puts in the east\\/west, north\\/south bounding box, which seems to be what PostGIS offers.  It passes Bill\'s example at the top and I put in other tests.  I refactored some of the DistanceUtils to have some other useful methods.  I think I finally got all my degrees\\/radians straightened out, too.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12913573_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913573_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 14:32\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T14:32:32+0000\'\u003e22\\/Sep\\/10 14:32\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Here\'s a patch that puts in the east\\/west, north\\/south bounding box, which seems to be what PostGIS offers.  It passes Bill\'s example at the top and I put in other tests.  I refactored some of the DistanceUtils to have some other useful methods.  I think I finally got all my degrees\\/radians straightened out, too.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12913577\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12913577&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12913577\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12913577_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913577_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T14:34:36+0000\'\u003e22\\/Sep\\/10 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eHi Bill,\u003c\\/p\u003e\\n\\n\u003cp\u003eSorry, yeah, I did see your patch, but was almost done w\\/ what I had at that point.  Keep in mind that the approach is meant to be a rough cut for filtering, as it is not 100% accurate.  It is expected that most people would filter based on these range queries, and then do other things to do exact distances later in terms of scoring and sorting.  I will document this on the Wiki.\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12913577_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12913577_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'22\\/Sep\\/10 14:34\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-22T14:34:36+0000\'\u003e22\\/Sep\\/10 14:34\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Hi Bill, \\n\\n Sorry, yeah, I did see your patch, but was almost done w\\/ what I had at that point.  Keep in mind that the approach is meant to be a rough cut for filtering, as it is not 100% accurate.  It is expected that most people would filter based on these range queries, and then do other things to do exact distances later in terms of scoring and sorting.  I will document this on the Wiki.              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12914014\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12914014&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12914014\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12914014_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12914014_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Sep\\/10 12:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-23T12:51:01+0000\'\u003e23\\/Sep\\/10 12:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eCommitted to trunk and 3.x\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_12914014_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12914014_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'23\\/Sep\\/10 12:51\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-23T12:51:01+0000\'\u003e23\\/Sep\\/10 12:51\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Committed to trunk and 3.x              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-12915239\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=12915239&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12915239\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"simonr\\\" id=\\\"commentauthor_12915239_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=simonr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"simonr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Simon Rijnders\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12915239_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Sep\\/10 08:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-27T08:38:41+0000\'\u003e27\\/Sep\\/10 08:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eIs there possible now to use a current Solr build (nightly) to solve this problem: find all points (using index) in radius of R km on earth?\u003c\\/p\u003e\\n\\n\u003cp\u003eIf so, I\'m more than willing to test this for you guys....\u003c\\/p\u003e\\n\\n\u003cp\u003eThanks!\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"simonr\\\" id=\\\"commentauthor_12915239_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=simonr\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"simonr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Simon Rijnders\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_12915239_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'27\\/Sep\\/10 08:38\'\u003e\u003ctime class=\'livestamp\' datetime=\'2010-09-27T08:38:41+0000\'\u003e27\\/Sep\\/10 08:38\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Is there possible now to use a current Solr build (nightly) to solve this problem: find all points (using index) in radius of R km on earth? \\n\\n If so, I\'m more than willing to test this for you guys.... \\n\\n Thanks!              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \\n\\n\\n\u003cdiv id=\\\"comment-13013177\\\" class=\\\"issue-data-block activity-comment twixi-block  expanded\\\"\u003e\\n    \u003cdiv class=\\\"twixi-wrap verbose actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Collapse comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-expanded\\\"\u003e\u003cspan\u003eHide\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-links\\\"\u003e\\n                \u003ca href=\\\"\\/jira\\/browse\\/SOLR-2125?focusedCommentId=13013177&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13013177\\\"\\n                   title=\\\"Right click and copy link for a permanent link to this comment.\\\" class=\\\"activitymodule-link issue-comment-action\\\"\u003e\\n                    \u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-link\\\"\u003ePermalink\u003c\\/span\u003e\u003c\\/a\u003e\\n                                            \u003c\\/div\u003e\\n            \u003cdiv class=\\\"action-details\\\"\u003e        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_13013177_verbose\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13013177_verbose subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/11 15:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-30T15:45:47+0000\'\u003e30\\/Mar\\/11 15:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e  \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n        \u003cdiv class=\\\"action-body flooded\\\"\u003e\u003cp\u003eBulk close for 3.1.0 release\u003c\\/p\u003e \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n    \u003cdiv class=\\\"twixi-wrap concise actionContainer\\\"\u003e\\n        \u003cdiv class=\\\"action-head\\\"\u003e\\n            \u003ca href=\\\"#\\\" title=\\\"Expand comment\\\" class=\\\"twixi\\\"\u003e\u003cspan class=\\\"icon-default aui-icon aui-icon-small aui-iconfont-collapsed\\\"\u003e\u003cspan\u003eShow\u003c\\/span\u003e\u003c\\/span\u003e\u003c\\/a\u003e\\n            \u003cdiv class=\\\"action-details flooded\\\"\u003e\\n                        \\n    \\n    \\n    \\n                \\n\\n    \u003ca class=\\\"user-hover user-avatar\\\" rel=\\\"gsingers\\\" id=\\\"commentauthor_13013177_concise\\\" href=\\\"\\/jira\\/secure\\/ViewProfile.jspa?name=gsingers\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-xsmall\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"https:\\/\\/issues.apache.org\\/jira\\/secure\\/useravatar?size=xsmall&amp;avatarId=10452\\\" alt=\\\"gsingers\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e Grant Ingersoll\u003c\\/a\u003e\\n added a comment  - \u003cspan class=\'commentdate_13013177_concise subText\'\u003e\u003cspan class=\'date user-tz\' title=\'30\\/Mar\\/11 15:45\'\u003e\u003ctime class=\'livestamp\' datetime=\'2011-03-30T15:45:47+0000\'\u003e30\\/Mar\\/11 15:45\u003c\\/time\u003e\u003c\\/span\u003e\u003c\\/span\u003e                    Bulk close for 3.1.0 release              \u003c\\/div\u003e\\n        \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\u003c\\/div\u003e\\n                             \u003c\\/div\u003e\\n    \u003c\\/div\u003e\\n\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["scope-filter-data"]="{\"createScopeActions\":[],\"scopes\":[]}";
WRM._unparsedData["sidebar-collapsed-by-default"]="true";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:can-manage"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:with-icons"]="false";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:shortcuts"]="[]";
WRM._unparsedData["com.atlassian.jira.projects.shortcuts:project-id"]="12310230";
WRM._unparsedData["sidebar-id"]="\"\u003cdiv class=\\\"aui-sidebar  projects-sidebar sidebar-pending\\\" \u003e\u003cdiv class=\\\"aui-sidebar-wrapper\\\"\u003e\u003cdiv class=\\\"aui-sidebar-body\\\"\u003e\u003cheader class=\\\"aui-page-header\\\"\u003e\u003cdiv class=\\\"aui-page-header-inner\\\"\u003e\u003cdiv class=\\\"aui-page-header-image\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\" class=\\\"jira-project-avatar\\\"\u003e\u003cspan class=\\\"aui-avatar aui-avatar-large aui-avatar-project\\\"\u003e\u003cspan class=\\\"aui-avatar-inner\\\"\u003e\u003cimg src=\\\"\\/jira\\/secure\\/projectavatar?pid=12310230&amp;avatarId=22151\\\" alt=\\\"Solr\\\" \\/\u003e\u003c\\/span\u003e\u003c\\/span\u003e\u003cimg src=\\\"data:image\\/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI\\/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMwMCAzMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMCAzMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJMYXllcl8yIj4NCgk8cGF0aCBzdHlsZT0iZmlsbDojRjc5MjMyOyIgZD0iTTE1MCwwQzY2LjY2NywwLDAsNjYuNjY3LDAsMTUwczY2LjY2NywxNTAsMTUwLDE1MHMxNTAtNjYuNjY3LDE1MC0xNTBTMjMzLjMzMywwLDE1MCwweg0KCQkgTTEzNi42NjcsMTc4LjMzM0wxMjUsMTkwbC00MS42NjctNDBMOTUsMTM4LjMzM2wzMC0zMEwxMzYuNjY3LDEyMGwtMzAsMzBMMTM2LjY2NywxNzguMzMzeiBNMjA1LDE2MS42NjdsLTMwLDMwTDE2My4zMzMsMTgwDQoJCWwzMC0zMGwtMzAtMzBMMTc1LDEwOC4zMzNMMjE2LjY2NywxNTBMMjA1LDE2MS42Njd6Ii8+DQo8L2c+DQo8Zz4NCgk8cG9seWdvbiBzdHlsZT0iZmlsbDojRkZGRkZGOyIgcG9pbnRzPSIxNzUsMTkxLjY2NyAyMDUsMTYxLjY2NyAyMTYuNjY3LDE1MCAxNzUsMTA4LjMzMyAxNjMuMzMzLDEyMCAxOTMuMzMzLDE1MCAxNjMuMzMzLDE4MCAJIi8+DQoJPHBvbHlnb24gc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHBvaW50cz0iMTI1LDEwOC4zMzMgOTUsMTM4LjMzMyA4My4zMzMsMTUwIDEyNSwxOTAgMTM2LjY2NywxNzguMzMzIDEwNi42NjcsMTUwIDEzNi42NjcsMTIwIAkiLz4NCjwvZz4NCjwvc3ZnPg0K\\\" alt=\\\"Icon indicating the project type\\\" class=\\\"jira-project-avatar-icon\\\" \\/\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-image --\u003e\u003cdiv class=\\\"aui-page-header-main\\\"\u003e\u003ch1\u003e\u003cdiv class=\\\"aui-group aui-group-split\\\"\u003e\u003cdiv class=\\\"aui-item project-title\\\"\u003e\u003ca href=\\\"\\/jira\\/projects\\/SOLR\\/summary\\\" title=\\\"Solr\\\"\u003eSolr\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/h1\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-main --\u003e\u003c\\/div\u003e\u003c!-- .aui-page-header-inner --\u003e\u003c\\/header\u003e\u003c!-- .aui-page-header --\u003e\u003cnav class=\\\"aui-navgroup aui-navgroup-vertical\\\"\u003e\u003cdiv class=\\\"aui-navgroup-inner sidebar-content-container\\\"\u003e\u003cdiv class=\\\"aui-sidebar-group aui-sidebar-group-tier-one\\\" data-id=\\\"sidebar-navigation-panel\\\"\u003e\u003cul class=\\\"aui-nav\\\"\u003e\u003cli class=\\\"aui-nav-selected\\\" \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR\\/issues\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-issues\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Issues\\\"\u003eIssues\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:report-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large agile-icon-report\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Reports\\\"\u003eReports\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003cli  \u003e\u003ca class=\\\"aui-nav-item \\\" href=\\\"\\/jira\\/projects\\/SOLR?selectedItem=com.atlassian.jira.jira-projects-plugin:components-page\\\" data-link-id=\\\"com.atlassian.jira.jira-projects-plugin:components-page\\\" \u003e\u003cspan class=\\\"aui-icon aui-icon-large icon-sidebar-components\\\"\u003e\u003c\\/span\u003e\u003cspan class=\\\"aui-nav-item-label\\\" title=\\\"Components\\\"\u003eComponents\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/li\u003e\u003c\\/ul\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/nav\u003e\u003c\\/div\u003e\u003cdiv class=\\\"aui-sidebar-footer\\\"\u003e\u003ca class=\\\"aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy\\\" data-tooltip=\\\"Expand sidebar ( [ )\\\" href=\\\"#\\\"\u003e\u003cspan class=\\\"aui-icon aui-icon-small\\\"\u003e\u003c\\/span\u003e\u003c\\/a\u003e\u003c\\/div\u003e\u003c\\/div\u003e\u003c\\/div\u003e\"";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script> 
  <script type="text/javascript" src="/jira/s/d41d8cd98f00b204e9800998ecf8427e-CDN/3pgavk/76005/1c78b578e5c0e813799ab2baea47b6f7/1.0/_/download/batch/jira.webresources:bigpipe-init/jira.webresources:bigpipe-init.js" data-wrm-key="jira.webresources:bigpipe-init" data-wrm-batch-type="resource" data-initially-rendered></script> 
  <form id="jira_request_timing_info" class="dont-default-focus"> 
   <fieldset class="parameters hidden"> 
    <input type="hidden" title="jira.request.start.millis" value="1520268215383"> 
    <input type="hidden" title="jira.request.server.time" value="205"> 
    <input type="hidden" title="jira.request.id" value="1003x95399051x2"> 
    <input type="hidden" title="jira.session.expiry.time" value="-"> 
    <input type="hidden" title="jira.session.expiry.in.mins" value="-"> 
    <input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="2"> 
    <input type="hidden" title="db.reads.time.in.ms" value="33"> 
    <input type="hidden" title="db.conns.time.in.ms" value="38"> 
   </fieldset> 
  </form> 
  <!--
	                 REQUEST ID : 1003x95399051x2
	          REQUEST TIMESTAMP : [05/Mar/2018:16:43:35 +0000]
	               REQUEST TIME : 0.2050
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 2

	                      db.reads : OpSnapshot{name='db.reads', invocationCount=19, elapsedTotal=33376399, elapsedMin=576936, elapsedMax=17105632, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
	                      db.conns : OpSnapshot{name='db.conns', invocationCount=23, elapsedTotal=38747523, elapsedMin=600354, elapsedMax=17133793, resultSetSize=0, cpuTotal=0, cpuMin=0, cpuMax=0}
-->   
 </body>
</html>